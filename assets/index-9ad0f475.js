var NI=Object.defineProperty;var jI=(t,e,n)=>e in t?NI(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var _t=(t,e,n)=>(jI(t,typeof e!="symbol"?e+"":e,n),n),sy=(t,e,n)=>{if(!e.has(t))throw TypeError("Cannot "+n)};var zi=(t,e,n)=>(sy(t,e,"read from private field"),n?n.call(t):e.get(t)),ql=(t,e,n)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,n)},oy=(t,e,n,r)=>(sy(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n);var Bs=(t,e,n)=>(sy(t,e,"access private method"),n);function mP(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function vP(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function II(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),n}var yP={exports:{}},x0={},wP={exports:{}},$t={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Uf=Symbol.for("react.element"),OI=Symbol.for("react.portal"),DI=Symbol.for("react.fragment"),FI=Symbol.for("react.strict_mode"),BI=Symbol.for("react.profiler"),$I=Symbol.for("react.provider"),zI=Symbol.for("react.context"),UI=Symbol.for("react.forward_ref"),VI=Symbol.for("react.suspense"),WI=Symbol.for("react.memo"),HI=Symbol.for("react.lazy"),hC=Symbol.iterator;function GI(t){return t===null||typeof t!="object"?null:(t=hC&&t[hC]||t["@@iterator"],typeof t=="function"?t:null)}var xP={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},_P=Object.assign,bP={};function hd(t,e,n){this.props=t,this.context=e,this.refs=bP,this.updater=n||xP}hd.prototype.isReactComponent={};hd.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};hd.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function SP(){}SP.prototype=hd.prototype;function c_(t,e,n){this.props=t,this.context=e,this.refs=bP,this.updater=n||xP}var d_=c_.prototype=new SP;d_.constructor=c_;_P(d_,hd.prototype);d_.isPureReactComponent=!0;var fC=Array.isArray,CP=Object.prototype.hasOwnProperty,h_={current:null},kP={key:!0,ref:!0,__self:!0,__source:!0};function EP(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)CP.call(e,r)&&!kP.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:Uf,type:t,key:s,ref:o,props:i,_owner:h_.current}}function qI(t,e){return{$$typeof:Uf,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function f_(t){return typeof t=="object"&&t!==null&&t.$$typeof===Uf}function YI(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var pC=/\/+/g;function ay(t,e){return typeof t=="object"&&t!==null&&t.key!=null?YI(""+t.key):e.toString(36)}function Ug(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Uf:case OI:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+ay(o,0):r,fC(i)?(n="",t!=null&&(n=t.replace(pC,"$&/")+"/"),Ug(i,e,n,"",function(c){return c})):i!=null&&(f_(i)&&(i=qI(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(pC,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",fC(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+ay(s,a);o+=Ug(s,e,n,l,i)}else if(l=GI(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+ay(s,a++),o+=Ug(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function $p(t,e,n){if(t==null)return t;var r=[],i=0;return Ug(t,r,"","",function(s){return e.call(n,s,i++)}),r}function KI(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var xi={current:null},Vg={transition:null},XI={ReactCurrentDispatcher:xi,ReactCurrentBatchConfig:Vg,ReactCurrentOwner:h_};function RP(){throw Error("act(...) is not supported in production builds of React.")}$t.Children={map:$p,forEach:function(t,e,n){$p(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return $p(t,function(){e++}),e},toArray:function(t){return $p(t,function(e){return e})||[]},only:function(t){if(!f_(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};$t.Component=hd;$t.Fragment=DI;$t.Profiler=BI;$t.PureComponent=c_;$t.StrictMode=FI;$t.Suspense=VI;$t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=XI;$t.act=RP;$t.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=_P({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=h_.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)CP.call(e,l)&&!kP.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:Uf,type:t.type,key:i,ref:s,props:r,_owner:o}};$t.createContext=function(t){return t={$$typeof:zI,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:$I,_context:t},t.Consumer=t};$t.createElement=EP;$t.createFactory=function(t){var e=EP.bind(null,t);return e.type=t,e};$t.createRef=function(){return{current:null}};$t.forwardRef=function(t){return{$$typeof:UI,render:t}};$t.isValidElement=f_;$t.lazy=function(t){return{$$typeof:HI,_payload:{_status:-1,_result:t},_init:KI}};$t.memo=function(t,e){return{$$typeof:WI,type:t,compare:e===void 0?null:e}};$t.startTransition=function(t){var e=Vg.transition;Vg.transition={};try{t()}finally{Vg.transition=e}};$t.unstable_act=RP;$t.useCallback=function(t,e){return xi.current.useCallback(t,e)};$t.useContext=function(t){return xi.current.useContext(t)};$t.useDebugValue=function(){};$t.useDeferredValue=function(t){return xi.current.useDeferredValue(t)};$t.useEffect=function(t,e){return xi.current.useEffect(t,e)};$t.useId=function(){return xi.current.useId()};$t.useImperativeHandle=function(t,e,n){return xi.current.useImperativeHandle(t,e,n)};$t.useInsertionEffect=function(t,e){return xi.current.useInsertionEffect(t,e)};$t.useLayoutEffect=function(t,e){return xi.current.useLayoutEffect(t,e)};$t.useMemo=function(t,e){return xi.current.useMemo(t,e)};$t.useReducer=function(t,e,n){return xi.current.useReducer(t,e,n)};$t.useRef=function(t){return xi.current.useRef(t)};$t.useState=function(t){return xi.current.useState(t)};$t.useSyncExternalStore=function(t,e,n){return xi.current.useSyncExternalStore(t,e,n)};$t.useTransition=function(){return xi.current.useTransition()};$t.version="18.3.1";wP.exports=$t;var y=wP.exports;const Be=vP(y),TP=mP({__proto__:null,default:Be},[y]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ZI=y,QI=Symbol.for("react.element"),JI=Symbol.for("react.fragment"),eO=Object.prototype.hasOwnProperty,tO=ZI.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,nO={key:!0,ref:!0,__self:!0,__source:!0};function PP(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)eO.call(e,r)&&!nO.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:QI,type:t,key:s,ref:o,props:i,_owner:tO.current}}x0.Fragment=JI;x0.jsx=PP;x0.jsxs=PP;yP.exports=x0;var w=yP.exports,q1={},LP={exports:{}},ts={},MP={exports:{}},AP={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(O,K){var Y=O.length;O.push(K);e:for(;0<Y;){var xe=Y-1>>>1,re=O[xe];if(0<i(re,K))O[xe]=K,O[Y]=re,Y=xe;else break e}}function n(O){return O.length===0?null:O[0]}function r(O){if(O.length===0)return null;var K=O[0],Y=O.pop();if(Y!==K){O[0]=Y;e:for(var xe=0,re=O.length,ue=re>>>1;xe<ue;){var ke=2*(xe+1)-1,qe=O[ke],he=ke+1,ge=O[he];if(0>i(qe,Y))he<re&&0>i(ge,qe)?(O[xe]=ge,O[he]=Y,xe=he):(O[xe]=qe,O[ke]=Y,xe=ke);else if(he<re&&0>i(ge,Y))O[xe]=ge,O[he]=Y,xe=he;else break e}}return K}function i(O,K){var Y=O.sortIndex-K.sortIndex;return Y!==0?Y:O.id-K.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],h=1,f=null,p=3,g=!1,v=!1,x=!1,k=typeof setTimeout=="function"?setTimeout:null,C=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _(O){for(var K=n(c);K!==null;){if(K.callback===null)r(c);else if(K.startTime<=O)r(c),K.sortIndex=K.expirationTime,e(l,K);else break;K=n(c)}}function T(O){if(x=!1,_(O),!v)if(n(l)!==null)v=!0,G(R);else{var K=n(c);K!==null&&te(T,K.startTime-O)}}function R(O,K){v=!1,x&&(x=!1,C(A),A=-1),g=!0;var Y=p;try{for(_(K),f=n(l);f!==null&&(!(f.expirationTime>K)||O&&!V());){var xe=f.callback;if(typeof xe=="function"){f.callback=null,p=f.priorityLevel;var re=xe(f.expirationTime<=K);K=t.unstable_now(),typeof re=="function"?f.callback=re:f===n(l)&&r(l),_(K)}else r(l);f=n(l)}if(f!==null)var ue=!0;else{var ke=n(c);ke!==null&&te(T,ke.startTime-K),ue=!1}return ue}finally{f=null,p=Y,g=!1}}var L=!1,M=null,A=-1,$=5,j=-1;function V(){return!(t.unstable_now()-j<$)}function U(){if(M!==null){var O=t.unstable_now();j=O;var K=!0;try{K=M(!0,O)}finally{K?B():(L=!1,M=null)}}else L=!1}var B;if(typeof b=="function")B=function(){b(U)};else if(typeof MessageChannel<"u"){var Z=new MessageChannel,q=Z.port2;Z.port1.onmessage=U,B=function(){q.postMessage(null)}}else B=function(){k(U,0)};function G(O){M=O,L||(L=!0,B())}function te(O,K){A=k(function(){O(t.unstable_now())},K)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(O){O.callback=null},t.unstable_continueExecution=function(){v||g||(v=!0,G(R))},t.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):$=0<O?Math.floor(1e3/O):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(O){switch(p){case 1:case 2:case 3:var K=3;break;default:K=p}var Y=p;p=K;try{return O()}finally{p=Y}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(O,K){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var Y=p;p=O;try{return K()}finally{p=Y}},t.unstable_scheduleCallback=function(O,K,Y){var xe=t.unstable_now();switch(typeof Y=="object"&&Y!==null?(Y=Y.delay,Y=typeof Y=="number"&&0<Y?xe+Y:xe):Y=xe,O){case 1:var re=-1;break;case 2:re=250;break;case 5:re=1073741823;break;case 4:re=1e4;break;default:re=5e3}return re=Y+re,O={id:h++,callback:K,priorityLevel:O,startTime:Y,expirationTime:re,sortIndex:-1},Y>xe?(O.sortIndex=Y,e(c,O),n(l)===null&&O===n(c)&&(x?(C(A),A=-1):x=!0,te(T,Y-xe))):(O.sortIndex=re,e(l,O),v||g||(v=!0,G(R))),O},t.unstable_shouldYield=V,t.unstable_wrapCallback=function(O){var K=p;return function(){var Y=p;p=K;try{return O.apply(this,arguments)}finally{p=Y}}}})(AP);MP.exports=AP;var Nh=MP.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rO=y,Ji=Nh;function Ee(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var NP=new Set,af={};function Ru(t,e){Gc(t,e),Gc(t+"Capture",e)}function Gc(t,e){for(af[t]=e,t=0;t<e.length;t++)NP.add(e[t])}var oa=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Y1=Object.prototype.hasOwnProperty,iO=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,gC={},mC={};function sO(t){return Y1.call(mC,t)?!0:Y1.call(gC,t)?!1:iO.test(t)?mC[t]=!0:(gC[t]=!0,!1)}function oO(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function aO(t,e,n,r){if(e===null||typeof e>"u"||oO(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function _i(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Gr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Gr[t]=new _i(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Gr[e]=new _i(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Gr[t]=new _i(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Gr[t]=new _i(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Gr[t]=new _i(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Gr[t]=new _i(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Gr[t]=new _i(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Gr[t]=new _i(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Gr[t]=new _i(t,5,!1,t.toLowerCase(),null,!1,!1)});var p_=/[\-:]([a-z])/g;function g_(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(p_,g_);Gr[e]=new _i(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(p_,g_);Gr[e]=new _i(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(p_,g_);Gr[e]=new _i(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Gr[t]=new _i(t,1,!1,t.toLowerCase(),null,!1,!1)});Gr.xlinkHref=new _i("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Gr[t]=new _i(t,1,!1,t.toLowerCase(),null,!0,!0)});function m_(t,e,n,r){var i=Gr.hasOwnProperty(e)?Gr[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(aO(e,n,i,r)&&(n=null),r||i===null?sO(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var pa=rO.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,zp=Symbol.for("react.element"),sc=Symbol.for("react.portal"),oc=Symbol.for("react.fragment"),v_=Symbol.for("react.strict_mode"),K1=Symbol.for("react.profiler"),jP=Symbol.for("react.provider"),IP=Symbol.for("react.context"),y_=Symbol.for("react.forward_ref"),X1=Symbol.for("react.suspense"),Z1=Symbol.for("react.suspense_list"),w_=Symbol.for("react.memo"),Ga=Symbol.for("react.lazy"),OP=Symbol.for("react.offscreen"),vC=Symbol.iterator;function Qd(t){return t===null||typeof t!="object"?null:(t=vC&&t[vC]||t["@@iterator"],typeof t=="function"?t:null)}var Fn=Object.assign,ly;function yh(t){if(ly===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);ly=e&&e[1]||""}return`
`+ly+t}var uy=!1;function cy(t,e){if(!t||uy)return"";uy=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{uy=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?yh(t):""}function lO(t){switch(t.tag){case 5:return yh(t.type);case 16:return yh("Lazy");case 13:return yh("Suspense");case 19:return yh("SuspenseList");case 0:case 2:case 15:return t=cy(t.type,!1),t;case 11:return t=cy(t.type.render,!1),t;case 1:return t=cy(t.type,!0),t;default:return""}}function Q1(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case oc:return"Fragment";case sc:return"Portal";case K1:return"Profiler";case v_:return"StrictMode";case X1:return"Suspense";case Z1:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case IP:return(t.displayName||"Context")+".Consumer";case jP:return(t._context.displayName||"Context")+".Provider";case y_:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case w_:return e=t.displayName||null,e!==null?e:Q1(t.type)||"Memo";case Ga:e=t._payload,t=t._init;try{return Q1(t(e))}catch{}}return null}function uO(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Q1(e);case 8:return e===v_?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ml(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function DP(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function cO(t){var e=DP(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Up(t){t._valueTracker||(t._valueTracker=cO(t))}function FP(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=DP(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function gm(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function J1(t,e){var n=e.checked;return Fn({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function yC(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=ml(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function BP(t,e){e=e.checked,e!=null&&m_(t,"checked",e,!1)}function ew(t,e){BP(t,e);var n=ml(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?tw(t,e.type,n):e.hasOwnProperty("defaultValue")&&tw(t,e.type,ml(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function wC(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function tw(t,e,n){(e!=="number"||gm(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var wh=Array.isArray;function Ac(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+ml(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function nw(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Ee(91));return Fn({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function xC(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Ee(92));if(wh(n)){if(1<n.length)throw Error(Ee(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:ml(n)}}function $P(t,e){var n=ml(e.value),r=ml(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function _C(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function zP(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function rw(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?zP(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Vp,UP=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Vp=Vp||document.createElement("div"),Vp.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Vp.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function lf(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var jh={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},dO=["Webkit","ms","Moz","O"];Object.keys(jh).forEach(function(t){dO.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),jh[e]=jh[t]})});function VP(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||jh.hasOwnProperty(t)&&jh[t]?(""+e).trim():e+"px"}function WP(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=VP(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var hO=Fn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function iw(t,e){if(e){if(hO[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Ee(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Ee(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Ee(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Ee(62))}}function sw(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ow=null;function x_(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var aw=null,Nc=null,jc=null;function bC(t){if(t=Hf(t)){if(typeof aw!="function")throw Error(Ee(280));var e=t.stateNode;e&&(e=k0(e),aw(t.stateNode,t.type,e))}}function HP(t){Nc?jc?jc.push(t):jc=[t]:Nc=t}function GP(){if(Nc){var t=Nc,e=jc;if(jc=Nc=null,bC(t),e)for(t=0;t<e.length;t++)bC(e[t])}}function qP(t,e){return t(e)}function YP(){}var dy=!1;function KP(t,e,n){if(dy)return t(e,n);dy=!0;try{return qP(t,e,n)}finally{dy=!1,(Nc!==null||jc!==null)&&(YP(),GP())}}function uf(t,e){var n=t.stateNode;if(n===null)return null;var r=k0(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Ee(231,e,typeof n));return n}var lw=!1;if(oa)try{var Jd={};Object.defineProperty(Jd,"passive",{get:function(){lw=!0}}),window.addEventListener("test",Jd,Jd),window.removeEventListener("test",Jd,Jd)}catch{lw=!1}function fO(t,e,n,r,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(h){this.onError(h)}}var Ih=!1,mm=null,vm=!1,uw=null,pO={onError:function(t){Ih=!0,mm=t}};function gO(t,e,n,r,i,s,o,a,l){Ih=!1,mm=null,fO.apply(pO,arguments)}function mO(t,e,n,r,i,s,o,a,l){if(gO.apply(this,arguments),Ih){if(Ih){var c=mm;Ih=!1,mm=null}else throw Error(Ee(198));vm||(vm=!0,uw=c)}}function Tu(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function XP(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function SC(t){if(Tu(t)!==t)throw Error(Ee(188))}function vO(t){var e=t.alternate;if(!e){if(e=Tu(t),e===null)throw Error(Ee(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return SC(i),t;if(s===r)return SC(i),e;s=s.sibling}throw Error(Ee(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(Ee(189))}}if(n.alternate!==r)throw Error(Ee(190))}if(n.tag!==3)throw Error(Ee(188));return n.stateNode.current===n?t:e}function ZP(t){return t=vO(t),t!==null?QP(t):null}function QP(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=QP(t);if(e!==null)return e;t=t.sibling}return null}var JP=Ji.unstable_scheduleCallback,CC=Ji.unstable_cancelCallback,yO=Ji.unstable_shouldYield,wO=Ji.unstable_requestPaint,ir=Ji.unstable_now,xO=Ji.unstable_getCurrentPriorityLevel,__=Ji.unstable_ImmediatePriority,e4=Ji.unstable_UserBlockingPriority,ym=Ji.unstable_NormalPriority,_O=Ji.unstable_LowPriority,t4=Ji.unstable_IdlePriority,_0=null,bo=null;function bO(t){if(bo&&typeof bo.onCommitFiberRoot=="function")try{bo.onCommitFiberRoot(_0,t,void 0,(t.current.flags&128)===128)}catch{}}var Zs=Math.clz32?Math.clz32:kO,SO=Math.log,CO=Math.LN2;function kO(t){return t>>>=0,t===0?32:31-(SO(t)/CO|0)|0}var Wp=64,Hp=4194304;function xh(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function wm(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=xh(a):(s&=o,s!==0&&(r=xh(s)))}else o=n&~i,o!==0?r=xh(o):s!==0&&(r=xh(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Zs(e),i=1<<n,r|=t[n],e&=~i;return r}function EO(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function RO(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-Zs(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=EO(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function cw(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function n4(){var t=Wp;return Wp<<=1,!(Wp&4194240)&&(Wp=64),t}function hy(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Vf(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Zs(e),t[e]=n}function TO(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Zs(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function b_(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Zs(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var cn=0;function r4(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var i4,S_,s4,o4,a4,dw=!1,Gp=[],il=null,sl=null,ol=null,cf=new Map,df=new Map,Ka=[],PO="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function kC(t,e){switch(t){case"focusin":case"focusout":il=null;break;case"dragenter":case"dragleave":sl=null;break;case"mouseover":case"mouseout":ol=null;break;case"pointerover":case"pointerout":cf.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":df.delete(e.pointerId)}}function eh(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Hf(e),e!==null&&S_(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function LO(t,e,n,r,i){switch(e){case"focusin":return il=eh(il,t,e,n,r,i),!0;case"dragenter":return sl=eh(sl,t,e,n,r,i),!0;case"mouseover":return ol=eh(ol,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return cf.set(s,eh(cf.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,df.set(s,eh(df.get(s)||null,t,e,n,r,i)),!0}return!1}function l4(t){var e=ou(t.target);if(e!==null){var n=Tu(e);if(n!==null){if(e=n.tag,e===13){if(e=XP(n),e!==null){t.blockedOn=e,a4(t.priority,function(){s4(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Wg(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=hw(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);ow=r,n.target.dispatchEvent(r),ow=null}else return e=Hf(n),e!==null&&S_(e),t.blockedOn=n,!1;e.shift()}return!0}function EC(t,e,n){Wg(t)&&n.delete(e)}function MO(){dw=!1,il!==null&&Wg(il)&&(il=null),sl!==null&&Wg(sl)&&(sl=null),ol!==null&&Wg(ol)&&(ol=null),cf.forEach(EC),df.forEach(EC)}function th(t,e){t.blockedOn===e&&(t.blockedOn=null,dw||(dw=!0,Ji.unstable_scheduleCallback(Ji.unstable_NormalPriority,MO)))}function hf(t){function e(i){return th(i,t)}if(0<Gp.length){th(Gp[0],t);for(var n=1;n<Gp.length;n++){var r=Gp[n];r.blockedOn===t&&(r.blockedOn=null)}}for(il!==null&&th(il,t),sl!==null&&th(sl,t),ol!==null&&th(ol,t),cf.forEach(e),df.forEach(e),n=0;n<Ka.length;n++)r=Ka[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Ka.length&&(n=Ka[0],n.blockedOn===null);)l4(n),n.blockedOn===null&&Ka.shift()}var Ic=pa.ReactCurrentBatchConfig,xm=!0;function AO(t,e,n,r){var i=cn,s=Ic.transition;Ic.transition=null;try{cn=1,C_(t,e,n,r)}finally{cn=i,Ic.transition=s}}function NO(t,e,n,r){var i=cn,s=Ic.transition;Ic.transition=null;try{cn=4,C_(t,e,n,r)}finally{cn=i,Ic.transition=s}}function C_(t,e,n,r){if(xm){var i=hw(t,e,n,r);if(i===null)by(t,e,r,_m,n),kC(t,r);else if(LO(i,t,e,n,r))r.stopPropagation();else if(kC(t,r),e&4&&-1<PO.indexOf(t)){for(;i!==null;){var s=Hf(i);if(s!==null&&i4(s),s=hw(t,e,n,r),s===null&&by(t,e,r,_m,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else by(t,e,r,null,n)}}var _m=null;function hw(t,e,n,r){if(_m=null,t=x_(r),t=ou(t),t!==null)if(e=Tu(t),e===null)t=null;else if(n=e.tag,n===13){if(t=XP(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return _m=t,null}function u4(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(xO()){case __:return 1;case e4:return 4;case ym:case _O:return 16;case t4:return 536870912;default:return 16}default:return 16}}var Ja=null,k_=null,Hg=null;function c4(){if(Hg)return Hg;var t,e=k_,n=e.length,r,i="value"in Ja?Ja.value:Ja.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return Hg=i.slice(t,1<r?1-r:void 0)}function Gg(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function qp(){return!0}function RC(){return!1}function ns(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?qp:RC,this.isPropagationStopped=RC,this}return Fn(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=qp)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=qp)},persist:function(){},isPersistent:qp}),e}var fd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},E_=ns(fd),Wf=Fn({},fd,{view:0,detail:0}),jO=ns(Wf),fy,py,nh,b0=Fn({},Wf,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:R_,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==nh&&(nh&&t.type==="mousemove"?(fy=t.screenX-nh.screenX,py=t.screenY-nh.screenY):py=fy=0,nh=t),fy)},movementY:function(t){return"movementY"in t?t.movementY:py}}),TC=ns(b0),IO=Fn({},b0,{dataTransfer:0}),OO=ns(IO),DO=Fn({},Wf,{relatedTarget:0}),gy=ns(DO),FO=Fn({},fd,{animationName:0,elapsedTime:0,pseudoElement:0}),BO=ns(FO),$O=Fn({},fd,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),zO=ns($O),UO=Fn({},fd,{data:0}),PC=ns(UO),VO={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},WO={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},HO={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function GO(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=HO[t])?!!e[t]:!1}function R_(){return GO}var qO=Fn({},Wf,{key:function(t){if(t.key){var e=VO[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Gg(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?WO[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:R_,charCode:function(t){return t.type==="keypress"?Gg(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Gg(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),YO=ns(qO),KO=Fn({},b0,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),LC=ns(KO),XO=Fn({},Wf,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:R_}),ZO=ns(XO),QO=Fn({},fd,{propertyName:0,elapsedTime:0,pseudoElement:0}),JO=ns(QO),e8=Fn({},b0,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),t8=ns(e8),n8=[9,13,27,32],T_=oa&&"CompositionEvent"in window,Oh=null;oa&&"documentMode"in document&&(Oh=document.documentMode);var r8=oa&&"TextEvent"in window&&!Oh,d4=oa&&(!T_||Oh&&8<Oh&&11>=Oh),MC=String.fromCharCode(32),AC=!1;function h4(t,e){switch(t){case"keyup":return n8.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function f4(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ac=!1;function i8(t,e){switch(t){case"compositionend":return f4(e);case"keypress":return e.which!==32?null:(AC=!0,MC);case"textInput":return t=e.data,t===MC&&AC?null:t;default:return null}}function s8(t,e){if(ac)return t==="compositionend"||!T_&&h4(t,e)?(t=c4(),Hg=k_=Ja=null,ac=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return d4&&e.locale!=="ko"?null:e.data;default:return null}}var o8={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function NC(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!o8[t.type]:e==="textarea"}function p4(t,e,n,r){HP(r),e=bm(e,"onChange"),0<e.length&&(n=new E_("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Dh=null,ff=null;function a8(t){k4(t,0)}function S0(t){var e=cc(t);if(FP(e))return t}function l8(t,e){if(t==="change")return e}var g4=!1;if(oa){var my;if(oa){var vy="oninput"in document;if(!vy){var jC=document.createElement("div");jC.setAttribute("oninput","return;"),vy=typeof jC.oninput=="function"}my=vy}else my=!1;g4=my&&(!document.documentMode||9<document.documentMode)}function IC(){Dh&&(Dh.detachEvent("onpropertychange",m4),ff=Dh=null)}function m4(t){if(t.propertyName==="value"&&S0(ff)){var e=[];p4(e,ff,t,x_(t)),KP(a8,e)}}function u8(t,e,n){t==="focusin"?(IC(),Dh=e,ff=n,Dh.attachEvent("onpropertychange",m4)):t==="focusout"&&IC()}function c8(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return S0(ff)}function d8(t,e){if(t==="click")return S0(e)}function h8(t,e){if(t==="input"||t==="change")return S0(e)}function f8(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Js=typeof Object.is=="function"?Object.is:f8;function pf(t,e){if(Js(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Y1.call(e,i)||!Js(t[i],e[i]))return!1}return!0}function OC(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function DC(t,e){var n=OC(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=OC(n)}}function v4(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?v4(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function y4(){for(var t=window,e=gm();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=gm(t.document)}return e}function P_(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function p8(t){var e=y4(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&v4(n.ownerDocument.documentElement,n)){if(r!==null&&P_(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=DC(n,s);var o=DC(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var g8=oa&&"documentMode"in document&&11>=document.documentMode,lc=null,fw=null,Fh=null,pw=!1;function FC(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;pw||lc==null||lc!==gm(r)||(r=lc,"selectionStart"in r&&P_(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Fh&&pf(Fh,r)||(Fh=r,r=bm(fw,"onSelect"),0<r.length&&(e=new E_("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=lc)))}function Yp(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var uc={animationend:Yp("Animation","AnimationEnd"),animationiteration:Yp("Animation","AnimationIteration"),animationstart:Yp("Animation","AnimationStart"),transitionend:Yp("Transition","TransitionEnd")},yy={},w4={};oa&&(w4=document.createElement("div").style,"AnimationEvent"in window||(delete uc.animationend.animation,delete uc.animationiteration.animation,delete uc.animationstart.animation),"TransitionEvent"in window||delete uc.transitionend.transition);function C0(t){if(yy[t])return yy[t];if(!uc[t])return t;var e=uc[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in w4)return yy[t]=e[n];return t}var x4=C0("animationend"),_4=C0("animationiteration"),b4=C0("animationstart"),S4=C0("transitionend"),C4=new Map,BC="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function xl(t,e){C4.set(t,e),Ru(e,[t])}for(var wy=0;wy<BC.length;wy++){var xy=BC[wy],m8=xy.toLowerCase(),v8=xy[0].toUpperCase()+xy.slice(1);xl(m8,"on"+v8)}xl(x4,"onAnimationEnd");xl(_4,"onAnimationIteration");xl(b4,"onAnimationStart");xl("dblclick","onDoubleClick");xl("focusin","onFocus");xl("focusout","onBlur");xl(S4,"onTransitionEnd");Gc("onMouseEnter",["mouseout","mouseover"]);Gc("onMouseLeave",["mouseout","mouseover"]);Gc("onPointerEnter",["pointerout","pointerover"]);Gc("onPointerLeave",["pointerout","pointerover"]);Ru("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ru("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ru("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ru("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ru("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ru("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var _h="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),y8=new Set("cancel close invalid load scroll toggle".split(" ").concat(_h));function $C(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,mO(r,e,void 0,t),t.currentTarget=null}function k4(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;$C(i,a,c),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;$C(i,a,c),s=l}}}if(vm)throw t=uw,vm=!1,uw=null,t}function bn(t,e){var n=e[ww];n===void 0&&(n=e[ww]=new Set);var r=t+"__bubble";n.has(r)||(E4(e,t,2,!1),n.add(r))}function _y(t,e,n){var r=0;e&&(r|=4),E4(n,t,r,e)}var Kp="_reactListening"+Math.random().toString(36).slice(2);function gf(t){if(!t[Kp]){t[Kp]=!0,NP.forEach(function(n){n!=="selectionchange"&&(y8.has(n)||_y(n,!1,t),_y(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Kp]||(e[Kp]=!0,_y("selectionchange",!1,e))}}function E4(t,e,n,r){switch(u4(e)){case 1:var i=AO;break;case 4:i=NO;break;default:i=C_}n=i.bind(null,e,n,t),i=void 0,!lw||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function by(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=ou(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}KP(function(){var c=s,h=x_(n),f=[];e:{var p=C4.get(t);if(p!==void 0){var g=E_,v=t;switch(t){case"keypress":if(Gg(n)===0)break e;case"keydown":case"keyup":g=YO;break;case"focusin":v="focus",g=gy;break;case"focusout":v="blur",g=gy;break;case"beforeblur":case"afterblur":g=gy;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=TC;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=OO;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=ZO;break;case x4:case _4:case b4:g=BO;break;case S4:g=JO;break;case"scroll":g=jO;break;case"wheel":g=t8;break;case"copy":case"cut":case"paste":g=zO;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=LC}var x=(e&4)!==0,k=!x&&t==="scroll",C=x?p!==null?p+"Capture":null:p;x=[];for(var b=c,_;b!==null;){_=b;var T=_.stateNode;if(_.tag===5&&T!==null&&(_=T,C!==null&&(T=uf(b,C),T!=null&&x.push(mf(b,T,_)))),k)break;b=b.return}0<x.length&&(p=new g(p,v,null,n,h),f.push({event:p,listeners:x}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",g=t==="mouseout"||t==="pointerout",p&&n!==ow&&(v=n.relatedTarget||n.fromElement)&&(ou(v)||v[aa]))break e;if((g||p)&&(p=h.window===h?h:(p=h.ownerDocument)?p.defaultView||p.parentWindow:window,g?(v=n.relatedTarget||n.toElement,g=c,v=v?ou(v):null,v!==null&&(k=Tu(v),v!==k||v.tag!==5&&v.tag!==6)&&(v=null)):(g=null,v=c),g!==v)){if(x=TC,T="onMouseLeave",C="onMouseEnter",b="mouse",(t==="pointerout"||t==="pointerover")&&(x=LC,T="onPointerLeave",C="onPointerEnter",b="pointer"),k=g==null?p:cc(g),_=v==null?p:cc(v),p=new x(T,b+"leave",g,n,h),p.target=k,p.relatedTarget=_,T=null,ou(h)===c&&(x=new x(C,b+"enter",v,n,h),x.target=_,x.relatedTarget=k,T=x),k=T,g&&v)t:{for(x=g,C=v,b=0,_=x;_;_=qu(_))b++;for(_=0,T=C;T;T=qu(T))_++;for(;0<b-_;)x=qu(x),b--;for(;0<_-b;)C=qu(C),_--;for(;b--;){if(x===C||C!==null&&x===C.alternate)break t;x=qu(x),C=qu(C)}x=null}else x=null;g!==null&&zC(f,p,g,x,!1),v!==null&&k!==null&&zC(f,k,v,x,!0)}}e:{if(p=c?cc(c):window,g=p.nodeName&&p.nodeName.toLowerCase(),g==="select"||g==="input"&&p.type==="file")var R=l8;else if(NC(p))if(g4)R=h8;else{R=c8;var L=u8}else(g=p.nodeName)&&g.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(R=d8);if(R&&(R=R(t,c))){p4(f,R,n,h);break e}L&&L(t,p,c),t==="focusout"&&(L=p._wrapperState)&&L.controlled&&p.type==="number"&&tw(p,"number",p.value)}switch(L=c?cc(c):window,t){case"focusin":(NC(L)||L.contentEditable==="true")&&(lc=L,fw=c,Fh=null);break;case"focusout":Fh=fw=lc=null;break;case"mousedown":pw=!0;break;case"contextmenu":case"mouseup":case"dragend":pw=!1,FC(f,n,h);break;case"selectionchange":if(g8)break;case"keydown":case"keyup":FC(f,n,h)}var M;if(T_)e:{switch(t){case"compositionstart":var A="onCompositionStart";break e;case"compositionend":A="onCompositionEnd";break e;case"compositionupdate":A="onCompositionUpdate";break e}A=void 0}else ac?h4(t,n)&&(A="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(A="onCompositionStart");A&&(d4&&n.locale!=="ko"&&(ac||A!=="onCompositionStart"?A==="onCompositionEnd"&&ac&&(M=c4()):(Ja=h,k_="value"in Ja?Ja.value:Ja.textContent,ac=!0)),L=bm(c,A),0<L.length&&(A=new PC(A,t,null,n,h),f.push({event:A,listeners:L}),M?A.data=M:(M=f4(n),M!==null&&(A.data=M)))),(M=r8?i8(t,n):s8(t,n))&&(c=bm(c,"onBeforeInput"),0<c.length&&(h=new PC("onBeforeInput","beforeinput",null,n,h),f.push({event:h,listeners:c}),h.data=M))}k4(f,e)})}function mf(t,e,n){return{instance:t,listener:e,currentTarget:n}}function bm(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=uf(t,n),s!=null&&r.unshift(mf(t,s,i)),s=uf(t,e),s!=null&&r.push(mf(t,s,i))),t=t.return}return r}function qu(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function zC(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,i?(l=uf(n,s),l!=null&&o.unshift(mf(n,l,a))):i||(l=uf(n,s),l!=null&&o.push(mf(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var w8=/\r\n?/g,x8=/\u0000|\uFFFD/g;function UC(t){return(typeof t=="string"?t:""+t).replace(w8,`
`).replace(x8,"")}function Xp(t,e,n){if(e=UC(e),UC(t)!==e&&n)throw Error(Ee(425))}function Sm(){}var gw=null,mw=null;function vw(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var yw=typeof setTimeout=="function"?setTimeout:void 0,_8=typeof clearTimeout=="function"?clearTimeout:void 0,VC=typeof Promise=="function"?Promise:void 0,b8=typeof queueMicrotask=="function"?queueMicrotask:typeof VC<"u"?function(t){return VC.resolve(null).then(t).catch(S8)}:yw;function S8(t){setTimeout(function(){throw t})}function Sy(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),hf(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);hf(e)}function al(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function WC(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var pd=Math.random().toString(36).slice(2),xo="__reactFiber$"+pd,vf="__reactProps$"+pd,aa="__reactContainer$"+pd,ww="__reactEvents$"+pd,C8="__reactListeners$"+pd,k8="__reactHandles$"+pd;function ou(t){var e=t[xo];if(e)return e;for(var n=t.parentNode;n;){if(e=n[aa]||n[xo]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=WC(t);t!==null;){if(n=t[xo])return n;t=WC(t)}return e}t=n,n=t.parentNode}return null}function Hf(t){return t=t[xo]||t[aa],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function cc(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Ee(33))}function k0(t){return t[vf]||null}var xw=[],dc=-1;function _l(t){return{current:t}}function Sn(t){0>dc||(t.current=xw[dc],xw[dc]=null,dc--)}function wn(t,e){dc++,xw[dc]=t.current,t.current=e}var vl={},li=_l(vl),Ai=_l(!1),wu=vl;function qc(t,e){var n=t.type.contextTypes;if(!n)return vl;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Ni(t){return t=t.childContextTypes,t!=null}function Cm(){Sn(Ai),Sn(li)}function HC(t,e,n){if(li.current!==vl)throw Error(Ee(168));wn(li,e),wn(Ai,n)}function R4(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(Ee(108,uO(t)||"Unknown",i));return Fn({},n,r)}function km(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||vl,wu=li.current,wn(li,t),wn(Ai,Ai.current),!0}function GC(t,e,n){var r=t.stateNode;if(!r)throw Error(Ee(169));n?(t=R4(t,e,wu),r.__reactInternalMemoizedMergedChildContext=t,Sn(Ai),Sn(li),wn(li,t)):Sn(Ai),wn(Ai,n)}var ea=null,E0=!1,Cy=!1;function T4(t){ea===null?ea=[t]:ea.push(t)}function E8(t){E0=!0,T4(t)}function bl(){if(!Cy&&ea!==null){Cy=!0;var t=0,e=cn;try{var n=ea;for(cn=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}ea=null,E0=!1}catch(i){throw ea!==null&&(ea=ea.slice(t+1)),JP(__,bl),i}finally{cn=e,Cy=!1}}return null}var hc=[],fc=0,Em=null,Rm=0,vs=[],ys=0,xu=null,ta=1,na="";function Ql(t,e){hc[fc++]=Rm,hc[fc++]=Em,Em=t,Rm=e}function P4(t,e,n){vs[ys++]=ta,vs[ys++]=na,vs[ys++]=xu,xu=t;var r=ta;t=na;var i=32-Zs(r)-1;r&=~(1<<i),n+=1;var s=32-Zs(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,ta=1<<32-Zs(e)+i|n<<i|r,na=s+t}else ta=1<<s|n<<i|r,na=t}function L_(t){t.return!==null&&(Ql(t,1),P4(t,1,0))}function M_(t){for(;t===Em;)Em=hc[--fc],hc[fc]=null,Rm=hc[--fc],hc[fc]=null;for(;t===xu;)xu=vs[--ys],vs[ys]=null,na=vs[--ys],vs[ys]=null,ta=vs[--ys],vs[ys]=null}var Xi=null,Ki=null,En=!1,Ys=null;function L4(t,e){var n=bs(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function qC(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Xi=t,Ki=al(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Xi=t,Ki=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=xu!==null?{id:ta,overflow:na}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=bs(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Xi=t,Ki=null,!0):!1;default:return!1}}function _w(t){return(t.mode&1)!==0&&(t.flags&128)===0}function bw(t){if(En){var e=Ki;if(e){var n=e;if(!qC(t,e)){if(_w(t))throw Error(Ee(418));e=al(n.nextSibling);var r=Xi;e&&qC(t,e)?L4(r,n):(t.flags=t.flags&-4097|2,En=!1,Xi=t)}}else{if(_w(t))throw Error(Ee(418));t.flags=t.flags&-4097|2,En=!1,Xi=t}}}function YC(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Xi=t}function Zp(t){if(t!==Xi)return!1;if(!En)return YC(t),En=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!vw(t.type,t.memoizedProps)),e&&(e=Ki)){if(_w(t))throw M4(),Error(Ee(418));for(;e;)L4(t,e),e=al(e.nextSibling)}if(YC(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Ee(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Ki=al(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Ki=null}}else Ki=Xi?al(t.stateNode.nextSibling):null;return!0}function M4(){for(var t=Ki;t;)t=al(t.nextSibling)}function Yc(){Ki=Xi=null,En=!1}function A_(t){Ys===null?Ys=[t]:Ys.push(t)}var R8=pa.ReactCurrentBatchConfig;function rh(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Ee(309));var r=n.stateNode}if(!r)throw Error(Ee(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(Ee(284));if(!n._owner)throw Error(Ee(290,t))}return t}function Qp(t,e){throw t=Object.prototype.toString.call(e),Error(Ee(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function KC(t){var e=t._init;return e(t._payload)}function A4(t){function e(C,b){if(t){var _=C.deletions;_===null?(C.deletions=[b],C.flags|=16):_.push(b)}}function n(C,b){if(!t)return null;for(;b!==null;)e(C,b),b=b.sibling;return null}function r(C,b){for(C=new Map;b!==null;)b.key!==null?C.set(b.key,b):C.set(b.index,b),b=b.sibling;return C}function i(C,b){return C=dl(C,b),C.index=0,C.sibling=null,C}function s(C,b,_){return C.index=_,t?(_=C.alternate,_!==null?(_=_.index,_<b?(C.flags|=2,b):_):(C.flags|=2,b)):(C.flags|=1048576,b)}function o(C){return t&&C.alternate===null&&(C.flags|=2),C}function a(C,b,_,T){return b===null||b.tag!==6?(b=My(_,C.mode,T),b.return=C,b):(b=i(b,_),b.return=C,b)}function l(C,b,_,T){var R=_.type;return R===oc?h(C,b,_.props.children,T,_.key):b!==null&&(b.elementType===R||typeof R=="object"&&R!==null&&R.$$typeof===Ga&&KC(R)===b.type)?(T=i(b,_.props),T.ref=rh(C,b,_),T.return=C,T):(T=Jg(_.type,_.key,_.props,null,C.mode,T),T.ref=rh(C,b,_),T.return=C,T)}function c(C,b,_,T){return b===null||b.tag!==4||b.stateNode.containerInfo!==_.containerInfo||b.stateNode.implementation!==_.implementation?(b=Ay(_,C.mode,T),b.return=C,b):(b=i(b,_.children||[]),b.return=C,b)}function h(C,b,_,T,R){return b===null||b.tag!==7?(b=pu(_,C.mode,T,R),b.return=C,b):(b=i(b,_),b.return=C,b)}function f(C,b,_){if(typeof b=="string"&&b!==""||typeof b=="number")return b=My(""+b,C.mode,_),b.return=C,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case zp:return _=Jg(b.type,b.key,b.props,null,C.mode,_),_.ref=rh(C,null,b),_.return=C,_;case sc:return b=Ay(b,C.mode,_),b.return=C,b;case Ga:var T=b._init;return f(C,T(b._payload),_)}if(wh(b)||Qd(b))return b=pu(b,C.mode,_,null),b.return=C,b;Qp(C,b)}return null}function p(C,b,_,T){var R=b!==null?b.key:null;if(typeof _=="string"&&_!==""||typeof _=="number")return R!==null?null:a(C,b,""+_,T);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case zp:return _.key===R?l(C,b,_,T):null;case sc:return _.key===R?c(C,b,_,T):null;case Ga:return R=_._init,p(C,b,R(_._payload),T)}if(wh(_)||Qd(_))return R!==null?null:h(C,b,_,T,null);Qp(C,_)}return null}function g(C,b,_,T,R){if(typeof T=="string"&&T!==""||typeof T=="number")return C=C.get(_)||null,a(b,C,""+T,R);if(typeof T=="object"&&T!==null){switch(T.$$typeof){case zp:return C=C.get(T.key===null?_:T.key)||null,l(b,C,T,R);case sc:return C=C.get(T.key===null?_:T.key)||null,c(b,C,T,R);case Ga:var L=T._init;return g(C,b,_,L(T._payload),R)}if(wh(T)||Qd(T))return C=C.get(_)||null,h(b,C,T,R,null);Qp(b,T)}return null}function v(C,b,_,T){for(var R=null,L=null,M=b,A=b=0,$=null;M!==null&&A<_.length;A++){M.index>A?($=M,M=null):$=M.sibling;var j=p(C,M,_[A],T);if(j===null){M===null&&(M=$);break}t&&M&&j.alternate===null&&e(C,M),b=s(j,b,A),L===null?R=j:L.sibling=j,L=j,M=$}if(A===_.length)return n(C,M),En&&Ql(C,A),R;if(M===null){for(;A<_.length;A++)M=f(C,_[A],T),M!==null&&(b=s(M,b,A),L===null?R=M:L.sibling=M,L=M);return En&&Ql(C,A),R}for(M=r(C,M);A<_.length;A++)$=g(M,C,A,_[A],T),$!==null&&(t&&$.alternate!==null&&M.delete($.key===null?A:$.key),b=s($,b,A),L===null?R=$:L.sibling=$,L=$);return t&&M.forEach(function(V){return e(C,V)}),En&&Ql(C,A),R}function x(C,b,_,T){var R=Qd(_);if(typeof R!="function")throw Error(Ee(150));if(_=R.call(_),_==null)throw Error(Ee(151));for(var L=R=null,M=b,A=b=0,$=null,j=_.next();M!==null&&!j.done;A++,j=_.next()){M.index>A?($=M,M=null):$=M.sibling;var V=p(C,M,j.value,T);if(V===null){M===null&&(M=$);break}t&&M&&V.alternate===null&&e(C,M),b=s(V,b,A),L===null?R=V:L.sibling=V,L=V,M=$}if(j.done)return n(C,M),En&&Ql(C,A),R;if(M===null){for(;!j.done;A++,j=_.next())j=f(C,j.value,T),j!==null&&(b=s(j,b,A),L===null?R=j:L.sibling=j,L=j);return En&&Ql(C,A),R}for(M=r(C,M);!j.done;A++,j=_.next())j=g(M,C,A,j.value,T),j!==null&&(t&&j.alternate!==null&&M.delete(j.key===null?A:j.key),b=s(j,b,A),L===null?R=j:L.sibling=j,L=j);return t&&M.forEach(function(U){return e(C,U)}),En&&Ql(C,A),R}function k(C,b,_,T){if(typeof _=="object"&&_!==null&&_.type===oc&&_.key===null&&(_=_.props.children),typeof _=="object"&&_!==null){switch(_.$$typeof){case zp:e:{for(var R=_.key,L=b;L!==null;){if(L.key===R){if(R=_.type,R===oc){if(L.tag===7){n(C,L.sibling),b=i(L,_.props.children),b.return=C,C=b;break e}}else if(L.elementType===R||typeof R=="object"&&R!==null&&R.$$typeof===Ga&&KC(R)===L.type){n(C,L.sibling),b=i(L,_.props),b.ref=rh(C,L,_),b.return=C,C=b;break e}n(C,L);break}else e(C,L);L=L.sibling}_.type===oc?(b=pu(_.props.children,C.mode,T,_.key),b.return=C,C=b):(T=Jg(_.type,_.key,_.props,null,C.mode,T),T.ref=rh(C,b,_),T.return=C,C=T)}return o(C);case sc:e:{for(L=_.key;b!==null;){if(b.key===L)if(b.tag===4&&b.stateNode.containerInfo===_.containerInfo&&b.stateNode.implementation===_.implementation){n(C,b.sibling),b=i(b,_.children||[]),b.return=C,C=b;break e}else{n(C,b);break}else e(C,b);b=b.sibling}b=Ay(_,C.mode,T),b.return=C,C=b}return o(C);case Ga:return L=_._init,k(C,b,L(_._payload),T)}if(wh(_))return v(C,b,_,T);if(Qd(_))return x(C,b,_,T);Qp(C,_)}return typeof _=="string"&&_!==""||typeof _=="number"?(_=""+_,b!==null&&b.tag===6?(n(C,b.sibling),b=i(b,_),b.return=C,C=b):(n(C,b),b=My(_,C.mode,T),b.return=C,C=b),o(C)):n(C,b)}return k}var Kc=A4(!0),N4=A4(!1),Tm=_l(null),Pm=null,pc=null,N_=null;function j_(){N_=pc=Pm=null}function I_(t){var e=Tm.current;Sn(Tm),t._currentValue=e}function Sw(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Oc(t,e){Pm=t,N_=pc=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Li=!0),t.firstContext=null)}function Rs(t){var e=t._currentValue;if(N_!==t)if(t={context:t,memoizedValue:e,next:null},pc===null){if(Pm===null)throw Error(Ee(308));pc=t,Pm.dependencies={lanes:0,firstContext:t}}else pc=pc.next=t;return e}var au=null;function O_(t){au===null?au=[t]:au.push(t)}function j4(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,O_(e)):(n.next=i.next,i.next=n),e.interleaved=n,la(t,r)}function la(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var qa=!1;function D_(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function I4(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function ra(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function ll(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Kt&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,la(t,n)}return i=r.interleaved,i===null?(e.next=e,O_(r)):(e.next=i.next,i.next=e),r.interleaved=e,la(t,n)}function qg(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,b_(t,n)}}function XC(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Lm(t,e,n,r){var i=t.updateQueue;qa=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var h=t.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==o&&(a===null?h.firstBaseUpdate=c:a.next=c,h.lastBaseUpdate=l))}if(s!==null){var f=i.baseState;o=0,h=c=l=null,a=s;do{var p=a.lane,g=a.eventTime;if((r&p)===p){h!==null&&(h=h.next={eventTime:g,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var v=t,x=a;switch(p=e,g=n,x.tag){case 1:if(v=x.payload,typeof v=="function"){f=v.call(g,f,p);break e}f=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=x.payload,p=typeof v=="function"?v.call(g,f,p):v,p==null)break e;f=Fn({},f,p);break e;case 2:qa=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,p=i.effects,p===null?i.effects=[a]:p.push(a))}else g={eventTime:g,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(c=h=g,l=f):h=h.next=g,o|=p;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;p=a,a=p.next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}while(1);if(h===null&&(l=f),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=h,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);bu|=o,t.lanes=o,t.memoizedState=f}}function ZC(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(Ee(191,i));i.call(r)}}}var Gf={},So=_l(Gf),yf=_l(Gf),wf=_l(Gf);function lu(t){if(t===Gf)throw Error(Ee(174));return t}function F_(t,e){switch(wn(wf,e),wn(yf,t),wn(So,Gf),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:rw(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=rw(e,t)}Sn(So),wn(So,e)}function Xc(){Sn(So),Sn(yf),Sn(wf)}function O4(t){lu(wf.current);var e=lu(So.current),n=rw(e,t.type);e!==n&&(wn(yf,t),wn(So,n))}function B_(t){yf.current===t&&(Sn(So),Sn(yf))}var In=_l(0);function Mm(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var ky=[];function $_(){for(var t=0;t<ky.length;t++)ky[t]._workInProgressVersionPrimary=null;ky.length=0}var Yg=pa.ReactCurrentDispatcher,Ey=pa.ReactCurrentBatchConfig,_u=0,Dn=null,xr=null,Lr=null,Am=!1,Bh=!1,xf=0,T8=0;function ti(){throw Error(Ee(321))}function z_(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Js(t[n],e[n]))return!1;return!0}function U_(t,e,n,r,i,s){if(_u=s,Dn=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Yg.current=t===null||t.memoizedState===null?A8:N8,t=n(r,i),Bh){s=0;do{if(Bh=!1,xf=0,25<=s)throw Error(Ee(301));s+=1,Lr=xr=null,e.updateQueue=null,Yg.current=j8,t=n(r,i)}while(Bh)}if(Yg.current=Nm,e=xr!==null&&xr.next!==null,_u=0,Lr=xr=Dn=null,Am=!1,e)throw Error(Ee(300));return t}function V_(){var t=xf!==0;return xf=0,t}function mo(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Lr===null?Dn.memoizedState=Lr=t:Lr=Lr.next=t,Lr}function Ts(){if(xr===null){var t=Dn.alternate;t=t!==null?t.memoizedState:null}else t=xr.next;var e=Lr===null?Dn.memoizedState:Lr.next;if(e!==null)Lr=e,xr=t;else{if(t===null)throw Error(Ee(310));xr=t,t={memoizedState:xr.memoizedState,baseState:xr.baseState,baseQueue:xr.baseQueue,queue:xr.queue,next:null},Lr===null?Dn.memoizedState=Lr=t:Lr=Lr.next=t}return Lr}function _f(t,e){return typeof e=="function"?e(t):e}function Ry(t){var e=Ts(),n=e.queue;if(n===null)throw Error(Ee(311));n.lastRenderedReducer=t;var r=xr,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,c=s;do{var h=c.lane;if((_u&h)===h)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var f={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=f,o=r):l=l.next=f,Dn.lanes|=h,bu|=h}c=c.next}while(c!==null&&c!==s);l===null?o=r:l.next=a,Js(r,e.memoizedState)||(Li=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,Dn.lanes|=s,bu|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Ty(t){var e=Ts(),n=e.queue;if(n===null)throw Error(Ee(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);Js(s,e.memoizedState)||(Li=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function D4(){}function F4(t,e){var n=Dn,r=Ts(),i=e(),s=!Js(r.memoizedState,i);if(s&&(r.memoizedState=i,Li=!0),r=r.queue,W_(z4.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||Lr!==null&&Lr.memoizedState.tag&1){if(n.flags|=2048,bf(9,$4.bind(null,n,r,i,e),void 0,null),Nr===null)throw Error(Ee(349));_u&30||B4(n,e,i)}return i}function B4(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Dn.updateQueue,e===null?(e={lastEffect:null,stores:null},Dn.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function $4(t,e,n,r){e.value=n,e.getSnapshot=r,U4(e)&&V4(t)}function z4(t,e,n){return n(function(){U4(e)&&V4(t)})}function U4(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Js(t,n)}catch{return!0}}function V4(t){var e=la(t,1);e!==null&&Qs(e,t,1,-1)}function QC(t){var e=mo();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:_f,lastRenderedState:t},e.queue=t,t=t.dispatch=M8.bind(null,Dn,t),[e.memoizedState,t]}function bf(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Dn.updateQueue,e===null?(e={lastEffect:null,stores:null},Dn.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function W4(){return Ts().memoizedState}function Kg(t,e,n,r){var i=mo();Dn.flags|=t,i.memoizedState=bf(1|e,n,void 0,r===void 0?null:r)}function R0(t,e,n,r){var i=Ts();r=r===void 0?null:r;var s=void 0;if(xr!==null){var o=xr.memoizedState;if(s=o.destroy,r!==null&&z_(r,o.deps)){i.memoizedState=bf(e,n,s,r);return}}Dn.flags|=t,i.memoizedState=bf(1|e,n,s,r)}function JC(t,e){return Kg(8390656,8,t,e)}function W_(t,e){return R0(2048,8,t,e)}function H4(t,e){return R0(4,2,t,e)}function G4(t,e){return R0(4,4,t,e)}function q4(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Y4(t,e,n){return n=n!=null?n.concat([t]):null,R0(4,4,q4.bind(null,e,t),n)}function H_(){}function K4(t,e){var n=Ts();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&z_(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function X4(t,e){var n=Ts();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&z_(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Z4(t,e,n){return _u&21?(Js(n,e)||(n=n4(),Dn.lanes|=n,bu|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Li=!0),t.memoizedState=n)}function P8(t,e){var n=cn;cn=n!==0&&4>n?n:4,t(!0);var r=Ey.transition;Ey.transition={};try{t(!1),e()}finally{cn=n,Ey.transition=r}}function Q4(){return Ts().memoizedState}function L8(t,e,n){var r=cl(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},J4(t))e3(e,n);else if(n=j4(t,e,n,r),n!==null){var i=yi();Qs(n,t,r,i),t3(n,e,r)}}function M8(t,e,n){var r=cl(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(J4(t))e3(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,Js(a,o)){var l=e.interleaved;l===null?(i.next=i,O_(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=j4(t,e,i,r),n!==null&&(i=yi(),Qs(n,t,r,i),t3(n,e,r))}}function J4(t){var e=t.alternate;return t===Dn||e!==null&&e===Dn}function e3(t,e){Bh=Am=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function t3(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,b_(t,n)}}var Nm={readContext:Rs,useCallback:ti,useContext:ti,useEffect:ti,useImperativeHandle:ti,useInsertionEffect:ti,useLayoutEffect:ti,useMemo:ti,useReducer:ti,useRef:ti,useState:ti,useDebugValue:ti,useDeferredValue:ti,useTransition:ti,useMutableSource:ti,useSyncExternalStore:ti,useId:ti,unstable_isNewReconciler:!1},A8={readContext:Rs,useCallback:function(t,e){return mo().memoizedState=[t,e===void 0?null:e],t},useContext:Rs,useEffect:JC,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Kg(4194308,4,q4.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Kg(4194308,4,t,e)},useInsertionEffect:function(t,e){return Kg(4,2,t,e)},useMemo:function(t,e){var n=mo();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=mo();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=L8.bind(null,Dn,t),[r.memoizedState,t]},useRef:function(t){var e=mo();return t={current:t},e.memoizedState=t},useState:QC,useDebugValue:H_,useDeferredValue:function(t){return mo().memoizedState=t},useTransition:function(){var t=QC(!1),e=t[0];return t=P8.bind(null,t[1]),mo().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Dn,i=mo();if(En){if(n===void 0)throw Error(Ee(407));n=n()}else{if(n=e(),Nr===null)throw Error(Ee(349));_u&30||B4(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,JC(z4.bind(null,r,s,t),[t]),r.flags|=2048,bf(9,$4.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=mo(),e=Nr.identifierPrefix;if(En){var n=na,r=ta;n=(r&~(1<<32-Zs(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=xf++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=T8++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},N8={readContext:Rs,useCallback:K4,useContext:Rs,useEffect:W_,useImperativeHandle:Y4,useInsertionEffect:H4,useLayoutEffect:G4,useMemo:X4,useReducer:Ry,useRef:W4,useState:function(){return Ry(_f)},useDebugValue:H_,useDeferredValue:function(t){var e=Ts();return Z4(e,xr.memoizedState,t)},useTransition:function(){var t=Ry(_f)[0],e=Ts().memoizedState;return[t,e]},useMutableSource:D4,useSyncExternalStore:F4,useId:Q4,unstable_isNewReconciler:!1},j8={readContext:Rs,useCallback:K4,useContext:Rs,useEffect:W_,useImperativeHandle:Y4,useInsertionEffect:H4,useLayoutEffect:G4,useMemo:X4,useReducer:Ty,useRef:W4,useState:function(){return Ty(_f)},useDebugValue:H_,useDeferredValue:function(t){var e=Ts();return xr===null?e.memoizedState=t:Z4(e,xr.memoizedState,t)},useTransition:function(){var t=Ty(_f)[0],e=Ts().memoizedState;return[t,e]},useMutableSource:D4,useSyncExternalStore:F4,useId:Q4,unstable_isNewReconciler:!1};function Ws(t,e){if(t&&t.defaultProps){e=Fn({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Cw(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Fn({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var T0={isMounted:function(t){return(t=t._reactInternals)?Tu(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=yi(),i=cl(t),s=ra(r,i);s.payload=e,n!=null&&(s.callback=n),e=ll(t,s,i),e!==null&&(Qs(e,t,i,r),qg(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=yi(),i=cl(t),s=ra(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=ll(t,s,i),e!==null&&(Qs(e,t,i,r),qg(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=yi(),r=cl(t),i=ra(n,r);i.tag=2,e!=null&&(i.callback=e),e=ll(t,i,r),e!==null&&(Qs(e,t,r,n),qg(e,t,r))}};function ek(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!pf(n,r)||!pf(i,s):!0}function n3(t,e,n){var r=!1,i=vl,s=e.contextType;return typeof s=="object"&&s!==null?s=Rs(s):(i=Ni(e)?wu:li.current,r=e.contextTypes,s=(r=r!=null)?qc(t,i):vl),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=T0,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function tk(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&T0.enqueueReplaceState(e,e.state,null)}function kw(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},D_(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Rs(s):(s=Ni(e)?wu:li.current,i.context=qc(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Cw(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&T0.enqueueReplaceState(i,i.state,null),Lm(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Zc(t,e){try{var n="",r=e;do n+=lO(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Py(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Ew(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var I8=typeof WeakMap=="function"?WeakMap:Map;function r3(t,e,n){n=ra(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Im||(Im=!0,Ow=r),Ew(t,e)},n}function i3(t,e,n){n=ra(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Ew(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Ew(t,e),typeof r!="function"&&(ul===null?ul=new Set([this]):ul.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function nk(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new I8;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=K8.bind(null,t,e,n),e.then(t,t))}function rk(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function ik(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=ra(-1,1),e.tag=2,ll(n,e,1))),n.lanes|=1),t)}var O8=pa.ReactCurrentOwner,Li=!1;function gi(t,e,n,r){e.child=t===null?N4(e,null,n,r):Kc(e,t.child,n,r)}function sk(t,e,n,r,i){n=n.render;var s=e.ref;return Oc(e,i),r=U_(t,e,n,r,s,i),n=V_(),t!==null&&!Li?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,ua(t,e,i)):(En&&n&&L_(e),e.flags|=1,gi(t,e,r,i),e.child)}function ok(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!J_(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,s3(t,e,s,r,i)):(t=Jg(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:pf,n(o,r)&&t.ref===e.ref)return ua(t,e,i)}return e.flags|=1,t=dl(s,r),t.ref=e.ref,t.return=e,e.child=t}function s3(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(pf(s,r)&&t.ref===e.ref)if(Li=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(Li=!0);else return e.lanes=t.lanes,ua(t,e,i)}return Rw(t,e,n,r,i)}function o3(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},wn(mc,Vi),Vi|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,wn(mc,Vi),Vi|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,wn(mc,Vi),Vi|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,wn(mc,Vi),Vi|=r;return gi(t,e,i,n),e.child}function a3(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Rw(t,e,n,r,i){var s=Ni(n)?wu:li.current;return s=qc(e,s),Oc(e,i),n=U_(t,e,n,r,s,i),r=V_(),t!==null&&!Li?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,ua(t,e,i)):(En&&r&&L_(e),e.flags|=1,gi(t,e,n,i),e.child)}function ak(t,e,n,r,i){if(Ni(n)){var s=!0;km(e)}else s=!1;if(Oc(e,i),e.stateNode===null)Xg(t,e),n3(e,n,r),kw(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=Rs(c):(c=Ni(n)?wu:li.current,c=qc(e,c));var h=n.getDerivedStateFromProps,f=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&tk(e,o,r,c),qa=!1;var p=e.memoizedState;o.state=p,Lm(e,r,o,i),l=e.memoizedState,a!==r||p!==l||Ai.current||qa?(typeof h=="function"&&(Cw(e,n,h,r),l=e.memoizedState),(a=qa||ek(e,n,a,r,p,l,c))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,I4(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:Ws(e.type,a),o.props=c,f=e.pendingProps,p=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=Rs(l):(l=Ni(n)?wu:li.current,l=qc(e,l));var g=n.getDerivedStateFromProps;(h=typeof g=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||p!==l)&&tk(e,o,r,l),qa=!1,p=e.memoizedState,o.state=p,Lm(e,r,o,i);var v=e.memoizedState;a!==f||p!==v||Ai.current||qa?(typeof g=="function"&&(Cw(e,n,g,r),v=e.memoizedState),(c=qa||ek(e,n,c,r,p,v,l)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,v,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,v,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=v),o.props=r,o.state=v,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),r=!1)}return Tw(t,e,n,r,s,i)}function Tw(t,e,n,r,i,s){a3(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&GC(e,n,!1),ua(t,e,s);r=e.stateNode,O8.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Kc(e,t.child,null,s),e.child=Kc(e,null,a,s)):gi(t,e,a,s),e.memoizedState=r.state,i&&GC(e,n,!0),e.child}function l3(t){var e=t.stateNode;e.pendingContext?HC(t,e.pendingContext,e.pendingContext!==e.context):e.context&&HC(t,e.context,!1),F_(t,e.containerInfo)}function lk(t,e,n,r,i){return Yc(),A_(i),e.flags|=256,gi(t,e,n,r),e.child}var Pw={dehydrated:null,treeContext:null,retryLane:0};function Lw(t){return{baseLanes:t,cachePool:null,transitions:null}}function u3(t,e,n){var r=e.pendingProps,i=In.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),wn(In,i&1),t===null)return bw(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=M0(o,r,0,null),t=pu(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Lw(n),e.memoizedState=Pw,t):G_(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return D8(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=dl(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=dl(a,s):(s=pu(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?Lw(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=Pw,r}return s=t.child,t=s.sibling,r=dl(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function G_(t,e){return e=M0({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Jp(t,e,n,r){return r!==null&&A_(r),Kc(e,t.child,null,n),t=G_(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function D8(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=Py(Error(Ee(422))),Jp(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=M0({mode:"visible",children:r.children},i,0,null),s=pu(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&Kc(e,t.child,null,o),e.child.memoizedState=Lw(o),e.memoizedState=Pw,s);if(!(e.mode&1))return Jp(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(Ee(419)),r=Py(s,r,void 0),Jp(t,e,o,r)}if(a=(o&t.childLanes)!==0,Li||a){if(r=Nr,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,la(t,i),Qs(r,t,i,-1))}return Q_(),r=Py(Error(Ee(421))),Jp(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=X8.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,Ki=al(i.nextSibling),Xi=e,En=!0,Ys=null,t!==null&&(vs[ys++]=ta,vs[ys++]=na,vs[ys++]=xu,ta=t.id,na=t.overflow,xu=e),e=G_(e,r.children),e.flags|=4096,e)}function uk(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Sw(t.return,e,n)}function Ly(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function c3(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(gi(t,e,r.children,n),r=In.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&uk(t,n,e);else if(t.tag===19)uk(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(wn(In,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Mm(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Ly(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Mm(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Ly(e,!0,n,null,s);break;case"together":Ly(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Xg(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function ua(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),bu|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Ee(153));if(e.child!==null){for(t=e.child,n=dl(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=dl(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function F8(t,e,n){switch(e.tag){case 3:l3(e),Yc();break;case 5:O4(e);break;case 1:Ni(e.type)&&km(e);break;case 4:F_(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;wn(Tm,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(wn(In,In.current&1),e.flags|=128,null):n&e.child.childLanes?u3(t,e,n):(wn(In,In.current&1),t=ua(t,e,n),t!==null?t.sibling:null);wn(In,In.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return c3(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),wn(In,In.current),r)break;return null;case 22:case 23:return e.lanes=0,o3(t,e,n)}return ua(t,e,n)}var d3,Mw,h3,f3;d3=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Mw=function(){};h3=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,lu(So.current);var s=null;switch(n){case"input":i=J1(t,i),r=J1(t,r),s=[];break;case"select":i=Fn({},i,{value:void 0}),r=Fn({},r,{value:void 0}),s=[];break;case"textarea":i=nw(t,i),r=nw(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Sm)}iw(n,r);var o;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(af.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var l=r[c];if(a=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(af.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&bn("scroll",t),s||a===l||(s=[])):(s=s||[]).push(c,l))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};f3=function(t,e,n,r){n!==r&&(e.flags|=4)};function ih(t,e){if(!En)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function ni(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function B8(t,e,n){var r=e.pendingProps;switch(M_(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ni(e),null;case 1:return Ni(e.type)&&Cm(),ni(e),null;case 3:return r=e.stateNode,Xc(),Sn(Ai),Sn(li),$_(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Zp(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Ys!==null&&(Bw(Ys),Ys=null))),Mw(t,e),ni(e),null;case 5:B_(e);var i=lu(wf.current);if(n=e.type,t!==null&&e.stateNode!=null)h3(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(Ee(166));return ni(e),null}if(t=lu(So.current),Zp(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[xo]=e,r[vf]=s,t=(e.mode&1)!==0,n){case"dialog":bn("cancel",r),bn("close",r);break;case"iframe":case"object":case"embed":bn("load",r);break;case"video":case"audio":for(i=0;i<_h.length;i++)bn(_h[i],r);break;case"source":bn("error",r);break;case"img":case"image":case"link":bn("error",r),bn("load",r);break;case"details":bn("toggle",r);break;case"input":yC(r,s),bn("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},bn("invalid",r);break;case"textarea":xC(r,s),bn("invalid",r)}iw(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&Xp(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Xp(r.textContent,a,t),i=["children",""+a]):af.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&bn("scroll",r)}switch(n){case"input":Up(r),wC(r,s,!0);break;case"textarea":Up(r),_C(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Sm)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=zP(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[xo]=e,t[vf]=r,d3(t,e,!1,!1),e.stateNode=t;e:{switch(o=sw(n,r),n){case"dialog":bn("cancel",t),bn("close",t),i=r;break;case"iframe":case"object":case"embed":bn("load",t),i=r;break;case"video":case"audio":for(i=0;i<_h.length;i++)bn(_h[i],t);i=r;break;case"source":bn("error",t),i=r;break;case"img":case"image":case"link":bn("error",t),bn("load",t),i=r;break;case"details":bn("toggle",t),i=r;break;case"input":yC(t,r),i=J1(t,r),bn("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Fn({},r,{value:void 0}),bn("invalid",t);break;case"textarea":xC(t,r),i=nw(t,r),bn("invalid",t);break;default:i=r}iw(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?WP(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&UP(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&lf(t,l):typeof l=="number"&&lf(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(af.hasOwnProperty(s)?l!=null&&s==="onScroll"&&bn("scroll",t):l!=null&&m_(t,s,l,o))}switch(n){case"input":Up(t),wC(t,r,!1);break;case"textarea":Up(t),_C(t);break;case"option":r.value!=null&&t.setAttribute("value",""+ml(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?Ac(t,!!r.multiple,s,!1):r.defaultValue!=null&&Ac(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Sm)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return ni(e),null;case 6:if(t&&e.stateNode!=null)f3(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Ee(166));if(n=lu(wf.current),lu(So.current),Zp(e)){if(r=e.stateNode,n=e.memoizedProps,r[xo]=e,(s=r.nodeValue!==n)&&(t=Xi,t!==null))switch(t.tag){case 3:Xp(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Xp(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[xo]=e,e.stateNode=r}return ni(e),null;case 13:if(Sn(In),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(En&&Ki!==null&&e.mode&1&&!(e.flags&128))M4(),Yc(),e.flags|=98560,s=!1;else if(s=Zp(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(Ee(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(Ee(317));s[xo]=e}else Yc(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;ni(e),s=!1}else Ys!==null&&(Bw(Ys),Ys=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||In.current&1?br===0&&(br=3):Q_())),e.updateQueue!==null&&(e.flags|=4),ni(e),null);case 4:return Xc(),Mw(t,e),t===null&&gf(e.stateNode.containerInfo),ni(e),null;case 10:return I_(e.type._context),ni(e),null;case 17:return Ni(e.type)&&Cm(),ni(e),null;case 19:if(Sn(In),s=e.memoizedState,s===null)return ni(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)ih(s,!1);else{if(br!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Mm(t),o!==null){for(e.flags|=128,ih(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return wn(In,In.current&1|2),e.child}t=t.sibling}s.tail!==null&&ir()>Qc&&(e.flags|=128,r=!0,ih(s,!1),e.lanes=4194304)}else{if(!r)if(t=Mm(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),ih(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!En)return ni(e),null}else 2*ir()-s.renderingStartTime>Qc&&n!==1073741824&&(e.flags|=128,r=!0,ih(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=ir(),e.sibling=null,n=In.current,wn(In,r?n&1|2:n&1),e):(ni(e),null);case 22:case 23:return Z_(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Vi&1073741824&&(ni(e),e.subtreeFlags&6&&(e.flags|=8192)):ni(e),null;case 24:return null;case 25:return null}throw Error(Ee(156,e.tag))}function $8(t,e){switch(M_(e),e.tag){case 1:return Ni(e.type)&&Cm(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Xc(),Sn(Ai),Sn(li),$_(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return B_(e),null;case 13:if(Sn(In),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Ee(340));Yc()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Sn(In),null;case 4:return Xc(),null;case 10:return I_(e.type._context),null;case 22:case 23:return Z_(),null;case 24:return null;default:return null}}var eg=!1,ii=!1,z8=typeof WeakSet=="function"?WeakSet:Set,Ze=null;function gc(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Yn(t,e,r)}else n.current=null}function Aw(t,e,n){try{n()}catch(r){Yn(t,e,r)}}var ck=!1;function U8(t,e){if(gw=xm,t=y4(),P_(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,h=0,f=t,p=null;t:for(;;){for(var g;f!==n||i!==0&&f.nodeType!==3||(a=o+i),f!==s||r!==0&&f.nodeType!==3||(l=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(g=f.firstChild)!==null;)p=f,f=g;for(;;){if(f===t)break t;if(p===n&&++c===i&&(a=o),p===s&&++h===r&&(l=o),(g=f.nextSibling)!==null)break;f=p,p=f.parentNode}f=g}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(mw={focusedElem:t,selectionRange:n},xm=!1,Ze=e;Ze!==null;)if(e=Ze,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Ze=t;else for(;Ze!==null;){e=Ze;try{var v=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var x=v.memoizedProps,k=v.memoizedState,C=e.stateNode,b=C.getSnapshotBeforeUpdate(e.elementType===e.type?x:Ws(e.type,x),k);C.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var _=e.stateNode.containerInfo;_.nodeType===1?_.textContent="":_.nodeType===9&&_.documentElement&&_.removeChild(_.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Ee(163))}}catch(T){Yn(e,e.return,T)}if(t=e.sibling,t!==null){t.return=e.return,Ze=t;break}Ze=e.return}return v=ck,ck=!1,v}function $h(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&Aw(e,n,s)}i=i.next}while(i!==r)}}function P0(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Nw(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function p3(t){var e=t.alternate;e!==null&&(t.alternate=null,p3(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[xo],delete e[vf],delete e[ww],delete e[C8],delete e[k8])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function g3(t){return t.tag===5||t.tag===3||t.tag===4}function dk(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||g3(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function jw(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Sm));else if(r!==4&&(t=t.child,t!==null))for(jw(t,e,n),t=t.sibling;t!==null;)jw(t,e,n),t=t.sibling}function Iw(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Iw(t,e,n),t=t.sibling;t!==null;)Iw(t,e,n),t=t.sibling}var zr=null,Gs=!1;function $a(t,e,n){for(n=n.child;n!==null;)m3(t,e,n),n=n.sibling}function m3(t,e,n){if(bo&&typeof bo.onCommitFiberUnmount=="function")try{bo.onCommitFiberUnmount(_0,n)}catch{}switch(n.tag){case 5:ii||gc(n,e);case 6:var r=zr,i=Gs;zr=null,$a(t,e,n),zr=r,Gs=i,zr!==null&&(Gs?(t=zr,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):zr.removeChild(n.stateNode));break;case 18:zr!==null&&(Gs?(t=zr,n=n.stateNode,t.nodeType===8?Sy(t.parentNode,n):t.nodeType===1&&Sy(t,n),hf(t)):Sy(zr,n.stateNode));break;case 4:r=zr,i=Gs,zr=n.stateNode.containerInfo,Gs=!0,$a(t,e,n),zr=r,Gs=i;break;case 0:case 11:case 14:case 15:if(!ii&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Aw(n,e,o),i=i.next}while(i!==r)}$a(t,e,n);break;case 1:if(!ii&&(gc(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Yn(n,e,a)}$a(t,e,n);break;case 21:$a(t,e,n);break;case 22:n.mode&1?(ii=(r=ii)||n.memoizedState!==null,$a(t,e,n),ii=r):$a(t,e,n);break;default:$a(t,e,n)}}function hk(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new z8),e.forEach(function(r){var i=Z8.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function $s(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:zr=a.stateNode,Gs=!1;break e;case 3:zr=a.stateNode.containerInfo,Gs=!0;break e;case 4:zr=a.stateNode.containerInfo,Gs=!0;break e}a=a.return}if(zr===null)throw Error(Ee(160));m3(s,o,i),zr=null,Gs=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){Yn(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)v3(e,t),e=e.sibling}function v3(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if($s(e,t),go(t),r&4){try{$h(3,t,t.return),P0(3,t)}catch(x){Yn(t,t.return,x)}try{$h(5,t,t.return)}catch(x){Yn(t,t.return,x)}}break;case 1:$s(e,t),go(t),r&512&&n!==null&&gc(n,n.return);break;case 5:if($s(e,t),go(t),r&512&&n!==null&&gc(n,n.return),t.flags&32){var i=t.stateNode;try{lf(i,"")}catch(x){Yn(t,t.return,x)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&BP(i,s),sw(a,o);var c=sw(a,s);for(o=0;o<l.length;o+=2){var h=l[o],f=l[o+1];h==="style"?WP(i,f):h==="dangerouslySetInnerHTML"?UP(i,f):h==="children"?lf(i,f):m_(i,h,f,c)}switch(a){case"input":ew(i,s);break;case"textarea":$P(i,s);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var g=s.value;g!=null?Ac(i,!!s.multiple,g,!1):p!==!!s.multiple&&(s.defaultValue!=null?Ac(i,!!s.multiple,s.defaultValue,!0):Ac(i,!!s.multiple,s.multiple?[]:"",!1))}i[vf]=s}catch(x){Yn(t,t.return,x)}}break;case 6:if($s(e,t),go(t),r&4){if(t.stateNode===null)throw Error(Ee(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(x){Yn(t,t.return,x)}}break;case 3:if($s(e,t),go(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{hf(e.containerInfo)}catch(x){Yn(t,t.return,x)}break;case 4:$s(e,t),go(t);break;case 13:$s(e,t),go(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(K_=ir())),r&4&&hk(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(ii=(c=ii)||h,$s(e,t),ii=c):$s(e,t),go(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!h&&t.mode&1)for(Ze=t,h=t.child;h!==null;){for(f=Ze=h;Ze!==null;){switch(p=Ze,g=p.child,p.tag){case 0:case 11:case 14:case 15:$h(4,p,p.return);break;case 1:gc(p,p.return);var v=p.stateNode;if(typeof v.componentWillUnmount=="function"){r=p,n=p.return;try{e=r,v.props=e.memoizedProps,v.state=e.memoizedState,v.componentWillUnmount()}catch(x){Yn(r,n,x)}}break;case 5:gc(p,p.return);break;case 22:if(p.memoizedState!==null){pk(f);continue}}g!==null?(g.return=p,Ze=g):pk(f)}h=h.sibling}e:for(h=null,f=t;;){if(f.tag===5){if(h===null){h=f;try{i=f.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=f.stateNode,l=f.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=VP("display",o))}catch(x){Yn(t,t.return,x)}}}else if(f.tag===6){if(h===null)try{f.stateNode.nodeValue=c?"":f.memoizedProps}catch(x){Yn(t,t.return,x)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;h===f&&(h=null),f=f.return}h===f&&(h=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:$s(e,t),go(t),r&4&&hk(t);break;case 21:break;default:$s(e,t),go(t)}}function go(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(g3(n)){var r=n;break e}n=n.return}throw Error(Ee(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(lf(i,""),r.flags&=-33);var s=dk(t);Iw(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=dk(t);jw(t,a,o);break;default:throw Error(Ee(161))}}catch(l){Yn(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function V8(t,e,n){Ze=t,y3(t)}function y3(t,e,n){for(var r=(t.mode&1)!==0;Ze!==null;){var i=Ze,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||eg;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||ii;a=eg;var c=ii;if(eg=o,(ii=l)&&!c)for(Ze=i;Ze!==null;)o=Ze,l=o.child,o.tag===22&&o.memoizedState!==null?gk(i):l!==null?(l.return=o,Ze=l):gk(i);for(;s!==null;)Ze=s,y3(s),s=s.sibling;Ze=i,eg=a,ii=c}fk(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,Ze=s):fk(t)}}function fk(t){for(;Ze!==null;){var e=Ze;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:ii||P0(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!ii)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Ws(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&ZC(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}ZC(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var h=c.memoizedState;if(h!==null){var f=h.dehydrated;f!==null&&hf(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Ee(163))}ii||e.flags&512&&Nw(e)}catch(p){Yn(e,e.return,p)}}if(e===t){Ze=null;break}if(n=e.sibling,n!==null){n.return=e.return,Ze=n;break}Ze=e.return}}function pk(t){for(;Ze!==null;){var e=Ze;if(e===t){Ze=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Ze=n;break}Ze=e.return}}function gk(t){for(;Ze!==null;){var e=Ze;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{P0(4,e)}catch(l){Yn(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){Yn(e,i,l)}}var s=e.return;try{Nw(e)}catch(l){Yn(e,s,l)}break;case 5:var o=e.return;try{Nw(e)}catch(l){Yn(e,o,l)}}}catch(l){Yn(e,e.return,l)}if(e===t){Ze=null;break}var a=e.sibling;if(a!==null){a.return=e.return,Ze=a;break}Ze=e.return}}var W8=Math.ceil,jm=pa.ReactCurrentDispatcher,q_=pa.ReactCurrentOwner,ks=pa.ReactCurrentBatchConfig,Kt=0,Nr=null,dr=null,Hr=0,Vi=0,mc=_l(0),br=0,Sf=null,bu=0,L0=0,Y_=0,zh=null,Pi=null,K_=0,Qc=1/0,Xo=null,Im=!1,Ow=null,ul=null,tg=!1,el=null,Om=0,Uh=0,Dw=null,Zg=-1,Qg=0;function yi(){return Kt&6?ir():Zg!==-1?Zg:Zg=ir()}function cl(t){return t.mode&1?Kt&2&&Hr!==0?Hr&-Hr:R8.transition!==null?(Qg===0&&(Qg=n4()),Qg):(t=cn,t!==0||(t=window.event,t=t===void 0?16:u4(t.type)),t):1}function Qs(t,e,n,r){if(50<Uh)throw Uh=0,Dw=null,Error(Ee(185));Vf(t,n,r),(!(Kt&2)||t!==Nr)&&(t===Nr&&(!(Kt&2)&&(L0|=n),br===4&&Xa(t,Hr)),ji(t,r),n===1&&Kt===0&&!(e.mode&1)&&(Qc=ir()+500,E0&&bl()))}function ji(t,e){var n=t.callbackNode;RO(t,e);var r=wm(t,t===Nr?Hr:0);if(r===0)n!==null&&CC(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&CC(n),e===1)t.tag===0?E8(mk.bind(null,t)):T4(mk.bind(null,t)),b8(function(){!(Kt&6)&&bl()}),n=null;else{switch(r4(r)){case 1:n=__;break;case 4:n=e4;break;case 16:n=ym;break;case 536870912:n=t4;break;default:n=ym}n=E3(n,w3.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function w3(t,e){if(Zg=-1,Qg=0,Kt&6)throw Error(Ee(327));var n=t.callbackNode;if(Dc()&&t.callbackNode!==n)return null;var r=wm(t,t===Nr?Hr:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Dm(t,r);else{e=r;var i=Kt;Kt|=2;var s=_3();(Nr!==t||Hr!==e)&&(Xo=null,Qc=ir()+500,fu(t,e));do try{q8();break}catch(a){x3(t,a)}while(1);j_(),jm.current=s,Kt=i,dr!==null?e=0:(Nr=null,Hr=0,e=br)}if(e!==0){if(e===2&&(i=cw(t),i!==0&&(r=i,e=Fw(t,i))),e===1)throw n=Sf,fu(t,0),Xa(t,r),ji(t,ir()),n;if(e===6)Xa(t,r);else{if(i=t.current.alternate,!(r&30)&&!H8(i)&&(e=Dm(t,r),e===2&&(s=cw(t),s!==0&&(r=s,e=Fw(t,s))),e===1))throw n=Sf,fu(t,0),Xa(t,r),ji(t,ir()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(Ee(345));case 2:Jl(t,Pi,Xo);break;case 3:if(Xa(t,r),(r&130023424)===r&&(e=K_+500-ir(),10<e)){if(wm(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){yi(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=yw(Jl.bind(null,t,Pi,Xo),e);break}Jl(t,Pi,Xo);break;case 4:if(Xa(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-Zs(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=ir()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*W8(r/1960))-r,10<r){t.timeoutHandle=yw(Jl.bind(null,t,Pi,Xo),r);break}Jl(t,Pi,Xo);break;case 5:Jl(t,Pi,Xo);break;default:throw Error(Ee(329))}}}return ji(t,ir()),t.callbackNode===n?w3.bind(null,t):null}function Fw(t,e){var n=zh;return t.current.memoizedState.isDehydrated&&(fu(t,e).flags|=256),t=Dm(t,e),t!==2&&(e=Pi,Pi=n,e!==null&&Bw(e)),t}function Bw(t){Pi===null?Pi=t:Pi.push.apply(Pi,t)}function H8(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Js(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Xa(t,e){for(e&=~Y_,e&=~L0,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Zs(e),r=1<<n;t[n]=-1,e&=~r}}function mk(t){if(Kt&6)throw Error(Ee(327));Dc();var e=wm(t,0);if(!(e&1))return ji(t,ir()),null;var n=Dm(t,e);if(t.tag!==0&&n===2){var r=cw(t);r!==0&&(e=r,n=Fw(t,r))}if(n===1)throw n=Sf,fu(t,0),Xa(t,e),ji(t,ir()),n;if(n===6)throw Error(Ee(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Jl(t,Pi,Xo),ji(t,ir()),null}function X_(t,e){var n=Kt;Kt|=1;try{return t(e)}finally{Kt=n,Kt===0&&(Qc=ir()+500,E0&&bl())}}function Su(t){el!==null&&el.tag===0&&!(Kt&6)&&Dc();var e=Kt;Kt|=1;var n=ks.transition,r=cn;try{if(ks.transition=null,cn=1,t)return t()}finally{cn=r,ks.transition=n,Kt=e,!(Kt&6)&&bl()}}function Z_(){Vi=mc.current,Sn(mc)}function fu(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,_8(n)),dr!==null)for(n=dr.return;n!==null;){var r=n;switch(M_(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Cm();break;case 3:Xc(),Sn(Ai),Sn(li),$_();break;case 5:B_(r);break;case 4:Xc();break;case 13:Sn(In);break;case 19:Sn(In);break;case 10:I_(r.type._context);break;case 22:case 23:Z_()}n=n.return}if(Nr=t,dr=t=dl(t.current,null),Hr=Vi=e,br=0,Sf=null,Y_=L0=bu=0,Pi=zh=null,au!==null){for(e=0;e<au.length;e++)if(n=au[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}au=null}return t}function x3(t,e){do{var n=dr;try{if(j_(),Yg.current=Nm,Am){for(var r=Dn.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Am=!1}if(_u=0,Lr=xr=Dn=null,Bh=!1,xf=0,q_.current=null,n===null||n.return===null){br=1,Sf=e,dr=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=Hr,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,h=a,f=h.tag;if(!(h.mode&1)&&(f===0||f===11||f===15)){var p=h.alternate;p?(h.updateQueue=p.updateQueue,h.memoizedState=p.memoizedState,h.lanes=p.lanes):(h.updateQueue=null,h.memoizedState=null)}var g=rk(o);if(g!==null){g.flags&=-257,ik(g,o,a,s,e),g.mode&1&&nk(s,c,e),e=g,l=c;var v=e.updateQueue;if(v===null){var x=new Set;x.add(l),e.updateQueue=x}else v.add(l);break e}else{if(!(e&1)){nk(s,c,e),Q_();break e}l=Error(Ee(426))}}else if(En&&a.mode&1){var k=rk(o);if(k!==null){!(k.flags&65536)&&(k.flags|=256),ik(k,o,a,s,e),A_(Zc(l,a));break e}}s=l=Zc(l,a),br!==4&&(br=2),zh===null?zh=[s]:zh.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var C=r3(s,l,e);XC(s,C);break e;case 1:a=l;var b=s.type,_=s.stateNode;if(!(s.flags&128)&&(typeof b.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(ul===null||!ul.has(_)))){s.flags|=65536,e&=-e,s.lanes|=e;var T=i3(s,a,e);XC(s,T);break e}}s=s.return}while(s!==null)}S3(n)}catch(R){e=R,dr===n&&n!==null&&(dr=n=n.return);continue}break}while(1)}function _3(){var t=jm.current;return jm.current=Nm,t===null?Nm:t}function Q_(){(br===0||br===3||br===2)&&(br=4),Nr===null||!(bu&268435455)&&!(L0&268435455)||Xa(Nr,Hr)}function Dm(t,e){var n=Kt;Kt|=2;var r=_3();(Nr!==t||Hr!==e)&&(Xo=null,fu(t,e));do try{G8();break}catch(i){x3(t,i)}while(1);if(j_(),Kt=n,jm.current=r,dr!==null)throw Error(Ee(261));return Nr=null,Hr=0,br}function G8(){for(;dr!==null;)b3(dr)}function q8(){for(;dr!==null&&!yO();)b3(dr)}function b3(t){var e=k3(t.alternate,t,Vi);t.memoizedProps=t.pendingProps,e===null?S3(t):dr=e,q_.current=null}function S3(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=$8(n,e),n!==null){n.flags&=32767,dr=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{br=6,dr=null;return}}else if(n=B8(n,e,Vi),n!==null){dr=n;return}if(e=e.sibling,e!==null){dr=e;return}dr=e=t}while(e!==null);br===0&&(br=5)}function Jl(t,e,n){var r=cn,i=ks.transition;try{ks.transition=null,cn=1,Y8(t,e,n,r)}finally{ks.transition=i,cn=r}return null}function Y8(t,e,n,r){do Dc();while(el!==null);if(Kt&6)throw Error(Ee(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Ee(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(TO(t,s),t===Nr&&(dr=Nr=null,Hr=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||tg||(tg=!0,E3(ym,function(){return Dc(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=ks.transition,ks.transition=null;var o=cn;cn=1;var a=Kt;Kt|=4,q_.current=null,U8(t,n),v3(n,t),p8(mw),xm=!!gw,mw=gw=null,t.current=n,V8(n),wO(),Kt=a,cn=o,ks.transition=s}else t.current=n;if(tg&&(tg=!1,el=t,Om=i),s=t.pendingLanes,s===0&&(ul=null),bO(n.stateNode),ji(t,ir()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Im)throw Im=!1,t=Ow,Ow=null,t;return Om&1&&t.tag!==0&&Dc(),s=t.pendingLanes,s&1?t===Dw?Uh++:(Uh=0,Dw=t):Uh=0,bl(),null}function Dc(){if(el!==null){var t=r4(Om),e=ks.transition,n=cn;try{if(ks.transition=null,cn=16>t?16:t,el===null)var r=!1;else{if(t=el,el=null,Om=0,Kt&6)throw Error(Ee(331));var i=Kt;for(Kt|=4,Ze=t.current;Ze!==null;){var s=Ze,o=s.child;if(Ze.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(Ze=c;Ze!==null;){var h=Ze;switch(h.tag){case 0:case 11:case 15:$h(8,h,s)}var f=h.child;if(f!==null)f.return=h,Ze=f;else for(;Ze!==null;){h=Ze;var p=h.sibling,g=h.return;if(p3(h),h===c){Ze=null;break}if(p!==null){p.return=g,Ze=p;break}Ze=g}}}var v=s.alternate;if(v!==null){var x=v.child;if(x!==null){v.child=null;do{var k=x.sibling;x.sibling=null,x=k}while(x!==null)}}Ze=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,Ze=o;else e:for(;Ze!==null;){if(s=Ze,s.flags&2048)switch(s.tag){case 0:case 11:case 15:$h(9,s,s.return)}var C=s.sibling;if(C!==null){C.return=s.return,Ze=C;break e}Ze=s.return}}var b=t.current;for(Ze=b;Ze!==null;){o=Ze;var _=o.child;if(o.subtreeFlags&2064&&_!==null)_.return=o,Ze=_;else e:for(o=b;Ze!==null;){if(a=Ze,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:P0(9,a)}}catch(R){Yn(a,a.return,R)}if(a===o){Ze=null;break e}var T=a.sibling;if(T!==null){T.return=a.return,Ze=T;break e}Ze=a.return}}if(Kt=i,bl(),bo&&typeof bo.onPostCommitFiberRoot=="function")try{bo.onPostCommitFiberRoot(_0,t)}catch{}r=!0}return r}finally{cn=n,ks.transition=e}}return!1}function vk(t,e,n){e=Zc(n,e),e=r3(t,e,1),t=ll(t,e,1),e=yi(),t!==null&&(Vf(t,1,e),ji(t,e))}function Yn(t,e,n){if(t.tag===3)vk(t,t,n);else for(;e!==null;){if(e.tag===3){vk(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(ul===null||!ul.has(r))){t=Zc(n,t),t=i3(e,t,1),e=ll(e,t,1),t=yi(),e!==null&&(Vf(e,1,t),ji(e,t));break}}e=e.return}}function K8(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=yi(),t.pingedLanes|=t.suspendedLanes&n,Nr===t&&(Hr&n)===n&&(br===4||br===3&&(Hr&130023424)===Hr&&500>ir()-K_?fu(t,0):Y_|=n),ji(t,e)}function C3(t,e){e===0&&(t.mode&1?(e=Hp,Hp<<=1,!(Hp&130023424)&&(Hp=4194304)):e=1);var n=yi();t=la(t,e),t!==null&&(Vf(t,e,n),ji(t,n))}function X8(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),C3(t,n)}function Z8(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(Ee(314))}r!==null&&r.delete(e),C3(t,n)}var k3;k3=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Ai.current)Li=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Li=!1,F8(t,e,n);Li=!!(t.flags&131072)}else Li=!1,En&&e.flags&1048576&&P4(e,Rm,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Xg(t,e),t=e.pendingProps;var i=qc(e,li.current);Oc(e,n),i=U_(null,e,r,t,i,n);var s=V_();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ni(r)?(s=!0,km(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,D_(e),i.updater=T0,e.stateNode=i,i._reactInternals=e,kw(e,r,t,n),e=Tw(null,e,r,!0,s,n)):(e.tag=0,En&&s&&L_(e),gi(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Xg(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=J8(r),t=Ws(r,t),i){case 0:e=Rw(null,e,r,t,n);break e;case 1:e=ak(null,e,r,t,n);break e;case 11:e=sk(null,e,r,t,n);break e;case 14:e=ok(null,e,r,Ws(r.type,t),n);break e}throw Error(Ee(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ws(r,i),Rw(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ws(r,i),ak(t,e,r,i,n);case 3:e:{if(l3(e),t===null)throw Error(Ee(387));r=e.pendingProps,s=e.memoizedState,i=s.element,I4(t,e),Lm(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Zc(Error(Ee(423)),e),e=lk(t,e,r,n,i);break e}else if(r!==i){i=Zc(Error(Ee(424)),e),e=lk(t,e,r,n,i);break e}else for(Ki=al(e.stateNode.containerInfo.firstChild),Xi=e,En=!0,Ys=null,n=N4(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Yc(),r===i){e=ua(t,e,n);break e}gi(t,e,r,n)}e=e.child}return e;case 5:return O4(e),t===null&&bw(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,vw(r,i)?o=null:s!==null&&vw(r,s)&&(e.flags|=32),a3(t,e),gi(t,e,o,n),e.child;case 6:return t===null&&bw(e),null;case 13:return u3(t,e,n);case 4:return F_(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Kc(e,null,r,n):gi(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ws(r,i),sk(t,e,r,i,n);case 7:return gi(t,e,e.pendingProps,n),e.child;case 8:return gi(t,e,e.pendingProps.children,n),e.child;case 12:return gi(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,wn(Tm,r._currentValue),r._currentValue=o,s!==null)if(Js(s.value,o)){if(s.children===i.children&&!Ai.current){e=ua(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=ra(-1,n&-n),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var h=c.pending;h===null?l.next=l:(l.next=h.next,h.next=l),c.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),Sw(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(Ee(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Sw(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}gi(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Oc(e,n),i=Rs(i),r=r(i),e.flags|=1,gi(t,e,r,n),e.child;case 14:return r=e.type,i=Ws(r,e.pendingProps),i=Ws(r.type,i),ok(t,e,r,i,n);case 15:return s3(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ws(r,i),Xg(t,e),e.tag=1,Ni(r)?(t=!0,km(e)):t=!1,Oc(e,n),n3(e,r,i),kw(e,r,i,n),Tw(null,e,r,!0,t,n);case 19:return c3(t,e,n);case 22:return o3(t,e,n)}throw Error(Ee(156,e.tag))};function E3(t,e){return JP(t,e)}function Q8(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function bs(t,e,n,r){return new Q8(t,e,n,r)}function J_(t){return t=t.prototype,!(!t||!t.isReactComponent)}function J8(t){if(typeof t=="function")return J_(t)?1:0;if(t!=null){if(t=t.$$typeof,t===y_)return 11;if(t===w_)return 14}return 2}function dl(t,e){var n=t.alternate;return n===null?(n=bs(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Jg(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")J_(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case oc:return pu(n.children,i,s,e);case v_:o=8,i|=8;break;case K1:return t=bs(12,n,e,i|2),t.elementType=K1,t.lanes=s,t;case X1:return t=bs(13,n,e,i),t.elementType=X1,t.lanes=s,t;case Z1:return t=bs(19,n,e,i),t.elementType=Z1,t.lanes=s,t;case OP:return M0(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case jP:o=10;break e;case IP:o=9;break e;case y_:o=11;break e;case w_:o=14;break e;case Ga:o=16,r=null;break e}throw Error(Ee(130,t==null?t:typeof t,""))}return e=bs(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function pu(t,e,n,r){return t=bs(7,t,r,e),t.lanes=n,t}function M0(t,e,n,r){return t=bs(22,t,r,e),t.elementType=OP,t.lanes=n,t.stateNode={isHidden:!1},t}function My(t,e,n){return t=bs(6,t,null,e),t.lanes=n,t}function Ay(t,e,n){return e=bs(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function e6(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=hy(0),this.expirationTimes=hy(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=hy(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function eb(t,e,n,r,i,s,o,a,l){return t=new e6(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=bs(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},D_(s),t}function t6(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:sc,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function R3(t){if(!t)return vl;t=t._reactInternals;e:{if(Tu(t)!==t||t.tag!==1)throw Error(Ee(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Ni(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Ee(171))}if(t.tag===1){var n=t.type;if(Ni(n))return R4(t,n,e)}return e}function T3(t,e,n,r,i,s,o,a,l){return t=eb(n,r,!0,t,i,s,o,a,l),t.context=R3(null),n=t.current,r=yi(),i=cl(n),s=ra(r,i),s.callback=e??null,ll(n,s,i),t.current.lanes=i,Vf(t,i,r),ji(t,r),t}function A0(t,e,n,r){var i=e.current,s=yi(),o=cl(i);return n=R3(n),e.context===null?e.context=n:e.pendingContext=n,e=ra(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=ll(i,e,o),t!==null&&(Qs(t,i,o,s),qg(t,i,o)),o}function Fm(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function yk(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function tb(t,e){yk(t,e),(t=t.alternate)&&yk(t,e)}function n6(){return null}var P3=typeof reportError=="function"?reportError:function(t){console.error(t)};function nb(t){this._internalRoot=t}N0.prototype.render=nb.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Ee(409));A0(t,e,null,null)};N0.prototype.unmount=nb.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Su(function(){A0(null,t,null,null)}),e[aa]=null}};function N0(t){this._internalRoot=t}N0.prototype.unstable_scheduleHydration=function(t){if(t){var e=o4();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Ka.length&&e!==0&&e<Ka[n].priority;n++);Ka.splice(n,0,t),n===0&&l4(t)}};function rb(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function j0(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function wk(){}function r6(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=Fm(o);s.call(c)}}var o=T3(e,r,t,0,null,!1,!1,"",wk);return t._reactRootContainer=o,t[aa]=o.current,gf(t.nodeType===8?t.parentNode:t),Su(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var c=Fm(l);a.call(c)}}var l=eb(t,0,!1,null,null,!1,!1,"",wk);return t._reactRootContainer=l,t[aa]=l.current,gf(t.nodeType===8?t.parentNode:t),Su(function(){A0(e,l,n,r)}),l}function I0(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=Fm(o);a.call(l)}}A0(e,o,t,i)}else o=r6(n,e,t,i,r);return Fm(o)}i4=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=xh(e.pendingLanes);n!==0&&(b_(e,n|1),ji(e,ir()),!(Kt&6)&&(Qc=ir()+500,bl()))}break;case 13:Su(function(){var r=la(t,1);if(r!==null){var i=yi();Qs(r,t,1,i)}}),tb(t,1)}};S_=function(t){if(t.tag===13){var e=la(t,134217728);if(e!==null){var n=yi();Qs(e,t,134217728,n)}tb(t,134217728)}};s4=function(t){if(t.tag===13){var e=cl(t),n=la(t,e);if(n!==null){var r=yi();Qs(n,t,e,r)}tb(t,e)}};o4=function(){return cn};a4=function(t,e){var n=cn;try{return cn=t,e()}finally{cn=n}};aw=function(t,e,n){switch(e){case"input":if(ew(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=k0(r);if(!i)throw Error(Ee(90));FP(r),ew(r,i)}}}break;case"textarea":$P(t,n);break;case"select":e=n.value,e!=null&&Ac(t,!!n.multiple,e,!1)}};qP=X_;YP=Su;var i6={usingClientEntryPoint:!1,Events:[Hf,cc,k0,HP,GP,X_]},sh={findFiberByHostInstance:ou,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},s6={bundleType:sh.bundleType,version:sh.version,rendererPackageName:sh.rendererPackageName,rendererConfig:sh.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:pa.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=ZP(t),t===null?null:t.stateNode},findFiberByHostInstance:sh.findFiberByHostInstance||n6,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ng=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ng.isDisabled&&ng.supportsFiber)try{_0=ng.inject(s6),bo=ng}catch{}}ts.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=i6;ts.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!rb(e))throw Error(Ee(200));return t6(t,e,null,n)};ts.createRoot=function(t,e){if(!rb(t))throw Error(Ee(299));var n=!1,r="",i=P3;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=eb(t,1,!1,null,null,n,!1,r,i),t[aa]=e.current,gf(t.nodeType===8?t.parentNode:t),new nb(e)};ts.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Ee(188)):(t=Object.keys(t).join(","),Error(Ee(268,t)));return t=ZP(e),t=t===null?null:t.stateNode,t};ts.flushSync=function(t){return Su(t)};ts.hydrate=function(t,e,n){if(!j0(e))throw Error(Ee(200));return I0(null,t,e,!0,n)};ts.hydrateRoot=function(t,e,n){if(!rb(t))throw Error(Ee(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=P3;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=T3(e,null,t,1,n??null,i,!1,s,o),t[aa]=e.current,gf(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new N0(e)};ts.render=function(t,e,n){if(!j0(e))throw Error(Ee(200));return I0(null,t,e,!1,n)};ts.unmountComponentAtNode=function(t){if(!j0(t))throw Error(Ee(40));return t._reactRootContainer?(Su(function(){I0(null,null,t,!1,function(){t._reactRootContainer=null,t[aa]=null})}),!0):!1};ts.unstable_batchedUpdates=X_;ts.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!j0(n))throw Error(Ee(200));if(t==null||t._reactInternals===void 0)throw Error(Ee(38));return I0(t,e,n,!1,r)};ts.version="18.3.1-next-f1338f8080-20240426";function L3(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(L3)}catch(t){console.error(t)}}L3(),LP.exports=ts;var oi=LP.exports,xk=oi;q1.createRoot=xk.createRoot,q1.hydrateRoot=xk.hydrateRoot;const o6="modulepreload",a6=function(t){return"/Bean_WebApp/"+t},_k={},l6=function(e,n,r){if(!n||n.length===0)return e();const i=document.getElementsByTagName("link");return Promise.all(n.map(s=>{if(s=a6(s),s in _k)return;_k[s]=!0;const o=s.endsWith(".css"),a=o?'[rel="stylesheet"]':"";if(!!r)for(let h=i.length-1;h>=0;h--){const f=i[h];if(f.href===s&&(!o||f.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${s}"]${a}`))return;const c=document.createElement("link");if(c.rel=o?"stylesheet":o6,o||(c.as="script",c.crossOrigin=""),c.href=s,document.head.appendChild(c),o)return new Promise((h,f)=>{c.addEventListener("load",h),c.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${s}`)))})})).then(()=>e()).catch(s=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=s,window.dispatchEvent(o),!o.defaultPrevented)throw s})};var bk="popstate";function u6(t={}){function e(r,i){let{pathname:s,search:o,hash:a}=r.location;return $w("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:Cf(i)}return d6(e,n,null,t)}function Tn(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Ps(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function c6(){return Math.random().toString(36).substring(2,10)}function Sk(t,e){return{usr:t.state,key:t.key,idx:e}}function $w(t,e,n=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?gd(e):e,state:n,key:e&&e.key||r||c6()}}function Cf({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function gd(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substring(r),t=t.substring(0,r)),t&&(e.pathname=t)}return e}function d6(t,e,n,r={}){let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a="POP",l=null,c=h();c==null&&(c=0,o.replaceState({...o.state,idx:c},""));function h(){return(o.state||{idx:null}).idx}function f(){a="POP";let k=h(),C=k==null?null:k-c;c=k,l&&l({action:a,location:x.location,delta:C})}function p(k,C){a="PUSH";let b=$w(x.location,k,C);n&&n(b,k),c=h()+1;let _=Sk(b,c),T=x.createHref(b);try{o.pushState(_,"",T)}catch(R){if(R instanceof DOMException&&R.name==="DataCloneError")throw R;i.location.assign(T)}s&&l&&l({action:a,location:x.location,delta:1})}function g(k,C){a="REPLACE";let b=$w(x.location,k,C);n&&n(b,k),c=h();let _=Sk(b,c),T=x.createHref(b);o.replaceState(_,"",T),s&&l&&l({action:a,location:x.location,delta:0})}function v(k){return h6(k)}let x={get action(){return a},get location(){return t(i,o)},listen(k){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(bk,f),l=k,()=>{i.removeEventListener(bk,f),l=null}},createHref(k){return e(i,k)},createURL:v,encodeLocation(k){let C=v(k);return{pathname:C.pathname,search:C.search,hash:C.hash}},push:p,replace:g,go(k){return o.go(k)}};return x}function h6(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),Tn(n,"No window.location.(origin|href) available to create URL");let r=typeof t=="string"?t:Cf(t);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function M3(t,e,n="/"){return f6(t,e,n,!1)}function f6(t,e,n,r){let i=typeof e=="string"?gd(e):e,s=ca(i.pathname||"/",n);if(s==null)return null;let o=A3(t);p6(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=k6(s);a=S6(o[l],c,r)}return a}function A3(t,e=[],n=[],r="",i=!1){let s=(o,a,l=i,c)=>{let h={relativePath:c===void 0?o.path||"":c,caseSensitive:o.caseSensitive===!0,childrenIndex:a,route:o};if(h.relativePath.startsWith("/")){if(!h.relativePath.startsWith(r)&&l)return;Tn(h.relativePath.startsWith(r),`Absolute route path "${h.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),h.relativePath=h.relativePath.slice(r.length)}let f=ia([r,h.relativePath]),p=n.concat(h);o.children&&o.children.length>0&&(Tn(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${f}".`),A3(o.children,e,p,f,l)),!(o.path==null&&!o.index)&&e.push({path:f,score:_6(f,o.index),routesMeta:p})};return t.forEach((o,a)=>{var l;if(o.path===""||!((l=o.path)!=null&&l.includes("?")))s(o,a);else for(let c of N3(o.path))s(o,a,!0,c)}),e}function N3(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=N3(r.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),i&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function p6(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:b6(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var g6=/^:[\w-]+$/,m6=3,v6=2,y6=1,w6=10,x6=-2,Ck=t=>t==="*";function _6(t,e){let n=t.split("/"),r=n.length;return n.some(Ck)&&(r+=x6),e&&(r+=v6),n.filter(i=>!Ck(i)).reduce((i,s)=>i+(g6.test(s)?m6:s===""?y6:w6),r)}function b6(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function S6(t,e,n=!1){let{routesMeta:r}=t,i={},s="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],c=a===r.length-1,h=s==="/"?e:e.slice(s.length)||"/",f=Bm({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},h),p=l.route;if(!f&&c&&n&&!r[r.length-1].route.index&&(f=Bm({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},h)),!f)return null;Object.assign(i,f.params),o.push({params:i,pathname:ia([s,f.pathname]),pathnameBase:L6(ia([s,f.pathnameBase])),route:p}),f.pathnameBase!=="/"&&(s=ia([s,f.pathnameBase]))}return o}function Bm(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=C6(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((c,{paramName:h,isOptional:f},p)=>{if(h==="*"){let v=a[p]||"";o=s.slice(0,s.length-v.length).replace(/(.)\/+$/,"$1")}const g=a[p];return f&&!g?c[h]=void 0:c[h]=(g||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:o,pattern:t}}function C6(t,e=!1,n=!0){Ps(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function k6(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Ps(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function ca(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}var E6=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,R6=t=>E6.test(t);function T6(t,e="/"){let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?gd(t):t,s;if(n)if(R6(n))s=n;else{if(n.includes("//")){let o=n;n=n.replace(/\/\/+/g,"/"),Ps(!1,`Pathnames cannot have embedded double slashes - normalizing ${o} -> ${n}`)}n.startsWith("/")?s=kk(n.substring(1),"/"):s=kk(n,e)}else s=e;return{pathname:s,search:M6(r),hash:A6(i)}}function kk(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Ny(t,e,n,r){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function P6(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function ib(t){let e=P6(t);return e.map((n,r)=>r===e.length-1?n.pathname:n.pathnameBase)}function sb(t,e,n,r=!1){let i;typeof t=="string"?i=gd(t):(i={...t},Tn(!i.pathname||!i.pathname.includes("?"),Ny("?","pathname","search",i)),Tn(!i.pathname||!i.pathname.includes("#"),Ny("#","pathname","hash",i)),Tn(!i.search||!i.search.includes("#"),Ny("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=n;else{let f=e.length-1;if(!r&&o.startsWith("..")){let p=o.split("/");for(;p[0]==="..";)p.shift(),f-=1;i.pathname=p.join("/")}a=f>=0?e[f]:"/"}let l=T6(i,a),c=o&&o!=="/"&&o.endsWith("/"),h=(s||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||h)&&(l.pathname+="/"),l}var ia=t=>t.join("/").replace(/\/\/+/g,"/"),L6=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),M6=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,A6=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function N6(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var j3=["POST","PUT","PATCH","DELETE"];new Set(j3);var j6=["GET",...j3];new Set(j6);var md=y.createContext(null);md.displayName="DataRouter";var O0=y.createContext(null);O0.displayName="DataRouterState";y.createContext(!1);var I3=y.createContext({isTransitioning:!1});I3.displayName="ViewTransition";var I6=y.createContext(new Map);I6.displayName="Fetchers";var O6=y.createContext(null);O6.displayName="Await";var to=y.createContext(null);to.displayName="Navigation";var qf=y.createContext(null);qf.displayName="Location";var Ms=y.createContext({outlet:null,matches:[],isDataRoute:!1});Ms.displayName="Route";var ob=y.createContext(null);ob.displayName="RouteError";function D6(t,{relative:e}={}){Tn(vd(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=y.useContext(to),{hash:i,pathname:s,search:o}=Yf(t,{relative:e}),a=s;return n!=="/"&&(a=s==="/"?n:ia([n,s])),r.createHref({pathname:a,search:o,hash:i})}function vd(){return y.useContext(qf)!=null}function Sl(){return Tn(vd(),"useLocation() may be used only in the context of a <Router> component."),y.useContext(qf).location}var O3="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function D3(t){y.useContext(to).static||y.useLayoutEffect(t)}function no(){let{isDataRoute:t}=y.useContext(Ms);return t?Q6():F6()}function F6(){Tn(vd(),"useNavigate() may be used only in the context of a <Router> component.");let t=y.useContext(md),{basename:e,navigator:n}=y.useContext(to),{matches:r}=y.useContext(Ms),{pathname:i}=Sl(),s=JSON.stringify(ib(r)),o=y.useRef(!1);return D3(()=>{o.current=!0}),y.useCallback((l,c={})=>{if(Ps(o.current,O3),!o.current)return;if(typeof l=="number"){n.go(l);return}let h=sb(l,JSON.parse(s),i,c.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:ia([e,h.pathname])),(c.replace?n.replace:n.push)(h,c.state,c)},[e,n,s,i,t])}var B6=y.createContext(null);function $6(t){let e=y.useContext(Ms).outlet;return y.useMemo(()=>e&&y.createElement(B6.Provider,{value:t},e),[e,t])}function ab(){let{matches:t}=y.useContext(Ms),e=t[t.length-1];return e?e.params:{}}function Yf(t,{relative:e}={}){let{matches:n}=y.useContext(Ms),{pathname:r}=Sl(),i=JSON.stringify(ib(n));return y.useMemo(()=>sb(t,JSON.parse(i),r,e==="path"),[t,i,r,e])}function z6(t,e){return F3(t,e)}function F3(t,e,n,r,i){var b;Tn(vd(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s}=y.useContext(to),{matches:o}=y.useContext(Ms),a=o[o.length-1],l=a?a.params:{},c=a?a.pathname:"/",h=a?a.pathnameBase:"/",f=a&&a.route;{let _=f&&f.path||"";B3(c,!f||_.endsWith("*")||_.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${c}" (under <Route path="${_}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${_}"> to <Route path="${_==="/"?"*":`${_}/*`}">.`)}let p=Sl(),g;if(e){let _=typeof e=="string"?gd(e):e;Tn(h==="/"||((b=_.pathname)==null?void 0:b.startsWith(h)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${h}" but pathname "${_.pathname}" was given in the \`location\` prop.`),g=_}else g=p;let v=g.pathname||"/",x=v;if(h!=="/"){let _=h.replace(/^\//,"").split("/");x="/"+v.replace(/^\//,"").split("/").slice(_.length).join("/")}let k=M3(t,{pathname:x});Ps(f||k!=null,`No routes matched location "${g.pathname}${g.search}${g.hash}" `),Ps(k==null||k[k.length-1].route.element!==void 0||k[k.length-1].route.Component!==void 0||k[k.length-1].route.lazy!==void 0,`Matched leaf route at location "${g.pathname}${g.search}${g.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let C=G6(k&&k.map(_=>Object.assign({},_,{params:Object.assign({},l,_.params),pathname:ia([h,s.encodeLocation?s.encodeLocation(_.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:_.pathname]),pathnameBase:_.pathnameBase==="/"?h:ia([h,s.encodeLocation?s.encodeLocation(_.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:_.pathnameBase])})),o,n,r,i);return e&&C?y.createElement(qf.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...g},navigationType:"POP"}},C):C}function U6(){let t=Z6(),e=N6(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},s={padding:"2px 4px",backgroundColor:r},o=null;return console.error("Error handled by React Router default ErrorBoundary:",t),o=y.createElement(y.Fragment,null,y.createElement("p",null," Hey developer "),y.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",y.createElement("code",{style:s},"ErrorBoundary")," or"," ",y.createElement("code",{style:s},"errorElement")," prop on your route.")),y.createElement(y.Fragment,null,y.createElement("h2",null,"Unexpected Application Error!"),y.createElement("h3",{style:{fontStyle:"italic"}},e),n?y.createElement("pre",{style:i},n):null,o)}var V6=y.createElement(U6,null),W6=class extends y.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.onError?this.props.onError(t,e):console.error("React Router caught the following error during render",t)}render(){return this.state.error!==void 0?y.createElement(Ms.Provider,{value:this.props.routeContext},y.createElement(ob.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function H6({routeContext:t,match:e,children:n}){let r=y.useContext(md);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),y.createElement(Ms.Provider,{value:t},n)}function G6(t,e=[],n=null,r=null,i=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let s=t,o=n==null?void 0:n.errors;if(o!=null){let h=s.findIndex(f=>f.route.id&&(o==null?void 0:o[f.route.id])!==void 0);Tn(h>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),s=s.slice(0,Math.min(s.length,h+1))}let a=!1,l=-1;if(n)for(let h=0;h<s.length;h++){let f=s[h];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(l=h),f.route.id){let{loaderData:p,errors:g}=n,v=f.route.loader&&!p.hasOwnProperty(f.route.id)&&(!g||g[f.route.id]===void 0);if(f.route.lazy||v){a=!0,l>=0?s=s.slice(0,l+1):s=[s[0]];break}}}let c=n&&r?(h,f)=>{var p,g;r(h,{location:n.location,params:((g=(p=n.matches)==null?void 0:p[0])==null?void 0:g.params)??{},errorInfo:f})}:void 0;return s.reduceRight((h,f,p)=>{let g,v=!1,x=null,k=null;n&&(g=o&&f.route.id?o[f.route.id]:void 0,x=f.route.errorElement||V6,a&&(l<0&&p===0?(B3("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),v=!0,k=null):l===p&&(v=!0,k=f.route.hydrateFallbackElement||null)));let C=e.concat(s.slice(0,p+1)),b=()=>{let _;return g?_=x:v?_=k:f.route.Component?_=y.createElement(f.route.Component,null):f.route.element?_=f.route.element:_=h,y.createElement(H6,{match:f,routeContext:{outlet:h,matches:C,isDataRoute:n!=null},children:_})};return n&&(f.route.ErrorBoundary||f.route.errorElement||p===0)?y.createElement(W6,{location:n.location,revalidation:n.revalidation,component:x,error:g,children:b(),routeContext:{outlet:null,matches:C,isDataRoute:!0},onError:c}):b()},null)}function lb(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function q6(t){let e=y.useContext(md);return Tn(e,lb(t)),e}function Y6(t){let e=y.useContext(O0);return Tn(e,lb(t)),e}function K6(t){let e=y.useContext(Ms);return Tn(e,lb(t)),e}function ub(t){let e=K6(t),n=e.matches[e.matches.length-1];return Tn(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function X6(){return ub("useRouteId")}function Z6(){var r;let t=y.useContext(ob),e=Y6("useRouteError"),n=ub("useRouteError");return t!==void 0?t:(r=e.errors)==null?void 0:r[n]}function Q6(){let{router:t}=q6("useNavigate"),e=ub("useNavigate"),n=y.useRef(!1);return D3(()=>{n.current=!0}),y.useCallback(async(i,s={})=>{Ps(n.current,O3),n.current&&(typeof i=="number"?t.navigate(i):await t.navigate(i,{fromRouteId:e,...s}))},[t,e])}var Ek={};function B3(t,e,n){!e&&!Ek[t]&&(Ek[t]=!0,Ps(!1,n))}y.memo(J6);function J6({routes:t,future:e,state:n,unstable_onError:r}){return F3(t,void 0,n,r,e)}function $m({to:t,replace:e,state:n,relative:r}){Tn(vd(),"<Navigate> may be used only in the context of a <Router> component.");let{static:i}=y.useContext(to);Ps(!i,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:s}=y.useContext(Ms),{pathname:o}=Sl(),a=no(),l=sb(t,ib(s),o,r==="path"),c=JSON.stringify(l);return y.useEffect(()=>{a(JSON.parse(c),{replace:e,state:n,relative:r})},[a,c,r,e,n]),null}function eD(t){return $6(t.context)}function pi(t){Tn(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function tD({basename:t="/",children:e=null,location:n,navigationType:r="POP",navigator:i,static:s=!1}){Tn(!vd(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=t.replace(/^\/*/,"/"),a=y.useMemo(()=>({basename:o,navigator:i,static:s,future:{}}),[o,i,s]);typeof n=="string"&&(n=gd(n));let{pathname:l="/",search:c="",hash:h="",state:f=null,key:p="default"}=n,g=y.useMemo(()=>{let v=ca(l,o);return v==null?null:{location:{pathname:v,search:c,hash:h,state:f,key:p},navigationType:r}},[o,l,c,h,f,p,r]);return Ps(g!=null,`<Router basename="${o}"> is not able to match the URL "${l}${c}${h}" because it does not start with the basename, so the <Router> won't render anything.`),g==null?null:y.createElement(to.Provider,{value:a},y.createElement(qf.Provider,{children:e,value:g}))}function nD({children:t,location:e}){return z6(zw(t),e)}function zw(t,e=[]){let n=[];return y.Children.forEach(t,(r,i)=>{if(!y.isValidElement(r))return;let s=[...e,i];if(r.type===y.Fragment){n.push.apply(n,zw(r.props.children,s));return}Tn(r.type===pi,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Tn(!r.props.index||!r.props.children,"An index route cannot have child routes.");let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=zw(r.props.children,s)),n.push(o)}),n}var em="get",tm="application/x-www-form-urlencoded";function D0(t){return t!=null&&typeof t.tagName=="string"}function rD(t){return D0(t)&&t.tagName.toLowerCase()==="button"}function iD(t){return D0(t)&&t.tagName.toLowerCase()==="form"}function sD(t){return D0(t)&&t.tagName.toLowerCase()==="input"}function oD(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function aD(t,e){return t.button===0&&(!e||e==="_self")&&!oD(t)}var rg=null;function lD(){if(rg===null)try{new FormData(document.createElement("form"),0),rg=!1}catch{rg=!0}return rg}var uD=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function jy(t){return t!=null&&!uD.has(t)?(Ps(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${tm}"`),null):t}function cD(t,e){let n,r,i,s,o;if(iD(t)){let a=t.getAttribute("action");r=a?ca(a,e):null,n=t.getAttribute("method")||em,i=jy(t.getAttribute("enctype"))||tm,s=new FormData(t)}else if(rD(t)||sD(t)&&(t.type==="submit"||t.type==="image")){let a=t.form;if(a==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let l=t.getAttribute("formaction")||a.getAttribute("action");if(r=l?ca(l,e):null,n=t.getAttribute("formmethod")||a.getAttribute("method")||em,i=jy(t.getAttribute("formenctype"))||jy(a.getAttribute("enctype"))||tm,s=new FormData(a,t),!lD()){let{name:c,type:h,value:f}=t;if(h==="image"){let p=c?`${c}.`:"";s.append(`${p}x`,"0"),s.append(`${p}y`,"0")}else c&&s.append(c,f)}}else{if(D0(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=em,r=null,i=tm,o=t}return s&&i==="text/plain"&&(o=s,s=void 0),{action:r,method:n.toLowerCase(),encType:i,formData:s,body:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function cb(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function dD(t,e,n){let r=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return r.pathname==="/"?r.pathname=`_root.${n}`:e&&ca(r.pathname,e)==="/"?r.pathname=`${e.replace(/\/$/,"")}/_root.${n}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${n}`,r}async function hD(t,e){if(t.id in e)return e[t.id];try{let n=await l6(()=>import(t.module),[]);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function fD(t){return t!=null&&typeof t.page=="string"}function pD(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function gD(t,e,n){let r=await Promise.all(t.map(async i=>{let s=e.routes[i.route.id];if(s){let o=await hD(s,n);return o.links?o.links():[]}return[]}));return wD(r.flat(1).filter(pD).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function Rk(t,e,n,r,i,s){let o=(l,c)=>n[c]?l.route.id!==n[c].route.id:!0,a=(l,c)=>{var h;return n[c].pathname!==l.pathname||((h=n[c].route.path)==null?void 0:h.endsWith("*"))&&n[c].params["*"]!==l.params["*"]};return s==="assets"?e.filter((l,c)=>o(l,c)||a(l,c)):s==="data"?e.filter((l,c)=>{var f;let h=r.routes[l.route.id];if(!h||!h.hasLoader)return!1;if(o(l,c)||a(l,c))return!0;if(l.route.shouldRevalidate){let p=l.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:((f=n[0])==null?void 0:f.params)||{},nextUrl:new URL(t,window.origin),nextParams:l.params,defaultShouldRevalidate:!0});if(typeof p=="boolean")return p}return!0}):[]}function mD(t,e,{includeHydrateFallback:n}={}){return vD(t.map(r=>{let i=e.routes[r.route.id];if(!i)return[];let s=[i.module];return i.clientActionModule&&(s=s.concat(i.clientActionModule)),i.clientLoaderModule&&(s=s.concat(i.clientLoaderModule)),n&&i.hydrateFallbackModule&&(s=s.concat(i.hydrateFallbackModule)),i.imports&&(s=s.concat(i.imports)),s}).flat(1))}function vD(t){return[...new Set(t)]}function yD(t){let e={},n=Object.keys(t).sort();for(let r of n)e[r]=t[r];return e}function wD(t,e){let n=new Set,r=new Set(e);return t.reduce((i,s)=>{if(e&&!fD(s)&&s.as==="script"&&s.href&&r.has(s.href))return i;let a=JSON.stringify(yD(s));return n.has(a)||(n.add(a),i.push({key:a,link:s})),i},[])}function $3(){let t=y.useContext(md);return cb(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function xD(){let t=y.useContext(O0);return cb(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var db=y.createContext(void 0);db.displayName="FrameworkContext";function z3(){let t=y.useContext(db);return cb(t,"You must render this element inside a <HydratedRouter> element"),t}function _D(t,e){let n=y.useContext(db),[r,i]=y.useState(!1),[s,o]=y.useState(!1),{onFocus:a,onBlur:l,onMouseEnter:c,onMouseLeave:h,onTouchStart:f}=e,p=y.useRef(null);y.useEffect(()=>{if(t==="render"&&o(!0),t==="viewport"){let x=C=>{C.forEach(b=>{o(b.isIntersecting)})},k=new IntersectionObserver(x,{threshold:.5});return p.current&&k.observe(p.current),()=>{k.disconnect()}}},[t]),y.useEffect(()=>{if(r){let x=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(x)}}},[r]);let g=()=>{i(!0)},v=()=>{i(!1),o(!1)};return n?t!=="intent"?[s,p,{}]:[s,p,{onFocus:oh(a,g),onBlur:oh(l,v),onMouseEnter:oh(c,g),onMouseLeave:oh(h,v),onTouchStart:oh(f,g)}]:[!1,p,{}]}function oh(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function bD({page:t,...e}){let{router:n}=$3(),r=y.useMemo(()=>M3(n.routes,t,n.basename),[n.routes,t,n.basename]);return r?y.createElement(CD,{page:t,matches:r,...e}):null}function SD(t){let{manifest:e,routeModules:n}=z3(),[r,i]=y.useState([]);return y.useEffect(()=>{let s=!1;return gD(t,e,n).then(o=>{s||i(o)}),()=>{s=!0}},[t,e,n]),r}function CD({page:t,matches:e,...n}){let r=Sl(),{manifest:i,routeModules:s}=z3(),{basename:o}=$3(),{loaderData:a,matches:l}=xD(),c=y.useMemo(()=>Rk(t,e,l,i,r,"data"),[t,e,l,i,r]),h=y.useMemo(()=>Rk(t,e,l,i,r,"assets"),[t,e,l,i,r]),f=y.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let v=new Set,x=!1;if(e.forEach(C=>{var _;let b=i.routes[C.route.id];!b||!b.hasLoader||(!c.some(T=>T.route.id===C.route.id)&&C.route.id in a&&((_=s[C.route.id])!=null&&_.shouldRevalidate)||b.hasClientLoader?x=!0:v.add(C.route.id))}),v.size===0)return[];let k=dD(t,o,"data");return x&&v.size>0&&k.searchParams.set("_routes",e.filter(C=>v.has(C.route.id)).map(C=>C.route.id).join(",")),[k.pathname+k.search]},[o,a,r,i,c,e,t,s]),p=y.useMemo(()=>mD(h,i),[h,i]),g=SD(h);return y.createElement(y.Fragment,null,f.map(v=>y.createElement("link",{key:v,rel:"prefetch",as:"fetch",href:v,...n})),p.map(v=>y.createElement("link",{key:v,rel:"modulepreload",href:v,...n})),g.map(({key:v,link:x})=>y.createElement("link",{key:v,nonce:n.nonce,...x})))}function kD(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var U3=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{U3&&(window.__reactRouterVersion="7.9.6")}catch{}function ED({basename:t,children:e,window:n}){let r=y.useRef();r.current==null&&(r.current=u6({window:n,v5Compat:!0}));let i=r.current,[s,o]=y.useState({action:i.action,location:i.location}),a=y.useCallback(l=>{y.startTransition(()=>o(l))},[o]);return y.useLayoutEffect(()=>i.listen(a),[i,a]),y.createElement(tD,{basename:t,children:e,location:s.location,navigationType:s.action,navigator:i})}var V3=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,hb=y.forwardRef(function({onClick:e,discover:n="render",prefetch:r="none",relative:i,reloadDocument:s,replace:o,state:a,target:l,to:c,preventScrollReset:h,viewTransition:f,...p},g){let{basename:v}=y.useContext(to),x=typeof c=="string"&&V3.test(c),k,C=!1;if(typeof c=="string"&&x&&(k=c,U3))try{let $=new URL(window.location.href),j=c.startsWith("//")?new URL($.protocol+c):new URL(c),V=ca(j.pathname,v);j.origin===$.origin&&V!=null?c=V+j.search+j.hash:C=!0}catch{Ps(!1,`<Link to="${c}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let b=D6(c,{relative:i}),[_,T,R]=_D(r,p),L=PD(c,{replace:o,state:a,target:l,preventScrollReset:h,relative:i,viewTransition:f});function M($){e&&e($),$.defaultPrevented||L($)}let A=y.createElement("a",{...p,...R,href:k||b,onClick:C||s?e:M,ref:kD(g,T),target:l,"data-discover":!x&&n==="render"?"true":void 0});return _&&!x?y.createElement(y.Fragment,null,A,y.createElement(bD,{page:b})):A});hb.displayName="Link";var W3=y.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:r="",end:i=!1,style:s,to:o,viewTransition:a,children:l,...c},h){let f=Yf(o,{relative:c.relative}),p=Sl(),g=y.useContext(O0),{navigator:v,basename:x}=y.useContext(to),k=g!=null&&jD(f)&&a===!0,C=v.encodeLocation?v.encodeLocation(f).pathname:f.pathname,b=p.pathname,_=g&&g.navigation&&g.navigation.location?g.navigation.location.pathname:null;n||(b=b.toLowerCase(),_=_?_.toLowerCase():null,C=C.toLowerCase()),_&&x&&(_=ca(_,x)||_);const T=C!=="/"&&C.endsWith("/")?C.length-1:C.length;let R=b===C||!i&&b.startsWith(C)&&b.charAt(T)==="/",L=_!=null&&(_===C||!i&&_.startsWith(C)&&_.charAt(C.length)==="/"),M={isActive:R,isPending:L,isTransitioning:k},A=R?e:void 0,$;typeof r=="function"?$=r(M):$=[r,R?"active":null,L?"pending":null,k?"transitioning":null].filter(Boolean).join(" ");let j=typeof s=="function"?s(M):s;return y.createElement(hb,{...c,"aria-current":A,className:$,ref:h,style:j,to:o,viewTransition:a},typeof l=="function"?l(M):l)});W3.displayName="NavLink";var RD=y.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:r,replace:i,state:s,method:o=em,action:a,onSubmit:l,relative:c,preventScrollReset:h,viewTransition:f,...p},g)=>{let v=AD(),x=ND(a,{relative:c}),k=o.toLowerCase()==="get"?"get":"post",C=typeof a=="string"&&V3.test(a),b=_=>{if(l&&l(_),_.defaultPrevented)return;_.preventDefault();let T=_.nativeEvent.submitter,R=(T==null?void 0:T.getAttribute("formmethod"))||o;v(T||_.currentTarget,{fetcherKey:e,method:R,navigate:n,replace:i,state:s,relative:c,preventScrollReset:h,viewTransition:f})};return y.createElement("form",{ref:g,method:k,action:x,onSubmit:r?l:b,...p,"data-discover":!C&&t==="render"?"true":void 0})});RD.displayName="Form";function TD(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function H3(t){let e=y.useContext(md);return Tn(e,TD(t)),e}function PD(t,{target:e,replace:n,state:r,preventScrollReset:i,relative:s,viewTransition:o}={}){let a=no(),l=Sl(),c=Yf(t,{relative:s});return y.useCallback(h=>{if(aD(h,e)){h.preventDefault();let f=n!==void 0?n:Cf(l)===Cf(c);a(t,{replace:f,state:r,preventScrollReset:i,relative:s,viewTransition:o})}},[l,a,c,n,r,e,t,i,s,o])}var LD=0,MD=()=>`__${String(++LD)}__`;function AD(){let{router:t}=H3("useSubmit"),{basename:e}=y.useContext(to),n=X6();return y.useCallback(async(r,i={})=>{let{action:s,method:o,encType:a,formData:l,body:c}=cD(r,e);if(i.navigate===!1){let h=i.fetcherKey||MD();await t.fetch(h,n,i.action||s,{preventScrollReset:i.preventScrollReset,formData:l,body:c,formMethod:i.method||o,formEncType:i.encType||a,flushSync:i.flushSync})}else await t.navigate(i.action||s,{preventScrollReset:i.preventScrollReset,formData:l,body:c,formMethod:i.method||o,formEncType:i.encType||a,replace:i.replace,state:i.state,fromRouteId:n,flushSync:i.flushSync,viewTransition:i.viewTransition})},[t,e,n])}function ND(t,{relative:e}={}){let{basename:n}=y.useContext(to),r=y.useContext(Ms);Tn(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),s={...Yf(t||".",{relative:e})},o=Sl();if(t==null){s.search=o.search;let a=new URLSearchParams(s.search),l=a.getAll("index");if(l.some(h=>h==="")){a.delete("index"),l.filter(f=>f).forEach(f=>a.append("index",f));let h=a.toString();s.search=h?`?${h}`:""}}return(!t||t===".")&&i.route.index&&(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(s.pathname=s.pathname==="/"?n:ia([n,s.pathname])),Cf(s)}function jD(t,{relative:e}={}){let n=y.useContext(I3);Tn(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=H3("useViewTransitionState"),i=Yf(t,{relative:e});if(!n.isTransitioning)return!1;let s=ca(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=ca(n.nextLocation.pathname,r)||n.nextLocation.pathname;return Bm(i.pathname,o)!=null||Bm(i.pathname,s)!=null}const ID=t=>w.jsxs("svg",{width:"24px",height:"24px",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t,children:[w.jsx("rect",{x:"3",y:"4",width:"18",height:"5",rx:"1",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),w.jsx("path",{d:"M5 9H19V18C19 19.1046 18.1046 20 17 20H7C5.89543 20 5 19.1046 5 18V9Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),w.jsx("path",{d:"M10 13H14",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}),OD=t=>w.jsxs("svg",{width:"24px",height:"24px",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t,children:[w.jsx("path",{d:"M3 6C3 4.34315 4.34315 3 6 3H14C15.6569 3 17 4.34315 17 6V14C17 15.6569 15.6569 17 14 17H6C4.34315 17 3 15.6569 3 14V6Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),w.jsx("path",{d:"M21 7V18C21 19.6569 19.6569 21 18 21H7",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),w.jsx("path",{d:"M10 10V7M10 10V13M10 10H13M10 10H7",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}),DD=t=>w.jsx("svg",{width:"24px",height:"24px",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t,children:w.jsx("path",{d:"M3 19V18C3 15.7909 4.79086 14 7 14H11C13.2091 14 15 15.7909 15 18V19M15 11C16.6569 11 18 9.65685 18 8C18 6.34315 16.6569 5 15 5M21 19V18C21 15.7909 19.2091 14 17 14H16.5M12 8C12 9.65685 10.6569 11 9 11C7.34315 11 6 9.65685 6 8C6 6.34315 7.34315 5 9 5C10.6569 5 12 6.34315 12 8Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})});var Uw=function(t,e){return Uw=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},Uw(t,e)};function G3(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Uw(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var zm=function(){return zm=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},zm.apply(this,arguments)};function yd(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function q3(t,e,n,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s}function Y3(t,e){return function(n,r){e(n,r,t)}}function K3(t,e,n,r,i,s){function o(C){if(C!==void 0&&typeof C!="function")throw new TypeError("Function expected");return C}for(var a=r.kind,l=a==="getter"?"get":a==="setter"?"set":"value",c=!e&&t?r.static?t:t.prototype:null,h=e||(c?Object.getOwnPropertyDescriptor(c,r.name):{}),f,p=!1,g=n.length-1;g>=0;g--){var v={};for(var x in r)v[x]=x==="access"?{}:r[x];for(var x in r.access)v.access[x]=r.access[x];v.addInitializer=function(C){if(p)throw new TypeError("Cannot add initializers after decoration has completed");s.push(o(C||null))};var k=(0,n[g])(a==="accessor"?{get:h.get,set:h.set}:h[l],v);if(a==="accessor"){if(k===void 0)continue;if(k===null||typeof k!="object")throw new TypeError("Object expected");(f=o(k.get))&&(h.get=f),(f=o(k.set))&&(h.set=f),(f=o(k.init))&&i.unshift(f)}else(f=o(k))&&(a==="field"?i.unshift(f):h[l]=f)}c&&Object.defineProperty(c,r.name,h),p=!0}function X3(t,e,n){for(var r=arguments.length>2,i=0;i<e.length;i++)n=r?e[i].call(t,n):e[i].call(t);return r?n:void 0}function Z3(t){return typeof t=="symbol"?t:"".concat(t)}function Q3(t,e,n){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(t,"name",{configurable:!0,value:n?"".concat(n," ",e):e})}function J3(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function it(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(h){try{c(r.next(h))}catch(f){o(f)}}function l(h){try{c(r.throw(h))}catch(f){o(f)}}function c(h){h.done?s(h.value):i(h.value).then(a,l)}c((r=r.apply(t,e||[])).next())})}function e5(t,e){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return o.next=a(0),o.throw=a(1),o.return=a(2),typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(c){return function(h){return l([c,h])}}function l(c){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,c[0]&&(n=0)),n;)try{if(r=1,i&&(s=c[0]&2?i.return:c[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,c[1])).done)return s;switch(i=0,s&&(c=[c[0]&2,s.value]),c[0]){case 0:case 1:s=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,i=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!s||c[1]>s[0]&&c[1]<s[3])){n.label=c[1];break}if(c[0]===6&&n.label<s[1]){n.label=s[1],s=c;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(c);break}s[2]&&n.ops.pop(),n.trys.pop();continue}c=e.call(t,n)}catch(h){c=[6,h],i=0}finally{r=s=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}var F0=Object.create?function(t,e,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]};function t5(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&F0(e,t,n)}function Um(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function fb(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)s.push(i.value)}catch(a){o={error:a}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return s}function n5(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(fb(arguments[e]));return t}function r5(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),i=0,e=0;e<n;e++)for(var s=arguments[e],o=0,a=s.length;o<a;o++,i++)r[i]=s[o];return r}function i5(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return t.concat(s||Array.prototype.slice.call(e))}function Jc(t){return this instanceof Jc?(this.v=t,this):new Jc(t)}function s5(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,s=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(g){return function(v){return Promise.resolve(v).then(g,f)}}function a(g,v){r[g]&&(i[g]=function(x){return new Promise(function(k,C){s.push([g,x,k,C])>1||l(g,x)})},v&&(i[g]=v(i[g])))}function l(g,v){try{c(r[g](v))}catch(x){p(s[0][3],x)}}function c(g){g.value instanceof Jc?Promise.resolve(g.value.v).then(h,f):p(s[0][2],g)}function h(g){l("next",g)}function f(g){l("throw",g)}function p(g,v){g(v),s.shift(),s.length&&l(s[0][0],s[0][1])}}function o5(t){var e,n;return e={},r("next"),r("throw",function(i){throw i}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(i,s){e[i]=t[i]?function(o){return(n=!n)?{value:Jc(t[i](o)),done:!1}:s?s(o):o}:s}}function a5(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof Um=="function"?Um(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=t[s]&&function(o){return new Promise(function(a,l){o=t[s](o),i(a,l,o.done,o.value)})}}function i(s,o,a,l){Promise.resolve(l).then(function(c){s({value:c,done:a})},o)}}function l5(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}var FD=Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e},Vw=function(t){return Vw=Object.getOwnPropertyNames||function(e){var n=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[n.length]=r);return n},Vw(t)};function u5(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n=Vw(t),r=0;r<n.length;r++)n[r]!=="default"&&F0(e,t,n[r]);return FD(e,t),e}function c5(t){return t&&t.__esModule?t:{default:t}}function d5(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)}function h5(t,e,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(t,n):i?i.value=n:e.set(t,n),n}function f5(t,e){if(e===null||typeof e!="object"&&typeof e!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof t=="function"?e===t:t.has(e)}function p5(t,e,n){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var r,i;if(n){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=e[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=e[Symbol.dispose],n&&(i=r)}if(typeof r!="function")throw new TypeError("Object not disposable.");i&&(r=function(){try{i.call(this)}catch(s){return Promise.reject(s)}}),t.stack.push({value:e,dispose:r,async:n})}else n&&t.stack.push({async:!0});return e}var BD=typeof SuppressedError=="function"?SuppressedError:function(t,e,n){var r=new Error(n);return r.name="SuppressedError",r.error=t,r.suppressed=e,r};function g5(t){function e(s){t.error=t.hasError?new BD(s,t.error,"An error was suppressed during disposal."):s,t.hasError=!0}var n,r=0;function i(){for(;n=t.stack.pop();)try{if(!n.async&&r===1)return r=0,t.stack.push(n),Promise.resolve().then(i);if(n.dispose){var s=n.dispose.call(n.value);if(n.async)return r|=2,Promise.resolve(s).then(i,function(o){return e(o),i()})}else r|=1}catch(o){e(o)}if(r===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return i()}function m5(t,e){return typeof t=="string"&&/^\.\.?\//.test(t)?t.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(n,r,i,s,o){return r?e?".jsx":".js":i&&(!s||!o)?n:i+s+"."+o.toLowerCase()+"js"}):t}const $D={__extends:G3,__assign:zm,__rest:yd,__decorate:q3,__param:Y3,__esDecorate:K3,__runInitializers:X3,__propKey:Z3,__setFunctionName:Q3,__metadata:J3,__awaiter:it,__generator:e5,__createBinding:F0,__exportStar:t5,__values:Um,__read:fb,__spread:n5,__spreadArrays:r5,__spreadArray:i5,__await:Jc,__asyncGenerator:s5,__asyncDelegator:o5,__asyncValues:a5,__makeTemplateObject:l5,__importStar:u5,__importDefault:c5,__classPrivateFieldGet:d5,__classPrivateFieldSet:h5,__classPrivateFieldIn:f5,__addDisposableResource:p5,__disposeResources:g5,__rewriteRelativeImportExtension:m5},zD=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:p5,get __assign(){return zm},__asyncDelegator:o5,__asyncGenerator:s5,__asyncValues:a5,__await:Jc,__awaiter:it,__classPrivateFieldGet:d5,__classPrivateFieldIn:f5,__classPrivateFieldSet:h5,__createBinding:F0,__decorate:q3,__disposeResources:g5,__esDecorate:K3,__exportStar:t5,__extends:G3,__generator:e5,__importDefault:c5,__importStar:u5,__makeTemplateObject:l5,__metadata:J3,__param:Y3,__propKey:Z3,__read:fb,__rest:yd,__rewriteRelativeImportExtension:m5,__runInitializers:X3,__setFunctionName:Q3,__spread:n5,__spreadArray:i5,__spreadArrays:r5,__values:Um,default:$D},Symbol.toStringTag,{value:"Module"})),UD=t=>t?(...e)=>t(...e):(...e)=>fetch(...e);class pb extends Error{constructor(e,n="FunctionsError",r){super(e),this.name=n,this.context=r}}class VD extends pb{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Tk extends pb{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Pk extends pb{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Ww;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(Ww||(Ww={}));class WD{constructor(e,{headers:n={},customFetch:r,region:i=Ww.Any}={}){this.url=e,this.headers=n,this.region=i,this.fetch=UD(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return it(this,arguments,void 0,function*(n,r={}){var i;let s,o;try{const{headers:a,method:l,body:c,signal:h,timeout:f}=r;let p={},{region:g}=r;g||(g=this.region);const v=new URL(`${this.url}/${n}`);g&&g!=="any"&&(p["x-region"]=g,v.searchParams.set("forceFunctionRegion",g));let x;c&&(a&&!Object.prototype.hasOwnProperty.call(a,"Content-Type")||!a)?typeof Blob<"u"&&c instanceof Blob||c instanceof ArrayBuffer?(p["Content-Type"]="application/octet-stream",x=c):typeof c=="string"?(p["Content-Type"]="text/plain",x=c):typeof FormData<"u"&&c instanceof FormData?x=c:(p["Content-Type"]="application/json",x=JSON.stringify(c)):x=c;let k=h;f&&(o=new AbortController,s=setTimeout(()=>o.abort(),f),h?(k=o.signal,h.addEventListener("abort",()=>o.abort())):k=o.signal);const C=yield this.fetch(v.toString(),{method:l||"POST",headers:Object.assign(Object.assign(Object.assign({},p),this.headers),a),body:x,signal:k}).catch(R=>{throw new VD(R)}),b=C.headers.get("x-relay-error");if(b&&b==="true")throw new Tk(C);if(!C.ok)throw new Pk(C);let _=((i=C.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),T;return _==="application/json"?T=yield C.json():_==="application/octet-stream"||_==="application/pdf"?T=yield C.blob():_==="text/event-stream"?T=C:_==="multipart/form-data"?T=yield C.formData():T=yield C.text(),{data:T,error:null,response:C}}catch(a){return{data:null,error:a,response:a instanceof Pk||a instanceof Tk?a.context:void 0}}finally{s&&clearTimeout(s)}})}}var mi={};const wd=II(zD);var ig={},sg={},og={},ag={},lg={},ug={},Lk;function v5(){if(Lk)return ug;Lk=1,Object.defineProperty(ug,"__esModule",{value:!0});class t extends Error{constructor(n){super(n.message),this.name="PostgrestError",this.details=n.details,this.hint=n.hint,this.code=n.code}}return ug.default=t,ug}var Mk;function y5(){if(Mk)return lg;Mk=1,Object.defineProperty(lg,"__esModule",{value:!0});const e=wd.__importDefault(v5());class n{constructor(i){var s,o;this.shouldThrowOnError=!1,this.method=i.method,this.url=i.url,this.headers=new Headers(i.headers),this.schema=i.schema,this.body=i.body,this.shouldThrowOnError=(s=i.shouldThrowOnError)!==null&&s!==void 0?s:!1,this.signal=i.signal,this.isMaybeSingle=(o=i.isMaybeSingle)!==null&&o!==void 0?o:!1,i.fetch?this.fetch=i.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(i,s){return this.headers=new Headers(this.headers),this.headers.set(i,s),this}then(i,s){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const o=this.fetch;let a=o(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async l=>{var c,h,f,p;let g=null,v=null,x=null,k=l.status,C=l.statusText;if(l.ok){if(this.method!=="HEAD"){const R=await l.text();R===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((c=this.headers.get("Accept"))===null||c===void 0)&&c.includes("application/vnd.pgrst.plan+text"))?v=R:v=JSON.parse(R))}const _=(h=this.headers.get("Prefer"))===null||h===void 0?void 0:h.match(/count=(exact|planned|estimated)/),T=(f=l.headers.get("content-range"))===null||f===void 0?void 0:f.split("/");_&&T&&T.length>1&&(x=parseInt(T[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(v)&&(v.length>1?(g={code:"PGRST116",details:`Results contain ${v.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},v=null,x=null,k=406,C="Not Acceptable"):v.length===1?v=v[0]:v=null)}else{const _=await l.text();try{g=JSON.parse(_),Array.isArray(g)&&l.status===404&&(v=[],g=null,k=200,C="OK")}catch{l.status===404&&_===""?(k=204,C="No Content"):g={message:_}}if(g&&this.isMaybeSingle&&(!((p=g==null?void 0:g.details)===null||p===void 0)&&p.includes("0 rows"))&&(g=null,k=200,C="OK"),g&&this.shouldThrowOnError)throw new e.default(g)}return{error:g,data:v,count:x,status:k,statusText:C}});return this.shouldThrowOnError||(a=a.catch(l=>{var c,h,f,p,g,v;let x="";const k=l==null?void 0:l.cause;if(k){const C=(c=k==null?void 0:k.message)!==null&&c!==void 0?c:"",b=(h=k==null?void 0:k.code)!==null&&h!==void 0?h:"";x=`${(f=l==null?void 0:l.name)!==null&&f!==void 0?f:"FetchError"}: ${l==null?void 0:l.message}`,x+=`

Caused by: ${(p=k==null?void 0:k.name)!==null&&p!==void 0?p:"Error"}: ${C}`,b&&(x+=` (${b})`),k!=null&&k.stack&&(x+=`
${k.stack}`)}else x=(g=l==null?void 0:l.stack)!==null&&g!==void 0?g:"";return{error:{message:`${(v=l==null?void 0:l.name)!==null&&v!==void 0?v:"FetchError"}: ${l==null?void 0:l.message}`,details:x,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),a.then(i,s)}returns(){return this}overrideTypes(){return this}}return lg.default=n,lg}var Ak;function w5(){if(Ak)return ag;Ak=1,Object.defineProperty(ag,"__esModule",{value:!0});const e=wd.__importDefault(y5());class n extends e.default{select(i){let s=!1;const o=(i??"*").split("").map(a=>/\s/.test(a)&&!s?"":(a==='"'&&(s=!s),a)).join("");return this.url.searchParams.set("select",o),this.headers.append("Prefer","return=representation"),this}order(i,{ascending:s=!0,nullsFirst:o,foreignTable:a,referencedTable:l=a}={}){const c=l?`${l}.order`:"order",h=this.url.searchParams.get(c);return this.url.searchParams.set(c,`${h?`${h},`:""}${i}.${s?"asc":"desc"}${o===void 0?"":o?".nullsfirst":".nullslast"}`),this}limit(i,{foreignTable:s,referencedTable:o=s}={}){const a=typeof o>"u"?"limit":`${o}.limit`;return this.url.searchParams.set(a,`${i}`),this}range(i,s,{foreignTable:o,referencedTable:a=o}={}){const l=typeof a>"u"?"offset":`${a}.offset`,c=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(l,`${i}`),this.url.searchParams.set(c,`${s-i+1}`),this}abortSignal(i){return this.signal=i,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:i=!1,verbose:s=!1,settings:o=!1,buffers:a=!1,wal:l=!1,format:c="text"}={}){var h;const f=[i?"analyze":null,s?"verbose":null,o?"settings":null,a?"buffers":null,l?"wal":null].filter(Boolean).join("|"),p=(h=this.headers.get("Accept"))!==null&&h!==void 0?h:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${c}; for="${p}"; options=${f};`),c==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(i){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${i}`),this}}return ag.default=n,ag}var Nk;function gb(){if(Nk)return og;Nk=1,Object.defineProperty(og,"__esModule",{value:!0});const e=wd.__importDefault(w5()),n=new RegExp("[,()]");class r extends e.default{eq(s,o){return this.url.searchParams.append(s,`eq.${o}`),this}neq(s,o){return this.url.searchParams.append(s,`neq.${o}`),this}gt(s,o){return this.url.searchParams.append(s,`gt.${o}`),this}gte(s,o){return this.url.searchParams.append(s,`gte.${o}`),this}lt(s,o){return this.url.searchParams.append(s,`lt.${o}`),this}lte(s,o){return this.url.searchParams.append(s,`lte.${o}`),this}like(s,o){return this.url.searchParams.append(s,`like.${o}`),this}likeAllOf(s,o){return this.url.searchParams.append(s,`like(all).{${o.join(",")}}`),this}likeAnyOf(s,o){return this.url.searchParams.append(s,`like(any).{${o.join(",")}}`),this}ilike(s,o){return this.url.searchParams.append(s,`ilike.${o}`),this}ilikeAllOf(s,o){return this.url.searchParams.append(s,`ilike(all).{${o.join(",")}}`),this}ilikeAnyOf(s,o){return this.url.searchParams.append(s,`ilike(any).{${o.join(",")}}`),this}regexMatch(s,o){return this.url.searchParams.append(s,`match.${o}`),this}regexIMatch(s,o){return this.url.searchParams.append(s,`imatch.${o}`),this}is(s,o){return this.url.searchParams.append(s,`is.${o}`),this}isDistinct(s,o){return this.url.searchParams.append(s,`isdistinct.${o}`),this}in(s,o){const a=Array.from(new Set(o)).map(l=>typeof l=="string"&&n.test(l)?`"${l}"`:`${l}`).join(",");return this.url.searchParams.append(s,`in.(${a})`),this}contains(s,o){return typeof o=="string"?this.url.searchParams.append(s,`cs.${o}`):Array.isArray(o)?this.url.searchParams.append(s,`cs.{${o.join(",")}}`):this.url.searchParams.append(s,`cs.${JSON.stringify(o)}`),this}containedBy(s,o){return typeof o=="string"?this.url.searchParams.append(s,`cd.${o}`):Array.isArray(o)?this.url.searchParams.append(s,`cd.{${o.join(",")}}`):this.url.searchParams.append(s,`cd.${JSON.stringify(o)}`),this}rangeGt(s,o){return this.url.searchParams.append(s,`sr.${o}`),this}rangeGte(s,o){return this.url.searchParams.append(s,`nxl.${o}`),this}rangeLt(s,o){return this.url.searchParams.append(s,`sl.${o}`),this}rangeLte(s,o){return this.url.searchParams.append(s,`nxr.${o}`),this}rangeAdjacent(s,o){return this.url.searchParams.append(s,`adj.${o}`),this}overlaps(s,o){return typeof o=="string"?this.url.searchParams.append(s,`ov.${o}`):this.url.searchParams.append(s,`ov.{${o.join(",")}}`),this}textSearch(s,o,{config:a,type:l}={}){let c="";l==="plain"?c="pl":l==="phrase"?c="ph":l==="websearch"&&(c="w");const h=a===void 0?"":`(${a})`;return this.url.searchParams.append(s,`${c}fts${h}.${o}`),this}match(s){return Object.entries(s).forEach(([o,a])=>{this.url.searchParams.append(o,`eq.${a}`)}),this}not(s,o,a){return this.url.searchParams.append(s,`not.${o}.${a}`),this}or(s,{foreignTable:o,referencedTable:a=o}={}){const l=a?`${a}.or`:"or";return this.url.searchParams.append(l,`(${s})`),this}filter(s,o,a){return this.url.searchParams.append(s,`${o}.${a}`),this}}return og.default=r,og}var jk;function x5(){if(jk)return sg;jk=1,Object.defineProperty(sg,"__esModule",{value:!0});const e=wd.__importDefault(gb());class n{constructor(i,{headers:s={},schema:o,fetch:a}){this.url=i,this.headers=new Headers(s),this.schema=o,this.fetch=a}select(i,s){const{head:o=!1,count:a}=s??{},l=o?"HEAD":"GET";let c=!1;const h=(i??"*").split("").map(f=>/\s/.test(f)&&!c?"":(f==='"'&&(c=!c),f)).join("");return this.url.searchParams.set("select",h),a&&this.headers.append("Prefer",`count=${a}`),new e.default({method:l,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(i,{count:s,defaultToNull:o=!0}={}){var a;const l="POST";if(s&&this.headers.append("Prefer",`count=${s}`),o||this.headers.append("Prefer","missing=default"),Array.isArray(i)){const c=i.reduce((h,f)=>h.concat(Object.keys(f)),[]);if(c.length>0){const h=[...new Set(c)].map(f=>`"${f}"`);this.url.searchParams.set("columns",h.join(","))}}return new e.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}upsert(i,{onConflict:s,ignoreDuplicates:o=!1,count:a,defaultToNull:l=!0}={}){var c;const h="POST";if(this.headers.append("Prefer",`resolution=${o?"ignore":"merge"}-duplicates`),s!==void 0&&this.url.searchParams.set("on_conflict",s),a&&this.headers.append("Prefer",`count=${a}`),l||this.headers.append("Prefer","missing=default"),Array.isArray(i)){const f=i.reduce((p,g)=>p.concat(Object.keys(g)),[]);if(f.length>0){const p=[...new Set(f)].map(g=>`"${g}"`);this.url.searchParams.set("columns",p.join(","))}}return new e.default({method:h,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(c=this.fetch)!==null&&c!==void 0?c:fetch})}update(i,{count:s}={}){var o;const a="PATCH";return s&&this.headers.append("Prefer",`count=${s}`),new e.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}delete({count:i}={}){var s;const o="DELETE";return i&&this.headers.append("Prefer",`count=${i}`),new e.default({method:o,url:this.url,headers:this.headers,schema:this.schema,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}}return sg.default=n,sg}var Ik;function HD(){if(Ik)return ig;Ik=1,Object.defineProperty(ig,"__esModule",{value:!0});const t=wd,e=t.__importDefault(x5()),n=t.__importDefault(gb());class r{constructor(s,{headers:o={},schema:a,fetch:l}={}){this.url=s,this.headers=new Headers(o),this.schemaName=a,this.fetch=l}from(s){if(!s||typeof s!="string"||s.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");const o=new URL(`${this.url}/${s}`);return new e.default(o,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(s){return new r(this.url,{headers:this.headers,schema:s,fetch:this.fetch})}rpc(s,o={},{head:a=!1,get:l=!1,count:c}={}){var h;let f;const p=new URL(`${this.url}/rpc/${s}`);let g;a||l?(f=a?"HEAD":"GET",Object.entries(o).filter(([x,k])=>k!==void 0).map(([x,k])=>[x,Array.isArray(k)?`{${k.join(",")}}`:`${k}`]).forEach(([x,k])=>{p.searchParams.append(x,k)})):(f="POST",g=o);const v=new Headers(this.headers);return c&&v.set("Prefer",`count=${c}`),new n.default({method:f,url:p,headers:v,schema:this.schemaName,body:g,fetch:(h=this.fetch)!==null&&h!==void 0?h:fetch})}}return ig.default=r,ig}Object.defineProperty(mi,"__esModule",{value:!0});var _5=mi.PostgrestError=M5=mi.PostgrestBuilder=P5=mi.PostgrestTransformBuilder=R5=mi.PostgrestFilterBuilder=k5=mi.PostgrestQueryBuilder=S5=mi.PostgrestClient=void 0;const xd=wd,b5=xd.__importDefault(HD());var S5=mi.PostgrestClient=b5.default;const C5=xd.__importDefault(x5());var k5=mi.PostgrestQueryBuilder=C5.default;const E5=xd.__importDefault(gb());var R5=mi.PostgrestFilterBuilder=E5.default;const T5=xd.__importDefault(w5());var P5=mi.PostgrestTransformBuilder=T5.default;const L5=xd.__importDefault(y5());var M5=mi.PostgrestBuilder=L5.default;const A5=xd.__importDefault(v5());_5=mi.PostgrestError=A5.default;var N5=mi.default={PostgrestClient:b5.default,PostgrestQueryBuilder:C5.default,PostgrestFilterBuilder:E5.default,PostgrestTransformBuilder:T5.default,PostgrestBuilder:L5.default,PostgrestError:A5.default};const GD=mP({__proto__:null,get PostgrestBuilder(){return M5},get PostgrestClient(){return S5},get PostgrestError(){return _5},get PostgrestFilterBuilder(){return R5},get PostgrestQueryBuilder(){return k5},get PostgrestTransformBuilder(){return P5},default:N5},[mi]),{PostgrestClient:qD,PostgrestQueryBuilder:Rte,PostgrestFilterBuilder:Tte,PostgrestTransformBuilder:Pte,PostgrestBuilder:Lte,PostgrestError:Mte}=N5||GD;class YD{constructor(){}static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const n=process.versions;if(n&&n.node){const r=n.node,i=parseInt(r.replace(/^v/,"").split(".")[0]);return i>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${i} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${i} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let n=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(n+=`

Suggested solution: ${e.workaround}`),new Error(n)}static createWebSocket(e,n){const r=this.getWebSocketConstructor();return new r(e,n)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const KD="2.84.0",XD=`realtime-js/${KD}`,j5="1.0.0",ZD="2.0.0",Ok=j5,Hw=1e4,QD=1e3,JD=100;var ru;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(ru||(ru={}));var wr;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(wr||(wr={}));var qs;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(qs||(qs={}));var Gw;(function(t){t.websocket="websocket"})(Gw||(Gw={}));var iu;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(iu||(iu={}));class e9{constructor(){this.HEADER_LENGTH=1,this.META_LENGTH=4,this.USER_BROADCAST_PUSH_META_LENGTH=5,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast"}encode(e,n){if(e.event===this.BROADCAST_EVENT&&!(e.payload instanceof ArrayBuffer)&&typeof e.payload.event=="string")return n(this._binaryEncodeUserBroadcastPush(e));let r=[e.join_ref,e.ref,e.topic,e.event,e.payload];return n(JSON.stringify(r))}_binaryEncodeUserBroadcastPush(e){var n;return this._isArrayBuffer((n=e.payload)===null||n===void 0?void 0:n.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var n,r,i,s;const o=e.topic,a=(n=e.ref)!==null&&n!==void 0?n:"",l=(r=e.join_ref)!==null&&r!==void 0?r:"",c=e.payload.event,h=(s=(i=e.payload)===null||i===void 0?void 0:i.payload)!==null&&s!==void 0?s:new ArrayBuffer(0),f=this.USER_BROADCAST_PUSH_META_LENGTH+l.length+a.length+o.length+c.length,p=new ArrayBuffer(this.HEADER_LENGTH+f);let g=new DataView(p),v=0;g.setUint8(v++,this.KINDS.userBroadcastPush),g.setUint8(v++,l.length),g.setUint8(v++,a.length),g.setUint8(v++,o.length),g.setUint8(v++,c.length),g.setUint8(v++,this.BINARY_ENCODING),Array.from(l,k=>g.setUint8(v++,k.charCodeAt(0))),Array.from(a,k=>g.setUint8(v++,k.charCodeAt(0))),Array.from(o,k=>g.setUint8(v++,k.charCodeAt(0))),Array.from(c,k=>g.setUint8(v++,k.charCodeAt(0)));var x=new Uint8Array(p.byteLength+h.byteLength);return x.set(new Uint8Array(p),0),x.set(new Uint8Array(h),p.byteLength),x.buffer}_encodeJsonUserBroadcastPush(e){var n,r,i,s;const o=e.topic,a=(n=e.ref)!==null&&n!==void 0?n:"",l=(r=e.join_ref)!==null&&r!==void 0?r:"",c=e.payload.event,h=(s=(i=e.payload)===null||i===void 0?void 0:i.payload)!==null&&s!==void 0?s:{},p=new TextEncoder().encode(JSON.stringify(h)).buffer,g=this.USER_BROADCAST_PUSH_META_LENGTH+l.length+a.length+o.length+c.length,v=new ArrayBuffer(this.HEADER_LENGTH+g);let x=new DataView(v),k=0;x.setUint8(k++,this.KINDS.userBroadcastPush),x.setUint8(k++,l.length),x.setUint8(k++,a.length),x.setUint8(k++,o.length),x.setUint8(k++,c.length),x.setUint8(k++,this.JSON_ENCODING),Array.from(l,b=>x.setUint8(k++,b.charCodeAt(0))),Array.from(a,b=>x.setUint8(k++,b.charCodeAt(0))),Array.from(o,b=>x.setUint8(k++,b.charCodeAt(0))),Array.from(c,b=>x.setUint8(k++,b.charCodeAt(0)));var C=new Uint8Array(v.byteLength+p.byteLength);return C.set(new Uint8Array(v),0),C.set(new Uint8Array(p),v.byteLength),C.buffer}decode(e,n){if(this._isArrayBuffer(e)){let r=this._binaryDecode(e);return n(r)}if(typeof e=="string"){const r=JSON.parse(e),[i,s,o,a,l]=r;return n({join_ref:i,ref:s,topic:o,event:a,payload:l})}return n({})}_binaryDecode(e){const n=new DataView(e),r=n.getUint8(0),i=new TextDecoder;switch(r){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(e,n,i)}}_decodeUserBroadcast(e,n,r){const i=n.getUint8(1),s=n.getUint8(2),o=n.getUint8(3),a=n.getUint8(4);let l=this.HEADER_LENGTH+4;const c=r.decode(e.slice(l,l+i));l=l+i;const h=r.decode(e.slice(l,l+s));l=l+s;const f=r.decode(e.slice(l,l+o));l=l+o;const p=e.slice(l,e.byteLength),g=a===this.JSON_ENCODING?JSON.parse(r.decode(p)):p,v={type:this.BROADCAST_EVENT,event:h,payload:g};return o>0&&(v.meta=JSON.parse(f)),{join_ref:null,ref:null,topic:c,event:this.BROADCAST_EVENT,payload:v}}_isArrayBuffer(e){var n;return e instanceof ArrayBuffer||((n=e==null?void 0:e.constructor)===null||n===void 0?void 0:n.name)==="ArrayBuffer"}}class I5{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var yn;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(yn||(yn={}));const Dk=(t,e,n={})=>{var r;const i=(r=n.skipTypes)!==null&&r!==void 0?r:[];return e?Object.keys(e).reduce((s,o)=>(s[o]=t9(o,t,e,i),s),{}):{}},t9=(t,e,n,r)=>{const i=e.find(a=>a.name===t),s=i==null?void 0:i.type,o=n[t];return s&&!r.includes(s)?O5(s,o):qw(o)},O5=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return s9(e,n)}switch(t){case yn.bool:return n9(e);case yn.float4:case yn.float8:case yn.int2:case yn.int4:case yn.int8:case yn.numeric:case yn.oid:return r9(e);case yn.json:case yn.jsonb:return i9(e);case yn.timestamp:return o9(e);case yn.abstime:case yn.date:case yn.daterange:case yn.int4range:case yn.int8range:case yn.money:case yn.reltime:case yn.text:case yn.time:case yn.timestamptz:case yn.timetz:case yn.tsrange:case yn.tstzrange:return qw(e);default:return qw(e)}},qw=t=>t,n9=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},r9=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},i9=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},s9=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,r=t[n];if(t[0]==="{"&&r==="}"){let s;const o=t.slice(1,n);try{s=JSON.parse("["+o+"]")}catch{s=o?o.split(","):[]}return s.map(a=>O5(e,a))}return t},o9=t=>typeof t=="string"?t.replace(" ","T"):t,D5=t=>{const e=new URL(t);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class Iy{constructor(e,n,r={},i=Hw){this.channel=e,this.event=n,this.payload=r,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var r;return this._hasReceived(e)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Fk;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(Fk||(Fk={}));class Vh{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},i=>{const{onJoin:s,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Vh.syncState(this.state,i,s,o),this.pendingDiffs.forEach(l=>{this.state=Vh.syncDiff(this.state,l,s,o)}),this.pendingDiffs=[],a()}),this.channel._on(r.diff,{},i=>{const{onJoin:s,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=Vh.syncDiff(this.state,i,s,o),a())}),this.onJoin((i,s,o)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:s,newPresences:o})}),this.onLeave((i,s,o)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:s,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,r,i){const s=this.cloneDeep(e),o=this.transformState(n),a={},l={};return this.map(s,(c,h)=>{o[c]||(l[c]=h)}),this.map(o,(c,h)=>{const f=s[c];if(f){const p=h.map(k=>k.presence_ref),g=f.map(k=>k.presence_ref),v=h.filter(k=>g.indexOf(k.presence_ref)<0),x=f.filter(k=>p.indexOf(k.presence_ref)<0);v.length>0&&(a[c]=v),x.length>0&&(l[c]=x)}else a[c]=h}),this.syncDiff(s,{joins:a,leaves:l},r,i)}static syncDiff(e,n,r,i){const{joins:s,leaves:o}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),i||(i=()=>{}),this.map(s,(a,l)=>{var c;const h=(c=e[a])!==null&&c!==void 0?c:[];if(e[a]=this.cloneDeep(l),h.length>0){const f=e[a].map(g=>g.presence_ref),p=h.filter(g=>f.indexOf(g.presence_ref)<0);e[a].unshift(...p)}r(a,h,l)}),this.map(o,(a,l)=>{let c=e[a];if(!c)return;const h=l.map(f=>f.presence_ref);c=c.filter(f=>h.indexOf(f.presence_ref)<0),e[a]=c,i(a,c,l),c.length===0&&delete e[a]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(r=>n(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,r)=>{const i=e[r];return"metas"in i?n[r]=i.metas.map(s=>(s.presence_ref=s.phx_ref,delete s.phx_ref,delete s.phx_ref_prev,s)):n[r]=i,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Bk;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(Bk||(Bk={}));var Wh;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(Wh||(Wh={}));var Zo;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(Zo||(Zo={}));class mb{constructor(e,n={config:{}},r){var i,s;if(this.topic=e,this.params=n,this.socket=r,this.bindings={},this.state=wr.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new Iy(this,qs.join,this.params,this.timeout),this.rejoinTimer=new I5(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=wr.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=wr.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=wr.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=wr.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=wr.errored,this.rejoinTimer.scheduleTimeout())}),this._on(qs.reply,{},(o,a)=>{this._trigger(this._replyEventName(a),o)}),this.presence=new Vh(this),this.broadcastEndpointURL=D5(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((s=(i=this.params.config)===null||i===void 0?void 0:i.broadcast)===null||s===void 0)&&s.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,n=this.timeout){var r,i,s;if(this.socket.isConnected()||this.socket.connect(),this.state==wr.closed){const{config:{broadcast:o,presence:a,private:l}}=this.params,c=(i=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(g=>g.filter))!==null&&i!==void 0?i:[],h=!!this.bindings[Wh.PRESENCE]&&this.bindings[Wh.PRESENCE].length>0||((s=this.params.config.presence)===null||s===void 0?void 0:s.enabled)===!0,f={},p={broadcast:o,presence:Object.assign(Object.assign({},a),{enabled:h}),postgres_changes:c,private:l};this.socket.accessTokenValue&&(f.access_token=this.socket.accessTokenValue),this._onError(g=>e==null?void 0:e(Zo.CHANNEL_ERROR,g)),this._onClose(()=>e==null?void 0:e(Zo.CLOSED)),this.updateJoinPayload(Object.assign({config:p},f)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:g})=>{var v;if(this.socket.setAuth(),g===void 0){e==null||e(Zo.SUBSCRIBED);return}else{const x=this.bindings.postgres_changes,k=(v=x==null?void 0:x.length)!==null&&v!==void 0?v:0,C=[];for(let b=0;b<k;b++){const _=x[b],{filter:{event:T,schema:R,table:L,filter:M}}=_,A=g&&g[b];if(A&&A.event===T&&A.schema===R&&A.table===L&&A.filter===M)C.push(Object.assign(Object.assign({},_),{id:A.id}));else{this.unsubscribe(),this.state=wr.errored,e==null||e(Zo.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=C,e&&e(Zo.SUBSCRIBED);return}}).receive("error",g=>{this.state=wr.errored,e==null||e(Zo.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(g).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(Zo.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,r){return this.state===wr.joined&&e===Wh.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,n,r)}async httpSend(e,n,r={}){var i;const s=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(n==null)return Promise.reject("Payload is required for httpSend()");const o={method:"POST",headers:{Authorization:s,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:n,private:this.private}]})},a=await this._fetchWithTimeout(this.broadcastEndpointURL,o,(i=r.timeout)!==null&&i!==void 0?i:this.timeout);if(a.status===202)return{success:!0};let l=a.statusText;try{const c=await a.json();l=c.error||c.message||l}catch{}return Promise.reject(new Error(l))}async send(e,n={}){var r,i;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:s,payload:o}=e,l={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:s,payload:o,private:this.private}]})};try{const c=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((i=c.body)===null||i===void 0?void 0:i.cancel()),c.ok?"ok":"error"}catch(c){return c.name==="AbortError"?"timed out":"error"}}else return new Promise(s=>{var o,a,l;const c=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((l=(a=(o=this.params)===null||o===void 0?void 0:o.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.ack)&&s("ok"),c.receive("ok",()=>s("ok")),c.receive("error",()=>s("error")),c.receive("timeout",()=>s("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=wr.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(qs.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(i=>{r=new Iy(this,qs.leave,{},e),r.receive("ok",()=>{n(),i("ok")}).receive("timeout",()=>{n(),i("timed out")}).receive("error",()=>{i("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=wr.closed,this.bindings={}}async _fetchWithTimeout(e,n,r){const i=new AbortController,s=setTimeout(()=>i.abort(),r),o=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:i.signal}));return clearTimeout(s),o}_push(e,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new Iy(this,e,n,r);return this._canPush()?i.send():this._addToPushBuffer(i),i}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>JD){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(e,n,r){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,r){var i,s;const o=e.toLocaleLowerCase(),{close:a,error:l,leave:c,join:h}=qs;if(r&&[a,l,c,h].indexOf(o)>=0&&r!==this._joinRef())return;let p=this._onMessage(o,n,r);if(n&&!p)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(g=>{var v,x,k;return((v=g.filter)===null||v===void 0?void 0:v.event)==="*"||((k=(x=g.filter)===null||x===void 0?void 0:x.event)===null||k===void 0?void 0:k.toLocaleLowerCase())===o}).map(g=>g.callback(p,r)):(s=this.bindings[o])===null||s===void 0||s.filter(g=>{var v,x,k,C,b,_;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in g){const T=g.id,R=(v=g.filter)===null||v===void 0?void 0:v.event;return T&&((x=n.ids)===null||x===void 0?void 0:x.includes(T))&&(R==="*"||(R==null?void 0:R.toLocaleLowerCase())===((k=n.data)===null||k===void 0?void 0:k.type.toLocaleLowerCase()))}else{const T=(b=(C=g==null?void 0:g.filter)===null||C===void 0?void 0:C.event)===null||b===void 0?void 0:b.toLocaleLowerCase();return T==="*"||T===((_=n==null?void 0:n.event)===null||_===void 0?void 0:_.toLocaleLowerCase())}else return g.type.toLocaleLowerCase()===o}).map(g=>{if(typeof p=="object"&&"ids"in p){const v=p.data,{schema:x,table:k,commit_timestamp:C,type:b,errors:_}=v;p=Object.assign(Object.assign({},{schema:x,table:k,commit_timestamp:C,eventType:b,new:{},old:{},errors:_}),this._getPayloadRecords(v))}g.callback(p,r)})}_isClosed(){return this.state===wr.closed}_isJoined(){return this.state===wr.joined}_isJoining(){return this.state===wr.joining}_isLeaving(){return this.state===wr.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,r){const i=e.toLocaleLowerCase(),s={type:i,filter:n,callback:r};return this.bindings[i]?this.bindings[i].push(s):this.bindings[i]=[s],this}_off(e,n){const r=e.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(i=>{var s;return!(((s=i.type)===null||s===void 0?void 0:s.toLocaleLowerCase())===r&&mb.isEqual(i.filter,n))})),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const r in e)if(e[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(qs.close,{},e)}_onError(e){this._on(qs.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=wr.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=Dk(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=Dk(e.columns,e.old_record)),n}}const Oy=()=>{},cg={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},a9=[1e3,2e3,5e3,1e4],l9=1e4,u9=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class c9{constructor(e,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Hw,this.transport=null,this.heartbeatIntervalMs=cg.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Oy,this.ref=0,this.reconnectTimer=null,this.vsn=Ok,this.logger=Oy,this.conn=null,this.sendBuffer=[],this.serializer=new e9,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=i=>i?(...s)=>i(...s):(...s)=>fetch(...s),!(!((r=n==null?void 0:n.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${e}/${Gw.websocket}`,this.httpEndpoint=D5(e),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=YD.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const n=e.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(e?this.conn.close(e,n??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,n,r){this.logger(e,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case ru.connecting:return iu.Connecting;case ru.open:return iu.Open;case ru.closing:return iu.Closing;default:return iu.Closed}}isConnected(){return this.connectionState()===iu.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,n={config:{}}){const r=`realtime:${e}`,i=this.getChannels().find(s=>s.topic===r);if(i)return i;{const s=new mb(`realtime:${e}`,n,this);return this.channels.push(s),s}}push(e){const{topic:n,event:r,payload:i,ref:s}=e,o=()=>{this.encode(e,a=>{var l;(l=this.conn)===null||l===void 0||l.send(a)})};this.log("push",`${n} ${r} (${s})`,i),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(QD,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},cg.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply")try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error")}catch(c){this.log("error","error in heartbeat callback",c)}n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:i,payload:s,ref:o}=n,a=o?`(${o})`:"",l=s.status||"";this.log("receive",`${l} ${r} ${i} ${a}`.trim(),s),this.channels.filter(c=>c._isMember(r)).forEach(c=>c._trigger(i,s,o)),this._triggerStateCallbacks("message",n)})}_clearTimer(e){var n;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){if(this.conn){if(this.conn.readyState===ru.open||this.conn.readyState===ru.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(n=>{this.log("error","error waiting for auth on connect",n),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var n;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(qs.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const r=e.match(/\?/)?"&":"?",i=new URLSearchParams(n);return`${e}${r}${i}`}_workerObjectUrl(e){let n;if(e)n=e;else{const r=new Blob([u9],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(e,n=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(e=null){let n;e?n=e:this.accessToken?n=await this.accessToken():n=this.accessTokenValue,this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(r=>{const i={access_token:n,version:XD};n&&r.updateJoinPayload(i),r.joinedOnce&&r._isJoined()&&r._push(qs.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(n=>{this.log("error",`error setting auth in ${e}`,n)})}_triggerStateCallbacks(e,n){try{this.stateChangeCallbacks[e].forEach(r=>{try{r(n)}catch(i){this.log("error",`error in ${e} callback`,i)}})}catch(r){this.log("error",`error triggering ${e} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new I5(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},cg.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var n,r,i,s,o,a,l,c,h,f,p,g;switch(this.transport=(n=e==null?void 0:e.transport)!==null&&n!==void 0?n:null,this.timeout=(r=e==null?void 0:e.timeout)!==null&&r!==void 0?r:Hw,this.heartbeatIntervalMs=(i=e==null?void 0:e.heartbeatIntervalMs)!==null&&i!==void 0?i:cg.HEARTBEAT_INTERVAL,this.worker=(s=e==null?void 0:e.worker)!==null&&s!==void 0?s:!1,this.accessToken=(o=e==null?void 0:e.accessToken)!==null&&o!==void 0?o:null,this.heartbeatCallback=(a=e==null?void 0:e.heartbeatCallback)!==null&&a!==void 0?a:Oy,this.vsn=(l=e==null?void 0:e.vsn)!==null&&l!==void 0?l:Ok,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(c=e==null?void 0:e.reconnectAfterMs)!==null&&c!==void 0?c:v=>a9[v-1]||l9,this.vsn){case j5:this.encode=(h=e==null?void 0:e.encode)!==null&&h!==void 0?h:(v,x)=>x(JSON.stringify(v)),this.decode=(f=e==null?void 0:e.decode)!==null&&f!==void 0?f:(v,x)=>x(JSON.parse(v));break;case ZD:this.encode=(p=e==null?void 0:e.encode)!==null&&p!==void 0?p:this.serializer.encode.bind(this.serializer),this.decode=(g=e==null?void 0:e.decode)!==null&&g!==void 0?g:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}class vb extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function jn(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class d9 extends vb{constructor(e,n,r){super(e),this.name="StorageApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Yw extends vb{constructor(e,n){super(e),this.name="StorageUnknownError",this.originalError=n}}const yb=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),h9=()=>Response,Kw=t=>{if(Array.isArray(t))return t.map(n=>Kw(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,r])=>{const i=n.replace(/([-_][a-z])/gi,s=>s.toUpperCase().replace(/[-_]/g,""));e[i]=Kw(r)}),e},f9=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},Dy=t=>{var e;return t.msg||t.message||t.error_description||(typeof t.error=="string"?t.error:(e=t.error)===null||e===void 0?void 0:e.message)||JSON.stringify(t)},p9=(t,e,n)=>it(void 0,void 0,void 0,function*(){const r=yield h9();t instanceof r&&!(n!=null&&n.noResolveJson)?t.json().then(i=>{const s=t.status||500,o=(i==null?void 0:i.statusCode)||s+"";e(new d9(Dy(i),s,o))}).catch(i=>{e(new Yw(Dy(i),i))}):e(new Yw(Dy(t),t))}),g9=(t,e,n,r)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||!r?i:(f9(r)?(i.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),i.body=JSON.stringify(r)):i.body=r,e!=null&&e.duplex&&(i.duplex=e.duplex),Object.assign(Object.assign({},i),n))};function Kf(t,e,n,r,i,s){return it(this,void 0,void 0,function*(){return new Promise((o,a)=>{t(n,g9(e,r,i,s)).then(l=>{if(!l.ok)throw l;return r!=null&&r.noResolveJson?l:l.json()}).then(l=>o(l)).catch(l=>p9(l,a,r))})})}function kf(t,e,n,r){return it(this,void 0,void 0,function*(){return Kf(t,"GET",e,n,r)})}function Hs(t,e,n,r,i){return it(this,void 0,void 0,function*(){return Kf(t,"POST",e,r,i,n)})}function Xw(t,e,n,r,i){return it(this,void 0,void 0,function*(){return Kf(t,"PUT",e,r,i,n)})}function m9(t,e,n,r){return it(this,void 0,void 0,function*(){return Kf(t,"HEAD",e,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function wb(t,e,n,r,i){return it(this,void 0,void 0,function*(){return Kf(t,"DELETE",e,r,i,n)})}class v9{constructor(e,n){this.downloadFn=e,this.shouldThrowOnError=n}then(e,n){return this.execute().then(e,n)}execute(){return it(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(jn(e))return{data:null,error:e};throw e}})}}var F5;class y9{constructor(e,n){this.downloadFn=e,this.shouldThrowOnError=n,this[F5]="BlobDownloadBuilder",this.promise=null}asStream(){return new v9(this.downloadFn,this.shouldThrowOnError)}then(e,n){return this.getPromise().then(e,n)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return it(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(jn(e))return{data:null,error:e};throw e}})}}F5=Symbol.toStringTag;const w9=y9,x9={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},$k={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class _9{constructor(e,n={},r,i){this.shouldThrowOnError=!1,this.url=e,this.headers=n,this.bucketId=r,this.fetch=yb(i)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,n,r,i){return it(this,void 0,void 0,function*(){try{let s;const o=Object.assign(Object.assign({},$k),i);let a=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const l=o.metadata;typeof Blob<"u"&&r instanceof Blob?(s=new FormData,s.append("cacheControl",o.cacheControl),l&&s.append("metadata",this.encodeMetadata(l)),s.append("",r)):typeof FormData<"u"&&r instanceof FormData?(s=r,s.has("cacheControl")||s.append("cacheControl",o.cacheControl),l&&!s.has("metadata")&&s.append("metadata",this.encodeMetadata(l))):(s=r,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType,l&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(l))),(typeof ReadableStream<"u"&&s instanceof ReadableStream||s&&typeof s=="object"&&"pipe"in s&&typeof s.pipe=="function")&&!o.duplex&&(o.duplex="half")),i!=null&&i.headers&&(a=Object.assign(Object.assign({},a),i.headers));const c=this._removeEmptyFolders(n),h=this._getFinalPath(c),f=yield(e=="PUT"?Xw:Hs)(this.fetch,`${this.url}/object/${h}`,s,Object.assign({headers:a},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{data:{path:c,id:f.Id,fullPath:f.Key},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(jn(s))return{data:null,error:s};throw s}})}upload(e,n,r){return it(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,n,r)})}uploadToSignedUrl(e,n,r,i){return it(this,void 0,void 0,function*(){const s=this._removeEmptyFolders(e),o=this._getFinalPath(s),a=new URL(this.url+`/object/upload/sign/${o}`);a.searchParams.set("token",n);try{let l;const c=Object.assign({upsert:$k.upsert},i),h=Object.assign(Object.assign({},this.headers),{"x-upsert":String(c.upsert)});typeof Blob<"u"&&r instanceof Blob?(l=new FormData,l.append("cacheControl",c.cacheControl),l.append("",r)):typeof FormData<"u"&&r instanceof FormData?(l=r,l.append("cacheControl",c.cacheControl)):(l=r,h["cache-control"]=`max-age=${c.cacheControl}`,h["content-type"]=c.contentType);const f=yield Xw(this.fetch,a.toString(),l,{headers:h});return{data:{path:s,fullPath:f.Key},error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(jn(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(e,n){return it(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const i=Object.assign({},this.headers);n!=null&&n.upsert&&(i["x-upsert"]="true");const s=yield Hs(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:i}),o=new URL(this.url+s.url),a=o.searchParams.get("token");if(!a)throw new vb("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:a},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(jn(r))return{data:null,error:r};throw r}})}update(e,n,r){return it(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,n,r)})}move(e,n,r){return it(this,void 0,void 0,function*(){try{return{data:yield Hs(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(jn(i))return{data:null,error:i};throw i}})}copy(e,n,r){return it(this,void 0,void 0,function*(){try{return{data:{path:(yield Hs(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(jn(i))return{data:null,error:i};throw i}})}createSignedUrl(e,n,r){return it(this,void 0,void 0,function*(){try{let i=this._getFinalPath(e),s=yield Hs(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return s={signedUrl:encodeURI(`${this.url}${s.signedURL}${o}`)},{data:s,error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(jn(i))return{data:null,error:i};throw i}})}createSignedUrls(e,n,r){return it(this,void 0,void 0,function*(){try{const i=yield Hs(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:e},{headers:this.headers}),s=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:i.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${s}`):null})),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(jn(i))return{data:null,error:i};throw i}})}download(e,n){const i=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",s=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),o=s?`?${s}`:"",a=this._getFinalPath(e),l=()=>kf(this.fetch,`${this.url}/${i}/${a}${o}`,{headers:this.headers,noResolveJson:!0});return new w9(l,this.shouldThrowOnError)}info(e){return it(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{const r=yield kf(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:Kw(r),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(jn(r))return{data:null,error:r};throw r}})}exists(e){return it(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{return yield m9(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(jn(r)&&r instanceof Yw){const i=r.originalError;if([400,404].includes(i==null?void 0:i.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,n){const r=this._getFinalPath(e),i=[],s=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";s!==""&&i.push(s);const a=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});l!==""&&i.push(l);let c=i.join("&");return c!==""&&(c=`?${c}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${r}${c}`)}}}remove(e){return it(this,void 0,void 0,function*(){try{return{data:yield wb(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(jn(n))return{data:null,error:n};throw n}})}list(e,n,r){return it(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},x9),n),{prefix:e||""});return{data:yield Hs(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},r),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(jn(i))return{data:null,error:i};throw i}})}listV2(e,n){return it(this,void 0,void 0,function*(){try{const r=Object.assign({},e);return{data:yield Hs(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},n),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(jn(r))return{data:null,error:r};throw r}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const n=[];return e.width&&n.push(`width=${e.width}`),e.height&&n.push(`height=${e.height}`),e.resize&&n.push(`resize=${e.resize}`),e.format&&n.push(`format=${e.format}`),e.quality&&n.push(`quality=${e.quality}`),n.join("&")}}const B5="2.84.0",$5={"X-Client-Info":`storage-js/${B5}`};class b9{constructor(e,n={},r,i){this.shouldThrowOnError=!1;const s=new URL(e);i!=null&&i.useNewHostname&&/supabase\.(co|in|red)$/.test(s.hostname)&&!s.hostname.includes("storage.supabase.")&&(s.hostname=s.hostname.replace("supabase.","storage.supabase.")),this.url=s.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},$5),n),this.fetch=yb(r)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(e){return it(this,void 0,void 0,function*(){try{const n=this.listBucketOptionsToQueryString(e);return{data:yield kf(this.fetch,`${this.url}/bucket${n}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(jn(n))return{data:null,error:n};throw n}})}getBucket(e){return it(this,void 0,void 0,function*(){try{return{data:yield kf(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(jn(n))return{data:null,error:n};throw n}})}createBucket(e){return it(this,arguments,void 0,function*(n,r={public:!1}){try{return{data:yield Hs(this.fetch,`${this.url}/bucket`,{id:n,name:n,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(jn(i))return{data:null,error:i};throw i}})}updateBucket(e,n){return it(this,void 0,void 0,function*(){try{return{data:yield Xw(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(jn(r))return{data:null,error:r};throw r}})}emptyBucket(e){return it(this,void 0,void 0,function*(){try{return{data:yield Hs(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(jn(n))return{data:null,error:n};throw n}})}deleteBucket(e){return it(this,void 0,void 0,function*(){try{return{data:yield wb(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(jn(n))return{data:null,error:n};throw n}})}listBucketOptionsToQueryString(e){const n={};return e&&("limit"in e&&(n.limit=String(e.limit)),"offset"in e&&(n.offset=String(e.offset)),e.search&&(n.search=e.search),e.sortColumn&&(n.sortColumn=e.sortColumn),e.sortOrder&&(n.sortOrder=e.sortOrder)),Object.keys(n).length>0?"?"+new URLSearchParams(n).toString():""}}class S9{constructor(e,n={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},$5),n),this.fetch=yb(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return it(this,void 0,void 0,function*(){try{return{data:yield Hs(this.fetch,`${this.url}/bucket`,{name:e},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(jn(n))return{data:null,error:n};throw n}})}listBuckets(e){return it(this,void 0,void 0,function*(){try{const n=new URLSearchParams;(e==null?void 0:e.limit)!==void 0&&n.set("limit",e.limit.toString()),(e==null?void 0:e.offset)!==void 0&&n.set("offset",e.offset.toString()),e!=null&&e.sortColumn&&n.set("sortColumn",e.sortColumn),e!=null&&e.sortOrder&&n.set("sortOrder",e.sortOrder),e!=null&&e.search&&n.set("search",e.search);const r=n.toString(),i=r?`${this.url}/bucket?${r}`:`${this.url}/bucket`;return{data:yield kf(this.fetch,i,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(jn(n))return{data:null,error:n};throw n}})}deleteBucket(e){return it(this,void 0,void 0,function*(){try{return{data:yield wb(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(jn(n))return{data:null,error:n};throw n}})}}const xb={"X-Client-Info":`storage-js/${B5}`,"Content-Type":"application/json"};class z5 extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function Hi(t){return typeof t=="object"&&t!==null&&"__isStorageVectorsError"in t}class Fy extends z5{constructor(e,n,r){super(e),this.name="StorageVectorsApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class C9 extends z5{constructor(e,n){super(e),this.name="StorageVectorsUnknownError",this.originalError=n}}var zk;(function(t){t.InternalError="InternalError",t.S3VectorConflictException="S3VectorConflictException",t.S3VectorNotFoundException="S3VectorNotFoundException",t.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",t.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",t.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(zk||(zk={}));const _b=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),k9=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},Uk=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),E9=(t,e,n)=>it(void 0,void 0,void 0,function*(){if(t&&typeof t=="object"&&"status"in t&&"ok"in t&&typeof t.status=="number"&&!(n!=null&&n.noResolveJson)){const i=t.status||500,s=t;if(typeof s.json=="function")s.json().then(o=>{const a=(o==null?void 0:o.statusCode)||(o==null?void 0:o.code)||i+"";e(new Fy(Uk(o),i,a))}).catch(()=>{const o=i+"",a=s.statusText||`HTTP ${i} error`;e(new Fy(a,i,o))});else{const o=i+"",a=s.statusText||`HTTP ${i} error`;e(new Fy(a,i,o))}}else e(new C9(Uk(t),t))}),R9=(t,e,n,r)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||!r?i:(k9(r)?(i.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),i.body=JSON.stringify(r)):i.body=r,Object.assign(Object.assign({},i),n))};function T9(t,e,n,r,i,s){return it(this,void 0,void 0,function*(){return new Promise((o,a)=>{t(n,R9(e,r,i,s)).then(l=>{if(!l.ok)throw l;if(r!=null&&r.noResolveJson)return l;const c=l.headers.get("content-type");return!c||!c.includes("application/json")?{}:l.json()}).then(l=>o(l)).catch(l=>E9(l,a,r))})})}function Gi(t,e,n,r,i){return it(this,void 0,void 0,function*(){return T9(t,"POST",e,r,i,n)})}class P9{constructor(e,n={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},xb),n),this.fetch=_b(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(e){return it(this,void 0,void 0,function*(){try{return{data:(yield Gi(this.fetch,`${this.url}/CreateIndex`,e,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Hi(n))return{data:null,error:n};throw n}})}getIndex(e,n){return it(this,void 0,void 0,function*(){try{return{data:yield Gi(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:e,indexName:n},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Hi(r))return{data:null,error:r};throw r}})}listIndexes(e){return it(this,void 0,void 0,function*(){try{return{data:yield Gi(this.fetch,`${this.url}/ListIndexes`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Hi(n))return{data:null,error:n};throw n}})}deleteIndex(e,n){return it(this,void 0,void 0,function*(){try{return{data:(yield Gi(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:e,indexName:n},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Hi(r))return{data:null,error:r};throw r}})}}class L9{constructor(e,n={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},xb),n),this.fetch=_b(r)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(e){return it(this,void 0,void 0,function*(){try{if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield Gi(this.fetch,`${this.url}/PutVectors`,e,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Hi(n))return{data:null,error:n};throw n}})}getVectors(e){return it(this,void 0,void 0,function*(){try{return{data:yield Gi(this.fetch,`${this.url}/GetVectors`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Hi(n))return{data:null,error:n};throw n}})}listVectors(e){return it(this,void 0,void 0,function*(){try{if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return{data:yield Gi(this.fetch,`${this.url}/ListVectors`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Hi(n))return{data:null,error:n};throw n}})}queryVectors(e){return it(this,void 0,void 0,function*(){try{return{data:yield Gi(this.fetch,`${this.url}/QueryVectors`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Hi(n))return{data:null,error:n};throw n}})}deleteVectors(e){return it(this,void 0,void 0,function*(){try{if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield Gi(this.fetch,`${this.url}/DeleteVectors`,e,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Hi(n))return{data:null,error:n};throw n}})}}class M9{constructor(e,n={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},xb),n),this.fetch=_b(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return it(this,void 0,void 0,function*(){try{return{data:(yield Gi(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Hi(n))return{data:null,error:n};throw n}})}getBucket(e){return it(this,void 0,void 0,function*(){try{return{data:yield Gi(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:e},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Hi(n))return{data:null,error:n};throw n}})}listBuckets(){return it(this,arguments,void 0,function*(e={}){try{return{data:yield Gi(this.fetch,`${this.url}/ListVectorBuckets`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Hi(n))return{data:null,error:n};throw n}})}deleteBucket(e){return it(this,void 0,void 0,function*(){try{return{data:(yield Gi(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Hi(n))return{data:null,error:n};throw n}})}}class A9 extends M9{constructor(e,n={}){super(e,n.headers||{},n.fetch)}from(e){return new N9(this.url,this.headers,e,this.fetch)}}class N9 extends P9{constructor(e,n,r,i){super(e,n,i),this.vectorBucketName=r}createIndex(e){const n=Object.create(null,{createIndex:{get:()=>super.createIndex}});return it(this,void 0,void 0,function*(){return n.createIndex.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const e=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return it(this,arguments,void 0,function*(n={}){return e.listIndexes.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName}))})}getIndex(e){const n=Object.create(null,{getIndex:{get:()=>super.getIndex}});return it(this,void 0,void 0,function*(){return n.getIndex.call(this,this.vectorBucketName,e)})}deleteIndex(e){const n=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return it(this,void 0,void 0,function*(){return n.deleteIndex.call(this,this.vectorBucketName,e)})}index(e){return new j9(this.url,this.headers,this.vectorBucketName,e,this.fetch)}}class j9 extends L9{constructor(e,n,r,i,s){super(e,n,s),this.vectorBucketName=r,this.indexName=i}putVectors(e){const n=Object.create(null,{putVectors:{get:()=>super.putVectors}});return it(this,void 0,void 0,function*(){return n.putVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(e){const n=Object.create(null,{getVectors:{get:()=>super.getVectors}});return it(this,void 0,void 0,function*(){return n.getVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const e=Object.create(null,{listVectors:{get:()=>super.listVectors}});return it(this,arguments,void 0,function*(n={}){return e.listVectors.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(e){const n=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return it(this,void 0,void 0,function*(){return n.queryVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(e){const n=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return it(this,void 0,void 0,function*(){return n.deleteVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class I9 extends b9{constructor(e,n={},r,i){super(e,n,r,i)}from(e){return new _9(this.url,this.headers,e,this.fetch)}get vectors(){return new A9(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new S9(this.url+"/iceberg",this.headers,this.fetch)}}const O9="2.84.0";let bh="";typeof Deno<"u"?bh="deno":typeof document<"u"?bh="web":typeof navigator<"u"&&navigator.product==="ReactNative"?bh="react-native":bh="node";const D9={"X-Client-Info":`supabase-js-${bh}/${O9}`},F9={headers:D9},B9={schema:"public"},$9={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},z9={},U9=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),V9=()=>Headers,W9=(t,e,n)=>{const r=U9(n),i=V9();return async(s,o)=>{var a;const l=(a=await e())!==null&&a!==void 0?a:t;let c=new i(o==null?void 0:o.headers);return c.has("apikey")||c.set("apikey",t),c.has("Authorization")||c.set("Authorization",`Bearer ${l}`),r(s,Object.assign(Object.assign({},o),{headers:c}))}};function H9(t){return t.endsWith("/")?t:t+"/"}function G9(t,e){var n,r;const{db:i,auth:s,realtime:o,global:a}=t,{db:l,auth:c,realtime:h,global:f}=e,p={db:Object.assign(Object.assign({},l),i),auth:Object.assign(Object.assign({},c),s),realtime:Object.assign(Object.assign({},h),o),storage:{},global:Object.assign(Object.assign(Object.assign({},f),a),{headers:Object.assign(Object.assign({},(n=f==null?void 0:f.headers)!==null&&n!==void 0?n:{}),(r=a==null?void 0:a.headers)!==null&&r!==void 0?r:{})}),accessToken:async()=>""};return t.accessToken?p.accessToken=t.accessToken:delete p.accessToken,p}function q9(t){const e=t==null?void 0:t.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(H9(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const U5="2.84.0",tc=30*1e3,Zw=3,By=Zw*tc,Y9="http://localhost:9999",K9="supabase.auth.token",X9={"X-Client-Info":`gotrue-js/${U5}`},Qw="X-Supabase-Api-Version",V5={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Z9=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Q9=10*60*1e3;class Ef extends Error{constructor(e,n,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function ot(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class J9 extends Ef{constructor(e,n,r){super(e,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function e7(t){return ot(t)&&t.name==="AuthApiError"}class su extends Ef{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class Cl extends Ef{constructor(e,n,r,i){super(e,r,i),this.name=n,this.status=r}}class Ui extends Cl{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function t7(t){return ot(t)&&t.name==="AuthSessionMissingError"}class Yu extends Cl{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class dg extends Cl{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class hg extends Cl{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function n7(t){return ot(t)&&t.name==="AuthImplicitGrantRedirectError"}class Vk extends Cl{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Jw extends Cl{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function $y(t){return ot(t)&&t.name==="AuthRetryableFetchError"}class Wk extends Cl{constructor(e,n,r){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class ex extends Cl{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Vm="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Hk=` 	
\r=`.split(""),r7=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<Hk.length;e+=1)t[Hk[e].charCodeAt(0)]=-2;for(let e=0;e<Vm.length;e+=1)t[Vm[e].charCodeAt(0)]=e;return t})();function Gk(t,e,n){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(Vm[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(Vm[r]),e.queuedBits-=6}}function W5(t,e,n){const r=r7[t];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function qk(t){const e=[],n=o=>{e.push(String.fromCodePoint(o))},r={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},s=o=>{o7(o,r,n)};for(let o=0;o<t.length;o+=1)W5(t.charCodeAt(o),i,s);return e.join("")}function i7(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function s7(t,e){for(let n=0;n<t.length;n+=1){let r=t.charCodeAt(n);if(r>55295&&r<=56319){const i=(r-55296)*1024&65535;r=(t.charCodeAt(n+1)-56320&65535|i)+65536,n+=1}i7(r,e)}}function o7(t,e,n){if(e.utf8seq===0){if(t<=127){n(t);return}for(let r=1;r<6;r+=1)if(!(t>>7-r&1)){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function Fc(t){const e=[],n={queue:0,queuedBits:0},r=i=>{e.push(i)};for(let i=0;i<t.length;i+=1)W5(t.charCodeAt(i),n,r);return new Uint8Array(e)}function a7(t){const e=[];return s7(t,n=>e.push(n)),new Uint8Array(e)}function uu(t){const e=[],n={queue:0,queuedBits:0},r=i=>{e.push(i)};return t.forEach(i=>Gk(i,n,r)),Gk(null,n,r),e.join("")}function l7(t){return Math.round(Date.now()/1e3)+t}function u7(){return Symbol("auth-callback")}const $r=()=>typeof window<"u"&&typeof document<"u",Yl={tested:!1,writable:!1},H5=()=>{if(!$r())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Yl.tested)return Yl.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),Yl.tested=!0,Yl.writable=!0}catch{Yl.tested=!0,Yl.writable=!1}return Yl.writable};function c7(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((i,s)=>{e[s]=i})}catch{}return n.searchParams.forEach((r,i)=>{e[i]=r}),e}const G5=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),d7=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",nc=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},Kl=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},za=async(t,e)=>{await t.removeItem(e)};class B0{constructor(){this.promise=new B0.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}B0.promiseConstructor=Promise;function zy(t){const e=t.split(".");if(e.length!==3)throw new ex("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!Z9.test(e[r]))throw new ex("JWT not in base64url format");return{header:JSON.parse(qk(e[0])),payload:JSON.parse(qk(e[1])),signature:Fc(e[2]),raw:{header:e[0],payload:e[1]}}}async function h7(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function f7(t,e){return new Promise((r,i)=>{(async()=>{for(let s=0;s<1/0;s++)try{const o=await t(s);if(!e(s,null,o)){r(o);return}}catch(o){if(!e(s,o)){i(o);return}}})()})}function p7(t){return("0"+t.toString(16)).substr(-2)}function g7(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let i="";for(let s=0;s<56;s++)i+=n.charAt(Math.floor(Math.random()*r));return i}return crypto.getRandomValues(e),Array.from(e,p7).join("")}async function m7(t){const n=new TextEncoder().encode(t),r=await crypto.subtle.digest("SHA-256",n),i=new Uint8Array(r);return Array.from(i).map(s=>String.fromCharCode(s)).join("")}async function v7(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await m7(t);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Ku(t,e,n=!1){const r=g7();let i=r;n&&(i+="/PASSWORD_RECOVERY"),await nc(t,`${e}-code-verifier`,i);const s=await v7(r);return[s,r===s?"plain":"s256"]}const y7=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function w7(t){const e=t.headers.get(Qw);if(!e||!e.match(y7))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function x7(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function _7(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const b7=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Xu(t){if(!b7.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Uy(){const t={};return new Proxy(t,{get:(e,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function S7(t,e){return new Proxy(t,{get:(n,r,i)=>{if(r==="__isInsecureUserWarningProxy")return!0;if(typeof r=="symbol"){const s=r.toString();if(s==="Symbol(Symbol.toPrimitive)"||s==="Symbol(Symbol.toStringTag)"||s==="Symbol(util.inspect.custom)"||s==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(n,r,i)}return!e.value&&typeof r=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(n,r,i)}})}function Yk(t){return JSON.parse(JSON.stringify(t))}const eu=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),C7=[502,503,504];async function Kk(t){var e;if(!d7(t))throw new Jw(eu(t),0);if(C7.includes(t.status))throw new Jw(eu(t),t.status);let n;try{n=await t.json()}catch(s){throw new su(eu(s),s)}let r;const i=w7(t);if(i&&i.getTime()>=V5["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new Wk(eu(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new Ui}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((s,o)=>s&&typeof o=="string",!0))throw new Wk(eu(n),t.status,n.weak_password.reasons);throw new J9(eu(n),t.status||500,r)}const k7=(t,e,n,r)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),n))};async function pt(t,e,n,r){var i;const s=Object.assign({},r==null?void 0:r.headers);s[Qw]||(s[Qw]=V5["2024-01-01"].name),r!=null&&r.jwt&&(s.Authorization=`Bearer ${r.jwt}`);const o=(i=r==null?void 0:r.query)!==null&&i!==void 0?i:{};r!=null&&r.redirectTo&&(o.redirect_to=r.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",l=await E7(t,e,n+a,{headers:s,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(l):{data:Object.assign({},l),error:null}}async function E7(t,e,n,r,i,s){const o=k7(e,r,i,s);let a;try{a=await t(n,Object.assign({},o))}catch(l){throw console.error(l),new Jw(eu(l),0)}if(a.ok||await Kk(a),r!=null&&r.noResolveJson)return a;try{return await a.json()}catch(l){await Kk(l)}}function Us(t){var e;let n=null;P7(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=l7(t.expires_in)));const r=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:r},error:null}}function Xk(t){const e=Us(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(e.data.weak_password=t.weak_password),e}function Za(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function R7(t){return{data:t,error:null}}function T7(t){const{action_link:e,email_otp:n,hashed_token:r,redirect_to:i,verification_type:s}=t,o=yd(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:e,email_otp:n,hashed_token:r,redirect_to:i,verification_type:s},l=Object.assign({},o);return{data:{properties:a,user:l},error:null}}function Zk(t){return t}function P7(t){return t.access_token&&t.refresh_token&&t.expires_in}const Vy=["global","local","others"];class L7{constructor({url:e="",headers:n={},fetch:r}){this.url=e,this.headers=n,this.fetch=G5(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,n=Vy[0]){if(Vy.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Vy.join(", ")}`);try{return await pt(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(ot(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,n={}){try{return await pt(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:Za})}catch(r){if(ot(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:n}=e,r=yd(e,["options"]),i=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(i.new_email=r==null?void 0:r.newEmail,delete i.newEmail),await pt(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:T7,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(ot(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await pt(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Za})}catch(n){if(ot(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,r,i,s,o,a,l;try{const c={nextPage:null,lastPage:0,total:0},h=await pt(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(s=(i=e==null?void 0:e.perPage)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:""},xform:Zk});if(h.error)throw h.error;const f=await h.json(),p=(o=h.headers.get("x-total-count"))!==null&&o!==void 0?o:0,g=(l=(a=h.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return g.length>0&&(g.forEach(v=>{const x=parseInt(v.split(";")[0].split("=")[1].substring(0,1)),k=JSON.parse(v.split(";")[1].split("=")[1]);c[`${k}Page`]=x}),c.total=parseInt(p)),{data:Object.assign(Object.assign({},f),c),error:null}}catch(c){if(ot(c))return{data:{users:[]},error:c};throw c}}async getUserById(e){Xu(e);try{return await pt(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Za})}catch(n){if(ot(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){Xu(e);try{return await pt(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:Za})}catch(r){if(ot(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,n=!1){Xu(e);try{return await pt(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:Za})}catch(r){if(ot(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){Xu(e.userId);try{const{data:n,error:r}=await pt(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:n,error:r}}catch(n){if(ot(n))return{data:null,error:n};throw n}}async _deleteFactor(e){Xu(e.userId),Xu(e.id);try{return{data:await pt(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(ot(n))return{data:null,error:n};throw n}}async _listOAuthClients(e){var n,r,i,s,o,a,l;try{const c={nextPage:null,lastPage:0,total:0},h=await pt(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(s=(i=e==null?void 0:e.perPage)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:""},xform:Zk});if(h.error)throw h.error;const f=await h.json(),p=(o=h.headers.get("x-total-count"))!==null&&o!==void 0?o:0,g=(l=(a=h.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return g.length>0&&(g.forEach(v=>{const x=parseInt(v.split(";")[0].split("=")[1].substring(0,1)),k=JSON.parse(v.split(";")[1].split("=")[1]);c[`${k}Page`]=x}),c.total=parseInt(p)),{data:Object.assign(Object.assign({},f),c),error:null}}catch(c){if(ot(c))return{data:{clients:[]},error:c};throw c}}async _createOAuthClient(e){try{return await pt(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(ot(n))return{data:null,error:n};throw n}}async _getOAuthClient(e){try{return await pt(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(ot(n))return{data:null,error:n};throw n}}async _updateOAuthClient(e,n){try{return await pt(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:n,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(ot(r))return{data:null,error:r};throw r}}async _deleteOAuthClient(e){try{return await pt(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(n){if(ot(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(e){try{return await pt(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(ot(n))return{data:null,error:n};throw n}}}function Qk(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}const Zu={debug:!!(globalThis&&H5()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class q5 extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class M7 extends q5{}async function A7(t,e,n){Zu.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),Zu.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async i=>{if(i){Zu.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,i.name);try{return await n()}finally{Zu.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,i.name)}}else{if(e===0)throw Zu.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new M7(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(Zu.debug)try{const s=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(s,null,"  "))}catch(s){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",s)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}function N7(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function Y5(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error(`@supabase/auth-js: Address "${t}" is invalid.`);return t.toLowerCase()}function j7(t){return parseInt(t,16)}function I7(t){const e=new TextEncoder().encode(t);return"0x"+Array.from(e,r=>r.toString(16).padStart(2,"0")).join("")}function O7(t){var e;const{chainId:n,domain:r,expirationTime:i,issuedAt:s=new Date,nonce:o,notBefore:a,requestId:l,resources:c,scheme:h,uri:f,version:p}=t;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(o&&o.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${o}`);if(!f)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(p!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${p}`);if(!((e=t.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${t.statement}`)}const g=Y5(t.address),v=h?`${h}://${r}`:r,x=t.statement?`${t.statement}
`:"",k=`${v} wants you to sign in with your Ethereum account:
${g}

${x}`;let C=`URI: ${f}
Version: ${p}
Chain ID: ${n}${o?`
Nonce: ${o}`:""}
Issued At: ${s.toISOString()}`;if(i&&(C+=`
Expiration Time: ${i.toISOString()}`),a&&(C+=`
Not Before: ${a.toISOString()}`),l&&(C+=`
Request ID: ${l}`),c){let b=`
Resources:`;for(const _ of c){if(!_||typeof _!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${_}`);b+=`
- ${_}`}C+=b}return`${k}
${C}`}class lr extends Error{constructor({message:e,code:n,cause:r,name:i}){var s;super(e,{cause:r}),this.__isWebAuthnError=!0,this.name=(s=i??(r instanceof Error?r.name:void 0))!==null&&s!==void 0?s:"Unknown Error",this.code=n}}class Wm extends lr{constructor(e,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:e}),this.name="WebAuthnUnknownError",this.originalError=n}}function D7({error:t,options:e}){var n,r,i;const{publicKey:s}=e;if(!s)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new lr({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if(t.name==="ConstraintError"){if(((n=s.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new lr({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:t});if(e.mediation==="conditional"&&((r=s.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new lr({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:t});if(((i=s.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new lr({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:t})}else{if(t.name==="InvalidStateError")return new lr({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:t});if(t.name==="NotAllowedError")return new lr({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="NotSupportedError")return s.pubKeyCredParams.filter(a=>a.type==="public-key").length===0?new lr({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:t}):new lr({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:t});if(t.name==="SecurityError"){const o=window.location.hostname;if(K5(o)){if(s.rp.id!==o)return new lr({message:`The RP ID "${s.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new lr({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="TypeError"){if(s.user.id.byteLength<1||s.user.id.byteLength>64)return new lr({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:t})}else if(t.name==="UnknownError")return new lr({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new lr({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}function F7({error:t,options:e}){const{publicKey:n}=e;if(!n)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new lr({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else{if(t.name==="NotAllowedError")return new lr({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="SecurityError"){const r=window.location.hostname;if(K5(r)){if(n.rpId!==r)return new lr({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new lr({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="UnknownError")return new lr({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new lr({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}class B7{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const $7=new B7;function z7(t){if(!t)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(t);const{challenge:e,user:n,excludeCredentials:r}=t,i=yd(t,["challenge","user","excludeCredentials"]),s=Fc(e).buffer,o=Object.assign(Object.assign({},n),{id:Fc(n.id).buffer}),a=Object.assign(Object.assign({},i),{challenge:s,user:o});if(r&&r.length>0){a.excludeCredentials=new Array(r.length);for(let l=0;l<r.length;l++){const c=r[l];a.excludeCredentials[l]=Object.assign(Object.assign({},c),{id:Fc(c.id).buffer,type:c.type||"public-key",transports:c.transports})}}return a}function U7(t){if(!t)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(t);const{challenge:e,allowCredentials:n}=t,r=yd(t,["challenge","allowCredentials"]),i=Fc(e).buffer,s=Object.assign(Object.assign({},r),{challenge:i});if(n&&n.length>0){s.allowCredentials=new Array(n.length);for(let o=0;o<n.length;o++){const a=n[o];s.allowCredentials[o]=Object.assign(Object.assign({},a),{id:Fc(a.id).buffer,type:a.type||"public-key",transports:a.transports})}}return s}function V7(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const n=t;return{id:t.id,rawId:t.id,response:{attestationObject:uu(new Uint8Array(t.response.attestationObject)),clientDataJSON:uu(new Uint8Array(t.response.clientDataJSON))},type:"public-key",clientExtensionResults:t.getClientExtensionResults(),authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function W7(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const n=t,r=t.getClientExtensionResults(),i=t.response;return{id:t.id,rawId:t.id,response:{authenticatorData:uu(new Uint8Array(i.authenticatorData)),clientDataJSON:uu(new Uint8Array(i.clientDataJSON)),signature:uu(new Uint8Array(i.signature)),userHandle:i.userHandle?uu(new Uint8Array(i.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function K5(t){return t==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(t)}function Jk(){var t,e;return!!($r()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.create)=="function"&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.get)=="function")}async function H7(t){try{const e=await navigator.credentials.create(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Wm("Browser returned unexpected credential type",e)}:{data:null,error:new Wm("Empty credential response",e)}}catch(e){return{data:null,error:D7({error:e,options:t})}}}async function G7(t){try{const e=await navigator.credentials.get(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Wm("Browser returned unexpected credential type",e)}:{data:null,error:new Wm("Empty credential response",e)}}catch(e){return{data:null,error:F7({error:e,options:t})}}}const q7={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},Y7={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function Hm(...t){const e=i=>i!==null&&typeof i=="object"&&!Array.isArray(i),n=i=>i instanceof ArrayBuffer||ArrayBuffer.isView(i),r={};for(const i of t)if(i)for(const s in i){const o=i[s];if(o!==void 0)if(Array.isArray(o))r[s]=o;else if(n(o))r[s]=o;else if(e(o)){const a=r[s];e(a)?r[s]=Hm(a,o):r[s]=Hm(o)}else r[s]=o}return r}function K7(t,e){return Hm(q7,t,e||{})}function X7(t,e){return Hm(Y7,t,e||{})}class Z7{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:n,friendlyName:r,signal:i},s){try{const{data:o,error:a}=await this.client.mfa.challenge({factorId:e,webauthn:n});if(!o)return{data:null,error:a};const l=i??$7.createNewAbortSignal();if(o.webauthn.type==="create"){const{user:c}=o.webauthn.credential_options.publicKey;c.name||(c.name=`${c.id}:${r}`),c.displayName||(c.displayName=c.name)}switch(o.webauthn.type){case"create":{const c=K7(o.webauthn.credential_options.publicKey,s==null?void 0:s.create),{data:h,error:f}=await H7({publicKey:c,signal:l});return h?{data:{factorId:e,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:h}},error:null}:{data:null,error:f}}case"request":{const c=X7(o.webauthn.credential_options.publicKey,s==null?void 0:s.request),{data:h,error:f}=await G7(Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:c,signal:l}));return h?{data:{factorId:e,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:h}},error:null}:{data:null,error:f}}}}catch(o){return ot(o)?{data:null,error:o}:{data:null,error:new su("Unexpected error in challenge",o)}}}async _verify({challengeId:e,factorId:n,webauthn:r}){return this.client.mfa.verify({factorId:n,challengeId:e,webauthn:r})}async _authenticate({factorId:e,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i}={}},s){if(!n)return{data:null,error:new Ef("rpId is required for WebAuthn authentication")};try{if(!Jk())return{data:null,error:new su("Browser does not support WebAuthn",null)};const{data:o,error:a}=await this.challenge({factorId:e,webauthn:{rpId:n,rpOrigins:r},signal:i},{request:s});if(!o)return{data:null,error:a};const{webauthn:l}=o;return this._verify({factorId:e,challengeId:o.challengeId,webauthn:{type:l.type,rpId:n,rpOrigins:r,credential_response:l.credential_response}})}catch(o){return ot(o)?{data:null,error:o}:{data:null,error:new su("Unexpected error in authenticate",o)}}}async _register({friendlyName:e,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i}={}},s){if(!n)return{data:null,error:new Ef("rpId is required for WebAuthn registration")};try{if(!Jk())return{data:null,error:new su("Browser does not support WebAuthn",null)};const{data:o,error:a}=await this._enroll({friendlyName:e});if(!o)return await this.client.mfa.listFactors().then(h=>{var f;return(f=h.data)===null||f===void 0?void 0:f.all.find(p=>p.factor_type==="webauthn"&&p.friendly_name===e&&p.status!=="unverified")}).then(h=>h?this.client.mfa.unenroll({factorId:h==null?void 0:h.id}):void 0),{data:null,error:a};const{data:l,error:c}=await this._challenge({factorId:o.id,friendlyName:o.friendly_name,webauthn:{rpId:n,rpOrigins:r},signal:i},{create:s});return l?this._verify({factorId:o.id,challengeId:l.challengeId,webauthn:{rpId:n,rpOrigins:r,type:l.webauthn.type,credential_response:l.webauthn.credential_response}}):{data:null,error:c}}catch(o){return ot(o)?{data:null,error:o}:{data:null,error:new su("Unexpected error in register",o)}}}}N7();const Q7={url:Y9,storageKey:K9,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:X9,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function eE(t,e,n){return await n()}const Qu={};class Rf{get jwks(){var e,n;return(n=(e=Qu[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(e){Qu[this.storageKey]=Object.assign(Object.assign({},Qu[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,n;return(n=(e=Qu[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Qu[this.storageKey]=Object.assign(Object.assign({},Qu[this.storageKey]),{cachedAt:e})}constructor(e){var n,r,i;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const s=Object.assign(Object.assign({},Q7),e);if(this.storageKey=s.storageKey,this.instanceID=(n=Rf.nextInstanceID[this.storageKey])!==null&&n!==void 0?n:0,Rf.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.instanceID>0&&$r()){const o=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(o),this.logDebugMessages&&console.trace(o)}if(this.persistSession=s.persistSession,this.autoRefreshToken=s.autoRefreshToken,this.admin=new L7({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=G5(s.fetch),this.lock=s.lock||eE,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,this.throwOnError=s.throwOnError,s.lock?this.lock=s.lock:$r()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=A7:this.lock=eE,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new Z7(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(s.storage?this.storage=s.storage:H5()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Qk(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=Qk(this.memoryStorage)),$r()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(i=this.broadcastChannel)===null||i===void 0||i.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o),await this._notifyAllSubscribers(o.data.event,o.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${U5}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let n={},r="none";if($r()&&(n=c7(window.location.href),this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce")),$r()&&this.detectSessionInUrl&&r!=="none"){const{data:i,error:s}=await this._getSessionFromURL(n,r);if(s){if(this._debug("#_initialize()","error detecting session from URL",s),n7(s)){const l=(e=s.details)===null||e===void 0?void 0:e.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:s}}return await this._removeSession(),{error:s}}const{session:o,redirectType:a}=i;return this._debug("#_initialize()","detected session in URL",o,"redirect type",a),await this._saveSession(o),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return ot(n)?this._returnResult({error:n}):this._returnResult({error:new su("Unexpected error during initialization",n)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,r,i;try{const s=await pt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(i=e==null?void 0:e.options)===null||i===void 0?void 0:i.captchaToken}},xform:Us}),{data:o,error:a}=s;if(a||!o)return this._returnResult({data:{user:null,session:null},error:a});const l=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),this._returnResult({data:{user:c,session:l},error:null})}catch(s){if(ot(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signUp(e){var n,r,i;try{let s;if("email"in e){const{email:h,password:f,options:p}=e;let g=null,v=null;this.flowType==="pkce"&&([g,v]=await Ku(this.storage,this.storageKey)),s=await pt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:p==null?void 0:p.emailRedirectTo,body:{email:h,password:f,data:(n=p==null?void 0:p.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken},code_challenge:g,code_challenge_method:v},xform:Us})}else if("phone"in e){const{phone:h,password:f,options:p}=e;s=await pt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:h,password:f,data:(r=p==null?void 0:p.data)!==null&&r!==void 0?r:{},channel:(i=p==null?void 0:p.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken}},xform:Us})}else throw new dg("You must provide either an email or phone number and a password");const{data:o,error:a}=s;if(a||!o)return this._returnResult({data:{user:null,session:null},error:a});const l=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),this._returnResult({data:{user:c,session:l},error:null})}catch(s){if(ot(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithPassword(e){try{let n;if("email"in e){const{email:s,password:o,options:a}=e;n=await pt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:s,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:Xk})}else if("phone"in e){const{phone:s,password:o,options:a}=e;n=await pt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:s,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:Xk})}else throw new dg("You must provide either an email or phone number and a password");const{data:r,error:i}=n;if(i)return this._returnResult({data:{user:null,session:null},error:i});if(!r||!r.session||!r.user){const s=new Yu;return this._returnResult({data:{user:null,session:null},error:s})}return r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),this._returnResult({data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:i})}catch(n){if(ot(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOAuth(e){var n,r,i,s;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(i=e.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(s=e.options)===null||s===void 0?void 0:s.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:n}=e;switch(n){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(e){var n,r,i,s,o,a,l,c,h,f,p;let g,v;if("message"in e)g=e.message,v=e.signature;else{const{chain:x,wallet:k,statement:C,options:b}=e;let _;if($r())if(typeof k=="object")_=k;else{const $=window;if("ethereum"in $&&typeof $.ethereum=="object"&&"request"in $.ethereum&&typeof $.ethereum.request=="function")_=$.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof k!="object"||!(b!=null&&b.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");_=k}const T=new URL((n=b==null?void 0:b.url)!==null&&n!==void 0?n:window.location.href),R=await _.request({method:"eth_requestAccounts"}).then($=>$).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!R||R.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const L=Y5(R[0]);let M=(r=b==null?void 0:b.signInWithEthereum)===null||r===void 0?void 0:r.chainId;if(!M){const $=await _.request({method:"eth_chainId"});M=j7($)}const A={domain:T.host,address:L,statement:C,uri:T.href,version:"1",chainId:M,nonce:(i=b==null?void 0:b.signInWithEthereum)===null||i===void 0?void 0:i.nonce,issuedAt:(o=(s=b==null?void 0:b.signInWithEthereum)===null||s===void 0?void 0:s.issuedAt)!==null&&o!==void 0?o:new Date,expirationTime:(a=b==null?void 0:b.signInWithEthereum)===null||a===void 0?void 0:a.expirationTime,notBefore:(l=b==null?void 0:b.signInWithEthereum)===null||l===void 0?void 0:l.notBefore,requestId:(c=b==null?void 0:b.signInWithEthereum)===null||c===void 0?void 0:c.requestId,resources:(h=b==null?void 0:b.signInWithEthereum)===null||h===void 0?void 0:h.resources};g=O7(A),v=await _.request({method:"personal_sign",params:[I7(g),L]})}try{const{data:x,error:k}=await pt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:g,signature:v},!((f=e.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(p=e.options)===null||p===void 0?void 0:p.captchaToken}}:null),xform:Us});if(k)throw k;if(!x||!x.session||!x.user){const C=new Yu;return this._returnResult({data:{user:null,session:null},error:C})}return x.session&&(await this._saveSession(x.session),await this._notifyAllSubscribers("SIGNED_IN",x.session)),this._returnResult({data:Object.assign({},x),error:k})}catch(x){if(ot(x))return this._returnResult({data:{user:null,session:null},error:x});throw x}}async signInWithSolana(e){var n,r,i,s,o,a,l,c,h,f,p,g;let v,x;if("message"in e)v=e.message,x=e.signature;else{const{chain:k,wallet:C,statement:b,options:_}=e;let T;if($r())if(typeof C=="object")T=C;else{const L=window;if("solana"in L&&typeof L.solana=="object"&&("signIn"in L.solana&&typeof L.solana.signIn=="function"||"signMessage"in L.solana&&typeof L.solana.signMessage=="function"))T=L.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof C!="object"||!(_!=null&&_.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");T=C}const R=new URL((n=_==null?void 0:_.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in T&&T.signIn){const L=await T.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},_==null?void 0:_.signInWithSolana),{version:"1",domain:R.host,uri:R.href}),b?{statement:b}:null));let M;if(Array.isArray(L)&&L[0]&&typeof L[0]=="object")M=L[0];else if(L&&typeof L=="object"&&"signedMessage"in L&&"signature"in L)M=L;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in M&&"signature"in M&&(typeof M.signedMessage=="string"||M.signedMessage instanceof Uint8Array)&&M.signature instanceof Uint8Array)v=typeof M.signedMessage=="string"?M.signedMessage:new TextDecoder().decode(M.signedMessage),x=M.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in T)||typeof T.signMessage!="function"||!("publicKey"in T)||typeof T!="object"||!T.publicKey||!("toBase58"in T.publicKey)||typeof T.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");v=[`${R.host} wants you to sign in with your Solana account:`,T.publicKey.toBase58(),...b?["",b,""]:[""],"Version: 1",`URI: ${R.href}`,`Issued At: ${(i=(r=_==null?void 0:_.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((s=_==null?void 0:_.signInWithSolana)===null||s===void 0)&&s.notBefore?[`Not Before: ${_.signInWithSolana.notBefore}`]:[],...!((o=_==null?void 0:_.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${_.signInWithSolana.expirationTime}`]:[],...!((a=_==null?void 0:_.signInWithSolana)===null||a===void 0)&&a.chainId?[`Chain ID: ${_.signInWithSolana.chainId}`]:[],...!((l=_==null?void 0:_.signInWithSolana)===null||l===void 0)&&l.nonce?[`Nonce: ${_.signInWithSolana.nonce}`]:[],...!((c=_==null?void 0:_.signInWithSolana)===null||c===void 0)&&c.requestId?[`Request ID: ${_.signInWithSolana.requestId}`]:[],...!((f=(h=_==null?void 0:_.signInWithSolana)===null||h===void 0?void 0:h.resources)===null||f===void 0)&&f.length?["Resources",..._.signInWithSolana.resources.map(M=>`- ${M}`)]:[]].join(`
`);const L=await T.signMessage(new TextEncoder().encode(v),"utf8");if(!L||!(L instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");x=L}}try{const{data:k,error:C}=await pt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:v,signature:uu(x)},!((p=e.options)===null||p===void 0)&&p.captchaToken?{gotrue_meta_security:{captcha_token:(g=e.options)===null||g===void 0?void 0:g.captchaToken}}:null),xform:Us});if(C)throw C;if(!k||!k.session||!k.user){const b=new Yu;return this._returnResult({data:{user:null,session:null},error:b})}return k.session&&(await this._saveSession(k.session),await this._notifyAllSubscribers("SIGNED_IN",k.session)),this._returnResult({data:Object.assign({},k),error:C})}catch(k){if(ot(k))return this._returnResult({data:{user:null,session:null},error:k});throw k}}async _exchangeCodeForSession(e){const n=await Kl(this.storage,`${this.storageKey}-code-verifier`),[r,i]=(n??"").split("/");try{const{data:s,error:o}=await pt(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:Us});if(await za(this.storage,`${this.storageKey}-code-verifier`),o)throw o;if(!s||!s.session||!s.user){const a=new Yu;return this._returnResult({data:{user:null,session:null,redirectType:null},error:a})}return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),this._returnResult({data:Object.assign(Object.assign({},s),{redirectType:i??null}),error:o})}catch(s){if(ot(s))return this._returnResult({data:{user:null,session:null,redirectType:null},error:s});throw s}}async signInWithIdToken(e){try{const{options:n,provider:r,token:i,access_token:s,nonce:o}=e,a=await pt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:i,access_token:s,nonce:o,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:Us}),{data:l,error:c}=a;if(c)return this._returnResult({data:{user:null,session:null},error:c});if(!l||!l.session||!l.user){const h=new Yu;return this._returnResult({data:{user:null,session:null},error:h})}return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),this._returnResult({data:l,error:c})}catch(n){if(ot(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOtp(e){var n,r,i,s,o;try{if("email"in e){const{email:a,options:l}=e;let c=null,h=null;this.flowType==="pkce"&&([c,h]=await Ku(this.storage,this.storageKey));const{error:f}=await pt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(n=l==null?void 0:l.data)!==null&&n!==void 0?n:{},create_user:(r=l==null?void 0:l.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:c,code_challenge_method:h},redirectTo:l==null?void 0:l.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:f})}if("phone"in e){const{phone:a,options:l}=e,{data:c,error:h}=await pt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(i=l==null?void 0:l.data)!==null&&i!==void 0?i:{},create_user:(s=l==null?void 0:l.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(o=l==null?void 0:l.channel)!==null&&o!==void 0?o:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:h})}throw new dg("You must provide either an email or phone number.")}catch(a){if(ot(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async verifyOtp(e){var n,r;try{let i,s;"options"in e&&(i=(n=e.options)===null||n===void 0?void 0:n.redirectTo,s=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:o,error:a}=await pt(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:s}}),redirectTo:i,xform:Us});if(a)throw a;if(!o)throw new Error("An error occurred on token verification.");const l=o.session,c=o.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),this._returnResult({data:{user:c,session:l},error:null})}catch(i){if(ot(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithSSO(e){var n,r,i,s,o;try{let a=null,l=null;this.flowType==="pkce"&&([a,l]=await Ku(this.storage,this.storageKey));const c=await pt(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((i=e==null?void 0:e.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:a,code_challenge_method:l}),headers:this.headers,xform:R7});return!((s=c.data)===null||s===void 0)&&s.url&&$r()&&!(!((o=e.options)===null||o===void 0)&&o.skipBrowserRedirect)&&window.location.assign(c.data.url),this._returnResult(c)}catch(a){if(ot(a))return this._returnResult({data:null,error:a});throw a}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;if(r)throw r;if(!n)throw new Ui;const{error:i}=await pt(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return this._returnResult({data:{user:null,session:null},error:i})})}catch(e){if(ot(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:r,type:i,options:s}=e,{error:o}=await pt(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:i,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},redirectTo:s==null?void 0:s.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:o})}else if("phone"in e){const{phone:r,type:i,options:s}=e,{data:o,error:a}=await pt(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:i,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:a})}throw new dg("You must provide either an email or phone number and a type")}catch(n){if(ot(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await Kl(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<By:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.userStorage){const o=await Kl(this.userStorage,this.storageKey+"-user");o!=null&&o.user?e.user=o.user:e.user=Uy()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const o={value:this.suppressGetSessionWarning};e.user=S7(e.user,o),o.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:i,error:s}=await this._callRefreshToken(e.refresh_token);return s?this._returnResult({data:{session:null},error:s}):this._returnResult({data:{session:i},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await pt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Za}):await this._useSession(async n=>{var r,i,s;const{data:o,error:a}=n;if(a)throw a;return!(!((r=o.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Ui}:await pt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(s=(i=o.session)===null||i===void 0?void 0:i.access_token)!==null&&s!==void 0?s:void 0,xform:Za})})}catch(n){if(ot(n))return t7(n)&&(await this._removeSession(),await za(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:n});throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async r=>{const{data:i,error:s}=r;if(s)throw s;if(!i.session)throw new Ui;const o=i.session;let a=null,l=null;this.flowType==="pkce"&&e.email!=null&&([a,l]=await Ku(this.storage,this.storageKey));const{data:c,error:h}=await pt(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:a,code_challenge_method:l}),jwt:o.access_token,xform:Za});if(h)throw h;return o.user=c.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),this._returnResult({data:{user:o.user},error:null})})}catch(r){if(ot(r))return this._returnResult({data:{user:null},error:r});throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Ui;const n=Date.now()/1e3;let r=n,i=!0,s=null;const{payload:o}=zy(e.access_token);if(o.exp&&(r=o.exp,i=r<=n),i){const{data:a,error:l}=await this._callRefreshToken(e.refresh_token);if(l)return this._returnResult({data:{user:null,session:null},error:l});if(!a)return{data:{user:null,session:null},error:null};s=a}else{const{data:a,error:l}=await this._getUser(e.access_token);if(l)throw l;s={access_token:e.access_token,refresh_token:e.refresh_token,user:a.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)}return this._returnResult({data:{user:s.user,session:s},error:null})}catch(n){if(ot(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var r;if(!e){const{data:o,error:a}=n;if(a)throw a;e=(r=o.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new Ui;const{data:i,error:s}=await this._callRefreshToken(e.refresh_token);return s?this._returnResult({data:{user:null,session:null},error:s}):i?this._returnResult({data:{user:i.user,session:i},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(n){if(ot(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async _getSessionFromURL(e,n){try{if(!$r())throw new hg("No browser detected.");if(e.error||e.error_description||e.error_code)throw new hg(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new Vk("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new hg("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Vk("No code detected.");const{data:b,error:_}=await this._exchangeCodeForSession(e.code);if(_)throw _;const T=new URL(window.location.href);return T.searchParams.delete("code"),window.history.replaceState(window.history.state,"",T.toString()),{data:{session:b.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:i,access_token:s,refresh_token:o,expires_in:a,expires_at:l,token_type:c}=e;if(!s||!a||!o||!c)throw new hg("No session defined in URL");const h=Math.round(Date.now()/1e3),f=parseInt(a);let p=h+f;l&&(p=parseInt(l));const g=p-h;g*1e3<=tc&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${g}s, should have been closer to ${f}s`);const v=p-f;h-v>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",v,p,h):h-v<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",v,p,h);const{data:x,error:k}=await this._getUser(s);if(k)throw k;const C={provider_token:r,provider_refresh_token:i,access_token:s,expires_in:f,expires_at:p,refresh_token:o,token_type:c,user:x.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:C,redirectType:e.type},error:null})}catch(r){if(ot(r))return this._returnResult({data:{session:null,redirectType:null},error:r});throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await Kl(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:i,error:s}=n;if(s)return this._returnResult({error:s});const o=(r=i.session)===null||r===void 0?void 0:r.access_token;if(o){const{error:a}=await this.admin.signOut(o,e);if(a&&!(e7(a)&&(a.status===404||a.status===401||a.status===403)))return this._returnResult({error:a})}return e!=="others"&&(await this._removeSession(),await za(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const n=u7(),r={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async n=>{var r,i;try{const{data:{session:s},error:o}=n;if(o)throw o;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",s)),this._debug("INITIAL_SESSION","callback id",e,"session",s)}catch(s){await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",s),console.error(s)}})}async resetPasswordForEmail(e,n={}){let r=null,i=null;this.flowType==="pkce"&&([r,i]=await Ku(this.storage,this.storageKey,!0));try{return await pt(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:i,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(s){if(ot(s))return this._returnResult({data:null,error:s});throw s}}async getUserIdentities(){var e;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return this._returnResult({data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(n){if(ot(n))return this._returnResult({data:null,error:n});throw n}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var n;try{const{data:r,error:i}=await this._useSession(async s=>{var o,a,l,c,h;const{data:f,error:p}=s;if(p)throw p;const g=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(a=e.options)===null||a===void 0?void 0:a.scopes,queryParams:(l=e.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await pt(this.fetch,"GET",g,{headers:this.headers,jwt:(h=(c=f.session)===null||c===void 0?void 0:c.access_token)!==null&&h!==void 0?h:void 0})});if(i)throw i;return $r()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),this._returnResult({data:{provider:e.provider,url:r==null?void 0:r.url},error:null})}catch(r){if(ot(r))return this._returnResult({data:{provider:e.provider,url:null},error:r});throw r}}async linkIdentityIdToken(e){return await this._useSession(async n=>{var r;try{const{error:i,data:{session:s}}=n;if(i)throw i;const{options:o,provider:a,token:l,access_token:c,nonce:h}=e,f=await pt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(r=s==null?void 0:s.access_token)!==null&&r!==void 0?r:void 0,body:{provider:a,id_token:l,access_token:c,nonce:h,link_identity:!0,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:Us}),{data:p,error:g}=f;return g?this._returnResult({data:{user:null,session:null},error:g}):!p||!p.session||!p.user?this._returnResult({data:{user:null,session:null},error:new Yu}):(p.session&&(await this._saveSession(p.session),await this._notifyAllSubscribers("USER_UPDATED",p.session)),this._returnResult({data:p,error:g}))}catch(i){if(ot(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}})}async unlinkIdentity(e){try{return await this._useSession(async n=>{var r,i;const{data:s,error:o}=n;if(o)throw o;return await pt(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(i=(r=s.session)===null||r===void 0?void 0:r.access_token)!==null&&i!==void 0?i:void 0})})}catch(n){if(ot(n))return this._returnResult({data:null,error:n});throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await f7(async i=>(i>0&&await h7(200*Math.pow(2,i-1)),this._debug(n,"refreshing attempt",i),await pt(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Us})),(i,s)=>{const o=200*Math.pow(2,i);return s&&$y(s)&&Date.now()+o-r<tc})}catch(r){if(this._debug(n,"error",r),ot(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",r),$r()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const i=await Kl(this.storage,this.storageKey);if(i&&this.userStorage){let o=await Kl(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:i.user},await nc(this.userStorage,this.storageKey+"-user",o)),i.user=(e=o==null?void 0:o.user)!==null&&e!==void 0?e:Uy()}else if(i&&!i.user&&!i.user){const o=await Kl(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(i.user=o.user,await za(this.storage,this.storageKey+"-user"),await nc(this.storage,this.storageKey,i)):i.user=Uy()}if(this._debug(r,"session from storage",i),!this._isValidSession(i)){this._debug(r,"session is not valid"),i!==null&&await this._removeSession();return}const s=((n=i.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<By;if(this._debug(r,`session has${s?"":" not"} expired with margin of ${By}s`),s){if(this.autoRefreshToken&&i.refresh_token){const{error:o}=await this._callRefreshToken(i.refresh_token);o&&(console.error(o),$y(o)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(i.user&&i.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:a}=await this._getUser(i.access_token);!a&&(o!=null&&o.user)?(i.user=o.user,await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(r,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(r,"error",i),console.error(i);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var n,r;if(!e)throw new Ui;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new B0;const{data:s,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!s.session)throw new Ui;await this._saveSession(s.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",s.session);const a={data:s.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(s){if(this._debug(i,"error",s),ot(s)){const o={data:null,error:s};return $y(s)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(o),o}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(s),s}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(e,n,r=!0){const i=`#_notifyAllSubscribers(${e})`;this._debug(i,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:n});const s=[],o=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(e,n)}catch(l){s.push(l)}});if(await Promise.all(o),s.length>0){for(let a=0;a<s.length;a+=1)console.error(s[a]);throw s[0]}}finally{this._debug(i,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const n=Object.assign({},e),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await nc(this.userStorage,this.storageKey+"-user",{user:n.user});const i=Object.assign({},n);delete i.user;const s=Yk(i);await nc(this.storage,this.storageKey,s)}else{const i=Yk(n);await nc(this.storage,this.storageKey,i)}}async _removeSession(){this._debug("#_removeSession()"),await za(this.storage,this.storageKey),await za(this.storage,this.storageKey+"-code-verifier"),await za(this.storage,this.storageKey+"-user"),this.userStorage&&await za(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&$r()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),tc);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((r.expires_at*1e3-e)/tc);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${tc}ms, refresh threshold is ${Zw} ticks`),i<=Zw&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof q5)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!$r()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,r){const i=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&i.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&i.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[s,o]=await Ku(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(s)}`,code_challenge_method:`${encodeURIComponent(o)}`});i.push(a.toString())}if(r!=null&&r.queryParams){const s=new URLSearchParams(r.queryParams);i.push(s.toString())}return r!=null&&r.skipBrowserRedirect&&i.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${i.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var r;const{data:i,error:s}=n;return s?this._returnResult({data:null,error:s}):await pt(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(ot(n))return this._returnResult({data:null,error:n});throw n}}async _enroll(e){try{return await this._useSession(async n=>{var r,i;const{data:s,error:o}=n;if(o)return this._returnResult({data:null,error:o});const a=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:l,error:c}=await pt(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return c?this._returnResult({data:null,error:c}):(e.factorType==="totp"&&l.type==="totp"&&(!((i=l==null?void 0:l.totp)===null||i===void 0)&&i.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),this._returnResult({data:l,error:null}))})}catch(n){if(ot(n))return this._returnResult({data:null,error:n});throw n}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:s}=n;if(s)return this._returnResult({data:null,error:s});const o=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?V7(e.webauthn.credential_response):W7(e.webauthn.credential_response)})}:{code:e.code}),{data:a,error:l}=await pt(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:o,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return l?this._returnResult({data:null,error:l}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),this._returnResult({data:a,error:l}))})}catch(n){if(ot(n))return this._returnResult({data:null,error:n});throw n}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:s}=n;if(s)return this._returnResult({data:null,error:s});const o=await pt(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});if(o.error)return o;const{data:a}=o;if(a.type!=="webauthn")return{data:a,error:null};switch(a.webauthn.type){case"create":return{data:Object.assign(Object.assign({},a),{webauthn:Object.assign(Object.assign({},a.webauthn),{credential_options:Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:z7(a.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},a),{webauthn:Object.assign(Object.assign({},a.webauthn),{credential_options:Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:U7(a.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if(ot(n))return this._returnResult({data:null,error:n});throw n}})}async _challengeAndVerify(e){const{data:n,error:r}=await this._challenge({factorId:e.factorId});return r?this._returnResult({data:null,error:r}):await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){var e;const{data:{user:n},error:r}=await this.getUser();if(r)return{data:null,error:r};const i={all:[],phone:[],totp:[],webauthn:[]};for(const s of(e=n==null?void 0:n.factors)!==null&&e!==void 0?e:[])i.all.push(s),s.status==="verified"&&i[s.factor_type].push(s);return{data:i,error:null}}async _getAuthenticatorAssuranceLevel(){var e,n;const{data:{session:r},error:i}=await this.getSession();if(i)return this._returnResult({data:null,error:i});if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:s}=zy(r.access_token);let o=null;s.aal&&(o=s.aal);let a=o;((n=(e=r.user.factors)===null||e===void 0?void 0:e.filter(h=>h.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(a="aal2");const c=s.amr||[];return{data:{currentLevel:o,nextLevel:a,currentAuthenticationMethods:c},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async n=>{const{data:{session:r},error:i}=n;return i?this._returnResult({data:null,error:i}):r?await pt(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:r.access_token,xform:s=>({data:s,error:null})}):this._returnResult({data:null,error:new Ui})})}catch(n){if(ot(n))return this._returnResult({data:null,error:n});throw n}}async _approveAuthorization(e,n){try{return await this._useSession(async r=>{const{data:{session:i},error:s}=r;if(s)return this._returnResult({data:null,error:s});if(!i)return this._returnResult({data:null,error:new Ui});const o=await pt(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"approve"},xform:a=>({data:a,error:null})});return o.data&&o.data.redirect_url&&$r()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(o.data.redirect_url),o})}catch(r){if(ot(r))return this._returnResult({data:null,error:r});throw r}}async _denyAuthorization(e,n){try{return await this._useSession(async r=>{const{data:{session:i},error:s}=r;if(s)return this._returnResult({data:null,error:s});if(!i)return this._returnResult({data:null,error:new Ui});const o=await pt(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"deny"},xform:a=>({data:a,error:null})});return o.data&&o.data.redirect_url&&$r()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(o.data.redirect_url),o})}catch(r){if(ot(r))return this._returnResult({data:null,error:r});throw r}}async _listOAuthGrants(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;return r?this._returnResult({data:null,error:r}):n?await pt(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,xform:i=>({data:i,error:null})}):this._returnResult({data:null,error:new Ui})})}catch(e){if(ot(e))return this._returnResult({data:null,error:e});throw e}}async _revokeOAuthGrant(e){try{return await this._useSession(async n=>{const{data:{session:r},error:i}=n;return i?this._returnResult({data:null,error:i}):r?await pt(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,query:{client_id:e.clientId},xform:()=>({data:{},error:null})}):this._returnResult({data:null,error:new Ui})})}catch(n){if(ot(n))return this._returnResult({data:null,error:n});throw n}}async fetchJwk(e,n={keys:[]}){let r=n.keys.find(a=>a.kid===e);if(r)return r;const i=Date.now();if(r=this.jwks.keys.find(a=>a.kid===e),r&&this.jwks_cached_at+Q9>i)return r;const{data:s,error:o}=await pt(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!s.keys||s.keys.length===0||(this.jwks=s,this.jwks_cached_at=i,r=s.keys.find(a=>a.kid===e),!r)?null:r}async getClaims(e,n={}){try{let r=e;if(!r){const{data:g,error:v}=await this.getSession();if(v||!g.session)return this._returnResult({data:null,error:v});r=g.session.access_token}const{header:i,payload:s,signature:o,raw:{header:a,payload:l}}=zy(r);n!=null&&n.allowExpired||x7(s.exp);const c=!i.alg||i.alg.startsWith("HS")||!i.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(i.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!c){const{error:g}=await this.getUser(r);if(g)throw g;return{data:{claims:s,header:i,signature:o},error:null}}const h=_7(i.alg),f=await crypto.subtle.importKey("jwk",c,h,!0,["verify"]);if(!await crypto.subtle.verify(h,f,o,a7(`${a}.${l}`)))throw new ex("Invalid JWT signature");return{data:{claims:s,header:i,signature:o},error:null}}catch(r){if(ot(r))return this._returnResult({data:null,error:r});throw r}}}Rf.nextInstanceID={};const J7=Rf;class eF extends J7{constructor(e){super(e)}}class tF{constructor(e,n,r){var i,s,o;this.supabaseUrl=e,this.supabaseKey=n;const a=q9(e);if(!n)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",a),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",a),this.storageUrl=new URL("storage/v1",a),this.functionsUrl=new URL("functions/v1",a);const l=`sb-${a.hostname.split(".")[0]}-auth-token`,c={db:B9,realtime:z9,auth:Object.assign(Object.assign({},$9),{storageKey:l}),global:F9},h=G9(r??{},c);this.storageKey=(i=h.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(s=h.global.headers)!==null&&s!==void 0?s:{},h.accessToken?(this.accessToken=h.accessToken,this.auth=new Proxy({},{get:(f,p)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(p)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=h.auth)!==null&&o!==void 0?o:{},this.headers,h.global.fetch),this.fetch=W9(n,this._getAccessToken.bind(this),h.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},h.realtime)),this.accessToken&&this.accessToken().then(f=>this.realtime.setAuth(f)).catch(f=>console.warn("Failed to set initial Realtime auth token:",f)),this.rest=new qD(new URL("rest/v1",a).href,{headers:this.headers,schema:h.db.schema,fetch:this.fetch}),this.storage=new I9(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),h.accessToken||this._listenForAuthEvents()}get functions(){return new WD(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,n={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,n,r)}channel(e,n={config:{}}){return this.realtime.channel(e,n)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e,n;if(this.accessToken)return await this.accessToken();const{data:r}=await this.auth.getSession();return(n=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&n!==void 0?n:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:i,userStorage:s,storageKey:o,flowType:a,lock:l,debug:c,throwOnError:h},f,p){const g={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new eF({url:this.authUrl.href,headers:Object.assign(Object.assign({},g),f),storageKey:o,autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:i,userStorage:s,flowType:a,lock:l,debug:c,throwOnError:h,fetch:p,hasCustomAuthorizationHeader:Object.keys(this.headers).some(v=>v.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new c9(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(e,n,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const nF=(t,e,n)=>new tF(t,e,n);function rF(){if(typeof window<"u"||typeof process>"u")return!1;const t=process.version;if(t==null)return!1;const e=t.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}rF()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const iF="https://ozrrupaayacbhwrknhro.supabase.co",sF="sb_publishable_78oAhP2ng_TRJB8xMwe9-Q_iSA-b5FJ",Ct=nF(iF,sF),X5=y.createContext(void 0);function oF({children:t}){const[e,n]=y.useState(null),[r,i]=y.useState(null),[s,o]=y.useState(!0);y.useEffect(()=>{(async()=>{var v;const{data:g}=await Ct.auth.getSession();i(g.session),n(((v=g.session)==null?void 0:v.user)??null),o(!1)})();const{data:p}=Ct.auth.onAuthStateChange((g,v)=>{i(v),n((v==null?void 0:v.user)??null),o(!1)});return()=>{p.subscription.unsubscribe()}},[]);const a=y.useCallback(async(f,p)=>{const{error:g}=await Ct.auth.signInWithPassword({email:f,password:p});if(g)throw g},[]),l=y.useCallback(async(f,p)=>{const{error:g}=await Ct.auth.signUp({email:f,password:p});if(g)throw g},[]),c=y.useCallback(async()=>{const{error:f}=await Ct.auth.signOut();if(f)throw f},[]),h=y.useMemo(()=>({user:e,session:r,loading:s,signIn:a,signUp:l,signOut:c}),[s,r,a,l,c,e]);return w.jsx(X5.Provider,{value:h,children:t})}function Ii(){const t=y.useContext(X5);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t}function aF({items:t,selectedId:e,onSelect:n,className:r,itemClassName:i,showGradients:s=!0}){const o=y.useRef(null),[a,l]=y.useState(0),[c,h]=y.useState(1);return y.useEffect(()=>{const f=o.current;if(!f)return;const p=()=>{const{scrollTop:g,scrollHeight:v,clientHeight:x}=f;l(Math.min(g/40,1));const k=v-(g+x);h(v<=x?0:Math.min(k/40,1))};return p(),f.addEventListener("scroll",p),()=>f.removeEventListener("scroll",p)},[t.length]),w.jsxs("div",{className:`scrollable-list ${r??""}`,children:[w.jsx("div",{ref:o,className:"scrollable-list__items",children:t.map(f=>{const p=f.id===e;return w.jsxs("button",{type:"button",className:`scrollable-list__item ${p?"scrollable-list__item--selected":""} ${i??""}`,onClick:()=>n==null?void 0:n(f.id),"aria-pressed":p,children:[w.jsx("div",{className:"scrollable-list__item-label",children:f.label}),f.description?w.jsx("p",{className:"scrollable-list__item-description",children:f.description}):null]},f.id)})}),s&&w.jsxs(w.Fragment,{children:[w.jsx("div",{className:"scrollable-list__gradient scrollable-list__gradient--top",style:{opacity:a}}),w.jsx("div",{className:"scrollable-list__gradient scrollable-list__gradient--bottom",style:{opacity:c}})]})]})}class lF{constructor(e,n,r,i,s,o,a){_t(this,"width");_t(this,"height");_t(this,"ctx");_t(this,"x");_t(this,"y");_t(this,"color");_t(this,"speed");_t(this,"size");_t(this,"sizeStep");_t(this,"minSize");_t(this,"maxSizeInteger");_t(this,"maxSize");_t(this,"delay");_t(this,"counter");_t(this,"counterStep");_t(this,"isIdle");_t(this,"isReverse");_t(this,"isShimmer");this.width=e.width,this.height=e.height,this.ctx=n,this.x=r,this.y=i,this.color=s,this.speed=this.getRandomValue(.1,.9)*o,this.size=0,this.sizeStep=Math.random()*.4,this.minSize=.5,this.maxSizeInteger=2,this.maxSize=this.getRandomValue(this.minSize,this.maxSizeInteger),this.delay=a,this.counter=0,this.counterStep=Math.random()*4+(this.width+this.height)*.01,this.isIdle=!1,this.isReverse=!1,this.isShimmer=!1}getRandomValue(e,n){return Math.random()*(n-e)+e}draw(){const e=this.maxSizeInteger*.5-this.size*.5;this.ctx.fillStyle=this.color,this.ctx.fillRect(this.x+e,this.y+e,this.size,this.size)}appear(){if(this.isIdle=!1,this.counter<=this.delay){this.counter+=this.counterStep;return}this.size>=this.maxSize&&(this.isShimmer=!0),this.isShimmer?this.shimmer():this.size+=this.sizeStep,this.draw()}disappear(){if(this.isShimmer=!1,this.counter=0,this.size<=0){this.isIdle=!0;return}else this.size-=.1;this.draw()}shimmer(){this.size>=this.maxSize?this.isReverse=!0:this.size<=this.minSize&&(this.isReverse=!1),this.isReverse?this.size-=this.speed:this.size+=this.speed}}function uF(t,e){return t<=0||e?0:t>=100?100*.001:t*.001}const tE={default:{activeColor:null,gap:5,speed:35,colors:"#f8fafc,#f1f5f9,#cbd5e1",noFocus:!1},blue:{activeColor:"#e0f2fe",gap:10,speed:25,colors:"#e0f2fe,#7dd3fc,#0ea5e9",noFocus:!1},yellow:{activeColor:"#fef08a",gap:3,speed:20,colors:"#fef08a,#fde047,#eab308",noFocus:!1},pink:{activeColor:"#fecdd3",gap:6,speed:80,colors:"#fecdd3,#fda4af,#e11d48",noFocus:!0},gold:{activeColor:"#fef3c7",gap:5,speed:30,colors:"#fef3c7,#fbbf24,#d97706",noFocus:!1}};function cF({variant:t="default",gap:e,speed:n,colors:r,noFocus:i,className:s="",children:o,aspectRatio:a}){const l=y.useRef(null),c=y.useRef(null),h=y.useRef([]),f=y.useRef(null),p=y.useRef(performance.now()),g=y.useRef(window.matchMedia("(prefers-reduced-motion: reduce)").matches).current,v=tE[t]||tE.default,x=e??v.gap,k=n??v.speed,C=r??v.colors,b=i??v.noFocus,_=()=>{if(!l.current||!c.current)return;const j=l.current.getBoundingClientRect(),V=Math.floor(j.width),U=Math.floor(j.height),B=c.current.getContext("2d");c.current.width=V,c.current.height=U,c.current.style.width=`${V}px`,c.current.style.height=`${U}px`;const Z=C.split(","),q=[];for(let G=0;G<V;G+=parseInt(x.toString(),10))for(let te=0;te<U;te+=parseInt(x.toString(),10)){const O=Z[Math.floor(Math.random()*Z.length)],K=G-V/2,Y=te-U/2,xe=Math.sqrt(K*K+Y*Y),re=g?0:xe;if(!B)return;q.push(new lF(c.current,B,G,te,O,uF(k,g),re))}h.current=q},T=j=>{var G;f.current=requestAnimationFrame(()=>T(j));const V=performance.now(),U=V-p.current,B=1e3/60;if(U<B)return;p.current=V-U%B;const Z=(G=c.current)==null?void 0:G.getContext("2d");if(!Z||!c.current)return;Z.clearRect(0,0,c.current.width,c.current.height);let q=!0;for(let te=0;te<h.current.length;te++){const O=h.current[te];O[j](),O.isIdle||(q=!1)}q&&f.current!==null&&cancelAnimationFrame(f.current)},R=j=>{f.current!==null&&cancelAnimationFrame(f.current),f.current=requestAnimationFrame(()=>T(j))},L=()=>R("appear"),M=()=>R("disappear"),A=j=>{j.currentTarget.contains(j.relatedTarget)||R("appear")},$=j=>{j.currentTarget.contains(j.relatedTarget)||R("disappear")};return y.useEffect(()=>{_();const j=new ResizeObserver(()=>{_()});return l.current&&j.observe(l.current),()=>{j.disconnect(),f.current!==null&&cancelAnimationFrame(f.current)}},[x,k,C,b]),w.jsxs("div",{ref:l,className:`pixel-card ${s}`,style:a?{aspectRatio:`${a}`}:void 0,onMouseEnter:L,onMouseLeave:M,onFocus:b?void 0:A,onBlur:b?void 0:$,tabIndex:b?-1:0,children:[w.jsx("canvas",{className:"pixel-canvas",ref:c}),o]})}function Z5(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=Z5(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function dF(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=Z5(t))&&(r&&(r+=" "),r+=e);return r}const hF=(t,e)=>{const n=new Array(t.length+e.length);for(let r=0;r<t.length;r++)n[r]=t[r];for(let r=0;r<e.length;r++)n[t.length+r]=e[r];return n},fF=(t,e)=>({classGroupId:t,validator:e}),Q5=(t=new Map,e=null,n)=>({nextPart:t,validators:e,classGroupId:n}),Gm="-",nE=[],pF="arbitrary..",gF=t=>{const e=vF(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:o=>{if(o.startsWith("[")&&o.endsWith("]"))return mF(o);const a=o.split(Gm),l=a[0]===""&&a.length>1?1:0;return J5(a,l,e)},getConflictingClassGroupIds:(o,a)=>{if(a){const l=r[o],c=n[o];return l?c?hF(c,l):l:c||nE}return n[o]||nE}}},J5=(t,e,n)=>{if(t.length-e===0)return n.classGroupId;const i=t[e],s=n.nextPart.get(i);if(s){const c=J5(t,e+1,s);if(c)return c}const o=n.validators;if(o===null)return;const a=e===0?t.join(Gm):t.slice(e).join(Gm),l=o.length;for(let c=0;c<l;c++){const h=o[c];if(h.validator(a))return h.classGroupId}},mF=t=>t.slice(1,-1).indexOf(":")===-1?void 0:(()=>{const e=t.slice(1,-1),n=e.indexOf(":"),r=e.slice(0,n);return r?pF+r:void 0})(),vF=t=>{const{theme:e,classGroups:n}=t;return yF(n,e)},yF=(t,e)=>{const n=Q5();for(const r in t){const i=t[r];bb(i,n,r,e)}return n},bb=(t,e,n,r)=>{const i=t.length;for(let s=0;s<i;s++){const o=t[s];wF(o,e,n,r)}},wF=(t,e,n,r)=>{if(typeof t=="string"){xF(t,e,n);return}if(typeof t=="function"){_F(t,e,n,r);return}bF(t,e,n,r)},xF=(t,e,n)=>{const r=t===""?e:eL(e,t);r.classGroupId=n},_F=(t,e,n,r)=>{if(SF(t)){bb(t(r),e,n,r);return}e.validators===null&&(e.validators=[]),e.validators.push(fF(n,t))},bF=(t,e,n,r)=>{const i=Object.entries(t),s=i.length;for(let o=0;o<s;o++){const[a,l]=i[o];bb(l,eL(e,a),n,r)}},eL=(t,e)=>{let n=t;const r=e.split(Gm),i=r.length;for(let s=0;s<i;s++){const o=r[s];let a=n.nextPart.get(o);a||(a=Q5(),n.nextPart.set(o,a)),n=a}return n},SF=t=>"isThemeGetter"in t&&t.isThemeGetter===!0,CF=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=Object.create(null),r=Object.create(null);const i=(s,o)=>{n[s]=o,e++,e>t&&(e=0,r=n,n=Object.create(null))};return{get(s){let o=n[s];if(o!==void 0)return o;if((o=r[s])!==void 0)return i(s,o),o},set(s,o){s in n?n[s]=o:i(s,o)}}},tx="!",rE=":",kF=[],iE=(t,e,n,r,i)=>({modifiers:t,hasImportantModifier:e,baseClassName:n,maybePostfixModifierPosition:r,isExternal:i}),EF=t=>{const{prefix:e,experimentalParseClassName:n}=t;let r=i=>{const s=[];let o=0,a=0,l=0,c;const h=i.length;for(let x=0;x<h;x++){const k=i[x];if(o===0&&a===0){if(k===rE){s.push(i.slice(l,x)),l=x+1;continue}if(k==="/"){c=x;continue}}k==="["?o++:k==="]"?o--:k==="("?a++:k===")"&&a--}const f=s.length===0?i:i.slice(l);let p=f,g=!1;f.endsWith(tx)?(p=f.slice(0,-1),g=!0):f.startsWith(tx)&&(p=f.slice(1),g=!0);const v=c&&c>l?c-l:void 0;return iE(s,g,p,v)};if(e){const i=e+rE,s=r;r=o=>o.startsWith(i)?s(o.slice(i.length)):iE(kF,!1,o,void 0,!0)}if(n){const i=r;r=s=>n({className:s,parseClassName:i})}return r},RF=t=>{const e=new Map;return t.orderSensitiveModifiers.forEach((n,r)=>{e.set(n,1e6+r)}),n=>{const r=[];let i=[];for(let s=0;s<n.length;s++){const o=n[s],a=o[0]==="[",l=e.has(o);a||l?(i.length>0&&(i.sort(),r.push(...i),i=[]),r.push(o)):i.push(o)}return i.length>0&&(i.sort(),r.push(...i)),r}},TF=t=>({cache:CF(t.cacheSize),parseClassName:EF(t),sortModifiers:RF(t),...gF(t)}),PF=/\s+/,LF=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:i,sortModifiers:s}=e,o=[],a=t.trim().split(PF);let l="";for(let c=a.length-1;c>=0;c-=1){const h=a[c],{isExternal:f,modifiers:p,hasImportantModifier:g,baseClassName:v,maybePostfixModifierPosition:x}=n(h);if(f){l=h+(l.length>0?" "+l:l);continue}let k=!!x,C=r(k?v.substring(0,x):v);if(!C){if(!k){l=h+(l.length>0?" "+l:l);continue}if(C=r(v),!C){l=h+(l.length>0?" "+l:l);continue}k=!1}const b=p.length===0?"":p.length===1?p[0]:s(p).join(":"),_=g?b+tx:b,T=_+C;if(o.indexOf(T)>-1)continue;o.push(T);const R=i(C,k);for(let L=0;L<R.length;++L){const M=R[L];o.push(_+M)}l=h+(l.length>0?" "+l:l)}return l},MF=(...t)=>{let e=0,n,r,i="";for(;e<t.length;)(n=t[e++])&&(r=tL(n))&&(i&&(i+=" "),i+=r);return i},tL=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=tL(t[r]))&&(n&&(n+=" "),n+=e);return n},AF=(t,...e)=>{let n,r,i,s;const o=l=>{const c=e.reduce((h,f)=>f(h),t());return n=TF(c),r=n.cache.get,i=n.cache.set,s=a,a(l)},a=l=>{const c=r(l);if(c)return c;const h=LF(l,n);return i(l,h),h};return s=o,(...l)=>s(MF(...l))},NF=[],yr=t=>{const e=n=>n[t]||NF;return e.isThemeGetter=!0,e},nL=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,rL=/^\((?:(\w[\w-]*):)?(.+)\)$/i,jF=/^\d+\/\d+$/,IF=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,OF=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,DF=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,FF=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,BF=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Ju=t=>jF.test(t),jt=t=>!!t&&!Number.isNaN(Number(t)),Ua=t=>!!t&&Number.isInteger(Number(t)),Wy=t=>t.endsWith("%")&&jt(t.slice(0,-1)),Yo=t=>IF.test(t),$F=()=>!0,zF=t=>OF.test(t)&&!DF.test(t),iL=()=>!1,UF=t=>FF.test(t),VF=t=>BF.test(t),WF=t=>!Je(t)&&!et(t),HF=t=>_d(t,aL,iL),Je=t=>nL.test(t),Xl=t=>_d(t,lL,zF),Hy=t=>_d(t,XF,jt),sE=t=>_d(t,sL,iL),GF=t=>_d(t,oL,VF),fg=t=>_d(t,uL,UF),et=t=>rL.test(t),ah=t=>bd(t,lL),qF=t=>bd(t,ZF),oE=t=>bd(t,sL),YF=t=>bd(t,aL),KF=t=>bd(t,oL),pg=t=>bd(t,uL,!0),_d=(t,e,n)=>{const r=nL.exec(t);return r?r[1]?e(r[1]):n(r[2]):!1},bd=(t,e,n=!1)=>{const r=rL.exec(t);return r?r[1]?e(r[1]):n:!1},sL=t=>t==="position"||t==="percentage",oL=t=>t==="image"||t==="url",aL=t=>t==="length"||t==="size"||t==="bg-size",lL=t=>t==="length",XF=t=>t==="number",ZF=t=>t==="family-name",uL=t=>t==="shadow",QF=()=>{const t=yr("color"),e=yr("font"),n=yr("text"),r=yr("font-weight"),i=yr("tracking"),s=yr("leading"),o=yr("breakpoint"),a=yr("container"),l=yr("spacing"),c=yr("radius"),h=yr("shadow"),f=yr("inset-shadow"),p=yr("text-shadow"),g=yr("drop-shadow"),v=yr("blur"),x=yr("perspective"),k=yr("aspect"),C=yr("ease"),b=yr("animate"),_=()=>["auto","avoid","all","avoid-page","page","left","right","column"],T=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],R=()=>[...T(),et,Je],L=()=>["auto","hidden","clip","visible","scroll"],M=()=>["auto","contain","none"],A=()=>[et,Je,l],$=()=>[Ju,"full","auto",...A()],j=()=>[Ua,"none","subgrid",et,Je],V=()=>["auto",{span:["full",Ua,et,Je]},Ua,et,Je],U=()=>[Ua,"auto",et,Je],B=()=>["auto","min","max","fr",et,Je],Z=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],q=()=>["start","end","center","stretch","center-safe","end-safe"],G=()=>["auto",...A()],te=()=>[Ju,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...A()],O=()=>[t,et,Je],K=()=>[...T(),oE,sE,{position:[et,Je]}],Y=()=>["no-repeat",{repeat:["","x","y","space","round"]}],xe=()=>["auto","cover","contain",YF,HF,{size:[et,Je]}],re=()=>[Wy,ah,Xl],ue=()=>["","none","full",c,et,Je],ke=()=>["",jt,ah,Xl],qe=()=>["solid","dashed","dotted","double"],he=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],ge=()=>[jt,Wy,oE,sE],we=()=>["","none",v,et,Je],ae=()=>["none",jt,et,Je],me=()=>["none",jt,et,Je],X=()=>[jt,et,Je],ye=()=>[Ju,"full",...A()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[Yo],breakpoint:[Yo],color:[$F],container:[Yo],"drop-shadow":[Yo],ease:["in","out","in-out"],font:[WF],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[Yo],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[Yo],shadow:[Yo],spacing:["px",jt],text:[Yo],"text-shadow":[Yo],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",Ju,Je,et,k]}],container:["container"],columns:[{columns:[jt,Je,et,a]}],"break-after":[{"break-after":_()}],"break-before":[{"break-before":_()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:R()}],overflow:[{overflow:L()}],"overflow-x":[{"overflow-x":L()}],"overflow-y":[{"overflow-y":L()}],overscroll:[{overscroll:M()}],"overscroll-x":[{"overscroll-x":M()}],"overscroll-y":[{"overscroll-y":M()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:$()}],"inset-x":[{"inset-x":$()}],"inset-y":[{"inset-y":$()}],start:[{start:$()}],end:[{end:$()}],top:[{top:$()}],right:[{right:$()}],bottom:[{bottom:$()}],left:[{left:$()}],visibility:["visible","invisible","collapse"],z:[{z:[Ua,"auto",et,Je]}],basis:[{basis:[Ju,"full","auto",a,...A()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[jt,Ju,"auto","initial","none",Je]}],grow:[{grow:["",jt,et,Je]}],shrink:[{shrink:["",jt,et,Je]}],order:[{order:[Ua,"first","last","none",et,Je]}],"grid-cols":[{"grid-cols":j()}],"col-start-end":[{col:V()}],"col-start":[{"col-start":U()}],"col-end":[{"col-end":U()}],"grid-rows":[{"grid-rows":j()}],"row-start-end":[{row:V()}],"row-start":[{"row-start":U()}],"row-end":[{"row-end":U()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":B()}],"auto-rows":[{"auto-rows":B()}],gap:[{gap:A()}],"gap-x":[{"gap-x":A()}],"gap-y":[{"gap-y":A()}],"justify-content":[{justify:[...Z(),"normal"]}],"justify-items":[{"justify-items":[...q(),"normal"]}],"justify-self":[{"justify-self":["auto",...q()]}],"align-content":[{content:["normal",...Z()]}],"align-items":[{items:[...q(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...q(),{baseline:["","last"]}]}],"place-content":[{"place-content":Z()}],"place-items":[{"place-items":[...q(),"baseline"]}],"place-self":[{"place-self":["auto",...q()]}],p:[{p:A()}],px:[{px:A()}],py:[{py:A()}],ps:[{ps:A()}],pe:[{pe:A()}],pt:[{pt:A()}],pr:[{pr:A()}],pb:[{pb:A()}],pl:[{pl:A()}],m:[{m:G()}],mx:[{mx:G()}],my:[{my:G()}],ms:[{ms:G()}],me:[{me:G()}],mt:[{mt:G()}],mr:[{mr:G()}],mb:[{mb:G()}],ml:[{ml:G()}],"space-x":[{"space-x":A()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":A()}],"space-y-reverse":["space-y-reverse"],size:[{size:te()}],w:[{w:[a,"screen",...te()]}],"min-w":[{"min-w":[a,"screen","none",...te()]}],"max-w":[{"max-w":[a,"screen","none","prose",{screen:[o]},...te()]}],h:[{h:["screen","lh",...te()]}],"min-h":[{"min-h":["screen","lh","none",...te()]}],"max-h":[{"max-h":["screen","lh",...te()]}],"font-size":[{text:["base",n,ah,Xl]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[r,et,Hy]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",Wy,Je]}],"font-family":[{font:[qF,Je,e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[i,et,Je]}],"line-clamp":[{"line-clamp":[jt,"none",et,Hy]}],leading:[{leading:[s,...A()]}],"list-image":[{"list-image":["none",et,Je]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",et,Je]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:O()}],"text-color":[{text:O()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...qe(),"wavy"]}],"text-decoration-thickness":[{decoration:[jt,"from-font","auto",et,Xl]}],"text-decoration-color":[{decoration:O()}],"underline-offset":[{"underline-offset":[jt,"auto",et,Je]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:A()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",et,Je]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",et,Je]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:K()}],"bg-repeat":[{bg:Y()}],"bg-size":[{bg:xe()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Ua,et,Je],radial:["",et,Je],conic:[Ua,et,Je]},KF,GF]}],"bg-color":[{bg:O()}],"gradient-from-pos":[{from:re()}],"gradient-via-pos":[{via:re()}],"gradient-to-pos":[{to:re()}],"gradient-from":[{from:O()}],"gradient-via":[{via:O()}],"gradient-to":[{to:O()}],rounded:[{rounded:ue()}],"rounded-s":[{"rounded-s":ue()}],"rounded-e":[{"rounded-e":ue()}],"rounded-t":[{"rounded-t":ue()}],"rounded-r":[{"rounded-r":ue()}],"rounded-b":[{"rounded-b":ue()}],"rounded-l":[{"rounded-l":ue()}],"rounded-ss":[{"rounded-ss":ue()}],"rounded-se":[{"rounded-se":ue()}],"rounded-ee":[{"rounded-ee":ue()}],"rounded-es":[{"rounded-es":ue()}],"rounded-tl":[{"rounded-tl":ue()}],"rounded-tr":[{"rounded-tr":ue()}],"rounded-br":[{"rounded-br":ue()}],"rounded-bl":[{"rounded-bl":ue()}],"border-w":[{border:ke()}],"border-w-x":[{"border-x":ke()}],"border-w-y":[{"border-y":ke()}],"border-w-s":[{"border-s":ke()}],"border-w-e":[{"border-e":ke()}],"border-w-t":[{"border-t":ke()}],"border-w-r":[{"border-r":ke()}],"border-w-b":[{"border-b":ke()}],"border-w-l":[{"border-l":ke()}],"divide-x":[{"divide-x":ke()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":ke()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...qe(),"hidden","none"]}],"divide-style":[{divide:[...qe(),"hidden","none"]}],"border-color":[{border:O()}],"border-color-x":[{"border-x":O()}],"border-color-y":[{"border-y":O()}],"border-color-s":[{"border-s":O()}],"border-color-e":[{"border-e":O()}],"border-color-t":[{"border-t":O()}],"border-color-r":[{"border-r":O()}],"border-color-b":[{"border-b":O()}],"border-color-l":[{"border-l":O()}],"divide-color":[{divide:O()}],"outline-style":[{outline:[...qe(),"none","hidden"]}],"outline-offset":[{"outline-offset":[jt,et,Je]}],"outline-w":[{outline:["",jt,ah,Xl]}],"outline-color":[{outline:O()}],shadow:[{shadow:["","none",h,pg,fg]}],"shadow-color":[{shadow:O()}],"inset-shadow":[{"inset-shadow":["none",f,pg,fg]}],"inset-shadow-color":[{"inset-shadow":O()}],"ring-w":[{ring:ke()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:O()}],"ring-offset-w":[{"ring-offset":[jt,Xl]}],"ring-offset-color":[{"ring-offset":O()}],"inset-ring-w":[{"inset-ring":ke()}],"inset-ring-color":[{"inset-ring":O()}],"text-shadow":[{"text-shadow":["none",p,pg,fg]}],"text-shadow-color":[{"text-shadow":O()}],opacity:[{opacity:[jt,et,Je]}],"mix-blend":[{"mix-blend":[...he(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":he()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[jt]}],"mask-image-linear-from-pos":[{"mask-linear-from":ge()}],"mask-image-linear-to-pos":[{"mask-linear-to":ge()}],"mask-image-linear-from-color":[{"mask-linear-from":O()}],"mask-image-linear-to-color":[{"mask-linear-to":O()}],"mask-image-t-from-pos":[{"mask-t-from":ge()}],"mask-image-t-to-pos":[{"mask-t-to":ge()}],"mask-image-t-from-color":[{"mask-t-from":O()}],"mask-image-t-to-color":[{"mask-t-to":O()}],"mask-image-r-from-pos":[{"mask-r-from":ge()}],"mask-image-r-to-pos":[{"mask-r-to":ge()}],"mask-image-r-from-color":[{"mask-r-from":O()}],"mask-image-r-to-color":[{"mask-r-to":O()}],"mask-image-b-from-pos":[{"mask-b-from":ge()}],"mask-image-b-to-pos":[{"mask-b-to":ge()}],"mask-image-b-from-color":[{"mask-b-from":O()}],"mask-image-b-to-color":[{"mask-b-to":O()}],"mask-image-l-from-pos":[{"mask-l-from":ge()}],"mask-image-l-to-pos":[{"mask-l-to":ge()}],"mask-image-l-from-color":[{"mask-l-from":O()}],"mask-image-l-to-color":[{"mask-l-to":O()}],"mask-image-x-from-pos":[{"mask-x-from":ge()}],"mask-image-x-to-pos":[{"mask-x-to":ge()}],"mask-image-x-from-color":[{"mask-x-from":O()}],"mask-image-x-to-color":[{"mask-x-to":O()}],"mask-image-y-from-pos":[{"mask-y-from":ge()}],"mask-image-y-to-pos":[{"mask-y-to":ge()}],"mask-image-y-from-color":[{"mask-y-from":O()}],"mask-image-y-to-color":[{"mask-y-to":O()}],"mask-image-radial":[{"mask-radial":[et,Je]}],"mask-image-radial-from-pos":[{"mask-radial-from":ge()}],"mask-image-radial-to-pos":[{"mask-radial-to":ge()}],"mask-image-radial-from-color":[{"mask-radial-from":O()}],"mask-image-radial-to-color":[{"mask-radial-to":O()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":T()}],"mask-image-conic-pos":[{"mask-conic":[jt]}],"mask-image-conic-from-pos":[{"mask-conic-from":ge()}],"mask-image-conic-to-pos":[{"mask-conic-to":ge()}],"mask-image-conic-from-color":[{"mask-conic-from":O()}],"mask-image-conic-to-color":[{"mask-conic-to":O()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:K()}],"mask-repeat":[{mask:Y()}],"mask-size":[{mask:xe()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",et,Je]}],filter:[{filter:["","none",et,Je]}],blur:[{blur:we()}],brightness:[{brightness:[jt,et,Je]}],contrast:[{contrast:[jt,et,Je]}],"drop-shadow":[{"drop-shadow":["","none",g,pg,fg]}],"drop-shadow-color":[{"drop-shadow":O()}],grayscale:[{grayscale:["",jt,et,Je]}],"hue-rotate":[{"hue-rotate":[jt,et,Je]}],invert:[{invert:["",jt,et,Je]}],saturate:[{saturate:[jt,et,Je]}],sepia:[{sepia:["",jt,et,Je]}],"backdrop-filter":[{"backdrop-filter":["","none",et,Je]}],"backdrop-blur":[{"backdrop-blur":we()}],"backdrop-brightness":[{"backdrop-brightness":[jt,et,Je]}],"backdrop-contrast":[{"backdrop-contrast":[jt,et,Je]}],"backdrop-grayscale":[{"backdrop-grayscale":["",jt,et,Je]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[jt,et,Je]}],"backdrop-invert":[{"backdrop-invert":["",jt,et,Je]}],"backdrop-opacity":[{"backdrop-opacity":[jt,et,Je]}],"backdrop-saturate":[{"backdrop-saturate":[jt,et,Je]}],"backdrop-sepia":[{"backdrop-sepia":["",jt,et,Je]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":A()}],"border-spacing-x":[{"border-spacing-x":A()}],"border-spacing-y":[{"border-spacing-y":A()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",et,Je]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[jt,"initial",et,Je]}],ease:[{ease:["linear","initial",C,et,Je]}],delay:[{delay:[jt,et,Je]}],animate:[{animate:["none",b,et,Je]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[x,et,Je]}],"perspective-origin":[{"perspective-origin":R()}],rotate:[{rotate:ae()}],"rotate-x":[{"rotate-x":ae()}],"rotate-y":[{"rotate-y":ae()}],"rotate-z":[{"rotate-z":ae()}],scale:[{scale:me()}],"scale-x":[{"scale-x":me()}],"scale-y":[{"scale-y":me()}],"scale-z":[{"scale-z":me()}],"scale-3d":["scale-3d"],skew:[{skew:X()}],"skew-x":[{"skew-x":X()}],"skew-y":[{"skew-y":X()}],transform:[{transform:[et,Je,"","none","gpu","cpu"]}],"transform-origin":[{origin:R()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:ye()}],"translate-x":[{"translate-x":ye()}],"translate-y":[{"translate-y":ye()}],"translate-z":[{"translate-z":ye()}],"translate-none":["translate-none"],accent:[{accent:O()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:O()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",et,Je]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":A()}],"scroll-mx":[{"scroll-mx":A()}],"scroll-my":[{"scroll-my":A()}],"scroll-ms":[{"scroll-ms":A()}],"scroll-me":[{"scroll-me":A()}],"scroll-mt":[{"scroll-mt":A()}],"scroll-mr":[{"scroll-mr":A()}],"scroll-mb":[{"scroll-mb":A()}],"scroll-ml":[{"scroll-ml":A()}],"scroll-p":[{"scroll-p":A()}],"scroll-px":[{"scroll-px":A()}],"scroll-py":[{"scroll-py":A()}],"scroll-ps":[{"scroll-ps":A()}],"scroll-pe":[{"scroll-pe":A()}],"scroll-pt":[{"scroll-pt":A()}],"scroll-pr":[{"scroll-pr":A()}],"scroll-pb":[{"scroll-pb":A()}],"scroll-pl":[{"scroll-pl":A()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",et,Je]}],fill:[{fill:["none",...O()]}],"stroke-w":[{stroke:[jt,ah,Xl,Hy]}],stroke:[{stroke:["none",...O()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},JF=AF(QF);function qm(...t){return JF(dF(t))}function hr(){return crypto.randomUUID()}const Gy={backgroundColor:"#0000ff",borderColor:"#0000ff",textColor:"#ffffff"},qy={backgroundColor:"#6b6f7b",borderColor:"#6b6f7b",textColor:"#ffffff",backgroundImageUrl:"/assets/widgets/stone_tile.webp"},eB=t=>t.replace(/\sdata-bg="[^"]*"/gi,"").replace(/\sdata-border="[^"]*"/gi,"").replace(/\sdata-text="[^"]*"/gi,"").replace(/\sdata-bg-image="[^"]*"/gi,""),cL=(t,e)=>{if(!e)return t;const n=eB(t),r=[];if(e.backgroundColor&&r.push(`data-bg="${e.backgroundColor}"`),e.borderColor&&r.push(`data-border="${e.borderColor}"`),e.textColor&&r.push(`data-text="${e.textColor}"`),e.backgroundImageUrl&&r.push(`data-bg-image="${e.backgroundImageUrl}"`),!r.length)return n;const i=r.join(" "),s=/class="([^"]*\bbattlemap-widget-content\b[^"]*)"/i;return s.test(n)?n.replace(s,o=>`${o} ${i}`):`<div class="battlemap-widget-content" ${i}>${n||"Widget"}</div>`},tB=t=>{const e=r=>{const i=t.match(r);return i==null?void 0:i[1]},n={backgroundColor:e(/data-bg="([^"]+)"/i),borderColor:e(/data-border="([^"]+)"/i),textColor:e(/data-text="([^"]+)"/i),backgroundImageUrl:e(/data-bg-image="([^"]+)"/i)};return Object.values(n).some(Boolean)?n:void 0},dL=t=>{var e,n,r,i;return{backgroundColor:((e=t.appearance)==null?void 0:e.backgroundColor)??(t.isFixed?qy.backgroundColor:Gy.backgroundColor),borderColor:((n=t.appearance)==null?void 0:n.borderColor)??(t.isFixed?qy.borderColor:Gy.borderColor),textColor:((r=t.appearance)==null?void 0:r.textColor)??(t.isFixed?qy.textColor:Gy.textColor),backgroundImageUrl:(i=t.appearance)==null?void 0:i.backgroundImageUrl}},mn={gridType:"square",gridColumns:12,gridRows:8,cellSize:80,gridLineWidth:1,gridBorderWidth:2,widgets:[],layers:[{id:"grid-layer",name:"Grid Map Layer",kind:"grid",visible:!0},{id:hr(),name:"Tile Layer 1",kind:"tiles",visible:!0}],activeLayerId:"grid-layer",version:1},cr={gridType:"hex",gridColumns:7,gridRows:7,cellSize:80,gridLineWidth:1,gridBorderWidth:2,widgets:[],hexSettings:{hexSize:80,orientation:"flat"},hexWidgets:[],layers:[{id:"grid-layer",name:"Grid Map Layer",kind:"grid",visible:!0},{id:hr(),name:"Tile Layer 1",kind:"tiles",visible:!0}],activeLayerId:"grid-layer",version:1};let aE=!1,ws=!0,vo=!0,vc=!0,yc=!0,wc=!0,xc=!0,_c=!0,bc=!0,Sc=!0,yo=!0;const Sb="grid-layer",nB=()=>[{id:Sb,name:"Grid Map Layer",kind:"grid",visible:!0},{id:hr(),name:"Tile Layer 1",kind:"tiles",visible:!0}],lE=t=>{if(!Array.isArray(t)||t.length===0)return nB();let e=t.map((i,s)=>{const o=typeof i.name=="string"&&i.name.trim().length>0?i.name.trim():`Layer ${s+1}`,a=i.kind==="grid"||i.kind==="tiles"||i.kind==="image"||i.kind==="background"?i.kind:"layer";return{id:typeof i.id=="string"&&i.id.length>0?i.id:hr(),name:o,kind:a,visible:i.visible!==!1}});if(e.some(i=>i.kind==="grid")||(e=[{id:Sb,name:"Grid Map Layer",kind:"grid",visible:!0},...e]),!e.some(i=>i.kind==="tiles")){const i={id:hr(),name:"Tile Layer 1",kind:"tiles",visible:!0},s=e.findIndex(o=>o.kind==="grid");s>=0?e=[...e.slice(0,s+1),i,...e.slice(s+1)]:e=[i,...e]}return e},uE=(t,e)=>{var r;if(t&&e.some(i=>i.id===t))return t;const n=e.find(i=>i.kind==="grid");return(n==null?void 0:n.id)??((r=e[0])==null?void 0:r.id)??Sb},gu=t=>{var n;if(!t||typeof t!="object")return!1;const e=((n=t.message)==null?void 0:n.toLowerCase())??"";return e.includes("does not exist")||e.includes("42p01")},Gn=(t,e)=>{var r;if(!t||typeof t!="object")return!1;const n=((r=t.message)==null?void 0:r.toLowerCase())??"";return n.includes("does not exist")&&n.includes(e.toLowerCase())},rB=(t,e)=>{const n=Number(t.q)||0,r=Number(t.r)||0,i=t.s!==void 0&&t.s!==null?Number(t.s):-(n+r);return{id:t.id||hr(),gridType:"hex",q:n,r,s:i,layerId:t.layerId??e,tileId:t.tileId??"",appearance:t.appearance,updated_at:t.updated_at}},tl=t=>{var l,c,h,f,p;const e=(t==null?void 0:t.gridType)==="hex"||Array.isArray(t==null?void 0:t.hexWidgets),n=Number((t==null?void 0:t.gridLineWidth)??mn.gridLineWidth??1),r=Number((t==null?void 0:t.gridBorderWidth)??mn.gridBorderWidth??2),i=typeof(t==null?void 0:t.gridLineColor)=="string"?t==null?void 0:t.gridLineColor:void 0,s=typeof(t==null?void 0:t.gridBorderColor)=="string"?t==null?void 0:t.gridBorderColor:void 0;if(e){const g=Number((l=t==null?void 0:t.hexSettings)==null?void 0:l.hexSize)||((c=cr.hexSettings)==null?void 0:c.hexSize)||cr.cellSize,v=((h=t==null?void 0:t.hexSettings)==null?void 0:h.orientation)==="pointy"?"pointy":"flat",x=Number(t==null?void 0:t.gridColumns)||cr.gridColumns,k=Number(t==null?void 0:t.gridRows)||cr.gridRows,C={hexSize:g,orientation:v},b=lE(t==null?void 0:t.layers),_=(f=b.find(T=>T.kind==="tiles"))==null?void 0:f.id;return{gridType:"hex",gridColumns:x,gridRows:k,cellSize:Number(t==null?void 0:t.cellSize)||g,gridLineWidth:n,gridBorderWidth:r,gridLineColor:i,gridBorderColor:s,widgets:[],hexSettings:C,hexWidgets:((t==null?void 0:t.hexWidgets)??[]).map(T=>rB(T,_)),allowedHexCells:t==null?void 0:t.allowedHexCells,layers:b,activeLayerId:uE(t==null?void 0:t.activeLayerId,b),version:(t==null?void 0:t.version)??cr.version,updated_at:t==null?void 0:t.updated_at}}const o=lE(t==null?void 0:t.layers),a=(p=o.find(g=>g.kind==="tiles"))==null?void 0:p.id;return{gridType:"square",gridColumns:Number(t==null?void 0:t.gridColumns)||mn.gridColumns,gridRows:Number(t==null?void 0:t.gridRows)||mn.gridRows,cellSize:Number(t==null?void 0:t.cellSize)||mn.cellSize,gridLineWidth:n,gridBorderWidth:r,gridLineColor:i,gridBorderColor:s,widgets:((t==null?void 0:t.widgets)??[]).map(g=>{const v=tB(g.content??""),x=dL({...g,appearance:g.appearance??v}),k=g.content&&g.content.trim().length?g.content:'<div class="battlemap-widget-content">Widget</div>',C=cL(k,x);return{id:g.id||hr(),x:g.x??0,y:g.y??0,w:g.w??1,h:g.h??1,content:C,layerId:g.layerId??a,tileId:g.tileId,appearance:x,isFixed:g.isFixed??!1,updated_at:g.updated_at}}),allowedSquareCells:t==null?void 0:t.allowedSquareCells,layers:o,activeLayerId:uE(t==null?void 0:t.activeLayerId,o),version:(t==null?void 0:t.version)??mn.version,updated_at:t==null?void 0:t.updated_at}};async function hL(){if(aE)return ws;const{error:t}=await Ct.from("battle_map_configs").select("project_id").limit(1);return t&&gu(t)&&(ws=!1),aE=!0,ws}async function iB(t,e){var c,h,f,p;let n;for(let g=0;g<3;g+=1){const v=["grid_columns","grid_rows","cell_size","version","updated_at"];vc&&v.push("allowed_square_cells"),yc&&v.push("layers"),wc&&v.push("active_layer_id"),xc&&v.push("grid_line_color"),_c&&v.push("grid_border_color"),bc&&v.push("grid_line_width"),Sc&&v.push("grid_border_width");try{n=await Ct.from("battle_map_configs").select(v.join(", ")).eq("project_id",t).eq("user_id",e).limit(1)}catch(x){n={error:x}}if(!n.error)break;if(gu(n.error))return ws=!1,null;if(Gn(n.error,"allowed_square_cells")){vc=!1;continue}if(Gn(n.error,"layers")){yc=!1;continue}if(Gn(n.error,"active_layer_id")){wc=!1;continue}if(Gn(n.error,"grid_line_color")){xc=!1;continue}if(Gn(n.error,"grid_border_color")){_c=!1;continue}if(Gn(n.error,"grid_line_width")){bc=!1;continue}if(Gn(n.error,"grid_border_width")){Sc=!1;continue}vc=!1,yc=!1,wc=!1,xc=!1,_c=!1,bc=!1,Sc=!1}if(n.error){if(gu(n.error))return ws=!1,null;throw n.error}const r=(c=n.data)==null?void 0:c[0];if(!r)return null;const i=["id","x","y","w","h","content","updated_at","sort_index"];vo&&i.push("is_fixed"),yo&&i.push("layer_id");const s=i.join(", "),{data:o,error:a}=await Ct.from("battle_map_widgets").select(s).eq("project_id",t).eq("user_id",e).order("sort_index",{ascending:!0});if(a){if(Gn(a,"is_fixed")){vo=!1;const g=await Ct.from("battle_map_widgets").select(["id","x","y","w","h","content","updated_at","sort_index",...yo?["layer_id"]:[]].join(", ")).eq("project_id",t).eq("user_id",e).order("sort_index",{ascending:!0});if(g.error){if(Gn(g.error,"layer_id")){yo=!1;const v=await Ct.from("battle_map_widgets").select("id, x, y, w, h, content, updated_at, sort_index").eq("project_id",t).eq("user_id",e).order("sort_index",{ascending:!0});if(v.error)throw v.error;return tl({gridColumns:r.grid_columns,gridRows:r.grid_rows,cellSize:r.cell_size,widgets:((h=v.data)==null?void 0:h.map(x=>({id:x.id,x:x.x,y:x.y,w:x.w,h:x.h,content:x.content??"",updated_at:x.updated_at,isFixed:!1})))??[],version:r.version,updated_at:r.updated_at})}throw g.error}return tl({gridColumns:r.grid_columns,gridRows:r.grid_rows,cellSize:r.cell_size,widgets:((f=g.data)==null?void 0:f.map(v=>({id:v.id,x:v.x,y:v.y,w:v.w,h:v.h,content:v.content??"",layerId:yo?v.layer_id??void 0:void 0,updated_at:v.updated_at,isFixed:!1})))??[],version:r.version,updated_at:r.updated_at})}if(Gn(a,"layer_id")){yo=!1;const g=await Ct.from("battle_map_widgets").select(["id","x","y","w","h","content","updated_at","sort_index",...vo?["is_fixed"]:[]].join(", ")).eq("project_id",t).eq("user_id",e).order("sort_index",{ascending:!0});if(g.error)throw Gn(g.error,"is_fixed")&&(vo=!1),g.error;const v=((p=g.data)==null?void 0:p.map(x=>({id:x.id,x:x.x,y:x.y,w:x.w,h:x.h,content:x.content??"",isFixed:vo?x.is_fixed??!1:!1,updated_at:x.updated_at})))??[];return tl({gridColumns:r.grid_columns,gridRows:r.grid_rows,cellSize:r.cell_size,widgets:v,version:r.version,updated_at:r.updated_at})}if(gu(a))return ws=!1,null;throw a}const l=(o==null?void 0:o.map(g=>({id:g.id,x:g.x,y:g.y,w:g.w,h:g.h,content:g.content??"",isFixed:vo?g.is_fixed??!1:!1,layerId:yo?g.layer_id??void 0:void 0,updated_at:g.updated_at})))??[];return tl({gridColumns:r.grid_columns,gridRows:r.grid_rows,cellSize:r.cell_size,gridLineColor:xc?r.grid_line_color:void 0,gridBorderColor:_c?r.grid_border_color:void 0,gridLineWidth:bc?r.grid_line_width:void 0,gridBorderWidth:Sc?r.grid_border_width:void 0,widgets:l,allowedSquareCells:vc?r.allowed_square_cells:void 0,layers:yc?r.layers:void 0,activeLayerId:wc?r.active_layer_id:void 0,version:r.version,updated_at:r.updated_at})}async function fL(t,e,n){const r=tl(n);if(r.gridType==="hex")return r;const i=(r.version??1)+1,s=new Date().toISOString(),o={project_id:t,user_id:e,grid_columns:r.gridColumns,grid_rows:r.gridRows,cell_size:r.cellSize,version:i,updated_at:s};let a;for(let p=0;p<3;p+=1){let g={...o};if(vc&&(g={...g,allowed_square_cells:r.allowedSquareCells??null}),yc&&(g={...g,layers:r.layers??null}),wc&&(g={...g,active_layer_id:r.activeLayerId??null}),xc&&(g={...g,grid_line_color:r.gridLineColor??null}),_c&&(g={...g,grid_border_color:r.gridBorderColor??null}),bc&&(g={...g,grid_line_width:r.gridLineWidth??null}),Sc&&(g={...g,grid_border_width:r.gridBorderWidth??null}),a=await Ct.from("battle_map_configs").upsert(g),!a.error)break;if(Gn(a.error,"allowed_square_cells")){vc=!1;continue}if(Gn(a.error,"layers")){yc=!1;continue}if(Gn(a.error,"active_layer_id")){wc=!1;continue}if(Gn(a.error,"grid_line_color")){xc=!1;continue}if(Gn(a.error,"grid_border_color")){_c=!1;continue}if(Gn(a.error,"grid_line_width")){bc=!1;continue}if(Gn(a.error,"grid_border_width")){Sc=!1;continue}if(gu(a.error))return ws=!1,r;throw a.error}if(a.error){if(gu(a.error))return ws=!1,r;throw a.error}const l=r.widgets.map((p,g)=>{const v=dL(p);return{id:p.id||hr(),project_id:t,user_id:e,x:p.x??0,y:p.y??0,w:p.w??1,h:p.h??1,content:cL(p.content??"",v),...vo?{is_fixed:p.isFixed??!1}:{},...yo?{layer_id:p.layerId??null}:{},sort_index:g,updated_at:s}}),{error:c}=await Ct.from("battle_map_widgets").upsert(l,{onConflict:"id"});if(c){if(Gn(c,"is_fixed")){vo=!1;const p=r.widgets.map((v,x)=>({id:v.id||hr(),project_id:t,user_id:e,x:v.x??0,y:v.y??0,w:v.w??1,h:v.h??1,content:v.content??"",...yo?{layer_id:v.layerId??null}:{},sort_index:x,updated_at:s})),g=await Ct.from("battle_map_widgets").upsert(p,{onConflict:"id"});if(g.error){if(Gn(g.error,"layer_id")){yo=!1;const v=r.widgets.map((k,C)=>({id:k.id||hr(),project_id:t,user_id:e,x:k.x??0,y:k.y??0,w:k.w??1,h:k.h??1,content:k.content??"",sort_index:C,updated_at:s})),x=await Ct.from("battle_map_widgets").upsert(v,{onConflict:"id"});if(x.error)throw x.error;return ws=!1,r}throw g.error}return ws=!1,r}if(Gn(c,"layer_id")){yo=!1;const p=r.widgets.map((v,x)=>({id:v.id||hr(),project_id:t,user_id:e,x:v.x??0,y:v.y??0,w:v.w??1,h:v.h??1,content:v.content??"",...vo?{is_fixed:v.isFixed??!1}:{},sort_index:x,updated_at:s})),g=await Ct.from("battle_map_widgets").upsert(p,{onConflict:"id"});if(g.error)throw Gn(g.error,"is_fixed")&&(vo=!1),g.error;return ws=!1,r}if(gu(c))return ws=!1,r;throw c}const{data:h}=await Ct.from("battle_map_widgets").select("id").eq("project_id",t).eq("user_id",e),f=(h==null?void 0:h.map(p=>p.id).filter(p=>!l.some(g=>g.id===p)))??[];return f.length>0&&await Ct.from("battle_map_widgets").delete().in("id",f),{...r,widgets:l.map(({id:p,x:g,y:v,w:x,h:k,content:C})=>{var b,_,T;return{id:p,x:g,y:v,w:x,h:k,content:C,appearance:(b=r.widgets.find(R=>R.id===p))==null?void 0:b.appearance,isFixed:((_=r.widgets.find(R=>R.id===p))==null?void 0:_.isFixed)??!1,layerId:(T=r.widgets.find(R=>R.id===p))==null?void 0:T.layerId,updated_at:s}}),version:i,updated_at:s}}async function cE(t,e,n){const r=n.gridType==="hex"?{gridType:"hex",gridColumns:n.gridColumns,gridRows:n.gridRows,cellSize:n.cellSize,gridLineColor:n.gridLineColor,gridBorderColor:n.gridBorderColor,gridLineWidth:n.gridLineWidth,gridBorderWidth:n.gridBorderWidth,hexSettings:n.hexSettings??cr.hexSettings,hexWidgets:n.hexWidgets??[],allowedHexCells:n.allowedHexCells,layers:n.layers,activeLayerId:n.activeLayerId,version:n.version,updated_at:n.updated_at}:{gridType:"square",gridColumns:n.gridColumns,gridRows:n.gridRows,cellSize:n.cellSize,gridLineColor:n.gridLineColor,gridBorderColor:n.gridBorderColor,gridLineWidth:n.gridLineWidth,gridBorderWidth:n.gridBorderWidth,widgets:n.widgets,allowedSquareCells:n.allowedSquareCells,layers:n.layers,activeLayerId:n.activeLayerId,version:n.version,updated_at:n.updated_at};await Ct.from("projects").update({battle_map_config:r}).eq("id",t).eq("user_id",e)}async function sB(t){var n,r,i,s,o,a,l,c,h;if(((n=t.legacyConfig)==null?void 0:n.gridType)==="hex")return{config:tl(t.legacyConfig),storage:"legacy"};const e=await hL();if(e){const f=await iB(t.projectId,t.userId);if(f)return{config:f.gridType==="square"?{...f,...(!f.allowedSquareCells||f.allowedSquareCells.length===0)&&((i=(r=t.legacyConfig)==null?void 0:r.allowedSquareCells)!=null&&i.length)?{allowedSquareCells:t.legacyConfig.allowedSquareCells}:{},...f.layers&&f.layers.length>0?{}:(s=t.legacyConfig)!=null&&s.layers?{layers:t.legacyConfig.layers}:{},...f.activeLayerId?{}:(o=t.legacyConfig)!=null&&o.activeLayerId?{activeLayerId:t.legacyConfig.activeLayerId}:{},...f.gridLineColor?{}:(a=t.legacyConfig)!=null&&a.gridLineColor?{gridLineColor:t.legacyConfig.gridLineColor}:{},...f.gridBorderColor?{}:(l=t.legacyConfig)!=null&&l.gridBorderColor?{gridBorderColor:t.legacyConfig.gridBorderColor}:{},...f.gridLineWidth!==void 0?{}:((c=t.legacyConfig)==null?void 0:c.gridLineWidth)!==void 0?{gridLineWidth:t.legacyConfig.gridLineWidth}:{},...f.gridBorderWidth!==void 0?{}:((h=t.legacyConfig)==null?void 0:h.gridBorderWidth)!==void 0?{gridBorderWidth:t.legacyConfig.gridBorderWidth}:{}}:f,storage:"advanced"}}if(t.legacyConfig){const f=tl(t.legacyConfig);if(e)try{await fL(t.projectId,t.userId,f)}catch(p){console.warn("Battle map migration failed, keeping legacy storage",p)}return{config:f,storage:e?"advanced":"legacy"}}return{config:mn,storage:e?"advanced":"legacy"}}async function pL(t){const e=await hL();let n=tl(t.config);if(n.gridType==="hex"){n={...n,version:(n.version??1)+1,updated_at:new Date().toISOString()};try{await cE(t.projectId,t.userId,n)}catch(r){console.warn("Failed to persist hex battle_map_config snapshot",r)}return{config:n,storage:"legacy"}}e?n=await fL(t.projectId,t.userId,n):n={...n,version:(n.version??1)+1};try{await cE(t.projectId,t.userId,n)}catch(r){console.warn("Failed to persist legacy battle_map_config snapshot",r)}return{config:n,storage:e?"advanced":"legacy"}}function oB({isOpen:t,onClose:e,projectTypes:n,selectedProjectTypeId:r,onSelectProjectType:i,onProjectCreated:s,existingProjects:o=[]}){var qe;const{user:a}=Ii(),l=no(),c=y.useMemo(()=>n.find(he=>he.id===r),[n,r]),[h,f]=y.useState(""),[p,g]=y.useState(""),[v,x]=y.useState(!1),[k,C]=y.useState(null),[b,_]=y.useState(1e3),[T,R]=y.useState(1e3),[L,M]=y.useState("#ffffff"),[A,$]=y.useState(mn.gridColumns),[j,V]=y.useState(mn.gridRows),[U,B]=y.useState("square"),Z=((qe=cr.hexSettings)==null?void 0:qe.hexSize)??cr.cellSize,q=y.useMemo(()=>o.filter(ge=>ge.project_type==="canvas").length+1,[o]);y.useEffect(()=>{t&&(f(""),g(""),C(null),_(1e3),R(1e3),M("#ffffff"),$(mn.gridColumns),V(mn.gridRows),B("square"))},[t]);const G=r==="canvas",te=r==="battle-maps",O=280,K=b/T;let Y,xe;if(b>=T?(Y=O,xe=O/K):(xe=O,Y=O*K),!t)return null;const re=async he=>{if(he.preventDefault(),!a)return;x(!0),C(null);const ge=h.trim()||(G?`Canvas Project #${q}`:"");if(!ge){C("Project name is required"),x(!1);return}const we=Math.max(1,A||mn.gridColumns),ae=Math.max(1,j||mn.gridRows),me=Z,X=Math.max(1,we),ye=G?{width:b,height:T,backgroundColor:L}:te?U==="hex"?{gridType:U,gridColumns:X*2-1,gridRows:X*2-1,cellSize:me,widgets:[],hexSettings:{hexSize:me,orientation:"flat"},hexWidgets:[],version:cr.version}:{gridType:U,gridColumns:we,gridRows:ae,cellSize:mn.cellSize,widgets:[],version:mn.version}:{},_e={user_id:a.id,name:ge,project_type:r,description:p.trim()||null,config:ye},{data:at,error:Le}=await Ct.from("projects").insert([_e]).select().single();if(Le){C(Le.message),x(!1);return}const fe=at;G&&await ue(fe.id),te&&await ke(fe.id,we,ae,U,{hexSize:me}),s==null||s(fe),x(!1),e(),l(`/workspace/${r}/${fe.id}`)},ue=async he=>{if(a)try{const ge=hr(),we=hr(),ae={layers:[{id:ge,name:"Background",visible:!0,order:0,strokes:[]},{id:we,name:"Layer 1",visible:!0,order:1,strokes:[]}],activeLayerId:we,version:2};await Ct.from("canvases").insert({project_id:he,user_id:a.id,canvas_data:ae})}catch(ge){console.error("Failed to create initial canvas:",ge)}},ke=async(he,ge,we,ae,me)=>{var _e;if(!a)return;const X=(me==null?void 0:me.hexSize)??((_e=cr.hexSettings)==null?void 0:_e.hexSize)??cr.cellSize,ye=ae==="hex"?{gridType:"hex",gridColumns:ge*2-1,gridRows:ge*2-1,cellSize:X,widgets:[],hexSettings:{hexSize:X,orientation:"flat"},hexWidgets:[],version:cr.version}:{gridType:"square",gridColumns:ge,gridRows:we,cellSize:mn.cellSize,widgets:[],version:mn.version};try{await pL({projectId:he,userId:a.id,config:ye}),await Ct.from("battle_maps").insert({project_id:he,width:ae==="hex"?0:ge,height:ae==="hex"?0:we,tile_size:ye.cellSize,grid_type:ae})}catch(at){console.error("Failed to create initial battle map:",at)}};return w.jsx("div",{className:"new-project-overlay",onClick:e,role:"presentation",children:w.jsxs("div",{className:"new-project-panel",role:"dialog","aria-modal":"true","aria-labelledby":"new-project-title",onClick:he=>he.stopPropagation(),children:[w.jsxs("div",{className:"new-project-panel__column new-project-panel__column--left",children:[w.jsxs("div",{className:"new-project-panel__header",children:[w.jsx("h2",{id:"new-project-title",children:"New Project"}),w.jsx("p",{className:"new-project-panel__subtitle muted",children:"Choose a project type to get started."})]}),w.jsx(aF,{items:n,selectedId:r,onSelect:i})]}),w.jsx("div",{className:"new-project-panel__column new-project-panel__column--right",children:G?w.jsxs("div",{className:"new-project-canvas-layout",children:[w.jsxs("div",{className:"new-project-canvas-column",children:[w.jsx("h3",{className:"new-project-panel__selection-title",children:c==null?void 0:c.label}),w.jsxs("form",{className:"new-project-canvas-form",onSubmit:re,children:[w.jsxs("div",{className:"new-project-form__group",children:[w.jsx("label",{className:"new-project-form__label",htmlFor:"canvas-name",children:"Canvas Name"}),w.jsx("input",{id:"canvas-name",type:"text",value:h,onChange:he=>f(he.target.value),placeholder:`Canvas Project #${q}`,className:"new-project-form__input"})]}),w.jsx("div",{className:"new-project-canvas-divider"}),w.jsxs("div",{className:"new-project-form__grid",children:[w.jsxs("div",{className:"new-project-form__group",children:[w.jsx("label",{className:"new-project-form__label",htmlFor:"canvas-width",children:"Width"}),w.jsxs("div",{className:"new-project-form__input-with-unit",children:[w.jsx("input",{id:"canvas-width",type:"number",value:b,onChange:he=>_(Number(he.target.value)),min:"100",max:"10000",required:!0,className:"new-project-form__input"}),w.jsx("span",{className:"new-project-form__unit",children:"px"})]})]}),w.jsxs("div",{className:"new-project-form__group",children:[w.jsx("label",{className:"new-project-form__label",htmlFor:"canvas-height",children:"Height"}),w.jsxs("div",{className:"new-project-form__input-with-unit",children:[w.jsx("input",{id:"canvas-height",type:"number",value:T,onChange:he=>R(Number(he.target.value)),min:"100",max:"10000",required:!0,className:"new-project-form__input"}),w.jsx("span",{className:"new-project-form__unit",children:"px"})]})]})]}),w.jsxs("div",{className:"new-project-form__group",children:[w.jsx("label",{className:"new-project-form__label",htmlFor:"canvas-color",children:"Background Color"}),w.jsx("input",{id:"canvas-color",type:"color",value:L,onChange:he=>M(he.target.value),className:"new-project-form__color-input-circle",title:L})]}),k?w.jsx("p",{className:"new-project-form__error",children:k}):null,w.jsxs("div",{className:"new-project-form__actions",children:[w.jsx("button",{className:"button button--ghost",type:"button",onClick:e,disabled:v,children:"Cancel"}),w.jsx("button",{className:"button button--primary",type:"submit",disabled:v,children:v?"Creating":"Create"})]})]})]}),w.jsxs("div",{className:"new-project-canvas-column",children:[w.jsx("h3",{className:"new-project-canvas-preview__label",children:"Preview"}),w.jsxs("div",{className:"new-project-canvas-preview__container",children:[w.jsx("div",{className:"new-project-canvas-preview__card",style:{width:`${Y}px`,height:`${xe}px`},children:w.jsx(cF,{variant:"gold",children:w.jsx("div",{className:"new-project-canvas-preview__inner",style:{backgroundColor:L}})})}),w.jsxs("p",{className:"new-project-canvas-preview__dimensions",children:[b,"  ",T," px"]})]})]})]}):w.jsxs(w.Fragment,{children:[w.jsx("h3",{className:"new-project-panel__selection-title",children:c==null?void 0:c.label}),w.jsxs("form",{className:"new-project-form",onSubmit:re,children:[w.jsxs("div",{className:"new-project-form__group",children:[w.jsx("label",{className:"new-project-form__label",htmlFor:"project-name",children:"Project Name"}),w.jsx("input",{id:"project-name",type:"text",value:h,onChange:he=>f(he.target.value),placeholder:"Enter a project name",className:"new-project-form__input",required:!0})]}),w.jsxs("div",{className:"new-project-form__group",children:[w.jsxs("label",{className:"new-project-form__label",htmlFor:"project-description",children:["Description ",w.jsx("span",{className:"new-project-form__optional",children:"(optional)"})]}),w.jsx("textarea",{id:"project-description",value:p,onChange:he=>g(he.target.value),rows:3,placeholder:"Add a short summary for this project",className:"new-project-form__input"})]}),te?w.jsxs(w.Fragment,{children:[w.jsxs("div",{className:"new-project-form__group",children:[w.jsx("span",{className:"new-project-form__label",children:"Grid Type"}),w.jsxs("div",{className:"new-project-form__radio-group",children:[w.jsxs("label",{className:"new-project-form__radio",children:[w.jsx("input",{type:"radio",name:"battlemap-grid-type",value:"square",checked:U==="square",onChange:()=>B("square")}),w.jsx("span",{children:"Square (GridStack)"})]}),w.jsxs("label",{className:"new-project-form__radio",children:[w.jsx("input",{type:"radio",name:"battlemap-grid-type",value:"hex",checked:U==="hex",onChange:()=>B("hex")}),w.jsx("span",{children:"Hex"})]})]})]}),U==="square"?w.jsxs(w.Fragment,{children:[w.jsxs("div",{className:"new-project-form__grid",children:[w.jsxs("div",{className:"new-project-form__group",children:[w.jsx("label",{className:"new-project-form__label",htmlFor:"battlemap-columns",children:"Columns"}),w.jsx("input",{id:"battlemap-columns",type:"number",min:"1",max:"50",value:A,onChange:he=>$(Number(he.target.value)),className:"new-project-form__input",required:!0})]}),w.jsxs("div",{className:"new-project-form__group",children:[w.jsx("label",{className:"new-project-form__label",htmlFor:"battlemap-rows",children:"Rows"}),w.jsx("input",{id:"battlemap-rows",type:"number",min:"1",max:"50",value:j,onChange:he=>V(Number(he.target.value)),className:"new-project-form__input",required:!0})]})]}),w.jsx("p",{className:"new-project-form__optional",children:"Set the starting grid size (default 12 columns by 8 rows). You can expand later."})]}):w.jsxs(w.Fragment,{children:[w.jsxs("div",{className:"new-project-form__group",children:[w.jsx("label",{className:"new-project-form__label",htmlFor:"battlemap-columns",children:"Radius (hexes from center)"}),w.jsx("input",{id:"battlemap-columns",type:"number",min:"1",max:"50",value:A,onChange:he=>{const ge=Number(he.target.value);$(ge),V(ge)},className:"new-project-form__input",required:!0})]}),w.jsx("p",{className:"new-project-form__optional",children:"Hex grids are hexagonal; radius controls size. Orientation is flat-top."})]})]}):null,k?w.jsx("p",{className:"new-project-form__error",children:k}):null,w.jsxs("div",{className:"new-project-form__actions",children:[w.jsx("button",{className:"button button--ghost",type:"button",onClick:e,disabled:v,children:"Cancel"}),w.jsx("button",{className:"button button--primary",type:"submit",disabled:!h.trim()||v,children:v?"Creating":"Create"})]})]})]})})]})})}const Yy=(t,e)=>{let n=t.startsWith("#")?t.slice(1):t;n.length===3&&(n=n.split("").map(a=>a+a).join(""));const r=parseInt(n,16);let i=r>>16&255,s=r>>8&255,o=r&255;return i=Math.max(0,Math.min(255,Math.floor(i*(1-e)))),s=Math.max(0,Math.min(255,Math.floor(s*(1-e)))),o=Math.max(0,Math.min(255,Math.floor(o*(1-e)))),"#"+((1<<24)+(i<<16)+(s<<8)+o).toString(16).slice(1).toUpperCase()},aB=({color:t="#5227FF",size:e=1,items:n=[],className:r="",onClick:i})=>{const o=n.slice(0,3);for(;o.length<3;)o.push(null);const a=Yy(t,.08),l=Yy("#ffffff",.1),c=Yy("#ffffff",.05),h="#ffffff",f=()=>{i&&i()},p={"--folder-color":t,"--folder-back-color":a,"--paper-1":l,"--paper-2":c,"--paper-3":h},g={transform:`scale(${e})`};return w.jsx("div",{style:g,className:r,children:w.jsx("div",{className:"folder",style:p,onClick:f,children:w.jsxs("div",{className:"folder__back",children:[o.map((v,x)=>w.jsx("div",{className:`paper paper-${x+1}`,children:v},x)),w.jsx("div",{className:"folder__front"}),w.jsx("div",{className:"folder__front right"})]})})})};function lB({projects:t,isLoading:e,onSelectProject:n,onUpdateProject:r,onDeleteProject:i,onRefresh:s}){const[o,a]=y.useState(null),[l,c]=y.useState(""),[h,f]=y.useState(!1),[p,g]=y.useState(!1),[v,x]=y.useState(new Set),k=y.useRef(null),C=j=>({canvas:"#df4b26","battle-maps":"#FF6B35","character-sheets":"#4ECDC4","item-cards":"#FFD93D","game-boards":"#95E1D3","campaign-journal":"#F38181"})[j]||"#FF6B35";y.useEffect(()=>{o&&k.current&&(k.current.focus(),k.current.select())},[o]);const b=(j,V)=>{V.stopPropagation(),a(j.id),c(j.name)},_=async j=>{var V;if(!r||!l.trim()||l===((V=t.find(U=>U.id===j))==null?void 0:V.name)){a(null);return}f(!0);try{await r(j,l.trim()),a(null)}catch(U){console.error("Failed to update project name:",U)}finally{f(!1)}},T=()=>{a(null),c("")},R=(j,V)=>{j.key==="Enter"?_(V):j.key==="Escape"&&T()},L=()=>{g(!p),x(new Set)},M=(j,V)=>{V.stopPropagation(),x(U=>{const B=new Set(U);return B.has(j)?B.delete(j):B.add(j),B})},A=async(j,V)=>{if(V.stopPropagation(),!!i&&window.confirm("Are you sure you want to delete this project? This action cannot be undone."))try{await i(j),x(U=>{const B=new Set(U);return B.delete(j),B})}catch(U){console.error("Failed to delete project:",U)}},$=j=>{p||n(j)};return w.jsxs("div",{className:"my-projects",children:[w.jsxs("div",{className:"my-projects__toolbar",children:[w.jsxs("div",{children:[w.jsx("p",{className:"my-projects__eyebrow",children:"Projects"}),w.jsx("h2",{children:"My Projects"})]}),w.jsxs("div",{className:"my-projects__toolbar-actions",children:[i&&w.jsx("button",{className:`button ${p?"button--primary":"button--ghost"}`,onClick:L,disabled:e,children:p?"Done":"Edit"}),s?w.jsx("button",{className:"button button--ghost",onClick:s,disabled:e,children:"Refresh"}):null]})]}),e?w.jsx("p",{className:"muted",children:"Loading your projects"}):t.length===0?w.jsx("div",{className:"my-projects__empty",children:w.jsx("p",{className:"muted",children:"No projects yet. Create one to get started."})}):w.jsx("div",{className:"my-projects__grid",children:t.map(j=>{const V=v.has(j.id);return w.jsxs("div",{className:`my-projects__folder-wrapper ${p?"my-projects__folder-wrapper--edit-mode":""} ${V?"my-projects__folder-wrapper--selected":""}`,children:[w.jsxs("div",{className:"my-projects__folder-container",onClick:p?U=>M(j.id,U):void 0,children:[w.jsx(aB,{color:C(j.project_type),size:1.2,onClick:()=>$(j)}),p&&V&&w.jsx("button",{className:"my-projects__delete-btn",onClick:U=>A(j.id,U),title:"Delete project",children:""})]}),w.jsxs("div",{className:"my-projects__folder-info",children:[o===j.id?w.jsx("input",{ref:k,type:"text",className:"my-projects__title my-projects__title--editing",value:l,onChange:U=>c(U.target.value),onBlur:()=>_(j.id),onKeyDown:U=>R(U,j.id),disabled:h,maxLength:100}):w.jsx("h3",{className:"my-projects__title",onClick:U=>!p&&b(j,U),title:j.name,children:j.name}),w.jsxs("div",{className:"my-projects__meta",children:[w.jsx("span",{className:"my-projects__type",children:j.project_type}),w.jsx("span",{className:"my-projects__date",children:j.created_at?new Date(j.created_at).toLocaleDateString():""})]}),j.description?w.jsx("p",{className:"my-projects__description",children:j.description}):null]})]},j.id)})})]})}const Cb=y.createContext({});function kb(t){const e=y.useRef(null);return e.current===null&&(e.current=t()),e.current}const Eb=typeof window<"u",gL=Eb?y.useLayoutEffect:y.useEffect,$0=y.createContext(null);function Rb(t,e){t.indexOf(e)===-1&&t.push(e)}function Tb(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const da=(t,e,n)=>n>e?e:n<t?t:n;let Pb=()=>{};const ha={},mL=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function vL(t){return typeof t=="object"&&t!==null}const yL=t=>/^0[^.\s]+$/u.test(t);function Lb(t){let e;return()=>(e===void 0&&(e=t()),e)}const Es=t=>t,uB=(t,e)=>n=>e(t(n)),Xf=(...t)=>t.reduce(uB),Tf=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r};class Mb{constructor(){this.subscriptions=[]}add(e){return Rb(this.subscriptions,e),()=>Tb(this.subscriptions,e)}notify(e,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,n,r);else for(let s=0;s<i;s++){const o=this.subscriptions[s];o&&o(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Co=t=>t*1e3,Ss=t=>t/1e3;function wL(t,e){return e?t*(1e3/e):0}const xL=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,cB=1e-7,dB=12;function hB(t,e,n,r,i){let s,o,a=0;do o=e+(n-e)/2,s=xL(o,r,i)-t,s>0?n=o:e=o;while(Math.abs(s)>cB&&++a<dB);return o}function Zf(t,e,n,r){if(t===e&&n===r)return Es;const i=s=>hB(s,0,1,t,n);return s=>s===0||s===1?s:xL(i(s),e,r)}const _L=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,bL=t=>e=>1-t(1-e),SL=Zf(.33,1.53,.69,.99),Ab=bL(SL),CL=_L(Ab),kL=t=>(t*=2)<1?.5*Ab(t):.5*(2-Math.pow(2,-10*(t-1))),Nb=t=>1-Math.sin(Math.acos(t)),EL=bL(Nb),RL=_L(Nb),fB=Zf(.42,0,1,1),pB=Zf(0,0,.58,1),TL=Zf(.42,0,.58,1),gB=t=>Array.isArray(t)&&typeof t[0]!="number",PL=t=>Array.isArray(t)&&typeof t[0]=="number",mB={linear:Es,easeIn:fB,easeInOut:TL,easeOut:pB,circIn:Nb,circInOut:RL,circOut:EL,backIn:Ab,backInOut:CL,backOut:SL,anticipate:kL},vB=t=>typeof t=="string",dE=t=>{if(PL(t)){Pb(t.length===4);const[e,n,r,i]=t;return Zf(e,n,r,i)}else if(vB(t))return mB[t];return t},gg=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"],hE={value:null,addProjectionMetrics:null};function yB(t,e){let n=new Set,r=new Set,i=!1,s=!1;const o=new WeakSet;let a={delta:0,timestamp:0,isProcessing:!1},l=0;function c(f){o.has(f)&&(h.schedule(f),t()),l++,f(a)}const h={schedule:(f,p=!1,g=!1)=>{const x=g&&i?n:r;return p&&o.add(f),x.has(f)||x.add(f),f},cancel:f=>{r.delete(f),o.delete(f)},process:f=>{if(a=f,i){s=!0;return}i=!0,[n,r]=[r,n],n.forEach(c),e&&hE.value&&hE.value.frameloop[e].push(l),l=0,n.clear(),i=!1,s&&(s=!1,h.process(f))}};return h}const wB=40;function LL(t,e){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},s=()=>n=!0,o=gg.reduce((_,T)=>(_[T]=yB(s,e?T:void 0),_),{}),{setup:a,read:l,resolveKeyframes:c,preUpdate:h,update:f,preRender:p,render:g,postRender:v}=o,x=()=>{const _=ha.useManualTiming?i.timestamp:performance.now();n=!1,ha.useManualTiming||(i.delta=r?1e3/60:Math.max(Math.min(_-i.timestamp,wB),1)),i.timestamp=_,i.isProcessing=!0,a.process(i),l.process(i),c.process(i),h.process(i),f.process(i),p.process(i),g.process(i),v.process(i),i.isProcessing=!1,n&&e&&(r=!1,t(x))},k=()=>{n=!0,r=!0,i.isProcessing||t(x)};return{schedule:gg.reduce((_,T)=>{const R=o[T];return _[T]=(L,M=!1,A=!1)=>(n||k(),R.schedule(L,M,A)),_},{}),cancel:_=>{for(let T=0;T<gg.length;T++)o[gg[T]].cancel(_)},state:i,steps:o}}const{schedule:Rn,cancel:yl,state:Ur,steps:Ky}=LL(typeof requestAnimationFrame<"u"?requestAnimationFrame:Es,!0);let nm;function xB(){nm=void 0}const Mi={now:()=>(nm===void 0&&Mi.set(Ur.isProcessing||ha.useManualTiming?Ur.timestamp:performance.now()),nm),set:t=>{nm=t,queueMicrotask(xB)}},ML=t=>e=>typeof e=="string"&&e.startsWith(t),jb=ML("--"),_B=ML("var(--"),Ib=t=>_B(t)?bB.test(t.split("/*")[0].trim()):!1,bB=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Sd={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Pf={...Sd,transform:t=>da(0,1,t)},mg={...Sd,default:1},Hh=t=>Math.round(t*1e5)/1e5,Ob=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function SB(t){return t==null}const CB=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Db=(t,e)=>n=>!!(typeof n=="string"&&CB.test(n)&&n.startsWith(t)||e&&!SB(n)&&Object.prototype.hasOwnProperty.call(n,e)),AL=(t,e,n)=>r=>{if(typeof r!="string")return r;const[i,s,o,a]=r.match(Ob);return{[t]:parseFloat(i),[e]:parseFloat(s),[n]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},kB=t=>da(0,255,t),Xy={...Sd,transform:t=>Math.round(kB(t))},cu={test:Db("rgb","red"),parse:AL("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+Xy.transform(t)+", "+Xy.transform(e)+", "+Xy.transform(n)+", "+Hh(Pf.transform(r))+")"};function EB(t){let e="",n="",r="",i="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),i=t.substring(4,5),e+=e,n+=n,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const nx={test:Db("#"),parse:EB,transform:cu.transform},Qf=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Wa=Qf("deg"),ko=Qf("%"),bt=Qf("px"),RB=Qf("vh"),TB=Qf("vw"),fE=(()=>({...ko,parse:t=>ko.parse(t)/100,transform:t=>ko.transform(t*100)}))(),Cc={test:Db("hsl","hue"),parse:AL("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+ko.transform(Hh(e))+", "+ko.transform(Hh(n))+", "+Hh(Pf.transform(r))+")"},ur={test:t=>cu.test(t)||nx.test(t)||Cc.test(t),parse:t=>cu.test(t)?cu.parse(t):Cc.test(t)?Cc.parse(t):nx.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?cu.transform(t):Cc.transform(t),getAnimatableNone:t=>{const e=ur.parse(t);return e.alpha=0,ur.transform(e)}},PB=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function LB(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(Ob))==null?void 0:e.length)||0)+(((n=t.match(PB))==null?void 0:n.length)||0)>0}const NL="number",jL="color",MB="var",AB="var(",pE="${}",NB=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Lf(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},i=[];let s=0;const a=e.replace(NB,l=>(ur.test(l)?(r.color.push(s),i.push(jL),n.push(ur.parse(l))):l.startsWith(AB)?(r.var.push(s),i.push(MB),n.push(l)):(r.number.push(s),i.push(NL),n.push(parseFloat(l))),++s,pE)).split(pE);return{values:n,split:a,indexes:r,types:i}}function IL(t){return Lf(t).values}function OL(t){const{split:e,types:n}=Lf(t),r=e.length;return i=>{let s="";for(let o=0;o<r;o++)if(s+=e[o],i[o]!==void 0){const a=n[o];a===NL?s+=Hh(i[o]):a===jL?s+=ur.transform(i[o]):s+=i[o]}return s}}const jB=t=>typeof t=="number"?0:ur.test(t)?ur.getAnimatableNone(t):t;function IB(t){const e=IL(t);return OL(t)(e.map(jB))}const wl={test:LB,parse:IL,createTransformer:OL,getAnimatableNone:IB};function Zy(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function OB({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let i=0,s=0,o=0;if(!e)i=s=o=n;else{const a=n<.5?n*(1+e):n+e-n*e,l=2*n-a;i=Zy(l,a,t+1/3),s=Zy(l,a,t),o=Zy(l,a,t-1/3)}return{red:Math.round(i*255),green:Math.round(s*255),blue:Math.round(o*255),alpha:r}}function Ym(t,e){return n=>n>0?e:t}const On=(t,e,n)=>t+(e-t)*n,Qy=(t,e,n)=>{const r=t*t,i=n*(e*e-r)+r;return i<0?0:Math.sqrt(i)},DB=[nx,cu,Cc],FB=t=>DB.find(e=>e.test(t));function gE(t){const e=FB(t);if(!e)return!1;let n=e.parse(t);return e===Cc&&(n=OB(n)),n}const mE=(t,e)=>{const n=gE(t),r=gE(e);if(!n||!r)return Ym(t,e);const i={...n};return s=>(i.red=Qy(n.red,r.red,s),i.green=Qy(n.green,r.green,s),i.blue=Qy(n.blue,r.blue,s),i.alpha=On(n.alpha,r.alpha,s),cu.transform(i))},rx=new Set(["none","hidden"]);function BB(t,e){return rx.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function $B(t,e){return n=>On(t,e,n)}function Fb(t){return typeof t=="number"?$B:typeof t=="string"?Ib(t)?Ym:ur.test(t)?mE:VB:Array.isArray(t)?DL:typeof t=="object"?ur.test(t)?mE:zB:Ym}function DL(t,e){const n=[...t],r=n.length,i=t.map((s,o)=>Fb(s)(s,e[o]));return s=>{for(let o=0;o<r;o++)n[o]=i[o](s);return n}}function zB(t,e){const n={...t,...e},r={};for(const i in n)t[i]!==void 0&&e[i]!==void 0&&(r[i]=Fb(t[i])(t[i],e[i]));return i=>{for(const s in r)n[s]=r[s](i);return n}}function UB(t,e){const n=[],r={color:0,var:0,number:0};for(let i=0;i<e.values.length;i++){const s=e.types[i],o=t.indexes[s][r[s]],a=t.values[o]??0;n[i]=a,r[s]++}return n}const VB=(t,e)=>{const n=wl.createTransformer(e),r=Lf(t),i=Lf(e);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?rx.has(t)&&!i.values.length||rx.has(e)&&!r.values.length?BB(t,e):Xf(DL(UB(r,i),i.values),n):Ym(t,e)};function FL(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?On(t,e,n):Fb(t)(t,e)}const WB=t=>{const e=({timestamp:n})=>t(n);return{start:(n=!0)=>Rn.update(e,n),stop:()=>yl(e),now:()=>Ur.isProcessing?Ur.timestamp:Mi.now()}},BL=(t,e,n=10)=>{let r="";const i=Math.max(Math.round(e/n),2);for(let s=0;s<i;s++)r+=Math.round(t(s/(i-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},Km=2e4;function Bb(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<Km;)e+=n,r=t.next(e);return e>=Km?1/0:e}function HB(t,e=100,n){const r=n({...t,keyframes:[0,e]}),i=Math.min(Bb(r),Km);return{type:"keyframes",ease:s=>r.next(i*s).value/e,duration:Ss(i)}}const GB=5;function $L(t,e,n){const r=Math.max(e-GB,0);return wL(n-t(r),e-r)}const qn={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Jy=.001;function qB({duration:t=qn.duration,bounce:e=qn.bounce,velocity:n=qn.velocity,mass:r=qn.mass}){let i,s,o=1-e;o=da(qn.minDamping,qn.maxDamping,o),t=da(qn.minDuration,qn.maxDuration,Ss(t)),o<1?(i=c=>{const h=c*o,f=h*t,p=h-n,g=ix(c,o),v=Math.exp(-f);return Jy-p/g*v},s=c=>{const f=c*o*t,p=f*n+n,g=Math.pow(o,2)*Math.pow(c,2)*t,v=Math.exp(-f),x=ix(Math.pow(c,2),o);return(-i(c)+Jy>0?-1:1)*((p-g)*v)/x}):(i=c=>{const h=Math.exp(-c*t),f=(c-n)*t+1;return-Jy+h*f},s=c=>{const h=Math.exp(-c*t),f=(n-c)*(t*t);return h*f});const a=5/t,l=KB(i,s,a);if(t=Co(t),isNaN(l))return{stiffness:qn.stiffness,damping:qn.damping,duration:t};{const c=Math.pow(l,2)*r;return{stiffness:c,damping:o*2*Math.sqrt(r*c),duration:t}}}const YB=12;function KB(t,e,n){let r=n;for(let i=1;i<YB;i++)r=r-t(r)/e(r);return r}function ix(t,e){return t*Math.sqrt(1-e*e)}const XB=["duration","bounce"],ZB=["stiffness","damping","mass"];function vE(t,e){return e.some(n=>t[n]!==void 0)}function QB(t){let e={velocity:qn.velocity,stiffness:qn.stiffness,damping:qn.damping,mass:qn.mass,isResolvedFromDuration:!1,...t};if(!vE(t,ZB)&&vE(t,XB))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),i=r*r,s=2*da(.05,1,1-(t.bounce||0))*Math.sqrt(i);e={...e,mass:qn.mass,stiffness:i,damping:s}}else{const n=qB(t);e={...e,...n,mass:qn.mass},e.isResolvedFromDuration=!0}return e}function Xm(t=qn.visualDuration,e=qn.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:i}=n;const s=n.keyframes[0],o=n.keyframes[n.keyframes.length-1],a={done:!1,value:s},{stiffness:l,damping:c,mass:h,duration:f,velocity:p,isResolvedFromDuration:g}=QB({...n,velocity:-Ss(n.velocity||0)}),v=p||0,x=c/(2*Math.sqrt(l*h)),k=o-s,C=Ss(Math.sqrt(l/h)),b=Math.abs(k)<5;r||(r=b?qn.restSpeed.granular:qn.restSpeed.default),i||(i=b?qn.restDelta.granular:qn.restDelta.default);let _;if(x<1){const R=ix(C,x);_=L=>{const M=Math.exp(-x*C*L);return o-M*((v+x*C*k)/R*Math.sin(R*L)+k*Math.cos(R*L))}}else if(x===1)_=R=>o-Math.exp(-C*R)*(k+(v+C*k)*R);else{const R=C*Math.sqrt(x*x-1);_=L=>{const M=Math.exp(-x*C*L),A=Math.min(R*L,300);return o-M*((v+x*C*k)*Math.sinh(A)+R*k*Math.cosh(A))/R}}const T={calculatedDuration:g&&f||null,next:R=>{const L=_(R);if(g)a.done=R>=f;else{let M=R===0?v:0;x<1&&(M=R===0?Co(v):$L(_,R,L));const A=Math.abs(M)<=r,$=Math.abs(o-L)<=i;a.done=A&&$}return a.value=a.done?o:L,a},toString:()=>{const R=Math.min(Bb(T),Km),L=BL(M=>T.next(R*M).value,R,30);return R+"ms "+L},toTransition:()=>{}};return T}Xm.applyToOptions=t=>{const e=HB(t,100,Xm);return t.ease=e.ease,t.duration=Co(e.duration),t.type="keyframes",t};function sx({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:s=500,modifyTarget:o,min:a,max:l,restDelta:c=.5,restSpeed:h}){const f=t[0],p={done:!1,value:f},g=A=>a!==void 0&&A<a||l!==void 0&&A>l,v=A=>a===void 0?l:l===void 0||Math.abs(a-A)<Math.abs(l-A)?a:l;let x=n*e;const k=f+x,C=o===void 0?k:o(k);C!==k&&(x=C-f);const b=A=>-x*Math.exp(-A/r),_=A=>C+b(A),T=A=>{const $=b(A),j=_(A);p.done=Math.abs($)<=c,p.value=p.done?C:j};let R,L;const M=A=>{g(p.value)&&(R=A,L=Xm({keyframes:[p.value,v(p.value)],velocity:$L(_,A,p.value),damping:i,stiffness:s,restDelta:c,restSpeed:h}))};return M(0),{calculatedDuration:null,next:A=>{let $=!1;return!L&&R===void 0&&($=!0,T(A),M(A)),R!==void 0&&A>=R?L.next(A-R):(!$&&T(A),p)}}}function JB(t,e,n){const r=[],i=n||ha.mix||FL,s=t.length-1;for(let o=0;o<s;o++){let a=i(t[o],t[o+1]);if(e){const l=Array.isArray(e)?e[o]||Es:e;a=Xf(l,a)}r.push(a)}return r}function e$(t,e,{clamp:n=!0,ease:r,mixer:i}={}){const s=t.length;if(Pb(s===e.length),s===1)return()=>e[0];if(s===2&&e[0]===e[1])return()=>e[1];const o=t[0]===t[1];t[0]>t[s-1]&&(t=[...t].reverse(),e=[...e].reverse());const a=JB(e,r,i),l=a.length,c=h=>{if(o&&h<t[0])return e[0];let f=0;if(l>1)for(;f<t.length-2&&!(h<t[f+1]);f++);const p=Tf(t[f],t[f+1],h);return a[f](p)};return n?h=>c(da(t[0],t[s-1],h)):c}function t$(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const i=Tf(0,e,r);t.push(On(n,1,i))}}function n$(t){const e=[0];return t$(e,t.length-1),e}function r$(t,e){return t.map(n=>n*e)}function i$(t,e){return t.map(()=>e||TL).splice(0,t.length-1)}function Gh({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const i=gB(r)?r.map(dE):dE(r),s={done:!1,value:e[0]},o=r$(n&&n.length===e.length?n:n$(e),t),a=e$(o,e,{ease:Array.isArray(i)?i:i$(e,i)});return{calculatedDuration:t,next:l=>(s.value=a(l),s.done=l>=t,s)}}const s$=t=>t!==null;function $b(t,{repeat:e,repeatType:n="loop"},r,i=1){const s=t.filter(s$),a=i<0||e&&n!=="loop"&&e%2===1?0:s.length-1;return!a||r===void 0?s[a]:r}const o$={decay:sx,inertia:sx,tween:Gh,keyframes:Gh,spring:Xm};function zL(t){typeof t.type=="string"&&(t.type=o$[t.type])}class zb{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,n){return this.finished.then(e,n)}}const a$=t=>t/100;class Ub extends zb{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var r,i;const{motionValue:n}=this.options;n&&n.updatedAt!==Mi.now()&&this.tick(Mi.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(i=(r=this.options).onStop)==null||i.call(r))},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;zL(e);const{type:n=Gh,repeat:r=0,repeatDelay:i=0,repeatType:s,velocity:o=0}=e;let{keyframes:a}=e;const l=n||Gh;l!==Gh&&typeof a[0]!="number"&&(this.mixKeyframes=Xf(a$,FL(a[0],a[1])),a=[0,100]);const c=l({...e,keyframes:a});s==="mirror"&&(this.mirroredGenerator=l({...e,keyframes:[...a].reverse(),velocity:-o})),c.calculatedDuration===null&&(c.calculatedDuration=Bb(c));const{calculatedDuration:h}=c;this.calculatedDuration=h,this.resolvedDuration=h+i,this.totalDuration=this.resolvedDuration*(r+1)-i,this.generator=c}updateTime(e){const n=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(e,n=!1){const{generator:r,totalDuration:i,mixKeyframes:s,mirroredGenerator:o,resolvedDuration:a,calculatedDuration:l}=this;if(this.startTime===null)return r.next(0);const{delay:c=0,keyframes:h,repeat:f,repeatType:p,repeatDelay:g,type:v,onUpdate:x,finalKeyframe:k}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-i/this.speed,this.startTime)),n?this.currentTime=e:this.updateTime(e);const C=this.currentTime-c*(this.playbackSpeed>=0?1:-1),b=this.playbackSpeed>=0?C<0:C>i;this.currentTime=Math.max(C,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=i);let _=this.currentTime,T=r;if(f){const A=Math.min(this.currentTime,i)/a;let $=Math.floor(A),j=A%1;!j&&A>=1&&(j=1),j===1&&$--,$=Math.min($,f+1),!!($%2)&&(p==="reverse"?(j=1-j,g&&(j-=g/a)):p==="mirror"&&(T=o)),_=da(0,1,j)*a}const R=b?{done:!1,value:h[0]}:T.next(_);s&&(R.value=s(R.value));let{done:L}=R;!b&&l!==null&&(L=this.playbackSpeed>=0?this.currentTime>=i:this.currentTime<=0);const M=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&L);return M&&v!==sx&&(R.value=$b(h,this.options,k,this.speed)),x&&x(R.value),M&&this.finish(),R}then(e,n){return this.finished.then(e,n)}get duration(){return Ss(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+Ss(e)}get time(){return Ss(this.currentTime)}set time(e){var n;e=Co(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),(n=this.driver)==null||n.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(Mi.now());const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=Ss(this.currentTime))}play(){var i,s;if(this.isStopped)return;const{driver:e=WB,startTime:n}=this.options;this.driver||(this.driver=e(o=>this.tick(o))),(s=(i=this.options).onPlay)==null||s.call(i);const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=n??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Mi.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var e,n;this.notifyFinished(),this.teardown(),this.state="finished",(n=(e=this.options).onComplete)==null||n.call(e)}cancel(){var e,n;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(n=(e=this.options).onCancel)==null||n.call(e)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){var n;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(n=this.driver)==null||n.stop(),e.observe(this)}}function l$(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const du=t=>t*180/Math.PI,ox=t=>{const e=du(Math.atan2(t[1],t[0]));return ax(e)},u$={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:ox,rotateZ:ox,skewX:t=>du(Math.atan(t[1])),skewY:t=>du(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},ax=t=>(t=t%360,t<0&&(t+=360),t),yE=ox,wE=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),xE=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),c$={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:wE,scaleY:xE,scale:t=>(wE(t)+xE(t))/2,rotateX:t=>ax(du(Math.atan2(t[6],t[5]))),rotateY:t=>ax(du(Math.atan2(-t[2],t[0]))),rotateZ:yE,rotate:yE,skewX:t=>du(Math.atan(t[4])),skewY:t=>du(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function lx(t){return t.includes("scale")?1:0}function ux(t,e){if(!t||t==="none")return lx(e);const n=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,i;if(n)r=c$,i=n;else{const a=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=u$,i=a}if(!i)return lx(e);const s=r[e],o=i[1].split(",").map(h$);return typeof s=="function"?s(o):o[s]}const d$=(t,e)=>{const{transform:n="none"}=getComputedStyle(t);return ux(n,e)};function h$(t){return parseFloat(t.trim())}const Cd=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],kd=(()=>new Set(Cd))(),_E=t=>t===Sd||t===bt,f$=new Set(["x","y","z"]),p$=Cd.filter(t=>!f$.has(t));function g$(t){const e=[];return p$.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const mu={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>ux(e,"x"),y:(t,{transform:e})=>ux(e,"y")};mu.translateX=mu.x;mu.translateY=mu.y;const vu=new Set;let cx=!1,dx=!1,hx=!1;function UL(){if(dx){const t=Array.from(vu).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const i=g$(r);i.length&&(n.set(r,i),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const i=n.get(r);i&&i.forEach(([s,o])=>{var a;(a=r.getValue(s))==null||a.set(o)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}dx=!1,cx=!1,vu.forEach(t=>t.complete(hx)),vu.clear()}function VL(){vu.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(dx=!0)})}function m$(){hx=!0,VL(),UL(),hx=!1}class Vb{constructor(e,n,r,i,s,o=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=i,this.element=s,this.isAsync=o}scheduleResolve(){this.state="scheduled",this.isAsync?(vu.add(this),cx||(cx=!0,Rn.read(VL),Rn.resolveKeyframes(UL))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:i}=this;if(e[0]===null){const s=i==null?void 0:i.get(),o=e[e.length-1];if(s!==void 0)e[0]=s;else if(r&&n){const a=r.readValue(n,o);a!=null&&(e[0]=a)}e[0]===void 0&&(e[0]=o),i&&s===void 0&&i.set(e[0])}l$(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),vu.delete(this)}cancel(){this.state==="scheduled"&&(vu.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const v$=t=>t.startsWith("--");function y$(t,e,n){v$(e)?t.style.setProperty(e,n):t.style[e]=n}const w$=Lb(()=>window.ScrollTimeline!==void 0),x$={};function _$(t,e){const n=Lb(t);return()=>x$[e]??n()}const WL=_$(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Sh=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,bE={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Sh([0,.65,.55,1]),circOut:Sh([.55,0,1,.45]),backIn:Sh([.31,.01,.66,-.59]),backOut:Sh([.33,1.53,.69,.99])};function HL(t,e){if(t)return typeof t=="function"?WL()?BL(t,e):"ease-out":PL(t)?Sh(t):Array.isArray(t)?t.map(n=>HL(n,e)||bE.easeOut):bE[t]}function b$(t,e,n,{delay:r=0,duration:i=300,repeat:s=0,repeatType:o="loop",ease:a="easeOut",times:l}={},c=void 0){const h={[e]:n};l&&(h.offset=l);const f=HL(a,i);Array.isArray(f)&&(h.easing=f);const p={delay:r,duration:i,easing:Array.isArray(f)?"linear":f,fill:"both",iterations:s+1,direction:o==="reverse"?"alternate":"normal"};return c&&(p.pseudoElement=c),t.animate(h,p)}function GL(t){return typeof t=="function"&&"applyToOptions"in t}function S$({type:t,...e}){return GL(t)&&WL()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class C$ extends zb{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:n,name:r,keyframes:i,pseudoElement:s,allowFlatten:o=!1,finalKeyframe:a,onComplete:l}=e;this.isPseudoElement=!!s,this.allowFlatten=o,this.options=e,Pb(typeof e.type!="string");const c=S$(e);this.animation=b$(n,r,i,c,s),c.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!s){const h=$b(i,this.options,a,this.speed);this.updateMotionValue?this.updateMotionValue(h):y$(n,r,h),this.animation.cancel()}l==null||l(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var e,n;(n=(e=this.animation).finish)==null||n.call(e)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var e,n;this.isPseudoElement||(n=(e=this.animation).commitStyles)==null||n.call(e)}get duration(){var n,r;const e=((r=(n=this.animation.effect)==null?void 0:n.getComputedTiming)==null?void 0:r.call(n).duration)||0;return Ss(Number(e))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+Ss(e)}get time(){return Ss(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=Co(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:n}){var r;return this.allowFlatten&&((r=this.animation.effect)==null||r.updateTiming({easing:"linear"})),this.animation.onfinish=null,e&&w$()?(this.animation.timeline=e,Es):n(this)}}const qL={anticipate:kL,backInOut:CL,circInOut:RL};function k$(t){return t in qL}function E$(t){typeof t.ease=="string"&&k$(t.ease)&&(t.ease=qL[t.ease])}const SE=10;class R$ extends C${constructor(e){E$(e),zL(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:n,onUpdate:r,onComplete:i,element:s,...o}=this.options;if(!n)return;if(e!==void 0){n.set(e);return}const a=new Ub({...o,autoplay:!1}),l=Co(this.finishedTime??this.time);n.setWithVelocity(a.sample(l-SE).value,a.sample(l).value,SE),a.stop()}}const CE=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(wl.test(t)||t==="0")&&!t.startsWith("url("));function T$(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function P$(t,e,n,r){const i=t[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const s=t[t.length-1],o=CE(i,e),a=CE(s,e);return!o||!a?!1:T$(t)||(n==="spring"||GL(n))&&r}function fx(t){t.duration=0,t.type="keyframes"}const L$=new Set(["opacity","clipPath","filter","transform"]),M$=Lb(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function A$(t){var h;const{motionValue:e,name:n,repeatDelay:r,repeatType:i,damping:s,type:o}=t;if(!(((h=e==null?void 0:e.owner)==null?void 0:h.current)instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:c}=e.owner.getProps();return M$()&&n&&L$.has(n)&&(n!=="transform"||!c)&&!l&&!r&&i!=="mirror"&&s!==0&&o!=="inertia"}const N$=40;class j$ extends zb{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:i=0,repeatDelay:s=0,repeatType:o="loop",keyframes:a,name:l,motionValue:c,element:h,...f}){var v;super(),this.stop=()=>{var x,k;this._animation&&(this._animation.stop(),(x=this.stopTimeline)==null||x.call(this)),(k=this.keyframeResolver)==null||k.cancel()},this.createdAt=Mi.now();const p={autoplay:e,delay:n,type:r,repeat:i,repeatDelay:s,repeatType:o,name:l,motionValue:c,element:h,...f},g=(h==null?void 0:h.KeyframeResolver)||Vb;this.keyframeResolver=new g(a,(x,k,C)=>this.onKeyframesResolved(x,k,p,!C),l,c,h),(v=this.keyframeResolver)==null||v.scheduleResolve()}onKeyframesResolved(e,n,r,i){this.keyframeResolver=void 0;const{name:s,type:o,velocity:a,delay:l,isHandoff:c,onUpdate:h}=r;this.resolvedAt=Mi.now(),P$(e,s,o,a)||((ha.instantAnimations||!l)&&(h==null||h($b(e,r,n))),e[0]=e[e.length-1],fx(r),r.repeat=0);const p={startTime:i?this.resolvedAt?this.resolvedAt-this.createdAt>N$?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...r,keyframes:e},g=!c&&A$(p)?new R$({...p,element:p.motionValue.owner.current}):new Ub(p);g.finished.then(()=>this.notifyFinished()).catch(Es),this.pendingTimeline&&(this.stopTimeline=g.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=g}get finished(){return this._animation?this.animation.finished:this._finished}then(e,n){return this.finished.finally(e).then(()=>{})}get animation(){var e;return this._animation||((e=this.keyframeResolver)==null||e.resume(),m$()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var e;this._animation&&this.animation.cancel(),(e=this.keyframeResolver)==null||e.cancel()}}const I$=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function O$(t){const e=I$.exec(t);if(!e)return[,];const[,n,r,i]=e;return[`--${n??r}`,i]}function YL(t,e,n=1){const[r,i]=O$(t);if(!r)return;const s=window.getComputedStyle(e).getPropertyValue(r);if(s){const o=s.trim();return mL(o)?parseFloat(o):o}return Ib(i)?YL(i,e,n+1):i}function Wb(t,e){return(t==null?void 0:t[e])??(t==null?void 0:t.default)??t}const KL=new Set(["width","height","top","left","right","bottom",...Cd]),D$={test:t=>t==="auto",parse:t=>t},XL=t=>e=>e.test(t),ZL=[Sd,bt,ko,Wa,TB,RB,D$],kE=t=>ZL.find(XL(t));function F$(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||yL(t):!0}const B$=new Set(["brightness","contrast","saturate","opacity"]);function $$(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(Ob)||[];if(!r)return t;const i=n.replace(r,"");let s=B$.has(e)?1:0;return r!==n&&(s*=100),e+"("+s+i+")"}const z$=/\b([a-z-]*)\(.*?\)/gu,px={...wl,getAnimatableNone:t=>{const e=t.match(z$);return e?e.map($$).join(" "):t}},EE={...Sd,transform:Math.round},U$={rotate:Wa,rotateX:Wa,rotateY:Wa,rotateZ:Wa,scale:mg,scaleX:mg,scaleY:mg,scaleZ:mg,skew:Wa,skewX:Wa,skewY:Wa,distance:bt,translateX:bt,translateY:bt,translateZ:bt,x:bt,y:bt,z:bt,perspective:bt,transformPerspective:bt,opacity:Pf,originX:fE,originY:fE,originZ:bt},Hb={borderWidth:bt,borderTopWidth:bt,borderRightWidth:bt,borderBottomWidth:bt,borderLeftWidth:bt,borderRadius:bt,radius:bt,borderTopLeftRadius:bt,borderTopRightRadius:bt,borderBottomRightRadius:bt,borderBottomLeftRadius:bt,width:bt,maxWidth:bt,height:bt,maxHeight:bt,top:bt,right:bt,bottom:bt,left:bt,padding:bt,paddingTop:bt,paddingRight:bt,paddingBottom:bt,paddingLeft:bt,margin:bt,marginTop:bt,marginRight:bt,marginBottom:bt,marginLeft:bt,backgroundPositionX:bt,backgroundPositionY:bt,...U$,zIndex:EE,fillOpacity:Pf,strokeOpacity:Pf,numOctaves:EE},V$={...Hb,color:ur,backgroundColor:ur,outlineColor:ur,fill:ur,stroke:ur,borderColor:ur,borderTopColor:ur,borderRightColor:ur,borderBottomColor:ur,borderLeftColor:ur,filter:px,WebkitFilter:px},QL=t=>V$[t];function JL(t,e){let n=QL(t);return n!==px&&(n=wl),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const W$=new Set(["auto","none","0"]);function H$(t,e,n){let r=0,i;for(;r<t.length&&!i;){const s=t[r];typeof s=="string"&&!W$.has(s)&&Lf(s).values.length&&(i=t[r]),r++}if(i&&n)for(const s of e)t[s]=JL(n,i)}class G$ extends Vb{constructor(e,n,r,i,s){super(e,n,r,i,s,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let l=0;l<e.length;l++){let c=e[l];if(typeof c=="string"&&(c=c.trim(),Ib(c))){const h=YL(c,n.current);h!==void 0&&(e[l]=h),l===e.length-1&&(this.finalKeyframe=c)}}if(this.resolveNoneKeyframes(),!KL.has(r)||e.length!==2)return;const[i,s]=e,o=kE(i),a=kE(s);if(o!==a)if(_E(o)&&_E(a))for(let l=0;l<e.length;l++){const c=e[l];typeof c=="string"&&(e[l]=parseFloat(c))}else mu[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let i=0;i<e.length;i++)(e[i]===null||F$(e[i]))&&r.push(i);r.length&&H$(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=mu[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&e.getValue(r,i).jump(i,!1)}measureEndState(){var a;const{element:e,name:n,unresolvedKeyframes:r}=this;if(!e||!e.current)return;const i=e.getValue(n);i&&i.jump(this.measuredOrigin,!1);const s=r.length-1,o=r[s];r[s]=mu[n](e.measureViewportBox(),window.getComputedStyle(e.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),(a=this.removedTransforms)!=null&&a.length&&this.removedTransforms.forEach(([l,c])=>{e.getValue(l).set(c)}),this.resolveNoneKeyframes()}}function q$(t,e,n){if(t instanceof EventTarget)return[t];if(typeof t=="string"){let r=document;e&&(r=e.current);const i=(n==null?void 0:n[t])??r.querySelectorAll(t);return i?Array.from(i):[]}return Array.from(t)}const eM=(t,e)=>e&&typeof t=="number"?e.transform(t):t;function tM(t){return vL(t)&&"offsetHeight"in t}const RE=30,Y$=t=>!isNaN(parseFloat(t));class K${constructor(e,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{var s;const i=Mi.now();if(this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&((s=this.events.change)==null||s.notify(this.current),this.dependents))for(const o of this.dependents)o.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=Mi.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=Y$(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new Mb);const r=this.events[e].add(n);return e==="change"?()=>{r(),Rn.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var e;(e=this.events.change)==null||e.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Mi.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>RE)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,RE);return wL(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var e,n;(e=this.dependents)==null||e.clear(),(n=this.events.destroy)==null||n.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function ed(t,e){return new K$(t,e)}const{schedule:Gb,cancel:Ate}=LL(queueMicrotask,!1),Vs={x:!1,y:!1};function nM(){return Vs.x||Vs.y}function X$(t){return t==="x"||t==="y"?Vs[t]?null:(Vs[t]=!0,()=>{Vs[t]=!1}):Vs.x||Vs.y?null:(Vs.x=Vs.y=!0,()=>{Vs.x=Vs.y=!1})}function rM(t,e){const n=q$(t),r=new AbortController,i={passive:!0,...e,signal:r.signal};return[n,i,()=>r.abort()]}function TE(t){return!(t.pointerType==="touch"||nM())}function Z$(t,e,n={}){const[r,i,s]=rM(t,n),o=a=>{if(!TE(a))return;const{target:l}=a,c=e(l,a);if(typeof c!="function"||!l)return;const h=f=>{TE(f)&&(c(f),l.removeEventListener("pointerleave",h))};l.addEventListener("pointerleave",h,i)};return r.forEach(a=>{a.addEventListener("pointerenter",o,i)}),s}const iM=(t,e)=>e?t===e?!0:iM(t,e.parentElement):!1,qb=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,Q$=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function J$(t){return Q$.has(t.tagName)||t.tabIndex!==-1}const rm=new WeakSet;function PE(t){return e=>{e.key==="Enter"&&t(e)}}function e1(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const ez=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=PE(()=>{if(rm.has(n))return;e1(n,"down");const i=PE(()=>{e1(n,"up")}),s=()=>e1(n,"cancel");n.addEventListener("keyup",i,e),n.addEventListener("blur",s,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function LE(t){return qb(t)&&!nM()}function tz(t,e,n={}){const[r,i,s]=rM(t,n),o=a=>{const l=a.currentTarget;if(!LE(a))return;rm.add(l);const c=e(l,a),h=(g,v)=>{window.removeEventListener("pointerup",f),window.removeEventListener("pointercancel",p),rm.has(l)&&rm.delete(l),LE(g)&&typeof c=="function"&&c(g,{success:v})},f=g=>{h(g,l===window||l===document||n.useGlobalTarget||iM(l,g.target))},p=g=>{h(g,!1)};window.addEventListener("pointerup",f,i),window.addEventListener("pointercancel",p,i)};return r.forEach(a=>{(n.useGlobalTarget?window:a).addEventListener("pointerdown",o,i),tM(a)&&(a.addEventListener("focus",c=>ez(c,i)),!J$(a)&&!a.hasAttribute("tabindex")&&(a.tabIndex=0))}),s}function sM(t){return vL(t)&&"ownerSVGElement"in t}function nz(t){return sM(t)&&t.tagName==="svg"}const ai=t=>!!(t&&t.getVelocity),rz=[...ZL,ur,wl],iz=t=>rz.find(XL(t)),Yb=y.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function ME(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function sz(...t){return e=>{let n=!1;const r=t.map(i=>{const s=ME(i,e);return!n&&typeof s=="function"&&(n=!0),s});if(n)return()=>{for(let i=0;i<r.length;i++){const s=r[i];typeof s=="function"?s():ME(t[i],null)}}}}function oz(...t){return y.useCallback(sz(...t),t)}class az extends y.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=n.offsetParent,i=tM(r)&&r.offsetWidth||0,s=this.props.sizeRef.current;s.height=n.offsetHeight||0,s.width=n.offsetWidth||0,s.top=n.offsetTop,s.left=n.offsetLeft,s.right=i-s.width-s.left}return null}componentDidUpdate(){}render(){return this.props.children}}function lz({children:t,isPresent:e,anchorX:n,root:r}){const i=y.useId(),s=y.useRef(null),o=y.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:a}=y.useContext(Yb),l=oz(s,t==null?void 0:t.ref);return y.useInsertionEffect(()=>{const{width:c,height:h,top:f,left:p,right:g}=o.current;if(e||!s.current||!c||!h)return;const v=n==="left"?`left: ${p}`:`right: ${g}`;s.current.dataset.motionPopId=i;const x=document.createElement("style");a&&(x.nonce=a);const k=r??document.head;return k.appendChild(x),x.sheet&&x.sheet.insertRule(`
          [data-motion-pop-id="${i}"] {
            position: absolute !important;
            width: ${c}px !important;
            height: ${h}px !important;
            ${v}px !important;
            top: ${f}px !important;
          }
        `),()=>{k.contains(x)&&k.removeChild(x)}},[e]),w.jsx(az,{isPresent:e,childRef:s,sizeRef:o,children:y.cloneElement(t,{ref:l})})}const uz=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:i,presenceAffectsLayout:s,mode:o,anchorX:a,root:l})=>{const c=kb(cz),h=y.useId();let f=!0,p=y.useMemo(()=>(f=!1,{id:h,initial:e,isPresent:n,custom:i,onExitComplete:g=>{c.set(g,!0);for(const v of c.values())if(!v)return;r&&r()},register:g=>(c.set(g,!1),()=>c.delete(g))}),[n,c,r]);return s&&f&&(p={...p}),y.useMemo(()=>{c.forEach((g,v)=>c.set(v,!1))},[n]),y.useEffect(()=>{!n&&!c.size&&r&&r()},[n]),o==="popLayout"&&(t=w.jsx(lz,{isPresent:n,anchorX:a,root:l,children:t})),w.jsx($0.Provider,{value:p,children:t})};function cz(){return new Map}function oM(t=!0){const e=y.useContext($0);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:i}=e,s=y.useId();y.useEffect(()=>{if(t)return i(s)},[t]);const o=y.useCallback(()=>t&&r&&r(s),[s,r,t]);return!n&&r?[!1,o]:[!0]}const vg=t=>t.key||"";function AE(t){const e=[];return y.Children.forEach(t,n=>{y.isValidElement(n)&&e.push(n)}),e}const aM=({children:t,custom:e,initial:n=!0,onExitComplete:r,presenceAffectsLayout:i=!0,mode:s="sync",propagate:o=!1,anchorX:a="left",root:l})=>{const[c,h]=oM(o),f=y.useMemo(()=>AE(t),[t]),p=o&&!c?[]:f.map(vg),g=y.useRef(!0),v=y.useRef(f),x=kb(()=>new Map),[k,C]=y.useState(f),[b,_]=y.useState(f);gL(()=>{g.current=!1,v.current=f;for(let L=0;L<b.length;L++){const M=vg(b[L]);p.includes(M)?x.delete(M):x.get(M)!==!0&&x.set(M,!1)}},[b,p.length,p.join("-")]);const T=[];if(f!==k){let L=[...f];for(let M=0;M<b.length;M++){const A=b[M],$=vg(A);p.includes($)||(L.splice(M,0,A),T.push(A))}return s==="wait"&&T.length&&(L=T),_(AE(L)),C(f),null}const{forceRender:R}=y.useContext(Cb);return w.jsx(w.Fragment,{children:b.map(L=>{const M=vg(L),A=o&&!c?!1:f===b||p.includes(M),$=()=>{if(x.has(M))x.set(M,!0);else return;let j=!0;x.forEach(V=>{V||(j=!1)}),j&&(R==null||R(),_(v.current),o&&(h==null||h()),r&&r())};return w.jsx(uz,{isPresent:A,initial:!g.current||n?void 0:!1,custom:e,presenceAffectsLayout:i,mode:s,root:l,onExitComplete:A?void 0:$,anchorX:a,children:L},M)})})},lM=y.createContext({strict:!1}),NE={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},td={};for(const t in NE)td[t]={isEnabled:e=>NE[t].some(n=>!!e[n])};function dz(t){for(const e in t)td[e]={...td[e],...t[e]}}const hz=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Zm(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||hz.has(t)}let uM=t=>!Zm(t);function fz(t){typeof t=="function"&&(uM=e=>e.startsWith("on")?!Zm(e):t(e))}try{fz(require("@emotion/is-prop-valid").default)}catch{}function pz(t,e,n){const r={};for(const i in t)i==="values"&&typeof t.values=="object"||(uM(i)||n===!0&&Zm(i)||!e&&!Zm(i)||t.draggable&&i.startsWith("onDrag"))&&(r[i]=t[i]);return r}const z0=y.createContext({});function U0(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function Mf(t){return typeof t=="string"||Array.isArray(t)}const Kb=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Xb=["initial",...Kb];function V0(t){return U0(t.animate)||Xb.some(e=>Mf(t[e]))}function cM(t){return!!(V0(t)||t.variants)}function gz(t,e){if(V0(t)){const{initial:n,animate:r}=t;return{initial:n===!1||Mf(n)?n:void 0,animate:Mf(r)?r:void 0}}return t.inherit!==!1?e:{}}function mz(t){const{initial:e,animate:n}=gz(t,y.useContext(z0));return y.useMemo(()=>({initial:e,animate:n}),[jE(e),jE(n)])}function jE(t){return Array.isArray(t)?t.join(" "):t}const Af={};function vz(t){for(const e in t)Af[e]=t[e],jb(e)&&(Af[e].isCSSVariable=!0)}function dM(t,{layout:e,layoutId:n}){return kd.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!Af[t]||t==="opacity")}const yz={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},wz=Cd.length;function xz(t,e,n){let r="",i=!0;for(let s=0;s<wz;s++){const o=Cd[s],a=t[o];if(a===void 0)continue;let l=!0;if(typeof a=="number"?l=a===(o.startsWith("scale")?1:0):l=parseFloat(a)===0,!l||n){const c=eM(a,Hb[o]);if(!l){i=!1;const h=yz[o]||o;r+=`${h}(${c}) `}n&&(e[o]=c)}}return r=r.trim(),n?r=n(e,i?"":r):i&&(r="none"),r}function Zb(t,e,n){const{style:r,vars:i,transformOrigin:s}=t;let o=!1,a=!1;for(const l in e){const c=e[l];if(kd.has(l)){o=!0;continue}else if(jb(l)){i[l]=c;continue}else{const h=eM(c,Hb[l]);l.startsWith("origin")?(a=!0,s[l]=h):r[l]=h}}if(e.transform||(o||n?r.transform=xz(e,t.transform,n):r.transform&&(r.transform="none")),a){const{originX:l="50%",originY:c="50%",originZ:h=0}=s;r.transformOrigin=`${l} ${c} ${h}`}}const Qb=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function hM(t,e,n){for(const r in e)!ai(e[r])&&!dM(r,n)&&(t[r]=e[r])}function _z({transformTemplate:t},e){return y.useMemo(()=>{const n=Qb();return Zb(n,e,t),Object.assign({},n.vars,n.style)},[e])}function bz(t,e){const n=t.style||{},r={};return hM(r,n,t),Object.assign(r,_z(t,e)),r}function Sz(t,e){const n={},r=bz(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}const Cz={offset:"stroke-dashoffset",array:"stroke-dasharray"},kz={offset:"strokeDashoffset",array:"strokeDasharray"};function Ez(t,e,n=1,r=0,i=!0){t.pathLength=1;const s=i?Cz:kz;t[s.offset]=bt.transform(-r);const o=bt.transform(e),a=bt.transform(n);t[s.array]=`${o} ${a}`}function fM(t,{attrX:e,attrY:n,attrScale:r,pathLength:i,pathSpacing:s=1,pathOffset:o=0,...a},l,c,h){if(Zb(t,a,c),l){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:f,style:p}=t;f.transform&&(p.transform=f.transform,delete f.transform),(p.transform||f.transformOrigin)&&(p.transformOrigin=f.transformOrigin??"50% 50%",delete f.transformOrigin),p.transform&&(p.transformBox=(h==null?void 0:h.transformBox)??"fill-box",delete f.transformBox),e!==void 0&&(f.x=e),n!==void 0&&(f.y=n),r!==void 0&&(f.scale=r),i!==void 0&&Ez(f,i,s,o,!1)}const pM=()=>({...Qb(),attrs:{}}),gM=t=>typeof t=="string"&&t.toLowerCase()==="svg";function Rz(t,e,n,r){const i=y.useMemo(()=>{const s=pM();return fM(s,e,gM(r),t.transformTemplate,t.style),{...s.attrs,style:{...s.style}}},[e]);if(t.style){const s={};hM(s,t.style,t),i.style={...s,...i.style}}return i}const Tz=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Jb(t){return typeof t!="string"||t.includes("-")?!1:!!(Tz.indexOf(t)>-1||/[A-Z]/u.test(t))}function Pz(t,e,n,{latestValues:r},i,s=!1){const a=(Jb(t)?Rz:Sz)(e,r,i,t),l=pz(e,typeof t=="string",s),c=t!==y.Fragment?{...l,...a,ref:n}:{},{children:h}=e,f=y.useMemo(()=>ai(h)?h.get():h,[h]);return y.createElement(t,{...c,children:f})}function IE(t){const e=[{},{}];return t==null||t.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function eS(t,e,n,r){if(typeof e=="function"){const[i,s]=IE(r);e=e(n!==void 0?n:t.custom,i,s)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[i,s]=IE(r);e=e(n!==void 0?n:t.custom,i,s)}return e}function im(t){return ai(t)?t.get():t}function Lz({scrapeMotionValuesFromProps:t,createRenderState:e},n,r,i){return{latestValues:Mz(n,r,i,t),renderState:e()}}function Mz(t,e,n,r){const i={},s=r(t,{});for(const p in s)i[p]=im(s[p]);let{initial:o,animate:a}=t;const l=V0(t),c=cM(t);e&&c&&!l&&t.inherit!==!1&&(o===void 0&&(o=e.initial),a===void 0&&(a=e.animate));let h=n?n.initial===!1:!1;h=h||o===!1;const f=h?a:o;if(f&&typeof f!="boolean"&&!U0(f)){const p=Array.isArray(f)?f:[f];for(let g=0;g<p.length;g++){const v=eS(t,p[g]);if(v){const{transitionEnd:x,transition:k,...C}=v;for(const b in C){let _=C[b];if(Array.isArray(_)){const T=h?_.length-1:0;_=_[T]}_!==null&&(i[b]=_)}for(const b in x)i[b]=x[b]}}}return i}const mM=t=>(e,n)=>{const r=y.useContext(z0),i=y.useContext($0),s=()=>Lz(t,e,r,i);return n?s():kb(s)};function tS(t,e,n){var s;const{style:r}=t,i={};for(const o in r)(ai(r[o])||e.style&&ai(e.style[o])||dM(o,t)||((s=n==null?void 0:n.getValue(o))==null?void 0:s.liveStyle)!==void 0)&&(i[o]=r[o]);return i}const Az=mM({scrapeMotionValuesFromProps:tS,createRenderState:Qb});function vM(t,e,n){const r=tS(t,e,n);for(const i in t)if(ai(t[i])||ai(e[i])){const s=Cd.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[s]=t[i]}return r}const Nz=mM({scrapeMotionValuesFromProps:vM,createRenderState:pM}),jz=Symbol.for("motionComponentSymbol");function kc(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function Iz(t,e,n){return y.useCallback(r=>{r&&t.onMount&&t.onMount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):kc(n)&&(n.current=r))},[e])}const nS=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),Oz="framerAppearId",yM="data-"+nS(Oz),wM=y.createContext({});function Dz(t,e,n,r,i){var x,k;const{visualElement:s}=y.useContext(z0),o=y.useContext(lM),a=y.useContext($0),l=y.useContext(Yb).reducedMotion,c=y.useRef(null);r=r||o.renderer,!c.current&&r&&(c.current=r(t,{visualState:e,parent:s,props:n,presenceContext:a,blockInitialAnimation:a?a.initial===!1:!1,reducedMotionConfig:l}));const h=c.current,f=y.useContext(wM);h&&!h.projection&&i&&(h.type==="html"||h.type==="svg")&&Fz(c.current,n,i,f);const p=y.useRef(!1);y.useInsertionEffect(()=>{h&&p.current&&h.update(n,a)});const g=n[yM],v=y.useRef(!!g&&!((x=window.MotionHandoffIsComplete)!=null&&x.call(window,g))&&((k=window.MotionHasOptimisedAnimation)==null?void 0:k.call(window,g)));return gL(()=>{h&&(p.current=!0,window.MotionIsMounted=!0,h.updateFeatures(),h.scheduleRenderMicrotask(),v.current&&h.animationState&&h.animationState.animateChanges())}),y.useEffect(()=>{h&&(!v.current&&h.animationState&&h.animationState.animateChanges(),v.current&&(queueMicrotask(()=>{var C;(C=window.MotionHandoffMarkAsComplete)==null||C.call(window,g)}),v.current=!1),h.enteringChildren=void 0)}),h}function Fz(t,e,n,r){const{layoutId:i,layout:s,drag:o,dragConstraints:a,layoutScroll:l,layoutRoot:c,layoutCrossfade:h}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:xM(t.parent)),t.projection.setOptions({layoutId:i,layout:s,alwaysMeasureLayout:!!o||a&&kc(a),visualElement:t,animationType:typeof s=="string"?s:"both",initialPromotionConfig:r,crossfade:h,layoutScroll:l,layoutRoot:c})}function xM(t){if(t)return t.options.allowProjection!==!1?t.projection:xM(t.parent)}function t1(t,{forwardMotionProps:e=!1}={},n,r){n&&dz(n);const i=Jb(t)?Nz:Az;function s(a,l){let c;const h={...y.useContext(Yb),...a,layoutId:Bz(a)},{isStatic:f}=h,p=mz(a),g=i(a,f);if(!f&&Eb){$z();const v=zz(h);c=v.MeasureLayout,p.visualElement=Dz(t,g,h,r,v.ProjectionNode)}return w.jsxs(z0.Provider,{value:p,children:[c&&p.visualElement?w.jsx(c,{visualElement:p.visualElement,...h}):null,Pz(t,a,Iz(g,p.visualElement,l),g,f,e)]})}s.displayName=`motion.${typeof t=="string"?t:`create(${t.displayName??t.name??""})`}`;const o=y.forwardRef(s);return o[jz]=t,o}function Bz({layoutId:t}){const e=y.useContext(Cb).id;return e&&t!==void 0?e+"-"+t:t}function $z(t,e){y.useContext(lM).strict}function zz(t){const{drag:e,layout:n}=td;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(t)||n!=null&&n.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}function Uz(t,e){if(typeof Proxy>"u")return t1;const n=new Map,r=(s,o)=>t1(s,o,t,e),i=(s,o)=>r(s,o);return new Proxy(i,{get:(s,o)=>o==="create"?r:(n.has(o)||n.set(o,t1(o,void 0,t,e)),n.get(o))})}function _M({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function Vz({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function Wz(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function n1(t){return t===void 0||t===1}function gx({scale:t,scaleX:e,scaleY:n}){return!n1(t)||!n1(e)||!n1(n)}function tu(t){return gx(t)||bM(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function bM(t){return OE(t.x)||OE(t.y)}function OE(t){return t&&t!=="0%"}function Qm(t,e,n){const r=t-n,i=e*r;return n+i}function DE(t,e,n,r,i){return i!==void 0&&(t=Qm(t,i,r)),Qm(t,n,r)+e}function mx(t,e=0,n=1,r,i){t.min=DE(t.min,e,n,r,i),t.max=DE(t.max,e,n,r,i)}function SM(t,{x:e,y:n}){mx(t.x,e.translate,e.scale,e.originPoint),mx(t.y,n.translate,n.scale,n.originPoint)}const FE=.999999999999,BE=1.0000000000001;function Hz(t,e,n,r=!1){const i=n.length;if(!i)return;e.x=e.y=1;let s,o;for(let a=0;a<i;a++){s=n[a],o=s.projectionDelta;const{visualElement:l}=s.options;l&&l.props.style&&l.props.style.display==="contents"||(r&&s.options.layoutScroll&&s.scroll&&s!==s.root&&Rc(t,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,SM(t,o)),r&&tu(s.latestValues)&&Rc(t,s.latestValues))}e.x<BE&&e.x>FE&&(e.x=1),e.y<BE&&e.y>FE&&(e.y=1)}function Ec(t,e){t.min=t.min+e,t.max=t.max+e}function $E(t,e,n,r,i=.5){const s=On(t.min,t.max,i);mx(t,e,n,s,r)}function Rc(t,e){$E(t.x,e.x,e.scaleX,e.scale,e.originX),$E(t.y,e.y,e.scaleY,e.scale,e.originY)}function CM(t,e){return _M(Wz(t.getBoundingClientRect(),e))}function Gz(t,e,n){const r=CM(t,n),{scroll:i}=e;return i&&(Ec(r.x,i.offset.x),Ec(r.y,i.offset.y)),r}const zE=()=>({translate:0,scale:1,origin:0,originPoint:0}),Tc=()=>({x:zE(),y:zE()}),UE=()=>({min:0,max:0}),tr=()=>({x:UE(),y:UE()}),vx={current:null},kM={current:!1};function qz(){if(kM.current=!0,!!Eb)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>vx.current=t.matches;t.addEventListener("change",e),e()}else vx.current=!1}const Yz=new WeakMap;function Kz(t,e,n){for(const r in e){const i=e[r],s=n[r];if(ai(i))t.addValue(r,i);else if(ai(s))t.addValue(r,ed(i,{owner:t}));else if(s!==i)if(t.hasValue(r)){const o=t.getValue(r);o.liveStyle===!0?o.jump(i):o.hasAnimated||o.set(i)}else{const o=t.getStaticValue(r);t.addValue(r,ed(o!==void 0?o:i,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const VE=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class Xz{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:s,visualState:o},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Vb,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const p=Mi.now();this.renderScheduledAt<p&&(this.renderScheduledAt=p,Rn.render(this.render,!1,!0))};const{latestValues:l,renderState:c}=o;this.latestValues=l,this.baseTarget={...l},this.initialValues=n.initial?{...l}:{},this.renderState=c,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=a,this.blockInitialAnimation=!!s,this.isControllingVariants=V0(n),this.isVariantNode=cM(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:h,...f}=this.scrapeMotionValuesFromProps(n,{},this);for(const p in f){const g=f[p];l[p]!==void 0&&ai(g)&&g.set(l[p])}}mount(e){var n;this.current=e,Yz.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,i)=>this.bindToMotionValue(i,r)),kM.current||qz(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:vx.current,(n=this.parent)==null||n.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var e;this.projection&&this.projection.unmount(),yl(this.notifyUpdate),yl(this.render),this.valueSubscriptions.forEach(n=>n()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(e=this.parent)==null||e.removeChild(this);for(const n in this.events)this.events[n].clear();for(const n in this.features){const r=this.features[n];r&&(r.unmount(),r.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=kd.has(e);r&&this.onBindTransform&&this.onBindTransform();const i=n.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&Rn.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let s;window.MotionCheckAppearSync&&(s=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{i(),s&&s(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in td){const n=td[e];if(!n)continue;const{isEnabled:r,Feature:i}=n;if(!this.features[e]&&i&&r(this.props)&&(this.features[e]=new i(this)),this.features[e]){const s=this.features[e];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):tr()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<VE.length;r++){const i=VE[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const s="on"+i,o=e[s];o&&(this.propEventSubscriptions[i]=this.on(i,o))}this.prevMotionValues=Kz(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=ed(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(mL(r)||yL(r))?r=parseFloat(r):!iz(r)&&wl.test(n)&&(r=JL(e,n)),this.setBaseTarget(e,ai(r)?r.get():r)),ai(r)?r.get():r}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var s;const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const o=eS(this.props,n,(s=this.presenceContext)==null?void 0:s.custom);o&&(r=o[e])}if(n&&r!==void 0)return r;const i=this.getBaseTargetFromProps(this.props,e);return i!==void 0&&!ai(i)?i:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new Mb),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}scheduleRenderMicrotask(){Gb.render(this.render)}}class EM extends Xz{constructor(){super(...arguments),this.KeyframeResolver=G$}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;ai(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function RM(t,{style:e,vars:n},r,i){const s=t.style;let o;for(o in e)s[o]=e[o];i==null||i.applyProjectionStyles(s,r);for(o in n)s.setProperty(o,n[o])}function Zz(t){return window.getComputedStyle(t)}class Qz extends EM{constructor(){super(...arguments),this.type="html",this.renderInstance=RM}readValueFromInstance(e,n){var r;if(kd.has(n))return(r=this.projection)!=null&&r.isProjecting?lx(n):d$(e,n);{const i=Zz(e),s=(jb(n)?i.getPropertyValue(n):i[n])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(e,{transformPagePoint:n}){return CM(e,n)}build(e,n,r){Zb(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return tS(e,n,r)}}const TM=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function Jz(t,e,n,r){RM(t,e,void 0,r);for(const i in e.attrs)t.setAttribute(TM.has(i)?i:nS(i),e.attrs[i])}class eU extends EM{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=tr}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(kd.has(n)){const r=QL(n);return r&&r.default||0}return n=TM.has(n)?n:nS(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return vM(e,n,r)}build(e,n,r){fM(e,n,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(e,n,r,i){Jz(e,n,r,i)}mount(e){this.isSVGTag=gM(e.tagName),super.mount(e)}}const tU=(t,e)=>Jb(t)?new eU(e):new Qz(e,{allowProjection:t!==y.Fragment});function Bc(t,e,n){const r=t.getProps();return eS(r,e,n!==void 0?n:r.custom,t)}const yx=t=>Array.isArray(t);function nU(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,ed(n))}function rU(t){return yx(t)?t[t.length-1]||0:t}function iU(t,e){const n=Bc(t,e);let{transitionEnd:r={},transition:i={},...s}=n||{};s={...s,...r};for(const o in s){const a=rU(s[o]);nU(t,o,a)}}function sU(t){return!!(ai(t)&&t.add)}function wx(t,e){const n=t.getValue("willChange");if(sU(n))return n.add(e);if(!n&&ha.WillChange){const r=new ha.WillChange("auto");t.addValue("willChange",r),r.add(e)}}function PM(t){return t.props[yM]}const oU=t=>t!==null;function aU(t,{repeat:e,repeatType:n="loop"},r){const i=t.filter(oU),s=e&&n!=="loop"&&e%2===1?0:i.length-1;return!s||r===void 0?i[s]:r}const lU={type:"spring",stiffness:500,damping:25,restSpeed:10},uU=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),cU={type:"keyframes",duration:.8},dU={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},hU=(t,{keyframes:e})=>e.length>2?cU:kd.has(t)?t.startsWith("scale")?uU(e[1]):lU:dU;function fU({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:s,repeatType:o,repeatDelay:a,from:l,elapsed:c,...h}){return!!Object.keys(h).length}const rS=(t,e,n,r={},i,s)=>o=>{const a=Wb(r,t)||{},l=a.delay||r.delay||0;let{elapsed:c=0}=r;c=c-Co(l);const h={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...a,delay:-c,onUpdate:p=>{e.set(p),a.onUpdate&&a.onUpdate(p)},onComplete:()=>{o(),a.onComplete&&a.onComplete()},name:t,motionValue:e,element:s?void 0:i};fU(a)||Object.assign(h,hU(t,h)),h.duration&&(h.duration=Co(h.duration)),h.repeatDelay&&(h.repeatDelay=Co(h.repeatDelay)),h.from!==void 0&&(h.keyframes[0]=h.from);let f=!1;if((h.type===!1||h.duration===0&&!h.repeatDelay)&&(fx(h),h.delay===0&&(f=!0)),(ha.instantAnimations||ha.skipAnimations)&&(f=!0,fx(h),h.delay=0),h.allowFlatten=!a.type&&!a.ease,f&&!s&&e.get()!==void 0){const p=aU(h.keyframes,a);if(p!==void 0){Rn.update(()=>{h.onUpdate(p),h.onComplete()});return}}return a.isSync?new Ub(h):new j$(h)};function pU({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function LM(t,e,{delay:n=0,transitionOverride:r,type:i}={}){let{transition:s=t.getDefaultTransition(),transitionEnd:o,...a}=e;r&&(s=r);const l=[],c=i&&t.animationState&&t.animationState.getState()[i];for(const h in a){const f=t.getValue(h,t.latestValues[h]??null),p=a[h];if(p===void 0||c&&pU(c,h))continue;const g={delay:n,...Wb(s||{},h)},v=f.get();if(v!==void 0&&!f.isAnimating&&!Array.isArray(p)&&p===v&&!g.velocity)continue;let x=!1;if(window.MotionHandoffAnimation){const C=PM(t);if(C){const b=window.MotionHandoffAnimation(C,h,Rn);b!==null&&(g.startTime=b,x=!0)}}wx(t,h),f.start(rS(h,f,p,t.shouldReduceMotion&&KL.has(h)?{type:!1}:g,t,x));const k=f.animation;k&&l.push(k)}return o&&Promise.all(l).then(()=>{Rn.update(()=>{o&&iU(t,o)})}),l}function MM(t,e,n,r=0,i=1){const s=Array.from(t).sort((c,h)=>c.sortNodePosition(h)).indexOf(e),o=t.size,a=(o-1)*r;return typeof n=="function"?n(s,o):i===1?s*r:a-s*r}function xx(t,e,n={}){var l;const r=Bc(t,e,n.type==="exit"?(l=t.presenceContext)==null?void 0:l.custom:void 0);let{transition:i=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(i=n.transitionOverride);const s=r?()=>Promise.all(LM(t,r,n)):()=>Promise.resolve(),o=t.variantChildren&&t.variantChildren.size?(c=0)=>{const{delayChildren:h=0,staggerChildren:f,staggerDirection:p}=i;return gU(t,e,c,h,f,p,n)}:()=>Promise.resolve(),{when:a}=i;if(a){const[c,h]=a==="beforeChildren"?[s,o]:[o,s];return c().then(()=>h())}else return Promise.all([s(),o(n.delay)])}function gU(t,e,n=0,r=0,i=0,s=1,o){const a=[];for(const l of t.variantChildren)l.notify("AnimationStart",e),a.push(xx(l,e,{...o,delay:n+(typeof r=="function"?0:r)+MM(t.variantChildren,l,r,i,s)}).then(()=>l.notify("AnimationComplete",e)));return Promise.all(a)}function mU(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(s=>xx(t,s,n));r=Promise.all(i)}else if(typeof e=="string")r=xx(t,e,n);else{const i=typeof e=="function"?Bc(t,e,n.custom):e;r=Promise.all(LM(t,i,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}function AM(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}const vU=Xb.length;function NM(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?NM(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<vU;n++){const r=Xb[n],i=t.props[r];(Mf(i)||i===!1)&&(e[r]=i)}return e}const yU=[...Kb].reverse(),wU=Kb.length;function xU(t){return e=>Promise.all(e.map(({animation:n,options:r})=>mU(t,n,r)))}function _U(t){let e=xU(t),n=WE(),r=!0;const i=l=>(c,h)=>{var p;const f=Bc(t,h,l==="exit"?(p=t.presenceContext)==null?void 0:p.custom:void 0);if(f){const{transition:g,transitionEnd:v,...x}=f;c={...c,...x,...v}}return c};function s(l){e=l(t)}function o(l){const{props:c}=t,h=NM(t.parent)||{},f=[],p=new Set;let g={},v=1/0;for(let k=0;k<wU;k++){const C=yU[k],b=n[C],_=c[C]!==void 0?c[C]:h[C],T=Mf(_),R=C===l?b.isActive:null;R===!1&&(v=k);let L=_===h[C]&&_!==c[C]&&T;if(L&&r&&t.manuallyAnimateOnMount&&(L=!1),b.protectedKeys={...g},!b.isActive&&R===null||!_&&!b.prevProp||U0(_)||typeof _=="boolean")continue;const M=bU(b.prevProp,_);let A=M||C===l&&b.isActive&&!L&&T||k>v&&T,$=!1;const j=Array.isArray(_)?_:[_];let V=j.reduce(i(C),{});R===!1&&(V={});const{prevResolvedValues:U={}}=b,B={...U,...V},Z=te=>{A=!0,p.has(te)&&($=!0,p.delete(te)),b.needsAnimating[te]=!0;const O=t.getValue(te);O&&(O.liveStyle=!1)};for(const te in B){const O=V[te],K=U[te];if(g.hasOwnProperty(te))continue;let Y=!1;yx(O)&&yx(K)?Y=!AM(O,K):Y=O!==K,Y?O!=null?Z(te):p.add(te):O!==void 0&&p.has(te)?Z(te):b.protectedKeys[te]=!0}b.prevProp=_,b.prevResolvedValues=V,b.isActive&&(g={...g,...V}),r&&t.blockInitialAnimation&&(A=!1);const q=L&&M;A&&(!q||$)&&f.push(...j.map(te=>{const O={type:C};if(typeof te=="string"&&r&&!q&&t.manuallyAnimateOnMount&&t.parent){const{parent:K}=t,Y=Bc(K,te);if(K.enteringChildren&&Y){const{delayChildren:xe}=Y.transition||{};O.delay=MM(K.enteringChildren,t,xe)}}return{animation:te,options:O}}))}if(p.size){const k={};if(typeof c.initial!="boolean"){const C=Bc(t,Array.isArray(c.initial)?c.initial[0]:c.initial);C&&C.transition&&(k.transition=C.transition)}p.forEach(C=>{const b=t.getBaseTarget(C),_=t.getValue(C);_&&(_.liveStyle=!0),k[C]=b??null}),f.push({animation:k})}let x=!!f.length;return r&&(c.initial===!1||c.initial===c.animate)&&!t.manuallyAnimateOnMount&&(x=!1),r=!1,x?e(f):Promise.resolve()}function a(l,c){var f;if(n[l].isActive===c)return Promise.resolve();(f=t.variantChildren)==null||f.forEach(p=>{var g;return(g=p.animationState)==null?void 0:g.setActive(l,c)}),n[l].isActive=c;const h=o(l);for(const p in n)n[p].protectedKeys={};return h}return{animateChanges:o,setActive:a,setAnimateFunction:s,getState:()=>n,reset:()=>{n=WE()}}}function bU(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!AM(e,t):!1}function Zl(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function WE(){return{animate:Zl(!0),whileInView:Zl(),whileHover:Zl(),whileTap:Zl(),whileDrag:Zl(),whileFocus:Zl(),exit:Zl()}}class kl{constructor(e){this.isMounted=!1,this.node=e}update(){}}class SU extends kl{constructor(e){super(e),e.animationState||(e.animationState=_U(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();U0(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)==null||e.call(this)}}let CU=0;class kU extends kl{constructor(){super(...arguments),this.id=CU++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const i=this.node.animationState.setActive("exit",!e);n&&!e&&i.then(()=>{n(this.id)})}mount(){const{register:e,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const EU={animation:{Feature:SU},exit:{Feature:kU}};function Nf(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}function Jf(t){return{point:{x:t.pageX,y:t.pageY}}}const RU=t=>e=>qb(e)&&t(e,Jf(e));function qh(t,e,n,r){return Nf(t,e,RU(n),r)}const jM=1e-4,TU=1-jM,PU=1+jM,IM=.01,LU=0-IM,MU=0+IM;function vi(t){return t.max-t.min}function AU(t,e,n){return Math.abs(t-e)<=n}function HE(t,e,n,r=.5){t.origin=r,t.originPoint=On(e.min,e.max,t.origin),t.scale=vi(n)/vi(e),t.translate=On(n.min,n.max,t.origin)-t.originPoint,(t.scale>=TU&&t.scale<=PU||isNaN(t.scale))&&(t.scale=1),(t.translate>=LU&&t.translate<=MU||isNaN(t.translate))&&(t.translate=0)}function Yh(t,e,n,r){HE(t.x,e.x,n.x,r?r.originX:void 0),HE(t.y,e.y,n.y,r?r.originY:void 0)}function GE(t,e,n){t.min=n.min+e.min,t.max=t.min+vi(e)}function NU(t,e,n){GE(t.x,e.x,n.x),GE(t.y,e.y,n.y)}function qE(t,e,n){t.min=e.min-n.min,t.max=t.min+vi(e)}function Kh(t,e,n){qE(t.x,e.x,n.x),qE(t.y,e.y,n.y)}function ps(t){return[t("x"),t("y")]}const OM=({current:t})=>t?t.ownerDocument.defaultView:null,YE=(t,e)=>Math.abs(t-e);function jU(t,e){const n=YE(t.x,e.x),r=YE(t.y,e.y);return Math.sqrt(n**2+r**2)}class DM{constructor(e,n,{transformPagePoint:r,contextWindow:i=window,dragSnapToOrigin:s=!1,distanceThreshold:o=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const p=i1(this.lastMoveEventInfo,this.history),g=this.startEvent!==null,v=jU(p.offset,{x:0,y:0})>=this.distanceThreshold;if(!g&&!v)return;const{point:x}=p,{timestamp:k}=Ur;this.history.push({...x,timestamp:k});const{onStart:C,onMove:b}=this.handlers;g||(C&&C(this.lastMoveEvent,p),this.startEvent=this.lastMoveEvent),b&&b(this.lastMoveEvent,p)},this.handlePointerMove=(p,g)=>{this.lastMoveEvent=p,this.lastMoveEventInfo=r1(g,this.transformPagePoint),Rn.update(this.updatePoint,!0)},this.handlePointerUp=(p,g)=>{this.end();const{onEnd:v,onSessionEnd:x,resumeAnimation:k}=this.handlers;if(this.dragSnapToOrigin&&k&&k(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const C=i1(p.type==="pointercancel"?this.lastMoveEventInfo:r1(g,this.transformPagePoint),this.history);this.startEvent&&v&&v(p,C),x&&x(p,C)},!qb(e))return;this.dragSnapToOrigin=s,this.handlers=n,this.transformPagePoint=r,this.distanceThreshold=o,this.contextWindow=i||window;const a=Jf(e),l=r1(a,this.transformPagePoint),{point:c}=l,{timestamp:h}=Ur;this.history=[{...c,timestamp:h}];const{onSessionStart:f}=n;f&&f(e,i1(l,this.history)),this.removeListeners=Xf(qh(this.contextWindow,"pointermove",this.handlePointerMove),qh(this.contextWindow,"pointerup",this.handlePointerUp),qh(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),yl(this.updatePoint)}}function r1(t,e){return e?{point:e(t.point)}:t}function KE(t,e){return{x:t.x-e.x,y:t.y-e.y}}function i1({point:t},e){return{point:t,delta:KE(t,FM(e)),offset:KE(t,IU(e)),velocity:OU(e,.1)}}function IU(t){return t[0]}function FM(t){return t[t.length-1]}function OU(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const i=FM(t);for(;n>=0&&(r=t[n],!(i.timestamp-r.timestamp>Co(e)));)n--;if(!r)return{x:0,y:0};const s=Ss(i.timestamp-r.timestamp);if(s===0)return{x:0,y:0};const o={x:(i.x-r.x)/s,y:(i.y-r.y)/s};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function DU(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?On(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?On(n,t,r.max):Math.min(t,n)),t}function XE(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function FU(t,{top:e,left:n,bottom:r,right:i}){return{x:XE(t.x,n,i),y:XE(t.y,e,r)}}function ZE(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function BU(t,e){return{x:ZE(t.x,e.x),y:ZE(t.y,e.y)}}function $U(t,e){let n=.5;const r=vi(t),i=vi(e);return i>r?n=Tf(e.min,e.max-r,t.min):r>i&&(n=Tf(t.min,t.max-i,e.min)),da(0,1,n)}function zU(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const _x=.35;function UU(t=_x){return t===!1?t=0:t===!0&&(t=_x),{x:QE(t,"left","right"),y:QE(t,"top","bottom")}}function QE(t,e,n){return{min:JE(t,e),max:JE(t,n)}}function JE(t,e){return typeof t=="number"?t:t[e]||0}const VU=new WeakMap;class WU{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=tr(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:n=!1,distanceThreshold:r}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const s=f=>{const{dragSnapToOrigin:p}=this.getProps();p?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Jf(f).point)},o=(f,p)=>{const{drag:g,dragPropagation:v,onDragStart:x}=this.getProps();if(g&&!v&&(this.openDragLock&&this.openDragLock(),this.openDragLock=X$(g),!this.openDragLock))return;this.latestPointerEvent=f,this.latestPanInfo=p,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),ps(C=>{let b=this.getAxisMotionValue(C).get()||0;if(ko.test(b)){const{projection:_}=this.visualElement;if(_&&_.layout){const T=_.layout.layoutBox[C];T&&(b=vi(T)*(parseFloat(b)/100))}}this.originPoint[C]=b}),x&&Rn.postRender(()=>x(f,p)),wx(this.visualElement,"transform");const{animationState:k}=this.visualElement;k&&k.setActive("whileDrag",!0)},a=(f,p)=>{this.latestPointerEvent=f,this.latestPanInfo=p;const{dragPropagation:g,dragDirectionLock:v,onDirectionLock:x,onDrag:k}=this.getProps();if(!g&&!this.openDragLock)return;const{offset:C}=p;if(v&&this.currentDirection===null){this.currentDirection=HU(C),this.currentDirection!==null&&x&&x(this.currentDirection);return}this.updateAxis("x",p.point,C),this.updateAxis("y",p.point,C),this.visualElement.render(),k&&k(f,p)},l=(f,p)=>{this.latestPointerEvent=f,this.latestPanInfo=p,this.stop(f,p),this.latestPointerEvent=null,this.latestPanInfo=null},c=()=>ps(f=>{var p;return this.getAnimationState(f)==="paused"&&((p=this.getAxisMotionValue(f).animation)==null?void 0:p.play())}),{dragSnapToOrigin:h}=this.getProps();this.panSession=new DM(e,{onSessionStart:s,onStart:o,onMove:a,onSessionEnd:l,resumeAnimation:c},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:h,distanceThreshold:r,contextWindow:OM(this.visualElement)})}stop(e,n){const r=e||this.latestPointerEvent,i=n||this.latestPanInfo,s=this.isDragging;if(this.cancel(),!s||!i||!r)return;const{velocity:o}=i;this.startAnimation(o);const{onDragEnd:a}=this.getProps();a&&Rn.postRender(()=>a(r,i))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:i}=this.getProps();if(!r||!yg(e,i,this.currentDirection))return;const s=this.getAxisMotionValue(e);let o=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(o=DU(o,this.constraints[e],this.elastic[e])),s.set(o)}resolveConstraints(){var s;const{dragConstraints:e,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(s=this.visualElement.projection)==null?void 0:s.layout,i=this.constraints;e&&kc(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=FU(r.layoutBox,e):this.constraints=!1,this.elastic=UU(n),i!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&ps(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=zU(r.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!kc(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const s=Gz(r,i.root,this.visualElement.getTransformPagePoint());let o=BU(i.layout.layoutBox,s);if(n){const a=n(Vz(o));this.hasMutatedConstraints=!!a,a&&(o=_M(a))}return o}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:s,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},c=ps(h=>{if(!yg(h,n,this.currentDirection))return;let f=l&&l[h]||{};o&&(f={min:0,max:0});const p=i?200:1e6,g=i?40:1e7,v={type:"inertia",velocity:r?e[h]:0,bounceStiffness:p,bounceDamping:g,timeConstant:750,restDelta:1,restSpeed:10,...s,...f};return this.startAxisValueAnimation(h,v)});return Promise.all(c).then(a)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return wx(this.visualElement,e),r.start(rS(e,r,0,n,this.visualElement,!1))}stopAnimation(){ps(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){ps(e=>{var n;return(n=this.getAxisMotionValue(e).animation)==null?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)==null?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){ps(n=>{const{drag:r}=this.getProps();if(!yg(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,s=this.getAxisMotionValue(n);if(i&&i.layout){const{min:o,max:a}=i.layout.layoutBox[n];s.set(e[n]-On(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!kc(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};ps(o=>{const a=this.getAxisMotionValue(o);if(a&&this.constraints!==!1){const l=a.get();i[o]=$U({min:l,max:l},this.constraints[o])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),ps(o=>{if(!yg(o,e,null))return;const a=this.getAxisMotionValue(o),{min:l,max:c}=this.constraints[o];a.set(On(l,c,i[o]))})}addListeners(){if(!this.visualElement.current)return;VU.set(this.visualElement,this);const e=this.visualElement.current,n=qh(e,"pointerdown",l=>{const{drag:c,dragListener:h=!0}=this.getProps();c&&h&&this.start(l)}),r=()=>{const{dragConstraints:l}=this.getProps();kc(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,s=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),Rn.read(r);const o=Nf(window,"resize",()=>this.scalePositionWithinConstraints()),a=i.addEventListener("didUpdate",({delta:l,hasLayoutChanged:c})=>{this.isDragging&&c&&(ps(h=>{const f=this.getAxisMotionValue(h);f&&(this.originPoint[h]+=l[h].translate,f.set(f.get()+l[h].translate))}),this.visualElement.render())});return()=>{o(),n(),s(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:s=!1,dragElastic:o=_x,dragMomentum:a=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:s,dragElastic:o,dragMomentum:a}}}function yg(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function HU(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class GU extends kl{constructor(e){super(e),this.removeGroupControls=Es,this.removeListeners=Es,this.controls=new WU(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Es}unmount(){this.removeGroupControls(),this.removeListeners()}}const eR=t=>(e,n)=>{t&&Rn.postRender(()=>t(e,n))};class qU extends kl{constructor(){super(...arguments),this.removePointerDownListener=Es}onPointerDown(e){this.session=new DM(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:OM(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:eR(e),onStart:eR(n),onMove:r,onEnd:(s,o)=>{delete this.session,i&&Rn.postRender(()=>i(s,o))}}}mount(){this.removePointerDownListener=qh(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const sm={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function tR(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const lh={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(bt.test(t))t=parseFloat(t);else return t;const n=tR(t,e.target.x),r=tR(t,e.target.y);return`${n}% ${r}%`}},YU={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,i=wl.parse(t);if(i.length>5)return r;const s=wl.createTransformer(t),o=typeof i[0]!="number"?1:0,a=n.x.scale*e.x,l=n.y.scale*e.y;i[0+o]/=a,i[1+o]/=l;const c=On(a,l,.5);return typeof i[2+o]=="number"&&(i[2+o]/=c),typeof i[3+o]=="number"&&(i[3+o]/=c),s(i)}};let s1=!1;class KU extends y.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:s}=e;vz(XU),s&&(n.group&&n.group.add(s),r&&r.register&&i&&r.register(s),s1&&s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),sm.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:i,isPresent:s}=this.props,{projection:o}=r;return o&&(o.isPresent=s,s1=!0,i||e.layoutDependency!==n||n===void 0||e.isPresent!==s?o.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?o.promote():o.relegate()||Rn.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),Gb.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=e;s1=!0,i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function BM(t){const[e,n]=oM(),r=y.useContext(Cb);return w.jsx(KU,{...t,layoutGroup:r,switchLayoutGroup:y.useContext(wM),isPresent:e,safeToRemove:n})}const XU={borderRadius:{...lh,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:lh,borderTopRightRadius:lh,borderBottomLeftRadius:lh,borderBottomRightRadius:lh,boxShadow:YU};function ZU(t,e,n){const r=ai(t)?t:ed(t);return r.start(rS("",r,e,n)),r.animation}const QU=(t,e)=>t.depth-e.depth;class JU{constructor(){this.children=[],this.isDirty=!1}add(e){Rb(this.children,e),this.isDirty=!0}remove(e){Tb(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(QU),this.isDirty=!1,this.children.forEach(e)}}function eV(t,e){const n=Mi.now(),r=({timestamp:i})=>{const s=i-n;s>=e&&(yl(r),t(s-e))};return Rn.setup(r,!0),()=>yl(r)}const $M=["TopLeft","TopRight","BottomLeft","BottomRight"],tV=$M.length,nR=t=>typeof t=="string"?parseFloat(t):t,rR=t=>typeof t=="number"||bt.test(t);function nV(t,e,n,r,i,s){i?(t.opacity=On(0,n.opacity??1,rV(r)),t.opacityExit=On(e.opacity??1,0,iV(r))):s&&(t.opacity=On(e.opacity??1,n.opacity??1,r));for(let o=0;o<tV;o++){const a=`border${$M[o]}Radius`;let l=iR(e,a),c=iR(n,a);if(l===void 0&&c===void 0)continue;l||(l=0),c||(c=0),l===0||c===0||rR(l)===rR(c)?(t[a]=Math.max(On(nR(l),nR(c),r),0),(ko.test(c)||ko.test(l))&&(t[a]+="%")):t[a]=c}(e.rotate||n.rotate)&&(t.rotate=On(e.rotate||0,n.rotate||0,r))}function iR(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const rV=zM(0,.5,EL),iV=zM(.5,.95,Es);function zM(t,e,n){return r=>r<t?0:r>e?1:n(Tf(t,e,r))}function sR(t,e){t.min=e.min,t.max=e.max}function fs(t,e){sR(t.x,e.x),sR(t.y,e.y)}function oR(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function aR(t,e,n,r,i){return t-=e,t=Qm(t,1/n,r),i!==void 0&&(t=Qm(t,1/i,r)),t}function sV(t,e=0,n=1,r=.5,i,s=t,o=t){if(ko.test(e)&&(e=parseFloat(e),e=On(o.min,o.max,e/100)-o.min),typeof e!="number")return;let a=On(s.min,s.max,r);t===s&&(a-=e),t.min=aR(t.min,e,n,a,i),t.max=aR(t.max,e,n,a,i)}function lR(t,e,[n,r,i],s,o){sV(t,e[n],e[r],e[i],e.scale,s,o)}const oV=["x","scaleX","originX"],aV=["y","scaleY","originY"];function uR(t,e,n,r){lR(t.x,e,oV,n?n.x:void 0,r?r.x:void 0),lR(t.y,e,aV,n?n.y:void 0,r?r.y:void 0)}function cR(t){return t.translate===0&&t.scale===1}function UM(t){return cR(t.x)&&cR(t.y)}function dR(t,e){return t.min===e.min&&t.max===e.max}function lV(t,e){return dR(t.x,e.x)&&dR(t.y,e.y)}function hR(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function VM(t,e){return hR(t.x,e.x)&&hR(t.y,e.y)}function fR(t){return vi(t.x)/vi(t.y)}function pR(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class uV{constructor(){this.members=[]}add(e){Rb(this.members,e),e.scheduleRender()}remove(e){if(Tb(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(i=>e===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const s=this.members[i];if(s.isPresent!==!1){r=s;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function cV(t,e,n){let r="";const i=t.x.translate/e.x,s=t.y.translate/e.y,o=(n==null?void 0:n.z)||0;if((i||s||o)&&(r=`translate3d(${i}px, ${s}px, ${o}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:c,rotate:h,rotateX:f,rotateY:p,skewX:g,skewY:v}=n;c&&(r=`perspective(${c}px) ${r}`),h&&(r+=`rotate(${h}deg) `),f&&(r+=`rotateX(${f}deg) `),p&&(r+=`rotateY(${p}deg) `),g&&(r+=`skewX(${g}deg) `),v&&(r+=`skewY(${v}deg) `)}const a=t.x.scale*e.x,l=t.y.scale*e.y;return(a!==1||l!==1)&&(r+=`scale(${a}, ${l})`),r||"none"}const o1=["","X","Y","Z"],dV=1e3;let hV=0;function a1(t,e,n,r){const{latestValues:i}=e;i[t]&&(n[t]=i[t],e.setStaticValue(t,0),r&&(r[t]=0))}function WM(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=PM(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:i,layoutId:s}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",Rn,!(i||s))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&WM(r)}function HM({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(o={},a=e==null?void 0:e()){this.id=hV++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(gV),this.nodes.forEach(wV),this.nodes.forEach(xV),this.nodes.forEach(mV)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new JU)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new Mb),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const l=this.eventHandlers.get(o);l&&l.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o){if(this.instance)return;this.isSVG=sM(o)&&!nz(o),this.instance=o;const{layoutId:a,layout:l,visualElement:c}=this.options;if(c&&!c.current&&c.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(l||a)&&(this.isLayoutDirty=!0),t){let h,f=0;const p=()=>this.root.updateBlockedByResize=!1;Rn.read(()=>{f=window.innerWidth}),t(o,()=>{const g=window.innerWidth;g!==f&&(f=g,this.root.updateBlockedByResize=!0,h&&h(),h=eV(p,250),sm.hasAnimatedSinceResize&&(sm.hasAnimatedSinceResize=!1,this.nodes.forEach(vR)))})}a&&this.root.registerSharedNode(a,this),this.options.animate!==!1&&c&&(a||l)&&this.addEventListener("didUpdate",({delta:h,hasLayoutChanged:f,hasRelativeLayoutChanged:p,layout:g})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const v=this.options.transition||c.getDefaultTransition()||kV,{onLayoutAnimationStart:x,onLayoutAnimationComplete:k}=c.getProps(),C=!this.targetLayout||!VM(this.targetLayout,g),b=!f&&p;if(this.options.layoutRoot||this.resumeFrom||b||f&&(C||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const _={...Wb(v,"layout"),onPlay:x,onComplete:k};(c.shouldReduceMotion||this.options.layoutRoot)&&(_.delay=0,_.type=!1),this.startAnimation(_),this.setAnimationOrigin(h,b)}else f||vR(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=g})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),yl(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(_V),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&WM(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let h=0;h<this.path.length;h++){const f=this.path[h];f.shouldResetTransform=!0,f.updateScroll("snapshot"),f.options.layoutRoot&&f.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const c=this.getTransformTemplate();this.prevTransformTemplateValue=c?c(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(gR);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(mR);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(yV),this.nodes.forEach(fV),this.nodes.forEach(pV)):this.nodes.forEach(mR),this.clearAllSnapshots();const a=Mi.now();Ur.delta=da(0,1e3/60,a-Ur.timestamp),Ur.timestamp=a,Ur.isProcessing=!0,Ky.update.process(Ur),Ky.preRender.process(Ur),Ky.render.process(Ur),Ur.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Gb.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(vV),this.sharedNodes.forEach(bV)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Rn.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Rn.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!vi(this.snapshot.measuredBox.x)&&!vi(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=tr(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a&&this.instance){const l=r(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:l,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!i)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,a=this.projectionDelta&&!UM(this.projectionDelta),l=this.getTransformTemplate(),c=l?l(this.latestValues,""):void 0,h=c!==this.prevTransformTemplateValue;o&&this.instance&&(a||tu(this.latestValues)||h)&&(i(this.instance,c),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return o&&(l=this.removeTransform(l)),EV(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var c;const{visualElement:o}=this.options;if(!o)return tr();const a=o.measureViewportBox();if(!(((c=this.scroll)==null?void 0:c.wasRoot)||this.path.some(RV))){const{scroll:h}=this.root;h&&(Ec(a.x,h.offset.x),Ec(a.y,h.offset.y))}return a}removeElementScroll(o){var l;const a=tr();if(fs(a,o),(l=this.scroll)!=null&&l.wasRoot)return a;for(let c=0;c<this.path.length;c++){const h=this.path[c],{scroll:f,options:p}=h;h!==this.root&&f&&p.layoutScroll&&(f.wasRoot&&fs(a,o),Ec(a.x,f.offset.x),Ec(a.y,f.offset.y))}return a}applyTransform(o,a=!1){const l=tr();fs(l,o);for(let c=0;c<this.path.length;c++){const h=this.path[c];!a&&h.options.layoutScroll&&h.scroll&&h!==h.root&&Rc(l,{x:-h.scroll.offset.x,y:-h.scroll.offset.y}),tu(h.latestValues)&&Rc(l,h.latestValues)}return tu(this.latestValues)&&Rc(l,this.latestValues),l}removeTransform(o){const a=tr();fs(a,o);for(let l=0;l<this.path.length;l++){const c=this.path[l];if(!c.instance||!tu(c.latestValues))continue;gx(c.latestValues)&&c.updateSnapshot();const h=tr(),f=c.measurePageBox();fs(h,f),uR(a,c.latestValues,c.snapshot?c.snapshot.layoutBox:void 0,h)}return tu(this.latestValues)&&uR(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Ur.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var p;const a=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=a.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=a.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=a.isSharedProjectionDirty);const l=!!this.resumingFrom||this!==a;if(!(o||l&&this.isSharedProjectionDirty||this.isProjectionDirty||(p=this.parent)!=null&&p.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:h,layoutId:f}=this.options;if(!(!this.layout||!(h||f))){if(this.resolvedRelativeTargetAt=Ur.timestamp,!this.targetDelta&&!this.relativeTarget){const g=this.getClosestProjectingParent();g&&g.layout&&this.animationProgress!==1?(this.relativeParent=g,this.forceRelativeParentToResolveTarget(),this.relativeTarget=tr(),this.relativeTargetOrigin=tr(),Kh(this.relativeTargetOrigin,this.layout.layoutBox,g.layout.layoutBox),fs(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=tr(),this.targetWithTransforms=tr()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),NU(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):fs(this.target,this.layout.layoutBox),SM(this.target,this.targetDelta)):fs(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const g=this.getClosestProjectingParent();g&&!!g.resumingFrom==!!this.resumingFrom&&!g.options.layoutScroll&&g.target&&this.animationProgress!==1?(this.relativeParent=g,this.forceRelativeParentToResolveTarget(),this.relativeTarget=tr(),this.relativeTargetOrigin=tr(),Kh(this.relativeTargetOrigin,this.target,g.target),fs(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||gx(this.parent.latestValues)||bM(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var v;const o=this.getLead(),a=!!this.resumingFrom||this!==o;let l=!0;if((this.isProjectionDirty||(v=this.parent)!=null&&v.isProjectionDirty)&&(l=!1),a&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(l=!1),this.resolvedRelativeTargetAt===Ur.timestamp&&(l=!1),l)return;const{layout:c,layoutId:h}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(c||h))return;fs(this.layoutCorrected,this.layout.layoutBox);const f=this.treeScale.x,p=this.treeScale.y;Hz(this.layoutCorrected,this.treeScale,this.path,a),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=tr());const{target:g}=o;if(!g){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(oR(this.prevProjectionDelta.x,this.projectionDelta.x),oR(this.prevProjectionDelta.y,this.projectionDelta.y)),Yh(this.projectionDelta,this.layoutCorrected,g,this.latestValues),(this.treeScale.x!==f||this.treeScale.y!==p||!pR(this.projectionDelta.x,this.prevProjectionDelta.x)||!pR(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",g))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var a;if((a=this.options.visualElement)==null||a.scheduleRender(),o){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Tc(),this.projectionDelta=Tc(),this.projectionDeltaWithTransform=Tc()}setAnimationOrigin(o,a=!1){const l=this.snapshot,c=l?l.latestValues:{},h={...this.latestValues},f=Tc();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const p=tr(),g=l?l.source:void 0,v=this.layout?this.layout.source:void 0,x=g!==v,k=this.getStack(),C=!k||k.members.length<=1,b=!!(x&&!C&&this.options.crossfade===!0&&!this.path.some(CV));this.animationProgress=0;let _;this.mixTargetDelta=T=>{const R=T/1e3;yR(f.x,o.x,R),yR(f.y,o.y,R),this.setTargetDelta(f),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Kh(p,this.layout.layoutBox,this.relativeParent.layout.layoutBox),SV(this.relativeTarget,this.relativeTargetOrigin,p,R),_&&lV(this.relativeTarget,_)&&(this.isProjectionDirty=!1),_||(_=tr()),fs(_,this.relativeTarget)),x&&(this.animationValues=h,nV(h,c,this.latestValues,R,b,C)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=R},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){var a,l,c;this.notifyListeners("animationStart"),(a=this.currentAnimation)==null||a.stop(),(c=(l=this.resumingFrom)==null?void 0:l.currentAnimation)==null||c.stop(),this.pendingAnimation&&(yl(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Rn.update(()=>{sm.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=ed(0)),this.currentAnimation=ZU(this.motionValue,[0,1e3],{...o,velocity:0,isSync:!0,onUpdate:h=>{this.mixTargetDelta(h),o.onUpdate&&o.onUpdate(h)},onStop:()=>{},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(dV),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:l,layout:c,latestValues:h}=o;if(!(!a||!l||!c)){if(this!==o&&this.layout&&c&&GM(this.options.animationType,this.layout.layoutBox,c.layoutBox)){l=this.target||tr();const f=vi(this.layout.layoutBox.x);l.x.min=o.target.x.min,l.x.max=l.x.min+f;const p=vi(this.layout.layoutBox.y);l.y.min=o.target.y.min,l.y.max=l.y.min+p}fs(a,l),Rc(a,h),Yh(this.projectionDeltaWithTransform,this.layoutCorrected,a,h)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new uV),this.sharedNodes.get(o).add(a);const c=a.options.initialPromotionConfig;a.promote({transition:c?c.transition:void 0,preserveFollowOpacity:c&&c.shouldPreserveFollowOpacity?c.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var a;const{layoutId:o}=this.options;return o?((a=this.getStack())==null?void 0:a.lead)||this:this}getPrevLead(){var a;const{layoutId:o}=this.options;return o?(a=this.getStack())==null?void 0:a.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:l}={}){const c=this.getStack();c&&c.promote(this,l),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:l}=o;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(a=!0),!a)return;const c={};l.z&&a1("z",o,c,this.animationValues);for(let h=0;h<o1.length;h++)a1(`rotate${o1[h]}`,o,c,this.animationValues),a1(`skew${o1[h]}`,o,c,this.animationValues);o.render();for(const h in c)o.setStaticValue(h,c[h]),this.animationValues&&(this.animationValues[h]=c[h]);o.scheduleRender()}applyProjectionStyles(o,a){if(!this.instance||this.isSVG)return;if(!this.isVisible){o.visibility="hidden";return}const l=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,o.visibility="",o.opacity="",o.pointerEvents=im(a==null?void 0:a.pointerEvents)||"",o.transform=l?l(this.latestValues,""):"none";return}const c=this.getLead();if(!this.projectionDelta||!this.layout||!c.target){this.options.layoutId&&(o.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,o.pointerEvents=im(a==null?void 0:a.pointerEvents)||""),this.hasProjected&&!tu(this.latestValues)&&(o.transform=l?l({},""):"none",this.hasProjected=!1);return}o.visibility="";const h=c.animationValues||c.latestValues;this.applyTransformsToTarget();let f=cV(this.projectionDeltaWithTransform,this.treeScale,h);l&&(f=l(h,f)),o.transform=f;const{x:p,y:g}=this.projectionDelta;o.transformOrigin=`${p.origin*100}% ${g.origin*100}% 0`,c.animationValues?o.opacity=c===this?h.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:h.opacityExit:o.opacity=c===this?h.opacity!==void 0?h.opacity:"":h.opacityExit!==void 0?h.opacityExit:0;for(const v in Af){if(h[v]===void 0)continue;const{correct:x,applyTo:k,isCSSVariable:C}=Af[v],b=f==="none"?h[v]:x(h[v],c);if(k){const _=k.length;for(let T=0;T<_;T++)o[k[T]]=b}else C?this.options.visualElement.renderState.vars[v]=b:o[v]=b}this.options.layoutId&&(o.pointerEvents=c===this?im(a==null?void 0:a.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)==null?void 0:a.stop()}),this.root.nodes.forEach(gR),this.root.sharedNodes.clear()}}}function fV(t){t.updateLayout()}function pV(t){var n;const e=((n=t.resumeFrom)==null?void 0:n.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=t.layout,{animationType:s}=t.options,o=e.source!==t.layout.source;s==="size"?ps(f=>{const p=o?e.measuredBox[f]:e.layoutBox[f],g=vi(p);p.min=r[f].min,p.max=p.min+g}):GM(s,e.layoutBox,r)&&ps(f=>{const p=o?e.measuredBox[f]:e.layoutBox[f],g=vi(r[f]);p.max=p.min+g,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[f].max=t.relativeTarget[f].min+g)});const a=Tc();Yh(a,r,e.layoutBox);const l=Tc();o?Yh(l,t.applyTransform(i,!0),e.measuredBox):Yh(l,r,e.layoutBox);const c=!UM(a);let h=!1;if(!t.resumeFrom){const f=t.getClosestProjectingParent();if(f&&!f.resumeFrom){const{snapshot:p,layout:g}=f;if(p&&g){const v=tr();Kh(v,e.layoutBox,p.layoutBox);const x=tr();Kh(x,r,g.layoutBox),VM(v,x)||(h=!0),f.options.layoutRoot&&(t.relativeTarget=x,t.relativeTargetOrigin=v,t.relativeParent=f)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:e,delta:l,layoutDelta:a,hasLayoutChanged:c,hasRelativeLayoutChanged:h})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function gV(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function mV(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function vV(t){t.clearSnapshot()}function gR(t){t.clearMeasurements()}function mR(t){t.isLayoutDirty=!1}function yV(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function vR(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function wV(t){t.resolveTargetDelta()}function xV(t){t.calcProjection()}function _V(t){t.resetSkewAndRotation()}function bV(t){t.removeLeadSnapshot()}function yR(t,e,n){t.translate=On(e.translate,0,n),t.scale=On(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function wR(t,e,n,r){t.min=On(e.min,n.min,r),t.max=On(e.max,n.max,r)}function SV(t,e,n,r){wR(t.x,e.x,n.x,r),wR(t.y,e.y,n.y,r)}function CV(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const kV={duration:.45,ease:[.4,0,.1,1]},xR=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),_R=xR("applewebkit/")&&!xR("chrome/")?Math.round:Es;function bR(t){t.min=_R(t.min),t.max=_R(t.max)}function EV(t){bR(t.x),bR(t.y)}function GM(t,e,n){return t==="position"||t==="preserve-aspect"&&!AU(fR(e),fR(n),.2)}function RV(t){var e;return t!==t.root&&((e=t.scroll)==null?void 0:e.wasRoot)}const TV=HM({attachResizeListener:(t,e)=>Nf(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),l1={current:void 0},qM=HM({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!l1.current){const t=new TV({});t.mount(window),t.setOptions({layoutScroll:!0}),l1.current=t}return l1.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),PV={pan:{Feature:qU},drag:{Feature:GU,ProjectionNode:qM,MeasureLayout:BM}};function SR(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const i="onHover"+n,s=r[i];s&&Rn.postRender(()=>s(e,Jf(e)))}class LV extends kl{mount(){const{current:e}=this.node;e&&(this.unmount=Z$(e,(n,r)=>(SR(this.node,r,"Start"),i=>SR(this.node,i,"End"))))}unmount(){}}class MV extends kl{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Xf(Nf(this.node.current,"focus",()=>this.onFocus()),Nf(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function CR(t,e,n){const{props:r}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const i="onTap"+(n==="End"?"":n),s=r[i];s&&Rn.postRender(()=>s(e,Jf(e)))}class AV extends kl{mount(){const{current:e}=this.node;e&&(this.unmount=tz(e,(n,r)=>(CR(this.node,r,"Start"),(i,{success:s})=>CR(this.node,i,s?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const bx=new WeakMap,u1=new WeakMap,NV=t=>{const e=bx.get(t.target);e&&e(t)},jV=t=>{t.forEach(NV)};function IV({root:t,...e}){const n=t||document;u1.has(n)||u1.set(n,{});const r=u1.get(n),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(jV,{root:t,...e})),r[i]}function OV(t,e,n){const r=IV(e);return bx.set(t,n),r.observe(t),()=>{bx.delete(t),r.unobserve(t)}}const DV={some:0,all:1};class FV extends kl{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:s}=e,o={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:DV[i]},a=l=>{const{isIntersecting:c}=l;if(this.isInView===c||(this.isInView=c,s&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:h,onViewportLeave:f}=this.node.getProps(),p=c?h:f;p&&p(l)};return OV(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(BV(e,n))&&this.startObserver()}unmount(){}}function BV({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const $V={inView:{Feature:FV},tap:{Feature:AV},focus:{Feature:MV},hover:{Feature:LV}},zV={layout:{ProjectionNode:qM,MeasureLayout:BM}},UV={...EU,...$V,...PV,...zV},ep=Uz(UV,tU);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VV=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),WV=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,r)=>r?r.toUpperCase():n.toLowerCase()),kR=t=>{const e=WV(t);return e.charAt(0).toUpperCase()+e.slice(1)},YM=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim(),HV=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var GV={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qV=y.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:s,iconNode:o,...a},l)=>y.createElement("svg",{ref:l,...GV,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:YM("lucide",i),...!s&&!HV(a)&&{"aria-hidden":"true"},...a},[...o.map(([c,h])=>y.createElement(c,h)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ga=(t,e)=>{const n=y.forwardRef(({className:r,...i},s)=>y.createElement(qV,{ref:s,iconNode:e,className:YM(`lucide-${VV(kR(t))}`,`lucide-${t}`,r),...i}));return n.displayName=kR(t),n};/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YV=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],KV=ga("copy",YV);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XV=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],ZV=ga("eye-off",XV);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QV=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],JV=ga("eye",QV);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eW=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],tW=ga("layers",eW);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nW=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],rW=ga("menu",nW);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iW=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],KM=ga("pen-line",iW);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sW=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],oW=ga("plus",sW);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aW=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],XM=ga("trash-2",aW);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lW=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],uW=ga("x",lW);const ZM=y.createContext(void 0),iS=()=>{const t=y.useContext(ZM);if(!t)throw new Error("useSidebar must be used within a SidebarProvider");return t},cW=({children:t,open:e,setOpen:n,animate:r=!0})=>{const[i,s]=y.useState(!1),o=e!==void 0?e:i,a=n!==void 0?n:s;return w.jsx(ZM.Provider,{value:{open:o,setOpen:a,animate:r},children:t})},dW=({children:t,open:e,setOpen:n,animate:r})=>w.jsx(cW,{open:e,setOpen:n,animate:r,children:t}),hW=t=>w.jsxs(w.Fragment,{children:[w.jsx(fW,{...t}),w.jsx(pW,{...t})]}),fW=({className:t,children:e,...n})=>{const{open:r,animate:i}=iS();return w.jsx(ep.div,{className:qm("h-screen px-4 py-4 hidden md:flex md:flex-col sidebar-container w-[250px] flex-shrink-0 sticky top-0",t),animate:{width:i?r?"250px":"72px":"250px"},transition:{duration:.35,ease:"easeInOut"},...n,children:e})},pW=({className:t,children:e,...n})=>{const{open:r,setOpen:i}=iS();return w.jsx(w.Fragment,{children:w.jsxs("div",{className:qm("h-10 px-4 py-4 flex flex-row md:hidden items-center justify-between sidebar-container w-full"),...n,children:[w.jsx("div",{className:"flex justify-end z-20 w-full",children:w.jsx(rW,{className:"sidebar-icon cursor-pointer",onClick:()=>i(!r)})}),w.jsx(aM,{children:r&&w.jsxs(ep.div,{initial:{x:"-100%",opacity:0},animate:{x:0,opacity:1},exit:{x:"-100%",opacity:0},transition:{duration:.3,ease:"easeInOut"},className:qm("fixed h-full w-full inset-0 sidebar-container p-10 z-[100] flex flex-col justify-between",t),children:[w.jsx("div",{className:"absolute right-10 top-10 z-50 sidebar-icon cursor-pointer",onClick:()=>i(!r),children:w.jsx(uW,{})}),e]})})]})})},gW=({link:t,className:e,...n})=>{const{open:r,animate:i}=iS();return w.jsxs(hb,{to:t.href,className:qm("flex items-center justify-start gap-2 group/sidebar px-0 py-2.5",e),...n,children:[t.icon,w.jsx(ep.span,{animate:{display:i?r?"inline-block":"none":"inline-block",opacity:i?r?1:0:1},transition:{duration:.2,ease:"easeInOut"},className:"sidebar-text text-sm group-hover/sidebar:translate-x-1 transition duration-150 whitespace-pre inline-block !p-0 !m-0",children:t.label})]})},QM=y.createContext(void 0);function JM(t){return[...(t||"").split(`
`).map(n=>n.trim()).filter(Boolean),"","",""].slice(0,3)}function mW(t,e){y.useEffect(()=>{if(!t)return;const n=Ct.channel("profile-context-updates").on("postgres_changes",{event:"*",schema:"public",table:"profiles",filter:`id=eq.${t}`},r=>{const i=r.new;e({displayName:i.display_name,bio:i.bio,website:i.website,socialAccounts:i.social_accounts?JM(i.social_accounts):void 0,avatarUrl:i.avatar_url,timezoneEnabled:typeof i.timezone_enabled=="boolean"?i.timezone_enabled:void 0,timezoneValue:i.timezone_value})});return()=>{n.unsubscribe()}},[e,t])}function vW({children:t}){const{user:e}=Ii(),[n,r]=y.useState(null),[i,s]=y.useState(""),[o,a]=y.useState(!0),l=y.useRef(null),c=y.useCallback(async()=>{if(!(e!=null&&e.id)){r(null),s(""),a(!1),l.current=null;return}l.current===null&&a(!0);try{const{data:g}=await Ct.from("profiles").select("display_name, bio, website, social_accounts, avatar_url, timezone_enabled, timezone_value").eq("id",e.id).single(),v={displayName:(g==null?void 0:g.display_name)??"",bio:(g==null?void 0:g.bio)??"",website:(g==null?void 0:g.website)??"",socialAccounts:JM(g==null?void 0:g.social_accounts),avatarUrl:(g==null?void 0:g.avatar_url)??"",timezoneEnabled:(g==null?void 0:g.timezone_enabled)??!1,timezoneValue:(g==null?void 0:g.timezone_value)??"",emailFallback:e.email??""};l.current=v,r(v)}finally{a(!1)}},[e]);y.useEffect(()=>{c()},[c]),y.useEffect(()=>{if(!(n!=null&&n.avatarUrl)){s("");return}let p=!0;return(async()=>{const{data:v,error:x}=await Ct.storage.from("avatars").createSignedUrl(n.avatarUrl,604800);if(p&&(v!=null&&v.signedUrl)&&!x){s(v.signedUrl);return}const{data:k}=Ct.storage.from("avatars").getPublicUrl(n.avatarUrl);p&&s(k.publicUrl??"")})(),()=>{p=!1}},[n==null?void 0:n.avatarUrl]);const h=y.useCallback(p=>{r(g=>{const v={displayName:p.displayName??(g==null?void 0:g.displayName)??"",bio:p.bio??(g==null?void 0:g.bio)??"",website:p.website??(g==null?void 0:g.website)??"",socialAccounts:p.socialAccounts??(g==null?void 0:g.socialAccounts)??["","",""],avatarUrl:p.avatarUrl??(g==null?void 0:g.avatarUrl)??"",timezoneEnabled:p.timezoneEnabled??(g==null?void 0:g.timezoneEnabled)??!1,timezoneValue:p.timezoneValue??(g==null?void 0:g.timezoneValue)??"",emailFallback:(g==null?void 0:g.emailFallback)??(e==null?void 0:e.email)??""};return l.current=v,v})},[e==null?void 0:e.email]);mW((e==null?void 0:e.id)??null,h);const f=y.useMemo(()=>({profile:n,avatarUrl:i,isLoading:o,refreshProfile:c}),[i,o,n,c]);return w.jsx(QM.Provider,{value:f,children:t})}function eA(){const t=y.useContext(QM);if(!t)throw new Error("useProfile must be used within a ProfileProvider");return t}function yW({workspaces:t,profileMenuItems:e,activeWorkspaceId:n,onSelectWorkspace:r}){const[i,s]=y.useState(()=>{const L=localStorage.getItem("sidebar-expanded");return L!==null?JSON.parse(L):!0}),[o,a]=y.useState(!1),l=y.useRef(null),c=y.useRef(null),h=no(),{signOut:f,user:p}=Ii(),{profile:g,avatarUrl:v,isLoading:x}=eA();y.useEffect(()=>{localStorage.setItem("sidebar-expanded",JSON.stringify(i))},[i]),y.useEffect(()=>{const L=M=>{var U,B,Z;const A=M.target,$=(U=l.current)==null?void 0:U.contains(A),j=(B=c.current)==null?void 0:B.contains(A),V=A;console.log("Click outside check:",{clickedInsideTrigger:$,clickedInsideDropdown:j,target:A,targetTagName:V.tagName,targetParent:V.parentElement,targetParentParent:(Z=V.parentElement)==null?void 0:Z.parentElement,dropdownRef:c.current,manualCheck:c.current&&V&&c.current.contains(V)}),!$&&!j&&(console.log("Closing profile menu"),a(!1))};return o&&document.addEventListener("mousedown",L),()=>{document.removeEventListener("mousedown",L)}},[o]);const k=y.useMemo(()=>(g==null?void 0:g.displayName)||(g==null?void 0:g.emailFallback)||(p==null?void 0:p.email)||"Profile",[g==null?void 0:g.displayName,g==null?void 0:g.emailFallback,p==null?void 0:p.email]),C=y.useMemo(()=>((g==null?void 0:g.displayName)||(g==null?void 0:g.emailFallback)||(p==null?void 0:p.email)||"User").split(/\s+/).filter(Boolean).slice(0,2).map(M=>{var A;return(A=M[0])==null?void 0:A.toUpperCase()}).join(""),[g==null?void 0:g.displayName,g==null?void 0:g.emailFallback,p==null?void 0:p.email]),b=(L,M)=>{console.log("Profile menu item clicked:",L,M),M==null||M.stopPropagation(),M==null||M.preventDefault();const A={profile:"/settings/profile",themes:"/settings/appearance",settings:"/settings"};console.log("Navigating to:",A[L]??"/settings"),h(A[L]??"/settings"),a(!1)},_=async L=>{console.log("Logout clicked:",L),L==null||L.stopPropagation(),L==null||L.preventDefault(),a(!1),await f(),h("/login")},T=w.jsxs("svg",{width:"20px",height:"20px",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 flex-shrink-0",children:[w.jsx("path",{d:"M15 16.5V19C15 20.1046 14.1046 21 13 21H6C4.89543 21 4 20.1046 4 19V5C4 3.89543 4.89543 3 6 3H13C14.1046 3 15 3.89543 15 5V8.0625",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),w.jsx("path",{d:"M11 12H21M21 12L18.5 9.5M21 12L18.5 14.5",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}),R=t.map(L=>({label:L.title,href:`#${L.id}`,icon:w.jsx("span",{className:"sidebar-icon h-5 w-5 flex-shrink-0",children:L.icon})}));return w.jsx(dW,{open:i,setOpen:s,children:w.jsxs(hW,{className:"justify-between gap-10",children:[w.jsxs("div",{className:"flex flex-col flex-1 overflow-y-auto overflow-x-hidden",children:[w.jsxs("div",{className:"mb-2 flex items-center justify-end relative",style:{height:"42px"},children:[w.jsx(aM,{mode:"wait",children:i&&w.jsx(wW,{})}),w.jsx("button",{onClick:()=>s(!i),className:"w-[40px] h-[40px] flex items-center justify-center sidebar-button rounded-md sidebar-hover","aria-label":i?"Collapse sidebar":"Expand sidebar",title:i?"Collapse sidebar":"Expand sidebar",children:w.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"flex-shrink-0",children:w.jsx("path",{d:"M10 4H6C4.89543 4 4 4.89543 4 6V18C4 19.1046 4.89543 20 6 20H10M10 4H18C19.1046 4 20 4.89543 20 6V18C20 19.1046 19.1046 20 18 20H10M10 4V20",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})]}),w.jsx("div",{className:"mt-8 flex flex-col gap-2",children:R.map((L,M)=>w.jsx("div",{onClick:A=>{A.preventDefault();const $=t[M].id;r($)},className:`cursor-pointer px-2 ${t[M].id===n?"sidebar-active rounded-md":""}`,children:w.jsx(gW,{link:L})},M))})]}),w.jsxs("div",{className:"relative",ref:l,children:[w.jsxs("div",{onClick:()=>a(!o),className:"flex items-center justify-start gap-2 group/sidebar px-1.5 py-2.5 cursor-pointer sidebar-hover rounded-md px-2",children:[w.jsx("div",{className:"h-7 w-7 flex-shrink-0 rounded-full overflow-hidden sidebar-button flex items-center justify-center",children:x?w.jsx("div",{className:"w-full h-full sidebar-hover animate-pulse"}):v?w.jsx("img",{src:v,alt:"Profile avatar",className:"w-full h-full object-cover"}):w.jsx("span",{className:"text-xs font-medium sidebar-text",children:C})}),w.jsx(ep.span,{animate:{display:i?"inline-block":"none",opacity:i?1:0},transition:{duration:.2,ease:"easeInOut"},className:"sidebar-text text-sm whitespace-pre inline-block !p-0 !m-0",children:x?"Loading...":k})]}),o&&w.jsxs("div",{ref:c,onMouseDown:L=>{console.log("Dropdown mousedown - stopping propagation"),L.stopPropagation()},className:"fixed sidebar-dropdown rounded-md overflow-hidden",style:{bottom:"72px",left:"16px",width:i?"calc(var(--sidebar-width-expanded) - 32px)":"200px",zIndex:9999},children:[e.map(L=>w.jsxs("button",{onClick:M=>b(L.id,M),className:"w-full flex items-center gap-2 px-3 py-2 text-sm sidebar-text sidebar-dropdown-item transition-colors",children:[w.jsx("span",{className:"h-5 w-5 flex-shrink-0",children:L.icon}),w.jsx("span",{children:L.title})]},L.id)),w.jsx("div",{className:"sidebar-separator"}),w.jsxs("button",{onClick:L=>_(L),className:"w-full flex items-center gap-2 px-3 py-2 text-sm sidebar-dropdown-item transition-colors",style:{color:"var(--danger)"},children:[T,w.jsx("span",{children:"Log out"})]})]})]})]})})}const wW=()=>w.jsxs(ep.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2,ease:"easeInOut"},className:"font-normal flex space-x-2 items-center text-sm sidebar-text absolute left-2",children:[w.jsx("svg",{fill:"currentColor",width:"30px",height:"30px",viewBox:"0 0 64 64",version:"1.1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",xmlSpace:"preserve",className:"flex-shrink-0",style:{fillRule:"evenodd",clipRule:"evenodd",strokeLinejoin:"round",strokeMiterlimit:2},children:w.jsx("g",{transform:"matrix(1,0,0,1,-1152,-256)",children:w.jsxs("g",{id:"coffee-bean-filled",transform:"matrix(0.866025,0.5,-0.5,0.866025,717.879,-387.292)",children:[w.jsx("g",{transform:"matrix(1,0,0,1,0,-0.699553)",children:w.jsx("path",{d:"M737.673,328.231C738.494,328.056 739.334,328.427 739.757,329.152C739.955,329.463 740.106,329.722 740.106,329.722C740.106,329.722 745.206,338.581 739.429,352.782C737.079,358.559 736.492,366.083 738.435,371.679C738.697,372.426 738.482,373.258 737.89,373.784C737.298,374.31 736.447,374.426 735.735,374.077C730.192,371.375 722.028,365.058 722.021,352C722.015,340.226 728.812,330.279 737.673,328.231Z"})}),w.jsx("g",{transform:"matrix(-1,0,0,-1,1483.03,703.293)",children:w.jsx("path",{d:"M737.609,328.246C738.465,328.06 739.344,328.446 739.785,329.203C739.97,329.49 740.106,329.722 740.106,329.722C740.106,329.722 745.206,338.581 739.429,352.782C737.1,358.507 736.503,365.948 738.383,371.527C738.646,372.304 738.415,373.164 737.796,373.703C737.177,374.243 736.294,374.356 735.56,373.989C730.02,371.241 722.028,364.92 722.021,352C722.016,340.255 728.779,330.328 737.609,328.246Z"})})]})})}),w.jsx("span",{className:"font-medium sidebar-text whitespace-pre",children:"Bean App"})]});function xW({activeWorkspace:t,content:e}){return w.jsxs("main",{className:"workspace-area",children:[w.jsxs("div",{className:"workspace-area__header",children:[w.jsx("p",{className:"workspace-area__eyebrow",children:"Workspace"}),w.jsx("h1",{children:t?t.title:"Select a workspace"})]}),e??w.jsx("p",{children:t?"Page content goes here. Swap this section out for your real feature area.":"Choose a workspace from the sidebar to get started."})]})}const Sx=[{id:"new-project",title:"New Project",icon:w.jsx(OD,{}),source:"workspace"},{id:"my-projects",title:"My Projects",icon:w.jsx(ID,{}),source:"workspace"},{id:"playground",title:"Playground",icon:w.jsx(DD,{}),source:"workspace"}],ER=Sx.filter(t=>t.id!=="new-project"),RR=[{id:"canvas",label:"Canvas"},{id:"battle-maps",label:"Battle Maps"},{id:"character-sheets",label:"Character Sheets"},{id:"item-cards",label:"Item Cards"},{id:"game-boards",label:"Game Boards"},{id:"campaign-journal",label:"Campaign Journal"}],_W=w.jsx("svg",{width:"20px",height:"20px",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:w.jsx("path",{d:"M5 20V19C5 16.2386 7.23858 14 10 14H14C16.7614 14 19 16.2386 19 19V20M16 7C16 9.20914 14.2091 11 12 11C9.79086 11 8 9.20914 8 7C8 4.79086 9.79086 3 12 3C14.2091 3 16 4.79086 16 7Z",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})}),bW=w.jsxs("svg",{width:"20px",height:"20px",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[w.jsx("path",{d:"M8 13.5L10.7817 10.7183M10 16.5L13.2817 13.2183M10.7817 10.7183L17.2506 5.2123C17.4158 5.0717 17.6027 4.95892 17.8041 4.87836L17.8336 4.86658C18.6499 4.54005 19.4599 5.35013 19.1334 6.16645L19.1216 6.19589C19.0411 6.39729 18.9283 6.58424 18.7877 6.74942L13.2817 13.2183M10.7817 10.7183C11.615 10.7911 13.2817 11.393 13.2817 13.2183",stroke:"currentColor","stroke-width":"1.8","stroke-linecap":"round","stroke-linejoin":"round"}),w.jsx("path",{d:"M4.4853 17.2881C4.16795 15.5783 5.48027 14 7.2193 14V14C8.75504 14 10 15.245 10 16.7807V17C10 18.6569 8.65685 20 7 20H3.92627C3.6329 20 3.51004 19.6253 3.74646 19.4516L4.55841 18.855C4.67556 18.769 4.73314 18.6235 4.70662 18.4805L4.4853 17.2881Z",stroke:"currentColor","stroke-width":"1.8","stroke-linecap":"round","stroke-linejoin":"round"})]}),SW=w.jsxs("svg",{width:"20px",height:"20px",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[w.jsx("path",{d:"M6.07194 6.26794L6.57194 5.40192L6.07194 6.26794ZM4.70592 6.63397L3.83989 6.13397L3.83989 6.13397L4.70592 6.63397ZM3.70592 8.36602L2.83989 7.86602H2.83989L3.70592 8.36602ZM4.07194 9.73205L3.57194 10.5981H3.57194L4.07194 9.73205ZM4.07194 14.2679L3.57194 13.4019H3.57194L4.07194 14.2679ZM3.70592 15.634L4.57194 15.134H4.57194L3.70592 15.634ZM4.70592 17.366L3.83989 17.866H3.83989L4.70592 17.366ZM6.07194 17.732L6.57194 18.5981L6.07194 17.732ZM17.9284 17.732L17.4283 18.5981L17.4284 18.5981L17.9284 17.732ZM19.2944 17.366L18.4284 16.866L19.2944 17.366ZM20.2944 15.634L21.1604 16.134L20.2944 15.634ZM19.9284 14.2679L19.4284 15.134V15.134L19.9284 14.2679ZM19.9284 9.73205L20.4284 10.5981V10.5981L19.9284 9.73205ZM20.2944 8.36602L19.4284 8.86602L19.4284 8.86602L20.2944 8.36602ZM19.2944 6.63397L18.4284 7.13397L19.2944 6.63397ZM17.9284 6.26794L18.4284 7.13397L17.9284 6.26794ZM14.6514 6.61604L14.2089 7.51283L14.6514 6.61604ZM16.5119 7.08573L17.0119 7.95175L16.5119 7.08573ZM15.336 7.01204L14.7793 7.84277L15.336 7.01204ZM17.9873 11.6035L16.9894 11.6686L17.9873 11.6035ZM18.5118 10.5499L18.0118 9.68388L18.5118 10.5499ZM15.336 16.988L14.7793 16.1572L15.336 16.988ZM16.5119 16.9143L16.0119 17.7803L16.5119 16.9143ZM18.5118 13.4501L18.0118 14.3161L18.5118 13.4501ZM9.34892 17.384L9.79137 16.4872L9.34892 17.384ZM7.48838 16.9143L6.98838 16.0482L7.48838 16.9143ZM8.6643 16.988L8.10763 17.8187L8.6643 16.988ZM14.6514 17.384L15.0938 18.2808L14.6514 17.384ZM5.48852 10.5499L4.98852 11.4159L5.48852 10.5499ZM6.01304 11.6035L5.01516 11.5385L6.01304 11.6035ZM7.48839 7.08573L6.98839 7.95176L7.48839 7.08573ZM11.0001 4V4V2C9.89558 2 9.00015 2.89543 9.00015 4H11.0001ZM11.0001 5.63424V4H9.00015V5.63424H11.0001ZM9.22099 7.84277C9.40312 7.72073 9.59361 7.6104 9.79137 7.51283L8.90647 5.71924C8.62922 5.85603 8.36245 6.01056 8.10764 6.18131L9.22099 7.84277ZM5.57194 7.13397L6.98839 7.95176L7.98839 6.2197L6.57194 5.40192L5.57194 7.13397ZM5.57194 7.13397L6.57194 5.40192C5.61536 4.84963 4.39218 5.17738 3.83989 6.13397L5.57194 7.13397ZM4.57194 8.86602L5.57194 7.13397L3.83989 6.13397L2.83989 7.86602L4.57194 8.86602ZM4.57194 8.86602L4.57194 8.86602L2.83989 7.86602C2.28761 8.82261 2.61536 10.0458 3.57194 10.5981L4.57194 8.86602ZM5.98852 9.68388L4.57194 8.86602L3.57194 10.5981L4.98852 11.4159L5.98852 9.68388ZM7.00015 12C7.00015 11.8885 7.00378 11.778 7.01092 11.6686L5.01516 11.5385C5.0052 11.6912 5.00015 11.8451 5.00015 12H7.00015ZM7.01092 12.3314C7.00378 12.222 7.00015 12.1115 7.00015 12H5.00015C5.00015 12.1549 5.0052 12.3088 5.01516 12.4615L7.01092 12.3314ZM4.57194 15.134L5.98852 14.3161L4.98852 12.5841L3.57194 13.4019L4.57194 15.134ZM4.57194 15.134L4.57194 15.134L3.57194 13.4019C2.61536 13.9542 2.28761 15.1774 2.83989 16.134L4.57194 15.134ZM5.57194 16.866L4.57194 15.134L2.83989 16.134L3.83989 17.866L5.57194 16.866ZM5.57194 16.866L5.57194 16.866L3.83989 17.866C4.39218 18.8226 5.61536 19.1504 6.57194 18.5981L5.57194 16.866ZM6.98838 16.0482L5.57194 16.866L6.57194 18.5981L7.98838 17.7803L6.98838 16.0482ZM9.79137 16.4872C9.59361 16.3896 9.40312 16.2793 9.22098 16.1572L8.10763 17.8187C8.36245 17.9894 8.62922 18.144 8.90647 18.2808L9.79137 16.4872ZM11.0001 20V18.3658H9.00015V20H11.0001ZM11.0001 20H9.00015C9.00015 21.1046 9.89558 22 11.0001 22V20ZM13.0001 20H11.0001V22H13.0001V20ZM13.0001 20V22C14.1047 22 15.0001 21.1046 15.0001 20H13.0001ZM13.0001 18.3658V20H15.0001V18.3658H13.0001ZM14.7793 16.1572C14.5972 16.2793 14.4067 16.3896 14.2089 16.4872L15.0938 18.2808C15.3711 18.144 15.6378 17.9894 15.8927 17.8187L14.7793 16.1572ZM18.4284 16.866L17.0119 16.0482L16.0119 17.7803L17.4283 18.5981L18.4284 16.866ZM18.4284 16.866H18.4283L17.4284 18.5981C18.3849 19.1504 19.6081 18.8226 20.1604 17.866L18.4284 16.866ZM19.4284 15.134L18.4284 16.866L20.1604 17.866L21.1604 16.134L19.4284 15.134ZM19.4284 15.134V15.134L21.1604 16.134C21.7127 15.1774 21.3849 13.9542 20.4284 13.4019L19.4284 15.134ZM18.0118 14.3161L19.4284 15.134L20.4284 13.4019L19.0118 12.5841L18.0118 14.3161ZM17.0001 12C17.0001 12.1115 16.9965 12.222 16.9894 12.3314L18.9851 12.4615C18.9951 12.3088 19.0001 12.1549 19.0001 12H17.0001ZM16.9894 11.6686C16.9965 11.778 17.0001 11.8885 17.0001 12H19.0001C19.0001 11.8451 18.9951 11.6912 18.9851 11.5385L16.9894 11.6686ZM19.4284 8.86602L18.0118 9.68388L19.0118 11.4159L20.4284 10.5981L19.4284 8.86602ZM19.4284 8.86602L19.4284 8.86602L20.4284 10.5981C21.3849 10.0458 21.7127 8.82261 21.1604 7.86602L19.4284 8.86602ZM18.4284 7.13397L19.4284 8.86602L21.1604 7.86602L20.1604 6.13397L18.4284 7.13397ZM18.4284 7.13397V7.13397L20.1604 6.13397C19.6081 5.17738 18.3849 4.84963 17.4284 5.40192L18.4284 7.13397ZM17.0119 7.95175L18.4284 7.13397L17.4284 5.40192L16.0119 6.2197L17.0119 7.95175ZM14.2089 7.51283C14.4067 7.6104 14.5972 7.72072 14.7793 7.84277L15.8927 6.18131C15.6378 6.01056 15.3711 5.85603 15.0938 5.71924L14.2089 7.51283ZM13.0001 4V5.63423H15.0001V4H13.0001ZM13.0001 4H15.0001C15.0001 2.89543 14.1047 2 13.0001 2V4ZM11.0001 4H13.0001V2H11.0001V4ZM15.0938 5.71924C15.0511 5.69815 15.0232 5.67053 15.0094 5.65025C14.9972 5.63248 15.0001 5.62788 15.0001 5.63423H13.0001C13.0001 6.50299 13.5491 7.18731 14.2089 7.51283L15.0938 5.71924ZM16.0119 6.2197C16.0174 6.21655 16.0149 6.22132 15.9937 6.21972C15.9694 6.21789 15.9319 6.20762 15.8927 6.18131L14.7793 7.84277C15.3915 8.25303 16.2594 8.38623 17.0119 7.95175L16.0119 6.2197ZM18.9851 11.5385C18.9821 11.4913 18.992 11.4537 19.0025 11.4318C19.0118 11.4126 19.0172 11.4128 19.0118 11.4159L18.0118 9.68388C17.2604 10.1177 16.9415 10.9342 16.9894 11.6686L18.9851 11.5385ZM15.8927 17.8187C15.9319 17.7924 15.9694 17.7821 15.9937 17.7803C16.0149 17.7787 16.0174 17.7834 16.0119 17.7803L17.0119 16.0482C16.2594 15.6138 15.3915 15.747 14.7793 16.1572L15.8927 17.8187ZM19.0118 12.5841C19.0172 12.5872 19.0118 12.5874 19.0025 12.5682C18.992 12.5462 18.9821 12.5087 18.9851 12.4615L16.9894 12.3314C16.9415 13.0658 17.2604 13.8823 18.0118 14.3161L19.0118 12.5841ZM8.90647 18.2808C8.94923 18.3019 8.97711 18.3295 8.99094 18.3497C9.00306 18.3675 9.00015 18.3721 9.00015 18.3658H11.0001C11.0001 17.497 10.4512 16.8127 9.79137 16.4872L8.90647 18.2808ZM7.98838 17.7803C7.98292 17.7834 7.98539 17.7787 8.00661 17.7803C8.03085 17.7821 8.06836 17.7924 8.10763 17.8187L9.22098 16.1572C8.60875 15.747 7.74092 15.6138 6.98838 16.0482L7.98838 17.7803ZM15.0001 18.3658C15.0001 18.3721 14.9972 18.3675 15.0094 18.3497C15.0232 18.3295 15.0511 18.3019 15.0938 18.2808L14.2089 16.4872C13.5491 16.8127 13.0001 17.497 13.0001 18.3658H15.0001ZM5.01516 12.4615C5.01823 12.5086 5.00833 12.5462 4.99777 12.5682C4.98851 12.5874 4.9831 12.5872 4.98852 12.5841L5.98852 14.3161C6.73991 13.8823 7.05882 13.0658 7.01092 12.3314L5.01516 12.4615ZM4.98852 11.4159C4.9831 11.4128 4.98851 11.4126 4.99777 11.4318C5.00833 11.4537 5.01823 11.4913 5.01516 11.5385L7.01092 11.6686C7.05882 10.9342 6.73991 10.1177 5.98852 9.68388L4.98852 11.4159ZM8.10764 6.18131C8.06837 6.20763 8.03085 6.21789 8.00662 6.21972C7.9854 6.22133 7.98293 6.21655 7.98839 6.2197L6.98839 7.95176C7.74092 8.38623 8.60876 8.25303 9.22099 7.84277L8.10764 6.18131ZM9.00015 5.63424C9.00015 5.62788 9.00306 5.63248 8.99094 5.65025C8.97711 5.67053 8.94923 5.69815 8.90647 5.71924L9.79137 7.51283C10.4512 7.18731 11.0001 6.50299 11.0001 5.63424H9.00015Z",fill:"currentColor"}),w.jsx("circle",{cx:"12",cy:"12",r:"2",stroke:"currentColor","stroke-width":"1.8","stroke-linecap":"round","stroke-linejoin":"round"})]}),CW=[{id:"profile",title:"Profile",icon:_W,source:"profile"},{id:"themes",title:"Themes",icon:bW,source:"profile"},{id:"settings",title:"Settings",icon:SW,source:"profile"}];function kW(){var b,_,T;const t=no(),{user:e}=Ii(),[n,r]=y.useState(((b=ER[0])==null?void 0:b.id)??((_=Sx[0])==null?void 0:_.id)),[i,s]=y.useState(!1),[o,a]=y.useState(((T=RR[0])==null?void 0:T.id)??""),[l,c]=y.useState([]),[h,f]=y.useState(!1),p=y.useCallback(async()=>{if(!e){c([]);return}f(!0);const{data:R,error:L}=await Ct.from("projects").select("*").eq("user_id",e.id).order("created_at",{ascending:!1});!L&&R&&c(R),f(!1)},[e]);y.useEffect(()=>{p()},[p]);const g=R=>{c(L=>[R,...L.filter(M=>M.id!==R.id)]),r("my-projects")},v=async(R,L)=>{if(!e)return;const{error:M}=await Ct.from("projects").update({name:L}).eq("id",R).eq("user_id",e.id);if(!M)c(A=>A.map($=>$.id===R?{...$,name:L}:$));else throw console.error("Failed to update project:",M),M},x=async R=>{if(!e)return;const{error:L}=await Ct.from("projects").delete().eq("id",R).eq("user_id",e.id);if(!L)c(M=>M.filter(A=>A.id!==R));else throw console.error("Failed to delete project:",L),L},k=y.useMemo(()=>ER.find(R=>R.id===n),[n]),C=y.useMemo(()=>n==="my-projects"?w.jsx(lB,{projects:l,isLoading:h,onSelectProject:R=>t(`/workspace/${R.project_type}/${R.id}`),onUpdateProject:v,onDeleteProject:x,onRefresh:p}):n==="playground"?w.jsx("p",{className:"muted",children:"Experiment with ideas here. Add tools or widgets as they are built."}):w.jsx("p",{className:"muted",children:"Choose a workspace from the sidebar to get started."}),[n,p,h,t,l]);return w.jsxs("div",{className:"app-layout",children:[w.jsx(yW,{workspaces:Sx,profileMenuItems:CW,activeWorkspaceId:n,onSelectWorkspace:R=>{if(R==="new-project"){s(!0);return}r(R)}}),w.jsx(xW,{activeWorkspace:k,content:C}),w.jsx(oB,{isOpen:i,onClose:()=>s(!1),projectTypes:RR,selectedProjectTypeId:o,onSelectProjectType:a,onProjectCreated:g,existingProjects:l})]})}const EW=()=>w.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 48 48",children:[w.jsx("path",{fill:"#FFC107",d:"M43.611 20.083H42V20H24v8h11.303c-1.649 4.657-6.08 8-11.303 8-6.627 0-12-5.373-12-12s12-5.373 12-12c3.059 0 5.842 1.154 7.961 3.039l5.657-5.657C34.046 6.053 29.268 4 24 4 12.955 4 4 12.955 4 24s8.955 20 20 20 20-8.955 20-20c0-2.641-.21-5.236-.611-7.743z"}),w.jsx("path",{fill:"#FF3D00",d:"M6.306 14.691l6.571 4.819C14.655 15.108 18.961 12 24 12c3.059 0 5.842 1.154 7.961 3.039l5.657-5.657C34.046 6.053 29.268 4 24 4 16.318 4 9.656 8.337 6.306 14.691z"}),w.jsx("path",{fill:"#4CAF50",d:"M24 44c5.166 0 9.86-1.977 13.409-5.192l-6.19-5.238C29.211 35.091 26.715 36 24 36c-5.202 0-9.619-3.317-11.283-7.946l-6.522 5.025C9.505 39.556 16.227 44 24 44z"}),w.jsx("path",{fill:"#1976D2",d:"M43.611 20.083H42V20H24v8h11.303c-.792 2.237-2.231 4.166-4.087 5.571l6.19 5.238C42.022 35.026 44 30.038 44 24c0-2.641-.21-5.236-.611-7.743z"})]}),TR=({children:t})=>w.jsx("div",{className:"rounded-2xl border border-border bg-foreground/5 backdrop-blur-sm transition-colors focus-within:border-violet-400/70 focus-within:bg-violet-500/10",children:t}),tA=({title:t=w.jsx("span",{className:"font-light text-foreground tracking-tighter",children:"Welcome"}),description:e="Access your account and continue your journey with us",heroImageSrc:n,onSignIn:r,onGoogleSignIn:i,onResetPassword:s,onCreateAccount:o,submitButtonText:a="Sign In",alternateActionText:l="New to our platform?",alternateActionLinkText:c="Create Account",email:h="",password:f="",onEmailChange:p,onPasswordChange:g,error:v,submitting:x=!1})=>{const[k,C]=y.useState(!1);return w.jsxs("div",{className:"h-[100dvh] flex flex-col md:flex-row font-geist w-[100dvw]",children:[w.jsx("section",{className:"flex-1 flex items-center justify-center p-8",children:w.jsx("div",{className:"w-full max-w-md",children:w.jsxs("div",{className:"flex flex-col gap-6",children:[w.jsx("h1",{className:"text-4xl md:text-5xl font-semibold leading-tight",children:t}),w.jsx("p",{className:"text-muted-foreground",children:e}),w.jsxs("form",{className:"space-y-5",onSubmit:r,children:[w.jsxs("div",{children:[w.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Email Address"}),w.jsx(TR,{children:w.jsx("input",{name:"email",type:"email",placeholder:"Enter your email address",className:"w-full bg-transparent text-sm p-4 rounded-2xl focus:outline-none",value:h,onChange:b=>p==null?void 0:p(b.target.value),required:!0})})]}),w.jsxs("div",{children:[w.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Password"}),w.jsx(TR,{children:w.jsxs("div",{className:"relative",children:[w.jsx("input",{name:"password",type:k?"text":"password",placeholder:"Enter your password",className:"w-full bg-transparent text-sm p-4 pr-12 rounded-2xl focus:outline-none",value:f,onChange:b=>g==null?void 0:g(b.target.value),required:!0}),w.jsx("button",{type:"button",onClick:()=>C(!k),className:"absolute inset-y-0 right-3 flex items-center",children:k?w.jsx(ZV,{className:"w-5 h-5 text-muted-foreground hover:text-foreground transition-colors"}):w.jsx(JV,{className:"w-5 h-5 text-muted-foreground hover:text-foreground transition-colors"})})]})})]}),w.jsxs("div",{className:"flex items-center justify-between text-sm",children:[w.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[w.jsx("input",{type:"checkbox",name:"rememberMe",className:"custom-checkbox"}),w.jsx("span",{className:"text-foreground/90",children:"Keep me signed in"})]}),s&&w.jsx("a",{href:"#",onClick:b=>{b.preventDefault(),s()},className:"hover:underline text-violet-400 transition-colors",children:"Reset password"})]}),v&&w.jsx("p",{className:"text-red-500 text-sm",children:v}),w.jsx("button",{type:"submit",className:"w-full rounded-2xl bg-primary py-4 font-medium text-primary-foreground hover:bg-primary/90 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",disabled:x,children:x?"Please wait...":a})]}),i&&w.jsxs(w.Fragment,{children:[w.jsxs("div",{className:"relative flex items-center justify-center",children:[w.jsx("span",{className:"w-full border-t border-border"}),w.jsx("span",{className:"px-4 text-sm text-muted-foreground bg-background absolute",children:"Or continue with"})]}),w.jsxs("button",{onClick:i,className:"w-full flex items-center justify-center gap-3 border border-border rounded-2xl py-4 hover:bg-secondary transition-colors",children:[w.jsx(EW,{}),"Continue with Google"]})]}),o&&w.jsxs("p",{className:"text-center text-sm text-muted-foreground",children:[l," ",w.jsx("a",{href:"#",onClick:b=>{b.preventDefault(),o()},className:"text-violet-400 hover:underline transition-colors",children:c})]})]})})}),n&&w.jsx("section",{className:"hidden md:block flex-1 relative p-4",children:w.jsx("div",{className:"absolute inset-4 rounded-3xl bg-cover bg-center",style:{backgroundImage:`url(${n})`}})})]})};function RW(){const t=no(),{signIn:e}=Ii(),[n,r]=y.useState(""),[i,s]=y.useState(""),[o,a]=y.useState(null),[l,c]=y.useState(!1),h=async p=>{p.preventDefault(),a(null),c(!0);try{await e(n,i),t("/app")}catch(g){a(g instanceof Error?g.message:"Unable to sign in.")}finally{c(!1)}},f=()=>{t("/register")};return w.jsx(tA,{title:w.jsx("span",{className:"font-light text-foreground tracking-tighter",children:"Welcome Back"}),description:"Access your dashboard to keep building.",heroImageSrc:"https://images.unsplash.com/photo-1642615835477-d303d7dc9ee9?w=2160&q=80",onSignIn:h,onCreateAccount:f,submitButtonText:"Sign In",alternateActionText:"Need an account?",alternateActionLinkText:"Register here",email:n,password:i,onEmailChange:r,onPasswordChange:s,error:o,submitting:l})}function TW(){const t=no(),{signUp:e}=Ii(),[n,r]=y.useState(""),[i,s]=y.useState(""),[o,a]=y.useState(null),[l,c]=y.useState(!1),h=async p=>{p.preventDefault(),a(null),c(!0);try{await e(n,i),t("/app")}catch(g){a(g instanceof Error?g.message:"Unable to register.")}finally{c(!1)}},f=()=>{t("/login")};return w.jsx(tA,{title:w.jsx("span",{className:"font-light text-foreground tracking-tighter",children:"Create an Account"}),description:"Set up access to the app and future features.",heroImageSrc:"https://images.unsplash.com/photo-1618005182384-a83a8bd57fbe?w=2160&q=80",onSignIn:h,onCreateAccount:f,submitButtonText:"Create Account",alternateActionText:"Already registered?",alternateActionLinkText:"Log in here",email:n,password:i,onEmailChange:r,onPasswordChange:s,error:o,submitting:l})}const nA=y.createContext(void 0);function uh(t){typeof document>"u"||(document.documentElement.dataset.theme=t)}function PR(){return typeof window>"u"?"ink-wash":window.localStorage.getItem("theme-preference")??"ink-wash"}function PW({children:t}){const{user:e}=Ii(),[n,r]=y.useState(()=>{const h=PR();return uh(h),h}),[i,s]=y.useState(!0),[o,a]=y.useState(null);y.useEffect(()=>{let h=!0;return(async()=>{if(!(e!=null&&e.id)){const x=PR();r(x),uh(x),a(null),s(!1);return}s(!0);const{data:p,error:g}=await Ct.from("profiles").select("theme_preference").eq("id",e.id).single();if(!h)return;const v=(p==null?void 0:p.theme_preference)??"ink-wash";r(v),uh(v),window.localStorage.setItem("theme-preference",v),a(g&&g.code!=="PGRST116"?g.message:null),s(!1)})(),()=>{h=!1}},[e==null?void 0:e.id]),y.useEffect(()=>{uh(n)},[n]);const l=y.useCallback(async h=>{if(r(h),uh(h),window.localStorage.setItem("theme-preference",h),a(null),!(e!=null&&e.id))return;const{error:f}=await Ct.from("profiles").upsert({id:e.id,theme_preference:h});a(f?f.message:"Theme saved")},[e==null?void 0:e.id]),c=y.useMemo(()=>({theme:n,loading:i,status:o,setThemePreference:l}),[i,o,n,l]);return w.jsx(nA.Provider,{value:c,children:t})}function LW(){const t=y.useContext(nA);if(!t)throw new Error("useTheme must be used within a ThemeProvider");return t}const MW=[{id:"ink-wash",name:"Ink Wash",description:"Graphite neutrals inspired by monochrome ink."},{id:"light",name:"Light",description:"Bright, crisp default palette."},{id:"dark",name:"Dark",description:"Low-glare palette for late sessions."}];function LR(){const{theme:t,setThemePreference:e,status:n}=LW(),[r,i]=y.useState(null);y.useEffect(()=>{i(n)},[n]);const s=async o=>{i(null),await e(o)};return w.jsxs("div",{className:"settings-panel__content",children:[w.jsx("h2",{children:"Themes"}),w.jsx("p",{children:"Choose how the interface looks. Changes apply instantly and are stored with your profile."}),w.jsxs("div",{className:"settings-card",children:[w.jsx("div",{className:"settings-card__header",children:w.jsxs("div",{children:[w.jsx("h3",{children:"Theme"}),w.jsx("p",{children:"System follows your OS preference; selecting any palette applies it immediately."})]})}),w.jsx("div",{className:"theme-grid",children:MW.map(o=>w.jsxs("button",{type:"button",className:`theme-card ${t===o.id?"theme-card--active":""}`,onClick:()=>s(o.id),children:[w.jsx("div",{className:"theme-card__preview","data-theme":o.id}),w.jsxs("div",{className:"theme-card__body",children:[w.jsx("div",{className:"theme-card__title",children:o.name}),w.jsx("p",{className:"theme-card__description",children:o.description})]})]},o.id))}),r?w.jsx("p",{className:"settings-field__help",children:r}):null]})]})}const MR=[{sections:[{id:"profile",label:"Profile"},{id:"account",label:"Account"}]},{heading:"Access",sections:[{id:"friends",label:"Friends"},{id:"notifications",label:"Notifications"}]},{heading:"Appearance",sections:[{id:"appearance",label:"Themes"}]}];function AW(){return w.jsx("div",{className:"settings-layout",children:w.jsxs("div",{className:"settings-layout__shell",children:[w.jsx("header",{className:"settings-layout__header",children:w.jsx("div",{children:w.jsx("p",{className:"settings-layout__eyebrow",children:"Settings Center"})})}),w.jsxs("div",{className:"settings-layout__body",children:[w.jsx("nav",{className:"settings-nav","aria-label":"Settings sections",children:MR.map((t,e)=>w.jsxs("div",{className:"settings-nav__group",children:[t.heading?w.jsx("p",{className:"settings-nav__group-title",children:t.heading}):null,w.jsx("div",{className:"settings-nav__list",children:t.sections.map(n=>w.jsx(W3,{to:n.id,replace:!0,className:({isActive:r})=>`settings-nav__item ${r?"settings-nav__item--active":""}`,children:w.jsx("span",{className:"settings-nav__label",children:n.label})},n.id))}),e<MR.length-1?w.jsx("div",{className:"settings-nav__divider","aria-hidden":!0}):null]},t.heading??`group-${e}`))}),w.jsx("section",{className:"settings-panel","aria-live":"polite",children:w.jsx(eD,{})})]})]})})}function AR(){return w.jsxs("div",{className:"settings-panel__content",children:[w.jsx("h2",{children:"Notifications"}),w.jsx("p",{children:"Control emails and alerts."})]})}function NR(){const{user:t}=Ii(),{profile:e,avatarUrl:n,isLoading:r,refreshProfile:i}=eA(),s=y.useRef(null),[o,a]=y.useState({displayName:"",bio:"",website:"",socialAccounts:["","",""],avatarUrl:""}),[l,c]=y.useState(null),[h,f]=y.useState(!1),[p,g]=y.useState(!1);y.useEffect(()=>{e&&a({displayName:e.displayName,bio:e.bio,website:e.website,socialAccounts:[...e.socialAccounts],avatarUrl:e.avatarUrl})},[e]);const v=r||!e,x=o.displayName||(e==null?void 0:e.emailFallback)||(t==null?void 0:t.email)||"Profile",k=x.split(/\s+/).filter(Boolean).slice(0,2).map(R=>{var L;return(L=R[0])==null?void 0:L.toUpperCase()}).join(""),C=R=>L=>{a({...o,[R]:L.target.value})},b=R=>L=>{a(M=>{const A=[...M.socialAccounts];return A[R]=L.target.value,{...M,socialAccounts:A}})},_=async R=>{var M,A;const L=(M=R.target.files)==null?void 0:M[0];if(!(!L||!(t!=null&&t.id))){g(!0),c(null);try{const $=((A=L.name.split(".").pop())==null?void 0:A.toLowerCase())||"jpg",j=`${t.id}-${Date.now()}.${$}`,V=`${t.id}/${j}`,{error:U}=await Ct.storage.from("avatars").upload(V,L,{cacheControl:"0",upsert:!0,contentType:L.type||"image/jpeg"});if(U)throw U;const{error:B}=await Ct.from("profiles").update({avatar_url:V}).eq("id",t.id);if(B)throw B;a(Z=>({...Z,avatarUrl:V})),c("Profile picture updated"),await i()}catch($){c($ instanceof Error?$.message:"Unable to update profile picture")}finally{g(!1),R.target&&(R.target.value="")}}},T=async()=>{if(t!=null&&t.id){f(!0),c(null);try{const R={id:t.id,display_name:o.displayName,bio:o.bio,website:o.website,social_accounts:o.socialAccounts.map(M=>M.trim()).filter(Boolean).join(`
`),avatar_url:o.avatarUrl??null},{error:L}=await Ct.from("profiles").upsert(R);if(L)throw L;c("Profile updated"),await i()}catch(R){c(R instanceof Error?R.message:"Unable to update profile")}finally{f(!1)}}};return w.jsxs("div",{className:"settings-panel__content",children:[w.jsx("h2",{children:"Profile"}),w.jsxs("div",{className:"settings-profile__header",children:[w.jsxs("div",{className:`settings-profile__avatar ${v?"settings-profile__avatar--loading":""}`,onClick:()=>{var R;return(R=s.current)==null?void 0:R.click()},"aria-busy":p,children:[v?w.jsx("div",{className:"settings-profile__avatar-skeleton"}):n?w.jsx("img",{src:n,alt:"Profile avatar"}):w.jsx("span",{children:k}),!v&&w.jsx("div",{className:"settings-profile__avatar-overlay",children:p?"Uploading":"Change profile picture"})]}),w.jsx("input",{ref:s,type:"file",accept:"image/*",style:{display:"none"},onChange:_}),w.jsx("div",{className:"settings-profile__identity",children:v?w.jsxs(w.Fragment,{children:[w.jsx("div",{className:"settings-profile__name-skeleton"}),w.jsx("div",{className:"settings-profile__bio-skeleton"})]}):w.jsxs(w.Fragment,{children:[w.jsx("h3",{children:x}),w.jsx("p",{children:o.bio||"Because even heroes need a profile."})]})})]}),w.jsxs("div",{className:"settings-card",children:[w.jsx("div",{className:"settings-card__header",children:w.jsxs("div",{children:[w.jsx("h3",{children:"Public details"}),w.jsx("p",{children:"Your profile card carries these details wherever it wanders."})]})}),w.jsxs("div",{className:"settings-form",children:[w.jsxs("label",{className:"settings-field",children:[w.jsx("span",{className:"settings-field__label",children:"Display name"}),w.jsx("input",{type:"text",value:o.displayName,onChange:C("displayName")}),w.jsx("p",{className:"settings-field__help",children:"If you leave this blank, your email graciously takes the stage."})]}),w.jsxs("label",{className:"settings-field",children:[w.jsx("span",{className:"settings-field__label",children:"Short bio"}),w.jsx("textarea",{rows:3,value:o.bio,onChange:C("bio")}),w.jsx("p",{className:"settings-field__help",children:"Share a tiny tale about yourself for those who peek at your profile."})]})]})]}),w.jsxs("div",{className:"settings-card",children:[w.jsx("div",{className:"settings-card__header",children:w.jsxs("div",{children:[w.jsx("h3",{children:"Links"}),w.jsx("p",{children:"Share the destinations you want teammates to find."})]})}),w.jsxs("div",{className:"settings-form",children:[w.jsxs("label",{className:"settings-field",children:[w.jsx("span",{className:"settings-field__label",children:"Website"}),w.jsx("input",{type:"url",value:o.website,onChange:C("website"),placeholder:"https://"}),w.jsx("p",{className:"settings-field__help",children:"Portfolio, company site, or docs."})]}),w.jsx("hr",{className:"settings-divider"}),w.jsxs("div",{className:"settings-social",children:[w.jsx("div",{className:"settings-social__title",children:"Social accounts"}),w.jsx("div",{className:"settings-social__list",children:o.socialAccounts.map((R,L)=>w.jsxs("label",{className:"settings-field settings-field--inline",children:[w.jsx("span",{className:"settings-social__icon","aria-hidden":"true",children:w.jsx("svg",{width:"20px",height:"20px",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:w.jsx("path",{d:"M10.6666 13.3333L10.0808 12.7475C9.29978 11.9664 9.29978 10.7001 10.0808 9.91905L14.5857 5.41416C15.3668 4.63311 16.6331 4.63311 17.4142 5.41415L18.5857 6.58572C19.3668 7.36677 19.3668 8.6331 18.5857 9.41415L16.9999 10.9999M13.3333 10.6666L13.919 11.2524C14.7001 12.0335 14.7001 13.2998 13.919 14.0808L9.41415 18.5857C8.6331 19.3668 7.36677 19.3668 6.58572 18.5857L5.41416 17.4142C4.63311 16.6331 4.63311 15.3668 5.41416 14.5857L6.99994 12.9999",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}),w.jsx("input",{type:"text",value:R,onChange:b(L),placeholder:"Profile URL or handle"})]},L))}),w.jsx("p",{className:"settings-field__help",children:"Share up to three profiles for teammates to follow."})]})]})]}),w.jsxs("div",{className:"settings-profile__footer",children:[w.jsx("button",{className:"button button--primary",onClick:T,disabled:h,children:h?"Updating":"Update Profile"}),l?w.jsx("span",{className:"settings-profile__status",children:l}):null]})]})}function NW(){const{user:t}=Ii(),e=no(),[n,r]=y.useState(null),[i,s]=y.useState(!1),[o,a]=y.useState({email:"",password:"",confirmText:""}),[l,c]=y.useState(!1),h=async()=>{if(!(t!=null&&t.email))return;const{error:p}=await Ct.auth.resetPasswordForEmail(t.email);r(p?p.message:"Reset email sent. Check your inbox.")},f=async()=>{if(!(!(t!=null&&t.id)||!t.email)&&!(o.email!==t.email||o.confirmText!=="DELETE"||!o.password)){c(!0);try{const{error:p}=await Ct.auth.signInWithPassword({email:t.email,password:o.password});if(p)throw p;const g=["projects","assets","canvases"];for(const v of g)await Ct.from(v).delete().eq("user_id",t.id);await Ct.storage.from("avatars").remove([`avatars/${t.id}.jpg`]),await Ct.from("profiles").delete().eq("id",t.id),await Ct.auth.admin.deleteUser(t.id),await Ct.auth.signOut(),e("/login",{replace:!0})}catch(p){r(p instanceof Error?p.message:"Unable to delete account")}finally{c(!1)}}};return w.jsxs("div",{className:"settings-panel__content",children:[w.jsx("h2",{children:"Account"}),w.jsx("p",{children:"Manage your credentials, recovery, and the nuclear option to delete everything."}),w.jsxs("div",{className:"settings-card",children:[w.jsx("div",{className:"settings-card__header",children:w.jsxs("div",{children:[w.jsx("h3",{children:"Login details"}),w.jsx("p",{children:"Your email is how you sign in and receive account updates."})]})}),w.jsxs("div",{className:"settings-form",children:[w.jsxs("label",{className:"settings-field",children:[w.jsx("span",{className:"settings-field__label",children:"Email address"}),w.jsx("input",{type:"email",value:(t==null?void 0:t.email)??"",readOnly:!0}),w.jsx("p",{className:"settings-field__help",children:"This comes from Supabase auth and cannot be edited here."})]}),w.jsx("button",{className:"button button--primary",type:"button",onClick:h,children:"Reset password"}),n?w.jsx("p",{className:"settings-field__help",children:n}):null]})]}),w.jsxs("div",{className:"settings-card settings-card--danger",children:[w.jsx("div",{className:"settings-card__header",children:w.jsxs("div",{children:[w.jsx("h3",{children:"Delete account"}),w.jsx("p",{children:"This permanently removes your account, data, and files."})]})}),w.jsx("button",{className:"button button--danger",type:"button",onClick:()=>s(!0),children:"Delete Account"})]}),i?w.jsx("div",{className:"modal-backdrop",children:w.jsxs("div",{className:"modal",children:[w.jsxs("header",{className:"modal__header",children:[w.jsx("h3",{children:"Confirm deletion"}),w.jsx("button",{className:"modal__close",onClick:()=>s(!1),"aria-label":"Close",children:""})]}),w.jsxs("div",{className:"modal__body",children:[w.jsx("p",{children:"Type your email and password to confirm. Paste is disabled to prevent mistakes."}),w.jsxs("label",{className:"settings-field",children:[w.jsx("span",{className:"settings-field__label",children:"Email"}),w.jsx("input",{type:"email",value:o.email,onChange:p=>a({...o,email:p.target.value}),onPaste:p=>p.preventDefault()})]}),w.jsxs("label",{className:"settings-field",children:[w.jsx("span",{className:"settings-field__label",children:"Password"}),w.jsx("input",{type:"password",value:o.password,onChange:p=>a({...o,password:p.target.value}),onPaste:p=>p.preventDefault()})]}),w.jsxs("label",{className:"settings-field",children:[w.jsx("span",{className:"settings-field__label",children:"Confirmation text"}),w.jsx("input",{type:"text",value:o.confirmText,placeholder:"Type DELETE",onChange:p=>a({...o,confirmText:p.target.value}),onPaste:p=>p.preventDefault()})]}),w.jsx("p",{className:"modal__warning",children:"This action will delete projects, assets, canvases, and your Supabase account. It cannot be undone."})]}),w.jsxs("footer",{className:"modal__footer",children:[w.jsx("button",{className:"button",onClick:()=>s(!1),disabled:l,children:"Cancel"}),w.jsx("button",{className:"button button--danger",onClick:f,disabled:l||!o.email||!o.password||o.email!==(t==null?void 0:t.email)||o.confirmText!=="DELETE",children:l?"Deleting":"Delete everything"})]})]})}):null]})}var jW=Math.PI/180;function IW(){return typeof window<"u"&&({}.toString.call(window)==="[object Window]"||{}.toString.call(window)==="[object global]")}const $c=typeof global<"u"?global:typeof window<"u"?window:typeof WorkerGlobalScope<"u"?self:{},tt={_global:$c,version:"8.1.3",isBrowser:IW(),isUnminified:/param/.test((function(t){}).toString()),dblClickWindow:400,getAngle(t){return tt.angleDeg?t*jW:t},enableTrace:!1,pointerEventsEnabled:!0,autoDrawEnabled:!0,hitOnDragEnabled:!1,capturePointerEventsEnabled:!1,_mouseListenClick:!1,_touchListenClick:!1,_pointerListenClick:!1,_mouseInDblClickWindow:!1,_touchInDblClickWindow:!1,_pointerInDblClickWindow:!1,pixelRatio:typeof window<"u"&&window.devicePixelRatio||1,dragDistance:3,angleDeg:!0,showWarnings:!0,dragButtons:[0,1],isDragging(){return tt.DD.isDragging},isDragReady(){return!!tt.DD.node},document:$c.document,_injectGlobal(t){$c.Konva=t}},$n=t=>{tt[t.prototype.getClassName()]=t};tt._injectGlobal(tt);class qi{constructor(e=[1,0,0,1,0,0]){this.dirty=!1,this.m=e&&e.slice()||[1,0,0,1,0,0]}reset(){this.m[0]=1,this.m[1]=0,this.m[2]=0,this.m[3]=1,this.m[4]=0,this.m[5]=0}copy(){return new qi(this.m)}copyInto(e){e.m[0]=this.m[0],e.m[1]=this.m[1],e.m[2]=this.m[2],e.m[3]=this.m[3],e.m[4]=this.m[4],e.m[5]=this.m[5]}point(e){var n=this.m;return{x:n[0]*e.x+n[2]*e.y+n[4],y:n[1]*e.x+n[3]*e.y+n[5]}}translate(e,n){return this.m[4]+=this.m[0]*e+this.m[2]*n,this.m[5]+=this.m[1]*e+this.m[3]*n,this}scale(e,n){return this.m[0]*=e,this.m[1]*=e,this.m[2]*=n,this.m[3]*=n,this}rotate(e){var n=Math.cos(e),r=Math.sin(e),i=this.m[0]*n+this.m[2]*r,s=this.m[1]*n+this.m[3]*r,o=this.m[0]*-r+this.m[2]*n,a=this.m[1]*-r+this.m[3]*n;return this.m[0]=i,this.m[1]=s,this.m[2]=o,this.m[3]=a,this}getTranslation(){return{x:this.m[4],y:this.m[5]}}skew(e,n){var r=this.m[0]+this.m[2]*n,i=this.m[1]+this.m[3]*n,s=this.m[2]+this.m[0]*e,o=this.m[3]+this.m[1]*e;return this.m[0]=r,this.m[1]=i,this.m[2]=s,this.m[3]=o,this}multiply(e){var n=this.m[0]*e.m[0]+this.m[2]*e.m[1],r=this.m[1]*e.m[0]+this.m[3]*e.m[1],i=this.m[0]*e.m[2]+this.m[2]*e.m[3],s=this.m[1]*e.m[2]+this.m[3]*e.m[3],o=this.m[0]*e.m[4]+this.m[2]*e.m[5]+this.m[4],a=this.m[1]*e.m[4]+this.m[3]*e.m[5]+this.m[5];return this.m[0]=n,this.m[1]=r,this.m[2]=i,this.m[3]=s,this.m[4]=o,this.m[5]=a,this}invert(){var e=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),n=this.m[3]*e,r=-this.m[1]*e,i=-this.m[2]*e,s=this.m[0]*e,o=e*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),a=e*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);return this.m[0]=n,this.m[1]=r,this.m[2]=i,this.m[3]=s,this.m[4]=o,this.m[5]=a,this}getMatrix(){return this.m}setAbsolutePosition(e,n){var r=this.m[0],i=this.m[1],s=this.m[2],o=this.m[3],a=this.m[4],l=this.m[5],c=(r*(n-l)-i*(e-a))/(r*o-i*s),h=(e-a-s*c)/r;return this.translate(h,c)}decompose(){var e=this.m[0],n=this.m[1],r=this.m[2],i=this.m[3],s=this.m[4],o=this.m[5],a=e*i-n*r;let l={x:s,y:o,rotation:0,scaleX:0,scaleY:0,skewX:0,skewY:0};if(e!=0||n!=0){var c=Math.sqrt(e*e+n*n);l.rotation=n>0?Math.acos(e/c):-Math.acos(e/c),l.scaleX=c,l.scaleY=a/c,l.skewX=(e*r+n*i)/a,l.skewY=0}else if(r!=0||i!=0){var h=Math.sqrt(r*r+i*i);l.rotation=Math.PI/2-(i>0?Math.acos(-r/h):-Math.acos(r/h)),l.scaleX=a/h,l.scaleY=h,l.skewX=0,l.skewY=(e*r+n*i)/a}return l.rotation=ne._getRotation(l.rotation),l}}var OW="[object Array]",DW="[object Number]",FW="[object String]",BW="[object Boolean]",$W=Math.PI/180,zW=180/Math.PI,c1="#",UW="",VW="0",WW="Konva warning: ",jR="Konva error: ",HW="rgb(",d1={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],transparent:[255,255,255,0],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]},GW=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/,wg=[];const qW=typeof requestAnimationFrame<"u"&&requestAnimationFrame||function(t){setTimeout(t,60)},ne={_isElement(t){return!!(t&&t.nodeType==1)},_isFunction(t){return!!(t&&t.constructor&&t.call&&t.apply)},_isPlainObject(t){return!!t&&t.constructor===Object},_isArray(t){return Object.prototype.toString.call(t)===OW},_isNumber(t){return Object.prototype.toString.call(t)===DW&&!isNaN(t)&&isFinite(t)},_isString(t){return Object.prototype.toString.call(t)===FW},_isBoolean(t){return Object.prototype.toString.call(t)===BW},isObject(t){return t instanceof Object},isValidSelector(t){if(typeof t!="string")return!1;var e=t[0];return e==="#"||e==="."||e===e.toUpperCase()},_sign(t){return t===0||t>0?1:-1},requestAnimFrame(t){wg.push(t),wg.length===1&&qW(function(){const e=wg;wg=[],e.forEach(function(n){n()})})},createCanvasElement(){var t=document.createElement("canvas");try{t.style=t.style||{}}catch{}return t},createImageElement(){return document.createElement("img")},_isInDocument(t){for(;t=t.parentNode;)if(t==document)return!0;return!1},_urlToImage(t,e){var n=ne.createImageElement();n.onload=function(){e(n)},n.src=t},_rgbToHex(t,e,n){return((1<<24)+(t<<16)+(e<<8)+n).toString(16).slice(1)},_hexToRgb(t){t=t.replace(c1,UW);var e=parseInt(t,16);return{r:e>>16&255,g:e>>8&255,b:e&255}},getRandomColor(){for(var t=(Math.random()*16777215<<0).toString(16);t.length<6;)t=VW+t;return c1+t},getRGB(t){var e;return t in d1?(e=d1[t],{r:e[0],g:e[1],b:e[2]}):t[0]===c1?this._hexToRgb(t.substring(1)):t.substr(0,4)===HW?(e=GW.exec(t.replace(/ /g,"")),{r:parseInt(e[1],10),g:parseInt(e[2],10),b:parseInt(e[3],10)}):{r:0,g:0,b:0}},colorToRGBA(t){return t=t||"black",ne._namedColorToRBA(t)||ne._hex3ColorToRGBA(t)||ne._hex6ColorToRGBA(t)||ne._rgbColorToRGBA(t)||ne._rgbaColorToRGBA(t)||ne._hslColorToRGBA(t)},_namedColorToRBA(t){var e=d1[t.toLowerCase()];return e?{r:e[0],g:e[1],b:e[2],a:1}:null},_rgbColorToRGBA(t){if(t.indexOf("rgb(")===0){t=t.match(/rgb\(([^)]+)\)/)[1];var e=t.split(/ *, */).map(Number);return{r:e[0],g:e[1],b:e[2],a:1}}},_rgbaColorToRGBA(t){if(t.indexOf("rgba(")===0){t=t.match(/rgba\(([^)]+)\)/)[1];var e=t.split(/ *, */).map(Number);return{r:e[0],g:e[1],b:e[2],a:e[3]}}},_hex6ColorToRGBA(t){if(t[0]==="#"&&t.length===7)return{r:parseInt(t.slice(1,3),16),g:parseInt(t.slice(3,5),16),b:parseInt(t.slice(5,7),16),a:1}},_hex3ColorToRGBA(t){if(t[0]==="#"&&t.length===4)return{r:parseInt(t[1]+t[1],16),g:parseInt(t[2]+t[2],16),b:parseInt(t[3]+t[3],16),a:1}},_hslColorToRGBA(t){if(/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.test(t)){const[e,...n]=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(t),r=Number(n[0])/360,i=Number(n[1])/100,s=Number(n[2])/100;let o,a,l;if(i===0)return l=s*255,{r:Math.round(l),g:Math.round(l),b:Math.round(l),a:1};s<.5?o=s*(1+i):o=s+i-s*i;const c=2*s-o,h=[0,0,0];for(let f=0;f<3;f++)a=r+1/3*-(f-1),a<0&&a++,a>1&&a--,6*a<1?l=c+(o-c)*6*a:2*a<1?l=o:3*a<2?l=c+(o-c)*(2/3-a)*6:l=c,h[f]=l*255;return{r:Math.round(h[0]),g:Math.round(h[1]),b:Math.round(h[2]),a:1}}},haveIntersection(t,e){return!(e.x>t.x+t.width||e.x+e.width<t.x||e.y>t.y+t.height||e.y+e.height<t.y)},cloneObject(t){var e={};for(var n in t)this._isPlainObject(t[n])?e[n]=this.cloneObject(t[n]):this._isArray(t[n])?e[n]=this.cloneArray(t[n]):e[n]=t[n];return e},cloneArray(t){return t.slice(0)},degToRad(t){return t*$W},radToDeg(t){return t*zW},_degToRad(t){return ne.warn("Util._degToRad is removed. Please use public Util.degToRad instead."),ne.degToRad(t)},_radToDeg(t){return ne.warn("Util._radToDeg is removed. Please use public Util.radToDeg instead."),ne.radToDeg(t)},_getRotation(t){return tt.angleDeg?ne.radToDeg(t):t},_capitalize(t){return t.charAt(0).toUpperCase()+t.slice(1)},throw(t){throw new Error(jR+t)},error(t){console.error(jR+t)},warn(t){tt.showWarnings&&console.warn(WW+t)},each(t,e){for(var n in t)e(n,t[n])},_inRange(t,e,n){return e<=t&&t<n},_getProjectionToSegment(t,e,n,r,i,s){var o,a,l,c=(t-n)*(t-n)+(e-r)*(e-r);if(c==0)o=t,a=e,l=(i-n)*(i-n)+(s-r)*(s-r);else{var h=((i-t)*(n-t)+(s-e)*(r-e))/c;h<0?(o=t,a=e,l=(t-i)*(t-i)+(e-s)*(e-s)):h>1?(o=n,a=r,l=(n-i)*(n-i)+(r-s)*(r-s)):(o=t+h*(n-t),a=e+h*(r-e),l=(o-i)*(o-i)+(a-s)*(a-s))}return[o,a,l]},_getProjectionToLine(t,e,n){var r=ne.cloneObject(t),i=Number.MAX_VALUE;return e.forEach(function(s,o){if(!(!n&&o===e.length-1)){var a=e[(o+1)%e.length],l=ne._getProjectionToSegment(s.x,s.y,a.x,a.y,t.x,t.y),c=l[0],h=l[1],f=l[2];f<i&&(r.x=c,r.y=h,i=f)}}),r},_prepareArrayForTween(t,e,n){var r,i=[],s=[];if(t.length>e.length){var o=e;e=t,t=o}for(r=0;r<t.length;r+=2)i.push({x:t[r],y:t[r+1]});for(r=0;r<e.length;r+=2)s.push({x:e[r],y:e[r+1]});var a=[];return s.forEach(function(l){var c=ne._getProjectionToLine(l,i,n);a.push(c.x),a.push(c.y)}),a},_prepareToStringify(t){var e;t.visitedByCircularReferenceRemoval=!0;for(var n in t)if(t.hasOwnProperty(n)&&t[n]&&typeof t[n]=="object"){if(e=Object.getOwnPropertyDescriptor(t,n),t[n].visitedByCircularReferenceRemoval||ne._isElement(t[n]))if(e.configurable)delete t[n];else return null;else if(ne._prepareToStringify(t[n])===null)if(e.configurable)delete t[n];else return null}return delete t.visitedByCircularReferenceRemoval,t},_assign(t,e){for(var n in e)t[n]=e[n];return t},_getFirstPointerId(t){return t.touches?t.changedTouches[0].identifier:999}};function El(t){return ne._isString(t)?'"'+t+'"':Object.prototype.toString.call(t)==="[object Number]"||ne._isBoolean(t)?t:Object.prototype.toString.call(t)}function rA(t){return t>255?255:t<0?0:Math.round(t)}function Me(){if(tt.isUnminified)return function(t,e){return ne._isNumber(t)||ne.warn(El(t)+' is a not valid value for "'+e+'" attribute. The value should be a number.'),t}}function iA(t){if(tt.isUnminified)return function(e,n){let r=ne._isNumber(e),i=ne._isArray(e)&&e.length==t;return!r&&!i&&ne.warn(El(e)+' is a not valid value for "'+n+'" attribute. The value should be a number or Array<number>('+t+")"),e}}function sS(){if(tt.isUnminified)return function(t,e){var n=ne._isNumber(t),r=t==="auto";return n||r||ne.warn(El(t)+' is a not valid value for "'+e+'" attribute. The value should be a number or "auto".'),t}}function Ed(){if(tt.isUnminified)return function(t,e){return ne._isString(t)||ne.warn(El(t)+' is a not valid value for "'+e+'" attribute. The value should be a string.'),t}}function sA(){if(tt.isUnminified)return function(t,e){const n=ne._isString(t),r=Object.prototype.toString.call(t)==="[object CanvasGradient]"||t&&t.addColorStop;return n||r||ne.warn(El(t)+' is a not valid value for "'+e+'" attribute. The value should be a string or a native gradient.'),t}}function YW(){if(tt.isUnminified)return function(t,e){return ne._isArray(t)?t.forEach(function(n){ne._isNumber(n)||ne.warn('"'+e+'" attribute has non numeric element '+n+". Make sure that all elements are numbers.")}):ne.warn(El(t)+' is a not valid value for "'+e+'" attribute. The value should be a array of numbers.'),t}}function ro(){if(tt.isUnminified)return function(t,e){var n=t===!0||t===!1;return n||ne.warn(El(t)+' is a not valid value for "'+e+'" attribute. The value should be a boolean.'),t}}function KW(t){if(tt.isUnminified)return function(e,n){return ne.isObject(e)||ne.warn(El(e)+' is a not valid value for "'+n+'" attribute. The value should be an object with properties '+t),e}}var ch="get",dh="set";const W={addGetterSetter(t,e,n,r,i){W.addGetter(t,e,n),W.addSetter(t,e,r,i),W.addOverloadedGetterSetter(t,e)},addGetter(t,e,n){var r=ch+ne._capitalize(e);t.prototype[r]=t.prototype[r]||function(){var i=this.attrs[e];return i===void 0?n:i}},addSetter(t,e,n,r){var i=dh+ne._capitalize(e);t.prototype[i]||W.overWriteSetter(t,e,n,r)},overWriteSetter(t,e,n,r){var i=dh+ne._capitalize(e);t.prototype[i]=function(s){return n&&s!==void 0&&s!==null&&(s=n.call(this,s,e)),this._setAttr(e,s),r&&r.call(this),this}},addComponentsGetterSetter(t,e,n,r,i){var s=n.length,o=ne._capitalize,a=ch+o(e),l=dh+o(e),c,h;t.prototype[a]=function(){var p={};for(c=0;c<s;c++)h=n[c],p[h]=this.getAttr(e+o(h));return p};var f=KW(n);t.prototype[l]=function(p){var g=this.attrs[e],v;r&&(p=r.call(this,p)),f&&f.call(this,p,e);for(v in p)p.hasOwnProperty(v)&&this._setAttr(e+o(v),p[v]);return this._fireChangeEvent(e,g,p),i&&i.call(this),this},W.addOverloadedGetterSetter(t,e)},addOverloadedGetterSetter(t,e){var n=ne._capitalize(e),r=dh+n,i=ch+n;t.prototype[e]=function(){return arguments.length?(this[r](arguments[0]),this):this[i]()}},addDeprecatedGetterSetter(t,e,n,r){ne.error("Adding deprecated "+e);var i=ch+ne._capitalize(e),s=e+" property is deprecated and will be removed soon. Look at Konva change log for more information.";t.prototype[i]=function(){ne.error(s);var o=this.attrs[e];return o===void 0?n:o},W.addSetter(t,e,r,function(){ne.error(s)}),W.addOverloadedGetterSetter(t,e)},backCompat(t,e){ne.each(e,function(n,r){var i=t.prototype[r],s=ch+ne._capitalize(n),o=dh+ne._capitalize(n);function a(){i.apply(this,arguments),ne.error('"'+n+'" method is deprecated and will be removed soon. Use ""'+r+'" instead.')}t.prototype[n]=a,t.prototype[s]=a,t.prototype[o]=a})},afterSetFilter(){this._filterUpToDate=!1}};function XW(t){var e=[],n=t.length,r=ne,i,s;for(i=0;i<n;i++)s=t[i],r._isNumber(s)?s=Math.round(s*1e3)/1e3:r._isString(s)||(s=s+""),e.push(s);return e}var IR=",",ZW="(",QW=")",JW="([",eH="])",tH=";",nH="()",rH="=",OR=["arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","createLinearGradient","createPattern","createRadialGradient","drawImage","ellipse","fill","fillText","getImageData","createImageData","lineTo","moveTo","putImageData","quadraticCurveTo","rect","restore","rotate","save","scale","setLineDash","setTransform","stroke","strokeText","transform","translate"],iH=["fillStyle","strokeStyle","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","font","textAlign","textBaseline","globalAlpha","globalCompositeOperation","imageSmoothingEnabled"];const sH=100;let W0=class{constructor(e){this.canvas=e,this._context=e._canvas.getContext("2d"),tt.enableTrace&&(this.traceArr=[],this._enableTrace())}fillShape(e){e.fillEnabled()&&this._fill(e)}_fill(e){}strokeShape(e){e.hasStroke()&&this._stroke(e)}_stroke(e){}fillStrokeShape(e){e.attrs.fillAfterStrokeEnabled?(this.strokeShape(e),this.fillShape(e)):(this.fillShape(e),this.strokeShape(e))}getTrace(e,n){var r=this.traceArr,i=r.length,s="",o,a,l,c;for(o=0;o<i;o++)a=r[o],l=a.method,l?(c=a.args,s+=l,e?s+=nH:ne._isArray(c[0])?s+=JW+c.join(IR)+eH:(n&&(c=c.map(h=>typeof h=="number"?Math.floor(h):h)),s+=ZW+c.join(IR)+QW)):(s+=a.property,e||(s+=rH+a.val)),s+=tH;return s}clearTrace(){this.traceArr=[]}_trace(e){var n=this.traceArr,r;n.push(e),r=n.length,r>=sH&&n.shift()}reset(){var e=this.getCanvas().getPixelRatio();this.setTransform(1*e,0,0,1*e,0,0)}getCanvas(){return this.canvas}clear(e){var n=this.getCanvas();e?this.clearRect(e.x||0,e.y||0,e.width||0,e.height||0):this.clearRect(0,0,n.getWidth()/n.pixelRatio,n.getHeight()/n.pixelRatio)}_applyLineCap(e){var n=e.getLineCap();n&&this.setAttr("lineCap",n)}_applyOpacity(e){var n=e.getAbsoluteOpacity();n!==1&&this.setAttr("globalAlpha",n)}_applyLineJoin(e){var n=e.attrs.lineJoin;n&&this.setAttr("lineJoin",n)}setAttr(e,n){this._context[e]=n}arc(e,n,r,i,s,o){this._context.arc(e,n,r,i,s,o)}arcTo(e,n,r,i,s){this._context.arcTo(e,n,r,i,s)}beginPath(){this._context.beginPath()}bezierCurveTo(e,n,r,i,s,o){this._context.bezierCurveTo(e,n,r,i,s,o)}clearRect(e,n,r,i){this._context.clearRect(e,n,r,i)}clip(){this._context.clip()}closePath(){this._context.closePath()}createImageData(e,n){var r=arguments;if(r.length===2)return this._context.createImageData(e,n);if(r.length===1)return this._context.createImageData(e)}createLinearGradient(e,n,r,i){return this._context.createLinearGradient(e,n,r,i)}createPattern(e,n){return this._context.createPattern(e,n)}createRadialGradient(e,n,r,i,s,o){return this._context.createRadialGradient(e,n,r,i,s,o)}drawImage(e,n,r,i,s,o,a,l,c){var h=arguments,f=this._context;h.length===3?f.drawImage(e,n,r):h.length===5?f.drawImage(e,n,r,i,s):h.length===9&&f.drawImage(e,n,r,i,s,o,a,l,c)}ellipse(e,n,r,i,s,o,a,l){this._context.ellipse(e,n,r,i,s,o,a,l)}isPointInPath(e,n){return this._context.isPointInPath(e,n)}fill(e){e?this._context.fill(e):this._context.fill()}fillRect(e,n,r,i){this._context.fillRect(e,n,r,i)}strokeRect(e,n,r,i){this._context.strokeRect(e,n,r,i)}fillText(e,n,r,i){i?this._context.fillText(e,n,r,i):this._context.fillText(e,n,r)}measureText(e){return this._context.measureText(e)}getImageData(e,n,r,i){return this._context.getImageData(e,n,r,i)}lineTo(e,n){this._context.lineTo(e,n)}moveTo(e,n){this._context.moveTo(e,n)}rect(e,n,r,i){this._context.rect(e,n,r,i)}putImageData(e,n,r){this._context.putImageData(e,n,r)}quadraticCurveTo(e,n,r,i){this._context.quadraticCurveTo(e,n,r,i)}restore(){this._context.restore()}rotate(e){this._context.rotate(e)}save(){this._context.save()}scale(e,n){this._context.scale(e,n)}setLineDash(e){this._context.setLineDash?this._context.setLineDash(e):"mozDash"in this._context?this._context.mozDash=e:"webkitLineDash"in this._context&&(this._context.webkitLineDash=e)}getLineDash(){return this._context.getLineDash()}setTransform(e,n,r,i,s,o){this._context.setTransform(e,n,r,i,s,o)}stroke(e){e?this._context.stroke(e):this._context.stroke()}strokeText(e,n,r,i){this._context.strokeText(e,n,r,i)}transform(e,n,r,i,s,o){this._context.transform(e,n,r,i,s,o)}translate(e,n){this._context.translate(e,n)}_enableTrace(){var e=this,n=OR.length,r=this.setAttr,i,s,o=function(a){var l=e[a],c;e[a]=function(){return s=XW(Array.prototype.slice.call(arguments,0)),c=l.apply(e,arguments),e._trace({method:a,args:s}),c}};for(i=0;i<n;i++)o(OR[i]);e.setAttr=function(){r.apply(e,arguments);var a=arguments[0],l=arguments[1];(a==="shadowOffsetX"||a==="shadowOffsetY"||a==="shadowBlur")&&(l=l/this.canvas.getPixelRatio()),e._trace({property:a,val:l})}}_applyGlobalCompositeOperation(e){const n=e.attrs.globalCompositeOperation;var r=!n||n==="source-over";r||this.setAttr("globalCompositeOperation",n)}};iH.forEach(function(t){Object.defineProperty(W0.prototype,t,{get(){return this._context[t]},set(e){this._context[t]=e}})});class oH extends W0{_fillColor(e){var n=e.fill();this.setAttr("fillStyle",n),e._fillFunc(this)}_fillPattern(e){this.setAttr("fillStyle",e._getFillPattern()),e._fillFunc(this)}_fillLinearGradient(e){var n=e._getLinearGradient();n&&(this.setAttr("fillStyle",n),e._fillFunc(this))}_fillRadialGradient(e){var n=e._getRadialGradient();n&&(this.setAttr("fillStyle",n),e._fillFunc(this))}_fill(e){var n=e.fill(),r=e.getFillPriority();if(n&&r==="color"){this._fillColor(e);return}var i=e.getFillPatternImage();if(i&&r==="pattern"){this._fillPattern(e);return}var s=e.getFillLinearGradientColorStops();if(s&&r==="linear-gradient"){this._fillLinearGradient(e);return}var o=e.getFillRadialGradientColorStops();if(o&&r==="radial-gradient"){this._fillRadialGradient(e);return}n?this._fillColor(e):i?this._fillPattern(e):s?this._fillLinearGradient(e):o&&this._fillRadialGradient(e)}_strokeLinearGradient(e){var n=e.getStrokeLinearGradientStartPoint(),r=e.getStrokeLinearGradientEndPoint(),i=e.getStrokeLinearGradientColorStops(),s=this.createLinearGradient(n.x,n.y,r.x,r.y);if(i){for(var o=0;o<i.length;o+=2)s.addColorStop(i[o],i[o+1]);this.setAttr("strokeStyle",s)}}_stroke(e){var n=e.dash(),r=e.getStrokeScaleEnabled();if(e.hasStroke()){if(!r){this.save();var i=this.getCanvas().getPixelRatio();this.setTransform(i,0,0,i,0,0)}this._applyLineCap(e),n&&e.dashEnabled()&&(this.setLineDash(n),this.setAttr("lineDashOffset",e.dashOffset())),this.setAttr("lineWidth",e.strokeWidth()),e.getShadowForStrokeEnabled()||this.setAttr("shadowColor","rgba(0,0,0,0)");var s=e.getStrokeLinearGradientColorStops();s?this._strokeLinearGradient(e):this.setAttr("strokeStyle",e.stroke()),e._strokeFunc(this),r||this.restore()}}_applyShadow(e){var n,r,i,s=(n=e.getShadowRGBA())!==null&&n!==void 0?n:"black",o=(r=e.getShadowBlur())!==null&&r!==void 0?r:5,a=(i=e.getShadowOffset())!==null&&i!==void 0?i:{x:0,y:0},l=e.getAbsoluteScale(),c=this.canvas.getPixelRatio(),h=l.x*c,f=l.y*c;this.setAttr("shadowColor",s),this.setAttr("shadowBlur",o*Math.min(Math.abs(h),Math.abs(f))),this.setAttr("shadowOffsetX",a.x*h),this.setAttr("shadowOffsetY",a.y*f)}}class aH extends W0{_fill(e){this.save(),this.setAttr("fillStyle",e.colorKey),e._fillFuncHit(this),this.restore()}strokeShape(e){e.hasHitStroke()&&this._stroke(e)}_stroke(e){if(e.hasHitStroke()){var n=e.getStrokeScaleEnabled();if(!n){this.save();var r=this.getCanvas().getPixelRatio();this.setTransform(r,0,0,r,0,0)}this._applyLineCap(e);var i=e.hitStrokeWidth(),s=i==="auto"?e.strokeWidth():i;this.setAttr("lineWidth",s),this.setAttr("strokeStyle",e.colorKey),e._strokeFuncHit(this),n||this.restore()}}}var xg;function lH(){if(xg)return xg;var t=ne.createCanvasElement(),e=t.getContext("2d");return xg=function(){var n=tt._global.devicePixelRatio||1,r=e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1;return n/r}(),xg}class H0{constructor(e){this.pixelRatio=1,this.width=0,this.height=0,this.isCache=!1;var n=e||{},r=n.pixelRatio||tt.pixelRatio||lH();this.pixelRatio=r,this._canvas=ne.createCanvasElement(),this._canvas.style.padding="0",this._canvas.style.margin="0",this._canvas.style.border="0",this._canvas.style.background="transparent",this._canvas.style.position="absolute",this._canvas.style.top="0",this._canvas.style.left="0"}getContext(){return this.context}getPixelRatio(){return this.pixelRatio}setPixelRatio(e){var n=this.pixelRatio;this.pixelRatio=e,this.setSize(this.getWidth()/n,this.getHeight()/n)}setWidth(e){this.width=this._canvas.width=e*this.pixelRatio,this._canvas.style.width=e+"px";var n=this.pixelRatio,r=this.getContext()._context;r.scale(n,n)}setHeight(e){this.height=this._canvas.height=e*this.pixelRatio,this._canvas.style.height=e+"px";var n=this.pixelRatio,r=this.getContext()._context;r.scale(n,n)}getWidth(){return this.width}getHeight(){return this.height}setSize(e,n){this.setWidth(e||0),this.setHeight(n||0)}toDataURL(e,n){try{return this._canvas.toDataURL(e,n)}catch{try{return this._canvas.toDataURL()}catch(i){return ne.error("Unable to get data URL. "+i.message+" For more info read https://konvajs.org/docs/posts/Tainted_Canvas.html."),""}}}}W.addGetterSetter(H0,"pixelRatio",void 0,Me());class zc extends H0{constructor(e={width:0,height:0}){super(e),this.context=new oH(this),this.setSize(e.width,e.height)}}class oS extends H0{constructor(e={width:0,height:0}){super(e),this.hitCanvas=!0,this.context=new aH(this),this.setSize(e.width,e.height)}}const Jt={get isDragging(){var t=!1;return Jt._dragElements.forEach(e=>{e.dragStatus==="dragging"&&(t=!0)}),t},justDragged:!1,get node(){var t;return Jt._dragElements.forEach(e=>{t=e.node}),t},_dragElements:new Map,_drag(t){const e=[];Jt._dragElements.forEach((n,r)=>{const{node:i}=n,s=i.getStage();s.setPointersPositions(t),n.pointerId===void 0&&(n.pointerId=ne._getFirstPointerId(t));const o=s._changedPointerPositions.find(c=>c.id===n.pointerId);if(o){if(n.dragStatus!=="dragging"){var a=i.dragDistance(),l=Math.max(Math.abs(o.x-n.startPointerPos.x),Math.abs(o.y-n.startPointerPos.y));if(l<a||(i.startDrag({evt:t}),!i.isDragging()))return}i._setDragPosition(t,n),e.push(i)}}),e.forEach(n=>{n.fire("dragmove",{type:"dragmove",target:n,evt:t},!0)})},_endDragBefore(t){Jt._dragElements.forEach(e=>{const{node:n}=e,r=n.getStage();if(t&&r.setPointersPositions(t),!r._changedPointerPositions.find(o=>o.id===e.pointerId))return;(e.dragStatus==="dragging"||e.dragStatus==="stopped")&&(Jt.justDragged=!0,tt._mouseListenClick=!1,tt._touchListenClick=!1,tt._pointerListenClick=!1,e.dragStatus="stopped");const s=e.node.getLayer()||e.node instanceof tt.Stage&&e.node;s&&s.batchDraw()})},_endDragAfter(t){Jt._dragElements.forEach((e,n)=>{e.dragStatus==="stopped"&&e.node.fire("dragend",{type:"dragend",target:e.node,evt:t},!0),e.dragStatus!=="dragging"&&Jt._dragElements.delete(n)})}};tt.isBrowser&&(window.addEventListener("mouseup",Jt._endDragBefore,!0),window.addEventListener("touchend",Jt._endDragBefore,!0),window.addEventListener("mousemove",Jt._drag),window.addEventListener("touchmove",Jt._drag),window.addEventListener("mouseup",Jt._endDragAfter,!1),window.addEventListener("touchend",Jt._endDragAfter,!1));var om="absoluteOpacity",_g="allEventListeners",Ko="absoluteTransform",DR="absoluteScale",hh="canvas",uH="Change",cH="children",dH="konva",Cx="listening",FR="mouseenter",BR="mouseleave",$R="set",zR="Shape",am=" ",UR="stage",Ha="transform",hH="Stage",kx="visible",fH=["xChange.konva","yChange.konva","scaleXChange.konva","scaleYChange.konva","skewXChange.konva","skewYChange.konva","rotationChange.konva","offsetXChange.konva","offsetYChange.konva","transformsEnabledChange.konva"].join(am);let pH=1,je=class Ex{constructor(e){this._id=pH++,this.eventListeners={},this.attrs={},this.index=0,this._allEventListeners=null,this.parent=null,this._cache=new Map,this._attachedDepsListeners=new Map,this._lastPos=null,this._batchingTransformChange=!1,this._needClearTransformCache=!1,this._filterUpToDate=!1,this._isUnderCache=!1,this._dragEventId=null,this._shouldFireChangeEvents=!1,this.setAttrs(e),this._shouldFireChangeEvents=!0}hasChildren(){return!1}_clearCache(e){(e===Ha||e===Ko)&&this._cache.get(e)?this._cache.get(e).dirty=!0:e?this._cache.delete(e):this._cache.clear()}_getCache(e,n){var r=this._cache.get(e),i=e===Ha||e===Ko,s=r===void 0||i&&r.dirty===!0;return s&&(r=n.call(this),this._cache.set(e,r)),r}_calculate(e,n,r){if(!this._attachedDepsListeners.get(e)){const i=n.map(s=>s+"Change.konva").join(am);this.on(i,()=>{this._clearCache(e)}),this._attachedDepsListeners.set(e,!0)}return this._getCache(e,r)}_getCanvasCache(){return this._cache.get(hh)}_clearSelfAndDescendantCache(e){this._clearCache(e),e===Ko&&this.fire("absoluteTransformChange")}clearCache(){return this._cache.delete(hh),this._clearSelfAndDescendantCache(),this._requestDraw(),this}cache(e){var n=e||{},r={};(n.x===void 0||n.y===void 0||n.width===void 0||n.height===void 0)&&(r=this.getClientRect({skipTransform:!0,relativeTo:this.getParent()}));var i=Math.ceil(n.width||r.width),s=Math.ceil(n.height||r.height),o=n.pixelRatio,a=n.x===void 0?r.x:n.x,l=n.y===void 0?r.y:n.y,c=n.offset||0,h=n.drawBorder||!1,f=n.hitCanvasPixelRatio||1;if(!i||!s){ne.error("Can not cache the node. Width or height of the node equals 0. Caching is skipped.");return}i+=c*2,s+=c*2,a-=c,l-=c;var p=new zc({pixelRatio:o,width:i,height:s}),g=new zc({pixelRatio:o,width:0,height:0}),v=new oS({pixelRatio:f,width:i,height:s}),x=p.getContext(),k=v.getContext();return v.isCache=!0,p.isCache=!0,this._cache.delete(hh),this._filterUpToDate=!1,n.imageSmoothingEnabled===!1&&(p.getContext()._context.imageSmoothingEnabled=!1,g.getContext()._context.imageSmoothingEnabled=!1),x.save(),k.save(),x.translate(-a,-l),k.translate(-a,-l),this._isUnderCache=!0,this._clearSelfAndDescendantCache(om),this._clearSelfAndDescendantCache(DR),this.drawScene(p,this),this.drawHit(v,this),this._isUnderCache=!1,x.restore(),k.restore(),h&&(x.save(),x.beginPath(),x.rect(0,0,i,s),x.closePath(),x.setAttr("strokeStyle","red"),x.setAttr("lineWidth",5),x.stroke(),x.restore()),this._cache.set(hh,{scene:p,filter:g,hit:v,x:a,y:l}),this._requestDraw(),this}isCached(){return this._cache.has(hh)}getClientRect(e){throw new Error('abstract "getClientRect" method call')}_transformedRect(e,n){var r=[{x:e.x,y:e.y},{x:e.x+e.width,y:e.y},{x:e.x+e.width,y:e.y+e.height},{x:e.x,y:e.y+e.height}],i,s,o,a,l=this.getAbsoluteTransform(n);return r.forEach(function(c){var h=l.point(c);i===void 0&&(i=o=h.x,s=a=h.y),i=Math.min(i,h.x),s=Math.min(s,h.y),o=Math.max(o,h.x),a=Math.max(a,h.y)}),{x:i,y:s,width:o-i,height:a-s}}_drawCachedSceneCanvas(e){e.save(),e._applyOpacity(this),e._applyGlobalCompositeOperation(this);const n=this._getCanvasCache();e.translate(n.x,n.y);var r=this._getCachedSceneCanvas(),i=r.pixelRatio;e.drawImage(r._canvas,0,0,r.width/i,r.height/i),e.restore()}_drawCachedHitCanvas(e){var n=this._getCanvasCache(),r=n.hit;e.save(),e.translate(n.x,n.y),e.drawImage(r._canvas,0,0,r.width/r.pixelRatio,r.height/r.pixelRatio),e.restore()}_getCachedSceneCanvas(){var e=this.filters(),n=this._getCanvasCache(),r=n.scene,i=n.filter,s=i.getContext(),o,a,l,c;if(e){if(!this._filterUpToDate){var h=r.pixelRatio;i.setSize(r.width/r.pixelRatio,r.height/r.pixelRatio);try{for(o=e.length,s.clear(),s.drawImage(r._canvas,0,0,r.getWidth()/h,r.getHeight()/h),a=s.getImageData(0,0,i.getWidth(),i.getHeight()),l=0;l<o;l++){if(c=e[l],typeof c!="function"){ne.error("Filter should be type of function, but got "+typeof c+" instead. Please check correct filters");continue}c.call(this,a),s.putImageData(a,0,0)}}catch(f){ne.error("Unable to apply filter. "+f.message+" This post my help you https://konvajs.org/docs/posts/Tainted_Canvas.html.")}this._filterUpToDate=!0}return i}return r}on(e,n){if(this._cache&&this._cache.delete(_g),arguments.length===3)return this._delegate.apply(this,arguments);var r=e.split(am),i=r.length,s,o,a,l,c;for(s=0;s<i;s++)o=r[s],a=o.split("."),l=a[0],c=a[1]||"",this.eventListeners[l]||(this.eventListeners[l]=[]),this.eventListeners[l].push({name:c,handler:n});return this}off(e,n){var r=(e||"").split(am),i=r.length,s,o,a,l,c,h;if(this._cache&&this._cache.delete(_g),!e)for(o in this.eventListeners)this._off(o);for(s=0;s<i;s++)if(a=r[s],l=a.split("."),c=l[0],h=l[1],c)this.eventListeners[c]&&this._off(c,h,n);else for(o in this.eventListeners)this._off(o,h,n);return this}dispatchEvent(e){var n={target:this,type:e.type,evt:e};return this.fire(e.type,n),this}addEventListener(e,n){return this.on(e,function(r){n.call(this,r.evt)}),this}removeEventListener(e){return this.off(e),this}_delegate(e,n,r){var i=this;this.on(e,function(s){for(var o=s.target.findAncestors(n,!0,i),a=0;a<o.length;a++)s=ne.cloneObject(s),s.currentTarget=o[a],r.call(o[a],s)})}remove(){return this.isDragging()&&this.stopDrag(),Jt._dragElements.delete(this._id),this._remove(),this}_clearCaches(){this._clearSelfAndDescendantCache(Ko),this._clearSelfAndDescendantCache(om),this._clearSelfAndDescendantCache(DR),this._clearSelfAndDescendantCache(UR),this._clearSelfAndDescendantCache(kx),this._clearSelfAndDescendantCache(Cx)}_remove(){this._clearCaches();var e=this.getParent();e&&e.children&&(e.children.splice(this.index,1),e._setChildrenIndices(),this.parent=null)}destroy(){return this.remove(),this}getAttr(e){var n="get"+ne._capitalize(e);return ne._isFunction(this[n])?this[n]():this.attrs[e]}getAncestors(){for(var e=this.getParent(),n=[];e;)n.push(e),e=e.getParent();return n}getAttrs(){return this.attrs||{}}setAttrs(e){return this._batchTransformChanges(()=>{var n,r;if(!e)return this;for(n in e)n!==cH&&(r=$R+ne._capitalize(n),ne._isFunction(this[r])?this[r](e[n]):this._setAttr(n,e[n]))}),this}isListening(){return this._getCache(Cx,this._isListening)}_isListening(e){if(!this.listening())return!1;const r=this.getParent();return r&&r!==e&&this!==e?r._isListening(e):!0}isVisible(){return this._getCache(kx,this._isVisible)}_isVisible(e){if(!this.visible())return!1;const r=this.getParent();return r&&r!==e&&this!==e?r._isVisible(e):!0}shouldDrawHit(e,n=!1){if(e)return this._isVisible(e)&&this._isListening(e);var r=this.getLayer(),i=!1;Jt._dragElements.forEach(o=>{o.dragStatus==="dragging"&&(o.node.nodeType==="Stage"||o.node.getLayer()===r)&&(i=!0)});var s=!n&&!tt.hitOnDragEnabled&&i;return this.isListening()&&this.isVisible()&&!s}show(){return this.visible(!0),this}hide(){return this.visible(!1),this}getZIndex(){return this.index||0}getAbsoluteZIndex(){var e=this.getDepth(),n=this,r=0,i,s,o,a;function l(c){for(i=[],s=c.length,o=0;o<s;o++)a=c[o],r++,a.nodeType!==zR&&(i=i.concat(a.getChildren().slice())),a._id===n._id&&(o=s);i.length>0&&i[0].getDepth()<=e&&l(i)}return n.nodeType!==hH&&l(n.getStage().getChildren()),r}getDepth(){for(var e=0,n=this.parent;n;)e++,n=n.parent;return e}_batchTransformChanges(e){this._batchingTransformChange=!0,e(),this._batchingTransformChange=!1,this._needClearTransformCache&&(this._clearCache(Ha),this._clearSelfAndDescendantCache(Ko)),this._needClearTransformCache=!1}setPosition(e){return this._batchTransformChanges(()=>{this.x(e.x),this.y(e.y)}),this}getPosition(){return{x:this.x(),y:this.y()}}getRelativePointerPosition(){if(!this.getStage())return null;var e=this.getStage().getPointerPosition();if(!e)return null;var n=this.getAbsoluteTransform().copy();return n.invert(),n.point(e)}getAbsolutePosition(e){let n=!1,r=this.parent;for(;r;){if(r.isCached()){n=!0;break}r=r.parent}n&&!e&&(e=!0);var i=this.getAbsoluteTransform(e).getMatrix(),s=new qi,o=this.offset();return s.m=i.slice(),s.translate(o.x,o.y),s.getTranslation()}setAbsolutePosition(e){var n=this._clearTransform();this.attrs.x=n.x,this.attrs.y=n.y,delete n.x,delete n.y,this._clearCache(Ha);var r=this._getAbsoluteTransform().copy();return r.invert(),r.translate(e.x,e.y),e={x:this.attrs.x+r.getTranslation().x,y:this.attrs.y+r.getTranslation().y},this._setTransform(n),this.setPosition({x:e.x,y:e.y}),this._clearCache(Ha),this._clearSelfAndDescendantCache(Ko),this}_setTransform(e){var n;for(n in e)this.attrs[n]=e[n]}_clearTransform(){var e={x:this.x(),y:this.y(),rotation:this.rotation(),scaleX:this.scaleX(),scaleY:this.scaleY(),offsetX:this.offsetX(),offsetY:this.offsetY(),skewX:this.skewX(),skewY:this.skewY()};return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scaleX=1,this.attrs.scaleY=1,this.attrs.offsetX=0,this.attrs.offsetY=0,this.attrs.skewX=0,this.attrs.skewY=0,e}move(e){var n=e.x,r=e.y,i=this.x(),s=this.y();return n!==void 0&&(i+=n),r!==void 0&&(s+=r),this.setPosition({x:i,y:s}),this}_eachAncestorReverse(e,n){var r=[],i=this.getParent(),s,o;if(!(n&&n._id===this._id)){for(r.unshift(this);i&&(!n||i._id!==n._id);)r.unshift(i),i=i.parent;for(s=r.length,o=0;o<s;o++)e(r[o])}}rotate(e){return this.rotation(this.rotation()+e),this}moveToTop(){if(!this.parent)return ne.warn("Node has no parent. moveToTop function is ignored."),!1;var e=this.index;return this.parent.children.splice(e,1),this.parent.children.push(this),this.parent._setChildrenIndices(),!0}moveUp(){if(!this.parent)return ne.warn("Node has no parent. moveUp function is ignored."),!1;var e=this.index,n=this.parent.getChildren().length;return e<n-1?(this.parent.children.splice(e,1),this.parent.children.splice(e+1,0,this),this.parent._setChildrenIndices(),!0):!1}moveDown(){if(!this.parent)return ne.warn("Node has no parent. moveDown function is ignored."),!1;var e=this.index;return e>0?(this.parent.children.splice(e,1),this.parent.children.splice(e-1,0,this),this.parent._setChildrenIndices(),!0):!1}moveToBottom(){if(!this.parent)return ne.warn("Node has no parent. moveToBottom function is ignored."),!1;var e=this.index;return e>0?(this.parent.children.splice(e,1),this.parent.children.unshift(this),this.parent._setChildrenIndices(),!0):!1}setZIndex(e){if(!this.parent)return ne.warn("Node has no parent. zIndex parameter is ignored."),this;(e<0||e>=this.parent.children.length)&&ne.warn("Unexpected value "+e+" for zIndex property. zIndex is just index of a node in children of its parent. Expected value is from 0 to "+(this.parent.children.length-1)+".");var n=this.index;return this.parent.children.splice(n,1),this.parent.children.splice(e,0,this),this.parent._setChildrenIndices(),this}getAbsoluteOpacity(){return this._getCache(om,this._getAbsoluteOpacity)}_getAbsoluteOpacity(){var e=this.opacity(),n=this.getParent();return n&&!n._isUnderCache&&(e*=n.getAbsoluteOpacity()),e}moveTo(e){return this.getParent()!==e&&(this._remove(),e.add(this)),this}toObject(){var e={},n=this.getAttrs(),r,i,s,o,a;e.attrs={};for(r in n)i=n[r],a=ne.isObject(i)&&!ne._isPlainObject(i)&&!ne._isArray(i),!a&&(s=typeof this[r]=="function"&&this[r],delete n[r],o=s?s.call(this):null,n[r]=i,o!==i&&(e.attrs[r]=i));return e.className=this.getClassName(),ne._prepareToStringify(e)}toJSON(){return JSON.stringify(this.toObject())}getParent(){return this.parent}findAncestors(e,n,r){var i=[];n&&this._isMatch(e)&&i.push(this);for(var s=this.parent;s;){if(s===r)return i;s._isMatch(e)&&i.push(s),s=s.parent}return i}isAncestorOf(e){return!1}findAncestor(e,n,r){return this.findAncestors(e,n,r)[0]}_isMatch(e){if(!e)return!1;if(typeof e=="function")return e(this);var n=e.replace(/ /g,"").split(","),r=n.length,i,s;for(i=0;i<r;i++)if(s=n[i],ne.isValidSelector(s)||(ne.warn('Selector "'+s+'" is invalid. Allowed selectors examples are "#foo", ".bar" or "Group".'),ne.warn('If you have a custom shape with such className, please change it to start with upper letter like "Triangle".'),ne.warn("Konva is awesome, right?")),s.charAt(0)==="#"){if(this.id()===s.slice(1))return!0}else if(s.charAt(0)==="."){if(this.hasName(s.slice(1)))return!0}else if(this.className===s||this.nodeType===s)return!0;return!1}getLayer(){var e=this.getParent();return e?e.getLayer():null}getStage(){return this._getCache(UR,this._getStage)}_getStage(){var e=this.getParent();if(e)return e.getStage()}fire(e,n={},r){return n.target=n.target||this,r?this._fireAndBubble(e,n):this._fire(e,n),this}getAbsoluteTransform(e){return e?this._getAbsoluteTransform(e):this._getCache(Ko,this._getAbsoluteTransform)}_getAbsoluteTransform(e){var n;if(e)return n=new qi,this._eachAncestorReverse(function(i){var s=i.transformsEnabled();s==="all"?n.multiply(i.getTransform()):s==="position"&&n.translate(i.x()-i.offsetX(),i.y()-i.offsetY())},e),n;n=this._cache.get(Ko)||new qi,this.parent?this.parent.getAbsoluteTransform().copyInto(n):n.reset();var r=this.transformsEnabled();if(r==="all")n.multiply(this.getTransform());else if(r==="position"){const i=this.attrs.x||0,s=this.attrs.y||0,o=this.attrs.offsetX||0,a=this.attrs.offsetY||0;n.translate(i-o,s-a)}return n.dirty=!1,n}getAbsoluteScale(e){for(var n=this;n;)n._isUnderCache&&(e=n),n=n.getParent();const i=this.getAbsoluteTransform(e).decompose();return{x:i.scaleX,y:i.scaleY}}getAbsoluteRotation(){return this.getAbsoluteTransform().decompose().rotation}getTransform(){return this._getCache(Ha,this._getTransform)}_getTransform(){var e,n,r=this._cache.get(Ha)||new qi;r.reset();var i=this.x(),s=this.y(),o=tt.getAngle(this.rotation()),a=(e=this.attrs.scaleX)!==null&&e!==void 0?e:1,l=(n=this.attrs.scaleY)!==null&&n!==void 0?n:1,c=this.attrs.skewX||0,h=this.attrs.skewY||0,f=this.attrs.offsetX||0,p=this.attrs.offsetY||0;return(i!==0||s!==0)&&r.translate(i,s),o!==0&&r.rotate(o),(c!==0||h!==0)&&r.skew(c,h),(a!==1||l!==1)&&r.scale(a,l),(f!==0||p!==0)&&r.translate(-1*f,-1*p),r.dirty=!1,r}clone(e){var n=ne.cloneObject(this.attrs),r,i,s,o,a;for(r in e)n[r]=e[r];var l=new this.constructor(n);for(r in this.eventListeners)for(i=this.eventListeners[r],s=i.length,o=0;o<s;o++)a=i[o],a.name.indexOf(dH)<0&&(l.eventListeners[r]||(l.eventListeners[r]=[]),l.eventListeners[r].push(a));return l}_toKonvaCanvas(e){e=e||{};var n=this.getClientRect(),r=this.getStage(),i=e.x!==void 0?e.x:n.x,s=e.y!==void 0?e.y:n.y,o=e.pixelRatio||1,a=new zc({width:e.width||n.width||(r?r.width():0),height:e.height||n.height||(r?r.height():0),pixelRatio:o}),l=a.getContext();return l.save(),(i||s)&&l.translate(-1*i,-1*s),this.drawScene(a),l.restore(),a}toCanvas(e){return this._toKonvaCanvas(e)._canvas}toDataURL(e){e=e||{};var n=e.mimeType||null,r=e.quality||null,i=this._toKonvaCanvas(e).toDataURL(n,r);return e.callback&&e.callback(i),i}toImage(e){if(!e||!e.callback)throw"callback required for toImage method config argument";var n=e.callback;delete e.callback,ne._urlToImage(this.toDataURL(e),function(r){n(r)})}setSize(e){return this.width(e.width),this.height(e.height),this}getSize(){return{width:this.width(),height:this.height()}}getClassName(){return this.className||this.nodeType}getType(){return this.nodeType}getDragDistance(){return this.attrs.dragDistance!==void 0?this.attrs.dragDistance:this.parent?this.parent.getDragDistance():tt.dragDistance}_off(e,n,r){var i=this.eventListeners[e],s,o,a;for(s=0;s<i.length;s++)if(o=i[s].name,a=i[s].handler,(o!=="konva"||n==="konva")&&(!n||o===n)&&(!r||r===a)){if(i.splice(s,1),i.length===0){delete this.eventListeners[e];break}s--}}_fireChangeEvent(e,n,r){this._fire(e+uH,{oldVal:n,newVal:r})}addName(e){if(!this.hasName(e)){var n=this.name(),r=n?n+" "+e:e;this.name(r)}return this}hasName(e){if(!e)return!1;const n=this.name();if(!n)return!1;var r=(n||"").split(/\s/g);return r.indexOf(e)!==-1}removeName(e){var n=(this.name()||"").split(/\s/g),r=n.indexOf(e);return r!==-1&&(n.splice(r,1),this.name(n.join(" "))),this}setAttr(e,n){var r=this[$R+ne._capitalize(e)];return ne._isFunction(r)?r.call(this,n):this._setAttr(e,n),this}_requestDraw(){if(tt.autoDrawEnabled){const e=this.getLayer()||this.getStage();e==null||e.batchDraw()}}_setAttr(e,n){var r=this.attrs[e];r===n&&!ne.isObject(n)||(n==null?delete this.attrs[e]:this.attrs[e]=n,this._shouldFireChangeEvents&&this._fireChangeEvent(e,r,n),this._requestDraw())}_setComponentAttr(e,n,r){var i;r!==void 0&&(i=this.attrs[e],i||(this.attrs[e]=this.getAttr(e)),this.attrs[e][n]=r,this._fireChangeEvent(e,i,r))}_fireAndBubble(e,n,r){n&&this.nodeType===zR&&(n.target=this);var i=(e===FR||e===BR)&&(r&&(this===r||this.isAncestorOf&&this.isAncestorOf(r))||this.nodeType==="Stage"&&!r);if(!i){this._fire(e,n);var s=(e===FR||e===BR)&&r&&r.isAncestorOf&&r.isAncestorOf(this)&&!r.isAncestorOf(this.parent);(n&&!n.cancelBubble||!n)&&this.parent&&this.parent.isListening()&&!s&&(r&&r.parent?this._fireAndBubble.call(this.parent,e,n,r):this._fireAndBubble.call(this.parent,e,n))}}_getProtoListeners(e){let n=this._cache.get(_g);if(!n){n={};let i=Object.getPrototypeOf(this);for(;i;){if(!i.eventListeners){i=Object.getPrototypeOf(i);continue}for(var r in i.eventListeners){const s=i.eventListeners[r],o=n[r]||[];n[r]=s.concat(o)}i=Object.getPrototypeOf(i)}this._cache.set(_g,n)}return n[e]}_fire(e,n){n=n||{},n.currentTarget=this,n.type=e;const r=this._getProtoListeners(e);if(r)for(var i=0;i<r.length;i++)r[i].handler.call(this,n);const s=this.eventListeners[e];if(s)for(var i=0;i<s.length;i++)s[i].handler.call(this,n)}draw(){return this.drawScene(),this.drawHit(),this}_createDragElement(e){var n=e?e.pointerId:void 0,r=this.getStage(),i=this.getAbsolutePosition(),s=r._getPointerById(n)||r._changedPointerPositions[0]||i;Jt._dragElements.set(this._id,{node:this,startPointerPos:s,offset:{x:s.x-i.x,y:s.y-i.y},dragStatus:"ready",pointerId:n})}startDrag(e,n=!0){Jt._dragElements.has(this._id)||this._createDragElement(e);const r=Jt._dragElements.get(this._id);r.dragStatus="dragging",this.fire("dragstart",{type:"dragstart",target:this,evt:e&&e.evt},n)}_setDragPosition(e,n){const r=this.getStage()._getPointerById(n.pointerId);if(r){var i={x:r.x-n.offset.x,y:r.y-n.offset.y},s=this.dragBoundFunc();if(s!==void 0){const o=s.call(this,i,e);o?i=o:ne.warn("dragBoundFunc did not return any value. That is unexpected behavior. You must return new absolute position from dragBoundFunc.")}(!this._lastPos||this._lastPos.x!==i.x||this._lastPos.y!==i.y)&&(this.setAbsolutePosition(i),this._requestDraw()),this._lastPos=i}}stopDrag(e){const n=Jt._dragElements.get(this._id);n&&(n.dragStatus="stopped"),Jt._endDragBefore(e),Jt._endDragAfter(e)}setDraggable(e){this._setAttr("draggable",e),this._dragChange()}isDragging(){const e=Jt._dragElements.get(this._id);return e?e.dragStatus==="dragging":!1}_listenDrag(){this._dragCleanup(),this.on("mousedown.konva touchstart.konva",function(e){var n=e.evt.button!==void 0,r=!n||tt.dragButtons.indexOf(e.evt.button)>=0;if(r&&!this.isDragging()){var i=!1;Jt._dragElements.forEach(s=>{this.isAncestorOf(s.node)&&(i=!0)}),i||this._createDragElement(e)}})}_dragChange(){if(this.attrs.draggable)this._listenDrag();else{this._dragCleanup();var e=this.getStage();if(!e)return;const n=Jt._dragElements.get(this._id),r=n&&n.dragStatus==="dragging",i=n&&n.dragStatus==="ready";r?this.stopDrag():i&&Jt._dragElements.delete(this._id)}}_dragCleanup(){this.off("mousedown.konva"),this.off("touchstart.konva")}isClientRectOnScreen(e={x:0,y:0}){const n=this.getStage();if(!n)return!1;const r={x:-e.x,y:-e.y,width:n.width()+e.x,height:n.height()+e.y};return ne.haveIntersection(r,this.getClientRect())}static create(e,n){return ne._isString(e)&&(e=JSON.parse(e)),this._createNode(e,n)}static _createNode(e,n){var r=Ex.prototype.getClassName.call(e),i=e.children,s,o,a;n&&(e.attrs.container=n),tt[r]||(ne.warn('Can not find a node with class name "'+r+'". Fallback to "Shape".'),r="Shape");const l=tt[r];if(s=new l(e.attrs),i)for(o=i.length,a=0;a<o;a++)s.add(Ex._createNode(i[a]));return s}};je.prototype.nodeType="Node";je.prototype._attrsAffectingSize=[];je.prototype.eventListeners={};je.prototype.on.call(je.prototype,fH,function(){if(this._batchingTransformChange){this._needClearTransformCache=!0;return}this._clearCache(Ha),this._clearSelfAndDescendantCache(Ko)});je.prototype.on.call(je.prototype,"visibleChange.konva",function(){this._clearSelfAndDescendantCache(kx)});je.prototype.on.call(je.prototype,"listeningChange.konva",function(){this._clearSelfAndDescendantCache(Cx)});je.prototype.on.call(je.prototype,"opacityChange.konva",function(){this._clearSelfAndDescendantCache(om)});const vn=W.addGetterSetter;vn(je,"zIndex");vn(je,"absolutePosition");vn(je,"position");vn(je,"x",0,Me());vn(je,"y",0,Me());vn(je,"globalCompositeOperation","source-over",Ed());vn(je,"opacity",1,Me());vn(je,"name","",Ed());vn(je,"id","",Ed());vn(je,"rotation",0,Me());W.addComponentsGetterSetter(je,"scale",["x","y"]);vn(je,"scaleX",1,Me());vn(je,"scaleY",1,Me());W.addComponentsGetterSetter(je,"skew",["x","y"]);vn(je,"skewX",0,Me());vn(je,"skewY",0,Me());W.addComponentsGetterSetter(je,"offset",["x","y"]);vn(je,"offsetX",0,Me());vn(je,"offsetY",0,Me());vn(je,"dragDistance",null,Me());vn(je,"width",0,Me());vn(je,"height",0,Me());vn(je,"listening",!0,ro());vn(je,"preventDefault",!0,ro());vn(je,"filters",null,function(t){return this._filterUpToDate=!1,t});vn(je,"visible",!0,ro());vn(je,"transformsEnabled","all",Ed());vn(je,"size");vn(je,"dragBoundFunc");vn(je,"draggable",!1,ro());W.backCompat(je,{rotateDeg:"rotate",setRotationDeg:"setRotation",getRotationDeg:"getRotation"});class Zi extends je{constructor(){super(...arguments),this.children=[]}getChildren(e){if(!e)return this.children||[];const n=this.children||[];var r=[];return n.forEach(function(i){e(i)&&r.push(i)}),r}hasChildren(){return this.getChildren().length>0}removeChildren(){return this.getChildren().forEach(e=>{e.parent=null,e.index=0,e.remove()}),this.children=[],this._requestDraw(),this}destroyChildren(){return this.getChildren().forEach(e=>{e.parent=null,e.index=0,e.destroy()}),this.children=[],this._requestDraw(),this}add(...e){if(arguments.length>1){for(var n=0;n<arguments.length;n++)this.add(arguments[n]);return this}var r=e[0];return r.getParent()?(r.moveTo(this),this):(this._validateAdd(r),r.index=this.getChildren().length,r.parent=this,r._clearCaches(),this.getChildren().push(r),this._fire("add",{child:r}),this._requestDraw(),this)}destroy(){return this.hasChildren()&&this.destroyChildren(),super.destroy(),this}find(e){return this._generalFind(e,!1)}findOne(e){var n=this._generalFind(e,!0);return n.length>0?n[0]:void 0}_generalFind(e,n){var r=[];return this._descendants(i=>{const s=i._isMatch(e);return s&&r.push(i),!!(s&&n)}),r}_descendants(e){let n=!1;const r=this.getChildren();for(const i of r){if(n=e(i),n)return!0;if(i.hasChildren()&&(n=i._descendants(e),n))return!0}return!1}toObject(){var e=je.prototype.toObject.call(this);return e.children=[],this.getChildren().forEach(n=>{e.children.push(n.toObject())}),e}isAncestorOf(e){for(var n=e.getParent();n;){if(n._id===this._id)return!0;n=n.getParent()}return!1}clone(e){var n=je.prototype.clone.call(this,e);return this.getChildren().forEach(function(r){n.add(r.clone())}),n}getAllIntersections(e){var n=[];return this.find("Shape").forEach(function(r){r.isVisible()&&r.intersects(e)&&n.push(r)}),n}_clearSelfAndDescendantCache(e){var n;super._clearSelfAndDescendantCache(e),!this.isCached()&&((n=this.children)===null||n===void 0||n.forEach(function(r){r._clearSelfAndDescendantCache(e)}))}_setChildrenIndices(){var e;(e=this.children)===null||e===void 0||e.forEach(function(n,r){n.index=r}),this._requestDraw()}drawScene(e,n){var r=this.getLayer(),i=e||r&&r.getCanvas(),s=i&&i.getContext(),o=this._getCanvasCache(),a=o&&o.scene,l=i&&i.isCache;if(!this.isVisible()&&!l)return this;if(a){s.save();var c=this.getAbsoluteTransform(n).getMatrix();s.transform(c[0],c[1],c[2],c[3],c[4],c[5]),this._drawCachedSceneCanvas(s),s.restore()}else this._drawChildren("drawScene",i,n);return this}drawHit(e,n){if(!this.shouldDrawHit(n))return this;var r=this.getLayer(),i=e||r&&r.hitCanvas,s=i&&i.getContext(),o=this._getCanvasCache(),a=o&&o.hit;if(a){s.save();var l=this.getAbsoluteTransform(n).getMatrix();s.transform(l[0],l[1],l[2],l[3],l[4],l[5]),this._drawCachedHitCanvas(s),s.restore()}else this._drawChildren("drawHit",i,n);return this}_drawChildren(e,n,r){var i,s=n&&n.getContext(),o=this.clipWidth(),a=this.clipHeight(),l=this.clipFunc(),c=o&&a||l;const h=r===this;if(c){s.save();var f=this.getAbsoluteTransform(r),p=f.getMatrix();if(s.transform(p[0],p[1],p[2],p[3],p[4],p[5]),s.beginPath(),l)l.call(this,s,this);else{var g=this.clipX(),v=this.clipY();s.rect(g,v,o,a)}s.clip(),p=f.copy().invert().getMatrix(),s.transform(p[0],p[1],p[2],p[3],p[4],p[5])}var x=!h&&this.globalCompositeOperation()!=="source-over"&&e==="drawScene";x&&(s.save(),s._applyGlobalCompositeOperation(this)),(i=this.children)===null||i===void 0||i.forEach(function(k){k[e](n,r)}),x&&s.restore(),c&&s.restore()}getClientRect(e){var n;e=e||{};var r=e.skipTransform,i=e.relativeTo,s,o,a,l,c={x:1/0,y:1/0,width:0,height:0},h=this;(n=this.children)===null||n===void 0||n.forEach(function(x){if(x.visible()){var k=x.getClientRect({relativeTo:h,skipShadow:e.skipShadow,skipStroke:e.skipStroke});k.width===0&&k.height===0||(s===void 0?(s=k.x,o=k.y,a=k.x+k.width,l=k.y+k.height):(s=Math.min(s,k.x),o=Math.min(o,k.y),a=Math.max(a,k.x+k.width),l=Math.max(l,k.y+k.height)))}});for(var f=this.find("Shape"),p=!1,g=0;g<f.length;g++){var v=f[g];if(v._isVisible(this)){p=!0;break}}return p&&s!==void 0?c={x:s,y:o,width:a-s,height:l-o}:c={x:0,y:0,width:0,height:0},r?c:this._transformedRect(c,i)}}W.addComponentsGetterSetter(Zi,"clip",["x","y","width","height"]);W.addGetterSetter(Zi,"clipX",void 0,Me());W.addGetterSetter(Zi,"clipY",void 0,Me());W.addGetterSetter(Zi,"clipWidth",void 0,Me());W.addGetterSetter(Zi,"clipHeight",void 0,Me());W.addGetterSetter(Zi,"clipFunc");const jf=new Map,oA=tt._global.PointerEvent!==void 0;function h1(t){return jf.get(t)}function aS(t){return{evt:t,pointerId:t.pointerId}}function aA(t,e){return jf.get(t)===e}function lA(t,e){Xh(t),e.getStage()&&(jf.set(t,e),oA&&e._fire("gotpointercapture",aS(new PointerEvent("gotpointercapture"))))}function Xh(t,e){const n=jf.get(t);if(!n)return;const r=n.getStage();r&&r.content,jf.delete(t),oA&&n._fire("lostpointercapture",aS(new PointerEvent("lostpointercapture")))}var gH="Stage",mH="string",VR="px",vH="mouseout",uA="mouseleave",cA="mouseover",dA="mouseenter",hA="mousemove",fA="mousedown",pA="mouseup",Ch="pointermove",kh="pointerdown",Pc="pointerup",Eh="pointercancel",yH="lostpointercapture",bg="pointerout",Sg="pointerleave",Cg="pointerover",kg="pointerenter",Rx="contextmenu",gA="touchstart",mA="touchend",vA="touchmove",yA="touchcancel",Tx="wheel",wH=5,xH=[[dA,"_pointerenter"],[fA,"_pointerdown"],[hA,"_pointermove"],[pA,"_pointerup"],[uA,"_pointerleave"],[gA,"_pointerdown"],[vA,"_pointermove"],[mA,"_pointerup"],[yA,"_pointercancel"],[cA,"_pointerover"],[Tx,"_wheel"],[Rx,"_contextmenu"],[kh,"_pointerdown"],[Ch,"_pointermove"],[Pc,"_pointerup"],[Eh,"_pointercancel"],[yH,"_lostpointercapture"]];const f1={mouse:{[bg]:vH,[Sg]:uA,[Cg]:cA,[kg]:dA,[Ch]:hA,[kh]:fA,[Pc]:pA,[Eh]:"mousecancel",pointerclick:"click",pointerdblclick:"dblclick"},touch:{[bg]:"touchout",[Sg]:"touchleave",[Cg]:"touchover",[kg]:"touchenter",[Ch]:vA,[kh]:gA,[Pc]:mA,[Eh]:yA,pointerclick:"tap",pointerdblclick:"dbltap"},pointer:{[bg]:bg,[Sg]:Sg,[Cg]:Cg,[kg]:kg,[Ch]:Ch,[kh]:kh,[Pc]:Pc,[Eh]:Eh,pointerclick:"pointerclick",pointerdblclick:"pointerdblclick"}},Rh=t=>t.indexOf("pointer")>=0?"pointer":t.indexOf("touch")>=0?"touch":"mouse",ec=t=>{const e=Rh(t);if(e==="pointer")return tt.pointerEventsEnabled&&f1.pointer;if(e==="touch")return f1.touch;if(e==="mouse")return f1.mouse};function WR(t={}){return(t.clipFunc||t.clipWidth||t.clipHeight)&&ne.warn("Stage does not support clipping. Please use clip for Layers or Groups."),t}const _H="Pointer position is missing and not registered by the stage. Looks like it is outside of the stage container. You can set it manually from event: stage.setPointersPositions(event);",lm=[];let G0=class extends Zi{constructor(e){super(WR(e)),this._pointerPositions=[],this._changedPointerPositions=[],this._buildDOM(),this._bindContentEvents(),lm.push(this),this.on("widthChange.konva heightChange.konva",this._resizeDOM),this.on("visibleChange.konva",this._checkVisibility),this.on("clipWidthChange.konva clipHeightChange.konva clipFuncChange.konva",()=>{WR(this.attrs)}),this._checkVisibility()}_validateAdd(e){const n=e.getType()==="Layer",r=e.getType()==="FastLayer";n||r||ne.throw("You may only add layers to the stage.")}_checkVisibility(){if(!this.content)return;const e=this.visible()?"":"none";this.content.style.display=e}setContainer(e){if(typeof e===mH){if(e.charAt(0)==="."){var n=e.slice(1);e=document.getElementsByClassName(n)[0]}else{var r;e.charAt(0)!=="#"?r=e:r=e.slice(1),e=document.getElementById(r)}if(!e)throw"Can not find container in document with id "+r}return this._setAttr("container",e),this.content&&(this.content.parentElement&&this.content.parentElement.removeChild(this.content),e.appendChild(this.content)),this}shouldDrawHit(){return!0}clear(){var e=this.children,n=e.length,r;for(r=0;r<n;r++)e[r].clear();return this}clone(e){return e||(e={}),e.container=typeof document<"u"&&document.createElement("div"),Zi.prototype.clone.call(this,e)}destroy(){super.destroy();var e=this.content;e&&ne._isInDocument(e)&&this.container().removeChild(e);var n=lm.indexOf(this);return n>-1&&lm.splice(n,1),this}getPointerPosition(){const e=this._pointerPositions[0]||this._changedPointerPositions[0];return e?{x:e.x,y:e.y}:(ne.warn(_H),null)}_getPointerById(e){return this._pointerPositions.find(n=>n.id===e)}getPointersPositions(){return this._pointerPositions}getStage(){return this}getContent(){return this.content}_toKonvaCanvas(e){e=e||{},e.x=e.x||0,e.y=e.y||0,e.width=e.width||this.width(),e.height=e.height||this.height();var n=new zc({width:e.width,height:e.height,pixelRatio:e.pixelRatio||1}),r=n.getContext()._context,i=this.children;return(e.x||e.y)&&r.translate(-1*e.x,-1*e.y),i.forEach(function(s){if(s.isVisible()){var o=s._toKonvaCanvas(e);r.drawImage(o._canvas,e.x,e.y,o.getWidth()/o.getPixelRatio(),o.getHeight()/o.getPixelRatio())}}),n}getIntersection(e){if(!e)return null;var n=this.children,r=n.length,i=r-1,s;for(s=i;s>=0;s--){const o=n[s].getIntersection(e);if(o)return o}return null}_resizeDOM(){var e=this.width(),n=this.height();this.content&&(this.content.style.width=e+VR,this.content.style.height=n+VR),this.bufferCanvas.setSize(e,n),this.bufferHitCanvas.setSize(e,n),this.children.forEach(r=>{r.setSize({width:e,height:n}),r.draw()})}add(e,...n){if(arguments.length>1){for(var r=0;r<arguments.length;r++)this.add(arguments[r]);return this}super.add(e);var i=this.children.length;return i>wH&&ne.warn("The stage has "+i+" layers. Recommended maximum number of layers is 3-5. Adding more layers into the stage may drop the performance. Rethink your tree structure, you can use Konva.Group."),e.setSize({width:this.width(),height:this.height()}),e.draw(),tt.isBrowser&&this.content.appendChild(e.canvas._canvas),this}getParent(){return null}getLayer(){return null}hasPointerCapture(e){return aA(e,this)}setPointerCapture(e){lA(e,this)}releaseCapture(e){Xh(e)}getLayers(){return this.children}_bindContentEvents(){tt.isBrowser&&xH.forEach(([e,n])=>{this.content.addEventListener(e,r=>{this[n](r)})})}_pointerenter(e){this.setPointersPositions(e);const n=ec(e.type);this._fire(n.pointerenter,{evt:e,target:this,currentTarget:this})}_pointerover(e){this.setPointersPositions(e);const n=ec(e.type);this._fire(n.pointerover,{evt:e,target:this,currentTarget:this})}_getTargetShape(e){let n=this[e+"targetShape"];return n&&!n.getStage()&&(n=null),n}_pointerleave(e){const n=ec(e.type),r=Rh(e.type);if(n){this.setPointersPositions(e);var i=this._getTargetShape(r),s=!Jt.isDragging||tt.hitOnDragEnabled;i&&s?(i._fireAndBubble(n.pointerout,{evt:e}),i._fireAndBubble(n.pointerleave,{evt:e}),this._fire(n.pointerleave,{evt:e,target:this,currentTarget:this}),this[r+"targetShape"]=null):s&&(this._fire(n.pointerleave,{evt:e,target:this,currentTarget:this}),this._fire(n.pointerout,{evt:e,target:this,currentTarget:this})),this.pointerPos=void 0,this._pointerPositions=[]}}_pointerdown(e){const n=ec(e.type),r=Rh(e.type);if(n){this.setPointersPositions(e);var i=!1;this._changedPointerPositions.forEach(s=>{var o=this.getIntersection(s);if(Jt.justDragged=!1,tt["_"+r+"ListenClick"]=!0,!(o&&o.isListening()))return;tt.capturePointerEventsEnabled&&o.setPointerCapture(s.id),this[r+"ClickStartShape"]=o,o._fireAndBubble(n.pointerdown,{evt:e,pointerId:s.id}),i=!0;const l=e.type.indexOf("touch")>=0;o.preventDefault()&&e.cancelable&&l&&e.preventDefault()}),i||this._fire(n.pointerdown,{evt:e,target:this,currentTarget:this,pointerId:this._pointerPositions[0].id})}}_pointermove(e){const n=ec(e.type),r=Rh(e.type);if(!n)return;Jt.isDragging&&Jt.node.preventDefault()&&e.cancelable&&e.preventDefault(),this.setPointersPositions(e);var i=!Jt.isDragging||tt.hitOnDragEnabled;if(!i)return;var s={};let o=!1;var a=this._getTargetShape(r);this._changedPointerPositions.forEach(l=>{const c=h1(l.id)||this.getIntersection(l),h=l.id,f={evt:e,pointerId:h};var p=a!==c;if(p&&a&&(a._fireAndBubble(n.pointerout,f,c),a._fireAndBubble(n.pointerleave,f,c)),c){if(s[c._id])return;s[c._id]=!0}c&&c.isListening()?(o=!0,p&&(c._fireAndBubble(n.pointerover,f,a),c._fireAndBubble(n.pointerenter,f,a),this[r+"targetShape"]=c),c._fireAndBubble(n.pointermove,f)):a&&(this._fire(n.pointerover,{evt:e,target:this,currentTarget:this,pointerId:h}),this[r+"targetShape"]=null)}),o||this._fire(n.pointermove,{evt:e,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id})}_pointerup(e){const n=ec(e.type),r=Rh(e.type);if(!n)return;this.setPointersPositions(e);const i=this[r+"ClickStartShape"],s=this[r+"ClickEndShape"];var o={};let a=!1;this._changedPointerPositions.forEach(l=>{const c=h1(l.id)||this.getIntersection(l);if(c){if(c.releaseCapture(l.id),o[c._id])return;o[c._id]=!0}const h=l.id,f={evt:e,pointerId:h};let p=!1;tt["_"+r+"InDblClickWindow"]?(p=!0,clearTimeout(this[r+"DblTimeout"])):Jt.justDragged||(tt["_"+r+"InDblClickWindow"]=!0,clearTimeout(this[r+"DblTimeout"])),this[r+"DblTimeout"]=setTimeout(function(){tt["_"+r+"InDblClickWindow"]=!1},tt.dblClickWindow),c&&c.isListening()?(a=!0,this[r+"ClickEndShape"]=c,c._fireAndBubble(n.pointerup,f),tt["_"+r+"ListenClick"]&&i&&i===c&&(c._fireAndBubble(n.pointerclick,f),p&&s&&s===c&&c._fireAndBubble(n.pointerdblclick,f))):(this[r+"ClickEndShape"]=null,tt["_"+r+"ListenClick"]&&this._fire(n.pointerclick,{evt:e,target:this,currentTarget:this,pointerId:h}),p&&this._fire(n.pointerdblclick,{evt:e,target:this,currentTarget:this,pointerId:h}))}),a||this._fire(n.pointerup,{evt:e,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),tt["_"+r+"ListenClick"]=!1,e.cancelable&&e.preventDefault()}_contextmenu(e){this.setPointersPositions(e);var n=this.getIntersection(this.getPointerPosition());n&&n.isListening()?n._fireAndBubble(Rx,{evt:e}):this._fire(Rx,{evt:e,target:this,currentTarget:this})}_wheel(e){this.setPointersPositions(e);var n=this.getIntersection(this.getPointerPosition());n&&n.isListening()?n._fireAndBubble(Tx,{evt:e}):this._fire(Tx,{evt:e,target:this,currentTarget:this})}_pointercancel(e){this.setPointersPositions(e);const n=h1(e.pointerId)||this.getIntersection(this.getPointerPosition());n&&n._fireAndBubble(Pc,aS(e)),Xh(e.pointerId)}_lostpointercapture(e){Xh(e.pointerId)}setPointersPositions(e){var n=this._getContentPosition(),r=null,i=null;e=e||window.event,e.touches!==void 0?(this._pointerPositions=[],this._changedPointerPositions=[],Array.prototype.forEach.call(e.touches,s=>{this._pointerPositions.push({id:s.identifier,x:(s.clientX-n.left)/n.scaleX,y:(s.clientY-n.top)/n.scaleY})}),Array.prototype.forEach.call(e.changedTouches||e.touches,s=>{this._changedPointerPositions.push({id:s.identifier,x:(s.clientX-n.left)/n.scaleX,y:(s.clientY-n.top)/n.scaleY})})):(r=(e.clientX-n.left)/n.scaleX,i=(e.clientY-n.top)/n.scaleY,this.pointerPos={x:r,y:i},this._pointerPositions=[{x:r,y:i,id:ne._getFirstPointerId(e)}],this._changedPointerPositions=[{x:r,y:i,id:ne._getFirstPointerId(e)}])}_setPointerPosition(e){ne.warn('Method _setPointerPosition is deprecated. Use "stage.setPointersPositions(event)" instead.'),this.setPointersPositions(e)}_getContentPosition(){if(!this.content||!this.content.getBoundingClientRect)return{top:0,left:0,scaleX:1,scaleY:1};var e=this.content.getBoundingClientRect();return{top:e.top,left:e.left,scaleX:e.width/this.content.clientWidth||1,scaleY:e.height/this.content.clientHeight||1}}_buildDOM(){if(this.bufferCanvas=new zc({width:this.width(),height:this.height()}),this.bufferHitCanvas=new oS({pixelRatio:1,width:this.width(),height:this.height()}),!!tt.isBrowser){var e=this.container();if(!e)throw"Stage has no container. A container is required.";e.innerHTML="",this.content=document.createElement("div"),this.content.style.position="relative",this.content.style.userSelect="none",this.content.className="konvajs-content",this.content.setAttribute("role","presentation"),e.appendChild(this.content),this._resizeDOM()}}cache(){return ne.warn("Cache function is not allowed for stage. You may use cache only for layers, groups and shapes."),this}clearCache(){return this}batchDraw(){return this.getChildren().forEach(function(e){e.batchDraw()}),this}};G0.prototype.nodeType=gH;$n(G0);W.addGetterSetter(G0,"container");var wA="hasShadow",xA="shadowRGBA",_A="patternImage",bA="linearGradient",SA="radialGradient";let Eg;function p1(){return Eg||(Eg=ne.createCanvasElement().getContext("2d"),Eg)}const Zh={};function bH(t){t.fill()}function SH(t){t.stroke()}function CH(t){t.fill()}function kH(t){t.stroke()}function EH(){this._clearCache(wA)}function RH(){this._clearCache(xA)}function TH(){this._clearCache(_A)}function PH(){this._clearCache(bA)}function LH(){this._clearCache(SA)}class Se extends je{constructor(e){super(e);let n;for(;n=ne.getRandomColor(),!(n&&!(n in Zh)););this.colorKey=n,Zh[n]=this}getContext(){return ne.warn("shape.getContext() method is deprecated. Please do not use it."),this.getLayer().getContext()}getCanvas(){return ne.warn("shape.getCanvas() method is deprecated. Please do not use it."),this.getLayer().getCanvas()}getSceneFunc(){return this.attrs.sceneFunc||this._sceneFunc}getHitFunc(){return this.attrs.hitFunc||this._hitFunc}hasShadow(){return this._getCache(wA,this._hasShadow)}_hasShadow(){return this.shadowEnabled()&&this.shadowOpacity()!==0&&!!(this.shadowColor()||this.shadowBlur()||this.shadowOffsetX()||this.shadowOffsetY())}_getFillPattern(){return this._getCache(_A,this.__getFillPattern)}__getFillPattern(){if(this.fillPatternImage()){var e=p1();const n=e.createPattern(this.fillPatternImage(),this.fillPatternRepeat()||"repeat");if(n&&n.setTransform){const r=new qi;r.translate(this.fillPatternX(),this.fillPatternY()),r.rotate(tt.getAngle(this.fillPatternRotation())),r.scale(this.fillPatternScaleX(),this.fillPatternScaleY()),r.translate(-1*this.fillPatternOffsetX(),-1*this.fillPatternOffsetY());const i=r.getMatrix();n.setTransform({a:i[0],b:i[1],c:i[2],d:i[3],e:i[4],f:i[5]})}return n}}_getLinearGradient(){return this._getCache(bA,this.__getLinearGradient)}__getLinearGradient(){var e=this.fillLinearGradientColorStops();if(e){for(var n=p1(),r=this.fillLinearGradientStartPoint(),i=this.fillLinearGradientEndPoint(),s=n.createLinearGradient(r.x,r.y,i.x,i.y),o=0;o<e.length;o+=2)s.addColorStop(e[o],e[o+1]);return s}}_getRadialGradient(){return this._getCache(SA,this.__getRadialGradient)}__getRadialGradient(){var e=this.fillRadialGradientColorStops();if(e){for(var n=p1(),r=this.fillRadialGradientStartPoint(),i=this.fillRadialGradientEndPoint(),s=n.createRadialGradient(r.x,r.y,this.fillRadialGradientStartRadius(),i.x,i.y,this.fillRadialGradientEndRadius()),o=0;o<e.length;o+=2)s.addColorStop(e[o],e[o+1]);return s}}getShadowRGBA(){return this._getCache(xA,this._getShadowRGBA)}_getShadowRGBA(){if(this.hasShadow()){var e=ne.colorToRGBA(this.shadowColor());return"rgba("+e.r+","+e.g+","+e.b+","+e.a*(this.shadowOpacity()||1)+")"}}hasFill(){return this._calculate("hasFill",["fillEnabled","fill","fillPatternImage","fillLinearGradientColorStops","fillRadialGradientColorStops"],()=>this.fillEnabled()&&!!(this.fill()||this.fillPatternImage()||this.fillLinearGradientColorStops()||this.fillRadialGradientColorStops()))}hasStroke(){return this._calculate("hasStroke",["strokeEnabled","strokeWidth","stroke","strokeLinearGradientColorStops"],()=>this.strokeEnabled()&&this.strokeWidth()&&!!(this.stroke()||this.strokeLinearGradientColorStops()))}hasHitStroke(){const e=this.hitStrokeWidth();return e==="auto"?this.hasStroke():this.strokeEnabled()&&!!e}intersects(e){var n=this.getStage(),r=n.bufferHitCanvas,i;return r.getContext().clear(),this.drawHit(r,null,!0),i=r.context.getImageData(Math.round(e.x),Math.round(e.y),1,1).data,i[3]>0}destroy(){return je.prototype.destroy.call(this),delete Zh[this.colorKey],delete this.colorKey,this}_useBufferCanvas(e){var n;if(!this.getStage()||!((n=this.attrs.perfectDrawEnabled)!==null&&n!==void 0?n:!0))return!1;const i=e||this.hasFill(),s=this.hasStroke(),o=this.getAbsoluteOpacity()!==1;if(i&&s&&o)return!0;const a=this.hasShadow(),l=this.shadowForStrokeEnabled();return!!(i&&s&&a&&l)}setStrokeHitEnabled(e){ne.warn("strokeHitEnabled property is deprecated. Please use hitStrokeWidth instead."),e?this.hitStrokeWidth("auto"):this.hitStrokeWidth(0)}getStrokeHitEnabled(){return this.hitStrokeWidth()!==0}getSelfRect(){var e=this.size();return{x:this._centroid?-e.width/2:0,y:this._centroid?-e.height/2:0,width:e.width,height:e.height}}getClientRect(e={}){const n=e.skipTransform,r=e.relativeTo,i=this.getSelfRect(),o=!e.skipStroke&&this.hasStroke()&&this.strokeWidth()||0,a=i.width+o,l=i.height+o,c=!e.skipShadow&&this.hasShadow(),h=c?this.shadowOffsetX():0,f=c?this.shadowOffsetY():0,p=a+Math.abs(h),g=l+Math.abs(f),v=c&&this.shadowBlur()||0,x=p+v*2,k=g+v*2;let C=0;Math.round(o/2)!==o/2&&(C=1);const b={width:x+C,height:k+C,x:-Math.round(o/2+v)+Math.min(h,0)+i.x,y:-Math.round(o/2+v)+Math.min(f,0)+i.y};return n?b:this._transformedRect(b,r)}drawScene(e,n){var r=this.getLayer(),i=e||r.getCanvas(),s=i.getContext(),o=this._getCanvasCache(),a=this.getSceneFunc(),l=this.hasShadow(),c,h,f,p=i.isCache,g=n===this;if(!this.isVisible()&&!g)return this;if(o){s.save();var v=this.getAbsoluteTransform(n).getMatrix();return s.transform(v[0],v[1],v[2],v[3],v[4],v[5]),this._drawCachedSceneCanvas(s),s.restore(),this}if(!a)return this;if(s.save(),this._useBufferCanvas()&&!p){c=this.getStage(),h=c.bufferCanvas,f=h.getContext(),f.clear(),f.save(),f._applyLineJoin(this);var x=this.getAbsoluteTransform(n).getMatrix();f.transform(x[0],x[1],x[2],x[3],x[4],x[5]),a.call(this,f,this),f.restore();var k=h.pixelRatio;l&&s._applyShadow(this),s._applyOpacity(this),s._applyGlobalCompositeOperation(this),s.drawImage(h._canvas,0,0,h.width/k,h.height/k)}else{if(s._applyLineJoin(this),!g){var x=this.getAbsoluteTransform(n).getMatrix();s.transform(x[0],x[1],x[2],x[3],x[4],x[5]),s._applyOpacity(this),s._applyGlobalCompositeOperation(this)}l&&s._applyShadow(this),a.call(this,s,this)}return s.restore(),this}drawHit(e,n,r=!1){if(!this.shouldDrawHit(n,r))return this;var i=this.getLayer(),s=e||i.hitCanvas,o=s&&s.getContext(),a=this.hitFunc()||this.sceneFunc(),l=this._getCanvasCache(),c=l&&l.hit;if(this.colorKey||ne.warn("Looks like your canvas has a destroyed shape in it. Do not reuse shape after you destroyed it. If you want to reuse shape you should call remove() instead of destroy()"),c){o.save();var h=this.getAbsoluteTransform(n).getMatrix();return o.transform(h[0],h[1],h[2],h[3],h[4],h[5]),this._drawCachedHitCanvas(o),o.restore(),this}if(!a)return this;if(o.save(),o._applyLineJoin(this),!(this===n)){var p=this.getAbsoluteTransform(n).getMatrix();o.transform(p[0],p[1],p[2],p[3],p[4],p[5])}return a.call(this,o,this),o.restore(),this}drawHitFromCache(e=0){var n=this._getCanvasCache(),r=this._getCachedSceneCanvas(),i=n.hit,s=i.getContext(),o=i.getWidth(),a=i.getHeight(),l,c,h,f,p,g;s.clear(),s.drawImage(r._canvas,0,0,o,a);try{for(l=s.getImageData(0,0,o,a),c=l.data,h=c.length,f=ne._hexToRgb(this.colorKey),p=0;p<h;p+=4)g=c[p+3],g>e?(c[p]=f.r,c[p+1]=f.g,c[p+2]=f.b,c[p+3]=255):c[p+3]=0;s.putImageData(l,0,0)}catch(v){ne.error("Unable to draw hit graph from cached scene canvas. "+v.message)}return this}hasPointerCapture(e){return aA(e,this)}setPointerCapture(e){lA(e,this)}releaseCapture(e){Xh(e)}}Se.prototype._fillFunc=bH;Se.prototype._strokeFunc=SH;Se.prototype._fillFuncHit=CH;Se.prototype._strokeFuncHit=kH;Se.prototype._centroid=!1;Se.prototype.nodeType="Shape";$n(Se);Se.prototype.eventListeners={};Se.prototype.on.call(Se.prototype,"shadowColorChange.konva shadowBlurChange.konva shadowOffsetChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",EH);Se.prototype.on.call(Se.prototype,"shadowColorChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",RH);Se.prototype.on.call(Se.prototype,"fillPriorityChange.konva fillPatternImageChange.konva fillPatternRepeatChange.konva fillPatternScaleXChange.konva fillPatternScaleYChange.konva fillPatternOffsetXChange.konva fillPatternOffsetYChange.konva fillPatternXChange.konva fillPatternYChange.konva fillPatternRotationChange.konva",TH);Se.prototype.on.call(Se.prototype,"fillPriorityChange.konva fillLinearGradientColorStopsChange.konva fillLinearGradientStartPointXChange.konva fillLinearGradientStartPointYChange.konva fillLinearGradientEndPointXChange.konva fillLinearGradientEndPointYChange.konva",PH);Se.prototype.on.call(Se.prototype,"fillPriorityChange.konva fillRadialGradientColorStopsChange.konva fillRadialGradientStartPointXChange.konva fillRadialGradientStartPointYChange.konva fillRadialGradientEndPointXChange.konva fillRadialGradientEndPointYChange.konva fillRadialGradientStartRadiusChange.konva fillRadialGradientEndRadiusChange.konva",LH);W.addGetterSetter(Se,"stroke",void 0,sA());W.addGetterSetter(Se,"strokeWidth",2,Me());W.addGetterSetter(Se,"fillAfterStrokeEnabled",!1);W.addGetterSetter(Se,"hitStrokeWidth","auto",sS());W.addGetterSetter(Se,"strokeHitEnabled",!0,ro());W.addGetterSetter(Se,"perfectDrawEnabled",!0,ro());W.addGetterSetter(Se,"shadowForStrokeEnabled",!0,ro());W.addGetterSetter(Se,"lineJoin");W.addGetterSetter(Se,"lineCap");W.addGetterSetter(Se,"sceneFunc");W.addGetterSetter(Se,"hitFunc");W.addGetterSetter(Se,"dash");W.addGetterSetter(Se,"dashOffset",0,Me());W.addGetterSetter(Se,"shadowColor",void 0,Ed());W.addGetterSetter(Se,"shadowBlur",0,Me());W.addGetterSetter(Se,"shadowOpacity",1,Me());W.addComponentsGetterSetter(Se,"shadowOffset",["x","y"]);W.addGetterSetter(Se,"shadowOffsetX",0,Me());W.addGetterSetter(Se,"shadowOffsetY",0,Me());W.addGetterSetter(Se,"fillPatternImage");W.addGetterSetter(Se,"fill",void 0,sA());W.addGetterSetter(Se,"fillPatternX",0,Me());W.addGetterSetter(Se,"fillPatternY",0,Me());W.addGetterSetter(Se,"fillLinearGradientColorStops");W.addGetterSetter(Se,"strokeLinearGradientColorStops");W.addGetterSetter(Se,"fillRadialGradientStartRadius",0);W.addGetterSetter(Se,"fillRadialGradientEndRadius",0);W.addGetterSetter(Se,"fillRadialGradientColorStops");W.addGetterSetter(Se,"fillPatternRepeat","repeat");W.addGetterSetter(Se,"fillEnabled",!0);W.addGetterSetter(Se,"strokeEnabled",!0);W.addGetterSetter(Se,"shadowEnabled",!0);W.addGetterSetter(Se,"dashEnabled",!0);W.addGetterSetter(Se,"strokeScaleEnabled",!0);W.addGetterSetter(Se,"fillPriority","color");W.addComponentsGetterSetter(Se,"fillPatternOffset",["x","y"]);W.addGetterSetter(Se,"fillPatternOffsetX",0,Me());W.addGetterSetter(Se,"fillPatternOffsetY",0,Me());W.addComponentsGetterSetter(Se,"fillPatternScale",["x","y"]);W.addGetterSetter(Se,"fillPatternScaleX",1,Me());W.addGetterSetter(Se,"fillPatternScaleY",1,Me());W.addComponentsGetterSetter(Se,"fillLinearGradientStartPoint",["x","y"]);W.addComponentsGetterSetter(Se,"strokeLinearGradientStartPoint",["x","y"]);W.addGetterSetter(Se,"fillLinearGradientStartPointX",0);W.addGetterSetter(Se,"strokeLinearGradientStartPointX",0);W.addGetterSetter(Se,"fillLinearGradientStartPointY",0);W.addGetterSetter(Se,"strokeLinearGradientStartPointY",0);W.addComponentsGetterSetter(Se,"fillLinearGradientEndPoint",["x","y"]);W.addComponentsGetterSetter(Se,"strokeLinearGradientEndPoint",["x","y"]);W.addGetterSetter(Se,"fillLinearGradientEndPointX",0);W.addGetterSetter(Se,"strokeLinearGradientEndPointX",0);W.addGetterSetter(Se,"fillLinearGradientEndPointY",0);W.addGetterSetter(Se,"strokeLinearGradientEndPointY",0);W.addComponentsGetterSetter(Se,"fillRadialGradientStartPoint",["x","y"]);W.addGetterSetter(Se,"fillRadialGradientStartPointX",0);W.addGetterSetter(Se,"fillRadialGradientStartPointY",0);W.addComponentsGetterSetter(Se,"fillRadialGradientEndPoint",["x","y"]);W.addGetterSetter(Se,"fillRadialGradientEndPointX",0);W.addGetterSetter(Se,"fillRadialGradientEndPointY",0);W.addGetterSetter(Se,"fillPatternRotation",0);W.backCompat(Se,{dashArray:"dash",getDashArray:"getDash",setDashArray:"getDash",drawFunc:"sceneFunc",getDrawFunc:"getSceneFunc",setDrawFunc:"setSceneFunc",drawHitFunc:"hitFunc",getDrawHitFunc:"getHitFunc",setDrawHitFunc:"setHitFunc"});var MH="#",AH="beforeDraw",NH="draw",CA=[{x:0,y:0},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1}],jH=CA.length;let Pu=class extends Zi{constructor(e){super(e),this.canvas=new zc,this.hitCanvas=new oS({pixelRatio:1}),this._waitingForDraw=!1,this.on("visibleChange.konva",this._checkVisibility),this._checkVisibility(),this.on("imageSmoothingEnabledChange.konva",this._setSmoothEnabled),this._setSmoothEnabled()}createPNGStream(){return this.canvas._canvas.createPNGStream()}getCanvas(){return this.canvas}getNativeCanvasElement(){return this.canvas._canvas}getHitCanvas(){return this.hitCanvas}getContext(){return this.getCanvas().getContext()}clear(e){return this.getContext().clear(e),this.getHitCanvas().getContext().clear(e),this}setZIndex(e){super.setZIndex(e);var n=this.getStage();return n&&n.content&&(n.content.removeChild(this.getNativeCanvasElement()),e<n.children.length-1?n.content.insertBefore(this.getNativeCanvasElement(),n.children[e+1].getCanvas()._canvas):n.content.appendChild(this.getNativeCanvasElement())),this}moveToTop(){je.prototype.moveToTop.call(this);var e=this.getStage();return e&&e.content&&(e.content.removeChild(this.getNativeCanvasElement()),e.content.appendChild(this.getNativeCanvasElement())),!0}moveUp(){var e=je.prototype.moveUp.call(this);if(!e)return!1;var n=this.getStage();return!n||!n.content?!1:(n.content.removeChild(this.getNativeCanvasElement()),this.index<n.children.length-1?n.content.insertBefore(this.getNativeCanvasElement(),n.children[this.index+1].getCanvas()._canvas):n.content.appendChild(this.getNativeCanvasElement()),!0)}moveDown(){if(je.prototype.moveDown.call(this)){var e=this.getStage();if(e){var n=e.children;e.content&&(e.content.removeChild(this.getNativeCanvasElement()),e.content.insertBefore(this.getNativeCanvasElement(),n[this.index+1].getCanvas()._canvas))}return!0}return!1}moveToBottom(){if(je.prototype.moveToBottom.call(this)){var e=this.getStage();if(e){var n=e.children;e.content&&(e.content.removeChild(this.getNativeCanvasElement()),e.content.insertBefore(this.getNativeCanvasElement(),n[1].getCanvas()._canvas))}return!0}return!1}getLayer(){return this}remove(){var e=this.getNativeCanvasElement();return je.prototype.remove.call(this),e&&e.parentNode&&ne._isInDocument(e)&&e.parentNode.removeChild(e),this}getStage(){return this.parent}setSize({width:e,height:n}){return this.canvas.setSize(e,n),this.hitCanvas.setSize(e,n),this._setSmoothEnabled(),this}_validateAdd(e){var n=e.getType();n!=="Group"&&n!=="Shape"&&ne.throw("You may only add groups and shapes to a layer.")}_toKonvaCanvas(e){return e=e||{},e.width=e.width||this.getWidth(),e.height=e.height||this.getHeight(),e.x=e.x!==void 0?e.x:this.x(),e.y=e.y!==void 0?e.y:this.y(),je.prototype._toKonvaCanvas.call(this,e)}_checkVisibility(){this.visible()?this.canvas._canvas.style.display="block":this.canvas._canvas.style.display="none"}_setSmoothEnabled(){this.getContext()._context.imageSmoothingEnabled=this.imageSmoothingEnabled()}getWidth(){if(this.parent)return this.parent.width()}setWidth(){ne.warn('Can not change width of layer. Use "stage.width(value)" function instead.')}getHeight(){if(this.parent)return this.parent.height()}setHeight(){ne.warn('Can not change height of layer. Use "stage.height(value)" function instead.')}batchDraw(){return this._waitingForDraw||(this._waitingForDraw=!0,ne.requestAnimFrame(()=>{this.draw(),this._waitingForDraw=!1})),this}getIntersection(e){if(!this.isListening()||!this.isVisible())return null;for(var n=1,r=!1;;){for(let i=0;i<jH;i++){const s=CA[i],o=this._getIntersection({x:e.x+s.x*n,y:e.y+s.y*n}),a=o.shape;if(a)return a;if(r=!!o.antialiased,!o.antialiased)break}if(r)n+=1;else return null}}_getIntersection(e){const n=this.hitCanvas.pixelRatio,r=this.hitCanvas.context.getImageData(Math.round(e.x*n),Math.round(e.y*n),1,1).data,i=r[3];if(i===255){const s=ne._rgbToHex(r[0],r[1],r[2]),o=Zh[MH+s];return o?{shape:o}:{antialiased:!0}}else if(i>0)return{antialiased:!0};return{}}drawScene(e,n){var r=this.getLayer(),i=e||r&&r.getCanvas();return this._fire(AH,{node:this}),this.clearBeforeDraw()&&i.getContext().clear(),Zi.prototype.drawScene.call(this,i,n),this._fire(NH,{node:this}),this}drawHit(e,n){var r=this.getLayer(),i=e||r&&r.hitCanvas;return r&&r.clearBeforeDraw()&&r.getHitCanvas().getContext().clear(),Zi.prototype.drawHit.call(this,i,n),this}enableHitGraph(){return this.hitGraphEnabled(!0),this}disableHitGraph(){return this.hitGraphEnabled(!1),this}setHitGraphEnabled(e){ne.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening(e)}getHitGraphEnabled(e){return ne.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening()}toggleHitCanvas(){if(!(!this.parent||!this.parent.content)){var e=this.parent,n=!!this.hitCanvas._canvas.parentNode;n?e.content.removeChild(this.hitCanvas._canvas):e.content.appendChild(this.hitCanvas._canvas)}}};Pu.prototype.nodeType="Layer";$n(Pu);W.addGetterSetter(Pu,"imageSmoothingEnabled",!0);W.addGetterSetter(Pu,"clearBeforeDraw",!0);W.addGetterSetter(Pu,"hitGraphEnabled",!0,ro());class lS extends Pu{constructor(e){super(e),this.listening(!1),ne.warn('Konva.Fast layer is deprecated. Please use "new Konva.Layer({ listening: false })" instead.')}}lS.prototype.nodeType="FastLayer";$n(lS);class nd extends Zi{_validateAdd(e){var n=e.getType();n!=="Group"&&n!=="Shape"&&ne.throw("You may only add groups and shapes to groups.")}}nd.prototype.nodeType="Group";$n(nd);var g1=function(){return $c.performance&&$c.performance.now?function(){return $c.performance.now()}:function(){return new Date().getTime()}}();class xs{constructor(e,n){this.id=xs.animIdCounter++,this.frame={time:0,timeDiff:0,lastTime:g1(),frameRate:0},this.func=e,this.setLayers(n)}setLayers(e){var n=[];return e?e.length>0?n=e:n=[e]:n=[],this.layers=n,this}getLayers(){return this.layers}addLayer(e){var n=this.layers,r=n.length,i;for(i=0;i<r;i++)if(n[i]._id===e._id)return!1;return this.layers.push(e),!0}isRunning(){var e=xs,n=e.animations,r=n.length,i;for(i=0;i<r;i++)if(n[i].id===this.id)return!0;return!1}start(){return this.stop(),this.frame.timeDiff=0,this.frame.lastTime=g1(),xs._addAnimation(this),this}stop(){return xs._removeAnimation(this),this}_updateFrameObject(e){this.frame.timeDiff=e-this.frame.lastTime,this.frame.lastTime=e,this.frame.time+=this.frame.timeDiff,this.frame.frameRate=1e3/this.frame.timeDiff}static _addAnimation(e){this.animations.push(e),this._handleAnimation()}static _removeAnimation(e){var n=e.id,r=this.animations,i=r.length,s;for(s=0;s<i;s++)if(r[s].id===n){this.animations.splice(s,1);break}}static _runFrames(){var e={},n=this.animations,r,i,s,o,a,l,c,h,f;for(o=0;o<n.length;o++)if(r=n[o],i=r.layers,s=r.func,r._updateFrameObject(g1()),l=i.length,s?f=s.call(r,r.frame)!==!1:f=!0,!!f)for(a=0;a<l;a++)c=i[a],c._id!==void 0&&(e[c._id]=c);for(h in e)e.hasOwnProperty(h)&&e[h].batchDraw()}static _animationLoop(){var e=xs;e.animations.length?(e._runFrames(),ne.requestAnimFrame(e._animationLoop)):e.animRunning=!1}static _handleAnimation(){this.animRunning||(this.animRunning=!0,ne.requestAnimFrame(this._animationLoop))}}xs.animations=[];xs.animIdCounter=0;xs.animRunning=!1;var IH={node:1,duration:1,easing:1,onFinish:1,yoyo:1},OH=1,HR=2,GR=3,DH=0,qR=["fill","stroke","shadowColor"];class FH{constructor(e,n,r,i,s,o,a){this.prop=e,this.propFunc=n,this.begin=i,this._pos=i,this.duration=o,this._change=0,this.prevPos=0,this.yoyo=a,this._time=0,this._position=0,this._startTime=0,this._finish=0,this.func=r,this._change=s-this.begin,this.pause()}fire(e){var n=this[e];n&&n()}setTime(e){e>this.duration?this.yoyo?(this._time=this.duration,this.reverse()):this.finish():e<0?this.yoyo?(this._time=0,this.play()):this.reset():(this._time=e,this.update())}getTime(){return this._time}setPosition(e){this.prevPos=this._pos,this.propFunc(e),this._pos=e}getPosition(e){return e===void 0&&(e=this._time),this.func(e,this.begin,this._change,this.duration)}play(){this.state=HR,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onPlay")}reverse(){this.state=GR,this._time=this.duration-this._time,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onReverse")}seek(e){this.pause(),this._time=e,this.update(),this.fire("onSeek")}reset(){this.pause(),this._time=0,this.update(),this.fire("onReset")}finish(){this.pause(),this._time=this.duration,this.update(),this.fire("onFinish")}update(){this.setPosition(this.getPosition(this._time)),this.fire("onUpdate")}onEnterFrame(){var e=this.getTimer()-this._startTime;this.state===HR?this.setTime(e):this.state===GR&&this.setTime(this.duration-e)}pause(){this.state=OH,this.fire("onPause")}getTimer(){return new Date().getTime()}}class nr{constructor(e){var n=this,r=e.node,i=r._id,s,o=e.easing||Qh.Linear,a=!!e.yoyo,l;typeof e.duration>"u"?s=.3:e.duration===0?s=.001:s=e.duration,this.node=r,this._id=DH++;var c=r.getLayer()||(r instanceof tt.Stage?r.getLayers():null);c||ne.error("Tween constructor have `node` that is not in a layer. Please add node into layer first."),this.anim=new xs(function(){n.tween.onEnterFrame()},c),this.tween=new FH(l,function(h){n._tweenFunc(h)},o,0,1,s*1e3,a),this._addListeners(),nr.attrs[i]||(nr.attrs[i]={}),nr.attrs[i][this._id]||(nr.attrs[i][this._id]={}),nr.tweens[i]||(nr.tweens[i]={});for(l in e)IH[l]===void 0&&this._addAttr(l,e[l]);this.reset(),this.onFinish=e.onFinish,this.onReset=e.onReset,this.onUpdate=e.onUpdate}_addAttr(e,n){var r=this.node,i=r._id,s,o,a,l,c,h,f,p;if(a=nr.tweens[i][e],a&&delete nr.attrs[i][a][e],s=r.getAttr(e),ne._isArray(n))if(o=[],c=Math.max(n.length,s.length),e==="points"&&n.length!==s.length&&(n.length>s.length?(f=s,s=ne._prepareArrayForTween(s,n,r.closed())):(h=n,n=ne._prepareArrayForTween(n,s,r.closed()))),e.indexOf("fill")===0)for(l=0;l<c;l++)if(l%2===0)o.push(n[l]-s[l]);else{var g=ne.colorToRGBA(s[l]);p=ne.colorToRGBA(n[l]),s[l]=g,o.push({r:p.r-g.r,g:p.g-g.g,b:p.b-g.b,a:p.a-g.a})}else for(l=0;l<c;l++)o.push(n[l]-s[l]);else qR.indexOf(e)!==-1?(s=ne.colorToRGBA(s),p=ne.colorToRGBA(n),o={r:p.r-s.r,g:p.g-s.g,b:p.b-s.b,a:p.a-s.a}):o=n-s;nr.attrs[i][this._id][e]={start:s,diff:o,end:n,trueEnd:h,trueStart:f},nr.tweens[i][e]=this._id}_tweenFunc(e){var n=this.node,r=nr.attrs[n._id][this._id],i,s,o,a,l,c,h,f;for(i in r){if(s=r[i],o=s.start,a=s.diff,f=s.end,ne._isArray(o))if(l=[],h=Math.max(o.length,f.length),i.indexOf("fill")===0)for(c=0;c<h;c++)c%2===0?l.push((o[c]||0)+a[c]*e):l.push("rgba("+Math.round(o[c].r+a[c].r*e)+","+Math.round(o[c].g+a[c].g*e)+","+Math.round(o[c].b+a[c].b*e)+","+(o[c].a+a[c].a*e)+")");else for(c=0;c<h;c++)l.push((o[c]||0)+a[c]*e);else qR.indexOf(i)!==-1?l="rgba("+Math.round(o.r+a.r*e)+","+Math.round(o.g+a.g*e)+","+Math.round(o.b+a.b*e)+","+(o.a+a.a*e)+")":l=o+a*e;n.setAttr(i,l)}}_addListeners(){this.tween.onPlay=()=>{this.anim.start()},this.tween.onReverse=()=>{this.anim.start()},this.tween.onPause=()=>{this.anim.stop()},this.tween.onFinish=()=>{var e=this.node,n=nr.attrs[e._id][this._id];n.points&&n.points.trueEnd&&e.setAttr("points",n.points.trueEnd),this.onFinish&&this.onFinish.call(this)},this.tween.onReset=()=>{var e=this.node,n=nr.attrs[e._id][this._id];n.points&&n.points.trueStart&&e.points(n.points.trueStart),this.onReset&&this.onReset()},this.tween.onUpdate=()=>{this.onUpdate&&this.onUpdate.call(this)}}play(){return this.tween.play(),this}reverse(){return this.tween.reverse(),this}reset(){return this.tween.reset(),this}seek(e){return this.tween.seek(e*1e3),this}pause(){return this.tween.pause(),this}finish(){return this.tween.finish(),this}destroy(){var e=this.node._id,n=this._id,r=nr.tweens[e],i;this.pause();for(i in r)delete nr.tweens[e][i];delete nr.attrs[e][n]}}nr.attrs={};nr.tweens={};je.prototype.to=function(t){var e=t.onFinish;t.node=this,t.onFinish=function(){this.destroy(),e&&e()};var n=new nr(t);n.play()};const Qh={BackEaseIn(t,e,n,r){var i=1.70158;return n*(t/=r)*t*((i+1)*t-i)+e},BackEaseOut(t,e,n,r){var i=1.70158;return n*((t=t/r-1)*t*((i+1)*t+i)+1)+e},BackEaseInOut(t,e,n,r){var i=1.70158;return(t/=r/2)<1?n/2*(t*t*(((i*=1.525)+1)*t-i))+e:n/2*((t-=2)*t*(((i*=1.525)+1)*t+i)+2)+e},ElasticEaseIn(t,e,n,r,i,s){var o=0;return t===0?e:(t/=r)===1?e+n:(s||(s=r*.3),!i||i<Math.abs(n)?(i=n,o=s/4):o=s/(2*Math.PI)*Math.asin(n/i),-(i*Math.pow(2,10*(t-=1))*Math.sin((t*r-o)*(2*Math.PI)/s))+e)},ElasticEaseOut(t,e,n,r,i,s){var o=0;return t===0?e:(t/=r)===1?e+n:(s||(s=r*.3),!i||i<Math.abs(n)?(i=n,o=s/4):o=s/(2*Math.PI)*Math.asin(n/i),i*Math.pow(2,-10*t)*Math.sin((t*r-o)*(2*Math.PI)/s)+n+e)},ElasticEaseInOut(t,e,n,r,i,s){var o=0;return t===0?e:(t/=r/2)===2?e+n:(s||(s=r*(.3*1.5)),!i||i<Math.abs(n)?(i=n,o=s/4):o=s/(2*Math.PI)*Math.asin(n/i),t<1?-.5*(i*Math.pow(2,10*(t-=1))*Math.sin((t*r-o)*(2*Math.PI)/s))+e:i*Math.pow(2,-10*(t-=1))*Math.sin((t*r-o)*(2*Math.PI)/s)*.5+n+e)},BounceEaseOut(t,e,n,r){return(t/=r)<1/2.75?n*(7.5625*t*t)+e:t<2/2.75?n*(7.5625*(t-=1.5/2.75)*t+.75)+e:t<2.5/2.75?n*(7.5625*(t-=2.25/2.75)*t+.9375)+e:n*(7.5625*(t-=2.625/2.75)*t+.984375)+e},BounceEaseIn(t,e,n,r){return n-Qh.BounceEaseOut(r-t,0,n,r)+e},BounceEaseInOut(t,e,n,r){return t<r/2?Qh.BounceEaseIn(t*2,0,n,r)*.5+e:Qh.BounceEaseOut(t*2-r,0,n,r)*.5+n*.5+e},EaseIn(t,e,n,r){return n*(t/=r)*t+e},EaseOut(t,e,n,r){return-n*(t/=r)*(t-2)+e},EaseInOut(t,e,n,r){return(t/=r/2)<1?n/2*t*t+e:-n/2*(--t*(t-2)-1)+e},StrongEaseIn(t,e,n,r){return n*(t/=r)*t*t*t*t+e},StrongEaseOut(t,e,n,r){return n*((t=t/r-1)*t*t*t*t+1)+e},StrongEaseInOut(t,e,n,r){return(t/=r/2)<1?n/2*t*t*t*t*t+e:n/2*((t-=2)*t*t*t*t+2)+e},Linear(t,e,n,r){return n*t/r+e}},Cu=ne._assign(tt,{Util:ne,Transform:qi,Node:je,Container:Zi,Stage:G0,stages:lm,Layer:Pu,FastLayer:lS,Group:nd,DD:Jt,Shape:Se,shapes:Zh,Animation:xs,Tween:nr,Easings:Qh,Context:W0,Canvas:H0});class ma extends Se{_sceneFunc(e){var n=tt.getAngle(this.angle()),r=this.clockwise();e.beginPath(),e.arc(0,0,this.outerRadius(),0,n,r),e.arc(0,0,this.innerRadius(),n,0,!r),e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(e){this.outerRadius(e/2)}setHeight(e){this.outerRadius(e/2)}}ma.prototype._centroid=!0;ma.prototype.className="Arc";ma.prototype._attrsAffectingSize=["innerRadius","outerRadius"];$n(ma);W.addGetterSetter(ma,"innerRadius",0,Me());W.addGetterSetter(ma,"outerRadius",0,Me());W.addGetterSetter(ma,"angle",0,Me());W.addGetterSetter(ma,"clockwise",!1,ro());function Px(t,e,n,r,i,s,o){var a=Math.sqrt(Math.pow(n-t,2)+Math.pow(r-e,2)),l=Math.sqrt(Math.pow(i-n,2)+Math.pow(s-r,2)),c=o*a/(a+l),h=o*l/(a+l),f=n-c*(i-t),p=r-c*(s-e),g=n+h*(i-t),v=r+h*(s-e);return[f,p,g,v]}function YR(t,e){var n=t.length,r=[],i,s;for(i=2;i<n-2;i+=2)s=Px(t[i-2],t[i-1],t[i],t[i+1],t[i+2],t[i+3],e),!isNaN(s[0])&&(r.push(s[0]),r.push(s[1]),r.push(t[i]),r.push(t[i+1]),r.push(s[2]),r.push(s[3]));return r}let va=class extends Se{constructor(e){super(e),this.on("pointsChange.konva tensionChange.konva closedChange.konva bezierChange.konva",function(){this._clearCache("tensionPoints")})}_sceneFunc(e){var n=this.points(),r=n.length,i=this.tension(),s=this.closed(),o=this.bezier(),a,l,c;if(r){if(e.beginPath(),e.moveTo(n[0],n[1]),i!==0&&r>4){for(a=this.getTensionPoints(),l=a.length,c=s?0:4,s||e.quadraticCurveTo(a[0],a[1],a[2],a[3]);c<l-2;)e.bezierCurveTo(a[c++],a[c++],a[c++],a[c++],a[c++],a[c++]);s||e.quadraticCurveTo(a[l-2],a[l-1],n[r-2],n[r-1])}else if(o)for(c=2;c<r;)e.bezierCurveTo(n[c++],n[c++],n[c++],n[c++],n[c++],n[c++]);else for(c=2;c<r;c+=2)e.lineTo(n[c],n[c+1]);s?(e.closePath(),e.fillStrokeShape(this)):e.strokeShape(this)}}getTensionPoints(){return this._getCache("tensionPoints",this._getTensionPoints)}_getTensionPoints(){return this.closed()?this._getTensionPointsClosed():YR(this.points(),this.tension())}_getTensionPointsClosed(){var e=this.points(),n=e.length,r=this.tension(),i=Px(e[n-2],e[n-1],e[0],e[1],e[2],e[3],r),s=Px(e[n-4],e[n-3],e[n-2],e[n-1],e[0],e[1],r),o=YR(e,r),a=[i[2],i[3]].concat(o).concat([s[0],s[1],e[n-2],e[n-1],s[2],s[3],i[0],i[1],e[0],e[1]]);return a}getWidth(){return this.getSelfRect().width}getHeight(){return this.getSelfRect().height}getSelfRect(){var e=this.points();if(e.length<4)return{x:e[0]||0,y:e[1]||0,width:0,height:0};this.tension()!==0?e=[e[0],e[1],...this._getTensionPoints(),e[e.length-2],e[e.length-1]]:e=this.points();for(var n=e[0],r=e[0],i=e[1],s=e[1],o,a,l=0;l<e.length/2;l++)o=e[l*2],a=e[l*2+1],n=Math.min(n,o),r=Math.max(r,o),i=Math.min(i,a),s=Math.max(s,a);return{x:n,y:i,width:r-n,height:s-i}}};va.prototype.className="Line";va.prototype._attrsAffectingSize=["points","bezier","tension"];$n(va);W.addGetterSetter(va,"closed",!1);W.addGetterSetter(va,"bezier",!1);W.addGetterSetter(va,"tension",0,Me());W.addGetterSetter(va,"points",[],YW());class fn extends Se{constructor(e){super(e),this.dataArray=[],this.pathLength=0,this.dataArray=fn.parsePathData(this.data()),this.pathLength=0;for(var n=0;n<this.dataArray.length;++n)this.pathLength+=this.dataArray[n].pathLength;this.on("dataChange.konva",function(){this.dataArray=fn.parsePathData(this.data()),this.pathLength=0;for(var r=0;r<this.dataArray.length;++r)this.pathLength+=this.dataArray[r].pathLength})}_sceneFunc(e){var n=this.dataArray;e.beginPath();for(var r=!1,i=0;i<n.length;i++){var s=n[i].command,o=n[i].points;switch(s){case"L":e.lineTo(o[0],o[1]);break;case"M":e.moveTo(o[0],o[1]);break;case"C":e.bezierCurveTo(o[0],o[1],o[2],o[3],o[4],o[5]);break;case"Q":e.quadraticCurveTo(o[0],o[1],o[2],o[3]);break;case"A":var a=o[0],l=o[1],c=o[2],h=o[3],f=o[4],p=o[5],g=o[6],v=o[7],x=c>h?c:h,k=c>h?1:c/h,C=c>h?h/c:1;e.translate(a,l),e.rotate(g),e.scale(k,C),e.arc(0,0,x,f,f+p,1-v),e.scale(1/k,1/C),e.rotate(-g),e.translate(-a,-l);break;case"z":r=!0,e.closePath();break}}!r&&!this.hasFill()?e.strokeShape(this):e.fillStrokeShape(this)}getSelfRect(){var e=[];this.dataArray.forEach(function(c){if(c.command==="A"){var h=c.points[4],f=c.points[5],p=c.points[4]+f,g=Math.PI/180;if(Math.abs(h-p)<g&&(g=Math.abs(h-p)),f<0)for(let v=h-g;v>p;v-=g){const x=fn.getPointOnEllipticalArc(c.points[0],c.points[1],c.points[2],c.points[3],v,0);e.push(x.x,x.y)}else for(let v=h+g;v<p;v+=g){const x=fn.getPointOnEllipticalArc(c.points[0],c.points[1],c.points[2],c.points[3],v,0);e.push(x.x,x.y)}}else if(c.command==="C")for(let v=0;v<=1;v+=.01){const x=fn.getPointOnCubicBezier(v,c.start.x,c.start.y,c.points[0],c.points[1],c.points[2],c.points[3],c.points[4],c.points[5]);e.push(x.x,x.y)}else e=e.concat(c.points)});for(var n=e[0],r=e[0],i=e[1],s=e[1],o,a,l=0;l<e.length/2;l++)o=e[l*2],a=e[l*2+1],isNaN(o)||(n=Math.min(n,o),r=Math.max(r,o)),isNaN(a)||(i=Math.min(i,a),s=Math.max(s,a));return{x:Math.round(n),y:Math.round(i),width:Math.round(r-n),height:Math.round(s-i)}}getLength(){return this.pathLength}getPointAtLength(e){var n,r=0,i=this.dataArray.length;if(!i)return null;for(;r<i&&e>this.dataArray[r].pathLength;)e-=this.dataArray[r].pathLength,++r;if(r===i)return n=this.dataArray[r-1].points.slice(-2),{x:n[0],y:n[1]};if(e<.01)return n=this.dataArray[r].points.slice(0,2),{x:n[0],y:n[1]};var s=this.dataArray[r],o=s.points;switch(s.command){case"L":return fn.getPointOnLine(e,s.start.x,s.start.y,o[0],o[1]);case"C":return fn.getPointOnCubicBezier(e/s.pathLength,s.start.x,s.start.y,o[0],o[1],o[2],o[3],o[4],o[5]);case"Q":return fn.getPointOnQuadraticBezier(e/s.pathLength,s.start.x,s.start.y,o[0],o[1],o[2],o[3]);case"A":var a=o[0],l=o[1],c=o[2],h=o[3],f=o[4],p=o[5],g=o[6];return f+=p*e/s.pathLength,fn.getPointOnEllipticalArc(a,l,c,h,f,g)}return null}static getLineLength(e,n,r,i){return Math.sqrt((r-e)*(r-e)+(i-n)*(i-n))}static getPointOnLine(e,n,r,i,s,o,a){o===void 0&&(o=n),a===void 0&&(a=r);var l=(s-r)/(i-n+1e-8),c=Math.sqrt(e*e/(1+l*l));i<n&&(c*=-1);var h=l*c,f;if(i===n)f={x:o,y:a+h};else if((a-r)/(o-n+1e-8)===l)f={x:o+c,y:a+h};else{var p,g,v=this.getLineLength(n,r,i,s),x=(o-n)*(i-n)+(a-r)*(s-r);x=x/(v*v),p=n+x*(i-n),g=r+x*(s-r);var k=this.getLineLength(o,a,p,g),C=Math.sqrt(e*e-k*k);c=Math.sqrt(C*C/(1+l*l)),i<n&&(c*=-1),h=l*c,f={x:p+c,y:g+h}}return f}static getPointOnCubicBezier(e,n,r,i,s,o,a,l,c){function h(k){return k*k*k}function f(k){return 3*k*k*(1-k)}function p(k){return 3*k*(1-k)*(1-k)}function g(k){return(1-k)*(1-k)*(1-k)}var v=l*h(e)+o*f(e)+i*p(e)+n*g(e),x=c*h(e)+a*f(e)+s*p(e)+r*g(e);return{x:v,y:x}}static getPointOnQuadraticBezier(e,n,r,i,s,o,a){function l(g){return g*g}function c(g){return 2*g*(1-g)}function h(g){return(1-g)*(1-g)}var f=o*l(e)+i*c(e)+n*h(e),p=a*l(e)+s*c(e)+r*h(e);return{x:f,y:p}}static getPointOnEllipticalArc(e,n,r,i,s,o){var a=Math.cos(o),l=Math.sin(o),c={x:r*Math.cos(s),y:i*Math.sin(s)};return{x:e+(c.x*a-c.y*l),y:n+(c.x*l+c.y*a)}}static parsePathData(e){if(!e)return[];var n=e,r=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"];n=n.replace(new RegExp(" ","g"),",");for(var i=0;i<r.length;i++)n=n.replace(new RegExp(r[i],"g"),"|"+r[i]);var s=n.split("|"),o=[],a=[],l=0,c=0,h=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:e[-+]?\d+)?)/gi,f;for(i=1;i<s.length;i++){var p=s[i],g=p.charAt(0);for(p=p.slice(1),a.length=0;f=h.exec(p);)a.push(f[0]);for(var v=[],x=0,k=a.length;x<k;x++){if(a[x]==="00"){v.push(0,0);continue}var C=parseFloat(a[x]);isNaN(C)?v.push(0):v.push(C)}for(;v.length>0&&!isNaN(v[0]);){var b=null,_=[],T=l,R=c,L,M,A,$,j,V,U,B,Z,q;switch(g){case"l":l+=v.shift(),c+=v.shift(),b="L",_.push(l,c);break;case"L":l=v.shift(),c=v.shift(),_.push(l,c);break;case"m":var G=v.shift(),te=v.shift();if(l+=G,c+=te,b="M",o.length>2&&o[o.length-1].command==="z"){for(var O=o.length-2;O>=0;O--)if(o[O].command==="M"){l=o[O].points[0]+G,c=o[O].points[1]+te;break}}_.push(l,c),g="l";break;case"M":l=v.shift(),c=v.shift(),b="M",_.push(l,c),g="L";break;case"h":l+=v.shift(),b="L",_.push(l,c);break;case"H":l=v.shift(),b="L",_.push(l,c);break;case"v":c+=v.shift(),b="L",_.push(l,c);break;case"V":c=v.shift(),b="L",_.push(l,c);break;case"C":_.push(v.shift(),v.shift(),v.shift(),v.shift()),l=v.shift(),c=v.shift(),_.push(l,c);break;case"c":_.push(l+v.shift(),c+v.shift(),l+v.shift(),c+v.shift()),l+=v.shift(),c+=v.shift(),b="C",_.push(l,c);break;case"S":M=l,A=c,L=o[o.length-1],L.command==="C"&&(M=l+(l-L.points[2]),A=c+(c-L.points[3])),_.push(M,A,v.shift(),v.shift()),l=v.shift(),c=v.shift(),b="C",_.push(l,c);break;case"s":M=l,A=c,L=o[o.length-1],L.command==="C"&&(M=l+(l-L.points[2]),A=c+(c-L.points[3])),_.push(M,A,l+v.shift(),c+v.shift()),l+=v.shift(),c+=v.shift(),b="C",_.push(l,c);break;case"Q":_.push(v.shift(),v.shift()),l=v.shift(),c=v.shift(),_.push(l,c);break;case"q":_.push(l+v.shift(),c+v.shift()),l+=v.shift(),c+=v.shift(),b="Q",_.push(l,c);break;case"T":M=l,A=c,L=o[o.length-1],L.command==="Q"&&(M=l+(l-L.points[0]),A=c+(c-L.points[1])),l=v.shift(),c=v.shift(),b="Q",_.push(M,A,l,c);break;case"t":M=l,A=c,L=o[o.length-1],L.command==="Q"&&(M=l+(l-L.points[0]),A=c+(c-L.points[1])),l+=v.shift(),c+=v.shift(),b="Q",_.push(M,A,l,c);break;case"A":$=v.shift(),j=v.shift(),V=v.shift(),U=v.shift(),B=v.shift(),Z=l,q=c,l=v.shift(),c=v.shift(),b="A",_=this.convertEndpointToCenterParameterization(Z,q,l,c,U,B,$,j,V);break;case"a":$=v.shift(),j=v.shift(),V=v.shift(),U=v.shift(),B=v.shift(),Z=l,q=c,l+=v.shift(),c+=v.shift(),b="A",_=this.convertEndpointToCenterParameterization(Z,q,l,c,U,B,$,j,V);break}o.push({command:b||g,points:_,start:{x:T,y:R},pathLength:this.calcLength(T,R,b||g,_)})}(g==="z"||g==="Z")&&o.push({command:"z",points:[],start:void 0,pathLength:0})}return o}static calcLength(e,n,r,i){var s,o,a,l,c=fn;switch(r){case"L":return c.getLineLength(e,n,i[0],i[1]);case"C":for(s=0,o=c.getPointOnCubicBezier(0,e,n,i[0],i[1],i[2],i[3],i[4],i[5]),l=.01;l<=1;l+=.01)a=c.getPointOnCubicBezier(l,e,n,i[0],i[1],i[2],i[3],i[4],i[5]),s+=c.getLineLength(o.x,o.y,a.x,a.y),o=a;return s;case"Q":for(s=0,o=c.getPointOnQuadraticBezier(0,e,n,i[0],i[1],i[2],i[3]),l=.01;l<=1;l+=.01)a=c.getPointOnQuadraticBezier(l,e,n,i[0],i[1],i[2],i[3]),s+=c.getLineLength(o.x,o.y,a.x,a.y),o=a;return s;case"A":s=0;var h=i[4],f=i[5],p=i[4]+f,g=Math.PI/180;if(Math.abs(h-p)<g&&(g=Math.abs(h-p)),o=c.getPointOnEllipticalArc(i[0],i[1],i[2],i[3],h,0),f<0)for(l=h-g;l>p;l-=g)a=c.getPointOnEllipticalArc(i[0],i[1],i[2],i[3],l,0),s+=c.getLineLength(o.x,o.y,a.x,a.y),o=a;else for(l=h+g;l<p;l+=g)a=c.getPointOnEllipticalArc(i[0],i[1],i[2],i[3],l,0),s+=c.getLineLength(o.x,o.y,a.x,a.y),o=a;return a=c.getPointOnEllipticalArc(i[0],i[1],i[2],i[3],p,0),s+=c.getLineLength(o.x,o.y,a.x,a.y),s}return 0}static convertEndpointToCenterParameterization(e,n,r,i,s,o,a,l,c){var h=c*(Math.PI/180),f=Math.cos(h)*(e-r)/2+Math.sin(h)*(n-i)/2,p=-1*Math.sin(h)*(e-r)/2+Math.cos(h)*(n-i)/2,g=f*f/(a*a)+p*p/(l*l);g>1&&(a*=Math.sqrt(g),l*=Math.sqrt(g));var v=Math.sqrt((a*a*(l*l)-a*a*(p*p)-l*l*(f*f))/(a*a*(p*p)+l*l*(f*f)));s===o&&(v*=-1),isNaN(v)&&(v=0);var x=v*a*p/l,k=v*-l*f/a,C=(e+r)/2+Math.cos(h)*x-Math.sin(h)*k,b=(n+i)/2+Math.sin(h)*x+Math.cos(h)*k,_=function(j){return Math.sqrt(j[0]*j[0]+j[1]*j[1])},T=function(j,V){return(j[0]*V[0]+j[1]*V[1])/(_(j)*_(V))},R=function(j,V){return(j[0]*V[1]<j[1]*V[0]?-1:1)*Math.acos(T(j,V))},L=R([1,0],[(f-x)/a,(p-k)/l]),M=[(f-x)/a,(p-k)/l],A=[(-1*f-x)/a,(-1*p-k)/l],$=R(M,A);return T(M,A)<=-1&&($=Math.PI),T(M,A)>=1&&($=0),o===0&&$>0&&($=$-2*Math.PI),o===1&&$<0&&($=$+2*Math.PI),[C,b,a,l,L,$,h,o]}}fn.prototype.className="Path";fn.prototype._attrsAffectingSize=["data"];$n(fn);W.addGetterSetter(fn,"data");class Lu extends va{_sceneFunc(e){super._sceneFunc(e);var n=Math.PI*2,r=this.points(),i=r,s=this.tension()!==0&&r.length>4;s&&(i=this.getTensionPoints());var o=this.pointerLength(),a=r.length,l,c;if(s){const g=[i[i.length-4],i[i.length-3],i[i.length-2],i[i.length-1],r[a-2],r[a-1]],v=fn.calcLength(i[i.length-4],i[i.length-3],"C",g),x=fn.getPointOnQuadraticBezier(Math.min(1,1-o/v),g[0],g[1],g[2],g[3],g[4],g[5]);l=r[a-2]-x.x,c=r[a-1]-x.y}else l=r[a-2]-r[a-4],c=r[a-1]-r[a-3];var h=(Math.atan2(c,l)+n)%n,f=this.pointerWidth();this.pointerAtEnding()&&(e.save(),e.beginPath(),e.translate(r[a-2],r[a-1]),e.rotate(h),e.moveTo(0,0),e.lineTo(-o,f/2),e.lineTo(-o,-f/2),e.closePath(),e.restore()),this.pointerAtBeginning()&&(e.save(),e.translate(r[0],r[1]),s?(l=(i[0]+i[2])/2-r[0],c=(i[1]+i[3])/2-r[1]):(l=r[2]-r[0],c=r[3]-r[1]),e.rotate((Math.atan2(-c,-l)+n)%n),e.moveTo(0,0),e.lineTo(-o,f/2),e.lineTo(-o,-f/2),e.closePath(),e.restore());var p=this.dashEnabled();p&&(this.attrs.dashEnabled=!1,e.setLineDash([])),e.fillStrokeShape(this),p&&(this.attrs.dashEnabled=!0)}getSelfRect(){const e=super.getSelfRect(),n=this.pointerWidth()/2;return{x:e.x-n,y:e.y-n,width:e.width+n*2,height:e.height+n*2}}}Lu.prototype.className="Arrow";$n(Lu);W.addGetterSetter(Lu,"pointerLength",10,Me());W.addGetterSetter(Lu,"pointerWidth",10,Me());W.addGetterSetter(Lu,"pointerAtBeginning",!1);W.addGetterSetter(Lu,"pointerAtEnding",!0);class Rd extends Se{_sceneFunc(e){e.beginPath(),e.arc(0,0,this.attrs.radius||0,0,Math.PI*2,!1),e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(e){this.radius()!==e/2&&this.radius(e/2)}setHeight(e){this.radius()!==e/2&&this.radius(e/2)}}Rd.prototype._centroid=!0;Rd.prototype.className="Circle";Rd.prototype._attrsAffectingSize=["radius"];$n(Rd);W.addGetterSetter(Rd,"radius",0,Me());let Rl=class extends Se{_sceneFunc(e){var n=this.radiusX(),r=this.radiusY();e.beginPath(),e.save(),n!==r&&e.scale(1,r/n),e.arc(0,0,n,0,Math.PI*2,!1),e.restore(),e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.radiusX()*2}getHeight(){return this.radiusY()*2}setWidth(e){this.radiusX(e/2)}setHeight(e){this.radiusY(e/2)}};Rl.prototype.className="Ellipse";Rl.prototype._centroid=!0;Rl.prototype._attrsAffectingSize=["radiusX","radiusY"];$n(Rl);W.addComponentsGetterSetter(Rl,"radius",["x","y"]);W.addGetterSetter(Rl,"radiusX",0,Me());W.addGetterSetter(Rl,"radiusY",0,Me());let ya=class kA extends Se{constructor(e){super(e),this.on("imageChange.konva",()=>{this._setImageLoad()}),this._setImageLoad()}_setImageLoad(){const e=this.image();e&&e.complete||e&&e.readyState===4||e&&e.addEventListener&&e.addEventListener("load",()=>{this._requestDraw()})}_useBufferCanvas(){return super._useBufferCanvas(!0)}_sceneFunc(e){const n=this.getWidth(),r=this.getHeight(),i=this.attrs.image;let s;if(i){const o=this.attrs.cropWidth,a=this.attrs.cropHeight;o&&a?s=[i,this.cropX(),this.cropY(),o,a,0,0,n,r]:s=[i,0,0,n,r]}(this.hasFill()||this.hasStroke())&&(e.beginPath(),e.rect(0,0,n,r),e.closePath(),e.fillStrokeShape(this)),i&&e.drawImage.apply(e,s)}_hitFunc(e){var n=this.width(),r=this.height();e.beginPath(),e.rect(0,0,n,r),e.closePath(),e.fillStrokeShape(this)}getWidth(){var e,n;return(e=this.attrs.width)!==null&&e!==void 0?e:(n=this.image())===null||n===void 0?void 0:n.width}getHeight(){var e,n;return(e=this.attrs.height)!==null&&e!==void 0?e:(n=this.image())===null||n===void 0?void 0:n.height}static fromURL(e,n){var r=ne.createImageElement();r.onload=function(){var i=new kA({image:r});n(i)},r.crossOrigin="Anonymous",r.src=e}};ya.prototype.className="Image";$n(ya);W.addGetterSetter(ya,"image");W.addComponentsGetterSetter(ya,"crop",["x","y","width","height"]);W.addGetterSetter(ya,"cropX",0,Me());W.addGetterSetter(ya,"cropY",0,Me());W.addGetterSetter(ya,"cropWidth",0,Me());W.addGetterSetter(ya,"cropHeight",0,Me());var EA=["fontFamily","fontSize","fontStyle","padding","lineHeight","text","width","height"],BH="Change.konva",$H="none",Lx="up",Mx="right",Ax="down",Nx="left",zH=EA.length;class uS extends nd{constructor(e){super(e),this.on("add.konva",function(n){this._addListeners(n.child),this._sync()})}getText(){return this.find("Text")[0]}getTag(){return this.find("Tag")[0]}_addListeners(e){var n=this,r,i=function(){n._sync()};for(r=0;r<zH;r++)e.on(EA[r]+BH,i)}getWidth(){return this.getText().width()}getHeight(){return this.getText().height()}_sync(){var e=this.getText(),n=this.getTag(),r,i,s,o,a,l,c;if(e&&n){switch(r=e.width(),i=e.height(),s=n.pointerDirection(),o=n.pointerWidth(),c=n.pointerHeight(),a=0,l=0,s){case Lx:a=r/2,l=-1*c;break;case Mx:a=r+o,l=i/2;break;case Ax:a=r/2,l=i+c;break;case Nx:a=-1*o,l=i/2;break}n.setAttrs({x:-1*a,y:-1*l,width:r,height:i}),e.setAttrs({x:-1*a,y:-1*l})}}}uS.prototype.className="Label";$n(uS);class Mu extends Se{_sceneFunc(e){var n=this.width(),r=this.height(),i=this.pointerDirection(),s=this.pointerWidth(),o=this.pointerHeight(),a=this.cornerRadius();let l=0,c=0,h=0,f=0;typeof a=="number"?l=c=h=f=Math.min(a,n/2,r/2):(l=Math.min(a[0]||0,n/2,r/2),c=Math.min(a[1]||0,n/2,r/2),f=Math.min(a[2]||0,n/2,r/2),h=Math.min(a[3]||0,n/2,r/2)),e.beginPath(),e.moveTo(l,0),i===Lx&&(e.lineTo((n-s)/2,0),e.lineTo(n/2,-1*o),e.lineTo((n+s)/2,0)),e.lineTo(n-c,0),e.arc(n-c,c,c,Math.PI*3/2,0,!1),i===Mx&&(e.lineTo(n,(r-o)/2),e.lineTo(n+s,r/2),e.lineTo(n,(r+o)/2)),e.lineTo(n,r-f),e.arc(n-f,r-f,f,0,Math.PI/2,!1),i===Ax&&(e.lineTo((n+s)/2,r),e.lineTo(n/2,r+o),e.lineTo((n-s)/2,r)),e.lineTo(h,r),e.arc(h,r-h,h,Math.PI/2,Math.PI,!1),i===Nx&&(e.lineTo(0,(r+o)/2),e.lineTo(-1*s,r/2),e.lineTo(0,(r-o)/2)),e.lineTo(0,l),e.arc(l,l,l,Math.PI,Math.PI*3/2,!1),e.closePath(),e.fillStrokeShape(this)}getSelfRect(){var e=0,n=0,r=this.pointerWidth(),i=this.pointerHeight(),s=this.pointerDirection(),o=this.width(),a=this.height();return s===Lx?(n-=i,a+=i):s===Ax?a+=i:s===Nx?(e-=r*1.5,o+=r):s===Mx&&(o+=r*1.5),{x:e,y:n,width:o,height:a}}}Mu.prototype.className="Tag";$n(Mu);W.addGetterSetter(Mu,"pointerDirection",$H);W.addGetterSetter(Mu,"pointerWidth",0,Me());W.addGetterSetter(Mu,"pointerHeight",0,Me());W.addGetterSetter(Mu,"cornerRadius",0,iA(4));let tp=class extends Se{_sceneFunc(e){var n=this.cornerRadius(),r=this.width(),i=this.height();if(e.beginPath(),!n)e.rect(0,0,r,i);else{let s=0,o=0,a=0,l=0;typeof n=="number"?s=o=a=l=Math.min(n,r/2,i/2):(s=Math.min(n[0]||0,r/2,i/2),o=Math.min(n[1]||0,r/2,i/2),l=Math.min(n[2]||0,r/2,i/2),a=Math.min(n[3]||0,r/2,i/2)),e.moveTo(s,0),e.lineTo(r-o,0),e.arc(r-o,o,o,Math.PI*3/2,0,!1),e.lineTo(r,i-l),e.arc(r-l,i-l,l,0,Math.PI/2,!1),e.lineTo(a,i),e.arc(a,i-a,a,Math.PI/2,Math.PI,!1),e.lineTo(0,s),e.arc(s,s,s,Math.PI,Math.PI*3/2,!1)}e.closePath(),e.fillStrokeShape(this)}};tp.prototype.className="Rect";$n(tp);W.addGetterSetter(tp,"cornerRadius",0,iA(4));class Au extends Se{_sceneFunc(e){const n=this._getPoints();e.beginPath(),e.moveTo(n[0].x,n[0].y);for(var r=1;r<n.length;r++)e.lineTo(n[r].x,n[r].y);e.closePath(),e.fillStrokeShape(this)}_getPoints(){const e=this.attrs.sides,n=this.attrs.radius||0,r=[];for(var i=0;i<e;i++)r.push({x:n*Math.sin(i*2*Math.PI/e),y:-1*n*Math.cos(i*2*Math.PI/e)});return r}getSelfRect(){const e=this._getPoints();var n=e[0].x,r=e[0].y,i=e[0].x,s=e[0].y;return e.forEach(o=>{n=Math.min(n,o.x),r=Math.max(r,o.x),i=Math.min(i,o.y),s=Math.max(s,o.y)}),{x:n,y:i,width:r-n,height:s-i}}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(e){this.radius(e/2)}setHeight(e){this.radius(e/2)}}Au.prototype.className="RegularPolygon";Au.prototype._centroid=!0;Au.prototype._attrsAffectingSize=["radius"];$n(Au);W.addGetterSetter(Au,"radius",0,Me());W.addGetterSetter(Au,"sides",0,Me());var KR=Math.PI*2;class Nu extends Se{_sceneFunc(e){e.beginPath(),e.arc(0,0,this.innerRadius(),0,KR,!1),e.moveTo(this.outerRadius(),0),e.arc(0,0,this.outerRadius(),KR,0,!0),e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(e){this.outerRadius(e/2)}setHeight(e){this.outerRadius(e/2)}}Nu.prototype.className="Ring";Nu.prototype._centroid=!0;Nu.prototype._attrsAffectingSize=["innerRadius","outerRadius"];$n(Nu);W.addGetterSetter(Nu,"innerRadius",0,Me());W.addGetterSetter(Nu,"outerRadius",0,Me());class Mo extends Se{constructor(e){super(e),this._updated=!0,this.anim=new xs(()=>{var n=this._updated;return this._updated=!1,n}),this.on("animationChange.konva",function(){this.frameIndex(0)}),this.on("frameIndexChange.konva",function(){this._updated=!0}),this.on("frameRateChange.konva",function(){this.anim.isRunning()&&(clearInterval(this.interval),this._setInterval())})}_sceneFunc(e){var n=this.animation(),r=this.frameIndex(),i=r*4,s=this.animations()[n],o=this.frameOffsets(),a=s[i+0],l=s[i+1],c=s[i+2],h=s[i+3],f=this.image();if((this.hasFill()||this.hasStroke())&&(e.beginPath(),e.rect(0,0,c,h),e.closePath(),e.fillStrokeShape(this)),f)if(o){var p=o[n],g=r*2;e.drawImage(f,a,l,c,h,p[g+0],p[g+1],c,h)}else e.drawImage(f,a,l,c,h,0,0,c,h)}_hitFunc(e){var n=this.animation(),r=this.frameIndex(),i=r*4,s=this.animations()[n],o=this.frameOffsets(),a=s[i+2],l=s[i+3];if(e.beginPath(),o){var c=o[n],h=r*2;e.rect(c[h+0],c[h+1],a,l)}else e.rect(0,0,a,l);e.closePath(),e.fillShape(this)}_useBufferCanvas(){return super._useBufferCanvas(!0)}_setInterval(){var e=this;this.interval=setInterval(function(){e._updateIndex()},1e3/this.frameRate())}start(){if(!this.isRunning()){var e=this.getLayer();this.anim.setLayers(e),this._setInterval(),this.anim.start()}}stop(){this.anim.stop(),clearInterval(this.interval)}isRunning(){return this.anim.isRunning()}_updateIndex(){var e=this.frameIndex(),n=this.animation(),r=this.animations(),i=r[n],s=i.length/4;e<s-1?this.frameIndex(e+1):this.frameIndex(0)}}Mo.prototype.className="Sprite";$n(Mo);W.addGetterSetter(Mo,"animation");W.addGetterSetter(Mo,"animations");W.addGetterSetter(Mo,"frameOffsets");W.addGetterSetter(Mo,"image");W.addGetterSetter(Mo,"frameIndex",0,Me());W.addGetterSetter(Mo,"frameRate",17,Me());W.backCompat(Mo,{index:"frameIndex",getIndex:"getFrameIndex",setIndex:"setFrameIndex"});class Tl extends Se{_sceneFunc(e){var n=this.innerRadius(),r=this.outerRadius(),i=this.numPoints();e.beginPath(),e.moveTo(0,0-r);for(var s=1;s<i*2;s++){var o=s%2===0?r:n,a=o*Math.sin(s*Math.PI/i),l=-1*o*Math.cos(s*Math.PI/i);e.lineTo(a,l)}e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(e){this.outerRadius(e/2)}setHeight(e){this.outerRadius(e/2)}}Tl.prototype.className="Star";Tl.prototype._centroid=!0;Tl.prototype._attrsAffectingSize=["innerRadius","outerRadius"];$n(Tl);W.addGetterSetter(Tl,"numPoints",5,Me());W.addGetterSetter(Tl,"innerRadius",0,Me());W.addGetterSetter(Tl,"outerRadius",0,Me());function RA(t){return Array.from(t)}var Rg="auto",UH="center",fh="justify",VH="Change.konva",WH="2d",XR="-",TA="left",HH="text",GH="Text",qH="top",YH="bottom",ZR="middle",PA="normal",KH="px ",Tg=" ",XH="right",ZH="word",QH="char",JH="none",m1="",LA=["fontFamily","fontSize","fontStyle","fontVariant","padding","align","verticalAlign","lineHeight","text","width","height","wrap","ellipsis","letterSpacing"],eG=LA.length;function tG(t){return t.split(",").map(e=>{e=e.trim();const n=e.indexOf(" ")>=0,r=e.indexOf('"')>=0||e.indexOf("'")>=0;return n&&!r&&(e=`"${e}"`),e}).join(", ")}var Pg;function v1(){return Pg||(Pg=ne.createCanvasElement().getContext(WH),Pg)}function nG(t){t.fillText(this._partialText,this._partialTextX,this._partialTextY)}function rG(t){t.strokeText(this._partialText,this._partialTextX,this._partialTextY)}function iG(t){return t=t||{},!t.fillLinearGradientColorStops&&!t.fillRadialGradientColorStops&&!t.fillPatternImage&&(t.fill=t.fill||"black"),t}class Bn extends Se{constructor(e){super(iG(e)),this._partialTextX=0,this._partialTextY=0;for(var n=0;n<eG;n++)this.on(LA[n]+VH,this._setTextData);this._setTextData()}_sceneFunc(e){var n=this.textArr,r=n.length;if(this.text()){var i=this.padding(),s=this.fontSize(),o=this.lineHeight()*s,a=this.verticalAlign(),l=0,c=this.align(),h=this.getWidth(),f=this.letterSpacing(),p=this.fill(),g=this.textDecoration(),v=g.indexOf("underline")!==-1,x=g.indexOf("line-through")!==-1,k,C=0,C=o/2,b=0,_=0;for(e.setAttr("font",this._getContextFont()),e.setAttr("textBaseline",ZR),e.setAttr("textAlign",TA),a===ZR?l=(this.getHeight()-r*o-i*2)/2:a===YH&&(l=this.getHeight()-r*o-i*2),e.translate(i,l+i),k=0;k<r;k++){var b=0,_=0,T=n[k],R=T.text,L=T.width,M=k!==r-1,A,$,j;if(e.save(),c===XH?b+=h-L-i*2:c===UH&&(b+=(h-L-i*2)/2),v&&(e.save(),e.beginPath(),e.moveTo(b,C+_+Math.round(s/2)),A=R.split(" ").length-1,$=A===0,j=c===fh&&M&&!$?h-i*2:L,e.lineTo(b+Math.round(j),C+_+Math.round(s/2)),e.lineWidth=s/15,e.strokeStyle=p,e.stroke(),e.restore()),x&&(e.save(),e.beginPath(),e.moveTo(b,C+_),A=R.split(" ").length-1,$=A===0,j=c===fh&&M&&!$?h-i*2:L,e.lineTo(b+Math.round(j),C+_),e.lineWidth=s/15,e.strokeStyle=p,e.stroke(),e.restore()),f!==0||c===fh){A=R.split(" ").length-1;for(var V=RA(R),U=0;U<V.length;U++){var B=V[U];B===" "&&k!==r-1&&c===fh&&(b+=(h-i*2-L)/A),this._partialTextX=b,this._partialTextY=C+_,this._partialText=B,e.fillStrokeShape(this),b+=this.measureSize(B).width+f}}else this._partialTextX=b,this._partialTextY=C+_,this._partialText=R,e.fillStrokeShape(this);e.restore(),r>1&&(C+=o)}}}_hitFunc(e){var n=this.getWidth(),r=this.getHeight();e.beginPath(),e.rect(0,0,n,r),e.closePath(),e.fillStrokeShape(this)}setText(e){var n=ne._isString(e)?e:e==null?"":e+"";return this._setAttr(HH,n),this}getWidth(){var e=this.attrs.width===Rg||this.attrs.width===void 0;return e?this.getTextWidth()+this.padding()*2:this.attrs.width}getHeight(){var e=this.attrs.height===Rg||this.attrs.height===void 0;return e?this.fontSize()*this.textArr.length*this.lineHeight()+this.padding()*2:this.attrs.height}getTextWidth(){return this.textWidth}getTextHeight(){return ne.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}measureSize(e){var n=v1(),r=this.fontSize(),i;return n.save(),n.font=this._getContextFont(),i=n.measureText(e),n.restore(),{width:i.width,height:r}}_getContextFont(){return this.fontStyle()+Tg+this.fontVariant()+Tg+(this.fontSize()+KH)+tG(this.fontFamily())}_addTextLine(e){this.align()===fh&&(e=e.trim());var n=this._getTextWidth(e);return this.textArr.push({text:e,width:n})}_getTextWidth(e){var n=this.letterSpacing(),r=e.length;return v1().measureText(e).width+(r?n*(r-1):0)}_setTextData(){var e=this.text().split(`
`),n=+this.fontSize(),r=0,i=this.lineHeight()*n,s=this.attrs.width,o=this.attrs.height,a=s!==Rg&&s!==void 0,l=o!==Rg&&o!==void 0,c=this.padding(),h=s-c*2,f=o-c*2,p=0,g=this.wrap(),v=g!==JH,x=g!==QH&&v,k=this.ellipsis();this.textArr=[],v1().font=this._getContextFont();for(var C=k?this._getTextWidth(m1):0,b=0,_=e.length;b<_;++b){var T=e[b],R=this._getTextWidth(T);if(a&&R>h)for(;T.length>0;){for(var L=0,M=T.length,A="",$=0;L<M;){var j=L+M>>>1,V=T.slice(0,j+1),U=this._getTextWidth(V)+C;U<=h?(L=j+1,A=V,$=U):M=j}if(A){if(x){var B,Z=T[A.length],q=Z===Tg||Z===XR;q&&$<=h?B=A.length:B=Math.max(A.lastIndexOf(Tg),A.lastIndexOf(XR))+1,B>0&&(L=B,A=A.slice(0,L),$=this._getTextWidth(A))}if(A=A.trimRight(),this._addTextLine(A),r=Math.max(r,$),p+=i,!v||l&&p+i>f){var G=this.textArr[this.textArr.length-1];if(G&&k){var te=this._getTextWidth(G.text+m1)<h;te||(G.text=G.text.slice(0,G.text.length-3)),this.textArr.splice(this.textArr.length-1,1),this._addTextLine(G.text+m1)}break}if(T=T.slice(L),T=T.trimLeft(),T.length>0&&(R=this._getTextWidth(T),R<=h)){this._addTextLine(T),p+=i,r=Math.max(r,R);break}}else break}else this._addTextLine(T),p+=i,r=Math.max(r,R);if(l&&p+i>f)break}this.textHeight=n,this.textWidth=r}getStrokeScaleEnabled(){return!0}}Bn.prototype._fillFunc=nG;Bn.prototype._strokeFunc=rG;Bn.prototype.className=GH;Bn.prototype._attrsAffectingSize=["text","fontSize","padding","wrap","lineHeight","letterSpacing"];$n(Bn);W.overWriteSetter(Bn,"width",sS());W.overWriteSetter(Bn,"height",sS());W.addGetterSetter(Bn,"fontFamily","Arial");W.addGetterSetter(Bn,"fontSize",12,Me());W.addGetterSetter(Bn,"fontStyle",PA);W.addGetterSetter(Bn,"fontVariant",PA);W.addGetterSetter(Bn,"padding",0,Me());W.addGetterSetter(Bn,"align",TA);W.addGetterSetter(Bn,"verticalAlign",qH);W.addGetterSetter(Bn,"lineHeight",1,Me());W.addGetterSetter(Bn,"wrap",ZH);W.addGetterSetter(Bn,"ellipsis",!1,ro());W.addGetterSetter(Bn,"letterSpacing",0,Me());W.addGetterSetter(Bn,"text","",Ed());W.addGetterSetter(Bn,"textDecoration","");var sG="",MA="normal";function AA(t){t.fillText(this.partialText,0,0)}function NA(t){t.strokeText(this.partialText,0,0)}class Sr extends Se{constructor(e){super(e),this.dummyCanvas=ne.createCanvasElement(),this.dataArray=[],this.dataArray=fn.parsePathData(this.attrs.data),this.on("dataChange.konva",function(){this.dataArray=fn.parsePathData(this.attrs.data),this._setTextData()}),this.on("textChange.konva alignChange.konva letterSpacingChange.konva kerningFuncChange.konva fontSizeChange.konva",this._setTextData),this._setTextData()}_sceneFunc(e){e.setAttr("font",this._getContextFont()),e.setAttr("textBaseline",this.textBaseline()),e.setAttr("textAlign","left"),e.save();var n=this.textDecoration(),r=this.fill(),i=this.fontSize(),s=this.glyphInfo;n==="underline"&&e.beginPath();for(var o=0;o<s.length;o++){e.save();var a=s[o].p0;e.translate(a.x,a.y),e.rotate(s[o].rotation),this.partialText=s[o].text,e.fillStrokeShape(this),n==="underline"&&(o===0&&e.moveTo(0,i/2+1),e.lineTo(i,i/2+1)),e.restore()}n==="underline"&&(e.strokeStyle=r,e.lineWidth=i/20,e.stroke()),e.restore()}_hitFunc(e){e.beginPath();var n=this.glyphInfo;if(n.length>=1){var r=n[0].p0;e.moveTo(r.x,r.y)}for(var i=0;i<n.length;i++){var s=n[i].p1;e.lineTo(s.x,s.y)}e.setAttr("lineWidth",this.fontSize()),e.setAttr("strokeStyle",this.colorKey),e.stroke()}getTextWidth(){return this.textWidth}getTextHeight(){return ne.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}setText(e){return Bn.prototype.setText.call(this,e)}_getContextFont(){return Bn.prototype._getContextFont.call(this)}_getTextSize(e){var n=this.dummyCanvas,r=n.getContext("2d");r.save(),r.font=this._getContextFont();var i=r.measureText(e);return r.restore(),{width:i.width,height:parseInt(this.attrs.fontSize,10)}}_setTextData(){var e=this,n=this._getTextSize(this.attrs.text),r=this.letterSpacing(),i=this.align(),s=this.kerningFunc();this.textWidth=n.width,this.textHeight=n.height;var o=Math.max(this.textWidth+((this.attrs.text||"").length-1)*r,0);this.glyphInfo=[];for(var a=0,l=0;l<e.dataArray.length;l++)e.dataArray[l].pathLength>0&&(a+=e.dataArray[l].pathLength);var c=0;i==="center"&&(c=Math.max(0,a/2-o/2)),i==="right"&&(c=Math.max(0,a-o));for(var h=RA(this.text()),f=this.text().split(" ").length-1,p,g,v,x=-1,k=0,C=function(){k=0;for(var U=e.dataArray,B=x+1;B<U.length;B++){if(U[B].pathLength>0)return x=B,U[B];U[B].command==="M"&&(p={x:U[B].points[0],y:U[B].points[1]})}return{}},b=function(U){var B=e._getTextSize(U).width+r;U===" "&&i==="justify"&&(B+=(a-o)/f);var Z=0,q=0;for(g=void 0;Math.abs(B-Z)/B>.01&&q<20;){q++;for(var G=Z;v===void 0;)v=C(),v&&G+v.pathLength<B&&(G+=v.pathLength,v=void 0);if(v==={}||p===void 0)return;var te=!1;switch(v.command){case"L":fn.getLineLength(p.x,p.y,v.points[0],v.points[1])>B?g=fn.getPointOnLine(B,p.x,p.y,v.points[0],v.points[1],p.x,p.y):v=void 0;break;case"A":var O=v.points[4],K=v.points[5],Y=v.points[4]+K;k===0?k=O+1e-8:B>Z?k+=Math.PI/180*K/Math.abs(K):k-=Math.PI/360*K/Math.abs(K),(K<0&&k<Y||K>=0&&k>Y)&&(k=Y,te=!0),g=fn.getPointOnEllipticalArc(v.points[0],v.points[1],v.points[2],v.points[3],k,v.points[6]);break;case"C":k===0?B>v.pathLength?k=1e-8:k=B/v.pathLength:B>Z?k+=(B-Z)/v.pathLength/2:k=Math.max(k-(Z-B)/v.pathLength/2,0),k>1&&(k=1,te=!0),g=fn.getPointOnCubicBezier(k,v.start.x,v.start.y,v.points[0],v.points[1],v.points[2],v.points[3],v.points[4],v.points[5]);break;case"Q":k===0?k=B/v.pathLength:B>Z?k+=(B-Z)/v.pathLength:k-=(Z-B)/v.pathLength,k>1&&(k=1,te=!0),g=fn.getPointOnQuadraticBezier(k,v.start.x,v.start.y,v.points[0],v.points[1],v.points[2],v.points[3]);break}g!==void 0&&(Z=fn.getLineLength(p.x,p.y,g.x,g.y)),te&&(te=!1,v=void 0)}},_="C",T=e._getTextSize(_).width+r,R=c/T-1,L=0;L<R&&(b(_),!(p===void 0||g===void 0));L++)p=g;for(var M=0;M<h.length&&(b(h[M]),!(p===void 0||g===void 0));M++){var A=fn.getLineLength(p.x,p.y,g.x,g.y),$=0;if(s)try{$=s(h[M-1],h[M])*this.fontSize()}catch{$=0}p.x+=$,g.x+=$,this.textWidth+=$;var j=fn.getPointOnLine($+A/2,p.x,p.y,g.x,g.y),V=Math.atan2(g.y-p.y,g.x-p.x);this.glyphInfo.push({transposeX:j.x,transposeY:j.y,text:h[M],rotation:V,p0:p,p1:g}),p=g}}getSelfRect(){if(!this.glyphInfo.length)return{x:0,y:0,width:0,height:0};var e=[];this.glyphInfo.forEach(function(h){e.push(h.p0.x),e.push(h.p0.y),e.push(h.p1.x),e.push(h.p1.y)});for(var n=e[0]||0,r=e[0]||0,i=e[1]||0,s=e[1]||0,o,a,l=0;l<e.length/2;l++)o=e[l*2],a=e[l*2+1],n=Math.min(n,o),r=Math.max(r,o),i=Math.min(i,a),s=Math.max(s,a);var c=this.fontSize();return{x:n-c/2,y:i-c/2,width:r-n+c,height:s-i+c}}}Sr.prototype._fillFunc=AA;Sr.prototype._strokeFunc=NA;Sr.prototype._fillFuncHit=AA;Sr.prototype._strokeFuncHit=NA;Sr.prototype.className="TextPath";Sr.prototype._attrsAffectingSize=["text","fontSize","data"];$n(Sr);W.addGetterSetter(Sr,"data");W.addGetterSetter(Sr,"fontFamily","Arial");W.addGetterSetter(Sr,"fontSize",12,Me());W.addGetterSetter(Sr,"fontStyle",MA);W.addGetterSetter(Sr,"align","left");W.addGetterSetter(Sr,"letterSpacing",0,Me());W.addGetterSetter(Sr,"textBaseline","middle");W.addGetterSetter(Sr,"fontVariant",MA);W.addGetterSetter(Sr,"text",sG);W.addGetterSetter(Sr,"textDecoration",null);W.addGetterSetter(Sr,"kerningFunc",null);var Qo="tr-konva",oG=["resizeEnabledChange","rotateAnchorOffsetChange","rotateEnabledChange","enabledAnchorsChange","anchorSizeChange","borderEnabledChange","borderStrokeChange","borderStrokeWidthChange","borderDashChange","anchorStrokeChange","anchorStrokeWidthChange","anchorFillChange","anchorCornerRadiusChange","ignoreStrokeChange"].map(t=>t+`.${Qo}`).join(" "),QR="nodesRect",aG=["widthChange","heightChange","scaleXChange","scaleYChange","skewXChange","skewYChange","rotationChange","offsetXChange","offsetYChange","transformsEnabledChange","strokeWidthChange"].map(t=>t+`.${Qo}`).join(" "),lG={"top-left":-45,"top-center":0,"top-right":45,"middle-right":-90,"middle-left":90,"bottom-left":-135,"bottom-center":180,"bottom-right":135};const uG="ontouchstart"in tt._global;function cG(t,e){if(t==="rotater")return"crosshair";e+=ne.degToRad(lG[t]||0);var n=(ne.radToDeg(e)%360+360)%360;return ne._inRange(n,315+22.5,360)||ne._inRange(n,0,22.5)?"ns-resize":ne._inRange(n,45-22.5,45+22.5)?"nesw-resize":ne._inRange(n,90-22.5,90+22.5)?"ew-resize":ne._inRange(n,135-22.5,135+22.5)?"nwse-resize":ne._inRange(n,180-22.5,180+22.5)?"ns-resize":ne._inRange(n,225-22.5,225+22.5)?"nesw-resize":ne._inRange(n,270-22.5,270+22.5)?"ew-resize":ne._inRange(n,315-22.5,315+22.5)?"nwse-resize":(ne.error("Transformer has unknown angle for cursor detection: "+n),"pointer")}var Jm=["top-left","top-center","top-right","middle-right","middle-left","bottom-left","bottom-center","bottom-right"],JR=1e8;function dG(t){return{x:t.x+t.width/2*Math.cos(t.rotation)+t.height/2*Math.sin(-t.rotation),y:t.y+t.height/2*Math.cos(t.rotation)+t.width/2*Math.sin(t.rotation)}}function jA(t,e,n){const r=n.x+(t.x-n.x)*Math.cos(e)-(t.y-n.y)*Math.sin(e),i=n.y+(t.x-n.x)*Math.sin(e)+(t.y-n.y)*Math.cos(e);return Object.assign(Object.assign({},t),{rotation:t.rotation+e,x:r,y:i})}function hG(t,e){const n=dG(t);return jA(t,e,n)}function fG(t,e,n){let r=e;for(let i=0;i<t.length;i++){const s=tt.getAngle(t[i]),o=Math.abs(s-e)%(Math.PI*2);Math.min(o,Math.PI*2-o)<n&&(r=s)}return r}class dn extends nd{constructor(e){super(e),this._transforming=!1,this._createElements(),this._handleMouseMove=this._handleMouseMove.bind(this),this._handleMouseUp=this._handleMouseUp.bind(this),this.update=this.update.bind(this),this.on(oG,this.update),this.getNode()&&this.update()}attachTo(e){return this.setNode(e),this}setNode(e){return ne.warn("tr.setNode(shape), tr.node(shape) and tr.attachTo(shape) methods are deprecated. Please use tr.nodes(nodesArray) instead."),this.setNodes([e])}getNode(){return this._nodes&&this._nodes[0]}setNodes(e=[]){this._nodes&&this._nodes.length&&this.detach(),this._nodes=e,e.length===1&&this.useSingleNodeRotation()?this.rotation(e[0].getAbsoluteRotation()):this.rotation(0),this._nodes.forEach(r=>{const i=r._attrsAffectingSize.map(o=>o+"Change."+Qo).join(" "),s=()=>{this.nodes().length===1&&this.useSingleNodeRotation()&&this.rotation(this.nodes()[0].getAbsoluteRotation()),this._resetTransformCache(),!this._transforming&&!this.isDragging()&&this.update()};r.on(i,s),r.on(aG,s),r.on(`absoluteTransformChange.${Qo}`,s),r.on(`xChange.${Qo} yChange.${Qo}`,s),this._proxyDrag(r)}),this._resetTransformCache();var n=!!this.findOne(".top-left");return n&&this.update(),this}_proxyDrag(e){let n;e.on(`dragstart.${Qo}`,r=>{n=e.getAbsolutePosition(),!this.isDragging()&&e!==this.findOne(".back")&&this.startDrag(r,!1)}),e.on(`dragmove.${Qo}`,r=>{if(!n)return;const i=e.getAbsolutePosition(),s=i.x-n.x,o=i.y-n.y;this.nodes().forEach(a=>{if(a===e||a.isDragging())return;const l=a.getAbsolutePosition();a.setAbsolutePosition({x:l.x+s,y:l.y+o}),a.startDrag(r)}),n=null})}getNodes(){return this._nodes||[]}getActiveAnchor(){return this._movingAnchorName}detach(){this._nodes&&this._nodes.forEach(e=>{e.off("."+Qo)}),this._nodes=[],this._resetTransformCache()}_resetTransformCache(){this._clearCache(QR),this._clearCache("transform"),this._clearSelfAndDescendantCache("absoluteTransform")}_getNodeRect(){return this._getCache(QR,this.__getNodeRect)}__getNodeShape(e,n=this.rotation(),r){var i=e.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),s=e.getAbsoluteScale(r),o=e.getAbsolutePosition(r),a=i.x*s.x-e.offsetX()*s.x,l=i.y*s.y-e.offsetY()*s.y;const c=(tt.getAngle(e.getAbsoluteRotation())+Math.PI*2)%(Math.PI*2),h={x:o.x+a*Math.cos(c)+l*Math.sin(-c),y:o.y+l*Math.cos(c)+a*Math.sin(c),width:i.width*s.x,height:i.height*s.y,rotation:c};return jA(h,-tt.getAngle(n),{x:0,y:0})}__getNodeRect(){var e=this.getNode();if(!e)return{x:-JR,y:-JR,width:0,height:0,rotation:0};const n=[];this.nodes().map(c=>{const h=c.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()});var f=[{x:h.x,y:h.y},{x:h.x+h.width,y:h.y},{x:h.x+h.width,y:h.y+h.height},{x:h.x,y:h.y+h.height}],p=c.getAbsoluteTransform();f.forEach(function(g){var v=p.point(g);n.push(v)})});const r=new qi;r.rotate(-tt.getAngle(this.rotation()));var i,s,o,a;n.forEach(function(c){var h=r.point(c);i===void 0&&(i=o=h.x,s=a=h.y),i=Math.min(i,h.x),s=Math.min(s,h.y),o=Math.max(o,h.x),a=Math.max(a,h.y)}),r.invert();const l=r.point({x:i,y:s});return{x:l.x,y:l.y,width:o-i,height:a-s,rotation:tt.getAngle(this.rotation())}}getX(){return this._getNodeRect().x}getY(){return this._getNodeRect().y}getWidth(){return this._getNodeRect().width}getHeight(){return this._getNodeRect().height}_createElements(){this._createBack(),Jm.forEach((function(e){this._createAnchor(e)}).bind(this)),this._createAnchor("rotater")}_createAnchor(e){var n=new tp({stroke:"rgb(0, 161, 255)",fill:"white",strokeWidth:1,name:e+" _anchor",dragDistance:0,draggable:!0,hitStrokeWidth:uG?10:"auto"}),r=this;n.on("mousedown touchstart",function(i){r._handleMouseDown(i)}),n.on("dragstart",i=>{n.stopDrag(),i.cancelBubble=!0}),n.on("dragend",i=>{i.cancelBubble=!0}),n.on("mouseenter",()=>{var i=tt.getAngle(this.rotation()),s=cG(e,i);n.getStage().content&&(n.getStage().content.style.cursor=s),this._cursorChange=!0}),n.on("mouseout",()=>{n.getStage().content&&(n.getStage().content.style.cursor=""),this._cursorChange=!1}),this.add(n)}_createBack(){var e=new Se({name:"back",width:0,height:0,draggable:!0,sceneFunc(n){var r=this.getParent(),i=r.padding();n.beginPath(),n.rect(-i,-i,this.width()+i*2,this.height()+i*2),n.moveTo(this.width()/2,-i),r.rotateEnabled()&&n.lineTo(this.width()/2,-r.rotateAnchorOffset()*ne._sign(this.height())-i),n.fillStrokeShape(this)},hitFunc:(n,r)=>{if(this.shouldOverdrawWholeArea()){var i=this.padding();n.beginPath(),n.rect(-i,-i,r.width()+i*2,r.height()+i*2),n.fillStrokeShape(r)}}});this.add(e),this._proxyDrag(e),e.on("dragstart",n=>{n.cancelBubble=!0}),e.on("dragmove",n=>{n.cancelBubble=!0}),e.on("dragend",n=>{n.cancelBubble=!0}),this.on("dragmove",n=>{this.update()})}_handleMouseDown(e){this._movingAnchorName=e.target.name().split(" ")[0];var n=this._getNodeRect(),r=n.width,i=n.height,s=Math.sqrt(Math.pow(r,2)+Math.pow(i,2));this.sin=Math.abs(i/s),this.cos=Math.abs(r/s),typeof window<"u"&&(window.addEventListener("mousemove",this._handleMouseMove),window.addEventListener("touchmove",this._handleMouseMove),window.addEventListener("mouseup",this._handleMouseUp,!0),window.addEventListener("touchend",this._handleMouseUp,!0)),this._transforming=!0;var o=e.target.getAbsolutePosition(),a=e.target.getStage().getPointerPosition();this._anchorDragOffset={x:a.x-o.x,y:a.y-o.y},this._fire("transformstart",{evt:e,target:this.getNode()}),this._nodes.forEach(l=>{l._fire("transformstart",{evt:e,target:l})})}_handleMouseMove(e){var n,r,i,s=this.findOne("."+this._movingAnchorName),o=s.getStage();o.setPointersPositions(e);const a=o.getPointerPosition();var l={x:a.x-this._anchorDragOffset.x,y:a.y-this._anchorDragOffset.y};const c=s.getAbsolutePosition();s.setAbsolutePosition(l);const h=s.getAbsolutePosition();if(!(c.x===h.x&&c.y===h.y)){if(this._movingAnchorName==="rotater"){var f=this._getNodeRect();n=s.x()-f.width/2,r=-s.y()+f.height/2;let U=Math.atan2(-r,n)+Math.PI/2;f.height<0&&(U-=Math.PI);var p=tt.getAngle(this.rotation());const B=p+U,Z=tt.getAngle(this.rotationSnapTolerance()),G=fG(this.rotationSnaps(),B,Z)-f.rotation,te=hG(f,G);this._fitNodesInto(te,e);return}var g=this.keepRatio()||e.shiftKey,b=this.centeredScaling()||e.altKey;if(this._movingAnchorName==="top-left"){if(g){var v=b?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-right").x(),y:this.findOne(".bottom-right").y()};i=Math.sqrt(Math.pow(v.x-s.x(),2)+Math.pow(v.y-s.y(),2));var x=this.findOne(".top-left").x()>v.x?-1:1,k=this.findOne(".top-left").y()>v.y?-1:1;n=i*this.cos*x,r=i*this.sin*k,this.findOne(".top-left").x(v.x-n),this.findOne(".top-left").y(v.y-r)}}else if(this._movingAnchorName==="top-center")this.findOne(".top-left").y(s.y());else if(this._movingAnchorName==="top-right"){if(g){var v=b?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-left").x(),y:this.findOne(".bottom-left").y()};i=Math.sqrt(Math.pow(s.x()-v.x,2)+Math.pow(v.y-s.y(),2));var x=this.findOne(".top-right").x()<v.x?-1:1,k=this.findOne(".top-right").y()>v.y?-1:1;n=i*this.cos*x,r=i*this.sin*k,this.findOne(".top-right").x(v.x+n),this.findOne(".top-right").y(v.y-r)}var C=s.position();this.findOne(".top-left").y(C.y),this.findOne(".bottom-right").x(C.x)}else if(this._movingAnchorName==="middle-left")this.findOne(".top-left").x(s.x());else if(this._movingAnchorName==="middle-right")this.findOne(".bottom-right").x(s.x());else if(this._movingAnchorName==="bottom-left"){if(g){var v=b?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-right").x(),y:this.findOne(".top-right").y()};i=Math.sqrt(Math.pow(v.x-s.x(),2)+Math.pow(s.y()-v.y,2));var x=v.x<s.x()?-1:1,k=s.y()<v.y?-1:1;n=i*this.cos*x,r=i*this.sin*k,s.x(v.x-n),s.y(v.y+r)}C=s.position(),this.findOne(".top-left").x(C.x),this.findOne(".bottom-right").y(C.y)}else if(this._movingAnchorName==="bottom-center")this.findOne(".bottom-right").y(s.y());else if(this._movingAnchorName==="bottom-right"){if(g){var v=b?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-left").x(),y:this.findOne(".top-left").y()};i=Math.sqrt(Math.pow(s.x()-v.x,2)+Math.pow(s.y()-v.y,2));var x=this.findOne(".bottom-right").x()<v.x?-1:1,k=this.findOne(".bottom-right").y()<v.y?-1:1;n=i*this.cos*x,r=i*this.sin*k,this.findOne(".bottom-right").x(v.x+n),this.findOne(".bottom-right").y(v.y+r)}}else console.error(new Error("Wrong position argument of selection resizer: "+this._movingAnchorName));var b=this.centeredScaling()||e.altKey;if(b){var _=this.findOne(".top-left"),T=this.findOne(".bottom-right"),R=_.x(),L=_.y(),M=this.getWidth()-T.x(),A=this.getHeight()-T.y();T.move({x:-R,y:-L}),_.move({x:M,y:A})}var $=this.findOne(".top-left").getAbsolutePosition();n=$.x,r=$.y;var j=this.findOne(".bottom-right").x()-this.findOne(".top-left").x(),V=this.findOne(".bottom-right").y()-this.findOne(".top-left").y();this._fitNodesInto({x:n,y:r,width:j,height:V,rotation:tt.getAngle(this.rotation())},e)}}_handleMouseUp(e){this._removeEvents(e)}getAbsoluteTransform(){return this.getTransform()}_removeEvents(e){if(this._transforming){this._transforming=!1,typeof window<"u"&&(window.removeEventListener("mousemove",this._handleMouseMove),window.removeEventListener("touchmove",this._handleMouseMove),window.removeEventListener("mouseup",this._handleMouseUp,!0),window.removeEventListener("touchend",this._handleMouseUp,!0));var n=this.getNode();this._fire("transformend",{evt:e,target:n}),n&&this._nodes.forEach(r=>{r._fire("transformend",{evt:e,target:r})}),this._movingAnchorName=null}}_fitNodesInto(e,n){var r=this._getNodeRect();const i=1;if(ne._inRange(e.width,-this.padding()*2-i,i)){this.update();return}if(ne._inRange(e.height,-this.padding()*2-i,i)){this.update();return}const s=this.flipEnabled();var o=new qi;if(o.rotate(tt.getAngle(this.rotation())),this._movingAnchorName&&e.width<0&&this._movingAnchorName.indexOf("left")>=0){const f=o.point({x:-this.padding()*2,y:0});if(e.x+=f.x,e.y+=f.y,e.width+=this.padding()*2,this._movingAnchorName=this._movingAnchorName.replace("left","right"),this._anchorDragOffset.x-=f.x,this._anchorDragOffset.y-=f.y,!s){this.update();return}}else if(this._movingAnchorName&&e.width<0&&this._movingAnchorName.indexOf("right")>=0){const f=o.point({x:this.padding()*2,y:0});if(this._movingAnchorName=this._movingAnchorName.replace("right","left"),this._anchorDragOffset.x-=f.x,this._anchorDragOffset.y-=f.y,e.width+=this.padding()*2,!s){this.update();return}}if(this._movingAnchorName&&e.height<0&&this._movingAnchorName.indexOf("top")>=0){const f=o.point({x:0,y:-this.padding()*2});if(e.x+=f.x,e.y+=f.y,this._movingAnchorName=this._movingAnchorName.replace("top","bottom"),this._anchorDragOffset.x-=f.x,this._anchorDragOffset.y-=f.y,e.height+=this.padding()*2,!s){this.update();return}}else if(this._movingAnchorName&&e.height<0&&this._movingAnchorName.indexOf("bottom")>=0){const f=o.point({x:0,y:this.padding()*2});if(this._movingAnchorName=this._movingAnchorName.replace("bottom","top"),this._anchorDragOffset.x-=f.x,this._anchorDragOffset.y-=f.y,e.height+=this.padding()*2,!s){this.update();return}}if(this.boundBoxFunc()){const f=this.boundBoxFunc()(r,e);f?e=f:ne.warn("boundBoxFunc returned falsy. You should return new bound rect from it!")}const a=1e7,l=new qi;l.translate(r.x,r.y),l.rotate(r.rotation),l.scale(r.width/a,r.height/a);const c=new qi;c.translate(e.x,e.y),c.rotate(e.rotation),c.scale(e.width/a,e.height/a);const h=c.multiply(l.invert());this._nodes.forEach(f=>{var p;const g=f.getParent().getAbsoluteTransform(),v=f.getTransform().copy();v.translate(f.offsetX(),f.offsetY());const x=new qi;x.multiply(g.copy().invert()).multiply(h).multiply(g).multiply(v);const k=x.decompose();f.setAttrs(k),this._fire("transform",{evt:n,target:f}),f._fire("transform",{evt:n,target:f}),(p=f.getLayer())===null||p===void 0||p.batchDraw()}),this.rotation(ne._getRotation(e.rotation)),this._resetTransformCache(),this.update(),this.getLayer().batchDraw()}forceUpdate(){this._resetTransformCache(),this.update()}_batchChangeChild(e,n){this.findOne(e).setAttrs(n)}update(){var e,n=this._getNodeRect();this.rotation(ne._getRotation(n.rotation));var r=n.width,i=n.height,s=this.enabledAnchors(),o=this.resizeEnabled(),a=this.padding(),l=this.anchorSize();this.find("._anchor").forEach(c=>{c.setAttrs({width:l,height:l,offsetX:l/2,offsetY:l/2,stroke:this.anchorStroke(),strokeWidth:this.anchorStrokeWidth(),fill:this.anchorFill(),cornerRadius:this.anchorCornerRadius()})}),this._batchChangeChild(".top-left",{x:0,y:0,offsetX:l/2+a,offsetY:l/2+a,visible:o&&s.indexOf("top-left")>=0}),this._batchChangeChild(".top-center",{x:r/2,y:0,offsetY:l/2+a,visible:o&&s.indexOf("top-center")>=0}),this._batchChangeChild(".top-right",{x:r,y:0,offsetX:l/2-a,offsetY:l/2+a,visible:o&&s.indexOf("top-right")>=0}),this._batchChangeChild(".middle-left",{x:0,y:i/2,offsetX:l/2+a,visible:o&&s.indexOf("middle-left")>=0}),this._batchChangeChild(".middle-right",{x:r,y:i/2,offsetX:l/2-a,visible:o&&s.indexOf("middle-right")>=0}),this._batchChangeChild(".bottom-left",{x:0,y:i,offsetX:l/2+a,offsetY:l/2-a,visible:o&&s.indexOf("bottom-left")>=0}),this._batchChangeChild(".bottom-center",{x:r/2,y:i,offsetY:l/2-a,visible:o&&s.indexOf("bottom-center")>=0}),this._batchChangeChild(".bottom-right",{x:r,y:i,offsetX:l/2-a,offsetY:l/2-a,visible:o&&s.indexOf("bottom-right")>=0}),this._batchChangeChild(".rotater",{x:r/2,y:-this.rotateAnchorOffset()*ne._sign(i)-a,visible:this.rotateEnabled()}),this._batchChangeChild(".back",{width:r,height:i,visible:this.borderEnabled(),stroke:this.borderStroke(),strokeWidth:this.borderStrokeWidth(),dash:this.borderDash(),x:0,y:0}),(e=this.getLayer())===null||e===void 0||e.batchDraw()}isTransforming(){return this._transforming}stopTransform(){if(this._transforming){this._removeEvents();var e=this.findOne("."+this._movingAnchorName);e&&e.stopDrag()}}destroy(){return this.getStage()&&this._cursorChange&&this.getStage().content&&(this.getStage().content.style.cursor=""),nd.prototype.destroy.call(this),this.detach(),this._removeEvents(),this}toObject(){return je.prototype.toObject.call(this)}}function pG(t){return t instanceof Array||ne.warn("enabledAnchors value should be an array"),t instanceof Array&&t.forEach(function(e){Jm.indexOf(e)===-1&&ne.warn("Unknown anchor name: "+e+". Available names are: "+Jm.join(", "))}),t||[]}dn.prototype.className="Transformer";$n(dn);W.addGetterSetter(dn,"enabledAnchors",Jm,pG);W.addGetterSetter(dn,"flipEnabled",!0,ro());W.addGetterSetter(dn,"resizeEnabled",!0);W.addGetterSetter(dn,"anchorSize",10,Me());W.addGetterSetter(dn,"rotateEnabled",!0);W.addGetterSetter(dn,"rotationSnaps",[]);W.addGetterSetter(dn,"rotateAnchorOffset",50,Me());W.addGetterSetter(dn,"rotationSnapTolerance",5,Me());W.addGetterSetter(dn,"borderEnabled",!0);W.addGetterSetter(dn,"anchorStroke","rgb(0, 161, 255)");W.addGetterSetter(dn,"anchorStrokeWidth",1,Me());W.addGetterSetter(dn,"anchorFill","white");W.addGetterSetter(dn,"anchorCornerRadius",0,Me());W.addGetterSetter(dn,"borderStroke","rgb(0, 161, 255)");W.addGetterSetter(dn,"borderStrokeWidth",1,Me());W.addGetterSetter(dn,"borderDash");W.addGetterSetter(dn,"keepRatio",!0);W.addGetterSetter(dn,"centeredScaling",!1);W.addGetterSetter(dn,"ignoreStroke",!1);W.addGetterSetter(dn,"padding",0,Me());W.addGetterSetter(dn,"node");W.addGetterSetter(dn,"nodes");W.addGetterSetter(dn,"boundBoxFunc");W.addGetterSetter(dn,"shouldOverdrawWholeArea",!1);W.addGetterSetter(dn,"useSingleNodeRotation",!0);W.backCompat(dn,{lineEnabled:"borderEnabled",rotateHandlerOffset:"rotateAnchorOffset",enabledHandlers:"enabledAnchors"});class wa extends Se{_sceneFunc(e){e.beginPath(),e.arc(0,0,this.radius(),0,tt.getAngle(this.angle()),this.clockwise()),e.lineTo(0,0),e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(e){this.radius(e/2)}setHeight(e){this.radius(e/2)}}wa.prototype.className="Wedge";wa.prototype._centroid=!0;wa.prototype._attrsAffectingSize=["radius"];$n(wa);W.addGetterSetter(wa,"radius",0,Me());W.addGetterSetter(wa,"angle",0,Me());W.addGetterSetter(wa,"clockwise",!1);W.backCompat(wa,{angleDeg:"angle",getAngleDeg:"getAngle",setAngleDeg:"setAngle"});function eT(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}var gG=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],mG=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function vG(t,e){var n=t.data,r=t.width,i=t.height,s,o,a,l,c,h,f,p,g,v,x,k,C,b,_,T,R,L,M,A,$,j,V,U,B=e+e+1,Z=r-1,q=i-1,G=e+1,te=G*(G+1)/2,O=new eT,K=null,Y=O,xe=null,re=null,ue=gG[e],ke=mG[e];for(a=1;a<B;a++)Y=Y.next=new eT,a===G&&(K=Y);for(Y.next=O,f=h=0,o=0;o<i;o++){for(T=R=L=M=p=g=v=x=0,k=G*(A=n[h]),C=G*($=n[h+1]),b=G*(j=n[h+2]),_=G*(V=n[h+3]),p+=te*A,g+=te*$,v+=te*j,x+=te*V,Y=O,a=0;a<G;a++)Y.r=A,Y.g=$,Y.b=j,Y.a=V,Y=Y.next;for(a=1;a<G;a++)l=h+((Z<a?Z:a)<<2),p+=(Y.r=A=n[l])*(U=G-a),g+=(Y.g=$=n[l+1])*U,v+=(Y.b=j=n[l+2])*U,x+=(Y.a=V=n[l+3])*U,T+=A,R+=$,L+=j,M+=V,Y=Y.next;for(xe=O,re=K,s=0;s<r;s++)n[h+3]=V=x*ue>>ke,V!==0?(V=255/V,n[h]=(p*ue>>ke)*V,n[h+1]=(g*ue>>ke)*V,n[h+2]=(v*ue>>ke)*V):n[h]=n[h+1]=n[h+2]=0,p-=k,g-=C,v-=b,x-=_,k-=xe.r,C-=xe.g,b-=xe.b,_-=xe.a,l=f+((l=s+e+1)<Z?l:Z)<<2,T+=xe.r=n[l],R+=xe.g=n[l+1],L+=xe.b=n[l+2],M+=xe.a=n[l+3],p+=T,g+=R,v+=L,x+=M,xe=xe.next,k+=A=re.r,C+=$=re.g,b+=j=re.b,_+=V=re.a,T-=A,R-=$,L-=j,M-=V,re=re.next,h+=4;f+=r}for(s=0;s<r;s++){for(R=L=M=T=g=v=x=p=0,h=s<<2,k=G*(A=n[h]),C=G*($=n[h+1]),b=G*(j=n[h+2]),_=G*(V=n[h+3]),p+=te*A,g+=te*$,v+=te*j,x+=te*V,Y=O,a=0;a<G;a++)Y.r=A,Y.g=$,Y.b=j,Y.a=V,Y=Y.next;for(c=r,a=1;a<=e;a++)h=c+s<<2,p+=(Y.r=A=n[h])*(U=G-a),g+=(Y.g=$=n[h+1])*U,v+=(Y.b=j=n[h+2])*U,x+=(Y.a=V=n[h+3])*U,T+=A,R+=$,L+=j,M+=V,Y=Y.next,a<q&&(c+=r);for(h=s,xe=O,re=K,o=0;o<i;o++)l=h<<2,n[l+3]=V=x*ue>>ke,V>0?(V=255/V,n[l]=(p*ue>>ke)*V,n[l+1]=(g*ue>>ke)*V,n[l+2]=(v*ue>>ke)*V):n[l]=n[l+1]=n[l+2]=0,p-=k,g-=C,v-=b,x-=_,k-=xe.r,C-=xe.g,b-=xe.b,_-=xe.a,l=s+((l=o+G)<q?l:q)*r<<2,p+=T+=xe.r=n[l],g+=R+=xe.g=n[l+1],v+=L+=xe.b=n[l+2],x+=M+=xe.a=n[l+3],xe=xe.next,k+=A=re.r,C+=$=re.g,b+=j=re.b,_+=V=re.a,T-=A,R-=$,L-=j,M-=V,re=re.next,h+=r}}const yG=function(e){var n=Math.round(this.blurRadius());n>0&&vG(e,n)};W.addGetterSetter(je,"blurRadius",0,Me(),W.afterSetFilter);const wG=function(t){var e=this.brightness()*255,n=t.data,r=n.length,i;for(i=0;i<r;i+=4)n[i]+=e,n[i+1]+=e,n[i+2]+=e};W.addGetterSetter(je,"brightness",0,Me(),W.afterSetFilter);const xG=function(t){var e=Math.pow((this.contrast()+100)/100,2),n=t.data,r=n.length,i=150,s=150,o=150,a;for(a=0;a<r;a+=4)i=n[a],s=n[a+1],o=n[a+2],i/=255,i-=.5,i*=e,i+=.5,i*=255,s/=255,s-=.5,s*=e,s+=.5,s*=255,o/=255,o-=.5,o*=e,o+=.5,o*=255,i=i<0?0:i>255?255:i,s=s<0?0:s>255?255:s,o=o<0?0:o>255?255:o,n[a]=i,n[a+1]=s,n[a+2]=o};W.addGetterSetter(je,"contrast",0,Me(),W.afterSetFilter);const _G=function(t){var e=this.embossStrength()*10,n=this.embossWhiteLevel()*255,r=this.embossDirection(),i=this.embossBlend(),s=0,o=0,a=t.data,l=t.width,c=t.height,h=l*4,f=c;switch(r){case"top-left":s=-1,o=-1;break;case"top":s=-1,o=0;break;case"top-right":s=-1,o=1;break;case"right":s=0,o=1;break;case"bottom-right":s=1,o=1;break;case"bottom":s=1,o=0;break;case"bottom-left":s=1,o=-1;break;case"left":s=0,o=-1;break;default:ne.error("Unknown emboss direction: "+r)}do{var p=(f-1)*h,g=s;f+g<1&&(g=0),f+g>c&&(g=0);var v=(f-1+g)*l*4,x=l;do{var k=p+(x-1)*4,C=o;x+C<1&&(C=0),x+C>l&&(C=0);var b=v+(x-1+C)*4,_=a[k]-a[b],T=a[k+1]-a[b+1],R=a[k+2]-a[b+2],L=_,M=L>0?L:-L,A=T>0?T:-T,$=R>0?R:-R;if(A>M&&(L=T),$>M&&(L=R),L*=e,i){var j=a[k]+L,V=a[k+1]+L,U=a[k+2]+L;a[k]=j>255?255:j<0?0:j,a[k+1]=V>255?255:V<0?0:V,a[k+2]=U>255?255:U<0?0:U}else{var B=n-L;B<0?B=0:B>255&&(B=255),a[k]=a[k+1]=a[k+2]=B}}while(--x)}while(--f)};W.addGetterSetter(je,"embossStrength",.5,Me(),W.afterSetFilter);W.addGetterSetter(je,"embossWhiteLevel",.5,Me(),W.afterSetFilter);W.addGetterSetter(je,"embossDirection","top-left",null,W.afterSetFilter);W.addGetterSetter(je,"embossBlend",!1,null,W.afterSetFilter);function y1(t,e,n,r,i){var s=n-e,o=i-r,a;return s===0?r+o/2:o===0?r:(a=(t-e)/s,a=o*a+r,a)}const bG=function(t){var e=t.data,n=e.length,r=e[0],i=r,s,o=e[1],a=o,l,c=e[2],h=c,f,p,g=this.enhance();if(g!==0){for(p=0;p<n;p+=4)s=e[p+0],s<r?r=s:s>i&&(i=s),l=e[p+1],l<o?o=l:l>a&&(a=l),f=e[p+2],f<c?c=f:f>h&&(h=f);i===r&&(i=255,r=0),a===o&&(a=255,o=0),h===c&&(h=255,c=0);var v,x,k,C,b,_,T,R,L;for(g>0?(x=i+g*(255-i),k=r-g*(r-0),b=a+g*(255-a),_=o-g*(o-0),R=h+g*(255-h),L=c-g*(c-0)):(v=(i+r)*.5,x=i+g*(i-v),k=r+g*(r-v),C=(a+o)*.5,b=a+g*(a-C),_=o+g*(o-C),T=(h+c)*.5,R=h+g*(h-T),L=c+g*(c-T)),p=0;p<n;p+=4)e[p+0]=y1(e[p+0],r,i,k,x),e[p+1]=y1(e[p+1],o,a,_,b),e[p+2]=y1(e[p+2],c,h,L,R)}};W.addGetterSetter(je,"enhance",0,Me(),W.afterSetFilter);const SG=function(t){var e=t.data,n=e.length,r,i;for(r=0;r<n;r+=4)i=.34*e[r]+.5*e[r+1]+.16*e[r+2],e[r]=i,e[r+1]=i,e[r+2]=i};W.addGetterSetter(je,"hue",0,Me(),W.afterSetFilter);W.addGetterSetter(je,"saturation",0,Me(),W.afterSetFilter);W.addGetterSetter(je,"luminance",0,Me(),W.afterSetFilter);const CG=function(t){var e=t.data,n=e.length,r=1,i=Math.pow(2,this.saturation()),s=Math.abs(this.hue()+360)%360,o=this.luminance()*127,a,l=r*i*Math.cos(s*Math.PI/180),c=r*i*Math.sin(s*Math.PI/180),h=.299*r+.701*l+.167*c,f=.587*r-.587*l+.33*c,p=.114*r-.114*l-.497*c,g=.299*r-.299*l-.328*c,v=.587*r+.413*l+.035*c,x=.114*r-.114*l+.293*c,k=.299*r-.3*l+1.25*c,C=.587*r-.586*l-1.05*c,b=.114*r+.886*l-.2*c,_,T,R,L;for(a=0;a<n;a+=4)_=e[a+0],T=e[a+1],R=e[a+2],L=e[a+3],e[a+0]=h*_+f*T+p*R+o,e[a+1]=g*_+v*T+x*R+o,e[a+2]=k*_+C*T+b*R+o,e[a+3]=L},kG=function(t){var e=t.data,n=e.length,r=Math.pow(2,this.value()),i=Math.pow(2,this.saturation()),s=Math.abs(this.hue()+360)%360,o,a=r*i*Math.cos(s*Math.PI/180),l=r*i*Math.sin(s*Math.PI/180),c=.299*r+.701*a+.167*l,h=.587*r-.587*a+.33*l,f=.114*r-.114*a-.497*l,p=.299*r-.299*a-.328*l,g=.587*r+.413*a+.035*l,v=.114*r-.114*a+.293*l,x=.299*r-.3*a+1.25*l,k=.587*r-.586*a-1.05*l,C=.114*r+.886*a-.2*l,b,_,T,R;for(o=0;o<n;o+=4)b=e[o+0],_=e[o+1],T=e[o+2],R=e[o+3],e[o+0]=c*b+h*_+f*T,e[o+1]=p*b+g*_+v*T,e[o+2]=x*b+k*_+C*T,e[o+3]=R};W.addGetterSetter(je,"hue",0,Me(),W.afterSetFilter);W.addGetterSetter(je,"saturation",0,Me(),W.afterSetFilter);W.addGetterSetter(je,"value",0,Me(),W.afterSetFilter);const EG=function(t){var e=t.data,n=e.length,r;for(r=0;r<n;r+=4)e[r]=255-e[r],e[r+1]=255-e[r+1],e[r+2]=255-e[r+2]};var RG=function(t,e,n){var r=t.data,i=e.data,s=t.width,o=t.height,a=n.polarCenterX||s/2,l=n.polarCenterY||o/2,c,h,f,p=0,g=0,v=0,x=0,k,C=Math.sqrt(a*a+l*l);h=s-a,f=o-l,k=Math.sqrt(h*h+f*f),C=k>C?k:C;var b=o,_=s,T,R,L=360/_*Math.PI/180,M,A;for(R=0;R<_;R+=1)for(M=Math.sin(R*L),A=Math.cos(R*L),T=0;T<b;T+=1)h=Math.floor(a+C*T/b*A),f=Math.floor(l+C*T/b*M),c=(f*s+h)*4,p=r[c+0],g=r[c+1],v=r[c+2],x=r[c+3],c=(R+T*s)*4,i[c+0]=p,i[c+1]=g,i[c+2]=v,i[c+3]=x},TG=function(t,e,n){var r=t.data,i=e.data,s=t.width,o=t.height,a=n.polarCenterX||s/2,l=n.polarCenterY||o/2,c,h,f,p,g,v=0,x=0,k=0,C=0,b,_=Math.sqrt(a*a+l*l);h=s-a,f=o-l,b=Math.sqrt(h*h+f*f),_=b>_?b:_;var T=o,R=s,L,M,A=n.polarRotation||0,$,j;for(h=0;h<s;h+=1)for(f=0;f<o;f+=1)p=h-a,g=f-l,L=Math.sqrt(p*p+g*g)*T/_,M=(Math.atan2(g,p)*180/Math.PI+360+A)%360,M=M*R/360,$=Math.floor(M),j=Math.floor(L),c=(j*s+$)*4,v=r[c+0],x=r[c+1],k=r[c+2],C=r[c+3],c=(f*s+h)*4,i[c+0]=v,i[c+1]=x,i[c+2]=k,i[c+3]=C};const PG=function(t){var e=t.width,n=t.height,r,i,s,o,a,l,c,h,f,p,g=Math.round(this.kaleidoscopePower()),v=Math.round(this.kaleidoscopeAngle()),x=Math.floor(e*(v%360)/360);if(!(g<1)){var k=ne.createCanvasElement();k.width=e,k.height=n;var C=k.getContext("2d").getImageData(0,0,e,n);RG(t,C,{polarCenterX:e/2,polarCenterY:n/2});for(var b=e/Math.pow(2,g);b<=8;)b=b*2,g-=1;b=Math.ceil(b);var _=b,T=0,R=_,L=1;for(x+b>e&&(T=_,R=0,L=-1),i=0;i<n;i+=1)for(r=T;r!==R;r+=L)s=Math.round(r+x)%e,f=(e*i+s)*4,a=C.data[f+0],l=C.data[f+1],c=C.data[f+2],h=C.data[f+3],p=(e*i+r)*4,C.data[p+0]=a,C.data[p+1]=l,C.data[p+2]=c,C.data[p+3]=h;for(i=0;i<n;i+=1)for(_=Math.floor(b),o=0;o<g;o+=1){for(r=0;r<_+1;r+=1)f=(e*i+r)*4,a=C.data[f+0],l=C.data[f+1],c=C.data[f+2],h=C.data[f+3],p=(e*i+_*2-r-1)*4,C.data[p+0]=a,C.data[p+1]=l,C.data[p+2]=c,C.data[p+3]=h;_*=2}TG(C,t,{polarRotation:0})}};W.addGetterSetter(je,"kaleidoscopePower",2,Me(),W.afterSetFilter);W.addGetterSetter(je,"kaleidoscopeAngle",0,Me(),W.afterSetFilter);function Lg(t,e,n){var r=(n*t.width+e)*4,i=[];return i.push(t.data[r++],t.data[r++],t.data[r++],t.data[r++]),i}function ph(t,e){return Math.sqrt(Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2)+Math.pow(t[2]-e[2],2))}function LG(t){for(var e=[0,0,0],n=0;n<t.length;n++)e[0]+=t[n][0],e[1]+=t[n][1],e[2]+=t[n][2];return e[0]/=t.length,e[1]/=t.length,e[2]/=t.length,e}function MG(t,e){var n=Lg(t,0,0),r=Lg(t,t.width-1,0),i=Lg(t,0,t.height-1),s=Lg(t,t.width-1,t.height-1),o=e||10;if(ph(n,r)<o&&ph(r,s)<o&&ph(s,i)<o&&ph(i,n)<o){for(var a=LG([r,n,s,i]),l=[],c=0;c<t.width*t.height;c++){var h=ph(a,[t.data[c*4],t.data[c*4+1],t.data[c*4+2]]);l[c]=h<o?0:255}return l}}function AG(t,e){for(var n=0;n<t.width*t.height;n++)t.data[4*n+3]=e[n]}function NG(t,e,n){for(var r=[1,1,1,1,0,1,1,1,1],i=Math.round(Math.sqrt(r.length)),s=Math.floor(i/2),o=[],a=0;a<n;a++)for(var l=0;l<e;l++){for(var c=a*e+l,h=0,f=0;f<i;f++)for(var p=0;p<i;p++){var g=a+f-s,v=l+p-s;if(g>=0&&g<n&&v>=0&&v<e){var x=g*e+v,k=r[f*i+p];h+=t[x]*k}}o[c]=h===255*8?255:0}return o}function jG(t,e,n){for(var r=[1,1,1,1,1,1,1,1,1],i=Math.round(Math.sqrt(r.length)),s=Math.floor(i/2),o=[],a=0;a<n;a++)for(var l=0;l<e;l++){for(var c=a*e+l,h=0,f=0;f<i;f++)for(var p=0;p<i;p++){var g=a+f-s,v=l+p-s;if(g>=0&&g<n&&v>=0&&v<e){var x=g*e+v,k=r[f*i+p];h+=t[x]*k}}o[c]=h>=255*4?255:0}return o}function IG(t,e,n){for(var r=[.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111],i=Math.round(Math.sqrt(r.length)),s=Math.floor(i/2),o=[],a=0;a<n;a++)for(var l=0;l<e;l++){for(var c=a*e+l,h=0,f=0;f<i;f++)for(var p=0;p<i;p++){var g=a+f-s,v=l+p-s;if(g>=0&&g<n&&v>=0&&v<e){var x=g*e+v,k=r[f*i+p];h+=t[x]*k}}o[c]=h}return o}const OG=function(t){var e=this.threshold(),n=MG(t,e);return n&&(n=NG(n,t.width,t.height),n=jG(n,t.width,t.height),n=IG(n,t.width,t.height),AG(t,n)),t};W.addGetterSetter(je,"threshold",0,Me(),W.afterSetFilter);const DG=function(t){var e=this.noise()*255,n=t.data,r=n.length,i=e/2,s;for(s=0;s<r;s+=4)n[s+0]+=i-2*i*Math.random(),n[s+1]+=i-2*i*Math.random(),n[s+2]+=i-2*i*Math.random()};W.addGetterSetter(je,"noise",.2,Me(),W.afterSetFilter);const FG=function(t){var e=Math.ceil(this.pixelSize()),n=t.width,r=t.height,i,s,o,a,l,c,h,f=Math.ceil(n/e),p=Math.ceil(r/e),g,v,x,k,C,b,_,T=t.data;if(e<=0){ne.error("pixelSize value can not be <= 0");return}for(C=0;C<f;C+=1)for(b=0;b<p;b+=1){for(a=0,l=0,c=0,h=0,g=C*e,v=g+e,x=b*e,k=x+e,_=0,i=g;i<v;i+=1)if(!(i>=n))for(s=x;s<k;s+=1)s>=r||(o=(n*s+i)*4,a+=T[o+0],l+=T[o+1],c+=T[o+2],h+=T[o+3],_+=1);for(a=a/_,l=l/_,c=c/_,h=h/_,i=g;i<v;i+=1)if(!(i>=n))for(s=x;s<k;s+=1)s>=r||(o=(n*s+i)*4,T[o+0]=a,T[o+1]=l,T[o+2]=c,T[o+3]=h)}};W.addGetterSetter(je,"pixelSize",8,Me(),W.afterSetFilter);const BG=function(t){var e=Math.round(this.levels()*254)+1,n=t.data,r=n.length,i=255/e,s;for(s=0;s<r;s+=1)n[s]=Math.floor(n[s]/i)*i};W.addGetterSetter(je,"levels",.5,Me(),W.afterSetFilter);const $G=function(t){var e=t.data,n=e.length,r=this.red(),i=this.green(),s=this.blue(),o,a;for(o=0;o<n;o+=4)a=(.34*e[o]+.5*e[o+1]+.16*e[o+2])/255,e[o]=a*r,e[o+1]=a*i,e[o+2]=a*s,e[o+3]=e[o+3]};W.addGetterSetter(je,"red",0,function(t){return this._filterUpToDate=!1,t>255?255:t<0?0:Math.round(t)});W.addGetterSetter(je,"green",0,function(t){return this._filterUpToDate=!1,t>255?255:t<0?0:Math.round(t)});W.addGetterSetter(je,"blue",0,rA,W.afterSetFilter);const zG=function(t){var e=t.data,n=e.length,r=this.red(),i=this.green(),s=this.blue(),o=this.alpha(),a,l;for(a=0;a<n;a+=4)l=1-o,e[a]=r*o+e[a]*l,e[a+1]=i*o+e[a+1]*l,e[a+2]=s*o+e[a+2]*l};W.addGetterSetter(je,"red",0,function(t){return this._filterUpToDate=!1,t>255?255:t<0?0:Math.round(t)});W.addGetterSetter(je,"green",0,function(t){return this._filterUpToDate=!1,t>255?255:t<0?0:Math.round(t)});W.addGetterSetter(je,"blue",0,rA,W.afterSetFilter);W.addGetterSetter(je,"alpha",1,function(t){return this._filterUpToDate=!1,t>1?1:t<0?0:t});const UG=function(t){var e=t.data,n=e.length,r,i,s,o;for(r=0;r<n;r+=4)i=e[r+0],s=e[r+1],o=e[r+2],e[r+0]=Math.min(255,i*.393+s*.769+o*.189),e[r+1]=Math.min(255,i*.349+s*.686+o*.168),e[r+2]=Math.min(255,i*.272+s*.534+o*.131)},VG=function(t){var e=t.data,n=t.width,r=t.height,i=n*4,s=r;do{var o=(s-1)*i,a=n;do{var l=o+(a-1)*4,c=e[l],h=e[l+1],f=e[l+2];c>127&&(c=255-c),h>127&&(h=255-h),f>127&&(f=255-f),e[l]=c,e[l+1]=h,e[l+2]=f}while(--a)}while(--s)},WG=function(t){var e=this.threshold()*255,n=t.data,r=n.length,i;for(i=0;i<r;i+=1)n[i]=n[i]<e?0:255};W.addGetterSetter(je,"threshold",.5,Me(),W.afterSetFilter);Cu.Util._assign(Cu,{Arc:ma,Arrow:Lu,Circle:Rd,Ellipse:Rl,Image:ya,Label:uS,Tag:Mu,Line:va,Path:fn,Rect:tp,RegularPolygon:Au,Ring:Nu,Sprite:Mo,Star:Tl,Text:Bn,TextPath:Sr,Transformer:dn,Wedge:wa,Filters:{Blur:yG,Brighten:wG,Contrast:xG,Emboss:_G,Enhance:bG,Grayscale:SG,HSL:CG,HSV:kG,Invert:EG,Kaleidoscope:PG,Mask:OG,Noise:DG,Pixelate:FG,Posterize:BG,RGB:$G,RGBA:zG,Sepia:UG,Solarize:VG,Threshold:WG}});var IA={exports:{}};/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var HG=function(e){var n={},r=y,i=Nh,s=Object.assign;function o(u){for(var d="https://reactjs.org/docs/error-decoder.html?invariant="+u,m=1;m<arguments.length;m++)d+="&args[]="+encodeURIComponent(arguments[m]);return"Minified React error #"+u+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,l=Symbol.for("react.element"),c=Symbol.for("react.portal"),h=Symbol.for("react.fragment"),f=Symbol.for("react.strict_mode"),p=Symbol.for("react.profiler"),g=Symbol.for("react.provider"),v=Symbol.for("react.context"),x=Symbol.for("react.forward_ref"),k=Symbol.for("react.suspense"),C=Symbol.for("react.suspense_list"),b=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),T=Symbol.for("react.offscreen"),R=Symbol.iterator;function L(u){return u===null||typeof u!="object"?null:(u=R&&u[R]||u["@@iterator"],typeof u=="function"?u:null)}function M(u){if(u==null)return null;if(typeof u=="function")return u.displayName||u.name||null;if(typeof u=="string")return u;switch(u){case h:return"Fragment";case c:return"Portal";case p:return"Profiler";case f:return"StrictMode";case k:return"Suspense";case C:return"SuspenseList"}if(typeof u=="object")switch(u.$$typeof){case v:return(u.displayName||"Context")+".Consumer";case g:return(u._context.displayName||"Context")+".Provider";case x:var d=u.render;return u=u.displayName,u||(u=d.displayName||d.name||"",u=u!==""?"ForwardRef("+u+")":"ForwardRef"),u;case b:return d=u.displayName||null,d!==null?d:M(u.type)||"Memo";case _:d=u._payload,u=u._init;try{return M(u(d))}catch{}}return null}function A(u){var d=u.type;switch(u.tag){case 24:return"Cache";case 9:return(d.displayName||"Context")+".Consumer";case 10:return(d._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return u=d.render,u=u.displayName||u.name||"",d.displayName||(u!==""?"ForwardRef("+u+")":"ForwardRef");case 7:return"Fragment";case 5:return d;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return M(d);case 8:return d===f?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof d=="function")return d.displayName||d.name||null;if(typeof d=="string")return d}return null}function $(u){var d=u,m=u;if(u.alternate)for(;d.return;)d=d.return;else{u=d;do d=u,d.flags&4098&&(m=d.return),u=d.return;while(u)}return d.tag===3?m:null}function j(u){if($(u)!==u)throw Error(o(188))}function V(u){var d=u.alternate;if(!d){if(d=$(u),d===null)throw Error(o(188));return d!==u?null:u}for(var m=u,S=d;;){var E=m.return;if(E===null)break;var P=E.alternate;if(P===null){if(S=E.return,S!==null){m=S;continue}break}if(E.child===P.child){for(P=E.child;P;){if(P===m)return j(E),u;if(P===S)return j(E),d;P=P.sibling}throw Error(o(188))}if(m.return!==S.return)m=E,S=P;else{for(var I=!1,J=E.child;J;){if(J===m){I=!0,m=E,S=P;break}if(J===S){I=!0,S=E,m=P;break}J=J.sibling}if(!I){for(J=P.child;J;){if(J===m){I=!0,m=P,S=E;break}if(J===S){I=!0,S=P,m=E;break}J=J.sibling}if(!I)throw Error(o(189))}}if(m.alternate!==S)throw Error(o(190))}if(m.tag!==3)throw Error(o(188));return m.stateNode.current===m?u:d}function U(u){return u=V(u),u!==null?B(u):null}function B(u){if(u.tag===5||u.tag===6)return u;for(u=u.child;u!==null;){var d=B(u);if(d!==null)return d;u=u.sibling}return null}function Z(u){if(u.tag===5||u.tag===6)return u;for(u=u.child;u!==null;){if(u.tag!==4){var d=Z(u);if(d!==null)return d}u=u.sibling}return null}var q=Array.isArray,G=e.getPublicInstance,te=e.getRootHostContext,O=e.getChildHostContext,K=e.prepareForCommit,Y=e.resetAfterCommit,xe=e.createInstance,re=e.appendInitialChild,ue=e.finalizeInitialChildren,ke=e.prepareUpdate,qe=e.shouldSetTextContent,he=e.createTextInstance,ge=e.scheduleTimeout,we=e.cancelTimeout,ae=e.noTimeout,me=e.isPrimaryRenderer,X=e.supportsMutation,ye=e.supportsPersistence,_e=e.supportsHydration,at=e.getInstanceFromNode,Le=e.preparePortalMount,fe=e.getCurrentEventPriority,ve=e.detachDeletedInstance,Ae=e.supportsMicrotasks,De=e.scheduleMicrotask,Ue=e.supportsTestSelectors,Ie=e.findFiberRoot,ze=e.getBoundingRect,Ce=e.getTextContent,Oe=e.isHiddenSubtree,Ne=e.matchAccessibilityRole,yt=e.setFocusIfFocusable,Fe=e.setupIntersectionObserver,st=e.appendChild,wt=e.appendChildToContainer,At=e.commitTextUpdate,Ye=e.commitMount,Re=e.commitUpdate,Te=e.insertBefore,pe=e.insertInContainerBefore,be=e.removeChild,gt=e.removeChildFromContainer,nt=e.resetTextContent,lt=e.hideInstance,Ke=e.hideTextInstance,xt=e.unhideInstance,Lt=e.unhideTextInstance,rt=e.clearContainer,Nt=e.cloneInstance,ht=e.createContainerChildSet,zt=e.appendChildToContainerChildSet,Et=e.finalizeContainerChildren,ut=e.replaceContainerChildren,Xt=e.cloneHiddenInstance,ft=e.cloneHiddenTextInstance,Ft=e.canHydrateInstance,St=e.canHydrateTextInstance,ln=e.canHydrateSuspenseInstance,Gt=e.isSuspenseInstancePending,qt=e.isSuspenseInstanceFallback,mt=e.getSuspenseInstanceFallbackErrorDetails,vt=e.registerSuspenseInstanceRetry,Ut=e.getNextHydratableSibling,Cr=e.getFirstHydratableChild,zn=e.getFirstHydratableChildWithinContainer,Un=e.getFirstHydratableChildWithinSuspenseInstance,qr=e.hydrateInstance,kr=e.hydrateTextInstance,io=e.hydrateSuspenseInstance,Ol=e.getNextHydratableInstanceAfterSuspenseInstance,Ir=e.commitHydratedContainer,fr=e.commitHydratedSuspenseInstance,ui=e.clearSuspenseBoundary,Xn=e.clearSuspenseBoundaryFromContainer,Er=e.shouldDeleteUnhydratedTailInstances,so=e.didNotMatchHydratedContainerTextInstance,jo=e.didNotMatchHydratedTextInstance,_a;function Di(u){if(_a===void 0)try{throw Error()}catch(m){var d=m.stack.trim().match(/\n( *(at )?)/);_a=d&&d[1]||""}return`
`+_a+u}var Yr=!1;function Or(u,d){if(!u||Yr)return"";Yr=!0;var m=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(d)if(d=function(){throw Error()},Object.defineProperty(d.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(d,[])}catch(Pe){var S=Pe}Reflect.construct(u,[],d)}else{try{d.call()}catch(Pe){S=Pe}u.call(d.prototype)}else{try{throw Error()}catch(Pe){S=Pe}u()}}catch(Pe){if(Pe&&S&&typeof Pe.stack=="string"){for(var E=Pe.stack.split(`
`),P=S.stack.split(`
`),I=E.length-1,J=P.length-1;1<=I&&0<=J&&E[I]!==P[J];)J--;for(;1<=I&&0<=J;I--,J--)if(E[I]!==P[J]){if(I!==1||J!==1)do if(I--,J--,0>J||E[I]!==P[J]){var oe=`
`+E[I].replace(" at new "," at ");return u.displayName&&oe.includes("<anonymous>")&&(oe=oe.replace("<anonymous>",u.displayName)),oe}while(1<=I&&0<=J);break}}}finally{Yr=!1,Error.prepareStackTrace=m}return(u=u?u.displayName||u.name:"")?Di(u):""}var rs=Object.prototype.hasOwnProperty,As=[],bi=-1;function ci(u){return{current:u}}function tn(u){0>bi||(u.current=As[bi],As[bi]=null,bi--)}function Yt(u,d){bi++,As[bi]=u.current,u.current=d}var sn={},Rt=ci(sn),on=ci(!1),Dr=sn;function Vn(u,d){var m=u.type.contextTypes;if(!m)return sn;var S=u.stateNode;if(S&&S.__reactInternalMemoizedUnmaskedChildContext===d)return S.__reactInternalMemoizedMaskedChildContext;var E={},P;for(P in m)E[P]=d[P];return S&&(u=u.stateNode,u.__reactInternalMemoizedUnmaskedChildContext=d,u.__reactInternalMemoizedMaskedChildContext=E),E}function Cn(u){return u=u.childContextTypes,u!=null}function Ht(){tn(on),tn(Rt)}function Pn(u,d,m){if(Rt.current!==sn)throw Error(o(168));Yt(Rt,d),Yt(on,m)}function Ln(u,d,m){var S=u.stateNode;if(d=d.childContextTypes,typeof S.getChildContext!="function")return m;S=S.getChildContext();for(var E in S)if(!(E in d))throw Error(o(108,A(u)||"Unknown",E));return s({},m,S)}function Si(u){return u=(u=u.stateNode)&&u.__reactInternalMemoizedMergedChildContext||sn,Dr=Rt.current,Yt(Rt,u),Yt(on,on.current),!0}function di(u,d,m){var S=u.stateNode;if(!S)throw Error(o(169));m?(u=Ln(u,d,Dr),S.__reactInternalMemoizedMergedChildContext=u,tn(on),tn(Rt),Yt(Rt,u)):tn(on),Yt(on,m)}var pr=Math.clz32?Math.clz32:oo,Io=Math.log,is=Math.LN2;function oo(u){return u>>>=0,u===0?32:31-(Io(u)/is|0)|0}var Kr=64,Ci=4194304;function Fi(u){switch(u&-u){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return u&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return u}}function ss(u,d){var m=u.pendingLanes;if(m===0)return 0;var S=0,E=u.suspendedLanes,P=u.pingedLanes,I=m&268435455;if(I!==0){var J=I&~E;J!==0?S=Fi(J):(P&=I,P!==0&&(S=Fi(P)))}else I=m&~E,I!==0?S=Fi(I):P!==0&&(S=Fi(P));if(S===0)return 0;if(d!==0&&d!==S&&!(d&E)&&(E=S&-S,P=d&-d,E>=P||E===16&&(P&4194240)!==0))return d;if(S&4&&(S|=m&16),d=u.entangledLanes,d!==0)for(u=u.entanglements,d&=S;0<d;)m=31-pr(d),E=1<<m,S|=u[m],d&=~E;return S}function Ns(u,d){switch(u){case 1:case 2:case 4:return d+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return d+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ba(u,d){for(var m=u.suspendedLanes,S=u.pingedLanes,E=u.expirationTimes,P=u.pendingLanes;0<P;){var I=31-pr(P),J=1<<I,oe=E[I];oe===-1?(!(J&m)||J&S)&&(E[I]=Ns(J,d)):oe<=d&&(u.expiredLanes|=J),P&=~J}}function Sa(u){return u=u.pendingLanes&-1073741825,u!==0?u:u&1073741824?1073741824:0}function Ca(){var u=Kr;return Kr<<=1,!(Kr&4194240)&&(Kr=64),u}function os(u){for(var d=[],m=0;31>m;m++)d.push(u);return d}function Oo(u,d,m){u.pendingLanes|=d,d!==536870912&&(u.suspendedLanes=0,u.pingedLanes=0),u=u.eventTimes,d=31-pr(d),u[d]=m}function Nd(u,d){var m=u.pendingLanes&~d;u.pendingLanes=d,u.suspendedLanes=0,u.pingedLanes=0,u.expiredLanes&=d,u.mutableReadLanes&=d,u.entangledLanes&=d,d=u.entanglements;var S=u.eventTimes;for(u=u.expirationTimes;0<m;){var E=31-pr(m),P=1<<E;d[E]=0,S[E]=-1,u[E]=-1,m&=~P}}function Do(u,d){var m=u.entangledLanes|=d;for(u=u.entanglements;m;){var S=31-pr(m),E=1<<S;E&d|u[S]&d&&(u[S]|=d),m&=~E}}var Vt=0;function Ou(u){return u&=-u,1<u?4<u?u&268435455?16:536870912:4:1}var ka=i.unstable_scheduleCallback,Ea=i.unstable_cancelCallback,jd=i.unstable_shouldYield,Id=i.unstable_requestPaint,Mn=i.unstable_now,Ra=i.unstable_ImmediatePriority,Du=i.unstable_UserBlockingPriority,Ta=i.unstable_NormalPriority,as=i.unstable_IdlePriority,Pa=null,sr=null;function Fu(u){if(sr&&typeof sr.onCommitFiberRoot=="function")try{sr.onCommitFiberRoot(Pa,u,void 0,(u.current.flags&128)===128)}catch{}}function Od(u,d){return u===d&&(u!==0||1/u===1/d)||u!==u&&d!==d}var gr=typeof Object.is=="function"?Object.is:Od,Bi=null,Fo=!1,La=!1;function F(u){Bi===null?Bi=[u]:Bi.push(u)}function H(u){Fo=!0,F(u)}function Q(){if(!La&&Bi!==null){La=!0;var u=0,d=Vt;try{var m=Bi;for(Vt=1;u<m.length;u++){var S=m[u];do S=S(!0);while(S!==null)}Bi=null,Fo=!1}catch(E){throw Bi!==null&&(Bi=Bi.slice(u+1)),ka(Ra,Q),E}finally{Vt=d,La=!1}}return null}var N=[],D=0,z=null,ie=0,le=[],de=0,Ge=null,$e=1,Ve="";function Bt(u,d){N[D++]=ie,N[D++]=z,z=u,ie=d}function Wt(u,d,m){le[de++]=$e,le[de++]=Ve,le[de++]=Ge,Ge=u;var S=$e;u=Ve;var E=32-pr(S)-1;S&=~(1<<E),m+=1;var P=32-pr(d)+E;if(30<P){var I=E-E%5;P=(S&(1<<I)-1).toString(32),S>>=I,E-=I,$e=1<<32-pr(d)+E|m<<E|S,Ve=P+u}else $e=1<<P|m<<E|S,Ve=u}function Wn(u){u.return!==null&&(Bt(u,1),Wt(u,1,0))}function Zn(u){for(;u===z;)z=N[--D],N[D]=null,ie=N[--D],N[D]=null;for(;u===Ge;)Ge=le[--de],le[de]=null,Ve=le[--de],le[de]=null,$e=le[--de],le[de]=null}var Qn=null,xn=null,an=!1,js=!1,Hn=null;function Xr(u,d){var m=hs(5,null,null,0);m.elementType="DELETED",m.stateNode=d,m.return=u,d=u.deletions,d===null?(u.deletions=[m],u.flags|=16):d.push(m)}function Bo(u,d){switch(u.tag){case 5:return d=Ft(d,u.type,u.pendingProps),d!==null?(u.stateNode=d,Qn=u,xn=Cr(d),!0):!1;case 6:return d=St(d,u.pendingProps),d!==null?(u.stateNode=d,Qn=u,xn=null,!0):!1;case 13:if(d=ln(d),d!==null){var m=Ge!==null?{id:$e,overflow:Ve}:null;return u.memoizedState={dehydrated:d,treeContext:m,retryLane:1073741824},m=hs(18,null,null,0),m.stateNode=d,m.return=u,u.child=m,Qn=u,xn=null,!0}return!1;default:return!1}}function Dl(u){return(u.mode&1)!==0&&(u.flags&128)===0}function Fl(u){if(an){var d=xn;if(d){var m=d;if(!Bo(u,d)){if(Dl(u))throw Error(o(418));d=Ut(m);var S=Qn;d&&Bo(u,d)?Xr(S,m):(u.flags=u.flags&-4097|2,an=!1,Qn=u)}}else{if(Dl(u))throw Error(o(418));u.flags=u.flags&-4097|2,an=!1,Qn=u}}}function Jn(u){for(u=u.return;u!==null&&u.tag!==5&&u.tag!==3&&u.tag!==13;)u=u.return;Qn=u}function pn(u){if(!_e||u!==Qn)return!1;if(!an)return Jn(u),an=!0,!1;if(u.tag!==3&&(u.tag!==5||Er(u.type)&&!qe(u.type,u.memoizedProps))){var d=xn;if(d){if(Dl(u))throw hn(),Error(o(418));for(;d;)Xr(u,d),d=Ut(d)}}if(Jn(u),u.tag===13){if(!_e)throw Error(o(316));if(u=u.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(o(317));xn=Ol(u)}else xn=Qn?Ut(u.stateNode):null;return!0}function hn(){for(var u=xn;u;)u=Ut(u)}function nn(){_e&&(xn=Qn=null,js=an=!1)}function or(u){Hn===null?Hn=[u]:Hn.push(u)}var ao=a.ReactCurrentBatchConfig;function $o(u,d){if(gr(u,d))return!0;if(typeof u!="object"||u===null||typeof d!="object"||d===null)return!1;var m=Object.keys(u),S=Object.keys(d);if(m.length!==S.length)return!1;for(S=0;S<m.length;S++){var E=m[S];if(!rs.call(d,E)||!gr(u[E],d[E]))return!1}return!0}function Bl(u){switch(u.tag){case 5:return Di(u.type);case 16:return Di("Lazy");case 13:return Di("Suspense");case 19:return Di("SuspenseList");case 0:case 2:case 15:return u=Or(u.type,!1),u;case 11:return u=Or(u.type.render,!1),u;case 1:return u=Or(u.type,!0),u;default:return""}}function Is(u,d,m){if(u=m.ref,u!==null&&typeof u!="function"&&typeof u!="object"){if(m._owner){if(m=m._owner,m){if(m.tag!==1)throw Error(o(309));var S=m.stateNode}if(!S)throw Error(o(147,u));var E=S,P=""+u;return d!==null&&d.ref!==null&&typeof d.ref=="function"&&d.ref._stringRef===P?d.ref:(d=function(I){var J=E.refs;I===null?delete J[P]:J[P]=I},d._stringRef=P,d)}if(typeof u!="string")throw Error(o(284));if(!m._owner)throw Error(o(290,u))}return u}function zo(u,d){throw u=Object.prototype.toString.call(d),Error(o(31,u==="[object Object]"?"object with keys {"+Object.keys(d).join(", ")+"}":u))}function Uo(u){var d=u._init;return d(u._payload)}function Ma(u){function d(se,ee){if(u){var ce=se.deletions;ce===null?(se.deletions=[ee],se.flags|=16):ce.push(ee)}}function m(se,ee){if(!u)return null;for(;ee!==null;)d(se,ee),ee=ee.sibling;return null}function S(se,ee){for(se=new Map;ee!==null;)ee.key!==null?se.set(ee.key,ee):se.set(ee.index,ee),ee=ee.sibling;return se}function E(se,ee){return se=Fa(se,ee),se.index=0,se.sibling=null,se}function P(se,ee,ce){return se.index=ce,u?(ce=se.alternate,ce!==null?(ce=ce.index,ce<ee?(se.flags|=2,ee):ce):(se.flags|=2,ee)):(se.flags|=1048576,ee)}function I(se){return u&&se.alternate===null&&(se.flags|=2),se}function J(se,ee,ce,He){return ee===null||ee.tag!==6?(ee=ry(ce,se.mode,He),ee.return=se,ee):(ee=E(ee,ce),ee.return=se,ee)}function oe(se,ee,ce,He){var ct=ce.type;return ct===h?Qe(se,ee,ce.props.children,He,ce.key):ee!==null&&(ee.elementType===ct||typeof ct=="object"&&ct!==null&&ct.$$typeof===_&&Uo(ct)===ee.type)?(He=E(ee,ce.props),He.ref=Is(se,ee,ce),He.return=se,He):(He=Dp(ce.type,ce.key,ce.props,null,se.mode,He),He.ref=Is(se,ee,ce),He.return=se,He)}function Pe(se,ee,ce,He){return ee===null||ee.tag!==4||ee.stateNode.containerInfo!==ce.containerInfo||ee.stateNode.implementation!==ce.implementation?(ee=iy(ce,se.mode,He),ee.return=se,ee):(ee=E(ee,ce.children||[]),ee.return=se,ee)}function Qe(se,ee,ce,He,ct){return ee===null||ee.tag!==7?(ee=Gl(ce,se.mode,He,ct),ee.return=se,ee):(ee=E(ee,ce),ee.return=se,ee)}function Tt(se,ee,ce){if(typeof ee=="string"&&ee!==""||typeof ee=="number")return ee=ry(""+ee,se.mode,ce),ee.return=se,ee;if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case l:return ce=Dp(ee.type,ee.key,ee.props,null,se.mode,ce),ce.ref=Is(se,null,ee),ce.return=se,ce;case c:return ee=iy(ee,se.mode,ce),ee.return=se,ee;case _:var He=ee._init;return Tt(se,He(ee._payload),ce)}if(q(ee)||L(ee))return ee=Gl(ee,se.mode,ce,null),ee.return=se,ee;zo(se,ee)}return null}function We(se,ee,ce,He){var ct=ee!==null?ee.key:null;if(typeof ce=="string"&&ce!==""||typeof ce=="number")return ct!==null?null:J(se,ee,""+ce,He);if(typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case l:return ce.key===ct?oe(se,ee,ce,He):null;case c:return ce.key===ct?Pe(se,ee,ce,He):null;case _:return ct=ce._init,We(se,ee,ct(ce._payload),He)}if(q(ce)||L(ce))return ct!==null?null:Qe(se,ee,ce,He,null);zo(se,ce)}return null}function _n(se,ee,ce,He,ct){if(typeof He=="string"&&He!==""||typeof He=="number")return se=se.get(ce)||null,J(ee,se,""+He,ct);if(typeof He=="object"&&He!==null){switch(He.$$typeof){case l:return se=se.get(He.key===null?ce:He.key)||null,oe(ee,se,He,ct);case c:return se=se.get(He.key===null?ce:He.key)||null,Pe(ee,se,He,ct);case _:var Mt=He._init;return _n(se,ee,ce,Mt(He._payload),ct)}if(q(He)||L(He))return se=se.get(ce)||null,Qe(ee,se,He,ct,null);zo(ee,He)}return null}function gn(se,ee,ce,He){for(var ct=null,Mt=null,Pt=ee,Zt=ee=0,Pr=null;Pt!==null&&Zt<ce.length;Zt++){Pt.index>Zt?(Pr=Pt,Pt=null):Pr=Pt.sibling;var Qt=We(se,Pt,ce[Zt],He);if(Qt===null){Pt===null&&(Pt=Pr);break}u&&Pt&&Qt.alternate===null&&d(se,Pt),ee=P(Qt,ee,Zt),Mt===null?ct=Qt:Mt.sibling=Qt,Mt=Qt,Pt=Pr}if(Zt===ce.length)return m(se,Pt),an&&Bt(se,Zt),ct;if(Pt===null){for(;Zt<ce.length;Zt++)Pt=Tt(se,ce[Zt],He),Pt!==null&&(ee=P(Pt,ee,Zt),Mt===null?ct=Pt:Mt.sibling=Pt,Mt=Pt);return an&&Bt(se,Zt),ct}for(Pt=S(se,Pt);Zt<ce.length;Zt++)Pr=_n(Pt,se,Zt,ce[Zt],He),Pr!==null&&(u&&Pr.alternate!==null&&Pt.delete(Pr.key===null?Zt:Pr.key),ee=P(Pr,ee,Zt),Mt===null?ct=Pr:Mt.sibling=Pr,Mt=Pr);return u&&Pt.forEach(function(Ba){return d(se,Ba)}),an&&Bt(se,Zt),ct}function Ti(se,ee,ce,He){var ct=L(ce);if(typeof ct!="function")throw Error(o(150));if(ce=ct.call(ce),ce==null)throw Error(o(151));for(var Mt=ct=null,Pt=ee,Zt=ee=0,Pr=null,Qt=ce.next();Pt!==null&&!Qt.done;Zt++,Qt=ce.next()){Pt.index>Zt?(Pr=Pt,Pt=null):Pr=Pt.sibling;var Ba=We(se,Pt,Qt.value,He);if(Ba===null){Pt===null&&(Pt=Pr);break}u&&Pt&&Ba.alternate===null&&d(se,Pt),ee=P(Ba,ee,Zt),Mt===null?ct=Ba:Mt.sibling=Ba,Mt=Ba,Pt=Pr}if(Qt.done)return m(se,Pt),an&&Bt(se,Zt),ct;if(Pt===null){for(;!Qt.done;Zt++,Qt=ce.next())Qt=Tt(se,Qt.value,He),Qt!==null&&(ee=P(Qt,ee,Zt),Mt===null?ct=Qt:Mt.sibling=Qt,Mt=Qt);return an&&Bt(se,Zt),ct}for(Pt=S(se,Pt);!Qt.done;Zt++,Qt=ce.next())Qt=_n(Pt,se,Zt,Qt.value,He),Qt!==null&&(u&&Qt.alternate!==null&&Pt.delete(Qt.key===null?Zt:Qt.key),ee=P(Qt,ee,Zt),Mt===null?ct=Qt:Mt.sibling=Qt,Mt=Qt);return u&&Pt.forEach(function(AI){return d(se,AI)}),an&&Bt(se,Zt),ct}function qo(se,ee,ce,He){if(typeof ce=="object"&&ce!==null&&ce.type===h&&ce.key===null&&(ce=ce.props.children),typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case l:e:{for(var ct=ce.key,Mt=ee;Mt!==null;){if(Mt.key===ct){if(ct=ce.type,ct===h){if(Mt.tag===7){m(se,Mt.sibling),ee=E(Mt,ce.props.children),ee.return=se,se=ee;break e}}else if(Mt.elementType===ct||typeof ct=="object"&&ct!==null&&ct.$$typeof===_&&Uo(ct)===Mt.type){m(se,Mt.sibling),ee=E(Mt,ce.props),ee.ref=Is(se,Mt,ce),ee.return=se,se=ee;break e}m(se,Mt);break}else d(se,Mt);Mt=Mt.sibling}ce.type===h?(ee=Gl(ce.props.children,se.mode,He,ce.key),ee.return=se,se=ee):(He=Dp(ce.type,ce.key,ce.props,null,se.mode,He),He.ref=Is(se,ee,ce),He.return=se,se=He)}return I(se);case c:e:{for(Mt=ce.key;ee!==null;){if(ee.key===Mt)if(ee.tag===4&&ee.stateNode.containerInfo===ce.containerInfo&&ee.stateNode.implementation===ce.implementation){m(se,ee.sibling),ee=E(ee,ce.children||[]),ee.return=se,se=ee;break e}else{m(se,ee);break}else d(se,ee);ee=ee.sibling}ee=iy(ce,se.mode,He),ee.return=se,se=ee}return I(se);case _:return Mt=ce._init,qo(se,ee,Mt(ce._payload),He)}if(q(ce))return gn(se,ee,ce,He);if(L(ce))return Ti(se,ee,ce,He);zo(se,ce)}return typeof ce=="string"&&ce!==""||typeof ce=="number"?(ce=""+ce,ee!==null&&ee.tag===6?(m(se,ee.sibling),ee=E(ee,ce),ee.return=se,se=ee):(m(se,ee),ee=ry(ce,se.mode,He),ee.return=se,se=ee),I(se)):m(se,ee)}return qo}var Vo=Ma(!0),Dd=Ma(!1),hi=ci(null),lp=null,Bu=null,uv=null;function cv(){uv=Bu=lp=null}function GS(u,d,m){me?(Yt(hi,d._currentValue),d._currentValue=m):(Yt(hi,d._currentValue2),d._currentValue2=m)}function dv(u){var d=hi.current;tn(hi),me?u._currentValue=d:u._currentValue2=d}function hv(u,d,m){for(;u!==null;){var S=u.alternate;if((u.childLanes&d)!==d?(u.childLanes|=d,S!==null&&(S.childLanes|=d)):S!==null&&(S.childLanes&d)!==d&&(S.childLanes|=d),u===m)break;u=u.return}}function $u(u,d){lp=u,uv=Bu=null,u=u.dependencies,u!==null&&u.firstContext!==null&&(u.lanes&d&&(ki=!0),u.firstContext=null)}function ls(u){var d=me?u._currentValue:u._currentValue2;if(uv!==u)if(u={context:u,memoizedValue:d,next:null},Bu===null){if(lp===null)throw Error(o(308));Bu=u,lp.dependencies={lanes:0,firstContext:u}}else Bu=Bu.next=u;return d}var $l=null;function fv(u){$l===null?$l=[u]:$l.push(u)}function qS(u,d,m,S){var E=d.interleaved;return E===null?(m.next=m,fv(d)):(m.next=E.next,E.next=m),d.interleaved=m,lo(u,S)}function lo(u,d){u.lanes|=d;var m=u.alternate;for(m!==null&&(m.lanes|=d),m=u,u=u.return;u!==null;)u.childLanes|=d,m=u.alternate,m!==null&&(m.childLanes|=d),m=u,u=u.return;return m.tag===3?m.stateNode:null}var Aa=!1;function pv(u){u.updateQueue={baseState:u.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function YS(u,d){u=u.updateQueue,d.updateQueue===u&&(d.updateQueue={baseState:u.baseState,firstBaseUpdate:u.firstBaseUpdate,lastBaseUpdate:u.lastBaseUpdate,shared:u.shared,effects:u.effects})}function Wo(u,d){return{eventTime:u,lane:d,tag:0,payload:null,callback:null,next:null}}function Na(u,d,m){var S=u.updateQueue;if(S===null)return null;if(S=S.shared,It&2){var E=S.pending;return E===null?d.next=d:(d.next=E.next,E.next=d),S.pending=d,lo(u,m)}return E=S.interleaved,E===null?(d.next=d,fv(S)):(d.next=E.next,E.next=d),S.interleaved=d,lo(u,m)}function up(u,d,m){if(d=d.updateQueue,d!==null&&(d=d.shared,(m&4194240)!==0)){var S=d.lanes;S&=u.pendingLanes,m|=S,d.lanes=m,Do(u,m)}}function KS(u,d){var m=u.updateQueue,S=u.alternate;if(S!==null&&(S=S.updateQueue,m===S)){var E=null,P=null;if(m=m.firstBaseUpdate,m!==null){do{var I={eventTime:m.eventTime,lane:m.lane,tag:m.tag,payload:m.payload,callback:m.callback,next:null};P===null?E=P=I:P=P.next=I,m=m.next}while(m!==null);P===null?E=P=d:P=P.next=d}else E=P=d;m={baseState:S.baseState,firstBaseUpdate:E,lastBaseUpdate:P,shared:S.shared,effects:S.effects},u.updateQueue=m;return}u=m.lastBaseUpdate,u===null?m.firstBaseUpdate=d:u.next=d,m.lastBaseUpdate=d}function cp(u,d,m,S){var E=u.updateQueue;Aa=!1;var P=E.firstBaseUpdate,I=E.lastBaseUpdate,J=E.shared.pending;if(J!==null){E.shared.pending=null;var oe=J,Pe=oe.next;oe.next=null,I===null?P=Pe:I.next=Pe,I=oe;var Qe=u.alternate;Qe!==null&&(Qe=Qe.updateQueue,J=Qe.lastBaseUpdate,J!==I&&(J===null?Qe.firstBaseUpdate=Pe:J.next=Pe,Qe.lastBaseUpdate=oe))}if(P!==null){var Tt=E.baseState;I=0,Qe=Pe=oe=null,J=P;do{var We=J.lane,_n=J.eventTime;if((S&We)===We){Qe!==null&&(Qe=Qe.next={eventTime:_n,lane:0,tag:J.tag,payload:J.payload,callback:J.callback,next:null});e:{var gn=u,Ti=J;switch(We=d,_n=m,Ti.tag){case 1:if(gn=Ti.payload,typeof gn=="function"){Tt=gn.call(_n,Tt,We);break e}Tt=gn;break e;case 3:gn.flags=gn.flags&-65537|128;case 0:if(gn=Ti.payload,We=typeof gn=="function"?gn.call(_n,Tt,We):gn,We==null)break e;Tt=s({},Tt,We);break e;case 2:Aa=!0}}J.callback!==null&&J.lane!==0&&(u.flags|=64,We=E.effects,We===null?E.effects=[J]:We.push(J))}else _n={eventTime:_n,lane:We,tag:J.tag,payload:J.payload,callback:J.callback,next:null},Qe===null?(Pe=Qe=_n,oe=Tt):Qe=Qe.next=_n,I|=We;if(J=J.next,J===null){if(J=E.shared.pending,J===null)break;We=J,J=We.next,We.next=null,E.lastBaseUpdate=We,E.shared.pending=null}}while(1);if(Qe===null&&(oe=Tt),E.baseState=oe,E.firstBaseUpdate=Pe,E.lastBaseUpdate=Qe,d=E.shared.interleaved,d!==null){E=d;do I|=E.lane,E=E.next;while(E!==d)}else P===null&&(E.shared.lanes=0);Ul|=I,u.lanes=I,u.memoizedState=Tt}}function XS(u,d,m){if(u=d.effects,d.effects=null,u!==null)for(d=0;d<u.length;d++){var S=u[d],E=S.callback;if(E!==null){if(S.callback=null,S=m,typeof E!="function")throw Error(o(191,E));E.call(S)}}}var Fd={},us=ci(Fd),Bd=ci(Fd),zu=ci(Fd);function uo(u){if(u===Fd)throw Error(o(174));return u}function gv(u,d){Yt(zu,d),Yt(Bd,u),Yt(us,Fd),u=te(d),tn(us),Yt(us,u)}function Uu(){tn(us),tn(Bd),tn(zu)}function ZS(u){var d=uo(zu.current),m=uo(us.current);d=O(m,u.type,d),m!==d&&(Yt(Bd,u),Yt(us,d))}function mv(u){Bd.current===u&&(tn(us),tn(Bd))}var An=ci(0);function dp(u){for(var d=u;d!==null;){if(d.tag===13){var m=d.memoizedState;if(m!==null&&(m=m.dehydrated,m===null||Gt(m)||qt(m)))return d}else if(d.tag===19&&d.memoizedProps.revealOrder!==void 0){if(d.flags&128)return d}else if(d.child!==null){d.child.return=d,d=d.child;continue}if(d===u)break;for(;d.sibling===null;){if(d.return===null||d.return===u)return null;d=d.return}d.sibling.return=d.return,d=d.sibling}return null}var vv=[];function yv(){for(var u=0;u<vv.length;u++){var d=vv[u];me?d._workInProgressVersionPrimary=null:d._workInProgressVersionSecondary=null}vv.length=0}var hp=a.ReactCurrentDispatcher,wv=a.ReactCurrentBatchConfig,zl=0,Nn=null,mr=null,Rr=null,fp=!1,$d=!1,zd=0,rI=0;function Zr(){throw Error(o(321))}function xv(u,d){if(d===null)return!1;for(var m=0;m<d.length&&m<u.length;m++)if(!gr(u[m],d[m]))return!1;return!0}function _v(u,d,m,S,E,P){if(zl=P,Nn=d,d.memoizedState=null,d.updateQueue=null,d.lanes=0,hp.current=u===null||u.memoizedState===null?aI:lI,u=m(S,E),$d){P=0;do{if($d=!1,zd=0,25<=P)throw Error(o(301));P+=1,Rr=mr=null,d.updateQueue=null,hp.current=uI,u=m(S,E)}while($d)}if(hp.current=mp,d=mr!==null&&mr.next!==null,zl=0,Rr=mr=Nn=null,fp=!1,d)throw Error(o(300));return u}function bv(){var u=zd!==0;return zd=0,u}function co(){var u={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Rr===null?Nn.memoizedState=Rr=u:Rr=Rr.next=u,Rr}function cs(){if(mr===null){var u=Nn.alternate;u=u!==null?u.memoizedState:null}else u=mr.next;var d=Rr===null?Nn.memoizedState:Rr.next;if(d!==null)Rr=d,mr=u;else{if(u===null)throw Error(o(310));mr=u,u={memoizedState:mr.memoizedState,baseState:mr.baseState,baseQueue:mr.baseQueue,queue:mr.queue,next:null},Rr===null?Nn.memoizedState=Rr=u:Rr=Rr.next=u}return Rr}function Ud(u,d){return typeof d=="function"?d(u):d}function Sv(u){var d=cs(),m=d.queue;if(m===null)throw Error(o(311));m.lastRenderedReducer=u;var S=mr,E=S.baseQueue,P=m.pending;if(P!==null){if(E!==null){var I=E.next;E.next=P.next,P.next=I}S.baseQueue=E=P,m.pending=null}if(E!==null){P=E.next,S=S.baseState;var J=I=null,oe=null,Pe=P;do{var Qe=Pe.lane;if((zl&Qe)===Qe)oe!==null&&(oe=oe.next={lane:0,action:Pe.action,hasEagerState:Pe.hasEagerState,eagerState:Pe.eagerState,next:null}),S=Pe.hasEagerState?Pe.eagerState:u(S,Pe.action);else{var Tt={lane:Qe,action:Pe.action,hasEagerState:Pe.hasEagerState,eagerState:Pe.eagerState,next:null};oe===null?(J=oe=Tt,I=S):oe=oe.next=Tt,Nn.lanes|=Qe,Ul|=Qe}Pe=Pe.next}while(Pe!==null&&Pe!==P);oe===null?I=S:oe.next=J,gr(S,d.memoizedState)||(ki=!0),d.memoizedState=S,d.baseState=I,d.baseQueue=oe,m.lastRenderedState=S}if(u=m.interleaved,u!==null){E=u;do P=E.lane,Nn.lanes|=P,Ul|=P,E=E.next;while(E!==u)}else E===null&&(m.lanes=0);return[d.memoizedState,m.dispatch]}function Cv(u){var d=cs(),m=d.queue;if(m===null)throw Error(o(311));m.lastRenderedReducer=u;var S=m.dispatch,E=m.pending,P=d.memoizedState;if(E!==null){m.pending=null;var I=E=E.next;do P=u(P,I.action),I=I.next;while(I!==E);gr(P,d.memoizedState)||(ki=!0),d.memoizedState=P,d.baseQueue===null&&(d.baseState=P),m.lastRenderedState=P}return[P,S]}function QS(){}function JS(u,d){var m=Nn,S=cs(),E=d(),P=!gr(S.memoizedState,E);if(P&&(S.memoizedState=E,ki=!0),S=S.queue,kv(n2.bind(null,m,S,u),[u]),S.getSnapshot!==d||P||Rr!==null&&Rr.memoizedState.tag&1){if(m.flags|=2048,Vd(9,t2.bind(null,m,S,E,d),void 0,null),Tr===null)throw Error(o(349));zl&30||e2(m,d,E)}return E}function e2(u,d,m){u.flags|=16384,u={getSnapshot:d,value:m},d=Nn.updateQueue,d===null?(d={lastEffect:null,stores:null},Nn.updateQueue=d,d.stores=[u]):(m=d.stores,m===null?d.stores=[u]:m.push(u))}function t2(u,d,m,S){d.value=m,d.getSnapshot=S,r2(d)&&i2(u)}function n2(u,d,m){return m(function(){r2(d)&&i2(u)})}function r2(u){var d=u.getSnapshot;u=u.value;try{var m=d();return!gr(u,m)}catch{return!0}}function i2(u){var d=lo(u,1);d!==null&&ds(d,u,1,-1)}function s2(u){var d=co();return typeof u=="function"&&(u=u()),d.memoizedState=d.baseState=u,u={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ud,lastRenderedState:u},d.queue=u,u=u.dispatch=oI.bind(null,Nn,u),[d.memoizedState,u]}function Vd(u,d,m,S){return u={tag:u,create:d,destroy:m,deps:S,next:null},d=Nn.updateQueue,d===null?(d={lastEffect:null,stores:null},Nn.updateQueue=d,d.lastEffect=u.next=u):(m=d.lastEffect,m===null?d.lastEffect=u.next=u:(S=m.next,m.next=u,u.next=S,d.lastEffect=u)),u}function o2(){return cs().memoizedState}function pp(u,d,m,S){var E=co();Nn.flags|=u,E.memoizedState=Vd(1|d,m,void 0,S===void 0?null:S)}function gp(u,d,m,S){var E=cs();S=S===void 0?null:S;var P=void 0;if(mr!==null){var I=mr.memoizedState;if(P=I.destroy,S!==null&&xv(S,I.deps)){E.memoizedState=Vd(d,m,P,S);return}}Nn.flags|=u,E.memoizedState=Vd(1|d,m,P,S)}function a2(u,d){return pp(8390656,8,u,d)}function kv(u,d){return gp(2048,8,u,d)}function l2(u,d){return gp(4,2,u,d)}function u2(u,d){return gp(4,4,u,d)}function c2(u,d){if(typeof d=="function")return u=u(),d(u),function(){d(null)};if(d!=null)return u=u(),d.current=u,function(){d.current=null}}function d2(u,d,m){return m=m!=null?m.concat([u]):null,gp(4,4,c2.bind(null,d,u),m)}function Ev(){}function h2(u,d){var m=cs();d=d===void 0?null:d;var S=m.memoizedState;return S!==null&&d!==null&&xv(d,S[1])?S[0]:(m.memoizedState=[u,d],u)}function f2(u,d){var m=cs();d=d===void 0?null:d;var S=m.memoizedState;return S!==null&&d!==null&&xv(d,S[1])?S[0]:(u=u(),m.memoizedState=[u,d],u)}function p2(u,d,m){return zl&21?(gr(m,d)||(m=Ca(),Nn.lanes|=m,Ul|=m,u.baseState=!0),d):(u.baseState&&(u.baseState=!1,ki=!0),u.memoizedState=m)}function iI(u,d){var m=Vt;Vt=m!==0&&4>m?m:4,u(!0);var S=wv.transition;wv.transition={};try{u(!1),d()}finally{Vt=m,wv.transition=S}}function g2(){return cs().memoizedState}function sI(u,d,m){var S=Oa(u);if(m={lane:S,action:m,hasEagerState:!1,eagerState:null,next:null},m2(u))v2(d,m);else if(m=qS(u,d,m,S),m!==null){var E=ei();ds(m,u,S,E),y2(m,d,S)}}function oI(u,d,m){var S=Oa(u),E={lane:S,action:m,hasEagerState:!1,eagerState:null,next:null};if(m2(u))v2(d,E);else{var P=u.alternate;if(u.lanes===0&&(P===null||P.lanes===0)&&(P=d.lastRenderedReducer,P!==null))try{var I=d.lastRenderedState,J=P(I,m);if(E.hasEagerState=!0,E.eagerState=J,gr(J,I)){var oe=d.interleaved;oe===null?(E.next=E,fv(d)):(E.next=oe.next,oe.next=E),d.interleaved=E;return}}catch{}finally{}m=qS(u,d,E,S),m!==null&&(E=ei(),ds(m,u,S,E),y2(m,d,S))}}function m2(u){var d=u.alternate;return u===Nn||d!==null&&d===Nn}function v2(u,d){$d=fp=!0;var m=u.pending;m===null?d.next=d:(d.next=m.next,m.next=d),u.pending=d}function y2(u,d,m){if(m&4194240){var S=d.lanes;S&=u.pendingLanes,m|=S,d.lanes=m,Do(u,m)}}var mp={readContext:ls,useCallback:Zr,useContext:Zr,useEffect:Zr,useImperativeHandle:Zr,useInsertionEffect:Zr,useLayoutEffect:Zr,useMemo:Zr,useReducer:Zr,useRef:Zr,useState:Zr,useDebugValue:Zr,useDeferredValue:Zr,useTransition:Zr,useMutableSource:Zr,useSyncExternalStore:Zr,useId:Zr,unstable_isNewReconciler:!1},aI={readContext:ls,useCallback:function(u,d){return co().memoizedState=[u,d===void 0?null:d],u},useContext:ls,useEffect:a2,useImperativeHandle:function(u,d,m){return m=m!=null?m.concat([u]):null,pp(4194308,4,c2.bind(null,d,u),m)},useLayoutEffect:function(u,d){return pp(4194308,4,u,d)},useInsertionEffect:function(u,d){return pp(4,2,u,d)},useMemo:function(u,d){var m=co();return d=d===void 0?null:d,u=u(),m.memoizedState=[u,d],u},useReducer:function(u,d,m){var S=co();return d=m!==void 0?m(d):d,S.memoizedState=S.baseState=d,u={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:u,lastRenderedState:d},S.queue=u,u=u.dispatch=sI.bind(null,Nn,u),[S.memoizedState,u]},useRef:function(u){var d=co();return u={current:u},d.memoizedState=u},useState:s2,useDebugValue:Ev,useDeferredValue:function(u){return co().memoizedState=u},useTransition:function(){var u=s2(!1),d=u[0];return u=iI.bind(null,u[1]),co().memoizedState=u,[d,u]},useMutableSource:function(){},useSyncExternalStore:function(u,d,m){var S=Nn,E=co();if(an){if(m===void 0)throw Error(o(407));m=m()}else{if(m=d(),Tr===null)throw Error(o(349));zl&30||e2(S,d,m)}E.memoizedState=m;var P={value:m,getSnapshot:d};return E.queue=P,a2(n2.bind(null,S,P,u),[u]),S.flags|=2048,Vd(9,t2.bind(null,S,P,m,d),void 0,null),m},useId:function(){var u=co(),d=Tr.identifierPrefix;if(an){var m=Ve,S=$e;m=(S&~(1<<32-pr(S)-1)).toString(32)+m,d=":"+d+"R"+m,m=zd++,0<m&&(d+="H"+m.toString(32)),d+=":"}else m=rI++,d=":"+d+"r"+m.toString(32)+":";return u.memoizedState=d},unstable_isNewReconciler:!1},lI={readContext:ls,useCallback:h2,useContext:ls,useEffect:kv,useImperativeHandle:d2,useInsertionEffect:l2,useLayoutEffect:u2,useMemo:f2,useReducer:Sv,useRef:o2,useState:function(){return Sv(Ud)},useDebugValue:Ev,useDeferredValue:function(u){var d=cs();return p2(d,mr.memoizedState,u)},useTransition:function(){var u=Sv(Ud)[0],d=cs().memoizedState;return[u,d]},useMutableSource:QS,useSyncExternalStore:JS,useId:g2,unstable_isNewReconciler:!1},uI={readContext:ls,useCallback:h2,useContext:ls,useEffect:kv,useImperativeHandle:d2,useInsertionEffect:l2,useLayoutEffect:u2,useMemo:f2,useReducer:Cv,useRef:o2,useState:function(){return Cv(Ud)},useDebugValue:Ev,useDeferredValue:function(u){var d=cs();return mr===null?d.memoizedState=u:p2(d,mr.memoizedState,u)},useTransition:function(){var u=Cv(Ud)[0],d=cs().memoizedState;return[u,d]},useMutableSource:QS,useSyncExternalStore:JS,useId:g2,unstable_isNewReconciler:!1};function Os(u,d){if(u&&u.defaultProps){d=s({},d),u=u.defaultProps;for(var m in u)d[m]===void 0&&(d[m]=u[m]);return d}return d}function Rv(u,d,m,S){d=u.memoizedState,m=m(S,d),m=m==null?d:s({},d,m),u.memoizedState=m,u.lanes===0&&(u.updateQueue.baseState=m)}var vp={isMounted:function(u){return(u=u._reactInternals)?$(u)===u:!1},enqueueSetState:function(u,d,m){u=u._reactInternals;var S=ei(),E=Oa(u),P=Wo(S,E);P.payload=d,m!=null&&(P.callback=m),d=Na(u,P,E),d!==null&&(ds(d,u,E,S),up(d,u,E))},enqueueReplaceState:function(u,d,m){u=u._reactInternals;var S=ei(),E=Oa(u),P=Wo(S,E);P.tag=1,P.payload=d,m!=null&&(P.callback=m),d=Na(u,P,E),d!==null&&(ds(d,u,E,S),up(d,u,E))},enqueueForceUpdate:function(u,d){u=u._reactInternals;var m=ei(),S=Oa(u),E=Wo(m,S);E.tag=2,d!=null&&(E.callback=d),d=Na(u,E,S),d!==null&&(ds(d,u,S,m),up(d,u,S))}};function w2(u,d,m,S,E,P,I){return u=u.stateNode,typeof u.shouldComponentUpdate=="function"?u.shouldComponentUpdate(S,P,I):d.prototype&&d.prototype.isPureReactComponent?!$o(m,S)||!$o(E,P):!0}function x2(u,d,m){var S=!1,E=sn,P=d.contextType;return typeof P=="object"&&P!==null?P=ls(P):(E=Cn(d)?Dr:Rt.current,S=d.contextTypes,P=(S=S!=null)?Vn(u,E):sn),d=new d(m,P),u.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=vp,u.stateNode=d,d._reactInternals=u,S&&(u=u.stateNode,u.__reactInternalMemoizedUnmaskedChildContext=E,u.__reactInternalMemoizedMaskedChildContext=P),d}function _2(u,d,m,S){u=d.state,typeof d.componentWillReceiveProps=="function"&&d.componentWillReceiveProps(m,S),typeof d.UNSAFE_componentWillReceiveProps=="function"&&d.UNSAFE_componentWillReceiveProps(m,S),d.state!==u&&vp.enqueueReplaceState(d,d.state,null)}function Tv(u,d,m,S){var E=u.stateNode;E.props=m,E.state=u.memoizedState,E.refs={},pv(u);var P=d.contextType;typeof P=="object"&&P!==null?E.context=ls(P):(P=Cn(d)?Dr:Rt.current,E.context=Vn(u,P)),E.state=u.memoizedState,P=d.getDerivedStateFromProps,typeof P=="function"&&(Rv(u,d,P,m),E.state=u.memoizedState),typeof d.getDerivedStateFromProps=="function"||typeof E.getSnapshotBeforeUpdate=="function"||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(d=E.state,typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount(),d!==E.state&&vp.enqueueReplaceState(E,E.state,null),cp(u,m,E,S),E.state=u.memoizedState),typeof E.componentDidMount=="function"&&(u.flags|=4194308)}function Vu(u,d){try{var m="",S=d;do m+=Bl(S),S=S.return;while(S);var E=m}catch(P){E=`
Error generating stack: `+P.message+`
`+P.stack}return{value:u,source:d,stack:E,digest:null}}function Pv(u,d,m){return{value:u,source:null,stack:m??null,digest:d??null}}function Lv(u,d){try{console.error(d.value)}catch(m){setTimeout(function(){throw m})}}var cI=typeof WeakMap=="function"?WeakMap:Map;function b2(u,d,m){m=Wo(-1,m),m.tag=3,m.payload={element:null};var S=d.value;return m.callback=function(){Mp||(Mp=!0,Xv=S),Lv(u,d)},m}function S2(u,d,m){m=Wo(-1,m),m.tag=3;var S=u.type.getDerivedStateFromError;if(typeof S=="function"){var E=d.value;m.payload=function(){return S(E)},m.callback=function(){Lv(u,d)}}var P=u.stateNode;return P!==null&&typeof P.componentDidCatch=="function"&&(m.callback=function(){Lv(u,d),typeof S!="function"&&(ja===null?ja=new Set([this]):ja.add(this));var I=d.stack;this.componentDidCatch(d.value,{componentStack:I!==null?I:""})}),m}function C2(u,d,m){var S=u.pingCache;if(S===null){S=u.pingCache=new cI;var E=new Set;S.set(d,E)}else E=S.get(d),E===void 0&&(E=new Set,S.set(d,E));E.has(m)||(E.add(m),u=CI.bind(null,u,d,m),d.then(u,u))}function k2(u){do{var d;if((d=u.tag===13)&&(d=u.memoizedState,d=d!==null?d.dehydrated!==null:!0),d)return u;u=u.return}while(u!==null);return null}function E2(u,d,m,S,E){return u.mode&1?(u.flags|=65536,u.lanes=E,u):(u===d?u.flags|=65536:(u.flags|=128,m.flags|=131072,m.flags&=-52805,m.tag===1&&(m.alternate===null?m.tag=17:(d=Wo(-1,1),d.tag=2,Na(m,d,1))),m.lanes|=1),u)}var dI=a.ReactCurrentOwner,ki=!1;function fi(u,d,m,S){d.child=u===null?Dd(d,null,m,S):Vo(d,u.child,m,S)}function R2(u,d,m,S,E){m=m.render;var P=d.ref;return $u(d,E),S=_v(u,d,m,S,P,E),m=bv(),u!==null&&!ki?(d.updateQueue=u.updateQueue,d.flags&=-2053,u.lanes&=~E,Ho(u,d,E)):(an&&m&&Wn(d),d.flags|=1,fi(u,d,S,E),d.child)}function T2(u,d,m,S,E){if(u===null){var P=m.type;return typeof P=="function"&&!ny(P)&&P.defaultProps===void 0&&m.compare===null&&m.defaultProps===void 0?(d.tag=15,d.type=P,P2(u,d,P,S,E)):(u=Dp(m.type,null,S,d,d.mode,E),u.ref=d.ref,u.return=d,d.child=u)}if(P=u.child,!(u.lanes&E)){var I=P.memoizedProps;if(m=m.compare,m=m!==null?m:$o,m(I,S)&&u.ref===d.ref)return Ho(u,d,E)}return d.flags|=1,u=Fa(P,S),u.ref=d.ref,u.return=d,d.child=u}function P2(u,d,m,S,E){if(u!==null){var P=u.memoizedProps;if($o(P,S)&&u.ref===d.ref)if(ki=!1,d.pendingProps=S=P,(u.lanes&E)!==0)u.flags&131072&&(ki=!0);else return d.lanes=u.lanes,Ho(u,d,E)}return Mv(u,d,m,S,E)}function L2(u,d,m){var S=d.pendingProps,E=S.children,P=u!==null?u.memoizedState:null;if(S.mode==="hidden")if(!(d.mode&1))d.memoizedState={baseLanes:0,cachePool:null,transitions:null},Yt(Hu,$i),$i|=m;else{if(!(m&1073741824))return u=P!==null?P.baseLanes|m:m,d.lanes=d.childLanes=1073741824,d.memoizedState={baseLanes:u,cachePool:null,transitions:null},d.updateQueue=null,Yt(Hu,$i),$i|=u,null;d.memoizedState={baseLanes:0,cachePool:null,transitions:null},S=P!==null?P.baseLanes:m,Yt(Hu,$i),$i|=S}else P!==null?(S=P.baseLanes|m,d.memoizedState=null):S=m,Yt(Hu,$i),$i|=S;return fi(u,d,E,m),d.child}function M2(u,d){var m=d.ref;(u===null&&m!==null||u!==null&&u.ref!==m)&&(d.flags|=512,d.flags|=2097152)}function Mv(u,d,m,S,E){var P=Cn(m)?Dr:Rt.current;return P=Vn(d,P),$u(d,E),m=_v(u,d,m,S,P,E),S=bv(),u!==null&&!ki?(d.updateQueue=u.updateQueue,d.flags&=-2053,u.lanes&=~E,Ho(u,d,E)):(an&&S&&Wn(d),d.flags|=1,fi(u,d,m,E),d.child)}function A2(u,d,m,S,E){if(Cn(m)){var P=!0;Si(d)}else P=!1;if($u(d,E),d.stateNode===null)wp(u,d),x2(d,m,S),Tv(d,m,S,E),S=!0;else if(u===null){var I=d.stateNode,J=d.memoizedProps;I.props=J;var oe=I.context,Pe=m.contextType;typeof Pe=="object"&&Pe!==null?Pe=ls(Pe):(Pe=Cn(m)?Dr:Rt.current,Pe=Vn(d,Pe));var Qe=m.getDerivedStateFromProps,Tt=typeof Qe=="function"||typeof I.getSnapshotBeforeUpdate=="function";Tt||typeof I.UNSAFE_componentWillReceiveProps!="function"&&typeof I.componentWillReceiveProps!="function"||(J!==S||oe!==Pe)&&_2(d,I,S,Pe),Aa=!1;var We=d.memoizedState;I.state=We,cp(d,S,I,E),oe=d.memoizedState,J!==S||We!==oe||on.current||Aa?(typeof Qe=="function"&&(Rv(d,m,Qe,S),oe=d.memoizedState),(J=Aa||w2(d,m,J,S,We,oe,Pe))?(Tt||typeof I.UNSAFE_componentWillMount!="function"&&typeof I.componentWillMount!="function"||(typeof I.componentWillMount=="function"&&I.componentWillMount(),typeof I.UNSAFE_componentWillMount=="function"&&I.UNSAFE_componentWillMount()),typeof I.componentDidMount=="function"&&(d.flags|=4194308)):(typeof I.componentDidMount=="function"&&(d.flags|=4194308),d.memoizedProps=S,d.memoizedState=oe),I.props=S,I.state=oe,I.context=Pe,S=J):(typeof I.componentDidMount=="function"&&(d.flags|=4194308),S=!1)}else{I=d.stateNode,YS(u,d),J=d.memoizedProps,Pe=d.type===d.elementType?J:Os(d.type,J),I.props=Pe,Tt=d.pendingProps,We=I.context,oe=m.contextType,typeof oe=="object"&&oe!==null?oe=ls(oe):(oe=Cn(m)?Dr:Rt.current,oe=Vn(d,oe));var _n=m.getDerivedStateFromProps;(Qe=typeof _n=="function"||typeof I.getSnapshotBeforeUpdate=="function")||typeof I.UNSAFE_componentWillReceiveProps!="function"&&typeof I.componentWillReceiveProps!="function"||(J!==Tt||We!==oe)&&_2(d,I,S,oe),Aa=!1,We=d.memoizedState,I.state=We,cp(d,S,I,E);var gn=d.memoizedState;J!==Tt||We!==gn||on.current||Aa?(typeof _n=="function"&&(Rv(d,m,_n,S),gn=d.memoizedState),(Pe=Aa||w2(d,m,Pe,S,We,gn,oe)||!1)?(Qe||typeof I.UNSAFE_componentWillUpdate!="function"&&typeof I.componentWillUpdate!="function"||(typeof I.componentWillUpdate=="function"&&I.componentWillUpdate(S,gn,oe),typeof I.UNSAFE_componentWillUpdate=="function"&&I.UNSAFE_componentWillUpdate(S,gn,oe)),typeof I.componentDidUpdate=="function"&&(d.flags|=4),typeof I.getSnapshotBeforeUpdate=="function"&&(d.flags|=1024)):(typeof I.componentDidUpdate!="function"||J===u.memoizedProps&&We===u.memoizedState||(d.flags|=4),typeof I.getSnapshotBeforeUpdate!="function"||J===u.memoizedProps&&We===u.memoizedState||(d.flags|=1024),d.memoizedProps=S,d.memoizedState=gn),I.props=S,I.state=gn,I.context=oe,S=Pe):(typeof I.componentDidUpdate!="function"||J===u.memoizedProps&&We===u.memoizedState||(d.flags|=4),typeof I.getSnapshotBeforeUpdate!="function"||J===u.memoizedProps&&We===u.memoizedState||(d.flags|=1024),S=!1)}return Av(u,d,m,S,P,E)}function Av(u,d,m,S,E,P){M2(u,d);var I=(d.flags&128)!==0;if(!S&&!I)return E&&di(d,m,!1),Ho(u,d,P);S=d.stateNode,dI.current=d;var J=I&&typeof m.getDerivedStateFromError!="function"?null:S.render();return d.flags|=1,u!==null&&I?(d.child=Vo(d,u.child,null,P),d.child=Vo(d,null,J,P)):fi(u,d,J,P),d.memoizedState=S.state,E&&di(d,m,!0),d.child}function N2(u){var d=u.stateNode;d.pendingContext?Pn(u,d.pendingContext,d.pendingContext!==d.context):d.context&&Pn(u,d.context,!1),gv(u,d.containerInfo)}function j2(u,d,m,S,E){return nn(),or(E),d.flags|=256,fi(u,d,m,S),d.child}var Nv={dehydrated:null,treeContext:null,retryLane:0};function jv(u){return{baseLanes:u,cachePool:null,transitions:null}}function I2(u,d,m){var S=d.pendingProps,E=An.current,P=!1,I=(d.flags&128)!==0,J;if((J=I)||(J=u!==null&&u.memoizedState===null?!1:(E&2)!==0),J?(P=!0,d.flags&=-129):(u===null||u.memoizedState!==null)&&(E|=1),Yt(An,E&1),u===null)return Fl(d),u=d.memoizedState,u!==null&&(u=u.dehydrated,u!==null)?(d.mode&1?qt(u)?d.lanes=8:d.lanes=1073741824:d.lanes=1,null):(I=S.children,u=S.fallback,P?(S=d.mode,P=d.child,I={mode:"hidden",children:I},!(S&1)&&P!==null?(P.childLanes=0,P.pendingProps=I):P=Fp(I,S,0,null),u=Gl(u,S,m,null),P.return=d,u.return=d,P.sibling=u,d.child=P,d.child.memoizedState=jv(m),d.memoizedState=Nv,u):Iv(d,I));if(E=u.memoizedState,E!==null&&(J=E.dehydrated,J!==null))return hI(u,d,I,S,J,E,m);if(P){P=S.fallback,I=d.mode,E=u.child,J=E.sibling;var oe={mode:"hidden",children:S.children};return!(I&1)&&d.child!==E?(S=d.child,S.childLanes=0,S.pendingProps=oe,d.deletions=null):(S=Fa(E,oe),S.subtreeFlags=E.subtreeFlags&14680064),J!==null?P=Fa(J,P):(P=Gl(P,I,m,null),P.flags|=2),P.return=d,S.return=d,S.sibling=P,d.child=S,S=P,P=d.child,I=u.child.memoizedState,I=I===null?jv(m):{baseLanes:I.baseLanes|m,cachePool:null,transitions:I.transitions},P.memoizedState=I,P.childLanes=u.childLanes&~m,d.memoizedState=Nv,S}return P=u.child,u=P.sibling,S=Fa(P,{mode:"visible",children:S.children}),!(d.mode&1)&&(S.lanes=m),S.return=d,S.sibling=null,u!==null&&(m=d.deletions,m===null?(d.deletions=[u],d.flags|=16):m.push(u)),d.child=S,d.memoizedState=null,S}function Iv(u,d){return d=Fp({mode:"visible",children:d},u.mode,0,null),d.return=u,u.child=d}function yp(u,d,m,S){return S!==null&&or(S),Vo(d,u.child,null,m),u=Iv(d,d.pendingProps.children),u.flags|=2,d.memoizedState=null,u}function hI(u,d,m,S,E,P,I){if(m)return d.flags&256?(d.flags&=-257,S=Pv(Error(o(422))),yp(u,d,I,S)):d.memoizedState!==null?(d.child=u.child,d.flags|=128,null):(P=S.fallback,E=d.mode,S=Fp({mode:"visible",children:S.children},E,0,null),P=Gl(P,E,I,null),P.flags|=2,S.return=d,P.return=d,S.sibling=P,d.child=S,d.mode&1&&Vo(d,u.child,null,I),d.child.memoizedState=jv(I),d.memoizedState=Nv,P);if(!(d.mode&1))return yp(u,d,I,null);if(qt(E))return S=mt(E).digest,P=Error(o(419)),S=Pv(P,S,void 0),yp(u,d,I,S);if(m=(I&u.childLanes)!==0,ki||m){if(S=Tr,S!==null){switch(I&-I){case 4:E=2;break;case 16:E=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:E=32;break;case 536870912:E=268435456;break;default:E=0}E=E&(S.suspendedLanes|I)?0:E,E!==0&&E!==P.retryLane&&(P.retryLane=E,lo(u,E),ds(S,u,E,-1))}return ty(),S=Pv(Error(o(421))),yp(u,d,I,S)}return Gt(E)?(d.flags|=128,d.child=u.child,d=kI.bind(null,u),vt(E,d),null):(u=P.treeContext,_e&&(xn=Un(E),Qn=d,an=!0,Hn=null,js=!1,u!==null&&(le[de++]=$e,le[de++]=Ve,le[de++]=Ge,$e=u.id,Ve=u.overflow,Ge=d)),d=Iv(d,S.children),d.flags|=4096,d)}function O2(u,d,m){u.lanes|=d;var S=u.alternate;S!==null&&(S.lanes|=d),hv(u.return,d,m)}function Ov(u,d,m,S,E){var P=u.memoizedState;P===null?u.memoizedState={isBackwards:d,rendering:null,renderingStartTime:0,last:S,tail:m,tailMode:E}:(P.isBackwards=d,P.rendering=null,P.renderingStartTime=0,P.last=S,P.tail=m,P.tailMode=E)}function D2(u,d,m){var S=d.pendingProps,E=S.revealOrder,P=S.tail;if(fi(u,d,S.children,m),S=An.current,S&2)S=S&1|2,d.flags|=128;else{if(u!==null&&u.flags&128)e:for(u=d.child;u!==null;){if(u.tag===13)u.memoizedState!==null&&O2(u,m,d);else if(u.tag===19)O2(u,m,d);else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===d)break e;for(;u.sibling===null;){if(u.return===null||u.return===d)break e;u=u.return}u.sibling.return=u.return,u=u.sibling}S&=1}if(Yt(An,S),!(d.mode&1))d.memoizedState=null;else switch(E){case"forwards":for(m=d.child,E=null;m!==null;)u=m.alternate,u!==null&&dp(u)===null&&(E=m),m=m.sibling;m=E,m===null?(E=d.child,d.child=null):(E=m.sibling,m.sibling=null),Ov(d,!1,E,m,P);break;case"backwards":for(m=null,E=d.child,d.child=null;E!==null;){if(u=E.alternate,u!==null&&dp(u)===null){d.child=E;break}u=E.sibling,E.sibling=m,m=E,E=u}Ov(d,!0,m,null,P);break;case"together":Ov(d,!1,null,null,void 0);break;default:d.memoizedState=null}return d.child}function wp(u,d){!(d.mode&1)&&u!==null&&(u.alternate=null,d.alternate=null,d.flags|=2)}function Ho(u,d,m){if(u!==null&&(d.dependencies=u.dependencies),Ul|=d.lanes,!(m&d.childLanes))return null;if(u!==null&&d.child!==u.child)throw Error(o(153));if(d.child!==null){for(u=d.child,m=Fa(u,u.pendingProps),d.child=m,m.return=d;u.sibling!==null;)u=u.sibling,m=m.sibling=Fa(u,u.pendingProps),m.return=d;m.sibling=null}return d.child}function fI(u,d,m){switch(d.tag){case 3:N2(d),nn();break;case 5:ZS(d);break;case 1:Cn(d.type)&&Si(d);break;case 4:gv(d,d.stateNode.containerInfo);break;case 10:GS(d,d.type._context,d.memoizedProps.value);break;case 13:var S=d.memoizedState;if(S!==null)return S.dehydrated!==null?(Yt(An,An.current&1),d.flags|=128,null):m&d.child.childLanes?I2(u,d,m):(Yt(An,An.current&1),u=Ho(u,d,m),u!==null?u.sibling:null);Yt(An,An.current&1);break;case 19:if(S=(m&d.childLanes)!==0,u.flags&128){if(S)return D2(u,d,m);d.flags|=128}var E=d.memoizedState;if(E!==null&&(E.rendering=null,E.tail=null,E.lastEffect=null),Yt(An,An.current),S)break;return null;case 22:case 23:return d.lanes=0,L2(u,d,m)}return Ho(u,d,m)}function ho(u){u.flags|=4}function F2(u,d){if(u!==null&&u.child===d.child)return!0;if(d.flags&16)return!1;for(u=d.child;u!==null;){if(u.flags&12854||u.subtreeFlags&12854)return!1;u=u.sibling}return!0}var Wd,Hd,xp,_p;if(X)Wd=function(u,d){for(var m=d.child;m!==null;){if(m.tag===5||m.tag===6)re(u,m.stateNode);else if(m.tag!==4&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===d)break;for(;m.sibling===null;){if(m.return===null||m.return===d)return;m=m.return}m.sibling.return=m.return,m=m.sibling}},Hd=function(){},xp=function(u,d,m,S,E){if(u=u.memoizedProps,u!==S){var P=d.stateNode,I=uo(us.current);m=ke(P,m,u,S,E,I),(d.updateQueue=m)&&ho(d)}},_p=function(u,d,m,S){m!==S&&ho(d)};else if(ye){Wd=function(u,d,m,S){for(var E=d.child;E!==null;){if(E.tag===5){var P=E.stateNode;m&&S&&(P=Xt(P,E.type,E.memoizedProps,E)),re(u,P)}else if(E.tag===6)P=E.stateNode,m&&S&&(P=ft(P,E.memoizedProps,E)),re(u,P);else if(E.tag!==4){if(E.tag===22&&E.memoizedState!==null)P=E.child,P!==null&&(P.return=E),Wd(u,E,!0,!0);else if(E.child!==null){E.child.return=E,E=E.child;continue}}if(E===d)break;for(;E.sibling===null;){if(E.return===null||E.return===d)return;E=E.return}E.sibling.return=E.return,E=E.sibling}};var B2=function(u,d,m,S){for(var E=d.child;E!==null;){if(E.tag===5){var P=E.stateNode;m&&S&&(P=Xt(P,E.type,E.memoizedProps,E)),zt(u,P)}else if(E.tag===6)P=E.stateNode,m&&S&&(P=ft(P,E.memoizedProps,E)),zt(u,P);else if(E.tag!==4){if(E.tag===22&&E.memoizedState!==null)P=E.child,P!==null&&(P.return=E),B2(u,E,!0,!0);else if(E.child!==null){E.child.return=E,E=E.child;continue}}if(E===d)break;for(;E.sibling===null;){if(E.return===null||E.return===d)return;E=E.return}E.sibling.return=E.return,E=E.sibling}};Hd=function(u,d){var m=d.stateNode;if(!F2(u,d)){u=m.containerInfo;var S=ht(u);B2(S,d,!1,!1),m.pendingChildren=S,ho(d),Et(u,S)}},xp=function(u,d,m,S,E){var P=u.stateNode,I=u.memoizedProps;if((u=F2(u,d))&&I===S)d.stateNode=P;else{var J=d.stateNode,oe=uo(us.current),Pe=null;I!==S&&(Pe=ke(J,m,I,S,E,oe)),u&&Pe===null?d.stateNode=P:(P=Nt(P,Pe,m,I,S,d,u,J),ue(P,m,S,E,oe)&&ho(d),d.stateNode=P,u?ho(d):Wd(P,d,!1,!1))}},_p=function(u,d,m,S){m!==S?(u=uo(zu.current),m=uo(us.current),d.stateNode=he(S,u,m,d),ho(d)):d.stateNode=u.stateNode}}else Hd=function(){},xp=function(){},_p=function(){};function Gd(u,d){if(!an)switch(u.tailMode){case"hidden":d=u.tail;for(var m=null;d!==null;)d.alternate!==null&&(m=d),d=d.sibling;m===null?u.tail=null:m.sibling=null;break;case"collapsed":m=u.tail;for(var S=null;m!==null;)m.alternate!==null&&(S=m),m=m.sibling;S===null?d||u.tail===null?u.tail=null:u.tail.sibling=null:S.sibling=null}}function Qr(u){var d=u.alternate!==null&&u.alternate.child===u.child,m=0,S=0;if(d)for(var E=u.child;E!==null;)m|=E.lanes|E.childLanes,S|=E.subtreeFlags&14680064,S|=E.flags&14680064,E.return=u,E=E.sibling;else for(E=u.child;E!==null;)m|=E.lanes|E.childLanes,S|=E.subtreeFlags,S|=E.flags,E.return=u,E=E.sibling;return u.subtreeFlags|=S,u.childLanes=m,d}function pI(u,d,m){var S=d.pendingProps;switch(Zn(d),d.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Qr(d),null;case 1:return Cn(d.type)&&Ht(),Qr(d),null;case 3:return m=d.stateNode,Uu(),tn(on),tn(Rt),yv(),m.pendingContext&&(m.context=m.pendingContext,m.pendingContext=null),(u===null||u.child===null)&&(pn(d)?ho(d):u===null||u.memoizedState.isDehydrated&&!(d.flags&256)||(d.flags|=1024,Hn!==null&&(Jv(Hn),Hn=null))),Hd(u,d),Qr(d),null;case 5:mv(d),m=uo(zu.current);var E=d.type;if(u!==null&&d.stateNode!=null)xp(u,d,E,S,m),u.ref!==d.ref&&(d.flags|=512,d.flags|=2097152);else{if(!S){if(d.stateNode===null)throw Error(o(166));return Qr(d),null}if(u=uo(us.current),pn(d)){if(!_e)throw Error(o(175));u=qr(d.stateNode,d.type,d.memoizedProps,m,u,d,!js),d.updateQueue=u,u!==null&&ho(d)}else{var P=xe(E,S,m,u,d);Wd(P,d,!1,!1),d.stateNode=P,ue(P,E,S,m,u)&&ho(d)}d.ref!==null&&(d.flags|=512,d.flags|=2097152)}return Qr(d),null;case 6:if(u&&d.stateNode!=null)_p(u,d,u.memoizedProps,S);else{if(typeof S!="string"&&d.stateNode===null)throw Error(o(166));if(u=uo(zu.current),m=uo(us.current),pn(d)){if(!_e)throw Error(o(176));if(u=d.stateNode,m=d.memoizedProps,(S=kr(u,m,d,!js))&&(E=Qn,E!==null))switch(E.tag){case 3:so(E.stateNode.containerInfo,u,m,(E.mode&1)!==0);break;case 5:jo(E.type,E.memoizedProps,E.stateNode,u,m,(E.mode&1)!==0)}S&&ho(d)}else d.stateNode=he(S,u,m,d)}return Qr(d),null;case 13:if(tn(An),S=d.memoizedState,u===null||u.memoizedState!==null&&u.memoizedState.dehydrated!==null){if(an&&xn!==null&&d.mode&1&&!(d.flags&128))hn(),nn(),d.flags|=98560,E=!1;else if(E=pn(d),S!==null&&S.dehydrated!==null){if(u===null){if(!E)throw Error(o(318));if(!_e)throw Error(o(344));if(E=d.memoizedState,E=E!==null?E.dehydrated:null,!E)throw Error(o(317));io(E,d)}else nn(),!(d.flags&128)&&(d.memoizedState=null),d.flags|=4;Qr(d),E=!1}else Hn!==null&&(Jv(Hn),Hn=null),E=!0;if(!E)return d.flags&65536?d:null}return d.flags&128?(d.lanes=m,d):(m=S!==null,m!==(u!==null&&u.memoizedState!==null)&&m&&(d.child.flags|=8192,d.mode&1&&(u===null||An.current&1?vr===0&&(vr=3):ty())),d.updateQueue!==null&&(d.flags|=4),Qr(d),null);case 4:return Uu(),Hd(u,d),u===null&&Le(d.stateNode.containerInfo),Qr(d),null;case 10:return dv(d.type._context),Qr(d),null;case 17:return Cn(d.type)&&Ht(),Qr(d),null;case 19:if(tn(An),E=d.memoizedState,E===null)return Qr(d),null;if(S=(d.flags&128)!==0,P=E.rendering,P===null)if(S)Gd(E,!1);else{if(vr!==0||u!==null&&u.flags&128)for(u=d.child;u!==null;){if(P=dp(u),P!==null){for(d.flags|=128,Gd(E,!1),u=P.updateQueue,u!==null&&(d.updateQueue=u,d.flags|=4),d.subtreeFlags=0,u=m,m=d.child;m!==null;)S=m,E=u,S.flags&=14680066,P=S.alternate,P===null?(S.childLanes=0,S.lanes=E,S.child=null,S.subtreeFlags=0,S.memoizedProps=null,S.memoizedState=null,S.updateQueue=null,S.dependencies=null,S.stateNode=null):(S.childLanes=P.childLanes,S.lanes=P.lanes,S.child=P.child,S.subtreeFlags=0,S.deletions=null,S.memoizedProps=P.memoizedProps,S.memoizedState=P.memoizedState,S.updateQueue=P.updateQueue,S.type=P.type,E=P.dependencies,S.dependencies=E===null?null:{lanes:E.lanes,firstContext:E.firstContext}),m=m.sibling;return Yt(An,An.current&1|2),d.child}u=u.sibling}E.tail!==null&&Mn()>Kv&&(d.flags|=128,S=!0,Gd(E,!1),d.lanes=4194304)}else{if(!S)if(u=dp(P),u!==null){if(d.flags|=128,S=!0,u=u.updateQueue,u!==null&&(d.updateQueue=u,d.flags|=4),Gd(E,!0),E.tail===null&&E.tailMode==="hidden"&&!P.alternate&&!an)return Qr(d),null}else 2*Mn()-E.renderingStartTime>Kv&&m!==1073741824&&(d.flags|=128,S=!0,Gd(E,!1),d.lanes=4194304);E.isBackwards?(P.sibling=d.child,d.child=P):(u=E.last,u!==null?u.sibling=P:d.child=P,E.last=P)}return E.tail!==null?(d=E.tail,E.rendering=d,E.tail=d.sibling,E.renderingStartTime=Mn(),d.sibling=null,u=An.current,Yt(An,S?u&1|2:u&1),d):(Qr(d),null);case 22:case 23:return ey(),m=d.memoizedState!==null,u!==null&&u.memoizedState!==null!==m&&(d.flags|=8192),m&&d.mode&1?$i&1073741824&&(Qr(d),X&&d.subtreeFlags&6&&(d.flags|=8192)):Qr(d),null;case 24:return null;case 25:return null}throw Error(o(156,d.tag))}function gI(u,d){switch(Zn(d),d.tag){case 1:return Cn(d.type)&&Ht(),u=d.flags,u&65536?(d.flags=u&-65537|128,d):null;case 3:return Uu(),tn(on),tn(Rt),yv(),u=d.flags,u&65536&&!(u&128)?(d.flags=u&-65537|128,d):null;case 5:return mv(d),null;case 13:if(tn(An),u=d.memoizedState,u!==null&&u.dehydrated!==null){if(d.alternate===null)throw Error(o(340));nn()}return u=d.flags,u&65536?(d.flags=u&-65537|128,d):null;case 19:return tn(An),null;case 4:return Uu(),null;case 10:return dv(d.type._context),null;case 22:case 23:return ey(),null;case 24:return null;default:return null}}var bp=!1,Jr=!1,mI=typeof WeakSet=="function"?WeakSet:Set,Xe=null;function Wu(u,d){var m=u.ref;if(m!==null)if(typeof m=="function")try{m(null)}catch(S){kn(u,d,S)}else m.current=null}function Dv(u,d,m){try{m()}catch(S){kn(u,d,S)}}var $2=!1;function vI(u,d){for(K(u.containerInfo),Xe=d;Xe!==null;)if(u=Xe,d=u.child,(u.subtreeFlags&1028)!==0&&d!==null)d.return=u,Xe=d;else for(;Xe!==null;){u=Xe;try{var m=u.alternate;if(u.flags&1024)switch(u.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var S=m.memoizedProps,E=m.memoizedState,P=u.stateNode,I=P.getSnapshotBeforeUpdate(u.elementType===u.type?S:Os(u.type,S),E);P.__reactInternalSnapshotBeforeUpdate=I}break;case 3:X&&rt(u.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(o(163))}}catch(J){kn(u,u.return,J)}if(d=u.sibling,d!==null){d.return=u.return,Xe=d;break}Xe=u.return}return m=$2,$2=!1,m}function qd(u,d,m){var S=d.updateQueue;if(S=S!==null?S.lastEffect:null,S!==null){var E=S=S.next;do{if((E.tag&u)===u){var P=E.destroy;E.destroy=void 0,P!==void 0&&Dv(d,m,P)}E=E.next}while(E!==S)}}function Sp(u,d){if(d=d.updateQueue,d=d!==null?d.lastEffect:null,d!==null){var m=d=d.next;do{if((m.tag&u)===u){var S=m.create;m.destroy=S()}m=m.next}while(m!==d)}}function Fv(u){var d=u.ref;if(d!==null){var m=u.stateNode;switch(u.tag){case 5:u=G(m);break;default:u=m}typeof d=="function"?d(u):d.current=u}}function z2(u){var d=u.alternate;d!==null&&(u.alternate=null,z2(d)),u.child=null,u.deletions=null,u.sibling=null,u.tag===5&&(d=u.stateNode,d!==null&&ve(d)),u.stateNode=null,u.return=null,u.dependencies=null,u.memoizedProps=null,u.memoizedState=null,u.pendingProps=null,u.stateNode=null,u.updateQueue=null}function U2(u){return u.tag===5||u.tag===3||u.tag===4}function V2(u){e:for(;;){for(;u.sibling===null;){if(u.return===null||U2(u.return))return null;u=u.return}for(u.sibling.return=u.return,u=u.sibling;u.tag!==5&&u.tag!==6&&u.tag!==18;){if(u.flags&2||u.child===null||u.tag===4)continue e;u.child.return=u,u=u.child}if(!(u.flags&2))return u.stateNode}}function Bv(u,d,m){var S=u.tag;if(S===5||S===6)u=u.stateNode,d?pe(m,u,d):wt(m,u);else if(S!==4&&(u=u.child,u!==null))for(Bv(u,d,m),u=u.sibling;u!==null;)Bv(u,d,m),u=u.sibling}function $v(u,d,m){var S=u.tag;if(S===5||S===6)u=u.stateNode,d?Te(m,u,d):st(m,u);else if(S!==4&&(u=u.child,u!==null))for($v(u,d,m),u=u.sibling;u!==null;)$v(u,d,m),u=u.sibling}var Fr=null,Ds=!1;function fo(u,d,m){for(m=m.child;m!==null;)zv(u,d,m),m=m.sibling}function zv(u,d,m){if(sr&&typeof sr.onCommitFiberUnmount=="function")try{sr.onCommitFiberUnmount(Pa,m)}catch{}switch(m.tag){case 5:Jr||Wu(m,d);case 6:if(X){var S=Fr,E=Ds;Fr=null,fo(u,d,m),Fr=S,Ds=E,Fr!==null&&(Ds?gt(Fr,m.stateNode):be(Fr,m.stateNode))}else fo(u,d,m);break;case 18:X&&Fr!==null&&(Ds?Xn(Fr,m.stateNode):ui(Fr,m.stateNode));break;case 4:X?(S=Fr,E=Ds,Fr=m.stateNode.containerInfo,Ds=!0,fo(u,d,m),Fr=S,Ds=E):(ye&&(S=m.stateNode.containerInfo,E=ht(S),ut(S,E)),fo(u,d,m));break;case 0:case 11:case 14:case 15:if(!Jr&&(S=m.updateQueue,S!==null&&(S=S.lastEffect,S!==null))){E=S=S.next;do{var P=E,I=P.destroy;P=P.tag,I!==void 0&&(P&2||P&4)&&Dv(m,d,I),E=E.next}while(E!==S)}fo(u,d,m);break;case 1:if(!Jr&&(Wu(m,d),S=m.stateNode,typeof S.componentWillUnmount=="function"))try{S.props=m.memoizedProps,S.state=m.memoizedState,S.componentWillUnmount()}catch(J){kn(m,d,J)}fo(u,d,m);break;case 21:fo(u,d,m);break;case 22:m.mode&1?(Jr=(S=Jr)||m.memoizedState!==null,fo(u,d,m),Jr=S):fo(u,d,m);break;default:fo(u,d,m)}}function W2(u){var d=u.updateQueue;if(d!==null){u.updateQueue=null;var m=u.stateNode;m===null&&(m=u.stateNode=new mI),d.forEach(function(S){var E=EI.bind(null,u,S);m.has(S)||(m.add(S),S.then(E,E))})}}function Fs(u,d){var m=d.deletions;if(m!==null)for(var S=0;S<m.length;S++){var E=m[S];try{var P=u,I=d;if(X){var J=I;e:for(;J!==null;){switch(J.tag){case 5:Fr=J.stateNode,Ds=!1;break e;case 3:Fr=J.stateNode.containerInfo,Ds=!0;break e;case 4:Fr=J.stateNode.containerInfo,Ds=!0;break e}J=J.return}if(Fr===null)throw Error(o(160));zv(P,I,E),Fr=null,Ds=!1}else zv(P,I,E);var oe=E.alternate;oe!==null&&(oe.return=null),E.return=null}catch(Pe){kn(E,d,Pe)}}if(d.subtreeFlags&12854)for(d=d.child;d!==null;)H2(d,u),d=d.sibling}function H2(u,d){var m=u.alternate,S=u.flags;switch(u.tag){case 0:case 11:case 14:case 15:if(Fs(d,u),po(u),S&4){try{qd(3,u,u.return),Sp(3,u)}catch(We){kn(u,u.return,We)}try{qd(5,u,u.return)}catch(We){kn(u,u.return,We)}}break;case 1:Fs(d,u),po(u),S&512&&m!==null&&Wu(m,m.return);break;case 5:if(Fs(d,u),po(u),S&512&&m!==null&&Wu(m,m.return),X){if(u.flags&32){var E=u.stateNode;try{nt(E)}catch(We){kn(u,u.return,We)}}if(S&4&&(E=u.stateNode,E!=null)){var P=u.memoizedProps;if(m=m!==null?m.memoizedProps:P,S=u.type,d=u.updateQueue,u.updateQueue=null,d!==null)try{Re(E,d,S,m,P,u)}catch(We){kn(u,u.return,We)}}}break;case 6:if(Fs(d,u),po(u),S&4&&X){if(u.stateNode===null)throw Error(o(162));E=u.stateNode,P=u.memoizedProps,m=m!==null?m.memoizedProps:P;try{At(E,m,P)}catch(We){kn(u,u.return,We)}}break;case 3:if(Fs(d,u),po(u),S&4){if(X&&_e&&m!==null&&m.memoizedState.isDehydrated)try{Ir(d.containerInfo)}catch(We){kn(u,u.return,We)}if(ye){E=d.containerInfo,P=d.pendingChildren;try{ut(E,P)}catch(We){kn(u,u.return,We)}}}break;case 4:if(Fs(d,u),po(u),S&4&&ye){P=u.stateNode,E=P.containerInfo,P=P.pendingChildren;try{ut(E,P)}catch(We){kn(u,u.return,We)}}break;case 13:Fs(d,u),po(u),E=u.child,E.flags&8192&&(P=E.memoizedState!==null,E.stateNode.isHidden=P,!P||E.alternate!==null&&E.alternate.memoizedState!==null||(Yv=Mn())),S&4&&W2(u);break;case 22:var I=m!==null&&m.memoizedState!==null;if(u.mode&1?(Jr=(m=Jr)||I,Fs(d,u),Jr=m):Fs(d,u),po(u),S&8192){if(m=u.memoizedState!==null,(u.stateNode.isHidden=m)&&!I&&u.mode&1)for(Xe=u,S=u.child;S!==null;){for(d=Xe=S;Xe!==null;){I=Xe;var J=I.child;switch(I.tag){case 0:case 11:case 14:case 15:qd(4,I,I.return);break;case 1:Wu(I,I.return);var oe=I.stateNode;if(typeof oe.componentWillUnmount=="function"){var Pe=I,Qe=I.return;try{var Tt=Pe;oe.props=Tt.memoizedProps,oe.state=Tt.memoizedState,oe.componentWillUnmount()}catch(We){kn(Pe,Qe,We)}}break;case 5:Wu(I,I.return);break;case 22:if(I.memoizedState!==null){Y2(d);continue}}J!==null?(J.return=I,Xe=J):Y2(d)}S=S.sibling}if(X){e:if(S=null,X)for(d=u;;){if(d.tag===5){if(S===null){S=d;try{E=d.stateNode,m?lt(E):xt(d.stateNode,d.memoizedProps)}catch(We){kn(u,u.return,We)}}}else if(d.tag===6){if(S===null)try{P=d.stateNode,m?Ke(P):Lt(P,d.memoizedProps)}catch(We){kn(u,u.return,We)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===u)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===u)break e;for(;d.sibling===null;){if(d.return===null||d.return===u)break e;S===d&&(S=null),d=d.return}S===d&&(S=null),d.sibling.return=d.return,d=d.sibling}}}break;case 19:Fs(d,u),po(u),S&4&&W2(u);break;case 21:break;default:Fs(d,u),po(u)}}function po(u){var d=u.flags;if(d&2){try{if(X){e:{for(var m=u.return;m!==null;){if(U2(m)){var S=m;break e}m=m.return}throw Error(o(160))}switch(S.tag){case 5:var E=S.stateNode;S.flags&32&&(nt(E),S.flags&=-33);var P=V2(u);$v(u,P,E);break;case 3:case 4:var I=S.stateNode.containerInfo,J=V2(u);Bv(u,J,I);break;default:throw Error(o(161))}}}catch(oe){kn(u,u.return,oe)}u.flags&=-3}d&4096&&(u.flags&=-4097)}function yI(u,d,m){Xe=u,G2(u)}function G2(u,d,m){for(var S=(u.mode&1)!==0;Xe!==null;){var E=Xe,P=E.child;if(E.tag===22&&S){var I=E.memoizedState!==null||bp;if(!I){var J=E.alternate,oe=J!==null&&J.memoizedState!==null||Jr;J=bp;var Pe=Jr;if(bp=I,(Jr=oe)&&!Pe)for(Xe=E;Xe!==null;)I=Xe,oe=I.child,I.tag===22&&I.memoizedState!==null?K2(E):oe!==null?(oe.return=I,Xe=oe):K2(E);for(;P!==null;)Xe=P,G2(P),P=P.sibling;Xe=E,bp=J,Jr=Pe}q2(u)}else E.subtreeFlags&8772&&P!==null?(P.return=E,Xe=P):q2(u)}}function q2(u){for(;Xe!==null;){var d=Xe;if(d.flags&8772){var m=d.alternate;try{if(d.flags&8772)switch(d.tag){case 0:case 11:case 15:Jr||Sp(5,d);break;case 1:var S=d.stateNode;if(d.flags&4&&!Jr)if(m===null)S.componentDidMount();else{var E=d.elementType===d.type?m.memoizedProps:Os(d.type,m.memoizedProps);S.componentDidUpdate(E,m.memoizedState,S.__reactInternalSnapshotBeforeUpdate)}var P=d.updateQueue;P!==null&&XS(d,P,S);break;case 3:var I=d.updateQueue;if(I!==null){if(m=null,d.child!==null)switch(d.child.tag){case 5:m=G(d.child.stateNode);break;case 1:m=d.child.stateNode}XS(d,I,m)}break;case 5:var J=d.stateNode;m===null&&d.flags&4&&Ye(J,d.type,d.memoizedProps,d);break;case 6:break;case 4:break;case 12:break;case 13:if(_e&&d.memoizedState===null){var oe=d.alternate;if(oe!==null){var Pe=oe.memoizedState;if(Pe!==null){var Qe=Pe.dehydrated;Qe!==null&&fr(Qe)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(o(163))}Jr||d.flags&512&&Fv(d)}catch(Tt){kn(d,d.return,Tt)}}if(d===u){Xe=null;break}if(m=d.sibling,m!==null){m.return=d.return,Xe=m;break}Xe=d.return}}function Y2(u){for(;Xe!==null;){var d=Xe;if(d===u){Xe=null;break}var m=d.sibling;if(m!==null){m.return=d.return,Xe=m;break}Xe=d.return}}function K2(u){for(;Xe!==null;){var d=Xe;try{switch(d.tag){case 0:case 11:case 15:var m=d.return;try{Sp(4,d)}catch(oe){kn(d,m,oe)}break;case 1:var S=d.stateNode;if(typeof S.componentDidMount=="function"){var E=d.return;try{S.componentDidMount()}catch(oe){kn(d,E,oe)}}var P=d.return;try{Fv(d)}catch(oe){kn(d,P,oe)}break;case 5:var I=d.return;try{Fv(d)}catch(oe){kn(d,I,oe)}}}catch(oe){kn(d,d.return,oe)}if(d===u){Xe=null;break}var J=d.sibling;if(J!==null){J.return=d.return,Xe=J;break}Xe=d.return}}var Cp=0,kp=1,Ep=2,Rp=3,Tp=4;if(typeof Symbol=="function"&&Symbol.for){var Yd=Symbol.for;Cp=Yd("selector.component"),kp=Yd("selector.has_pseudo_class"),Ep=Yd("selector.role"),Rp=Yd("selector.test_id"),Tp=Yd("selector.text")}function Uv(u){var d=at(u);if(d!=null){if(typeof d.memoizedProps["data-testname"]!="string")throw Error(o(364));return d}if(u=Ie(u),u===null)throw Error(o(362));return u.stateNode.current}function Vv(u,d){switch(d.$$typeof){case Cp:if(u.type===d.value)return!0;break;case kp:e:{d=d.value,u=[u,0];for(var m=0;m<u.length;){var S=u[m++],E=u[m++],P=d[E];if(S.tag!==5||!Oe(S)){for(;P!=null&&Vv(S,P);)E++,P=d[E];if(E===d.length){d=!0;break e}else for(S=S.child;S!==null;)u.push(S,E),S=S.sibling}}d=!1}return d;case Ep:if(u.tag===5&&Ne(u.stateNode,d.value))return!0;break;case Tp:if((u.tag===5||u.tag===6)&&(u=Ce(u),u!==null&&0<=u.indexOf(d.value)))return!0;break;case Rp:if(u.tag===5&&(u=u.memoizedProps["data-testname"],typeof u=="string"&&u.toLowerCase()===d.value.toLowerCase()))return!0;break;default:throw Error(o(365))}return!1}function Wv(u){switch(u.$$typeof){case Cp:return"<"+(M(u.value)||"Unknown")+">";case kp:return":has("+(Wv(u)||"")+")";case Ep:return'[role="'+u.value+'"]';case Tp:return'"'+u.value+'"';case Rp:return'[data-testname="'+u.value+'"]';default:throw Error(o(365))}}function X2(u,d){var m=[];u=[u,0];for(var S=0;S<u.length;){var E=u[S++],P=u[S++],I=d[P];if(E.tag!==5||!Oe(E)){for(;I!=null&&Vv(E,I);)P++,I=d[P];if(P===d.length)m.push(E);else for(E=E.child;E!==null;)u.push(E,P),E=E.sibling}}return m}function Hv(u,d){if(!Ue)throw Error(o(363));u=Uv(u),u=X2(u,d),d=[],u=Array.from(u);for(var m=0;m<u.length;){var S=u[m++];if(S.tag===5)Oe(S)||d.push(S.stateNode);else for(S=S.child;S!==null;)u.push(S),S=S.sibling}return d}var wI=Math.ceil,Pp=a.ReactCurrentDispatcher,Gv=a.ReactCurrentOwner,er=a.ReactCurrentBatchConfig,It=0,Tr=null,ar=null,Br=0,$i=0,Hu=ci(0),vr=0,Kd=null,Ul=0,Lp=0,qv=0,Xd=null,Ei=null,Yv=0,Kv=1/0,Go=null;function Gu(){Kv=Mn()+500}var Mp=!1,Xv=null,ja=null,Ap=!1,Ia=null,Np=0,Zd=0,Zv=null,jp=-1,Ip=0;function ei(){return It&6?Mn():jp!==-1?jp:jp=Mn()}function Oa(u){return u.mode&1?It&2&&Br!==0?Br&-Br:ao.transition!==null?(Ip===0&&(Ip=Ca()),Ip):(u=Vt,u!==0?u:fe()):1}function ds(u,d,m,S){if(50<Zd)throw Zd=0,Zv=null,Error(o(185));Oo(u,m,S),(!(It&2)||u!==Tr)&&(u===Tr&&(!(It&2)&&(Lp|=m),vr===4&&Da(u,Br)),Ri(u,S),m===1&&It===0&&!(d.mode&1)&&(Gu(),Fo&&Q()))}function Ri(u,d){var m=u.callbackNode;ba(u,d);var S=ss(u,u===Tr?Br:0);if(S===0)m!==null&&Ea(m),u.callbackNode=null,u.callbackPriority=0;else if(d=S&-S,u.callbackPriority!==d){if(m!=null&&Ea(m),d===1)u.tag===0?H(Q2.bind(null,u)):F(Q2.bind(null,u)),Ae?De(function(){!(It&6)&&Q()}):ka(Ra,Q),m=null;else{switch(Ou(S)){case 1:m=Ra;break;case 4:m=Du;break;case 16:m=Ta;break;case 536870912:m=as;break;default:m=Ta}m=aC(m,Z2.bind(null,u))}u.callbackPriority=d,u.callbackNode=m}}function Z2(u,d){if(jp=-1,Ip=0,It&6)throw Error(o(327));var m=u.callbackNode;if(Hl()&&u.callbackNode!==m)return null;var S=ss(u,u===Tr?Br:0);if(S===0)return null;if(S&30||S&u.expiredLanes||d)d=Op(u,S);else{d=S;var E=It;It|=2;var P=tC();(Tr!==u||Br!==d)&&(Go=null,Gu(),Vl(u,d));do try{bI();break}catch(J){eC(u,J)}while(1);cv(),Pp.current=P,It=E,ar!==null?d=0:(Tr=null,Br=0,d=vr)}if(d!==0){if(d===2&&(E=Sa(u),E!==0&&(S=E,d=Qv(u,E))),d===1)throw m=Kd,Vl(u,0),Da(u,S),Ri(u,Mn()),m;if(d===6)Da(u,S);else{if(E=u.current.alternate,!(S&30)&&!xI(E)&&(d=Op(u,S),d===2&&(P=Sa(u),P!==0&&(S=P,d=Qv(u,P))),d===1))throw m=Kd,Vl(u,0),Da(u,S),Ri(u,Mn()),m;switch(u.finishedWork=E,u.finishedLanes=S,d){case 0:case 1:throw Error(o(345));case 2:Wl(u,Ei,Go);break;case 3:if(Da(u,S),(S&130023424)===S&&(d=Yv+500-Mn(),10<d)){if(ss(u,0)!==0)break;if(E=u.suspendedLanes,(E&S)!==S){ei(),u.pingedLanes|=u.suspendedLanes&E;break}u.timeoutHandle=ge(Wl.bind(null,u,Ei,Go),d);break}Wl(u,Ei,Go);break;case 4:if(Da(u,S),(S&4194240)===S)break;for(d=u.eventTimes,E=-1;0<S;){var I=31-pr(S);P=1<<I,I=d[I],I>E&&(E=I),S&=~P}if(S=E,S=Mn()-S,S=(120>S?120:480>S?480:1080>S?1080:1920>S?1920:3e3>S?3e3:4320>S?4320:1960*wI(S/1960))-S,10<S){u.timeoutHandle=ge(Wl.bind(null,u,Ei,Go),S);break}Wl(u,Ei,Go);break;case 5:Wl(u,Ei,Go);break;default:throw Error(o(329))}}}return Ri(u,Mn()),u.callbackNode===m?Z2.bind(null,u):null}function Qv(u,d){var m=Xd;return u.current.memoizedState.isDehydrated&&(Vl(u,d).flags|=256),u=Op(u,d),u!==2&&(d=Ei,Ei=m,d!==null&&Jv(d)),u}function Jv(u){Ei===null?Ei=u:Ei.push.apply(Ei,u)}function xI(u){for(var d=u;;){if(d.flags&16384){var m=d.updateQueue;if(m!==null&&(m=m.stores,m!==null))for(var S=0;S<m.length;S++){var E=m[S],P=E.getSnapshot;E=E.value;try{if(!gr(P(),E))return!1}catch{return!1}}}if(m=d.child,d.subtreeFlags&16384&&m!==null)m.return=d,d=m;else{if(d===u)break;for(;d.sibling===null;){if(d.return===null||d.return===u)return!0;d=d.return}d.sibling.return=d.return,d=d.sibling}}return!0}function Da(u,d){for(d&=~qv,d&=~Lp,u.suspendedLanes|=d,u.pingedLanes&=~d,u=u.expirationTimes;0<d;){var m=31-pr(d),S=1<<m;u[m]=-1,d&=~S}}function Q2(u){if(It&6)throw Error(o(327));Hl();var d=ss(u,0);if(!(d&1))return Ri(u,Mn()),null;var m=Op(u,d);if(u.tag!==0&&m===2){var S=Sa(u);S!==0&&(d=S,m=Qv(u,S))}if(m===1)throw m=Kd,Vl(u,0),Da(u,d),Ri(u,Mn()),m;if(m===6)throw Error(o(345));return u.finishedWork=u.current.alternate,u.finishedLanes=d,Wl(u,Ei,Go),Ri(u,Mn()),null}function J2(u){Ia!==null&&Ia.tag===0&&!(It&6)&&Hl();var d=It;It|=1;var m=er.transition,S=Vt;try{if(er.transition=null,Vt=1,u)return u()}finally{Vt=S,er.transition=m,It=d,!(It&6)&&Q()}}function ey(){$i=Hu.current,tn(Hu)}function Vl(u,d){u.finishedWork=null,u.finishedLanes=0;var m=u.timeoutHandle;if(m!==ae&&(u.timeoutHandle=ae,we(m)),ar!==null)for(m=ar.return;m!==null;){var S=m;switch(Zn(S),S.tag){case 1:S=S.type.childContextTypes,S!=null&&Ht();break;case 3:Uu(),tn(on),tn(Rt),yv();break;case 5:mv(S);break;case 4:Uu();break;case 13:tn(An);break;case 19:tn(An);break;case 10:dv(S.type._context);break;case 22:case 23:ey()}m=m.return}if(Tr=u,ar=u=Fa(u.current,null),Br=$i=d,vr=0,Kd=null,qv=Lp=Ul=0,Ei=Xd=null,$l!==null){for(d=0;d<$l.length;d++)if(m=$l[d],S=m.interleaved,S!==null){m.interleaved=null;var E=S.next,P=m.pending;if(P!==null){var I=P.next;P.next=E,S.next=I}m.pending=S}$l=null}return u}function eC(u,d){do{var m=ar;try{if(cv(),hp.current=mp,fp){for(var S=Nn.memoizedState;S!==null;){var E=S.queue;E!==null&&(E.pending=null),S=S.next}fp=!1}if(zl=0,Rr=mr=Nn=null,$d=!1,zd=0,Gv.current=null,m===null||m.return===null){vr=1,Kd=d,ar=null;break}e:{var P=u,I=m.return,J=m,oe=d;if(d=Br,J.flags|=32768,oe!==null&&typeof oe=="object"&&typeof oe.then=="function"){var Pe=oe,Qe=J,Tt=Qe.tag;if(!(Qe.mode&1)&&(Tt===0||Tt===11||Tt===15)){var We=Qe.alternate;We?(Qe.updateQueue=We.updateQueue,Qe.memoizedState=We.memoizedState,Qe.lanes=We.lanes):(Qe.updateQueue=null,Qe.memoizedState=null)}var _n=k2(I);if(_n!==null){_n.flags&=-257,E2(_n,I,J,P,d),_n.mode&1&&C2(P,Pe,d),d=_n,oe=Pe;var gn=d.updateQueue;if(gn===null){var Ti=new Set;Ti.add(oe),d.updateQueue=Ti}else gn.add(oe);break e}else{if(!(d&1)){C2(P,Pe,d),ty();break e}oe=Error(o(426))}}else if(an&&J.mode&1){var qo=k2(I);if(qo!==null){!(qo.flags&65536)&&(qo.flags|=256),E2(qo,I,J,P,d),or(Vu(oe,J));break e}}P=oe=Vu(oe,J),vr!==4&&(vr=2),Xd===null?Xd=[P]:Xd.push(P),P=I;do{switch(P.tag){case 3:P.flags|=65536,d&=-d,P.lanes|=d;var se=b2(P,oe,d);KS(P,se);break e;case 1:J=oe;var ee=P.type,ce=P.stateNode;if(!(P.flags&128)&&(typeof ee.getDerivedStateFromError=="function"||ce!==null&&typeof ce.componentDidCatch=="function"&&(ja===null||!ja.has(ce)))){P.flags|=65536,d&=-d,P.lanes|=d;var He=S2(P,J,d);KS(P,He);break e}}P=P.return}while(P!==null)}rC(m)}catch(ct){d=ct,ar===m&&m!==null&&(ar=m=m.return);continue}break}while(1)}function tC(){var u=Pp.current;return Pp.current=mp,u===null?mp:u}function ty(){(vr===0||vr===3||vr===2)&&(vr=4),Tr===null||!(Ul&268435455)&&!(Lp&268435455)||Da(Tr,Br)}function Op(u,d){var m=It;It|=2;var S=tC();(Tr!==u||Br!==d)&&(Go=null,Vl(u,d));do try{_I();break}catch(E){eC(u,E)}while(1);if(cv(),It=m,Pp.current=S,ar!==null)throw Error(o(261));return Tr=null,Br=0,vr}function _I(){for(;ar!==null;)nC(ar)}function bI(){for(;ar!==null&&!jd();)nC(ar)}function nC(u){var d=oC(u.alternate,u,$i);u.memoizedProps=u.pendingProps,d===null?rC(u):ar=d,Gv.current=null}function rC(u){var d=u;do{var m=d.alternate;if(u=d.return,d.flags&32768){if(m=gI(m,d),m!==null){m.flags&=32767,ar=m;return}if(u!==null)u.flags|=32768,u.subtreeFlags=0,u.deletions=null;else{vr=6,ar=null;return}}else if(m=pI(m,d,$i),m!==null){ar=m;return}if(d=d.sibling,d!==null){ar=d;return}ar=d=u}while(d!==null);vr===0&&(vr=5)}function Wl(u,d,m){var S=Vt,E=er.transition;try{er.transition=null,Vt=1,SI(u,d,m,S)}finally{er.transition=E,Vt=S}return null}function SI(u,d,m,S){do Hl();while(Ia!==null);if(It&6)throw Error(o(327));m=u.finishedWork;var E=u.finishedLanes;if(m===null)return null;if(u.finishedWork=null,u.finishedLanes=0,m===u.current)throw Error(o(177));u.callbackNode=null,u.callbackPriority=0;var P=m.lanes|m.childLanes;if(Nd(u,P),u===Tr&&(ar=Tr=null,Br=0),!(m.subtreeFlags&2064)&&!(m.flags&2064)||Ap||(Ap=!0,aC(Ta,function(){return Hl(),null})),P=(m.flags&15990)!==0,m.subtreeFlags&15990||P){P=er.transition,er.transition=null;var I=Vt;Vt=1;var J=It;It|=4,Gv.current=null,vI(u,m),H2(m,u),Y(u.containerInfo),u.current=m,yI(m),Id(),It=J,Vt=I,er.transition=P}else u.current=m;if(Ap&&(Ap=!1,Ia=u,Np=E),P=u.pendingLanes,P===0&&(ja=null),Fu(m.stateNode),Ri(u,Mn()),d!==null)for(S=u.onRecoverableError,m=0;m<d.length;m++)E=d[m],S(E.value,{componentStack:E.stack,digest:E.digest});if(Mp)throw Mp=!1,u=Xv,Xv=null,u;return Np&1&&u.tag!==0&&Hl(),P=u.pendingLanes,P&1?u===Zv?Zd++:(Zd=0,Zv=u):Zd=0,Q(),null}function Hl(){if(Ia!==null){var u=Ou(Np),d=er.transition,m=Vt;try{if(er.transition=null,Vt=16>u?16:u,Ia===null)var S=!1;else{if(u=Ia,Ia=null,Np=0,It&6)throw Error(o(331));var E=It;for(It|=4,Xe=u.current;Xe!==null;){var P=Xe,I=P.child;if(Xe.flags&16){var J=P.deletions;if(J!==null){for(var oe=0;oe<J.length;oe++){var Pe=J[oe];for(Xe=Pe;Xe!==null;){var Qe=Xe;switch(Qe.tag){case 0:case 11:case 15:qd(8,Qe,P)}var Tt=Qe.child;if(Tt!==null)Tt.return=Qe,Xe=Tt;else for(;Xe!==null;){Qe=Xe;var We=Qe.sibling,_n=Qe.return;if(z2(Qe),Qe===Pe){Xe=null;break}if(We!==null){We.return=_n,Xe=We;break}Xe=_n}}}var gn=P.alternate;if(gn!==null){var Ti=gn.child;if(Ti!==null){gn.child=null;do{var qo=Ti.sibling;Ti.sibling=null,Ti=qo}while(Ti!==null)}}Xe=P}}if(P.subtreeFlags&2064&&I!==null)I.return=P,Xe=I;else e:for(;Xe!==null;){if(P=Xe,P.flags&2048)switch(P.tag){case 0:case 11:case 15:qd(9,P,P.return)}var se=P.sibling;if(se!==null){se.return=P.return,Xe=se;break e}Xe=P.return}}var ee=u.current;for(Xe=ee;Xe!==null;){I=Xe;var ce=I.child;if(I.subtreeFlags&2064&&ce!==null)ce.return=I,Xe=ce;else e:for(I=ee;Xe!==null;){if(J=Xe,J.flags&2048)try{switch(J.tag){case 0:case 11:case 15:Sp(9,J)}}catch(ct){kn(J,J.return,ct)}if(J===I){Xe=null;break e}var He=J.sibling;if(He!==null){He.return=J.return,Xe=He;break e}Xe=J.return}}if(It=E,Q(),sr&&typeof sr.onPostCommitFiberRoot=="function")try{sr.onPostCommitFiberRoot(Pa,u)}catch{}S=!0}return S}finally{Vt=m,er.transition=d}}return!1}function iC(u,d,m){d=Vu(m,d),d=b2(u,d,1),u=Na(u,d,1),d=ei(),u!==null&&(Oo(u,1,d),Ri(u,d))}function kn(u,d,m){if(u.tag===3)iC(u,u,m);else for(;d!==null;){if(d.tag===3){iC(d,u,m);break}else if(d.tag===1){var S=d.stateNode;if(typeof d.type.getDerivedStateFromError=="function"||typeof S.componentDidCatch=="function"&&(ja===null||!ja.has(S))){u=Vu(m,u),u=S2(d,u,1),d=Na(d,u,1),u=ei(),d!==null&&(Oo(d,1,u),Ri(d,u));break}}d=d.return}}function CI(u,d,m){var S=u.pingCache;S!==null&&S.delete(d),d=ei(),u.pingedLanes|=u.suspendedLanes&m,Tr===u&&(Br&m)===m&&(vr===4||vr===3&&(Br&130023424)===Br&&500>Mn()-Yv?Vl(u,0):qv|=m),Ri(u,d)}function sC(u,d){d===0&&(u.mode&1?(d=Ci,Ci<<=1,!(Ci&130023424)&&(Ci=4194304)):d=1);var m=ei();u=lo(u,d),u!==null&&(Oo(u,d,m),Ri(u,m))}function kI(u){var d=u.memoizedState,m=0;d!==null&&(m=d.retryLane),sC(u,m)}function EI(u,d){var m=0;switch(u.tag){case 13:var S=u.stateNode,E=u.memoizedState;E!==null&&(m=E.retryLane);break;case 19:S=u.stateNode;break;default:throw Error(o(314))}S!==null&&S.delete(d),sC(u,m)}var oC;oC=function(u,d,m){if(u!==null)if(u.memoizedProps!==d.pendingProps||on.current)ki=!0;else{if(!(u.lanes&m)&&!(d.flags&128))return ki=!1,fI(u,d,m);ki=!!(u.flags&131072)}else ki=!1,an&&d.flags&1048576&&Wt(d,ie,d.index);switch(d.lanes=0,d.tag){case 2:var S=d.type;wp(u,d),u=d.pendingProps;var E=Vn(d,Rt.current);$u(d,m),E=_v(null,d,S,u,E,m);var P=bv();return d.flags|=1,typeof E=="object"&&E!==null&&typeof E.render=="function"&&E.$$typeof===void 0?(d.tag=1,d.memoizedState=null,d.updateQueue=null,Cn(S)?(P=!0,Si(d)):P=!1,d.memoizedState=E.state!==null&&E.state!==void 0?E.state:null,pv(d),E.updater=vp,d.stateNode=E,E._reactInternals=d,Tv(d,S,u,m),d=Av(null,d,S,!0,P,m)):(d.tag=0,an&&P&&Wn(d),fi(null,d,E,m),d=d.child),d;case 16:S=d.elementType;e:{switch(wp(u,d),u=d.pendingProps,E=S._init,S=E(S._payload),d.type=S,E=d.tag=TI(S),u=Os(S,u),E){case 0:d=Mv(null,d,S,u,m);break e;case 1:d=A2(null,d,S,u,m);break e;case 11:d=R2(null,d,S,u,m);break e;case 14:d=T2(null,d,S,Os(S.type,u),m);break e}throw Error(o(306,S,""))}return d;case 0:return S=d.type,E=d.pendingProps,E=d.elementType===S?E:Os(S,E),Mv(u,d,S,E,m);case 1:return S=d.type,E=d.pendingProps,E=d.elementType===S?E:Os(S,E),A2(u,d,S,E,m);case 3:e:{if(N2(d),u===null)throw Error(o(387));S=d.pendingProps,P=d.memoizedState,E=P.element,YS(u,d),cp(d,S,null,m);var I=d.memoizedState;if(S=I.element,_e&&P.isDehydrated)if(P={element:S,isDehydrated:!1,cache:I.cache,pendingSuspenseBoundaries:I.pendingSuspenseBoundaries,transitions:I.transitions},d.updateQueue.baseState=P,d.memoizedState=P,d.flags&256){E=Vu(Error(o(423)),d),d=j2(u,d,S,m,E);break e}else if(S!==E){E=Vu(Error(o(424)),d),d=j2(u,d,S,m,E);break e}else for(_e&&(xn=zn(d.stateNode.containerInfo),Qn=d,an=!0,Hn=null,js=!1),m=Dd(d,null,S,m),d.child=m;m;)m.flags=m.flags&-3|4096,m=m.sibling;else{if(nn(),S===E){d=Ho(u,d,m);break e}fi(u,d,S,m)}d=d.child}return d;case 5:return ZS(d),u===null&&Fl(d),S=d.type,E=d.pendingProps,P=u!==null?u.memoizedProps:null,I=E.children,qe(S,E)?I=null:P!==null&&qe(S,P)&&(d.flags|=32),M2(u,d),fi(u,d,I,m),d.child;case 6:return u===null&&Fl(d),null;case 13:return I2(u,d,m);case 4:return gv(d,d.stateNode.containerInfo),S=d.pendingProps,u===null?d.child=Vo(d,null,S,m):fi(u,d,S,m),d.child;case 11:return S=d.type,E=d.pendingProps,E=d.elementType===S?E:Os(S,E),R2(u,d,S,E,m);case 7:return fi(u,d,d.pendingProps,m),d.child;case 8:return fi(u,d,d.pendingProps.children,m),d.child;case 12:return fi(u,d,d.pendingProps.children,m),d.child;case 10:e:{if(S=d.type._context,E=d.pendingProps,P=d.memoizedProps,I=E.value,GS(d,S,I),P!==null)if(gr(P.value,I)){if(P.children===E.children&&!on.current){d=Ho(u,d,m);break e}}else for(P=d.child,P!==null&&(P.return=d);P!==null;){var J=P.dependencies;if(J!==null){I=P.child;for(var oe=J.firstContext;oe!==null;){if(oe.context===S){if(P.tag===1){oe=Wo(-1,m&-m),oe.tag=2;var Pe=P.updateQueue;if(Pe!==null){Pe=Pe.shared;var Qe=Pe.pending;Qe===null?oe.next=oe:(oe.next=Qe.next,Qe.next=oe),Pe.pending=oe}}P.lanes|=m,oe=P.alternate,oe!==null&&(oe.lanes|=m),hv(P.return,m,d),J.lanes|=m;break}oe=oe.next}}else if(P.tag===10)I=P.type===d.type?null:P.child;else if(P.tag===18){if(I=P.return,I===null)throw Error(o(341));I.lanes|=m,J=I.alternate,J!==null&&(J.lanes|=m),hv(I,m,d),I=P.sibling}else I=P.child;if(I!==null)I.return=P;else for(I=P;I!==null;){if(I===d){I=null;break}if(P=I.sibling,P!==null){P.return=I.return,I=P;break}I=I.return}P=I}fi(u,d,E.children,m),d=d.child}return d;case 9:return E=d.type,S=d.pendingProps.children,$u(d,m),E=ls(E),S=S(E),d.flags|=1,fi(u,d,S,m),d.child;case 14:return S=d.type,E=Os(S,d.pendingProps),E=Os(S.type,E),T2(u,d,S,E,m);case 15:return P2(u,d,d.type,d.pendingProps,m);case 17:return S=d.type,E=d.pendingProps,E=d.elementType===S?E:Os(S,E),wp(u,d),d.tag=1,Cn(S)?(u=!0,Si(d)):u=!1,$u(d,m),x2(d,S,E),Tv(d,S,E,m),Av(null,d,S,!0,u,m);case 19:return D2(u,d,m);case 22:return L2(u,d,m)}throw Error(o(156,d.tag))};function aC(u,d){return ka(u,d)}function RI(u,d,m,S){this.tag=u,this.key=m,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=d,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=S,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function hs(u,d,m,S){return new RI(u,d,m,S)}function ny(u){return u=u.prototype,!(!u||!u.isReactComponent)}function TI(u){if(typeof u=="function")return ny(u)?1:0;if(u!=null){if(u=u.$$typeof,u===x)return 11;if(u===b)return 14}return 2}function Fa(u,d){var m=u.alternate;return m===null?(m=hs(u.tag,d,u.key,u.mode),m.elementType=u.elementType,m.type=u.type,m.stateNode=u.stateNode,m.alternate=u,u.alternate=m):(m.pendingProps=d,m.type=u.type,m.flags=0,m.subtreeFlags=0,m.deletions=null),m.flags=u.flags&14680064,m.childLanes=u.childLanes,m.lanes=u.lanes,m.child=u.child,m.memoizedProps=u.memoizedProps,m.memoizedState=u.memoizedState,m.updateQueue=u.updateQueue,d=u.dependencies,m.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext},m.sibling=u.sibling,m.index=u.index,m.ref=u.ref,m}function Dp(u,d,m,S,E,P){var I=2;if(S=u,typeof u=="function")ny(u)&&(I=1);else if(typeof u=="string")I=5;else e:switch(u){case h:return Gl(m.children,E,P,d);case f:I=8,E|=8;break;case p:return u=hs(12,m,d,E|2),u.elementType=p,u.lanes=P,u;case k:return u=hs(13,m,d,E),u.elementType=k,u.lanes=P,u;case C:return u=hs(19,m,d,E),u.elementType=C,u.lanes=P,u;case T:return Fp(m,E,P,d);default:if(typeof u=="object"&&u!==null)switch(u.$$typeof){case g:I=10;break e;case v:I=9;break e;case x:I=11;break e;case b:I=14;break e;case _:I=16,S=null;break e}throw Error(o(130,u==null?u:typeof u,""))}return d=hs(I,m,d,E),d.elementType=u,d.type=S,d.lanes=P,d}function Gl(u,d,m,S){return u=hs(7,u,S,d),u.lanes=m,u}function Fp(u,d,m,S){return u=hs(22,u,S,d),u.elementType=T,u.lanes=m,u.stateNode={isHidden:!1},u}function ry(u,d,m){return u=hs(6,u,null,d),u.lanes=m,u}function iy(u,d,m){return d=hs(4,u.children!==null?u.children:[],u.key,d),d.lanes=m,d.stateNode={containerInfo:u.containerInfo,pendingChildren:null,implementation:u.implementation},d}function PI(u,d,m,S,E){this.tag=d,this.containerInfo=u,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=ae,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=os(0),this.expirationTimes=os(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=os(0),this.identifierPrefix=S,this.onRecoverableError=E,_e&&(this.mutableSourceEagerHydrationData=null)}function lC(u,d,m,S,E,P,I,J,oe){return u=new PI(u,d,m,J,oe),d===1?(d=1,P===!0&&(d|=8)):d=0,P=hs(3,null,null,d),u.current=P,P.stateNode=u,P.memoizedState={element:S,isDehydrated:m,cache:null,transitions:null,pendingSuspenseBoundaries:null},pv(P),u}function uC(u){if(!u)return sn;u=u._reactInternals;e:{if($(u)!==u||u.tag!==1)throw Error(o(170));var d=u;do{switch(d.tag){case 3:d=d.stateNode.context;break e;case 1:if(Cn(d.type)){d=d.stateNode.__reactInternalMemoizedMergedChildContext;break e}}d=d.return}while(d!==null);throw Error(o(171))}if(u.tag===1){var m=u.type;if(Cn(m))return Ln(u,m,d)}return d}function cC(u){var d=u._reactInternals;if(d===void 0)throw typeof u.render=="function"?Error(o(188)):(u=Object.keys(u).join(","),Error(o(268,u)));return u=U(d),u===null?null:u.stateNode}function dC(u,d){if(u=u.memoizedState,u!==null&&u.dehydrated!==null){var m=u.retryLane;u.retryLane=m!==0&&m<d?m:d}}function Bp(u,d){dC(u,d),(u=u.alternate)&&dC(u,d)}function LI(u){return u=U(u),u===null?null:u.stateNode}function MI(){return null}return n.attemptContinuousHydration=function(u){if(u.tag===13){var d=lo(u,134217728);if(d!==null){var m=ei();ds(d,u,134217728,m)}Bp(u,134217728)}},n.attemptDiscreteHydration=function(u){if(u.tag===13){var d=lo(u,1);if(d!==null){var m=ei();ds(d,u,1,m)}Bp(u,1)}},n.attemptHydrationAtCurrentPriority=function(u){if(u.tag===13){var d=Oa(u),m=lo(u,d);if(m!==null){var S=ei();ds(m,u,d,S)}Bp(u,d)}},n.attemptSynchronousHydration=function(u){switch(u.tag){case 3:var d=u.stateNode;if(d.current.memoizedState.isDehydrated){var m=Fi(d.pendingLanes);m!==0&&(Do(d,m|1),Ri(d,Mn()),!(It&6)&&(Gu(),Q()))}break;case 13:J2(function(){var S=lo(u,1);if(S!==null){var E=ei();ds(S,u,1,E)}}),Bp(u,1)}},n.batchedUpdates=function(u,d){var m=It;It|=1;try{return u(d)}finally{It=m,It===0&&(Gu(),Fo&&Q())}},n.createComponentSelector=function(u){return{$$typeof:Cp,value:u}},n.createContainer=function(u,d,m,S,E,P,I){return lC(u,d,!1,null,m,S,E,P,I)},n.createHasPseudoClassSelector=function(u){return{$$typeof:kp,value:u}},n.createHydrationContainer=function(u,d,m,S,E,P,I,J,oe){return u=lC(m,S,!0,u,E,P,I,J,oe),u.context=uC(null),m=u.current,S=ei(),E=Oa(m),P=Wo(S,E),P.callback=d??null,Na(m,P,E),u.current.lanes=E,Oo(u,E,S),Ri(u,S),u},n.createPortal=function(u,d,m){var S=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:c,key:S==null?null:""+S,children:u,containerInfo:d,implementation:m}},n.createRoleSelector=function(u){return{$$typeof:Ep,value:u}},n.createTestNameSelector=function(u){return{$$typeof:Rp,value:u}},n.createTextSelector=function(u){return{$$typeof:Tp,value:u}},n.deferredUpdates=function(u){var d=Vt,m=er.transition;try{return er.transition=null,Vt=16,u()}finally{Vt=d,er.transition=m}},n.discreteUpdates=function(u,d,m,S,E){var P=Vt,I=er.transition;try{return er.transition=null,Vt=1,u(d,m,S,E)}finally{Vt=P,er.transition=I,It===0&&Gu()}},n.findAllNodes=Hv,n.findBoundingRects=function(u,d){if(!Ue)throw Error(o(363));d=Hv(u,d),u=[];for(var m=0;m<d.length;m++)u.push(ze(d[m]));for(d=u.length-1;0<d;d--){m=u[d];for(var S=m.x,E=S+m.width,P=m.y,I=P+m.height,J=d-1;0<=J;J--)if(d!==J){var oe=u[J],Pe=oe.x,Qe=Pe+oe.width,Tt=oe.y,We=Tt+oe.height;if(S>=Pe&&P>=Tt&&E<=Qe&&I<=We){u.splice(d,1);break}else if(S!==Pe||m.width!==oe.width||We<P||Tt>I){if(!(P!==Tt||m.height!==oe.height||Qe<S||Pe>E)){Pe>S&&(oe.width+=Pe-S,oe.x=S),Qe<E&&(oe.width=E-Pe),u.splice(d,1);break}}else{Tt>P&&(oe.height+=Tt-P,oe.y=P),We<I&&(oe.height=I-Tt),u.splice(d,1);break}}}return u},n.findHostInstance=cC,n.findHostInstanceWithNoPortals=function(u){return u=V(u),u=u!==null?Z(u):null,u===null?null:u.stateNode},n.findHostInstanceWithWarning=function(u){return cC(u)},n.flushControlled=function(u){var d=It;It|=1;var m=er.transition,S=Vt;try{er.transition=null,Vt=1,u()}finally{Vt=S,er.transition=m,It=d,It===0&&(Gu(),Q())}},n.flushPassiveEffects=Hl,n.flushSync=J2,n.focusWithin=function(u,d){if(!Ue)throw Error(o(363));for(u=Uv(u),d=X2(u,d),d=Array.from(d),u=0;u<d.length;){var m=d[u++];if(!Oe(m)){if(m.tag===5&&yt(m.stateNode))return!0;for(m=m.child;m!==null;)d.push(m),m=m.sibling}}return!1},n.getCurrentUpdatePriority=function(){return Vt},n.getFindAllNodesFailureDescription=function(u,d){if(!Ue)throw Error(o(363));var m=0,S=[];u=[Uv(u),0];for(var E=0;E<u.length;){var P=u[E++],I=u[E++],J=d[I];if((P.tag!==5||!Oe(P))&&(Vv(P,J)&&(S.push(Wv(J)),I++,I>m&&(m=I)),I<d.length))for(P=P.child;P!==null;)u.push(P,I),P=P.sibling}if(m<d.length){for(u=[];m<d.length;m++)u.push(Wv(d[m]));return`findAllNodes was able to match part of the selector:
  `+(S.join(" > ")+`

No matching component was found for:
  `)+u.join(" > ")}return null},n.getPublicRootInstance=function(u){if(u=u.current,!u.child)return null;switch(u.child.tag){case 5:return G(u.child.stateNode);default:return u.child.stateNode}},n.injectIntoDevTools=function(u){if(u={bundleType:u.bundleType,version:u.version,rendererPackageName:u.rendererPackageName,rendererConfig:u.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:a.ReactCurrentDispatcher,findHostInstanceByFiber:LI,findFiberByHostInstance:u.findFiberByHostInstance||MI,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")u=!1;else{var d=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(d.isDisabled||!d.supportsFiber)u=!0;else{try{Pa=d.inject(u),sr=d}catch{}u=!!d.checkDCE}}return u},n.isAlreadyRendering=function(){return!1},n.observeVisibleRects=function(u,d,m,S){if(!Ue)throw Error(o(363));u=Hv(u,d);var E=Fe(u,m,S).disconnect;return{disconnect:function(){E()}}},n.registerMutableSourceForHydration=function(u,d){var m=d._getVersion;m=m(d._source),u.mutableSourceEagerHydrationData==null?u.mutableSourceEagerHydrationData=[d,m]:u.mutableSourceEagerHydrationData.push(d,m)},n.runWithPriority=function(u,d){var m=Vt;try{return Vt=u,d()}finally{Vt=m}},n.shouldError=function(){return null},n.shouldSuspend=function(){return!1},n.updateContainer=function(u,d,m,S){var E=d.current,P=ei(),I=Oa(E);return m=uC(m),d.context===null?d.context=m:d.pendingContext=m,d=Wo(P,I),d.payload={element:u},S=S===void 0?null:S,S!==null&&(d.callback=S),u=Na(E,d,I),u!==null&&(ds(u,E,I,P),up(u,E,I)),I},n};IA.exports=HG;var GG=IA.exports;const qG=vP(GG);var OA={exports:{}},ju={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */ju.ConcurrentRoot=1;ju.ContinuousEventPriority=4;ju.DefaultEventPriority=16;ju.DiscreteEventPriority=1;ju.IdleEventPriority=536870912;ju.LegacyRoot=0;OA.exports=ju;var DA=OA.exports;const tT={children:!0,ref:!0,key:!0,style:!0,forwardedRef:!0,unstable_applyCache:!0,unstable_applyDrawHitFromCache:!0};let nT=!1,rT=!1;const cS=".react-konva-event",YG=`ReactKonva: You have a Konva node with draggable = true and position defined but no onDragMove or onDragEnd events are handled.
Position of a node will be changed during drag&drop, so you should update state of the react app as well.
Consider to add onDragMove or onDragEnd events.
For more info see: https://github.com/konvajs/react-konva/issues/256
`,KG=`ReactKonva: You are using "zIndex" attribute for a Konva node.
react-konva may get confused with ordering. Just define correct order of elements in your render function of a component.
For more info see: https://github.com/konvajs/react-konva/issues/194
`,XG={};function q0(t,e,n=XG){if(!nT&&"zIndex"in e&&(console.warn(KG),nT=!0),!rT&&e.draggable){var r=e.x!==void 0||e.y!==void 0,i=e.onDragEnd||e.onDragMove;r&&!i&&(console.warn(YG),rT=!0)}for(var s in n)if(!tT[s]){var o=s.slice(0,2)==="on",a=n[s]!==e[s];if(o&&a){var l=s.substr(2).toLowerCase();l.substr(0,7)==="content"&&(l="content"+l.substr(7,1).toUpperCase()+l.substr(8)),t.off(l,n[s])}var c=!e.hasOwnProperty(s);c&&t.setAttr(s,void 0)}var h=e._useStrictMode,f={},p=!1;const g={};for(var s in e)if(!tT[s]){var o=s.slice(0,2)==="on",v=n[s]!==e[s];if(o&&v){var l=s.substr(2).toLowerCase();l.substr(0,7)==="content"&&(l="content"+l.substr(7,1).toUpperCase()+l.substr(8)),e[s]&&(g[l]=e[s])}!o&&(e[s]!==n[s]||h&&e[s]!==t.getAttr(s))&&(p=!0,f[s]=e[s])}p&&(t.setAttrs(f),Pl(t));for(var l in g)t.on(l+cS,g[l])}function Pl(t){if(!tt.autoDrawEnabled){var e=t.getLayer()||t.getStage();e&&e.batchDraw()}}const FA={},ZG={};Cu.Node.prototype._applyProps=q0;function QG(t,e){if(typeof e=="string"){console.error(`Do not use plain text as child of Konva.Node. You are using text: ${e}`);return}t.add(e),Pl(t)}function JG(t,e,n){let r=Cu[t];r||(console.error(`Konva has no node with the type ${t}. Group will be used instead. If you use minimal version of react-konva, just import required nodes into Konva: "import "konva/lib/shapes/${t}"  If you want to render DOM elements as part of canvas tree take a look into this demo: https://konvajs.github.io/docs/react/DOM_Portal.html`),r=Cu.Group);const i={},s={};for(var o in e){var a=o.slice(0,2)==="on";a?s[o]=e[o]:i[o]=e[o]}const l=new r(i);return q0(l,s),l}function eq(t,e,n){console.error(`Text components are not supported for now in ReactKonva. Your text is: "${t}"`)}function tq(t,e,n){return!1}function nq(t){return t}function rq(){return null}function iq(){return null}function sq(t,e,n,r){return ZG}function oq(){}function aq(t){}function lq(t,e){return!1}function uq(){return FA}function cq(){return FA}const dq=setTimeout,hq=clearTimeout,fq=-1;function pq(t,e){return!1}const gq=!1,mq=!0,vq=!0;function yq(t,e){e.parent===t?e.moveToTop():t.add(e),Pl(t)}function wq(t,e){e.parent===t?e.moveToTop():t.add(e),Pl(t)}function BA(t,e,n){e._remove(),t.add(e),e.setZIndex(n.getZIndex()),Pl(t)}function xq(t,e,n){BA(t,e,n)}function _q(t,e){e.destroy(),e.off(cS),Pl(t)}function bq(t,e){e.destroy(),e.off(cS),Pl(t)}function Sq(t,e,n){console.error(`Text components are not yet supported in ReactKonva. You text is: "${n}"`)}function Cq(t,e,n){}function kq(t,e,n,r,i){q0(t,i,r)}function Eq(t){t.hide(),Pl(t)}function Rq(t){}function Tq(t,e){(e.visible==null||e.visible)&&t.show()}function Pq(t,e){}function Lq(t){}function Mq(){}const Aq=()=>DA.DefaultEventPriority,Nq=Object.freeze(Object.defineProperty({__proto__:null,appendChild:yq,appendChildToContainer:wq,appendInitialChild:QG,cancelTimeout:hq,clearContainer:Lq,commitMount:Cq,commitTextUpdate:Sq,commitUpdate:kq,createInstance:JG,createTextInstance:eq,detachDeletedInstance:Mq,finalizeInitialChildren:tq,getChildHostContext:cq,getCurrentEventPriority:Aq,getPublicInstance:nq,getRootHostContext:uq,hideInstance:Eq,hideTextInstance:Rq,idlePriority:Nh.unstable_IdlePriority,insertBefore:BA,insertInContainerBefore:xq,isPrimaryRenderer:gq,noTimeout:fq,now:Nh.unstable_now,prepareForCommit:rq,preparePortalMount:iq,prepareUpdate:sq,removeChild:_q,removeChildFromContainer:bq,resetAfterCommit:oq,resetTextContent:aq,run:Nh.unstable_runWithPriority,scheduleTimeout:dq,shouldDeprioritizeSubtree:lq,shouldSetTextContent:pq,supportsMutation:vq,unhideInstance:Tq,unhideTextInstance:Pq,warnsIfNotActing:mq},Symbol.toStringTag,{value:"Module"}));var jq=Object.defineProperty,Iq=Object.defineProperties,Oq=Object.getOwnPropertyDescriptors,iT=Object.getOwnPropertySymbols,Dq=Object.prototype.hasOwnProperty,Fq=Object.prototype.propertyIsEnumerable,sT=(t,e,n)=>e in t?jq(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,oT=(t,e)=>{for(var n in e||(e={}))Dq.call(e,n)&&sT(t,n,e[n]);if(iT)for(var n of iT(e))Fq.call(e,n)&&sT(t,n,e[n]);return t},Bq=(t,e)=>Iq(t,Oq(e)),aT,lT;typeof window<"u"&&((aT=window.document)!=null&&aT.createElement||((lT=window.navigator)==null?void 0:lT.product)==="ReactNative")?y.useLayoutEffect:y.useEffect;function $A(t,e,n){if(!t)return;if(n(t)===!0)return t;let r=e?t.return:t.child;for(;r;){const i=$A(r,e,n);if(i)return i;r=e?null:r.sibling}}function zA(t){try{return Object.defineProperties(t,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return t}}const uT=console.error;console.error=function(){const t=[...arguments].join("");if(t!=null&&t.startsWith("Warning:")&&t.includes("useContext")){console.error=uT;return}return uT.apply(this,arguments)};const dS=zA(y.createContext(null));class UA extends y.Component{render(){return y.createElement(dS.Provider,{value:this._reactInternals},this.props.children)}}function $q(){const t=y.useContext(dS);if(t===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=y.useId();return y.useMemo(()=>{for(const r of[t,t==null?void 0:t.alternate]){if(!r)continue;const i=$A(r,!1,s=>{let o=s.memoizedState;for(;o;){if(o.memoizedState===e)return!0;o=o.next}});if(i)return i}},[t,e])}function zq(){const t=$q(),[e]=y.useState(()=>new Map);e.clear();let n=t;for(;n;){if(n.type&&typeof n.type=="object"){const i=n.type._context===void 0&&n.type.Provider===n.type?n.type:n.type._context;i&&i!==dS&&!e.has(i)&&e.set(i,y.useContext(zA(i)))}n=n.return}return e}function Uq(){const t=zq();return y.useMemo(()=>Array.from(t.keys()).reduce((e,n)=>r=>y.createElement(e,null,y.createElement(n.Provider,Bq(oT({},r),{value:t.get(n)}))),e=>y.createElement(UA,oT({},e))),[t])}function Vq(t){const e=Be.useRef({});return Be.useLayoutEffect(()=>{e.current=t}),Be.useLayoutEffect(()=>()=>{e.current={}},[]),e.current}const Wq=t=>{const e=Be.useRef(null),n=Be.useRef(null),r=Be.useRef(null),i=Vq(t),s=Uq(),o=a=>{const{forwardedRef:l}=t;l&&(typeof l=="function"?l(a):l.current=a)};return Be.useLayoutEffect(()=>(n.current=new Cu.Stage({width:t.width,height:t.height,container:e.current}),o(n.current),r.current=Th.createContainer(n.current,DA.LegacyRoot,!1,null),Th.updateContainer(Be.createElement(s,{},t.children),r.current),()=>{Cu.isBrowser&&(o(null),Th.updateContainer(null,r.current,null),n.current.destroy())}),[]),Be.useLayoutEffect(()=>{o(n.current),q0(n.current,t,i),Th.updateContainer(Be.createElement(s,{},t.children),r.current,null)}),Be.createElement("div",{ref:e,id:t.id,accessKey:t.accessKey,className:t.className,role:t.role,style:t.style,tabIndex:t.tabIndex,title:t.title})},w1="Layer",Hq="Rect",Gq="Ellipse",Va="Line",Th=qG(Nq);Th.injectIntoDevTools({findHostInstanceByFiber:()=>null,bundleType:0,version:Be.version,rendererPackageName:"react-konva"});const qq=Be.forwardRef((t,e)=>Be.createElement(UA,{},Be.createElement(Wq,{...t,forwardedRef:e})));function Yq(t){const e=hr();return{layers:[{id:e,name:"Layer 1",visible:!0,order:0,strokes:t.lines.map((n,r)=>({clientId:`migrated-${r}`,tool:n.tool,points:n.points,color:n.color,strokeWidth:n.strokeWidth,saveState:"saved"}))}],activeLayerId:e,version:2}}function cT(t){return{layers:t.layers.map(e=>({...e,shapes:[]})),activeLayerId:t.activeLayerId,version:3}}async function Kq(t,e,n){try{const{data:{user:r}}=await Ct.auth.getUser();if(!r)throw new Error("User not authenticated");const i={layers:e.map(o=>({id:o.id,name:o.name,visible:o.visible,order:o.order,strokes:o.strokes.map(a=>({clientId:a.clientId,tool:a.tool,points:a.points,color:a.color,strokeWidth:a.strokeWidth,...a.shapeType&&{shapeType:a.shapeType},...a.fillColor&&{fillColor:a.fillColor},...a.closed!==void 0&&{closed:a.closed}})),shapes:o.shapes||[]})),activeLayerId:n,version:3},{error:s}=await Ct.from("canvases").upsert({project_id:t,user_id:r.id,canvas_data:i,updated_at:new Date().toISOString()},{onConflict:"project_id"});if(s)throw console.error("Failed to save canvas:",s),s}catch(r){throw console.error("Error in saveCanvas:",r),r}}async function Xq(t){try{const{data:e,error:n}=await Ct.from("canvases").select("canvas_data").eq("project_id",t).maybeSingle();if(n)throw console.error("Failed to load canvas:",n),n;if(!e||!e.canvas_data)return{layers:[],activeLayerId:""};const r=e.canvas_data;let i;if("version"in r&&r.version===3)i=r;else if("version"in r&&r.version===2)console.log("Migrating canvas from V2 to V3 format"),i=cT(r);else{console.log("Migrating canvas from V1 to V3 format");const o=Yq(r);i=cT(o)}return{layers:i.layers.map(o=>({id:o.id,name:o.name,visible:o.visible,order:o.order,strokes:o.strokes.map(a=>({clientId:a.clientId,tool:a.tool,points:a.points,color:a.color,strokeWidth:a.strokeWidth,saveState:"saved",...a.shapeType&&{shapeType:a.shapeType},...a.fillColor&&{fillColor:a.fillColor},...a.closed!==void 0&&{closed:a.closed}})),shapes:o.shapes||[]})),activeLayerId:i.activeLayerId}}catch(e){return console.error("Error in loadCanvas:",e),{layers:[],activeLayerId:""}}}function Zq(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return y.useMemo(()=>r=>{e.forEach(i=>i(r))},e)}const Y0=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Td(t){const e=Object.prototype.toString.call(t);return e==="[object Window]"||e==="[object global]"}function hS(t){return"nodeType"in t}function Oi(t){var e,n;return t?Td(t)?t:hS(t)&&(e=(n=t.ownerDocument)==null?void 0:n.defaultView)!=null?e:window:window}function fS(t){const{Document:e}=Oi(t);return t instanceof e}function np(t){return Td(t)?!1:t instanceof Oi(t).HTMLElement}function VA(t){return t instanceof Oi(t).SVGElement}function Pd(t){return t?Td(t)?t.document:hS(t)?fS(t)?t:np(t)||VA(t)?t.ownerDocument:document:document:document}const To=Y0?y.useLayoutEffect:y.useEffect;function pS(t){const e=y.useRef(t);return To(()=>{e.current=t}),y.useCallback(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return e.current==null?void 0:e.current(...r)},[])}function Qq(){const t=y.useRef(null),e=y.useCallback((r,i)=>{t.current=setInterval(r,i)},[]),n=y.useCallback(()=>{t.current!==null&&(clearInterval(t.current),t.current=null)},[]);return[e,n]}function If(t,e){e===void 0&&(e=[t]);const n=y.useRef(t);return To(()=>{n.current!==t&&(n.current=t)},e),n}function rp(t,e){const n=y.useRef();return y.useMemo(()=>{const r=t(n.current);return n.current=r,r},[...e])}function e0(t){const e=pS(t),n=y.useRef(null),r=y.useCallback(i=>{i!==n.current&&(e==null||e(i,n.current)),n.current=i},[]);return[n,r]}function jx(t){const e=y.useRef();return y.useEffect(()=>{e.current=t},[t]),e.current}let x1={};function ip(t,e){return y.useMemo(()=>{if(e)return e;const n=x1[t]==null?0:x1[t]+1;return x1[t]=n,t+"-"+n},[t,e])}function WA(t){return function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return r.reduce((s,o)=>{const a=Object.entries(o);for(const[l,c]of a){const h=s[l];h!=null&&(s[l]=h+t*c)}return s},{...e})}}const Uc=WA(1),t0=WA(-1);function Jq(t){return"clientX"in t&&"clientY"in t}function gS(t){if(!t)return!1;const{KeyboardEvent:e}=Oi(t.target);return e&&t instanceof e}function eY(t){if(!t)return!1;const{TouchEvent:e}=Oi(t.target);return e&&t instanceof e}function Ix(t){if(eY(t)){if(t.touches&&t.touches.length){const{clientX:e,clientY:n}=t.touches[0];return{x:e,y:n}}else if(t.changedTouches&&t.changedTouches.length){const{clientX:e,clientY:n}=t.changedTouches[0];return{x:e,y:n}}}return Jq(t)?{x:t.clientX,y:t.clientY}:null}const rd=Object.freeze({Translate:{toString(t){if(!t)return;const{x:e,y:n}=t;return"translate3d("+(e?Math.round(e):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(t){if(!t)return;const{scaleX:e,scaleY:n}=t;return"scaleX("+e+") scaleY("+n+")"}},Transform:{toString(t){if(t)return[rd.Translate.toString(t),rd.Scale.toString(t)].join(" ")}},Transition:{toString(t){let{property:e,duration:n,easing:r}=t;return e+" "+n+"ms "+r}}}),dT="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function tY(t){return t.matches(dT)?t:t.querySelector(dT)}const nY={display:"none"};function rY(t){let{id:e,value:n}=t;return Be.createElement("div",{id:e,style:nY},n)}function iY(t){let{id:e,announcement:n,ariaLiveType:r="assertive"}=t;const i={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return Be.createElement("div",{id:e,style:i,role:"status","aria-live":r,"aria-atomic":!0},n)}function sY(){const[t,e]=y.useState("");return{announce:y.useCallback(r=>{r!=null&&e(r)},[]),announcement:t}}const HA=y.createContext(null);function oY(t){const e=y.useContext(HA);y.useEffect(()=>{if(!e)throw new Error("useDndMonitor must be used within a children of <DndContext>");return e(t)},[t,e])}function aY(){const[t]=y.useState(()=>new Set),e=y.useCallback(r=>(t.add(r),()=>t.delete(r)),[t]);return[y.useCallback(r=>{let{type:i,event:s}=r;t.forEach(o=>{var a;return(a=o[i])==null?void 0:a.call(o,s)})},[t]),e]}const lY={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},uY={onDragStart(t){let{active:e}=t;return"Picked up draggable item "+e.id+"."},onDragOver(t){let{active:e,over:n}=t;return n?"Draggable item "+e.id+" was moved over droppable area "+n.id+".":"Draggable item "+e.id+" is no longer over a droppable area."},onDragEnd(t){let{active:e,over:n}=t;return n?"Draggable item "+e.id+" was dropped over droppable area "+n.id:"Draggable item "+e.id+" was dropped."},onDragCancel(t){let{active:e}=t;return"Dragging was cancelled. Draggable item "+e.id+" was dropped."}};function cY(t){let{announcements:e=uY,container:n,hiddenTextDescribedById:r,screenReaderInstructions:i=lY}=t;const{announce:s,announcement:o}=sY(),a=ip("DndLiveRegion"),[l,c]=y.useState(!1);if(y.useEffect(()=>{c(!0)},[]),oY(y.useMemo(()=>({onDragStart(f){let{active:p}=f;s(e.onDragStart({active:p}))},onDragMove(f){let{active:p,over:g}=f;e.onDragMove&&s(e.onDragMove({active:p,over:g}))},onDragOver(f){let{active:p,over:g}=f;s(e.onDragOver({active:p,over:g}))},onDragEnd(f){let{active:p,over:g}=f;s(e.onDragEnd({active:p,over:g}))},onDragCancel(f){let{active:p,over:g}=f;s(e.onDragCancel({active:p,over:g}))}}),[s,e])),!l)return null;const h=Be.createElement(Be.Fragment,null,Be.createElement(rY,{id:r,value:i.draggable}),Be.createElement(iY,{id:a,announcement:o}));return n?oi.createPortal(h,n):h}var _r;(function(t){t.DragStart="dragStart",t.DragMove="dragMove",t.DragEnd="dragEnd",t.DragCancel="dragCancel",t.DragOver="dragOver",t.RegisterDroppable="registerDroppable",t.SetDroppableDisabled="setDroppableDisabled",t.UnregisterDroppable="unregisterDroppable"})(_r||(_r={}));function n0(){}function GA(t,e){return y.useMemo(()=>({sensor:t,options:e??{}}),[t,e])}function qA(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return y.useMemo(()=>[...e].filter(r=>r!=null),[...e])}const eo=Object.freeze({x:0,y:0});function dY(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function hY(t,e){let{data:{value:n}}=t,{data:{value:r}}=e;return n-r}function fY(t,e){let{data:{value:n}}=t,{data:{value:r}}=e;return r-n}function pY(t,e){if(!t||t.length===0)return null;const[n]=t;return e?n[e]:n}function hT(t,e,n){return e===void 0&&(e=t.left),n===void 0&&(n=t.top),{x:e+t.width*.5,y:n+t.height*.5}}const YA=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:r}=t;const i=hT(e,e.left,e.top),s=[];for(const o of r){const{id:a}=o,l=n.get(a);if(l){const c=dY(hT(l),i);s.push({id:a,data:{droppableContainer:o,value:c}})}}return s.sort(hY)};function gY(t,e){const n=Math.max(e.top,t.top),r=Math.max(e.left,t.left),i=Math.min(e.left+e.width,t.left+t.width),s=Math.min(e.top+e.height,t.top+t.height),o=i-r,a=s-n;if(r<i&&n<s){const l=e.width*e.height,c=t.width*t.height,h=o*a,f=h/(l+c-h);return Number(f.toFixed(4))}return 0}const mY=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:r}=t;const i=[];for(const s of r){const{id:o}=s,a=n.get(o);if(a){const l=gY(a,e);l>0&&i.push({id:o,data:{droppableContainer:s,value:l}})}}return i.sort(fY)};function vY(t,e,n){return{...t,scaleX:e&&n?e.width/n.width:1,scaleY:e&&n?e.height/n.height:1}}function KA(t,e){return t&&e?{x:t.left-e.left,y:t.top-e.top}:eo}function yY(t){return function(n){for(var r=arguments.length,i=new Array(r>1?r-1:0),s=1;s<r;s++)i[s-1]=arguments[s];return i.reduce((o,a)=>({...o,top:o.top+t*a.y,bottom:o.bottom+t*a.y,left:o.left+t*a.x,right:o.right+t*a.x}),{...n})}}const wY=yY(1);function xY(t){if(t.startsWith("matrix3d(")){const e=t.slice(9,-1).split(/, /);return{x:+e[12],y:+e[13],scaleX:+e[0],scaleY:+e[5]}}else if(t.startsWith("matrix(")){const e=t.slice(7,-1).split(/, /);return{x:+e[4],y:+e[5],scaleX:+e[0],scaleY:+e[3]}}return null}function _Y(t,e,n){const r=xY(e);if(!r)return t;const{scaleX:i,scaleY:s,x:o,y:a}=r,l=t.left-o-(1-i)*parseFloat(n),c=t.top-a-(1-s)*parseFloat(n.slice(n.indexOf(" ")+1)),h=i?t.width/i:t.width,f=s?t.height/s:t.height;return{width:h,height:f,top:c,right:l+h,bottom:c+f,left:l}}const bY={ignoreTransform:!1};function Ld(t,e){e===void 0&&(e=bY);let n=t.getBoundingClientRect();if(e.ignoreTransform){const{transform:c,transformOrigin:h}=Oi(t).getComputedStyle(t);c&&(n=_Y(n,c,h))}const{top:r,left:i,width:s,height:o,bottom:a,right:l}=n;return{top:r,left:i,width:s,height:o,bottom:a,right:l}}function fT(t){return Ld(t,{ignoreTransform:!0})}function SY(t){const e=t.innerWidth,n=t.innerHeight;return{top:0,left:0,right:e,bottom:n,width:e,height:n}}function CY(t,e){return e===void 0&&(e=Oi(t).getComputedStyle(t)),e.position==="fixed"}function kY(t,e){e===void 0&&(e=Oi(t).getComputedStyle(t));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(i=>{const s=e[i];return typeof s=="string"?n.test(s):!1})}function mS(t,e){const n=[];function r(i){if(e!=null&&n.length>=e||!i)return n;if(fS(i)&&i.scrollingElement!=null&&!n.includes(i.scrollingElement))return n.push(i.scrollingElement),n;if(!np(i)||VA(i)||n.includes(i))return n;const s=Oi(t).getComputedStyle(i);return i!==t&&kY(i,s)&&n.push(i),CY(i,s)?n:r(i.parentNode)}return t?r(t):n}function XA(t){const[e]=mS(t,1);return e??null}function _1(t){return!Y0||!t?null:Td(t)?t:hS(t)?fS(t)||t===Pd(t).scrollingElement?window:np(t)?t:null:null}function ZA(t){return Td(t)?t.scrollX:t.scrollLeft}function QA(t){return Td(t)?t.scrollY:t.scrollTop}function Ox(t){return{x:ZA(t),y:QA(t)}}var Mr;(function(t){t[t.Forward=1]="Forward",t[t.Backward=-1]="Backward"})(Mr||(Mr={}));function JA(t){return!Y0||!t?!1:t===document.scrollingElement}function eN(t){const e={x:0,y:0},n=JA(t)?{height:window.innerHeight,width:window.innerWidth}:{height:t.clientHeight,width:t.clientWidth},r={x:t.scrollWidth-n.width,y:t.scrollHeight-n.height},i=t.scrollTop<=e.y,s=t.scrollLeft<=e.x,o=t.scrollTop>=r.y,a=t.scrollLeft>=r.x;return{isTop:i,isLeft:s,isBottom:o,isRight:a,maxScroll:r,minScroll:e}}const EY={x:.2,y:.2};function RY(t,e,n,r,i){let{top:s,left:o,right:a,bottom:l}=n;r===void 0&&(r=10),i===void 0&&(i=EY);const{isTop:c,isBottom:h,isLeft:f,isRight:p}=eN(t),g={x:0,y:0},v={x:0,y:0},x={height:e.height*i.y,width:e.width*i.x};return!c&&s<=e.top+x.height?(g.y=Mr.Backward,v.y=r*Math.abs((e.top+x.height-s)/x.height)):!h&&l>=e.bottom-x.height&&(g.y=Mr.Forward,v.y=r*Math.abs((e.bottom-x.height-l)/x.height)),!p&&a>=e.right-x.width?(g.x=Mr.Forward,v.x=r*Math.abs((e.right-x.width-a)/x.width)):!f&&o<=e.left+x.width&&(g.x=Mr.Backward,v.x=r*Math.abs((e.left+x.width-o)/x.width)),{direction:g,speed:v}}function TY(t){if(t===document.scrollingElement){const{innerWidth:s,innerHeight:o}=window;return{top:0,left:0,right:s,bottom:o,width:s,height:o}}const{top:e,left:n,right:r,bottom:i}=t.getBoundingClientRect();return{top:e,left:n,right:r,bottom:i,width:t.clientWidth,height:t.clientHeight}}function tN(t){return t.reduce((e,n)=>Uc(e,Ox(n)),eo)}function PY(t){return t.reduce((e,n)=>e+ZA(n),0)}function LY(t){return t.reduce((e,n)=>e+QA(n),0)}function MY(t,e){if(e===void 0&&(e=Ld),!t)return;const{top:n,left:r,bottom:i,right:s}=e(t);XA(t)&&(i<=0||s<=0||n>=window.innerHeight||r>=window.innerWidth)&&t.scrollIntoView({block:"center",inline:"center"})}const AY=[["x",["left","right"],PY],["y",["top","bottom"],LY]];class vS{constructor(e,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=mS(n),i=tN(r);this.rect={...e},this.width=e.width,this.height=e.height;for(const[s,o,a]of AY)for(const l of o)Object.defineProperty(this,l,{get:()=>{const c=a(r),h=i[s]-c;return this.rect[l]+h},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class Jh{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...n)})},this.target=e}add(e,n,r){var i;(i=this.target)==null||i.addEventListener(e,n,r),this.listeners.push([e,n,r])}}function NY(t){const{EventTarget:e}=Oi(t);return t instanceof e?t:Pd(t)}function b1(t,e){const n=Math.abs(t.x),r=Math.abs(t.y);return typeof e=="number"?Math.sqrt(n**2+r**2)>e:"x"in e&&"y"in e?n>e.x&&r>e.y:"x"in e?n>e.x:"y"in e?r>e.y:!1}var ms;(function(t){t.Click="click",t.DragStart="dragstart",t.Keydown="keydown",t.ContextMenu="contextmenu",t.Resize="resize",t.SelectionChange="selectionchange",t.VisibilityChange="visibilitychange"})(ms||(ms={}));function pT(t){t.preventDefault()}function jY(t){t.stopPropagation()}var rn;(function(t){t.Space="Space",t.Down="ArrowDown",t.Right="ArrowRight",t.Left="ArrowLeft",t.Up="ArrowUp",t.Esc="Escape",t.Enter="Enter",t.Tab="Tab"})(rn||(rn={}));const nN={start:[rn.Space,rn.Enter],cancel:[rn.Esc],end:[rn.Space,rn.Enter,rn.Tab]},IY=(t,e)=>{let{currentCoordinates:n}=e;switch(t.code){case rn.Right:return{...n,x:n.x+25};case rn.Left:return{...n,x:n.x-25};case rn.Down:return{...n,y:n.y+25};case rn.Up:return{...n,y:n.y-25}}};class rN{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:n}}=e;this.props=e,this.listeners=new Jh(Pd(n)),this.windowListeners=new Jh(Oi(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(ms.Resize,this.handleCancel),this.windowListeners.add(ms.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(ms.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:e,onStart:n}=this.props,r=e.node.current;r&&MY(r),n(eo)}handleKeyDown(e){if(gS(e)){const{active:n,context:r,options:i}=this.props,{keyboardCodes:s=nN,coordinateGetter:o=IY,scrollBehavior:a="smooth"}=i,{code:l}=e;if(s.end.includes(l)){this.handleEnd(e);return}if(s.cancel.includes(l)){this.handleCancel(e);return}const{collisionRect:c}=r.current,h=c?{x:c.left,y:c.top}:eo;this.referenceCoordinates||(this.referenceCoordinates=h);const f=o(e,{active:n,context:r.current,currentCoordinates:h});if(f){const p=t0(f,h),g={x:0,y:0},{scrollableAncestors:v}=r.current;for(const x of v){const k=e.code,{isTop:C,isRight:b,isLeft:_,isBottom:T,maxScroll:R,minScroll:L}=eN(x),M=TY(x),A={x:Math.min(k===rn.Right?M.right-M.width/2:M.right,Math.max(k===rn.Right?M.left:M.left+M.width/2,f.x)),y:Math.min(k===rn.Down?M.bottom-M.height/2:M.bottom,Math.max(k===rn.Down?M.top:M.top+M.height/2,f.y))},$=k===rn.Right&&!b||k===rn.Left&&!_,j=k===rn.Down&&!T||k===rn.Up&&!C;if($&&A.x!==f.x){const V=x.scrollLeft+p.x,U=k===rn.Right&&V<=R.x||k===rn.Left&&V>=L.x;if(U&&!p.y){x.scrollTo({left:V,behavior:a});return}U?g.x=x.scrollLeft-V:g.x=k===rn.Right?x.scrollLeft-R.x:x.scrollLeft-L.x,g.x&&x.scrollBy({left:-g.x,behavior:a});break}else if(j&&A.y!==f.y){const V=x.scrollTop+p.y,U=k===rn.Down&&V<=R.y||k===rn.Up&&V>=L.y;if(U&&!p.x){x.scrollTo({top:V,behavior:a});return}U?g.y=x.scrollTop-V:g.y=k===rn.Down?x.scrollTop-R.y:x.scrollTop-L.y,g.y&&x.scrollBy({top:-g.y,behavior:a});break}}this.handleMove(e,Uc(t0(f,this.referenceCoordinates),g))}}}handleMove(e,n){const{onMove:r}=this.props;e.preventDefault(),r(n)}handleEnd(e){const{onEnd:n}=this.props;e.preventDefault(),this.detach(),n()}handleCancel(e){const{onCancel:n}=this.props;e.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}rN.activators=[{eventName:"onKeyDown",handler:(t,e,n)=>{let{keyboardCodes:r=nN,onActivation:i}=e,{active:s}=n;const{code:o}=t.nativeEvent;if(r.start.includes(o)){const a=s.activatorNode.current;return a&&t.target!==a?!1:(t.preventDefault(),i==null||i({event:t.nativeEvent}),!0)}return!1}}];function gT(t){return!!(t&&"distance"in t)}function mT(t){return!!(t&&"delay"in t)}class yS{constructor(e,n,r){var i;r===void 0&&(r=NY(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=n;const{event:s}=e,{target:o}=s;this.props=e,this.events=n,this.document=Pd(o),this.documentListeners=new Jh(this.document),this.listeners=new Jh(r),this.windowListeners=new Jh(Oi(o)),this.initialCoordinates=(i=Ix(s))!=null?i:eo,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:n,bypassActivationConstraint:r}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(ms.Resize,this.handleCancel),this.windowListeners.add(ms.DragStart,pT),this.windowListeners.add(ms.VisibilityChange,this.handleCancel),this.windowListeners.add(ms.ContextMenu,pT),this.documentListeners.add(ms.Keydown,this.handleKeydown),n){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(mT(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(gT(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,n){const{active:r,onPending:i}=this.props;i(r,e,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:e}=this,{onStart:n}=this.props;e&&(this.activated=!0,this.documentListeners.add(ms.Click,jY,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(ms.SelectionChange,this.removeTextSelection),n(e))}handleMove(e){var n;const{activated:r,initialCoordinates:i,props:s}=this,{onMove:o,options:{activationConstraint:a}}=s;if(!i)return;const l=(n=Ix(e))!=null?n:eo,c=t0(i,l);if(!r&&a){if(gT(a)){if(a.tolerance!=null&&b1(c,a.tolerance))return this.handleCancel();if(b1(c,a.distance))return this.handleStart()}if(mT(a)&&b1(c,a.tolerance))return this.handleCancel();this.handlePending(a,c);return}e.cancelable&&e.preventDefault(),o(l)}handleEnd(){const{onAbort:e,onEnd:n}=this.props;this.detach(),this.activated||e(this.props.active),n()}handleCancel(){const{onAbort:e,onCancel:n}=this.props;this.detach(),this.activated||e(this.props.active),n()}handleKeydown(e){e.code===rn.Esc&&this.handleCancel()}removeTextSelection(){var e;(e=this.document.getSelection())==null||e.removeAllRanges()}}const OY={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class K0 extends yS{constructor(e){const{event:n}=e,r=Pd(n.target);super(e,OY,r)}}K0.activators=[{eventName:"onPointerDown",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;return!n.isPrimary||n.button!==0?!1:(r==null||r({event:n}),!0)}}];const DY={move:{name:"mousemove"},end:{name:"mouseup"}};var Dx;(function(t){t[t.RightClick=2]="RightClick"})(Dx||(Dx={}));class FY extends yS{constructor(e){super(e,DY,Pd(e.event.target))}}FY.activators=[{eventName:"onMouseDown",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;return n.button===Dx.RightClick?!1:(r==null||r({event:n}),!0)}}];const S1={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class BY extends yS{constructor(e){super(e,S1)}static setup(){return window.addEventListener(S1.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(S1.move.name,e)};function e(){}}}BY.activators=[{eventName:"onTouchStart",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;const{touches:i}=n;return i.length>1?!1:(r==null||r({event:n}),!0)}}];var ef;(function(t){t[t.Pointer=0]="Pointer",t[t.DraggableRect=1]="DraggableRect"})(ef||(ef={}));var r0;(function(t){t[t.TreeOrder=0]="TreeOrder",t[t.ReversedTreeOrder=1]="ReversedTreeOrder"})(r0||(r0={}));function $Y(t){let{acceleration:e,activator:n=ef.Pointer,canScroll:r,draggingRect:i,enabled:s,interval:o=5,order:a=r0.TreeOrder,pointerCoordinates:l,scrollableAncestors:c,scrollableAncestorRects:h,delta:f,threshold:p}=t;const g=UY({delta:f,disabled:!s}),[v,x]=Qq(),k=y.useRef({x:0,y:0}),C=y.useRef({x:0,y:0}),b=y.useMemo(()=>{switch(n){case ef.Pointer:return l?{top:l.y,bottom:l.y,left:l.x,right:l.x}:null;case ef.DraggableRect:return i}},[n,i,l]),_=y.useRef(null),T=y.useCallback(()=>{const L=_.current;if(!L)return;const M=k.current.x*C.current.x,A=k.current.y*C.current.y;L.scrollBy(M,A)},[]),R=y.useMemo(()=>a===r0.TreeOrder?[...c].reverse():c,[a,c]);y.useEffect(()=>{if(!s||!c.length||!b){x();return}for(const L of R){if((r==null?void 0:r(L))===!1)continue;const M=c.indexOf(L),A=h[M];if(!A)continue;const{direction:$,speed:j}=RY(L,A,b,e,p);for(const V of["x","y"])g[V][$[V]]||(j[V]=0,$[V]=0);if(j.x>0||j.y>0){x(),_.current=L,v(T,o),k.current=j,C.current=$;return}}k.current={x:0,y:0},C.current={x:0,y:0},x()},[e,T,r,x,s,o,JSON.stringify(b),JSON.stringify(g),v,c,R,h,JSON.stringify(p)])}const zY={x:{[Mr.Backward]:!1,[Mr.Forward]:!1},y:{[Mr.Backward]:!1,[Mr.Forward]:!1}};function UY(t){let{delta:e,disabled:n}=t;const r=jx(e);return rp(i=>{if(n||!r||!i)return zY;const s={x:Math.sign(e.x-r.x),y:Math.sign(e.y-r.y)};return{x:{[Mr.Backward]:i.x[Mr.Backward]||s.x===-1,[Mr.Forward]:i.x[Mr.Forward]||s.x===1},y:{[Mr.Backward]:i.y[Mr.Backward]||s.y===-1,[Mr.Forward]:i.y[Mr.Forward]||s.y===1}}},[n,e,r])}function VY(t,e){const n=e!=null?t.get(e):void 0,r=n?n.node.current:null;return rp(i=>{var s;return e==null?null:(s=r??i)!=null?s:null},[r,e])}function WY(t,e){return y.useMemo(()=>t.reduce((n,r)=>{const{sensor:i}=r,s=i.activators.map(o=>({eventName:o.eventName,handler:e(o.handler,r)}));return[...n,...s]},[]),[t,e])}var Of;(function(t){t[t.Always=0]="Always",t[t.BeforeDragging=1]="BeforeDragging",t[t.WhileDragging=2]="WhileDragging"})(Of||(Of={}));var Fx;(function(t){t.Optimized="optimized"})(Fx||(Fx={}));const vT=new Map;function HY(t,e){let{dragging:n,dependencies:r,config:i}=e;const[s,o]=y.useState(null),{frequency:a,measure:l,strategy:c}=i,h=y.useRef(t),f=k(),p=If(f),g=y.useCallback(function(C){C===void 0&&(C=[]),!p.current&&o(b=>b===null?C:b.concat(C.filter(_=>!b.includes(_))))},[p]),v=y.useRef(null),x=rp(C=>{if(f&&!n)return vT;if(!C||C===vT||h.current!==t||s!=null){const b=new Map;for(let _ of t){if(!_)continue;if(s&&s.length>0&&!s.includes(_.id)&&_.rect.current){b.set(_.id,_.rect.current);continue}const T=_.node.current,R=T?new vS(l(T),T):null;_.rect.current=R,R&&b.set(_.id,R)}return b}return C},[t,s,n,f,l]);return y.useEffect(()=>{h.current=t},[t]),y.useEffect(()=>{f||g()},[n,f]),y.useEffect(()=>{s&&s.length>0&&o(null)},[JSON.stringify(s)]),y.useEffect(()=>{f||typeof a!="number"||v.current!==null||(v.current=setTimeout(()=>{g(),v.current=null},a))},[a,f,g,...r]),{droppableRects:x,measureDroppableContainers:g,measuringScheduled:s!=null};function k(){switch(c){case Of.Always:return!1;case Of.BeforeDragging:return n;default:return!n}}}function iN(t,e){return rp(n=>t?n||(typeof e=="function"?e(t):t):null,[e,t])}function GY(t,e){return iN(t,e)}function qY(t){let{callback:e,disabled:n}=t;const r=pS(e),i=y.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:s}=window;return new s(r)},[r,n]);return y.useEffect(()=>()=>i==null?void 0:i.disconnect(),[i]),i}function X0(t){let{callback:e,disabled:n}=t;const r=pS(e),i=y.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:s}=window;return new s(r)},[n]);return y.useEffect(()=>()=>i==null?void 0:i.disconnect(),[i]),i}function YY(t){return new vS(Ld(t),t)}function yT(t,e,n){e===void 0&&(e=YY);const[r,i]=y.useState(null);function s(){i(l=>{if(!t)return null;if(t.isConnected===!1){var c;return(c=l??n)!=null?c:null}const h=e(t);return JSON.stringify(l)===JSON.stringify(h)?l:h})}const o=qY({callback(l){if(t)for(const c of l){const{type:h,target:f}=c;if(h==="childList"&&f instanceof HTMLElement&&f.contains(t)){s();break}}}}),a=X0({callback:s});return To(()=>{s(),t?(a==null||a.observe(t),o==null||o.observe(document.body,{childList:!0,subtree:!0})):(a==null||a.disconnect(),o==null||o.disconnect())},[t]),r}function KY(t){const e=iN(t);return KA(t,e)}const wT=[];function XY(t){const e=y.useRef(t),n=rp(r=>t?r&&r!==wT&&t&&e.current&&t.parentNode===e.current.parentNode?r:mS(t):wT,[t]);return y.useEffect(()=>{e.current=t},[t]),n}function ZY(t){const[e,n]=y.useState(null),r=y.useRef(t),i=y.useCallback(s=>{const o=_1(s.target);o&&n(a=>a?(a.set(o,Ox(o)),new Map(a)):null)},[]);return y.useEffect(()=>{const s=r.current;if(t!==s){o(s);const a=t.map(l=>{const c=_1(l);return c?(c.addEventListener("scroll",i,{passive:!0}),[c,Ox(c)]):null}).filter(l=>l!=null);n(a.length?new Map(a):null),r.current=t}return()=>{o(t),o(s)};function o(a){a.forEach(l=>{const c=_1(l);c==null||c.removeEventListener("scroll",i)})}},[i,t]),y.useMemo(()=>t.length?e?Array.from(e.values()).reduce((s,o)=>Uc(s,o),eo):tN(t):eo,[t,e])}function xT(t,e){e===void 0&&(e=[]);const n=y.useRef(null);return y.useEffect(()=>{n.current=null},e),y.useEffect(()=>{const r=t!==eo;r&&!n.current&&(n.current=t),!r&&n.current&&(n.current=null)},[t]),n.current?t0(t,n.current):eo}function QY(t){y.useEffect(()=>{if(!Y0)return;const e=t.map(n=>{let{sensor:r}=n;return r.setup==null?void 0:r.setup()});return()=>{for(const n of e)n==null||n()}},t.map(e=>{let{sensor:n}=e;return n}))}function JY(t,e){return y.useMemo(()=>t.reduce((n,r)=>{let{eventName:i,handler:s}=r;return n[i]=o=>{s(o,e)},n},{}),[t,e])}function sN(t){return y.useMemo(()=>t?SY(t):null,[t])}const _T=[];function eK(t,e){e===void 0&&(e=Ld);const[n]=t,r=sN(n?Oi(n):null),[i,s]=y.useState(_T);function o(){s(()=>t.length?t.map(l=>JA(l)?r:new vS(e(l),l)):_T)}const a=X0({callback:o});return To(()=>{a==null||a.disconnect(),o(),t.forEach(l=>a==null?void 0:a.observe(l))},[t]),i}function tK(t){if(!t)return null;if(t.children.length>1)return t;const e=t.children[0];return np(e)?e:t}function nK(t){let{measure:e}=t;const[n,r]=y.useState(null),i=y.useCallback(c=>{for(const{target:h}of c)if(np(h)){r(f=>{const p=e(h);return f?{...f,width:p.width,height:p.height}:p});break}},[e]),s=X0({callback:i}),o=y.useCallback(c=>{const h=tK(c);s==null||s.disconnect(),h&&(s==null||s.observe(h)),r(h?e(h):null)},[e,s]),[a,l]=e0(o);return y.useMemo(()=>({nodeRef:a,rect:n,setRef:l}),[n,a,l])}const rK=[{sensor:K0,options:{}},{sensor:rN,options:{}}],iK={current:{}},um={draggable:{measure:fT},droppable:{measure:fT,strategy:Of.WhileDragging,frequency:Fx.Optimized},dragOverlay:{measure:Ld}};class tf extends Map{get(e){var n;return e!=null&&(n=super.get(e))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:n}=e;return!n})}getNodeFor(e){var n,r;return(n=(r=this.get(e))==null?void 0:r.node.current)!=null?n:void 0}}const sK={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new tf,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:n0},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:um,measureDroppableContainers:n0,windowRect:null,measuringScheduled:!1},oK={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:n0,draggableNodes:new Map,over:null,measureDroppableContainers:n0},Z0=y.createContext(oK),oN=y.createContext(sK);function aK(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new tf}}}function lK(t,e){switch(e.type){case _r.DragStart:return{...t,draggable:{...t.draggable,initialCoordinates:e.initialCoordinates,active:e.active}};case _r.DragMove:return t.draggable.active==null?t:{...t,draggable:{...t.draggable,translate:{x:e.coordinates.x-t.draggable.initialCoordinates.x,y:e.coordinates.y-t.draggable.initialCoordinates.y}}};case _r.DragEnd:case _r.DragCancel:return{...t,draggable:{...t.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case _r.RegisterDroppable:{const{element:n}=e,{id:r}=n,i=new tf(t.droppable.containers);return i.set(r,n),{...t,droppable:{...t.droppable,containers:i}}}case _r.SetDroppableDisabled:{const{id:n,key:r,disabled:i}=e,s=t.droppable.containers.get(n);if(!s||r!==s.key)return t;const o=new tf(t.droppable.containers);return o.set(n,{...s,disabled:i}),{...t,droppable:{...t.droppable,containers:o}}}case _r.UnregisterDroppable:{const{id:n,key:r}=e,i=t.droppable.containers.get(n);if(!i||r!==i.key)return t;const s=new tf(t.droppable.containers);return s.delete(n),{...t,droppable:{...t.droppable,containers:s}}}default:return t}}function uK(t){let{disabled:e}=t;const{active:n,activatorEvent:r,draggableNodes:i}=y.useContext(Z0),s=jx(r),o=jx(n==null?void 0:n.id);return y.useEffect(()=>{if(!e&&!r&&s&&o!=null){if(!gS(s)||document.activeElement===s.target)return;const a=i.get(o);if(!a)return;const{activatorNode:l,node:c}=a;if(!l.current&&!c.current)return;requestAnimationFrame(()=>{for(const h of[l.current,c.current]){if(!h)continue;const f=tY(h);if(f){f.focus();break}}})}},[r,e,i,o,s]),null}function cK(t,e){let{transform:n,...r}=e;return t!=null&&t.length?t.reduce((i,s)=>s({transform:i,...r}),n):n}function dK(t){return y.useMemo(()=>({draggable:{...um.draggable,...t==null?void 0:t.draggable},droppable:{...um.droppable,...t==null?void 0:t.droppable},dragOverlay:{...um.dragOverlay,...t==null?void 0:t.dragOverlay}}),[t==null?void 0:t.draggable,t==null?void 0:t.droppable,t==null?void 0:t.dragOverlay])}function hK(t){let{activeNode:e,measure:n,initialRect:r,config:i=!0}=t;const s=y.useRef(!1),{x:o,y:a}=typeof i=="boolean"?{x:i,y:i}:i;To(()=>{if(!o&&!a||!e){s.current=!1;return}if(s.current||!r)return;const c=e==null?void 0:e.node.current;if(!c||c.isConnected===!1)return;const h=n(c),f=KA(h,r);if(o||(f.x=0),a||(f.y=0),s.current=!0,Math.abs(f.x)>0||Math.abs(f.y)>0){const p=XA(c);p&&p.scrollBy({top:f.y,left:f.x})}},[e,o,a,r,n])}const aN=y.createContext({...eo,scaleX:1,scaleY:1});var Ya;(function(t){t[t.Uninitialized=0]="Uninitialized",t[t.Initializing=1]="Initializing",t[t.Initialized=2]="Initialized"})(Ya||(Ya={}));const lN=y.memo(function(e){var n,r,i,s;let{id:o,accessibility:a,autoScroll:l=!0,children:c,sensors:h=rK,collisionDetection:f=mY,measuring:p,modifiers:g,...v}=e;const x=y.useReducer(lK,void 0,aK),[k,C]=x,[b,_]=aY(),[T,R]=y.useState(Ya.Uninitialized),L=T===Ya.Initialized,{draggable:{active:M,nodes:A,translate:$},droppable:{containers:j}}=k,V=M!=null?A.get(M):null,U=y.useRef({initial:null,translated:null}),B=y.useMemo(()=>{var rt;return M!=null?{id:M,data:(rt=V==null?void 0:V.data)!=null?rt:iK,rect:U}:null},[M,V]),Z=y.useRef(null),[q,G]=y.useState(null),[te,O]=y.useState(null),K=If(v,Object.values(v)),Y=ip("DndDescribedBy",o),xe=y.useMemo(()=>j.getEnabled(),[j]),re=dK(p),{droppableRects:ue,measureDroppableContainers:ke,measuringScheduled:qe}=HY(xe,{dragging:L,dependencies:[$.x,$.y],config:re.droppable}),he=VY(A,M),ge=y.useMemo(()=>te?Ix(te):null,[te]),we=Lt(),ae=GY(he,re.draggable.measure);hK({activeNode:M!=null?A.get(M):null,config:we.layoutShiftCompensation,initialRect:ae,measure:re.draggable.measure});const me=yT(he,re.draggable.measure,ae),X=yT(he?he.parentElement:null),ye=y.useRef({activatorEvent:null,active:null,activeNode:he,collisionRect:null,collisions:null,droppableRects:ue,draggableNodes:A,draggingNode:null,draggingNodeRect:null,droppableContainers:j,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),_e=j.getNodeFor((n=ye.current.over)==null?void 0:n.id),at=nK({measure:re.dragOverlay.measure}),Le=(r=at.nodeRef.current)!=null?r:he,fe=L?(i=at.rect)!=null?i:me:null,ve=!!(at.nodeRef.current&&at.rect),Ae=KY(ve?null:me),De=sN(Le?Oi(Le):null),Ue=XY(L?_e??he:null),Ie=eK(Ue),ze=cK(g,{transform:{x:$.x-Ae.x,y:$.y-Ae.y,scaleX:1,scaleY:1},activatorEvent:te,active:B,activeNodeRect:me,containerNodeRect:X,draggingNodeRect:fe,over:ye.current.over,overlayNodeRect:at.rect,scrollableAncestors:Ue,scrollableAncestorRects:Ie,windowRect:De}),Ce=ge?Uc(ge,$):null,Oe=ZY(Ue),Ne=xT(Oe),yt=xT(Oe,[me]),Fe=Uc(ze,Ne),st=fe?wY(fe,ze):null,wt=B&&st?f({active:B,collisionRect:st,droppableRects:ue,droppableContainers:xe,pointerCoordinates:Ce}):null,At=pY(wt,"id"),[Ye,Re]=y.useState(null),Te=ve?ze:Uc(ze,yt),pe=vY(Te,(s=Ye==null?void 0:Ye.rect)!=null?s:null,me),be=y.useRef(null),gt=y.useCallback((rt,Nt)=>{let{sensor:ht,options:zt}=Nt;if(Z.current==null)return;const Et=A.get(Z.current);if(!Et)return;const ut=rt.nativeEvent,Xt=new ht({active:Z.current,activeNode:Et,event:ut,options:zt,context:ye,onAbort(Ft){if(!A.get(Ft))return;const{onDragAbort:ln}=K.current,Gt={id:Ft};ln==null||ln(Gt),b({type:"onDragAbort",event:Gt})},onPending(Ft,St,ln,Gt){if(!A.get(Ft))return;const{onDragPending:mt}=K.current,vt={id:Ft,constraint:St,initialCoordinates:ln,offset:Gt};mt==null||mt(vt),b({type:"onDragPending",event:vt})},onStart(Ft){const St=Z.current;if(St==null)return;const ln=A.get(St);if(!ln)return;const{onDragStart:Gt}=K.current,qt={activatorEvent:ut,active:{id:St,data:ln.data,rect:U}};oi.unstable_batchedUpdates(()=>{Gt==null||Gt(qt),R(Ya.Initializing),C({type:_r.DragStart,initialCoordinates:Ft,active:St}),b({type:"onDragStart",event:qt}),G(be.current),O(ut)})},onMove(Ft){C({type:_r.DragMove,coordinates:Ft})},onEnd:ft(_r.DragEnd),onCancel:ft(_r.DragCancel)});be.current=Xt;function ft(Ft){return async function(){const{active:ln,collisions:Gt,over:qt,scrollAdjustedTranslate:mt}=ye.current;let vt=null;if(ln&&mt){const{cancelDrop:Ut}=K.current;vt={activatorEvent:ut,active:ln,collisions:Gt,delta:mt,over:qt},Ft===_r.DragEnd&&typeof Ut=="function"&&await Promise.resolve(Ut(vt))&&(Ft=_r.DragCancel)}Z.current=null,oi.unstable_batchedUpdates(()=>{C({type:Ft}),R(Ya.Uninitialized),Re(null),G(null),O(null),be.current=null;const Ut=Ft===_r.DragEnd?"onDragEnd":"onDragCancel";if(vt){const Cr=K.current[Ut];Cr==null||Cr(vt),b({type:Ut,event:vt})}})}}},[A]),nt=y.useCallback((rt,Nt)=>(ht,zt)=>{const Et=ht.nativeEvent,ut=A.get(zt);if(Z.current!==null||!ut||Et.dndKit||Et.defaultPrevented)return;const Xt={active:ut};rt(ht,Nt.options,Xt)===!0&&(Et.dndKit={capturedBy:Nt.sensor},Z.current=zt,gt(ht,Nt))},[A,gt]),lt=WY(h,nt);QY(h),To(()=>{me&&T===Ya.Initializing&&R(Ya.Initialized)},[me,T]),y.useEffect(()=>{const{onDragMove:rt}=K.current,{active:Nt,activatorEvent:ht,collisions:zt,over:Et}=ye.current;if(!Nt||!ht)return;const ut={active:Nt,activatorEvent:ht,collisions:zt,delta:{x:Fe.x,y:Fe.y},over:Et};oi.unstable_batchedUpdates(()=>{rt==null||rt(ut),b({type:"onDragMove",event:ut})})},[Fe.x,Fe.y]),y.useEffect(()=>{const{active:rt,activatorEvent:Nt,collisions:ht,droppableContainers:zt,scrollAdjustedTranslate:Et}=ye.current;if(!rt||Z.current==null||!Nt||!Et)return;const{onDragOver:ut}=K.current,Xt=zt.get(At),ft=Xt&&Xt.rect.current?{id:Xt.id,rect:Xt.rect.current,data:Xt.data,disabled:Xt.disabled}:null,Ft={active:rt,activatorEvent:Nt,collisions:ht,delta:{x:Et.x,y:Et.y},over:ft};oi.unstable_batchedUpdates(()=>{Re(ft),ut==null||ut(Ft),b({type:"onDragOver",event:Ft})})},[At]),To(()=>{ye.current={activatorEvent:te,active:B,activeNode:he,collisionRect:st,collisions:wt,droppableRects:ue,draggableNodes:A,draggingNode:Le,draggingNodeRect:fe,droppableContainers:j,over:Ye,scrollableAncestors:Ue,scrollAdjustedTranslate:Fe},U.current={initial:fe,translated:st}},[B,he,wt,st,A,Le,fe,ue,j,Ye,Ue,Fe]),$Y({...we,delta:$,draggingRect:st,pointerCoordinates:Ce,scrollableAncestors:Ue,scrollableAncestorRects:Ie});const Ke=y.useMemo(()=>({active:B,activeNode:he,activeNodeRect:me,activatorEvent:te,collisions:wt,containerNodeRect:X,dragOverlay:at,draggableNodes:A,droppableContainers:j,droppableRects:ue,over:Ye,measureDroppableContainers:ke,scrollableAncestors:Ue,scrollableAncestorRects:Ie,measuringConfiguration:re,measuringScheduled:qe,windowRect:De}),[B,he,me,te,wt,X,at,A,j,ue,Ye,ke,Ue,Ie,re,qe,De]),xt=y.useMemo(()=>({activatorEvent:te,activators:lt,active:B,activeNodeRect:me,ariaDescribedById:{draggable:Y},dispatch:C,draggableNodes:A,over:Ye,measureDroppableContainers:ke}),[te,lt,B,me,C,Y,A,Ye,ke]);return Be.createElement(HA.Provider,{value:_},Be.createElement(Z0.Provider,{value:xt},Be.createElement(oN.Provider,{value:Ke},Be.createElement(aN.Provider,{value:pe},c)),Be.createElement(uK,{disabled:(a==null?void 0:a.restoreFocus)===!1})),Be.createElement(cY,{...a,hiddenTextDescribedById:Y}));function Lt(){const rt=(q==null?void 0:q.autoScrollEnabled)===!1,Nt=typeof l=="object"?l.enabled===!1:l===!1,ht=L&&!rt&&!Nt;return typeof l=="object"?{...l,enabled:ht}:{enabled:ht}}}),fK=y.createContext(null),bT="button",pK="Draggable";function gK(t){let{id:e,data:n,disabled:r=!1,attributes:i}=t;const s=ip(pK),{activators:o,activatorEvent:a,active:l,activeNodeRect:c,ariaDescribedById:h,draggableNodes:f,over:p}=y.useContext(Z0),{role:g=bT,roleDescription:v="draggable",tabIndex:x=0}=i??{},k=(l==null?void 0:l.id)===e,C=y.useContext(k?aN:fK),[b,_]=e0(),[T,R]=e0(),L=JY(o,e),M=If(n);To(()=>(f.set(e,{id:e,key:s,node:b,activatorNode:T,data:M}),()=>{const $=f.get(e);$&&$.key===s&&f.delete(e)}),[f,e]);const A=y.useMemo(()=>({role:g,tabIndex:x,"aria-disabled":r,"aria-pressed":k&&g===bT?!0:void 0,"aria-roledescription":v,"aria-describedby":h.draggable}),[r,g,x,k,v,h.draggable]);return{active:l,activatorEvent:a,activeNodeRect:c,attributes:A,isDragging:k,listeners:r?void 0:L,node:b,over:p,setNodeRef:_,setActivatorNodeRef:R,transform:C}}function mK(){return y.useContext(oN)}const vK="Droppable",yK={timeout:25};function wK(t){let{data:e,disabled:n=!1,id:r,resizeObserverConfig:i}=t;const s=ip(vK),{active:o,dispatch:a,over:l,measureDroppableContainers:c}=y.useContext(Z0),h=y.useRef({disabled:n}),f=y.useRef(!1),p=y.useRef(null),g=y.useRef(null),{disabled:v,updateMeasurementsFor:x,timeout:k}={...yK,...i},C=If(x??r),b=y.useCallback(()=>{if(!f.current){f.current=!0;return}g.current!=null&&clearTimeout(g.current),g.current=setTimeout(()=>{c(Array.isArray(C.current)?C.current:[C.current]),g.current=null},k)},[k]),_=X0({callback:b,disabled:v||!o}),T=y.useCallback((A,$)=>{_&&($&&(_.unobserve($),f.current=!1),A&&_.observe(A))},[_]),[R,L]=e0(T),M=If(e);return y.useEffect(()=>{!_||!R.current||(_.disconnect(),f.current=!1,_.observe(R.current))},[R,_]),y.useEffect(()=>(a({type:_r.RegisterDroppable,element:{id:r,key:s,disabled:n,node:R,rect:p,data:M}}),()=>a({type:_r.UnregisterDroppable,key:s,id:r})),[r]),y.useEffect(()=>{n!==h.current.disabled&&(a({type:_r.SetDroppableDisabled,id:r,key:s,disabled:n}),h.current.disabled=n)},[r,s,n,a]),{active:o,rect:p,isOver:(l==null?void 0:l.id)===r,node:R,over:l,setNodeRef:L}}function Q0(t,e,n){const r=t.slice();return r.splice(n<0?r.length+n:n,0,r.splice(e,1)[0]),r}function xK(t,e){return t.reduce((n,r,i)=>{const s=e.get(r);return s&&(n[i]=s),n},Array(t.length))}function Mg(t){return t!==null&&t>=0}function _K(t,e){if(t===e)return!0;if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function bK(t){return typeof t=="boolean"?{draggable:t,droppable:t}:t}const uN=t=>{let{rects:e,activeIndex:n,overIndex:r,index:i}=t;const s=Q0(e,r,n),o=e[i],a=s[i];return!a||!o?null:{x:a.left-o.left,y:a.top-o.top,scaleX:a.width/o.width,scaleY:a.height/o.height}},Ag={scaleX:1,scaleY:1},cN=t=>{var e;let{activeIndex:n,activeNodeRect:r,index:i,rects:s,overIndex:o}=t;const a=(e=s[n])!=null?e:r;if(!a)return null;if(i===n){const c=s[o];return c?{x:0,y:n<o?c.top+c.height-(a.top+a.height):c.top-a.top,...Ag}:null}const l=SK(s,i,n);return i>n&&i<=o?{x:0,y:-a.height-l,...Ag}:i<n&&i>=o?{x:0,y:a.height+l,...Ag}:{x:0,y:0,...Ag}};function SK(t,e,n){const r=t[e],i=t[e-1],s=t[e+1];return r?n<e?i?r.top-(i.top+i.height):s?s.top-(r.top+r.height):0:s?s.top-(r.top+r.height):i?r.top-(i.top+i.height):0:0}const dN="Sortable",hN=Be.createContext({activeIndex:-1,containerId:dN,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:uN,disabled:{draggable:!1,droppable:!1}});function fN(t){let{children:e,id:n,items:r,strategy:i=uN,disabled:s=!1}=t;const{active:o,dragOverlay:a,droppableRects:l,over:c,measureDroppableContainers:h}=mK(),f=ip(dN,n),p=a.rect!==null,g=y.useMemo(()=>r.map(L=>typeof L=="object"&&"id"in L?L.id:L),[r]),v=o!=null,x=o?g.indexOf(o.id):-1,k=c?g.indexOf(c.id):-1,C=y.useRef(g),b=!_K(g,C.current),_=k!==-1&&x===-1||b,T=bK(s);To(()=>{b&&v&&h(g)},[b,g,v,h]),y.useEffect(()=>{C.current=g},[g]);const R=y.useMemo(()=>({activeIndex:x,containerId:f,disabled:T,disableTransforms:_,items:g,overIndex:k,useDragOverlay:p,sortedRects:xK(g,l),strategy:i}),[x,f,T.draggable,T.droppable,_,g,k,l,p,i]);return Be.createElement(hN.Provider,{value:R},e)}const CK=t=>{let{id:e,items:n,activeIndex:r,overIndex:i}=t;return Q0(n,r,i).indexOf(e)},kK=t=>{let{containerId:e,isSorting:n,wasDragging:r,index:i,items:s,newIndex:o,previousItems:a,previousContainerId:l,transition:c}=t;return!c||!r||a!==s&&i===o?!1:n?!0:o!==i&&e===l},EK={duration:200,easing:"ease"},pN="transform",RK=rd.Transition.toString({property:pN,duration:0,easing:"linear"}),TK={roleDescription:"sortable"};function PK(t){let{disabled:e,index:n,node:r,rect:i}=t;const[s,o]=y.useState(null),a=y.useRef(n);return To(()=>{if(!e&&n!==a.current&&r.current){const l=i.current;if(l){const c=Ld(r.current,{ignoreTransform:!0}),h={x:l.left-c.left,y:l.top-c.top,scaleX:l.width/c.width,scaleY:l.height/c.height};(h.x||h.y)&&o(h)}}n!==a.current&&(a.current=n)},[e,n,r,i]),y.useEffect(()=>{s&&o(null)},[s]),s}function gN(t){let{animateLayoutChanges:e=kK,attributes:n,disabled:r,data:i,getNewIndex:s=CK,id:o,strategy:a,resizeObserverConfig:l,transition:c=EK}=t;const{items:h,containerId:f,activeIndex:p,disabled:g,disableTransforms:v,sortedRects:x,overIndex:k,useDragOverlay:C,strategy:b}=y.useContext(hN),_=LK(r,g),T=h.indexOf(o),R=y.useMemo(()=>({sortable:{containerId:f,index:T,items:h},...i}),[f,i,T,h]),L=y.useMemo(()=>h.slice(h.indexOf(o)),[h,o]),{rect:M,node:A,isOver:$,setNodeRef:j}=wK({id:o,data:R,disabled:_.droppable,resizeObserverConfig:{updateMeasurementsFor:L,...l}}),{active:V,activatorEvent:U,activeNodeRect:B,attributes:Z,setNodeRef:q,listeners:G,isDragging:te,over:O,setActivatorNodeRef:K,transform:Y}=gK({id:o,data:R,attributes:{...TK,...n},disabled:_.draggable}),xe=Zq(j,q),re=!!V,ue=re&&!v&&Mg(p)&&Mg(k),ke=!C&&te,qe=ke&&ue?Y:null,ge=ue?qe??(a??b)({rects:x,activeNodeRect:B,activeIndex:p,overIndex:k,index:T}):null,we=Mg(p)&&Mg(k)?s({id:o,items:h,activeIndex:p,overIndex:k}):T,ae=V==null?void 0:V.id,me=y.useRef({activeId:ae,items:h,newIndex:we,containerId:f}),X=h!==me.current.items,ye=e({active:V,containerId:f,isDragging:te,isSorting:re,id:o,index:T,items:h,newIndex:me.current.newIndex,previousItems:me.current.items,previousContainerId:me.current.containerId,transition:c,wasDragging:me.current.activeId!=null}),_e=PK({disabled:!ye,index:T,node:A,rect:M});return y.useEffect(()=>{re&&me.current.newIndex!==we&&(me.current.newIndex=we),f!==me.current.containerId&&(me.current.containerId=f),h!==me.current.items&&(me.current.items=h)},[re,we,f,h]),y.useEffect(()=>{if(ae===me.current.activeId)return;if(ae!=null&&me.current.activeId==null){me.current.activeId=ae;return}const Le=setTimeout(()=>{me.current.activeId=ae},50);return()=>clearTimeout(Le)},[ae]),{active:V,activeIndex:p,attributes:Z,data:R,rect:M,index:T,newIndex:we,items:h,isOver:$,isSorting:re,isDragging:te,listeners:G,node:A,overIndex:k,over:O,setNodeRef:xe,setActivatorNodeRef:K,setDroppableNodeRef:j,setDraggableNodeRef:q,transform:_e??ge,transition:at()};function at(){if(_e||X&&me.current.newIndex===T)return RK;if(!(ke&&!gS(U)||!c)&&(re||ye))return rd.Transition.toString({...c,property:pN})}}function LK(t,e){var n,r;return typeof t=="boolean"?{draggable:t,droppable:!1}:{draggable:(n=t==null?void 0:t.draggable)!=null?n:e.draggable,droppable:(r=t==null?void 0:t.droppable)!=null?r:e.droppable}}rn.Down,rn.Right,rn.Up,rn.Left;const mN=t=>{let{transform:e}=t;return{...e,x:0}},MK={...TP};let ST=0;function AK(t,e="mui"){const[n,r]=y.useState(t),i=t||n;return y.useEffect(()=>{n==null&&(ST+=1,r(`${e}-${ST}`))},[n,e]),i}const CT=MK.useId;function Ll(t,e){if(CT!==void 0){const n=CT();return t??(e?`${e}-${n}`:n)}return AK(t,e)}function Ao(t,...e){const n=new URL(`https://base-ui.com/production-error/${t}`);return e.forEach(r=>n.searchParams.append("args[]",r)),`Base UI error #${t}; visit ${n} for the full message.`}const vN=y.createContext(void 0);function sp(t=!0){const e=y.useContext(vN);if(e===void 0&&!t)throw new Error(Ao(25));return e}const yN=y.createContext(void 0);function wN(t){const e=y.useContext(yN);if(e===void 0&&!t)throw new Error(Ao(33));return e}const wS=y.createContext(void 0);function Ml(t){const e=y.useContext(wS);if(e===void 0&&!t)throw new Error(Ao(36));return e}const kT={};function Ls(t,e){const n=y.useRef(kT);return n.current===kT&&(n.current=t(e)),n}function id(t,e,n,r){const i=Ls(xN).current;return jK(i,t,e,n,r)&&_N(i,[t,e,n,r]),i.callback}function NK(t){const e=Ls(xN).current;return IK(e,t)&&_N(e,t),e.callback}function xN(){return{callback:null,cleanup:null,refs:[]}}function jK(t,e,n,r,i){return t.refs[0]!==e||t.refs[1]!==n||t.refs[2]!==r||t.refs[3]!==i}function IK(t,e){return t.refs.length!==e.length||t.refs.some((n,r)=>n!==e[r])}function _N(t,e){if(t.refs=e,e.every(n=>n==null)){t.callback=null;return}t.callback=n=>{if(t.cleanup&&(t.cleanup(),t.cleanup=null),n!=null){const r=Array(e.length).fill(null);for(let i=0;i<e.length;i+=1){const s=e[i];if(s!=null)switch(typeof s){case"function":{const o=s(n);typeof o=="function"&&(r[i]=o);break}case"object":{s.current=n;break}}}t.cleanup=()=>{for(let i=0;i<e.length;i+=1){const s=e[i];if(s!=null)switch(typeof s){case"function":{const o=r[i];typeof o=="function"?o():s(null);break}case"object":{s.current=null;break}}}}}}}const OK=parseInt(y.version,10);function xS(t){return OK>=t}function ET(t){if(!y.isValidElement(t))return null;const e=t,n=e.props;return(xS(19)?n==null?void 0:n.ref:e.ref)??null}function Bx(t,e){if(t&&!e)return t;if(!t&&e)return e;if(t||e)return{...t,...e}}function DK(t,e){const n={};for(const r in t){const i=t[r];if(e!=null&&e.hasOwnProperty(r)){const s=e[r](i);s!=null&&Object.assign(n,s);continue}i===!0?n[`data-${r.toLowerCase()}`]="":i&&(n[`data-${r.toLowerCase()}`]=i.toString())}return n}function FK(t,e){return typeof t=="function"?t(e):t}function BK(t,e){return typeof t=="function"?t(e):t}const nf={};function J0(t,e,n,r,i){let s={...$x(t,nf)};return e&&(s=Ph(s,e)),n&&(s=Ph(s,n)),r&&(s=Ph(s,r)),i&&(s=Ph(s,i)),s}function $K(t){if(t.length===0)return nf;if(t.length===1)return $x(t[0],nf);let e={...$x(t[0],nf)};for(let n=1;n<t.length;n+=1)e=Ph(e,t[n]);return e}function Ph(t,e){return bN(e)?e(t):zK(t,e)}function zK(t,e){if(!e)return t;for(const n in e){const r=e[n];switch(n){case"style":{t[n]=Bx(t.style,r);break}case"className":{t[n]=SN(t.className,r);break}default:UK(n,r)?t[n]=VK(t[n],r):t[n]=r}}return t}function UK(t,e){const n=t.charCodeAt(0),r=t.charCodeAt(1),i=t.charCodeAt(2);return n===111&&r===110&&i>=65&&i<=90&&(typeof e=="function"||typeof e>"u")}function bN(t){return typeof t=="function"}function $x(t,e){return bN(t)?t(e):t??nf}function VK(t,e){return e?t?n=>{if(WK(n)){const i=n;zx(i);const s=e(i);return i.baseUIHandlerPrevented||t==null||t(i),s}const r=e(n);return t==null||t(n),r}:e:t}function zx(t){return t.preventBaseUIHandler=()=>{t.baseUIHandlerPrevented=!0},t}function SN(t,e){return e?t?e+" "+t:e:t}function WK(t){return t!=null&&typeof t=="object"&&"nativeEvent"in t}function CN(){}const i0=Object.freeze([]),Ar=Object.freeze({}),HK=500,GK=500,qK={style:{transition:"none"}},YK="data-base-ui-click-trigger",KK={fallbackAxisSide:"none"},XK={clipPath:"inset(50%)",position:"fixed",top:0,left:0};function Al(t,e,n={}){const r=e.render,i=ZK(e,n);if(n.enabled===!1)return null;const s=n.state??Ar;return QK(t,r,i,s)}function ZK(t,e={}){const{className:n,style:r,render:i}=t,{state:s=Ar,ref:o,props:a,stateAttributesMapping:l,enabled:c=!0}=e,h=c?FK(n,s):void 0,f=c?BK(r,s):void 0,p=c?DK(s,l):Ar,g=c?Bx(p,Array.isArray(a)?$K(a):a)??Ar:Ar;return typeof document<"u"&&(c?Array.isArray(o)?g.ref=NK([g.ref,ET(i),...o]):g.ref=id(g.ref,ET(i),o):id(null,null)),c?(h!==void 0&&(g.className=SN(g.className,h)),f!==void 0&&(g.style=Bx(g.style,f)),g):Ar}function QK(t,e,n,r){if(e){if(typeof e=="function")return e(n,r);const i=J0(n,e.props);return i.ref=n.ref,y.cloneElement(e,i)}if(t&&typeof t=="string")return JK(t,n);throw new Error(Ao(8))}function JK(t,e){return t==="button"?y.createElement("button",{type:"button",...e,key:e.key}):t==="img"?y.createElement("img",{alt:"",...e,key:e.key}):y.createElement(t,e)}let s0=function(t){return t.startingStyle="data-starting-style",t.endingStyle="data-ending-style",t}({});const eX={[s0.startingStyle]:""},tX={[s0.endingStyle]:""},nX={transitionStatus(t){return t==="starting"?eX:t==="ending"?tX:null}};let _S=function(t){return t.open="data-open",t.closed="data-closed",t[t.startingStyle=s0.startingStyle]="startingStyle",t[t.endingStyle=s0.endingStyle]="endingStyle",t.anchorHidden="data-anchor-hidden",t}({}),Ux=function(t){return t.popupOpen="data-popup-open",t.pressed="data-pressed",t}({});Ux.popupOpen+"";const rX={[Ux.popupOpen]:"",[Ux.pressed]:""},iX={[_S.open]:""},sX={[_S.closed]:""},oX={[_S.anchorHidden]:""},Vx={open(t){return t?rX:null}},kN={open(t){return t?iX:sX},anchorHidden(t){return t?oX:null}},aX="none",hl="trigger-press",Yi="trigger-hover",o0="trigger-focus",bS="outside-press",EN="item-press",sd="focus-out",SS="escape-key",cm="list-navigation",RN="cancel-open",Lh="sibling-open",lX="imperative-action",C1=TP[`useInsertionEffect${Math.random().toFixed(1)}`.slice(0,-3)],uX=C1&&C1!==y.useLayoutEffect?C1:t=>t();function dt(t){const e=Ls(cX).current;return e.next=t,uX(e.effect),e.trampoline}function cX(){const t={next:void 0,callback:dX,trampoline:(...e)=>{var n;return(n=t.callback)==null?void 0:n.call(t,...e)},effect:()=>{t.callback=t.next}};return t}function dX(){}function ev(){return typeof window<"u"}function Nl(t){return CS(t)?(t.nodeName||"").toLowerCase():"#document"}function jr(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function No(t){var e;return(e=(CS(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function CS(t){return ev()?t instanceof Node||t instanceof jr(t).Node:!1}function un(t){return ev()?t instanceof Element||t instanceof jr(t).Element:!1}function Kn(t){return ev()?t instanceof HTMLElement||t instanceof jr(t).HTMLElement:!1}function Wx(t){return!ev()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof jr(t).ShadowRoot}const hX=new Set(["inline","contents"]);function Iu(t){const{overflow:e,overflowX:n,overflowY:r,display:i}=es(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!hX.has(i)}const fX=new Set(["table","td","th"]);function pX(t){return fX.has(Nl(t))}const gX=[":popover-open",":modal"];function tv(t){return gX.some(e=>{try{return t.matches(e)}catch{return!1}})}const mX=["transform","translate","scale","rotate","perspective"],vX=["transform","translate","scale","rotate","perspective","filter"],yX=["paint","layout","strict","content"];function kS(t){const e=nv(),n=un(t)?es(t):t;return mX.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||vX.some(r=>(n.willChange||"").includes(r))||yX.some(r=>(n.contain||"").includes(r))}function wX(t){let e=Po(t);for(;Kn(e)&&!Eo(e);){if(kS(e))return e;if(tv(e))return null;e=Po(e)}return null}function nv(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const xX=new Set(["html","body","#document"]);function Eo(t){return xX.has(Nl(t))}function es(t){return jr(t).getComputedStyle(t)}function rv(t){return un(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function Po(t){if(Nl(t)==="html")return t;const e=t.assignedSlot||t.parentNode||Wx(t)&&t.host||No(t);return Wx(e)?e.host:e}function TN(t){const e=Po(t);return Eo(e)?t.ownerDocument?t.ownerDocument.body:t.body:Kn(e)&&Iu(e)?e:TN(e)}function fl(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const i=TN(t),s=i===((r=t.ownerDocument)==null?void 0:r.body),o=jr(i);if(s){const a=Hx(o);return e.concat(o,o.visualViewport||[],Iu(i)?i:[],a&&n?fl(a):[])}return e.concat(i,fl(i,[],n))}function Hx(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}const _X=()=>{},kt=typeof document<"u"?y.useLayoutEffect:_X,bX=y.createContext(void 0);function ES(t=!1){const e=y.useContext(bX);if(e===void 0&&!t)throw new Error(Ao(16));return e}function SX(t){const{focusableWhenDisabled:e,disabled:n,composite:r=!1,tabIndex:i=0,isNativeButton:s}=t,o=r&&e!==!1,a=r&&e===!1;return{props:y.useMemo(()=>{const c={onKeyDown(h){n&&e&&h.key!=="Tab"&&h.preventDefault()}};return r||(c.tabIndex=i,!s&&n&&(c.tabIndex=e?i:-1)),(s&&(e||o)||!s&&n)&&(c["aria-disabled"]=n),s&&(!e||a)&&(c.disabled=n),c},[r,n,e,o,a,s,i])}}function PN(t={}){const{disabled:e=!1,focusableWhenDisabled:n,tabIndex:r=0,native:i=!0}=t,s=y.useRef(null),o=ES(!0)!==void 0,a=dt(()=>{const p=s.current;return!!((p==null?void 0:p.tagName)==="A"&&(p!=null&&p.href))}),{props:l}=SX({focusableWhenDisabled:n,disabled:e,composite:o,tabIndex:r,isNativeButton:i}),c=y.useCallback(()=>{const p=s.current;CX(p)&&o&&e&&l.disabled===void 0&&p.disabled&&(p.disabled=!1)},[e,l.disabled,o]);kt(c,[c]);const h=y.useCallback((p={})=>{const{onClick:g,onMouseDown:v,onKeyUp:x,onKeyDown:k,onPointerDown:C,...b}=p;return J0({type:i?"button":void 0,onClick(T){if(e){T.preventDefault();return}g==null||g(T)},onMouseDown(T){e||v==null||v(T)},onKeyDown(T){if(e||(zx(T),k==null||k(T)),T.baseUIHandlerPrevented)return;const R=T.target===T.currentTarget&&!i&&!a()&&!e,L=T.key==="Enter",M=T.key===" ";R&&((M||L)&&T.preventDefault(),L&&(g==null||g(T)))},onKeyUp(T){e||(zx(T),x==null||x(T)),!T.baseUIHandlerPrevented&&T.target===T.currentTarget&&!i&&!e&&T.key===" "&&(g==null||g(T))},onPointerDown(T){if(e){T.preventDefault();return}C==null||C(T)}},i?void 0:{role:"button"},l,b)},[e,l,i,a]),f=dt(p=>{s.current=p,c()});return{getButtonProps:h,buttonRef:f}}function CX(t){return Kn(t)&&t.tagName==="BUTTON"}const kX={type:"regular-item"};function EX(t){const{closeOnClick:e,disabled:n=!1,highlighted:r,id:i,store:s,nativeButton:o,itemMetadata:a,nodeId:l}=t,c=y.useRef(null),h=sp(!0),f=h!==void 0,{events:p}=s.useState("floatingTreeRoot"),{getButtonProps:g,buttonRef:v}=PN({disabled:n,focusableWhenDisabled:!0,native:o}),x=y.useCallback(C=>J0({id:i,role:"menuitem",tabIndex:r?0:-1,onMouseMove(b){l&&p.emit("itemhover",{nodeId:l,target:b.currentTarget})},onMouseEnter(){a.type==="submenu-trigger"&&a.setActive()},onKeyUp(b){b.key===" "&&s.context.typingRef.current&&b.preventBaseUIHandler()},onClick(b){e&&p.emit("close",{domEvent:b,reason:EN})},onMouseUp(b){if(h){const _=h.initialCursorPointRef.current;if(h.initialCursorPointRef.current=null,f&&_&&Math.abs(b.clientX-_.x)<=1&&Math.abs(b.clientY-_.y)<=1)return}c.current&&s.context.allowMouseUpTriggerRef.current&&(!f||b.button===2)&&a.type==="regular-item"&&c.current.click()}},C,g),[i,r,g,e,p,s,f,h,a,l]),k=id(c,v);return y.useMemo(()=>({getItemProps:x,itemRef:k}),[x,k])}const LN=y.createContext({register:()=>{},unregister:()=>{},subscribeMapChange:()=>()=>{},elementsRef:{current:[]},nextIndexRef:{current:0}});function RX(){return y.useContext(LN)}let TX=function(t){return t[t.None=0]="None",t[t.GuessFromOrder=1]="GuessFromOrder",t}({});function MN(t={}){const{label:e,metadata:n,textRef:r,indexGuessBehavior:i,index:s}=t,{register:o,unregister:a,subscribeMapChange:l,elementsRef:c,labelsRef:h,nextIndexRef:f}=RX(),p=y.useRef(-1),[g,v]=y.useState(s??(i===TX.GuessFromOrder?()=>{if(p.current===-1){const C=f.current;f.current+=1,p.current=C}return p.current}:-1)),x=y.useRef(null),k=y.useCallback(C=>{var b;if(x.current=C,g!==-1&&C!==null&&(c.current[g]=C,h)){const _=e!==void 0;h.current[g]=_?e:((b=r==null?void 0:r.current)==null?void 0:b.textContent)??C.textContent}},[g,c,h,e,r]);return kt(()=>{if(s!=null)return;const C=x.current;if(C)return o(C,n),()=>{a(C)}},[s,o,a,n]),kt(()=>{if(s==null)return l(C=>{var _;const b=x.current?(_=C.get(x.current))==null?void 0:_.index:null;b!=null&&v(b)})},[s,l,v]),y.useMemo(()=>({ref:k,index:g}),[g,k])}function AN(t){return Ll(t,"base-ui")}function en(t,e,n,r){let i=!1,s=!1;const o=r??Ar;return{reason:t,event:e??new Event("base-ui"),cancel(){i=!0},allowPropagation(){s=!0},get isCanceled(){return i},get isPropagationAllowed(){return s},trigger:n,...o}}const PX=[];function NN(t){y.useEffect(t,PX)}const Ng=null;class LX{constructor(){_t(this,"callbacks",[]);_t(this,"callbacksCount",0);_t(this,"nextId",1);_t(this,"startId",1);_t(this,"isScheduled",!1);_t(this,"tick",e=>{var i;this.isScheduled=!1;const n=this.callbacks,r=this.callbacksCount;if(this.callbacks=[],this.callbacksCount=0,this.startId=this.nextId,r>0)for(let s=0;s<n.length;s+=1)(i=n[s])==null||i.call(n,e)})}request(e){const n=this.nextId;this.nextId+=1,this.callbacks.push(e),this.callbacksCount+=1;const r=!1;return(!this.isScheduled||r)&&(requestAnimationFrame(this.tick),this.isScheduled=!0),n}cancel(e){const n=e-this.startId;n<0||n>=this.callbacks.length||(this.callbacks[n]=null,this.callbacksCount-=1)}}const jg=new LX;class wo{constructor(){_t(this,"currentId",Ng);_t(this,"cancel",()=>{this.currentId!==Ng&&(jg.cancel(this.currentId),this.currentId=Ng)});_t(this,"disposeEffect",()=>this.cancel)}static create(){return new wo}static request(e){return jg.request(e)}static cancel(e){return jg.cancel(e)}request(e){this.cancel(),this.currentId=jg.request(()=>{this.currentId=Ng,e()})}}function iv(){const t=Ls(wo.create).current;return NN(t.disposeEffect),t}function MX(t,e=!1,n=!1){const[r,i]=y.useState(t&&e?"idle":void 0),[s,o]=y.useState(t);return t&&!s&&(o(!0),i("starting")),!t&&s&&r!=="ending"&&!n&&i("ending"),!t&&!s&&r==="ending"&&i(void 0),kt(()=>{if(!t&&s&&r!=="ending"&&n){const a=wo.request(()=>{i("ending")});return()=>{wo.cancel(a)}}},[t,s,r,n]),kt(()=>{if(!t||e)return;const a=wo.request(()=>{oi.flushSync(()=>{i(void 0)})});return()=>{wo.cancel(a)}},[e,t]),kt(()=>{if(!t||!e)return;t&&s&&r!=="idle"&&i("starting");const a=wo.request(()=>{i("idle")});return()=>{wo.cancel(a)}},[e,t,s,i,r]),y.useMemo(()=>({mounted:s,setMounted:o,transitionStatus:r}),[s,r])}function Wr(t){const e=Ls(AX,t).current;return e.next=t,kt(e.effect),e}function AX(t){const e={current:t,next:t,effect:()=>{e.current=e.next}};return e}function nu(t){return t==null?t:"current"in t?t.current:t}function NX(t,e=!1,n=!0){const r=iv();return dt((i,s=null)=>{r.cancel();const o=nu(t);o!=null&&(typeof o.getAnimations!="function"||globalThis.BASE_UI_ANIMATIONS_DISABLED?i():r.request(()=>{function a(){o&&Promise.all(o.getAnimations().map(l=>l.finished)).then(()=>{s!=null&&s.aborted||oi.flushSync(i)}).catch(()=>{if(n){if(s!=null&&s.aborted)return;oi.flushSync(i)}else o.getAnimations().length>0&&o.getAnimations().some(l=>l.pending||l.playState!=="finished")&&a()})}e?r.request(a):a()}))})}function jN(t){const{enabled:e=!0,open:n,ref:r,onComplete:i}=t,s=Wr(n),o=dt(i),a=NX(r,n);y.useEffect(()=>{e&&a(()=>{n===s.current&&o()})},[e,n,o,a,s])}const Ks=y.forwardRef(function(e,n){const{render:r,className:i,id:s,label:o,nativeButton:a=!1,disabled:l=!1,closeOnClick:c=!0,...h}=e,f=MN({label:o}),p=wN(!0),g=AN(s),{store:v}=Ml(),x=v.useState("isActive",f.index),k=v.useState("itemProps"),{getItemProps:C,itemRef:b}=EX({closeOnClick:c,disabled:l,highlighted:x,id:g,store:v,nativeButton:a,nodeId:p==null?void 0:p.nodeId,itemMetadata:kX}),_=y.useMemo(()=>({disabled:l,highlighted:x}),[l,x]);return Al("div",e,{state:_,props:[k,h,C],ref:[b,n,f.ref]})}),gh=0;class ku{constructor(){_t(this,"currentId",gh);_t(this,"clear",()=>{this.currentId!==gh&&(clearTimeout(this.currentId),this.currentId=gh)});_t(this,"disposeEffect",()=>this.clear)}static create(){return new ku}start(e,n){this.clear(),this.currentId=setTimeout(()=>{this.currentId=gh,n()},e)}isStarted(){return this.currentId!==gh}}function wi(){const t=Ls(ku.create).current;return NN(t.disposeEffect),t}const Md=typeof navigator<"u",k1=DX(),IN=BX(),ON=FX(),jX=typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter:none"),IX=k1.platform==="MacIntel"&&k1.maxTouchPoints>1?!0:/iP(hone|ad|od)|iOS/.test(k1.platform),DN=Md&&/apple/i.test(navigator.vendor),Gx=Md&&/android/i.test(IN)||/android/i.test(ON),OX=Md&&IN.toLowerCase().startsWith("mac")&&!navigator.maxTouchPoints,FN=ON.includes("jsdom/");function DX(){if(!Md)return{platform:"",maxTouchPoints:-1};const t=navigator.userAgentData;return t!=null&&t.platform?{platform:t.platform,maxTouchPoints:navigator.maxTouchPoints}:{platform:navigator.platform??"",maxTouchPoints:navigator.maxTouchPoints??-1}}function FX(){if(!Md)return"";const t=navigator.userAgentData;return t&&Array.isArray(t.brands)?t.brands.map(({brand:e,version:n})=>`${e}/${n}`).join(" "):navigator.userAgent}function BX(){if(!Md)return"";const t=navigator.userAgentData;return t!=null&&t.platform?t.platform:navigator.platform??""}const qx="data-base-ui-focusable",BN="active",$N="selected",zN="input:not([type='hidden']):not([disabled]),[contenteditable]:not([contenteditable='false']),textarea:not([disabled])",pl="ArrowLeft",gl="ArrowRight",RS="ArrowUp",op="ArrowDown";function _o(t){var n;let e=t.activeElement;for(;((n=e==null?void 0:e.shadowRoot)==null?void 0:n.activeElement)!=null;)e=e.shadowRoot.activeElement;return e}function Dt(t,e){var r;if(!t||!e)return!1;const n=(r=e.getRootNode)==null?void 0:r.call(e);if(t.contains(e))return!0;if(n&&Wx(n)){let i=e;for(;i;){if(t===i)return!0;i=i.parentNode||i.host}}return!1}function si(t){return"composedPath"in t?t.composedPath()[0]:t.target}function zs(t,e){if(e==null)return!1;if("composedPath"in t)return t.composedPath().includes(e);const n=t;return n.target!=null&&e.contains(n.target)}function $X(t){return t.matches("html,body")}function rr(t){return(t==null?void 0:t.ownerDocument)||document}function TS(t){return Kn(t)&&t.matches(zN)}function Yx(t){return t?t.getAttribute("role")==="combobox"&&TS(t):!1}function zX(t){if(!t||FN)return!0;try{return t.matches(":focus-visible")}catch{return!0}}function a0(t){return t?t.hasAttribute(qx)?t:t.querySelector(`[${qx}]`)||t:null}function yu(t,e,n=!0){return t.filter(i=>{var s;return i.parentId===e&&(!n||((s=i.context)==null?void 0:s.open))}).flatMap(i=>[i,...yu(t,i.id,n)])}function RT(t,e){var i;let n=[],r=(i=t.find(s=>s.id===e))==null?void 0:i.parentId;for(;r;){const s=t.find(o=>o.id===r);r=s==null?void 0:s.parentId,s&&(n=n.concat(s))}return n}function Vr(t){t.preventDefault(),t.stopPropagation()}function UX(t){return"nativeEvent"in t}function UN(t){return t.mozInputSource===0&&t.isTrusted?!0:Gx&&t.pointerType?t.type==="click"&&t.buttons===1:t.detail===0&&!t.pointerType}function VN(t){return FN?!1:!Gx&&t.width===0&&t.height===0||Gx&&t.width===1&&t.height===1&&t.pressure===0&&t.detail===0&&t.pointerType==="mouse"||t.width<1&&t.height<1&&t.pressure===0&&t.detail===0&&t.pointerType==="touch"}function od(t,e){const n=["mouse","pen"];return e||n.push("",void 0),n.includes(t)}function WN(t){const e=t.type;return e==="click"||e==="mousedown"||e==="keydown"||e==="keyup"}const VX=["top","right","bottom","left"],ad=Math.min,Wi=Math.max,l0=Math.round,Lc=Math.floor,Ro=t=>({x:t,y:t}),WX={left:"right",right:"left",bottom:"top",top:"bottom"},HX={start:"end",end:"start"};function Kx(t,e,n){return Wi(t,ad(e,n))}function fa(t,e){return typeof t=="function"?t(e):t}function Qi(t){return t.split("-")[0]}function jl(t){return t.split("-")[1]}function PS(t){return t==="x"?"y":"x"}function LS(t){return t==="y"?"height":"width"}const GX=new Set(["top","bottom"]);function Cs(t){return GX.has(Qi(t))?"y":"x"}function MS(t){return PS(Cs(t))}function qX(t,e,n){n===void 0&&(n=!1);const r=jl(t),i=MS(t),s=LS(i);let o=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(o=u0(o)),[o,u0(o)]}function YX(t){const e=u0(t);return[Xx(t),e,Xx(e)]}function Xx(t){return t.replace(/start|end/g,e=>HX[e])}const TT=["left","right"],PT=["right","left"],KX=["top","bottom"],XX=["bottom","top"];function ZX(t,e,n){switch(t){case"top":case"bottom":return n?e?PT:TT:e?TT:PT;case"left":case"right":return e?KX:XX;default:return[]}}function QX(t,e,n,r){const i=jl(t);let s=ZX(Qi(t),n==="start",r);return i&&(s=s.map(o=>o+"-"+i),e&&(s=s.concat(s.map(Xx)))),s}function u0(t){return t.replace(/left|right|bottom|top/g,e=>WX[e])}function JX(t){return{top:0,right:0,bottom:0,left:0,...t}}function HN(t){return typeof t!="number"?JX(t):{top:t,right:t,bottom:t,left:t}}function c0(t){const{x:e,y:n,width:r,height:i}=t;return{width:r,height:i,top:n,left:e,right:e+r,bottom:n+i,x:e,y:n}}function Ig(t,e,n){return Math.floor(t/e)!==n}function rf(t,e){return e<0||e>=t.current.length}function E1(t,e){return ri(t,{disabledIndices:e})}function LT(t,e){return ri(t,{decrement:!0,startingIndex:t.current.length,disabledIndices:e})}function ri(t,{startingIndex:e=-1,decrement:n=!1,disabledIndices:r,amount:i=1}={}){let s=e;do s+=n?-i:i;while(s>=0&&s<=t.current.length-1&&sf(t,s,r));return s}function eZ(t,{event:e,orientation:n,loopFocus:r,rtl:i,cols:s,disabledIndices:o,minIndex:a,maxIndex:l,prevIndex:c,stopEvent:h=!1}){let f=c;const p=[],g={};let v=!1;{let C=null,b=-1;t.current.forEach((_,T)=>{if(_==null)return;const R=_.closest('[role="row"]');R&&(v=!0),(R!==C||b===-1)&&(C=R,b+=1,p[b]=[]),p[b].push(T),g[T]=b})}const x=v&&p.length>0&&p.some(C=>C.length!==s);function k(C){if(!x||c===-1)return;const b=g[c];if(b==null)return;const _=p[b].indexOf(c);let T=C==="up"?b-1:b+1;r&&(T<0?T=p.length-1:T>=p.length&&(T=0));const R=new Set;for(;T>=0&&T<p.length&&!R.has(T);){R.add(T);const L=p[T];if(L.length===0){T=C==="up"?T-1:T+1;continue}const M=Math.min(_,L.length-1);for(let A=M;A>=0;A-=1){const $=L[A];if(!sf(t,$,o))return $}T=C==="up"?T-1:T+1,r&&(T<0?T=p.length-1:T>=p.length&&(T=0))}}if(e.key===RS){const C=k("up");if(C!==void 0)h&&Vr(e),f=C;else{if(h&&Vr(e),c===-1)f=l;else if(f=ri(t,{startingIndex:f,amount:s,decrement:!0,disabledIndices:o}),r&&(c-s<a||f<0)){const b=c%s,_=l%s,T=l-(_-b);_===b?f=l:f=_>b?T:T-s}rf(t,f)&&(f=c)}}if(e.key===op){const C=k("down");C!==void 0?(h&&Vr(e),f=C):(h&&Vr(e),c===-1?f=a:(f=ri(t,{startingIndex:c,amount:s,disabledIndices:o}),r&&c+s>l&&(f=ri(t,{startingIndex:c%s-s,amount:s,disabledIndices:o}))),rf(t,f)&&(f=c))}if(n==="both"){const C=Lc(c/s);e.key===(i?pl:gl)&&(h&&Vr(e),c%s!==s-1?(f=ri(t,{startingIndex:c,disabledIndices:o}),r&&Ig(f,s,C)&&(f=ri(t,{startingIndex:c-c%s-1,disabledIndices:o}))):r&&(f=ri(t,{startingIndex:c-c%s-1,disabledIndices:o})),Ig(f,s,C)&&(f=c)),e.key===(i?gl:pl)&&(h&&Vr(e),c%s!==0?(f=ri(t,{startingIndex:c,decrement:!0,disabledIndices:o}),r&&Ig(f,s,C)&&(f=ri(t,{startingIndex:c+(s-c%s),decrement:!0,disabledIndices:o}))):r&&(f=ri(t,{startingIndex:c+(s-c%s),decrement:!0,disabledIndices:o})),Ig(f,s,C)&&(f=c));const b=Lc(l/s)===C;rf(t,f)&&(r&&b?f=e.key===(i?gl:pl)?l:ri(t,{startingIndex:c-c%s-1,disabledIndices:o}):f=c)}return f}function tZ(t,e,n){const r=[];let i=0;return t.forEach(({width:s,height:o},a)=>{let l=!1;for(n&&(i=0);!l;){const c=[];for(let h=0;h<s;h+=1)for(let f=0;f<o;f+=1)c.push(i+h+f*e);i%e+s<=e&&c.every(h=>r[h]==null)?(c.forEach(h=>{r[h]=a}),l=!0):i+=1}}),[...r]}function nZ(t,e,n,r,i){if(t===-1)return-1;const s=n.indexOf(t),o=e[t];switch(i){case"tl":return s;case"tr":return o?s+o.width-1:s;case"bl":return o?s+(o.height-1)*r:s;case"br":return n.lastIndexOf(t);default:return-1}}function rZ(t,e){return e.flatMap((n,r)=>t.includes(n)?[r]:[])}function sf(t,e,n){if(typeof n=="function")return n(e);if(n)return n.includes(e);const r=t.current[e];return r?r.hasAttribute("disabled")||r.getAttribute("aria-disabled")==="true":!1}/*!
* tabbable 6.3.0
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var iZ=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],d0=iZ.join(","),GN=typeof Element>"u",ld=GN?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,h0=!GN&&Element.prototype.getRootNode?function(t){var e;return t==null||(e=t.getRootNode)===null||e===void 0?void 0:e.call(t)}:function(t){return t==null?void 0:t.ownerDocument},Df=function(e,n){var r;n===void 0&&(n=!0);var i=e==null||(r=e.getAttribute)===null||r===void 0?void 0:r.call(e,"inert"),s=i===""||i==="true",o=s||n&&e&&Df(e.parentNode);return o},sZ=function(e){var n,r=e==null||(n=e.getAttribute)===null||n===void 0?void 0:n.call(e,"contenteditable");return r===""||r==="true"},qN=function(e,n,r){if(Df(e))return[];var i=Array.prototype.slice.apply(e.querySelectorAll(d0));return n&&ld.call(e,d0)&&i.unshift(e),i=i.filter(r),i},f0=function(e,n,r){for(var i=[],s=Array.from(e);s.length;){var o=s.shift();if(!Df(o,!1))if(o.tagName==="SLOT"){var a=o.assignedElements(),l=a.length?a:o.children,c=f0(l,!0,r);r.flatten?i.push.apply(i,c):i.push({scopeParent:o,candidates:c})}else{var h=ld.call(o,d0);h&&r.filter(o)&&(n||!e.includes(o))&&i.push(o);var f=o.shadowRoot||typeof r.getShadowRoot=="function"&&r.getShadowRoot(o),p=!Df(f,!1)&&(!r.shadowRootFilter||r.shadowRootFilter(o));if(f&&p){var g=f0(f===!0?o.children:f.children,!0,r);r.flatten?i.push.apply(i,g):i.push({scopeParent:o,candidates:g})}else s.unshift.apply(s,o.children)}}return i},YN=function(e){return!isNaN(parseInt(e.getAttribute("tabindex"),10))},KN=function(e){if(!e)throw new Error("No node provided");return e.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(e.tagName)||sZ(e))&&!YN(e)?0:e.tabIndex},oZ=function(e,n){var r=KN(e);return r<0&&n&&!YN(e)?0:r},aZ=function(e,n){return e.tabIndex===n.tabIndex?e.documentOrder-n.documentOrder:e.tabIndex-n.tabIndex},XN=function(e){return e.tagName==="INPUT"},lZ=function(e){return XN(e)&&e.type==="hidden"},uZ=function(e){var n=e.tagName==="DETAILS"&&Array.prototype.slice.apply(e.children).some(function(r){return r.tagName==="SUMMARY"});return n},cZ=function(e,n){for(var r=0;r<e.length;r++)if(e[r].checked&&e[r].form===n)return e[r]},dZ=function(e){if(!e.name)return!0;var n=e.form||h0(e),r=function(a){return n.querySelectorAll('input[type="radio"][name="'+a+'"]')},i;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")i=r(window.CSS.escape(e.name));else try{i=r(e.name)}catch(o){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",o.message),!1}var s=cZ(i,e.form);return!s||s===e},hZ=function(e){return XN(e)&&e.type==="radio"},fZ=function(e){return hZ(e)&&!dZ(e)},pZ=function(e){var n,r=e&&h0(e),i=(n=r)===null||n===void 0?void 0:n.host,s=!1;if(r&&r!==e){var o,a,l;for(s=!!((o=i)!==null&&o!==void 0&&(a=o.ownerDocument)!==null&&a!==void 0&&a.contains(i)||e!=null&&(l=e.ownerDocument)!==null&&l!==void 0&&l.contains(e));!s&&i;){var c,h,f;r=h0(i),i=(c=r)===null||c===void 0?void 0:c.host,s=!!((h=i)!==null&&h!==void 0&&(f=h.ownerDocument)!==null&&f!==void 0&&f.contains(i))}}return s},MT=function(e){var n=e.getBoundingClientRect(),r=n.width,i=n.height;return r===0&&i===0},gZ=function(e,n){var r=n.displayCheck,i=n.getShadowRoot;if(r==="full-native"&&"checkVisibility"in e){var s=e.checkVisibility({checkOpacity:!1,opacityProperty:!1,contentVisibilityAuto:!0,visibilityProperty:!0,checkVisibilityCSS:!0});return!s}if(getComputedStyle(e).visibility==="hidden")return!0;var o=ld.call(e,"details>summary:first-of-type"),a=o?e.parentElement:e;if(ld.call(a,"details:not([open]) *"))return!0;if(!r||r==="full"||r==="full-native"||r==="legacy-full"){if(typeof i=="function"){for(var l=e;e;){var c=e.parentElement,h=h0(e);if(c&&!c.shadowRoot&&i(c)===!0)return MT(e);e.assignedSlot?e=e.assignedSlot:!c&&h!==e.ownerDocument?e=h.host:e=c}e=l}if(pZ(e))return!e.getClientRects().length;if(r!=="legacy-full")return!0}else if(r==="non-zero-area")return MT(e);return!1},mZ=function(e){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(e.tagName))for(var n=e.parentElement;n;){if(n.tagName==="FIELDSET"&&n.disabled){for(var r=0;r<n.children.length;r++){var i=n.children.item(r);if(i.tagName==="LEGEND")return ld.call(n,"fieldset[disabled] *")?!0:!i.contains(e)}return!0}n=n.parentElement}return!1},Zx=function(e,n){return!(n.disabled||Df(n)||lZ(n)||gZ(n,e)||uZ(n)||mZ(n))},Qx=function(e,n){return!(fZ(n)||KN(n)<0||!Zx(e,n))},vZ=function(e){var n=parseInt(e.getAttribute("tabindex"),10);return!!(isNaN(n)||n>=0)},ZN=function(e){var n=[],r=[];return e.forEach(function(i,s){var o=!!i.scopeParent,a=o?i.scopeParent:i,l=oZ(a,o),c=o?ZN(i.candidates):a;l===0?o?n.push.apply(n,c):n.push(a):r.push({documentOrder:s,tabIndex:l,item:i,isScope:o,content:c})}),r.sort(aZ).reduce(function(i,s){return s.isScope?i.push.apply(i,s.content):i.push(s.content),i},[]).concat(n)},ap=function(e,n){n=n||{};var r;return n.getShadowRoot?r=f0([e],n.includeContainer,{filter:Qx.bind(null,n),flatten:!1,getShadowRoot:n.getShadowRoot,shadowRootFilter:vZ}):r=qN(e,n.includeContainer,Qx.bind(null,n)),ZN(r)},yZ=function(e,n){n=n||{};var r;return n.getShadowRoot?r=f0([e],n.includeContainer,{filter:Zx.bind(null,n),flatten:!0,getShadowRoot:n.getShadowRoot}):r=qN(e,n.includeContainer,Zx.bind(null,n)),r},QN=function(e,n){if(n=n||{},!e)throw new Error("No node provided");return ld.call(e,d0)===!1?!1:Qx(n,e)};const Ad=()=>({getShadowRoot:!0,displayCheck:typeof ResizeObserver=="function"&&ResizeObserver.toString().includes("[native code]")?"full":"none"});function JN(t,e){const n=ap(t,Ad()),r=n.length;if(r===0)return;const i=_o(rr(t)),s=n.indexOf(i),o=s===-1?e===1?0:r-1:s+e;return n[o]}function AS(t){return JN(rr(t).body,1)||t}function ej(t){return JN(rr(t).body,-1)||t}function tj(t,e){if(!t)return null;const n=ap(rr(t).body,Ad()),r=n.length;if(r===0)return null;const i=n.indexOf(t);if(i===-1)return null;const s=(i+e+r)%r;return n[s]}function wZ(t){return tj(t,1)}function xZ(t){return tj(t,-1)}function Vc(t,e){const n=e||t.currentTarget,r=t.relatedTarget;return!r||!Dt(n,r)}function _Z(t){ap(t,Ad()).forEach(n=>{n.dataset.tabindex=n.getAttribute("tabindex")||"",n.setAttribute("tabindex","-1")})}function AT(t){t.querySelectorAll("[data-tabindex]").forEach(n=>{const r=n.dataset.tabindex;delete n.dataset.tabindex,r?n.setAttribute("tabindex",r):n.removeAttribute("tabindex")})}function nj(){const t=new Map;return{emit(e,n){var r;(r=t.get(e))==null||r.forEach(i=>i(n))},on(e,n){t.has(e)||t.set(e,new Set),t.get(e).add(n)},off(e,n){var r;(r=t.get(e))==null||r.delete(n)}}}class NS{constructor(){_t(this,"nodesRef",{current:[]});_t(this,"events",nj())}addNode(e){this.nodesRef.current.push(e)}removeNode(e){const n=this.nodesRef.current.findIndex(r=>r===e);n!==-1&&this.nodesRef.current.splice(n,1)}}const rj=y.createContext(null),ij=y.createContext(null),xa=()=>{var t;return((t=y.useContext(rj))==null?void 0:t.id)||null},Il=t=>{const e=y.useContext(ij);return t??e};function sj(t){const e=Ll(),n=Il(t),r=xa();return kt(()=>{if(!e)return;const i={id:e,parentId:r};return n==null||n.addNode(i),()=>{n==null||n.removeNode(i)}},[n,e,r]),e}function bZ(t){const{children:e,id:n}=t,r=xa();return w.jsx(rj.Provider,{value:y.useMemo(()=>({id:n,parentId:r}),[n,r]),children:e})}function SZ(t){const{children:e,externalTree:n}=t,r=Ls(()=>n??new NS).current;return w.jsx(ij.Provider,{value:r,children:e})}function ud(t){return`data-base-ui-${t}`}function R1(t,e,n){if(n&&!od(n))return 0;if(typeof t=="number")return t;if(typeof t=="function"){const r=t();return typeof r=="number"?r:r==null?void 0:r[e]}return t==null?void 0:t[e]}const oj={clip:"rect(0 0 0 0)",overflow:"hidden",whiteSpace:"nowrap",position:"fixed",top:0,left:0,border:0,padding:0,width:1,height:1,margin:-1};function Lo(t){return(t==null?void 0:t.ownerDocument)||document}const cd=y.forwardRef(function(e,n){const[r,i]=y.useState();kt(()=>{DN&&i("button")},[]);const s={tabIndex:0,role:r};return w.jsx("span",{...e,ref:n,style:oj,"aria-hidden":r?void 0:!0,...s,"data-base-ui-focus-guard":""})});let NT=0;function dm(t,e={}){const{preventScroll:n=!1,cancelPrevious:r=!0,sync:i=!1}=e;r&&cancelAnimationFrame(NT);const s=()=>t==null?void 0:t.focus({preventScroll:n});i?s():NT=requestAnimationFrame(s)}const Wc={inert:new WeakMap,"aria-hidden":new WeakMap,none:new WeakMap};function jT(t){return t==="inert"?Wc.inert:t==="aria-hidden"?Wc["aria-hidden"]:Wc.none}let Og=new WeakSet,Dg={},T1=0;const aj=t=>t&&(t.host||aj(t.parentNode)),CZ=(t,e)=>e.map(n=>{if(t.contains(n))return n;const r=aj(n);return t.contains(r)?r:null}).filter(n=>n!=null);function kZ(t,e,n,r){const i="data-base-ui-inert",s=r?"inert":n?"aria-hidden":null,o=CZ(e,t),a=new Set,l=new Set(o),c=[];Dg[i]||(Dg[i]=new WeakMap);const h=Dg[i];o.forEach(f),p(e),a.clear();function f(g){!g||a.has(g)||(a.add(g),g.parentNode&&f(g.parentNode))}function p(g){!g||l.has(g)||[].forEach.call(g.children,v=>{if(Nl(v)!=="script")if(a.has(v))p(v);else{const x=s?v.getAttribute(s):null,k=x!==null&&x!=="false",C=jT(s),b=(C.get(v)||0)+1,_=(h.get(v)||0)+1;C.set(v,b),h.set(v,_),c.push(v),b===1&&k&&Og.add(v),_===1&&v.setAttribute(i,""),!k&&s&&v.setAttribute(s,s==="inert"?"":"true")}})}return T1+=1,()=>{c.forEach(g=>{const v=jT(s),k=(v.get(g)||0)-1,C=(h.get(g)||0)-1;v.set(g,k),h.set(g,C),k||(!Og.has(g)&&s&&g.removeAttribute(s),Og.delete(g)),C||g.removeAttribute(i)}),T1-=1,T1||(Wc.inert=new WeakMap,Wc["aria-hidden"]=new WeakMap,Wc.none=new WeakMap,Og=new WeakSet,Dg={})}}function EZ(t,e=!1,n=!1){const r=rr(t[0]).body;return kZ(t.concat(Array.from(r.querySelectorAll("[aria-live]"))),r,e,n)}const lj=y.createContext(null),uj=()=>y.useContext(lj),RZ=ud("portal");function TZ(t={}){const{ref:e,container:n,componentProps:r=Ar,elementProps:i,elementState:s}=t,o=Ll(),a=uj(),l=a==null?void 0:a.portalNode,[c,h]=y.useState(null),[f,p]=y.useState(null),g=y.useRef(null);kt(()=>{if(n===null){g.current&&(g.current=null,p(null),h(null));return}if(o==null)return;const k=(n&&(CS(n)?n:n.current))??l??document.body;if(k==null){g.current&&(g.current=null,p(null),h(null));return}g.current!==k&&(g.current=k,p(null),h(k))},[n,l,o]);const v=Al("div",r,{ref:[e,p],state:s,props:[{id:o,[RZ]:""},i]});return{portalNode:f,portalSubtree:c&&v?oi.createPortal(v,c):null}}const PZ=y.forwardRef(function(e,n){const{children:r,container:i,className:s,render:o,renderGuards:a,...l}=e,{portalNode:c,portalSubtree:h}=TZ({container:i,ref:n,componentProps:e,elementProps:l}),f=y.useRef(null),p=y.useRef(null),g=y.useRef(null),v=y.useRef(null),[x,k]=y.useState(null),C=x==null?void 0:x.modal,b=x==null?void 0:x.open,_=typeof a=="boolean"?a:!!x&&!x.modal&&x.open&&!!c;y.useEffect(()=>{if(!c||C)return;function R(L){c&&Vc(L)&&(L.type==="focusin"?AT:_Z)(c)}return c.addEventListener("focusin",R,!0),c.addEventListener("focusout",R,!0),()=>{c.removeEventListener("focusin",R,!0),c.removeEventListener("focusout",R,!0)}},[c,C]),y.useEffect(()=>{!c||b||AT(c)},[b,c]);const T=y.useMemo(()=>({beforeOutsideRef:f,afterOutsideRef:p,beforeInsideRef:g,afterInsideRef:v,portalNode:c,setFocusManagerState:k}),[c]);return w.jsxs(y.Fragment,{children:[h,w.jsxs(lj.Provider,{value:T,children:[_&&c&&w.jsx(cd,{"data-type":"outside",ref:f,onFocus:R=>{var L;if(Vc(R,c))(L=g.current)==null||L.focus();else{const M=x?x.domReference:null,A=ej(M);A==null||A.focus()}}}),_&&c&&w.jsx("span",{"aria-owns":c.id,style:XK}),c&&oi.createPortal(r,c),_&&c&&w.jsx(cd,{"data-type":"outside",ref:p,onFocus:R=>{var L;if(Vc(R,c))(L=v.current)==null||L.focus();else{const M=x?x.domReference:null,A=AS(M);A==null||A.focus(),x!=null&&x.closeOnFocusOut&&(x==null||x.onOpenChange(!1,en(sd,R.nativeEvent)))}}})]})]})});function LZ(t,e){const n=jr(t.target);return t instanceof n.KeyboardEvent?"keyboard":t instanceof n.FocusEvent?e||"keyboard":"pointerType"in t?t.pointerType||"keyboard":"touches"in t?"touch":t instanceof n.MouseEvent?e||(t.detail===0?"keyboard":"mouse"):""}const IT=20;let nl=[];function jS(){nl=nl.filter(t=>t.isConnected)}function MZ(t){jS(),t&&Nl(t)!=="body"&&(nl.push(t),nl.length>IT&&(nl=nl.slice(-IT)))}function P1(){return jS(),nl[nl.length-1]}function AZ(t){if(!t)return null;const e=Ad();return QN(t,e)?t:ap(t,e)[0]||t}function NZ(t){return!t||!t.isConnected?!1:typeof t.checkVisibility=="function"?t.checkVisibility():es(t).display!=="none"}function OT(t,e){var o;if(!e.current.includes("floating")&&!((o=t.getAttribute("role"))!=null&&o.includes("dialog")))return;const n=Ad(),i=yZ(t,n).filter(a=>{const l=a.getAttribute("data-tabindex")||"";return QN(a,n)||a.hasAttribute("data-tabindex")&&!l.startsWith("-")}),s=t.getAttribute("tabindex");e.current.includes("floating")||i.length===0?s!=="0"&&t.setAttribute("tabindex","0"):(s!=="-1"||t.hasAttribute("data-tabindex")&&t.getAttribute("data-tabindex")!=="-1")&&(t.setAttribute("tabindex","-1"),t.setAttribute("data-tabindex","-1"))}function jZ(t){const{context:e,children:n,disabled:r=!1,order:i=["content"],initialFocus:s=!0,returnFocus:o=!0,restoreFocus:a=!1,modal:l=!0,closeOnFocusOut:c=!0,openInteractionType:h="",getInsideElements:f=()=>[],nextFocusableElement:p,previousFocusableElement:g,beforeContentFocusGuardRef:v,externalTree:x}=t,k="rootStore"in e?e.rootStore:e,C=k.useState("open"),b=k.useState("domReferenceElement"),_=k.useState("floatingElement"),{events:T,dataRef:R}=k.context,L=dt(()=>{var fe;return(fe=R.current.floatingContext)==null?void 0:fe.nodeId}),M=dt(f),A=s===!1,$=Yx(b)&&A,j=Wr(i),V=Wr(s),U=Wr(o),B=Wr(h),Z=Il(x),q=uj(),G=y.useRef(null),te=y.useRef(null),O=y.useRef(!1),K=y.useRef(!1),Y=y.useRef(!1),xe=y.useRef(-1),re=y.useRef(""),ue=y.useRef(""),ke=wi(),qe=wi(),he=iv(),ge=q!=null,we=a0(_),ae=dt((fe=we)=>fe?ap(fe,Ad()):[]),me=dt(fe=>{const ve=ae(fe);return j.current.map(()=>ve).filter(Boolean).flat()});y.useEffect(()=>{if(r||!l)return;function fe(Ae){Ae.key==="Tab"&&Dt(we,_o(rr(we)))&&ae().length===0&&!$&&Vr(Ae)}const ve=rr(we);return ve.addEventListener("keydown",fe),()=>{ve.removeEventListener("keydown",fe)}},[r,b,we,l,j,$,ae,me]),y.useEffect(()=>{if(r||!_)return;function fe(ve){const Ae=si(ve),Ue=ae().indexOf(Ae);Ue!==-1&&(xe.current=Ue)}return _.addEventListener("focusin",fe),()=>{_.removeEventListener("focusin",fe)}},[r,_,ae]),y.useEffect(()=>{if(r||!C)return;const fe=rr(we);function ve(){Y.current=!1}function Ae(Ue){const Ie=si(Ue),ze=Dt(_,Ie)||Dt(b,Ie)||Dt(q==null?void 0:q.portalNode,Ie);Y.current=!ze,ue.current=Ue.pointerType||"keyboard"}function De(){ue.current="keyboard"}return fe.addEventListener("pointerdown",Ae,!0),fe.addEventListener("pointerup",ve,!0),fe.addEventListener("pointercancel",ve,!0),fe.addEventListener("keydown",De,!0),()=>{fe.removeEventListener("pointerdown",Ae,!0),fe.removeEventListener("pointerup",ve,!0),fe.removeEventListener("pointercancel",ve,!0),fe.removeEventListener("keydown",De,!0)}},[r,_,b,we,C,q]),y.useEffect(()=>{if(r||!c)return;function fe(){K.current=!0,qe.start(0,()=>{K.current=!1})}function ve(Ie){const ze=Ie.relatedTarget,Ce=Ie.currentTarget,Oe=si(Ie);queueMicrotask(()=>{const Ne=L(),yt=k.context.triggerElements,Fe=!(Dt(b,ze)||Dt(_,ze)||Dt(ze,_)||Dt(q==null?void 0:q.portalNode,ze)||ze!=null&&yt.hasElement(ze)||yt.hasMatchingElement(st=>Dt(st,ze))||ze!=null&&ze.hasAttribute(ud("focus-guard"))||Z&&(yu(Z.nodesRef.current,Ne).find(st=>{var wt,At;return Dt((wt=st.context)==null?void 0:wt.elements.floating,ze)||Dt((At=st.context)==null?void 0:At.elements.domReference,ze)})||RT(Z.nodesRef.current,Ne).find(st=>{var wt,At,Ye;return[(wt=st.context)==null?void 0:wt.elements.floating,a0((At=st.context)==null?void 0:At.elements.floating)].includes(ze)||((Ye=st.context)==null?void 0:Ye.elements.domReference)===ze})));if(Ce===b&&we&&OT(we,j),a&&Ce!==b&&!NZ(Oe)&&_o(rr(we))===rr(we).body){if(Kn(we)&&(we.focus(),a==="popup")){he.request(()=>{we.focus()});return}const st=xe.current,wt=ae(),At=wt[st]||wt[wt.length-1]||we;Kn(At)&&At.focus()}if(R.current.insideReactTree){R.current.insideReactTree=!1;return}($||!l)&&ze&&Fe&&!K.current&&($||ze!==P1())&&(O.current=!0,k.setOpen(!1,en(sd,Ie)))})}function Ae(){Y.current||(R.current.insideReactTree=!0,ke.start(0,()=>{R.current.insideReactTree=!1}))}const De=Kn(b)?b:null,Ue=[];if(!(!_&&!De))return De&&(De.addEventListener("focusout",ve),De.addEventListener("pointerdown",fe),Ue.push(()=>{De.removeEventListener("focusout",ve),De.removeEventListener("pointerdown",fe)})),_&&(_.addEventListener("focusout",ve),q&&(_.addEventListener("focusout",Ae,!0),Ue.push(()=>{_.removeEventListener("focusout",Ae,!0)})),Ue.push(()=>{_.removeEventListener("focusout",ve)})),()=>{Ue.forEach(Ie=>{Ie()})}},[r,b,_,we,l,Z,q,k,c,a,ae,$,L,j,R,ke,qe,he]);const X=y.useRef(null),ye=y.useRef(null),_e=id(X,v,q==null?void 0:q.beforeInsideRef),at=id(ye,q==null?void 0:q.afterInsideRef);y.useEffect(()=>{var Ie,ze,Ce;if(r||!_||!C)return;const fe=Array.from(((Ie=q==null?void 0:q.portalNode)==null?void 0:Ie.querySelectorAll(`[${ud("portal")}]`))||[]),Ae=(Ce=(ze=(Z?RT(Z.nodesRef.current,L()):[]).find(Oe=>{var Ne;return Yx(((Ne=Oe.context)==null?void 0:Ne.elements.domReference)||null)}))==null?void 0:ze.context)==null?void 0:Ce.elements.domReference,De=[_,Ae,...fe,...M(),G.current,te.current,X.current,ye.current,q==null?void 0:q.beforeOutsideRef.current,q==null?void 0:q.afterOutsideRef.current,nu(g),nu(p),$?b:null].filter(Oe=>Oe!=null),Ue=EZ(De,l||$);return()=>{Ue()}},[C,r,b,_,l,j,q,$,Z,L,M,p,g]),kt(()=>{if(!C||r||!Kn(we))return;const fe=rr(we),ve=_o(fe);queueMicrotask(()=>{const Ae=me(we),De=V.current,Ue=typeof De=="function"?De(B.current||""):De;if(Ue===void 0||Ue===!1)return;let Ie;Ue===!0||Ue===null?Ie=Ae[0]||we:Ie=nu(Ue),Ie=Ie||Ae[0]||we,!Dt(we,ve)&&dm(Ie,{preventScroll:Ie===we})})},[r,C,we,A,me,V,B]),kt(()=>{if(r||!we)return;const fe=rr(we),ve=_o(fe);MZ(ve);function Ae(Ie){if(Ie.open||(re.current=LZ(Ie.nativeEvent,ue.current)),Ie.reason===Yi&&Ie.nativeEvent.type==="mouseleave"&&(O.current=!0),Ie.reason===bS)if(Ie.nested)O.current=!1;else if(UN(Ie.nativeEvent)||VN(Ie.nativeEvent))O.current=!1;else{let ze=!1;document.createElement("div").focus({get preventScroll(){return ze=!0,!1}}),ze?O.current=!1:O.current=!0}}T.on("openchange",Ae);const De=fe.createElement("span");De.setAttribute("tabindex","-1"),De.setAttribute("aria-hidden","true"),Object.assign(De.style,oj),ge&&b&&b.insertAdjacentElement("afterend",De);function Ue(){const Ie=U.current;let ze=typeof Ie=="function"?Ie(re.current):Ie;if(ze===void 0||ze===!1)return null;if(ze===null&&(ze=!0),typeof ze=="boolean"){const Oe=b||P1();return Oe&&Oe.isConnected?Oe:De}const Ce=b||P1()||De;return nu(ze)||Ce}return()=>{T.off("openchange",Ae);const Ie=_o(fe),ze=Dt(_,Ie)||Z&&yu(Z.nodesRef.current,L(),!1).some(Oe=>{var Ne;return Dt((Ne=Oe.context)==null?void 0:Ne.elements.floating,Ie)}),Ce=Ue();queueMicrotask(()=>{const Oe=AZ(Ce),Ne=typeof U.current!="boolean";U.current&&!O.current&&Kn(Oe)&&(!(!Ne&&Oe!==Ie&&Ie!==fe.body)||ze)&&Oe.focus({preventScroll:!0}),De.remove()})}},[r,_,we,U,R,T,Z,ge,b,L]),y.useEffect(()=>{queueMicrotask(()=>{O.current=!1})},[r]),y.useEffect(()=>{if(r||!C)return;function fe(Ae){const De=si(Ae);De!=null&&De.closest(`[${YK}]`)&&(K.current=!0)}const ve=rr(we);return ve.addEventListener("pointerdown",fe,!0),()=>{ve.removeEventListener("pointerdown",fe,!0)}},[r,C,we]),kt(()=>{if(!r&&q)return q.setFocusManagerState({modal:l,closeOnFocusOut:c,open:C,onOpenChange:k.setOpen,domReference:b}),()=>{q.setFocusManagerState(null)}},[r,q,l,C,k,c,b]),kt(()=>{if(!(r||!we))return OT(we,j),()=>{queueMicrotask(jS)}},[r,we,j]);const Le=!r&&(l?!$:!0)&&(ge||l);return w.jsxs(y.Fragment,{children:[Le&&w.jsx(cd,{"data-type":"inside",ref:_e,onFocus:fe=>{var ve;if(l){const Ae=me();dm(Ae[Ae.length-1])}else if(q!=null&&q.portalNode)if(O.current=!1,Vc(fe,q.portalNode)){const Ae=AS(b);Ae==null||Ae.focus()}else(ve=nu(g??q.beforeOutsideRef))==null||ve.focus()}}),n,Le&&w.jsx(cd,{"data-type":"inside",ref:at,onFocus:fe=>{var ve;if(l)dm(me()[0]);else if(q!=null&&q.portalNode)if(c&&(O.current=!0),Vc(fe,q.portalNode)){const Ae=ej(b);Ae==null||Ae.focus()}else(ve=nu(p??q.afterOutsideRef))==null||ve.focus()}})]})}function IZ(t,e={}){const n="rootStore"in t?t.rootStore:t,r=n.context.dataRef,{enabled:i=!0,event:s="click",toggle:o=!0,ignoreMouse:a=!1,stickIfOpen:l=!0,touchOpenDelay:c=0}=e,h=y.useRef(void 0),f=iv(),p=wi(),g=y.useMemo(()=>({onPointerDown(v){h.current=v.pointerType},onMouseDown(v){const x=h.current,k=v.nativeEvent,C=n.select("open");if(v.button!==0||s==="click"||od(x,!0)&&a)return;const b=r.current.openEvent,_=b==null?void 0:b.type,T=n.select("domReferenceElement")!==v.currentTarget,R=C&&T||!(C&&o&&(!(b&&l)||_==="click"||_==="mousedown"));if(TS(k.target)){const M=en(hl,k,k.target);R&&x==="touch"&&c>0?p.start(c,()=>{n.setOpen(!0,M)}):n.setOpen(R,M);return}const L=v.currentTarget;f.request(()=>{const M=en(hl,k,L);R&&x==="touch"&&c>0?p.start(c,()=>{n.setOpen(!0,M)}):n.setOpen(R,M)})},onClick(v){if(s==="mousedown-only")return;const x=h.current;if(s==="mousedown"&&x){h.current=void 0;return}if(od(x,!0)&&a)return;const k=n.select("open"),C=r.current.openEvent,b=n.select("domReferenceElement")!==v.currentTarget,_=k&&b||!(k&&o&&(!(C&&l)||WN(C))),T=en(hl,v.nativeEvent,v.currentTarget);_&&x==="touch"&&c>0?p.start(c,()=>{n.setOpen(!0,T)}):n.setOpen(_,T)},onKeyDown(){h.current=void 0}}),[r,s,a,n,l,o,f,p,c]);return y.useMemo(()=>i?{reference:g}:Ar,[i,g])}function DT(t,e,n){let{reference:r,floating:i}=t;const s=Cs(e),o=MS(e),a=LS(o),l=Qi(e),c=s==="y",h=r.x+r.width/2-i.width/2,f=r.y+r.height/2-i.height/2,p=r[a]/2-i[a]/2;let g;switch(l){case"top":g={x:h,y:r.y-i.height};break;case"bottom":g={x:h,y:r.y+r.height};break;case"right":g={x:r.x+r.width,y:f};break;case"left":g={x:r.x-i.width,y:f};break;default:g={x:r.x,y:r.y}}switch(jl(e)){case"start":g[o]-=p*(n&&c?-1:1);break;case"end":g[o]+=p*(n&&c?-1:1);break}return g}const OZ=async(t,e,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:s=[],platform:o}=n,a=s.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e));let c=await o.getElementRects({reference:t,floating:e,strategy:i}),{x:h,y:f}=DT(c,r,l),p=r,g={},v=0;for(let x=0;x<a.length;x++){const{name:k,fn:C}=a[x],{x:b,y:_,data:T,reset:R}=await C({x:h,y:f,initialPlacement:r,placement:p,strategy:i,middlewareData:g,rects:c,platform:o,elements:{reference:t,floating:e}});h=b??h,f=_??f,g={...g,[k]:{...g[k],...T}},R&&v<=50&&(v++,typeof R=="object"&&(R.placement&&(p=R.placement),R.rects&&(c=R.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:i}):R.rects),{x:h,y:f}=DT(c,p,l)),x=-1)}return{x:h,y:f,placement:p,strategy:i,middlewareData:g}};async function Ff(t,e){var n;e===void 0&&(e={});const{x:r,y:i,platform:s,rects:o,elements:a,strategy:l}=t,{boundary:c="clippingAncestors",rootBoundary:h="viewport",elementContext:f="floating",altBoundary:p=!1,padding:g=0}=fa(e,t),v=HN(g),k=a[p?f==="floating"?"reference":"floating":f],C=c0(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(k)))==null||n?k:k.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:c,rootBoundary:h,strategy:l})),b=f==="floating"?{x:r,y:i,width:o.floating.width,height:o.floating.height}:o.reference,_=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),T=await(s.isElement==null?void 0:s.isElement(_))?await(s.getScale==null?void 0:s.getScale(_))||{x:1,y:1}:{x:1,y:1},R=c0(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:b,offsetParent:_,strategy:l}):b);return{top:(C.top-R.top+v.top)/T.y,bottom:(R.bottom-C.bottom+v.bottom)/T.y,left:(C.left-R.left+v.left)/T.x,right:(R.right-C.right+v.right)/T.x}}const DZ=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:i,middlewareData:s,rects:o,initialPlacement:a,platform:l,elements:c}=e,{mainAxis:h=!0,crossAxis:f=!0,fallbackPlacements:p,fallbackStrategy:g="bestFit",fallbackAxisSideDirection:v="none",flipAlignment:x=!0,...k}=fa(t,e);if((n=s.arrow)!=null&&n.alignmentOffset)return{};const C=Qi(i),b=Cs(a),_=Qi(a)===a,T=await(l.isRTL==null?void 0:l.isRTL(c.floating)),R=p||(_||!x?[u0(a)]:YX(a)),L=v!=="none";!p&&L&&R.push(...QX(a,x,v,T));const M=[a,...R],A=await Ff(e,k),$=[];let j=((r=s.flip)==null?void 0:r.overflows)||[];if(h&&$.push(A[C]),f){const Z=qX(i,o,T);$.push(A[Z[0]],A[Z[1]])}if(j=[...j,{placement:i,overflows:$}],!$.every(Z=>Z<=0)){var V,U;const Z=(((V=s.flip)==null?void 0:V.index)||0)+1,q=M[Z];if(q&&(!(f==="alignment"?b!==Cs(q):!1)||j.every(O=>Cs(O.placement)===b?O.overflows[0]>0:!0)))return{data:{index:Z,overflows:j},reset:{placement:q}};let G=(U=j.filter(te=>te.overflows[0]<=0).sort((te,O)=>te.overflows[1]-O.overflows[1])[0])==null?void 0:U.placement;if(!G)switch(g){case"bestFit":{var B;const te=(B=j.filter(O=>{if(L){const K=Cs(O.placement);return K===b||K==="y"}return!0}).map(O=>[O.placement,O.overflows.filter(K=>K>0).reduce((K,Y)=>K+Y,0)]).sort((O,K)=>O[1]-K[1])[0])==null?void 0:B[0];te&&(G=te);break}case"initialPlacement":G=a;break}if(i!==G)return{reset:{placement:G}}}return{}}}};function FT(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function BT(t){return VX.some(e=>t[e]>=0)}const FZ=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...i}=fa(t,e);switch(r){case"referenceHidden":{const s=await Ff(e,{...i,elementContext:"reference"}),o=FT(s,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:BT(o)}}}case"escaped":{const s=await Ff(e,{...i,altBoundary:!0}),o=FT(s,n.floating);return{data:{escapedOffsets:o,escaped:BT(o)}}}default:return{}}}}},cj=new Set(["left","top"]);async function BZ(t,e){const{placement:n,platform:r,elements:i}=t,s=await(r.isRTL==null?void 0:r.isRTL(i.floating)),o=Qi(n),a=jl(n),l=Cs(n)==="y",c=cj.has(o)?-1:1,h=s&&l?-1:1,f=fa(e,t);let{mainAxis:p,crossAxis:g,alignmentAxis:v}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return a&&typeof v=="number"&&(g=a==="end"?v*-1:v),l?{x:g*h,y:p*c}:{x:p*c,y:g*h}}const $Z=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:i,y:s,placement:o,middlewareData:a}=e,l=await BZ(e,t);return o===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:i+l.x,y:s+l.y,data:{...l,placement:o}}}}},zZ=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:i}=e,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:k=>{let{x:C,y:b}=k;return{x:C,y:b}}},...l}=fa(t,e),c={x:n,y:r},h=await Ff(e,l),f=Cs(Qi(i)),p=PS(f);let g=c[p],v=c[f];if(s){const k=p==="y"?"top":"left",C=p==="y"?"bottom":"right",b=g+h[k],_=g-h[C];g=Kx(b,g,_)}if(o){const k=f==="y"?"top":"left",C=f==="y"?"bottom":"right",b=v+h[k],_=v-h[C];v=Kx(b,v,_)}const x=a.fn({...e,[p]:g,[f]:v});return{...x,data:{x:x.x-n,y:x.y-r,enabled:{[p]:s,[f]:o}}}}}},UZ=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:i,rects:s,middlewareData:o}=e,{offset:a=0,mainAxis:l=!0,crossAxis:c=!0}=fa(t,e),h={x:n,y:r},f=Cs(i),p=PS(f);let g=h[p],v=h[f];const x=fa(a,e),k=typeof x=="number"?{mainAxis:x,crossAxis:0}:{mainAxis:0,crossAxis:0,...x};if(l){const _=p==="y"?"height":"width",T=s.reference[p]-s.floating[_]+k.mainAxis,R=s.reference[p]+s.reference[_]-k.mainAxis;g<T?g=T:g>R&&(g=R)}if(c){var C,b;const _=p==="y"?"width":"height",T=cj.has(Qi(i)),R=s.reference[f]-s.floating[_]+(T&&((C=o.offset)==null?void 0:C[f])||0)+(T?0:k.crossAxis),L=s.reference[f]+s.reference[_]+(T?0:((b=o.offset)==null?void 0:b[f])||0)-(T?k.crossAxis:0);v<R?v=R:v>L&&(v=L)}return{[p]:g,[f]:v}}}},VZ=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:i,rects:s,platform:o,elements:a}=e,{apply:l=()=>{},...c}=fa(t,e),h=await Ff(e,c),f=Qi(i),p=jl(i),g=Cs(i)==="y",{width:v,height:x}=s.floating;let k,C;f==="top"||f==="bottom"?(k=f,C=p===(await(o.isRTL==null?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(C=f,k=p==="end"?"top":"bottom");const b=x-h.top-h.bottom,_=v-h.left-h.right,T=ad(x-h[k],b),R=ad(v-h[C],_),L=!e.middlewareData.shift;let M=T,A=R;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(A=_),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(M=b),L&&!p){const j=Wi(h.left,0),V=Wi(h.right,0),U=Wi(h.top,0),B=Wi(h.bottom,0);g?A=v-2*(j!==0||V!==0?j+V:Wi(h.left,h.right)):M=x-2*(U!==0||B!==0?U+B:Wi(h.top,h.bottom))}await l({...e,availableWidth:A,availableHeight:M});const $=await o.getDimensions(a.floating);return v!==$.width||x!==$.height?{reset:{rects:!0}}:{}}}};function dj(t){const e=es(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const i=Kn(t),s=i?t.offsetWidth:n,o=i?t.offsetHeight:r,a=l0(n)!==s||l0(r)!==o;return a&&(n=s,r=o),{width:n,height:r,$:a}}function IS(t){return un(t)?t:t.contextElement}function Hc(t){const e=IS(t);if(!Kn(e))return Ro(1);const n=e.getBoundingClientRect(),{width:r,height:i,$:s}=dj(e);let o=(s?l0(n.width):n.width)/r,a=(s?l0(n.height):n.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const WZ=Ro(0);function hj(t){const e=jr(t);return!nv()||!e.visualViewport?WZ:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function HZ(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==jr(t)?!1:e}function Eu(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const i=t.getBoundingClientRect(),s=IS(t);let o=Ro(1);e&&(r?un(r)&&(o=Hc(r)):o=Hc(t));const a=HZ(s,n,r)?hj(s):Ro(0);let l=(i.left+a.x)/o.x,c=(i.top+a.y)/o.y,h=i.width/o.x,f=i.height/o.y;if(s){const p=jr(s),g=r&&un(r)?jr(r):r;let v=p,x=Hx(v);for(;x&&r&&g!==v;){const k=Hc(x),C=x.getBoundingClientRect(),b=es(x),_=C.left+(x.clientLeft+parseFloat(b.paddingLeft))*k.x,T=C.top+(x.clientTop+parseFloat(b.paddingTop))*k.y;l*=k.x,c*=k.y,h*=k.x,f*=k.y,l+=_,c+=T,v=jr(x),x=Hx(v)}}return c0({width:h,height:f,x:l,y:c})}function sv(t,e){const n=rv(t).scrollLeft;return e?e.left+n:Eu(No(t)).left+n}function fj(t,e){const n=t.getBoundingClientRect(),r=n.left+e.scrollLeft-sv(t,n),i=n.top+e.scrollTop;return{x:r,y:i}}function GZ(t){let{elements:e,rect:n,offsetParent:r,strategy:i}=t;const s=i==="fixed",o=No(r),a=e?tv(e.floating):!1;if(r===o||a&&s)return n;let l={scrollLeft:0,scrollTop:0},c=Ro(1);const h=Ro(0),f=Kn(r);if((f||!f&&!s)&&((Nl(r)!=="body"||Iu(o))&&(l=rv(r)),Kn(r))){const g=Eu(r);c=Hc(r),h.x=g.x+r.clientLeft,h.y=g.y+r.clientTop}const p=o&&!f&&!s?fj(o,l):Ro(0);return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-l.scrollLeft*c.x+h.x+p.x,y:n.y*c.y-l.scrollTop*c.y+h.y+p.y}}function qZ(t){return Array.from(t.getClientRects())}function YZ(t){const e=No(t),n=rv(t),r=t.ownerDocument.body,i=Wi(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),s=Wi(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+sv(t);const a=-n.scrollTop;return es(r).direction==="rtl"&&(o+=Wi(e.clientWidth,r.clientWidth)-i),{width:i,height:s,x:o,y:a}}const $T=25;function KZ(t,e){const n=jr(t),r=No(t),i=n.visualViewport;let s=r.clientWidth,o=r.clientHeight,a=0,l=0;if(i){s=i.width,o=i.height;const h=nv();(!h||h&&e==="fixed")&&(a=i.offsetLeft,l=i.offsetTop)}const c=sv(r);if(c<=0){const h=r.ownerDocument,f=h.body,p=getComputedStyle(f),g=h.compatMode==="CSS1Compat"&&parseFloat(p.marginLeft)+parseFloat(p.marginRight)||0,v=Math.abs(r.clientWidth-f.clientWidth-g);v<=$T&&(s-=v)}else c<=$T&&(s+=c);return{width:s,height:o,x:a,y:l}}const XZ=new Set(["absolute","fixed"]);function ZZ(t,e){const n=Eu(t,!0,e==="fixed"),r=n.top+t.clientTop,i=n.left+t.clientLeft,s=Kn(t)?Hc(t):Ro(1),o=t.clientWidth*s.x,a=t.clientHeight*s.y,l=i*s.x,c=r*s.y;return{width:o,height:a,x:l,y:c}}function zT(t,e,n){let r;if(e==="viewport")r=KZ(t,n);else if(e==="document")r=YZ(No(t));else if(un(e))r=ZZ(e,n);else{const i=hj(t);r={x:e.x-i.x,y:e.y-i.y,width:e.width,height:e.height}}return c0(r)}function pj(t,e){const n=Po(t);return n===e||!un(n)||Eo(n)?!1:es(n).position==="fixed"||pj(n,e)}function QZ(t,e){const n=e.get(t);if(n)return n;let r=fl(t,[],!1).filter(a=>un(a)&&Nl(a)!=="body"),i=null;const s=es(t).position==="fixed";let o=s?Po(t):t;for(;un(o)&&!Eo(o);){const a=es(o),l=kS(o);!l&&a.position==="fixed"&&(i=null),(s?!l&&!i:!l&&a.position==="static"&&!!i&&XZ.has(i.position)||Iu(o)&&!l&&pj(t,o))?r=r.filter(h=>h!==o):i=a,o=Po(o)}return e.set(t,r),r}function JZ(t){let{element:e,boundary:n,rootBoundary:r,strategy:i}=t;const o=[...n==="clippingAncestors"?tv(e)?[]:QZ(e,this._c):[].concat(n),r],a=o[0],l=o.reduce((c,h)=>{const f=zT(e,h,i);return c.top=Wi(f.top,c.top),c.right=ad(f.right,c.right),c.bottom=ad(f.bottom,c.bottom),c.left=Wi(f.left,c.left),c},zT(e,a,i));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function eQ(t){const{width:e,height:n}=dj(t);return{width:e,height:n}}function tQ(t,e,n){const r=Kn(e),i=No(e),s=n==="fixed",o=Eu(t,!0,s,e);let a={scrollLeft:0,scrollTop:0};const l=Ro(0);function c(){l.x=sv(i)}if(r||!r&&!s)if((Nl(e)!=="body"||Iu(i))&&(a=rv(e)),r){const g=Eu(e,!0,s,e);l.x=g.x+e.clientLeft,l.y=g.y+e.clientTop}else i&&c();s&&!r&&i&&c();const h=i&&!r&&!s?fj(i,a):Ro(0),f=o.left+a.scrollLeft-l.x-h.x,p=o.top+a.scrollTop-l.y-h.y;return{x:f,y:p,width:o.width,height:o.height}}function L1(t){return es(t).position==="static"}function UT(t,e){if(!Kn(t)||es(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return No(t)===n&&(n=n.ownerDocument.body),n}function gj(t,e){const n=jr(t);if(tv(t))return n;if(!Kn(t)){let i=Po(t);for(;i&&!Eo(i);){if(un(i)&&!L1(i))return i;i=Po(i)}return n}let r=UT(t,e);for(;r&&pX(r)&&L1(r);)r=UT(r,e);return r&&Eo(r)&&L1(r)&&!kS(r)?n:r||wX(t)||n}const nQ=async function(t){const e=this.getOffsetParent||gj,n=this.getDimensions,r=await n(t.floating);return{reference:tQ(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function rQ(t){return es(t).direction==="rtl"}const iQ={convertOffsetParentRelativeRectToViewportRelativeRect:GZ,getDocumentElement:No,getClippingRect:JZ,getOffsetParent:gj,getElementRects:nQ,getClientRects:qZ,getDimensions:eQ,getScale:Hc,isElement:un,isRTL:rQ};function mj(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function sQ(t,e){let n=null,r;const i=No(t);function s(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),s();const c=t.getBoundingClientRect(),{left:h,top:f,width:p,height:g}=c;if(a||e(),!p||!g)return;const v=Lc(f),x=Lc(i.clientWidth-(h+p)),k=Lc(i.clientHeight-(f+g)),C=Lc(h),_={rootMargin:-v+"px "+-x+"px "+-k+"px "+-C+"px",threshold:Wi(0,ad(1,l))||1};let T=!0;function R(L){const M=L[0].intersectionRatio;if(M!==l){if(!T)return o();M?o(!1,M):r=setTimeout(()=>{o(!1,1e-7)},1e3)}M===1&&!mj(c,t.getBoundingClientRect())&&o(),T=!1}try{n=new IntersectionObserver(R,{..._,root:i.ownerDocument})}catch{n=new IntersectionObserver(R,_)}n.observe(t)}return o(!0),s}function VT(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,c=IS(t),h=i||s?[...c?fl(c):[],...fl(e)]:[];h.forEach(C=>{i&&C.addEventListener("scroll",n,{passive:!0}),s&&C.addEventListener("resize",n)});const f=c&&a?sQ(c,n):null;let p=-1,g=null;o&&(g=new ResizeObserver(C=>{let[b]=C;b&&b.target===c&&g&&(g.unobserve(e),cancelAnimationFrame(p),p=requestAnimationFrame(()=>{var _;(_=g)==null||_.observe(e)})),n()}),c&&!l&&g.observe(c),g.observe(e));let v,x=l?Eu(t):null;l&&k();function k(){const C=Eu(t);x&&!mj(x,C)&&n(),x=C,v=requestAnimationFrame(k)}return n(),()=>{var C;h.forEach(b=>{i&&b.removeEventListener("scroll",n),s&&b.removeEventListener("resize",n)}),f==null||f(),(C=g)==null||C.disconnect(),g=null,l&&cancelAnimationFrame(v)}}const oQ=$Z,aQ=zZ,lQ=DZ,uQ=VZ,cQ=FZ,dQ=UZ,hQ=(t,e,n)=>{const r=new Map,i={platform:iQ,...n},s={...i.platform,_c:r};return OZ(t,e,{...i,platform:s})};var fQ=typeof document<"u",pQ=function(){},hm=fQ?y.useLayoutEffect:pQ;function p0(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,i;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!p0(t[r],e[r]))return!1;return!0}if(i=Object.keys(t),n=i.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,i[r]))return!1;for(r=n;r--!==0;){const s=i[r];if(!(s==="_owner"&&t.$$typeof)&&!p0(t[s],e[s]))return!1}return!0}return t!==t&&e!==e}function vj(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function WT(t,e){const n=vj(t);return Math.round(e*n)/n}function M1(t){const e=y.useRef(t);return hm(()=>{e.current=t}),e}function gQ(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:s,floating:o}={},transform:a=!0,whileElementsMounted:l,open:c}=t,[h,f]=y.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[p,g]=y.useState(r);p0(p,r)||g(r);const[v,x]=y.useState(null),[k,C]=y.useState(null),b=y.useCallback(O=>{O!==L.current&&(L.current=O,x(O))},[]),_=y.useCallback(O=>{O!==M.current&&(M.current=O,C(O))},[]),T=s||v,R=o||k,L=y.useRef(null),M=y.useRef(null),A=y.useRef(h),$=l!=null,j=M1(l),V=M1(i),U=M1(c),B=y.useCallback(()=>{if(!L.current||!M.current)return;const O={placement:e,strategy:n,middleware:p};V.current&&(O.platform=V.current),hQ(L.current,M.current,O).then(K=>{const Y={...K,isPositioned:U.current!==!1};Z.current&&!p0(A.current,Y)&&(A.current=Y,oi.flushSync(()=>{f(Y)}))})},[p,e,n,V,U]);hm(()=>{c===!1&&A.current.isPositioned&&(A.current.isPositioned=!1,f(O=>({...O,isPositioned:!1})))},[c]);const Z=y.useRef(!1);hm(()=>(Z.current=!0,()=>{Z.current=!1}),[]),hm(()=>{if(T&&(L.current=T),R&&(M.current=R),T&&R){if(j.current)return j.current(T,R,B);B()}},[T,R,B,j,$]);const q=y.useMemo(()=>({reference:L,floating:M,setReference:b,setFloating:_}),[b,_]),G=y.useMemo(()=>({reference:T,floating:R}),[T,R]),te=y.useMemo(()=>{const O={position:n,left:0,top:0};if(!G.floating)return O;const K=WT(G.floating,h.x),Y=WT(G.floating,h.y);return a?{...O,transform:"translate("+K+"px, "+Y+"px)",...vj(G.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:K,top:Y}},[n,a,G.floating,h.x,h.y]);return y.useMemo(()=>({...h,update:B,refs:q,elements:G,floatingStyles:te}),[h,B,q,G,te])}const mQ=(t,e)=>({...oQ(t),options:[t,e]}),vQ=(t,e)=>({...aQ(t),options:[t,e]}),yQ=(t,e)=>({...dQ(t),options:[t,e]}),wQ=(t,e)=>({...lQ(t),options:[t,e]}),xQ=(t,e)=>({...uQ(t),options:[t,e]}),_Q=(t,e)=>({...cQ(t),options:[t,e]}),bQ={intentional:"onClick",sloppy:"onPointerDown"};function SQ(t){return{escapeKey:typeof t=="boolean"?t:(t==null?void 0:t.escapeKey)??!1,outsidePress:typeof t=="boolean"?t:(t==null?void 0:t.outsidePress)??!0}}function CQ(t,e={}){const n="rootStore"in t?t.rootStore:t,r=n.useState("open"),i=n.useState("floatingElement"),s=n.useState("referenceElement"),o=n.useState("domReferenceElement"),{onOpenChange:a,dataRef:l}=n.context,{enabled:c=!0,escapeKey:h=!0,outsidePress:f=!0,outsidePressEvent:p="sloppy",referencePress:g=!1,referencePressEvent:v="sloppy",ancestorScroll:x=!1,bubbles:k,externalTree:C}=e,b=Il(C),_=dt(typeof f=="function"?f:()=>!1),T=typeof f=="function"?_:f,R=y.useRef(!1),{escapeKey:L,outsidePress:M}=SQ(k),A=y.useRef(null),$=wi(),j=wi(),V=dt(()=>{j.clear(),l.current.insideReactTree=!1}),U=y.useRef(!1),B=y.useRef(""),Z=dt(X=>{B.current=X.pointerType}),q=dt(()=>{const X=B.current,ye=X==="pen"||!X?"mouse":X,_e=typeof p=="function"?p():p;return typeof _e=="string"?_e:_e[ye]}),G=dt(X=>{var fe;if(!r||!c||!h||X.key!=="Escape"||U.current)return;const ye=(fe=l.current.floatingContext)==null?void 0:fe.nodeId,_e=b?yu(b.nodesRef.current,ye):[];if(!L&&_e.length>0){let ve=!0;if(_e.forEach(Ae=>{var De;(De=Ae.context)!=null&&De.open&&!Ae.context.dataRef.current.__escapeKeyBubbles&&(ve=!1)}),!ve)return}const at=UX(X)?X.nativeEvent:X,Le=en(SS,at);n.setOpen(!1,Le),!L&&!Le.isPropagationAllowed&&X.stopPropagation()}),te=dt(X=>{const ye=q();return ye==="intentional"&&X.type!=="click"||ye==="sloppy"&&X.type==="click"}),O=dt(()=>{l.current.insideReactTree=!0,j.start(0,V)}),K=dt((X,ye=!1)=>{var Ie;if(te(X)){V();return}if(l.current.insideReactTree){V();return}if(q()==="intentional"&&ye||typeof T=="function"&&!T(X))return;const _e=si(X),at=`[${ud("inert")}]`,Le=rr(n.select("floatingElement")).querySelectorAll(at),fe=n.context.triggerElements;if(_e&&(fe.hasElement(_e)||fe.hasMatchingElement(ze=>Dt(ze,_e))))return;let ve=un(_e)?_e:null;for(;ve&&!Eo(ve);){const ze=Po(ve);if(Eo(ze)||!un(ze))break;ve=ze}if(Le.length&&un(_e)&&!$X(_e)&&!Dt(_e,n.select("floatingElement"))&&Array.from(Le).every(ze=>!Dt(ve,ze)))return;if(Kn(_e)&&!("touches"in X)){const ze=Eo(_e),Ce=es(_e),Oe=/auto|scroll/,Ne=ze||Oe.test(Ce.overflowX),yt=ze||Oe.test(Ce.overflowY),Fe=Ne&&_e.clientWidth>0&&_e.scrollWidth>_e.clientWidth,st=yt&&_e.clientHeight>0&&_e.scrollHeight>_e.clientHeight,wt=Ce.direction==="rtl",At=st&&(wt?X.offsetX<=_e.offsetWidth-_e.clientWidth:X.offsetX>_e.clientWidth),Ye=Fe&&X.offsetY>_e.clientHeight;if(At||Ye)return}const Ae=(Ie=l.current.floatingContext)==null?void 0:Ie.nodeId,De=b&&yu(b.nodesRef.current,Ae).some(ze=>{var Ce;return zs(X,(Ce=ze.context)==null?void 0:Ce.elements.floating)});if(zs(X,n.select("floatingElement"))||zs(X,n.select("domReferenceElement"))||De)return;const Ue=b?yu(b.nodesRef.current,Ae):[];if(Ue.length>0){let ze=!0;if(Ue.forEach(Ce=>{var Oe;(Oe=Ce.context)!=null&&Oe.open&&!Ce.context.dataRef.current.__outsidePressBubbles&&(ze=!1)}),!ze)return}n.setOpen(!1,en(bS,X)),V()}),Y=dt(X=>{q()!=="sloppy"||X.pointerType==="touch"||!n.select("open")||!c||zs(X,n.select("floatingElement"))||zs(X,n.select("domReferenceElement"))||K(X)}),xe=dt(X=>{if(q()!=="sloppy"||!n.select("open")||!c||zs(X,n.select("floatingElement"))||zs(X,n.select("domReferenceElement")))return;const ye=X.touches[0];ye&&(A.current={startTime:Date.now(),startX:ye.clientX,startY:ye.clientY,dismissOnTouchEnd:!1,dismissOnMouseDown:!0},$.start(1e3,()=>{A.current&&(A.current.dismissOnTouchEnd=!1,A.current.dismissOnMouseDown=!1)}))}),re=dt(X=>{const ye=si(X);function _e(){xe(X),ye==null||ye.removeEventListener(X.type,_e)}ye==null||ye.addEventListener(X.type,_e)}),ue=dt(X=>{const ye=R.current;if(R.current=!1,$.clear(),X.type==="mousedown"&&A.current&&!A.current.dismissOnMouseDown)return;const _e=si(X);function at(){X.type==="pointerdown"?Y(X):K(X,ye),_e==null||_e.removeEventListener(X.type,at)}_e==null||_e.addEventListener(X.type,at)}),ke=dt(X=>{if(q()!=="sloppy"||!A.current||zs(X,n.select("floatingElement"))||zs(X,n.select("domReferenceElement")))return;const ye=X.touches[0];if(!ye)return;const _e=Math.abs(ye.clientX-A.current.startX),at=Math.abs(ye.clientY-A.current.startY),Le=Math.sqrt(_e*_e+at*at);Le>5&&(A.current.dismissOnTouchEnd=!0),Le>10&&(K(X),$.clear(),A.current=null)}),qe=dt(X=>{const ye=si(X);function _e(){ke(X),ye==null||ye.removeEventListener(X.type,_e)}ye==null||ye.addEventListener(X.type,_e)}),he=dt(X=>{q()!=="sloppy"||!A.current||zs(X,n.select("floatingElement"))||zs(X,n.select("domReferenceElement"))||(A.current.dismissOnTouchEnd&&K(X),$.clear(),A.current=null)}),ge=dt(X=>{const ye=si(X);function _e(){he(X),ye==null||ye.removeEventListener(X.type,_e)}ye==null||ye.addEventListener(X.type,_e)});y.useEffect(()=>{if(!r||!c)return;l.current.__escapeKeyBubbles=L,l.current.__outsidePressBubbles=M;const X=new ku;function ye(ve){n.setOpen(!1,en(aX,ve))}function _e(){X.clear(),U.current=!0}function at(){X.start(nv()?5:0,()=>{U.current=!1})}const Le=rr(i);Le.addEventListener("pointerdown",Z,!0),h&&(Le.addEventListener("keydown",G),Le.addEventListener("compositionstart",_e),Le.addEventListener("compositionend",at)),T&&(Le.addEventListener("click",ue,!0),Le.addEventListener("pointerdown",ue,!0),Le.addEventListener("touchstart",re,!0),Le.addEventListener("touchmove",qe,!0),Le.addEventListener("touchend",ge,!0),Le.addEventListener("mousedown",ue,!0));let fe=[];return x&&(un(o)&&(fe=fl(o)),un(i)&&(fe=fe.concat(fl(i))),!un(s)&&s&&s.contextElement&&(fe=fe.concat(fl(s.contextElement)))),fe=fe.filter(ve=>{var Ae;return ve!==((Ae=Le.defaultView)==null?void 0:Ae.visualViewport)}),fe.forEach(ve=>{ve.addEventListener("scroll",ye,{passive:!0})}),()=>{Le.removeEventListener("pointerdown",Z,!0),h&&(Le.removeEventListener("keydown",G),Le.removeEventListener("compositionstart",_e),Le.removeEventListener("compositionend",at)),T&&(Le.removeEventListener("click",ue,!0),Le.removeEventListener("pointerdown",ue,!0),Le.removeEventListener("touchstart",re,!0),Le.removeEventListener("touchmove",qe,!0),Le.removeEventListener("touchend",ge,!0),Le.removeEventListener("mousedown",ue,!0)),fe.forEach(ve=>{ve.removeEventListener("scroll",ye)}),X.clear()}},[l,i,s,o,h,T,r,a,x,c,L,M,G,K,ue,Y,re,qe,ge,Z,n]),y.useEffect(V,[T,V]);const we=y.useMemo(()=>({onKeyDown:G,...g&&{[bQ[v]]:X=>{n.setOpen(!1,en(hl,X.nativeEvent))},...v!=="intentional"&&{onClick(X){n.setOpen(!1,en(hl,X.nativeEvent))}}}}),[G,n,g,v]),ae=dt(X=>{const ye=si(X.nativeEvent);!Dt(n.select("floatingElement"),ye)||X.button!==0||(R.current=!0)}),me=y.useMemo(()=>({onKeyDown:G,onPointerDown:ae,onMouseDown:ae,onMouseUp:ae,onClickCapture:O,onMouseDownCapture:O,onPointerDownCapture:O,onMouseUpCapture:O,onTouchEndCapture:O,onTouchMoveCapture:O}),[G,ae,O]);return y.useMemo(()=>c?{reference:we,floating:me,trigger:we}:{},[c,we,me])}var g0=Symbol("NOT_FOUND");function kQ(t,e=`expected a function, instead received ${typeof t}`){if(typeof t!="function")throw new TypeError(e)}function EQ(t,e=`expected an object, instead received ${typeof t}`){if(typeof t!="object")throw new TypeError(e)}function RQ(t,e="expected all items to be functions, instead received the following types: "){if(!t.every(n=>typeof n=="function")){const n=t.map(r=>typeof r=="function"?`function ${r.name||"unnamed"}()`:typeof r).join(", ");throw new TypeError(`${e}[${n}]`)}}var HT=t=>Array.isArray(t)?t:[t];function TQ(t){const e=Array.isArray(t[0])?t[0]:t;return RQ(e,"createSelector expects all input-selectors to be functions, but received the following types: "),e}function PQ(t,e){const n=[],{length:r}=t;for(let i=0;i<r;i++)n.push(t[i].apply(null,e));return n}function LQ(t){let e;return{get(n){return e&&t(e.key,n)?e.value:g0},put(n,r){e={key:n,value:r}},getEntries(){return e?[e]:[]},clear(){e=void 0}}}function MQ(t,e){let n=[];function r(a){const l=n.findIndex(c=>e(a,c.key));if(l>-1){const c=n[l];return l>0&&(n.splice(l,1),n.unshift(c)),c.value}return g0}function i(a,l){r(a)===g0&&(n.unshift({key:a,value:l}),n.length>t&&n.pop())}function s(){return n}function o(){n=[]}return{get:r,put:i,getEntries:s,clear:o}}var AQ=(t,e)=>t===e;function NQ(t){return function(n,r){if(n===null||r===null||n.length!==r.length)return!1;const{length:i}=n;for(let s=0;s<i;s++)if(!t(n[s],r[s]))return!1;return!0}}function jQ(t,e){const n=typeof e=="object"?e:{equalityCheck:e},{equalityCheck:r=AQ,maxSize:i=1,resultEqualityCheck:s}=n,o=NQ(r);let a=0;const l=i<=1?LQ(o):MQ(i,o);function c(){let h=l.get(arguments);if(h===g0){if(h=t.apply(null,arguments),a++,s){const p=l.getEntries().find(g=>s(g.value,h));p&&(h=p.value,a!==0&&a--)}l.put(arguments,h)}return h}return c.clearCache=()=>{l.clear(),c.resetResultsCount()},c.resultsCount=()=>a,c.resetResultsCount=()=>{a=0},c}var IQ=class{constructor(t){this.value=t}deref(){return this.value}},OQ=typeof WeakRef<"u"?WeakRef:IQ,DQ=0,GT=1;function Fg(){return{s:DQ,v:void 0,o:null,p:null}}function yj(t,e={}){let n=Fg();const{resultEqualityCheck:r}=e;let i,s=0;function o(){var f;let a=n;const{length:l}=arguments;for(let p=0,g=l;p<g;p++){const v=arguments[p];if(typeof v=="function"||typeof v=="object"&&v!==null){let x=a.o;x===null&&(a.o=x=new WeakMap);const k=x.get(v);k===void 0?(a=Fg(),x.set(v,a)):a=k}else{let x=a.p;x===null&&(a.p=x=new Map);const k=x.get(v);k===void 0?(a=Fg(),x.set(v,a)):a=k}}const c=a;let h;if(a.s===GT)h=a.v;else if(h=t.apply(null,arguments),s++,r){const p=((f=i==null?void 0:i.deref)==null?void 0:f.call(i))??i;p!=null&&r(p,h)&&(h=p,s!==0&&s--),i=typeof h=="object"&&h!==null||typeof h=="function"?new OQ(h):h}return c.s=GT,c.v=h,h}return o.clearCache=()=>{n=Fg(),o.resetResultsCount()},o.resultsCount=()=>s,o.resetResultsCount=()=>{s=0},o}function wj(t,...e){const n=typeof t=="function"?{memoize:t,memoizeOptions:e}:t,r=(...i)=>{let s=0,o=0,a,l={},c=i.pop();typeof c=="object"&&(l=c,c=i.pop()),kQ(c,`createSelector expects an output function after the inputs, but received: [${typeof c}]`);const h={...n,...l},{memoize:f,memoizeOptions:p=[],argsMemoize:g=yj,argsMemoizeOptions:v=[],devModeChecks:x={}}=h,k=HT(p),C=HT(v),b=TQ(i),_=f(function(){return s++,c.apply(null,arguments)},...k),T=g(function(){o++;const L=PQ(b,arguments);return a=_.apply(null,L),a},...C);return Object.assign(T,{resultFunc:c,memoizedResultFunc:_,dependencies:b,dependencyRecomputations:()=>o,resetDependencyRecomputations:()=>{o=0},lastResult:()=>a,recomputations:()=>s,resetRecomputations:()=>{s=0},memoize:f,argsMemoize:g})};return Object.assign(r,{withTypes:()=>r}),r}var FQ=wj(yj),BQ=Object.assign((t,e=FQ)=>{EQ(t,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof t}`);const n=Object.keys(t),r=n.map(s=>t[s]);return e(r,(...s)=>s.reduce((o,a,l)=>(o[n[l]]=a,o),{}))},{withTypes:()=>BQ});wj({memoize:jQ,memoizeOptions:{maxSize:1,equalityCheck:Object.is}});const Ot=(t,e,n,r,i,s,...o)=>{if(o.length>0)throw new Error(Ao(1));let a;if(t&&e&&n&&r&&i&&s)a=(l,c,h,f)=>{const p=t(l,c,h,f),g=e(l,c,h,f),v=n(l,c,h,f),x=r(l,c,h,f),k=i(l,c,h,f);return s(p,g,v,x,k,c,h,f)};else if(t&&e&&n&&r&&i)a=(l,c,h,f)=>{const p=t(l,c,h,f),g=e(l,c,h,f),v=n(l,c,h,f),x=r(l,c,h,f);return i(p,g,v,x,c,h,f)};else if(t&&e&&n&&r)a=(l,c,h,f)=>{const p=t(l,c,h,f),g=e(l,c,h,f),v=n(l,c,h,f);return r(p,g,v,c,h,f)};else if(t&&e&&n)a=(l,c,h,f)=>{const p=t(l,c,h,f),g=e(l,c,h,f);return n(p,g,c,h,f)};else if(t&&e)a=(l,c,h,f)=>{const p=t(l,c,h,f);return e(p,c,h,f)};else if(t)a=t;else throw new Error("Missing arguments");return a};var xj={exports:{}},_j={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dd=y;function $Q(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var zQ=typeof Object.is=="function"?Object.is:$Q,UQ=dd.useState,VQ=dd.useEffect,WQ=dd.useLayoutEffect,HQ=dd.useDebugValue;function GQ(t,e){var n=e(),r=UQ({inst:{value:n,getSnapshot:e}}),i=r[0].inst,s=r[1];return WQ(function(){i.value=n,i.getSnapshot=e,A1(i)&&s({inst:i})},[t,n,e]),VQ(function(){return A1(i)&&s({inst:i}),t(function(){A1(i)&&s({inst:i})})},[t]),HQ(n),n}function A1(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!zQ(t,n)}catch{return!0}}function qQ(t,e){return e()}var YQ=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?qQ:GQ;_j.useSyncExternalStore=dd.useSyncExternalStore!==void 0?dd.useSyncExternalStore:YQ;xj.exports=_j;var bj=xj.exports,Sj={exports:{}},Cj={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ov=y,KQ=bj;function XQ(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var ZQ=typeof Object.is=="function"?Object.is:XQ,QQ=KQ.useSyncExternalStore,JQ=ov.useRef,eJ=ov.useEffect,tJ=ov.useMemo,nJ=ov.useDebugValue;Cj.useSyncExternalStoreWithSelector=function(t,e,n,r,i){var s=JQ(null);if(s.current===null){var o={hasValue:!1,value:null};s.current=o}else o=s.current;s=tJ(function(){function l(g){if(!c){if(c=!0,h=g,g=r(g),i!==void 0&&o.hasValue){var v=o.value;if(i(v,g))return f=v}return f=g}if(v=f,ZQ(h,g))return v;var x=r(g);return i!==void 0&&i(v,x)?(h=g,v):(h=g,f=x)}var c=!1,h,f,p=n===void 0?null:n;return[function(){return l(e())},p===null?void 0:function(){return l(p())}]},[e,n,r,i]);var a=QQ(t,s[0],s[1]);return eJ(function(){o.hasValue=!0,o.value=a},[a]),nJ(a),a};Sj.exports=Cj;var rJ=Sj.exports;const iJ=xS(19),sJ=iJ?aJ:lJ;function oJ(t,e,n,r,i){return sJ(t,e,n,r,i)}function aJ(t,e,n,r,i){const s=y.useCallback(()=>e(t.getSnapshot(),n,r,i),[t,e,n,r,i]);return bj.useSyncExternalStore(t.subscribe,s,s)}function lJ(t,e,n,r,i){return rJ.useSyncExternalStoreWithSelector(t.subscribe,t.getSnapshot,t.getSnapshot,s=>e(s,n,r,i))}class of{constructor(e){_t(this,"subscribe",e=>(this.listeners.add(e),()=>{this.listeners.delete(e)}));_t(this,"getSnapshot",()=>this.state);this.state=e,this.listeners=new Set,this.updateTick=0}setState(e){if(this.state===e)return;this.state=e,this.updateTick+=1;const n=this.updateTick;for(const r of this.listeners){if(n!==this.updateTick)return;r(e)}}update(e){for(const n in e)if(!Object.is(this.state[n],e[n])){of.prototype.setState.call(this,{...this.state,...e});return}}set(e,n){Object.is(this.state[e],n)||of.prototype.setState.call(this,{...this.state,[e]:n})}notifyAll(){const e={...this.state};of.prototype.setState.call(this,e)}}class kj extends of{constructor(n,r={},i){super(n);_t(this,"controlledValues",new Map);_t(this,"select",(n,r,i,s)=>{const o=this.selectors[n];return o(this.state,r,i,s)});_t(this,"useState",(n,r,i,s)=>{y.useDebugValue(n);const o=this.selectors[n];return oJ(this,o,r,i,s)});this.context=r,this.selectors=i}useSyncedValue(n,r){y.useDebugValue(n),kt(()=>{this.state[n]!==r&&this.set(n,r)},[n,r])}useSyncedValueWithCleanup(n,r){kt(()=>(this.state[n]!==r&&this.set(n,r),()=>{this.set(n,void 0)}),[n,r])}useSyncedValues(n){const r=Object.values(n);kt(()=>{this.update(n)},r)}useControlledProp(n,r,i){y.useDebugValue(n);const s=r!==void 0;this.controlledValues.has(n)||(this.controlledValues.set(n,s),!s&&!Object.is(this.state[n],i)&&super.setState({...this.state,[n]:i})),kt(()=>{s&&!Object.is(this.state[n],r)&&super.setState({...this.state,[n]:r})},[n,r,i,s])}set(n,r){this.controlledValues.get(n)!==!0&&super.set(n,r)}update(n){const r={...n};for(const i in r)if(Object.hasOwn(r,i)&&this.controlledValues.get(i)===!0){delete r[i];continue}super.update(r)}setState(n){const r={...n};for(const i in r)if(Object.hasOwn(r,i)&&this.controlledValues.get(i)===!0){delete r[i];continue}super.setState({...this.state,...r})}useContextCallback(n,r){y.useDebugValue(n);const i=dt(r??CN);this.context[n]=i}useStateSetter(n){const r=y.useRef(void 0);return r.current===void 0&&(r.current=i=>{this.set(n,i)}),r.current}observe(n,r){let i;typeof n=="function"?i=n:i=this.selectors[n];let s=i(this.state);return r(s,s,this),this.subscribe(o=>{const a=i(o);if(!Object.is(s,a)){const l=s;s=a,r(a,l,this)}})}}const uJ={open:Ot(t=>t.open),domReferenceElement:Ot(t=>t.domReferenceElement),referenceElement:Ot(t=>t.positionReference??t.referenceElement),floatingElement:Ot(t=>t.floatingElement),floatingId:Ot(t=>t.floatingId)};class OS extends kj{constructor(n){const{nested:r,noEmit:i,onOpenChange:s,triggerElements:o,...a}=n;super({...a,positionReference:a.referenceElement,domReferenceElement:a.referenceElement},{onOpenChange:s,dataRef:{current:{}},events:nj(),nested:r,noEmit:i,triggerElements:o},uJ);_t(this,"setOpen",(n,r)=>{var i,s;if((!n||!this.state.open||WN(r.event))&&(this.context.dataRef.current.openEvent=n?r.event:void 0),!this.context.noEmit){const o={open:n,reason:r.reason,nativeEvent:r.event,nested:this.context.nested,triggerElement:r.trigger};this.context.events.emit("openchange",o)}(s=(i=this.context).onOpenChange)==null||s.call(i,n,r)})}}function cJ(t,e){const n=y.useRef(null);return y.useCallback(r=>{if(t!==void 0&&(n.current!==null&&(e.context.triggerElements.delete(n.current),n.current=null),r!==null))return n.current=t,e.context.triggerElements.add(t,r),()=>{n.current!==null&&(e.context.triggerElements.delete(n.current),n.current=null)}},[e,t])}function dJ(t,e,n,r){const i=n.useState("isMountedByTrigger",t),s=cJ(t,n),o=dt(a=>{const l=s(a);return a!==null&&n.select("open")&&n.select("activeTriggerId")==null&&n.update({activeTriggerId:t,activeTriggerElement:a,...r}),l});return kt(()=>{i&&n.update({activeTriggerElement:e.current,...r})},[i,n,e,...Object.values(r)]),{registerTrigger:o,isMountedByThisTrigger:i}}function hJ(t){const e=t.useState("open");kt(()=>{if(e&&!t.select("activeTriggerId")&&t.context.triggerElements.size===1){const n=t.context.triggerElements.entries().next();if(!n.done){const[r,i]=n.value;t.update({activeTriggerId:r,activeTriggerElement:i})}}},[e,t])}function fJ(t,e,n){const{mounted:r,setMounted:i,transitionStatus:s}=MX(t);e.useSyncedValues({mounted:r,transitionStatus:s});const o=dt(()=>{var l,c;i(!1),e.update({activeTriggerId:null,activeTriggerElement:null,mounted:!1}),n==null||n(),(c=(l=e.context).onOpenChangeComplete)==null||c.call(l,!1)}),a=e.useState("preventUnmountingOnClose");return jN({enabled:!a,open:t,ref:e.context.popupRef,onComplete(){t||o()}}),{forceUnmount:o,transitionStatus:s}}class DS{constructor(){this.elements=new Set,this.idMap=new Map}add(e,n){const r=this.idMap.get(e);r!==n&&(r!==void 0&&this.elements.delete(r),this.elements.add(n),this.idMap.set(e,n))}delete(e){const n=this.idMap.get(e);n&&(this.elements.delete(n),this.idMap.delete(e))}hasElement(e){return this.elements.has(e)}hasMatchingElement(e){for(const n of this.elements)if(e(n))return!0;return!1}getById(e){return this.idMap.get(e)}entries(){return this.idMap.entries()}get size(){return this.idMap.size}}function pJ(){return new OS({open:!1,floatingElement:null,referenceElement:null,triggerElements:new DS,floatingId:"",nested:!1,noEmit:!1,onOpenChange:void 0})}function gJ(){return{open:!1,mounted:!1,transitionStatus:"idle",floatingRootContext:pJ(),preventUnmountingOnClose:!1,payload:void 0,activeTriggerId:null,activeTriggerElement:null,popupElement:null,positionerElement:null,activeTriggerProps:Ar,inactiveTriggerProps:Ar,popupProps:Ar}}const mJ={open:Ot(t=>t.open),mounted:Ot(t=>t.mounted),transitionStatus:Ot(t=>t.transitionStatus),floatingRootContext:Ot(t=>t.floatingRootContext),preventUnmountingOnClose:Ot(t=>t.preventUnmountingOnClose),payload:Ot(t=>t.payload),activeTriggerId:Ot(t=>t.activeTriggerId),activeTriggerElement:Ot(t=>t.mounted?t.activeTriggerElement:null),isTriggerActive:Ot((t,e)=>e!==void 0&&t.activeTriggerId===e),isOpenedByTrigger:Ot((t,e)=>e!==void 0&&t.activeTriggerId===e&&t.open),isMountedByTrigger:Ot((t,e)=>e!==void 0&&t.activeTriggerId===e&&t.mounted),triggerProps:Ot((t,e)=>e?t.activeTriggerProps:t.inactiveTriggerProps),popupProps:Ot(t=>t.popupProps),popupElement:Ot(t=>t.popupElement),positionerElement:Ot(t=>t.positionerElement)};function vJ(t){const{open:e=!1,onOpenChange:n,elements:r={}}=t,i=Ll(),s=xa()!=null,o=Ls(()=>new OS({open:e,onOpenChange:n,referenceElement:r.reference??null,floatingElement:r.floating??null,triggerElements:r.triggers??new DS,floatingId:i,nested:s,noEmit:t.noEmit||!1})).current;return kt(()=>{const a={open:e,floatingId:i};r.reference!==void 0&&(a.referenceElement=r.reference,a.domReferenceElement=un(r.reference)?r.reference:null),r.floating!==void 0&&(a.floatingElement=r.floating),o.update(a)},[e,i,r.reference,r.floating,o]),o.context.onOpenChange=n,o.context.nested=s,o.context.noEmit=t.noEmit||!1,o}function yJ(t={}){const{nodeId:e,externalTree:n}=t,r=vJ(t),i=t.rootContext||r,s={reference:i.useState("referenceElement"),floating:i.useState("floatingElement"),domReference:i.useState("domReferenceElement")},[o,a]=y.useState(null),l=y.useRef(null),c=Il(n);kt(()=>{s.domReference&&(l.current=s.domReference)},[s.domReference]);const h=gQ({...t,elements:{...s,...o&&{reference:o}}}),f=y.useCallback(M=>{const A=un(M)?{getBoundingClientRect:()=>M.getBoundingClientRect(),getClientRects:()=>M.getClientRects(),contextElement:M}:M;a(A),h.refs.setReference(A)},[h.refs]),[p,g]=y.useState(null),[v,x]=y.useState(null);i.useSyncedValue("referenceElement",p),i.useSyncedValue("domReferenceElement",un(p)?p:null),i.useSyncedValue("floatingElement",v);const k=y.useCallback(M=>{(un(M)||M===null)&&(l.current=M,g(M)),(un(h.refs.reference.current)||h.refs.reference.current===null||M!==null&&!un(M))&&h.refs.setReference(M)},[h.refs,g]),C=y.useCallback(M=>{x(M),h.refs.setFloating(M)},[h.refs]),b=y.useMemo(()=>({...h.refs,setReference:k,setFloating:C,setPositionReference:f,domReference:l}),[h.refs,k,C,f]),_=y.useMemo(()=>({...h.elements,domReference:s.domReference}),[h.elements,s.domReference]),T=i.useState("open"),R=i.useState("floatingId"),L=y.useMemo(()=>({...h,dataRef:i.context.dataRef,open:T,onOpenChange:i.setOpen,events:i.context.events,floatingId:R,refs:b,elements:_,nodeId:e,rootStore:i}),[h,b,_,e,i,T,R]);return kt(()=>{i.context.dataRef.current.floatingContext=L;const M=c==null?void 0:c.nodesRef.current.find(A=>A.id===e);M&&(M.context=L)}),y.useMemo(()=>({...h,context:L,refs:b,elements:_,rootStore:i}),[h,b,_,L,i])}function wJ(t){const{popupStore:e,noEmit:n=!1,treatPopupAsFloatingElement:r=!1,onOpenChange:i}=t,s=Ll(),o=xa()!=null,a=e.useState("open"),l=e.useState("activeTriggerElement"),c=e.useState(r?"popupElement":"positionerElement"),h=e.context.triggerElements,f=Ls(()=>new OS({open:a,referenceElement:l,floatingElement:c,triggerElements:h,onOpenChange:i,floatingId:s,nested:o,noEmit:n})).current;return kt(()=>{const p={open:a,floatingId:s,referenceElement:l,floatingElement:c};un(l)&&(p.domReferenceElement=l),f.update(p)},[a,s,l,c,f]),f.context.onOpenChange=i,f.context.nested=o,f.context.noEmit=n,f}const N1=OX&&DN;function xJ(t,e={}){const n="rootStore"in t?t.rootStore:t,{events:r,dataRef:i}=n.context,{enabled:s=!0,visibleOnly:o=!0}=e,a=y.useRef(!1),l=wi(),c=y.useRef(!0);y.useEffect(()=>{const f=n.select("domReferenceElement");if(!s)return;const p=jr(f);function g(){!n.select("open")&&Kn(f)&&f===_o(rr(f))&&(a.current=!0)}function v(){c.current=!0}function x(){c.current=!1}return p.addEventListener("blur",g),N1&&(p.addEventListener("keydown",v,!0),p.addEventListener("pointerdown",x,!0)),()=>{p.removeEventListener("blur",g),N1&&(p.removeEventListener("keydown",v,!0),p.removeEventListener("pointerdown",x,!0))}},[n,s]),y.useEffect(()=>{if(!s)return;function f(p){(p.reason===hl||p.reason===SS)&&(a.current=!0)}return r.on("openchange",f),()=>{r.off("openchange",f)}},[r,s]);const h=y.useMemo(()=>({onMouseLeave(){a.current=!1},onFocus(f){if(a.current)return;const p=si(f.nativeEvent);if(o&&un(p)){if(N1&&!f.relatedTarget){if(!c.current&&!TS(p))return}else if(!zX(p))return}n.setOpen(!0,en(o0,f.nativeEvent,f.currentTarget))},onBlur(f){a.current=!1;const p=f.relatedTarget,g=f.nativeEvent,v=un(p)&&p.hasAttribute(ud("focus-guard"))&&p.getAttribute("data-type")==="outside";l.start(0,()=>{var C;const x=n.select("domReferenceElement"),k=_o(x?x.ownerDocument:document);!p&&k===x||Dt((C=i.current.floatingContext)==null?void 0:C.refs.floating.current,k)||Dt(x,k)||v||n.context.triggerElements.hasElement(f.relatedTarget)||n.setOpen(!1,en(o0,g))})}}),[i,n,o,l]);return y.useMemo(()=>s?{reference:h,trigger:h}:{},[s,h])}const Jx=ud("safe-polygon"),_J=`button,a,[role="button"],select,[tabindex]:not([tabindex="-1"]),${zN}`;function bJ(t){return t?!!t.closest(_J):!1}function Ej(t){const e=y.useRef(void 0),n=y.useRef(!1),r=y.useRef(void 0),i=y.useRef(!0),s=y.useRef(!1),o=y.useRef(()=>{}),a=y.useRef(!1),l=wi(),c=wi(),h=y.useRef(void 0);return y.useMemo(()=>{const f=t.context.dataRef.current;return f.hoverInteractionState||(f.hoverInteractionState={pointerTypeRef:e,interactedInsideRef:n,handlerRef:r,blockMouseMoveRef:i,performedPointerEventsMutationRef:s,unbindMouseMoveRef:o,restTimeoutPendingRef:a,openChangeTimeout:l,restTimeout:c,handleCloseOptionsRef:h}),f.hoverInteractionState},[t,e,n,r,i,s,o,a,l,c,h])}const SJ=new Set(["click","mousedown"]);function CJ(t,e={}){const n="rootStore"in t?t.rootStore:t,r=n.useState("open"),i=n.useState("floatingElement"),s=n.useState("domReferenceElement"),{dataRef:o}=n.context,{enabled:a=!0,closeDelay:l=0,externalTree:c}=e,{pointerTypeRef:h,interactedInsideRef:f,handlerRef:p,performedPointerEventsMutationRef:g,unbindMouseMoveRef:v,restTimeoutPendingRef:x,openChangeTimeout:k,handleCloseOptionsRef:C}=Ej(n),b=Il(c),_=xa(),T=dt(()=>f.current?!0:o.current.openEvent?SJ.has(o.current.openEvent.type):!1),R=dt(()=>{var V;const j=(V=o.current.openEvent)==null?void 0:V.type;return(j==null?void 0:j.includes("mouse"))&&j!=="mousedown"}),L=y.useCallback((j,V=!0)=>{const U=kJ(l,h.current);U&&!p.current?k.start(U,()=>n.setOpen(!1,en(Yi,j))):V&&(k.clear(),n.setOpen(!1,en(Yi,j)))},[l,p,n,h,k]),M=dt(()=>{v.current(),p.current=void 0}),A=dt(()=>{if(g.current){const j=rr(i).body;j.style.pointerEvents="",j.removeAttribute(Jx),g.current=!1}}),$=dt(j=>{const V=si(j);if(!bJ(V)){f.current=!1;return}f.current=!0});kt(()=>{r||(h.current=void 0,x.current=!1,f.current=!1,M(),A())},[r,h,x,f,M,A]),y.useEffect(()=>()=>{M()},[M]),y.useEffect(()=>A,[A]),kt(()=>{var j,V,U;if(a&&r&&(j=C.current)!=null&&j.blockPointerEvents&&R()&&un(s)&&i){g.current=!0;const B=rr(i).body;B.setAttribute(Jx,"");const Z=s,q=i,G=(U=(V=b==null?void 0:b.nodesRef.current.find(te=>te.id===_))==null?void 0:V.context)==null?void 0:U.elements.floating;return G&&(G.style.pointerEvents=""),B.style.pointerEvents="none",Z.style.pointerEvents="auto",q.style.pointerEvents="auto",()=>{B.style.pointerEvents="",Z.style.pointerEvents="",q.style.pointerEvents=""}}},[a,r,s,i,C,R,b,_,g]),y.useEffect(()=>{if(!a)return;function j(Z){if(T()||!o.current.floatingContext)return;const q=n.context.triggerElements;Z.relatedTarget&&q.hasElement(Z.relatedTarget)||(A(),M(),T()||L(Z))}function V(Z){var q;k.clear(),A(),(q=p.current)==null||q.call(p,Z),M()}function U(Z){T()||L(Z,!1)}const B=i;return B&&(B.addEventListener("mouseleave",j),B.addEventListener("mouseenter",V),B.addEventListener("mouseleave",U),B.addEventListener("pointerdown",$,!0)),()=>{B&&(B.removeEventListener("mouseleave",j),B.removeEventListener("mouseenter",V),B.removeEventListener("mouseleave",U),B.removeEventListener("pointerdown",$,!0))}})}function kJ(t,e){return e&&!od(e)?0:typeof t=="function"?t():t}function j1(t){return typeof t=="function"?t():t}const EJ={current:null};function RJ(t,e={}){var te;const n="rootStore"in t?t.rootStore:t,{dataRef:r,events:i}=n.context,{enabled:s=!0,delay:o=0,handleClose:a=null,mouseOnly:l=!1,restMs:c=0,move:h=!0,triggerElementRef:f=EJ,externalTree:p,isActiveTrigger:g=!0}=e,v=Il(p),{pointerTypeRef:x,interactedInsideRef:k,handlerRef:C,blockMouseMoveRef:b,performedPointerEventsMutationRef:_,unbindMouseMoveRef:T,restTimeoutPendingRef:R,openChangeTimeout:L,restTimeout:M,handleCloseOptionsRef:A}=Ej(n),$=Wr(a),j=Wr(o),V=Wr(c);g&&(A.current=(te=$.current)==null?void 0:te.__options);const U=dt(()=>k.current?!0:r.current.openEvent?["click","mousedown"].includes(r.current.openEvent.type):!1),B=y.useCallback((O,K=!0)=>{const Y=R1(j.current,"close",x.current);Y&&!C.current?L.start(Y,()=>n.setOpen(!1,en(Yi,O))):K&&(L.clear(),n.setOpen(!1,en(Yi,O)))},[j,C,n,x,L]),Z=dt(()=>{T.current(),C.current=void 0}),q=dt(()=>{if(_.current){const O=rr(n.select("domReferenceElement")).body;O.style.pointerEvents="",O.removeAttribute(Jx),_.current=!1}});y.useEffect(()=>{if(!s)return;function O(K){K.open||(L.clear(),M.clear(),b.current=!0,R.current=!1)}return i.on("openchange",O),()=>{i.off("openchange",O)}},[s,i,L,M,b,R]);const G=dt(O=>{var Y;if(U()||!r.current.floatingContext)return;const K=n.context.triggerElements;O.relatedTarget&&K.hasElement(O.relatedTarget)||(Y=$.current)==null||Y.call($,{...r.current.floatingContext,tree:v,x:O.clientX,y:O.clientY,onClose(){q(),Z(),U()||B(O)}})(O)});return y.useEffect(()=>{if(!s)return;const O=f.current??(g?n.select("domReferenceElement"):null);if(!un(O))return;function K(re){if(L.clear(),b.current=!1,l&&!od(x.current)||j1(V.current)>0&&!R1(j.current,"open"))return;const ue=R1(j.current,"open",x.current),ke=n.select("domReferenceElement"),qe=n.context.triggerElements,he=(qe.hasElement(re.target)||qe.hasMatchingElement(we=>Dt(we,re.target)))&&(!ke||!Dt(ke,re.target)),ge=re.currentTarget??null;ue?L.start(ue,()=>{n.select("open")||n.setOpen(!0,en(Yi,re,ge))}):(!n.select("open")||he)&&n.setOpen(!0,en(Yi,re,ge))}function Y(re){if(U()){q();return}T.current();const ue=n.select("domReferenceElement"),ke=rr(ue);M.clear(),R.current=!1;const qe=n.context.triggerElements;if(re.relatedTarget&&qe.hasElement(re.relatedTarget))return;if($.current&&r.current.floatingContext){n.select("open")||L.clear(),C.current=$.current({...r.current.floatingContext,tree:v,x:re.clientX,y:re.clientY,onClose(){q(),Z(),U()||B(re,!0)}});const ge=C.current;ge(re),ke.addEventListener("mousemove",ge),T.current=()=>{ke.removeEventListener("mousemove",ge)};return}(x.current==="touch"?!Dt(n.select("floatingElement"),re.relatedTarget):!0)&&B(re)}function xe(re){G(re)}return n.select("open")&&O.addEventListener("mouseleave",xe),h&&O.addEventListener("mousemove",K,{once:!0}),O.addEventListener("mouseenter",K),O.addEventListener("mouseleave",Y),()=>{O.removeEventListener("mouseleave",xe),h&&O.removeEventListener("mousemove",K),O.removeEventListener("mouseenter",K),O.removeEventListener("mouseleave",Y)}},[Z,q,b,r,j,B,n,s,$,G,g,U,l,h,x,V,M,R,L,f,v,T,C]),y.useMemo(()=>{function O(K){x.current=K.pointerType}return{onPointerDown:O,onPointerEnter:O,onMouseMove(K){const{nativeEvent:Y}=K,xe=K.currentTarget,re=n.select("domReferenceElement"),ue=n.context.triggerElements,ke=n.select("open"),qe=(ue.hasElement(K.target)||ue.hasMatchingElement(ge=>Dt(ge,K.target)))&&(!re||!Dt(re,K.target));if(l&&!od(x.current)||ke&&!qe||j1(V.current)===0||!qe&&R.current&&K.movementX**2+K.movementY**2<2)return;M.clear();function he(){!b.current&&(!ke||qe)&&n.setOpen(!0,en(Yi,Y,xe))}x.current==="touch"?oi.flushSync(()=>{he()}):qe&&ke?he():(R.current=!0,M.start(j1(V.current),he))}}},[b,l,n,x,V,M,R])}function Rj(t=[]){const e=t.map(c=>c==null?void 0:c.reference),n=t.map(c=>c==null?void 0:c.floating),r=t.map(c=>c==null?void 0:c.item),i=t.map(c=>c==null?void 0:c.trigger),s=y.useCallback(c=>Bg(c,t,"reference"),e),o=y.useCallback(c=>Bg(c,t,"floating"),n),a=y.useCallback(c=>Bg(c,t,"item"),r),l=y.useCallback(c=>Bg(c,t,"trigger"),i);return y.useMemo(()=>({getReferenceProps:s,getFloatingProps:o,getItemProps:a,getTriggerProps:l}),[s,o,a,l])}function Bg(t,e,n){var o;const r=new Map,i=n==="item",s={};n==="floating"&&(s.tabIndex=-1,s[qx]="");for(const a in t)i&&t&&(a===BN||a===$N)||(s[a]=t[a]);for(let a=0;a<e.length;a+=1){let l;const c=(o=e[a])==null?void 0:o[n];typeof c=="function"?l=t?c(t):null:l=c,l&&qT(s,l,i,r)}return qT(s,t,i,r),s}function qT(t,e,n,r){var i;for(const s in e){const o=e[s];n&&(s===BN||s===$N)||(s.startsWith("on")?(r.has(s)||r.set(s,[]),typeof o=="function"&&((i=r.get(s))==null||i.push(o),t[s]=(...a)=>{var l;return(l=r.get(s))==null?void 0:l.map(c=>c(...a)).find(c=>c!==void 0)})):t[s]=o)}}const TJ="Escape";function av(t,e,n){switch(t){case"vertical":return e;case"horizontal":return n;default:return e||n}}function $g(t,e){return av(e,t===RS||t===op,t===pl||t===gl)}function I1(t,e,n){return av(e,t===op,n?t===pl:t===gl)||t==="Enter"||t===" "||t===""}function PJ(t,e,n){return av(e,n?t===pl:t===gl,t===op)}function LJ(t,e,n,r){const i=n?t===gl:t===pl,s=t===RS;return e==="both"||e==="horizontal"&&r&&r>1?t===TJ:av(e,i,s)}function MJ(t,e){const n="rootStore"in t?t.rootStore:t,r=n.useState("open"),i=n.useState("floatingElement"),s=n.useState("domReferenceElement"),o=n.context.dataRef,{listRef:a,activeIndex:l,onNavigate:c=()=>{},enabled:h=!0,selectedIndex:f=null,allowEscape:p=!1,loopFocus:g=!1,nested:v=!1,rtl:x=!1,virtual:k=!1,focusItemOnOpen:C="auto",focusItemOnHover:b=!0,openOnArrowKeyDown:_=!0,disabledIndices:T=void 0,orientation:R="vertical",parentOrientation:L,cols:M=1,scrollItemIntoView:A=!0,itemSizes:$,dense:j=!1,id:V,resetOnPointerLeave:U=!0,externalTree:B}=e,Z=a0(i),q=Wr(Z),G=xa(),te=Il(B);kt(()=>{o.current.orientation=R},[o,R]);const O=Yx(s),K=y.useRef(C),Y=y.useRef(f??-1),xe=y.useRef(null),re=y.useRef(!0),ue=dt(Ce=>{c(Y.current===-1?null:Y.current,Ce)}),ke=y.useRef(ue),qe=y.useRef(!!i),he=y.useRef(r),ge=y.useRef(!1),we=y.useRef(!1),ae=Wr(T),me=Wr(r),X=Wr(A),ye=Wr(f),_e=Wr(U),at=dt(()=>{function Ce(Fe){k?te==null||te.events.emit("virtualfocus",Fe):dm(Fe,{sync:ge.current,preventScroll:!0})}const Oe=a.current[Y.current],Ne=we.current;Oe&&Ce(Oe),(ge.current?Fe=>Fe():requestAnimationFrame)(()=>{var At;const Fe=a.current[Y.current]||Oe;if(!Fe)return;Oe||Ce(Fe);const st=X.current;st&&fe&&(Ne||!re.current)&&((At=Fe.scrollIntoView)==null||At.call(Fe,typeof st=="boolean"?{block:"nearest",inline:"nearest"}:st))})});kt(()=>{h&&(r&&i?(Y.current=f??-1,K.current&&f!=null&&(we.current=!0,ue())):qe.current&&(Y.current=-1,ke.current()))},[h,r,i,f,ue]),kt(()=>{if(h){if(!r){ge.current=!1;return}if(i)if(l==null){if(ge.current=!1,ye.current!=null)return;if(qe.current&&(Y.current=-1,at()),(!he.current||!qe.current)&&K.current&&(xe.current!=null||K.current===!0&&xe.current==null)){let Ce=0;const Oe=()=>{a.current[0]==null?(Ce<2&&(Ce?requestAnimationFrame:queueMicrotask)(Oe),Ce+=1):(Y.current=xe.current==null||I1(xe.current,R,x)||v?E1(a):LT(a),xe.current=null,ue())};Oe()}}else rf(a,l)||(Y.current=l,at(),we.current=!1)}},[h,r,i,l,ye,v,a,R,x,ue,at,ae]),kt(()=>{var Fe,st;if(!h||i||!te||k||!qe.current)return;const Ce=te.nodesRef.current,Oe=(st=(Fe=Ce.find(wt=>wt.id===G))==null?void 0:Fe.context)==null?void 0:st.elements.floating,Ne=_o(rr(i)),yt=Ce.some(wt=>wt.context&&Dt(wt.context.elements.floating,Ne));Oe&&!yt&&re.current&&Oe.focus({preventScroll:!0})},[h,i,te,G,k]),kt(()=>{ke.current=ue,he.current=r,qe.current=!!i}),kt(()=>{r||(xe.current=null,K.current=C)},[r,C]);const Le=l!=null,fe=y.useMemo(()=>{function Ce(Ne){if(!me.current)return;const yt=a.current.indexOf(Ne.currentTarget);yt!==-1&&Y.current!==yt&&(Y.current=yt,ue(Ne))}return{onFocus(Ne){ge.current=!0,Ce(Ne)},onClick:({currentTarget:Ne})=>Ne.focus({preventScroll:!0}),onMouseMove(Ne){ge.current=!0,we.current=!1,b&&Ce(Ne)},onPointerLeave(Ne){var Fe;if(!me.current||!re.current||Ne.pointerType==="touch")return;ge.current=!0;const yt=Ne.relatedTarget;!b||a.current.includes(yt)||_e.current&&(Y.current=-1,ue(Ne),k||(Fe=q.current)==null||Fe.focus({preventScroll:!0}))}}},[me,q,b,a,ue,_e,k]),ve=y.useCallback(()=>{var Ce,Oe,Ne;return L??((Ne=(Oe=(Ce=te==null?void 0:te.nodesRef.current.find(yt=>yt.id===G))==null?void 0:Ce.context)==null?void 0:Oe.dataRef)==null?void 0:Ne.current.orientation)},[G,te,L]),Ae=dt(Ce=>{if(re.current=!1,ge.current=!0,Ce.which===229||!me.current&&Ce.currentTarget===q.current)return;if(v&&LJ(Ce.key,R,x,M)){$g(Ce.key,ve())||Vr(Ce),n.setOpen(!1,en(cm,Ce.nativeEvent)),Kn(s)&&(k?te==null||te.events.emit("virtualfocus",s):s.focus());return}const Oe=Y.current,Ne=E1(a,T),yt=LT(a,T);if(O||(Ce.key==="Home"&&(Vr(Ce),Y.current=Ne,ue(Ce)),Ce.key==="End"&&(Vr(Ce),Y.current=yt,ue(Ce))),M>1){const Fe=$||Array.from({length:a.current.length},()=>({width:1,height:1})),st=tZ(Fe,M,j),wt=st.findIndex(Re=>Re!=null&&!sf(a,Re,T)),At=st.reduce((Re,Te,pe)=>Te!=null&&!sf(a,Te,T)?pe:Re,-1),Ye=st[eZ({current:st.map(Re=>Re!=null?a.current[Re]:null)},{event:Ce,orientation:R,loopFocus:g,rtl:x,cols:M,disabledIndices:rZ([...(typeof T!="function"?T:null)||a.current.map((Re,Te)=>sf(a,Te,T)?Te:void 0),void 0],st),minIndex:wt,maxIndex:At,prevIndex:nZ(Y.current>yt?Ne:Y.current,Fe,st,M,Ce.key===op?"bl":Ce.key===(x?pl:gl)?"tr":"tl"),stopEvent:!0})];if(Ye!=null&&(Y.current=Ye,ue(Ce)),R==="both")return}if($g(Ce.key,R)){if(Vr(Ce),r&&!k&&_o(Ce.currentTarget.ownerDocument)===Ce.currentTarget){Y.current=I1(Ce.key,R,x)?Ne:yt,ue(Ce);return}I1(Ce.key,R,x)?g?Oe>=yt?p&&Oe!==a.current.length?Y.current=-1:(ge.current=!1,Y.current=Ne):Y.current=ri(a,{startingIndex:Oe,disabledIndices:T}):Y.current=Math.min(yt,ri(a,{startingIndex:Oe,disabledIndices:T})):g?Oe<=Ne?p&&Oe!==-1?Y.current=a.current.length:(ge.current=!1,Y.current=yt):Y.current=ri(a,{startingIndex:Oe,decrement:!0,disabledIndices:T}):Y.current=Math.max(Ne,ri(a,{startingIndex:Oe,decrement:!0,disabledIndices:T})),rf(a,Y.current)&&(Y.current=-1),ue(Ce)}}),De=y.useMemo(()=>k&&r&&Le&&{"aria-activedescendant":`${V}-${l}`},[k,r,Le,V,l]),Ue=y.useMemo(()=>({"aria-orientation":R==="both"?void 0:R,...O?{}:De,onKeyDown(Ce){if(Ce.key==="Tab"&&Ce.shiftKey&&r&&!k){const Oe=si(Ce.nativeEvent);if(Oe&&!Dt(q.current,Oe))return;Vr(Ce),n.setOpen(!1,en(sd,Ce.nativeEvent)),Kn(s)&&s.focus();return}Ae(Ce)},onPointerMove(){re.current=!0}}),[De,Ae,q,R,O,n,r,k,s]),Ie=y.useMemo(()=>{function Ce(Ne){C==="auto"&&UN(Ne.nativeEvent)&&(K.current=!k)}function Oe(Ne){K.current=C,C==="auto"&&VN(Ne.nativeEvent)&&(K.current=!0)}return{onKeyDown(Ne){const yt=n.select("open");re.current=!1;const Fe=Ne.key.startsWith("Arrow"),st=PJ(Ne.key,ve(),x),wt=$g(Ne.key,R),At=(v?st:wt)||Ne.key==="Enter"||Ne.key.trim()==="";if(k&&yt)return Ae(Ne);if(!(!yt&&!_&&Fe)){if(At){const Ye=$g(Ne.key,ve());xe.current=v&&Ye?null:Ne.key}if(v){st&&(Vr(Ne),yt?(Y.current=E1(a,ae.current),ue(Ne)):n.setOpen(!0,en(cm,Ne.nativeEvent,Ne.currentTarget)));return}wt&&(ye.current!=null&&(Y.current=ye.current),Vr(Ne),!yt&&_?n.setOpen(!0,en(cm,Ne.nativeEvent,Ne.currentTarget)):Ae(Ne),yt&&ue(Ne))}},onFocus(Ne){n.select("open")&&!k&&(Y.current=-1,ue(Ne))},onPointerDown:Oe,onPointerEnter:Oe,onMouseDown:Ce,onClick:Ce}},[Ae,ae,C,a,v,ue,n,_,R,ve,x,ye,k]),ze=y.useMemo(()=>({...De,...Ie}),[De,Ie]);return y.useMemo(()=>h?{reference:ze,floating:Ue,item:fe,trigger:Ie}:{},[h,ze,Ue,Ie,fe])}const AJ=new Map([["select","listbox"],["combobox","listbox"],["label",!1]]);function NJ(t,e={}){const n="rootStore"in t?t.rootStore:t,r=n.useState("open"),i=n.useState("floatingId"),s=n.useState("domReferenceElement"),o=n.useState("floatingElement"),{enabled:a=!0,role:l="dialog"}=e,c=Ll(),h=(s==null?void 0:s.id)||c,f=y.useMemo(()=>{var _;return((_=a0(o))==null?void 0:_.id)||i},[o,i]),p=AJ.get(l)??l,v=xa()!=null,x=y.useMemo(()=>p==="tooltip"||l==="label"?Ar:{"aria-haspopup":p==="alertdialog"?"dialog":p,"aria-expanded":"false",...p==="listbox"&&{role:"combobox"},...p==="menu"&&v&&{role:"menuitem"},...l==="select"&&{"aria-autocomplete":"none"},...l==="combobox"&&{"aria-autocomplete":"list"}},[p,v,l]),k=y.useMemo(()=>p==="tooltip"||l==="label"?{[`aria-${l==="label"?"labelledby":"describedby"}`]:r?f:void 0}:{...x,"aria-expanded":r?"true":"false","aria-controls":r?f:void 0,...p==="menu"&&{id:h}},[p,f,r,h,l,x]),C=y.useMemo(()=>{const _={id:f,...p&&{role:p}};return p==="tooltip"||l==="label"?_:{..._,...p==="menu"&&{"aria-labelledby":h}}},[p,f,h,l]),b=y.useCallback(({active:_,selected:T})=>{const R={role:"option",..._&&{id:`${f}-fui-option`}};switch(l){case"select":case"combobox":return{...R,"aria-selected":T}}return{}},[f,l]);return y.useMemo(()=>a?{reference:k,floating:C,item:b,trigger:x}:{},[a,k,C,x,b])}function jJ(t,e){const n="rootStore"in t?t.rootStore:t,r=n.useState("open"),i=n.context.dataRef,{listRef:s,activeIndex:o,onMatch:a,onTypingChange:l,enabled:c=!0,findMatch:h=null,resetMs:f=750,ignoreKeys:p=i0,selectedIndex:g=null}=e,v=wi(),x=y.useRef(""),k=y.useRef(g??o??-1),C=y.useRef(null);kt(()=>{r&&(v.clear(),C.current=null,x.current="")},[r,v]),kt(()=>{r&&x.current===""&&(k.current=g??o??-1)},[r,g,o]);const b=dt(L=>{L?i.current.typing||(i.current.typing=L,l==null||l(L)):i.current.typing&&(i.current.typing=L,l==null||l(L))}),_=dt(L=>{function M(U,B,Z){const q=h?h(B,Z):B.find(G=>(G==null?void 0:G.toLocaleLowerCase().indexOf(Z.toLocaleLowerCase()))===0);return q?U.indexOf(q):-1}const A=s.current;if(x.current.length>0&&x.current[0]!==" "&&(M(A,A,x.current)===-1?b(!1):L.key===" "&&Vr(L)),A==null||p.includes(L.key)||L.key.length!==1||L.ctrlKey||L.metaKey||L.altKey)return;r&&L.key!==" "&&(Vr(L),b(!0)),A.every(U=>{var B,Z;return U?((B=U[0])==null?void 0:B.toLocaleLowerCase())!==((Z=U[1])==null?void 0:Z.toLocaleLowerCase()):!0})&&x.current===L.key&&(x.current="",k.current=C.current),x.current+=L.key,v.start(f,()=>{x.current="",k.current=C.current,b(!1)});const j=k.current,V=M(A,[...A.slice((j||0)+1),...A.slice(0,(j||0)+1)],x.current);V!==-1?(a==null||a(V),C.current=V):L.key!==" "&&(x.current="",b(!1))}),T=y.useMemo(()=>({onKeyDown:_}),[_]),R=y.useMemo(()=>({onKeyDown:_,onKeyUp(L){L.key===" "&&b(!1)}}),[_,b]);return y.useMemo(()=>c?{reference:T,floating:R}:{},[c,T,R])}function YT(t,e){const[n,r]=t;let i=!1;const s=e.length;for(let o=0,a=s-1;o<s;a=o++){const[l,c]=e[o]||[0,0],[h,f]=e[a]||[0,0];c>=r!=f>=r&&n<=(h-l)*(r-c)/(f-c)+l&&(i=!i)}return i}function IJ(t,e){return t[0]>=e.x&&t[0]<=e.x+e.width&&t[1]>=e.y&&t[1]<=e.y+e.height}function OJ(t={}){const{buffer:e=.5,blockPointerEvents:n=!1,requireIntent:r=!0}=t,i=new ku;let s=!1,o=null,a=null,l=typeof performance<"u"?performance.now():0;function c(f,p){const g=performance.now(),v=g-l;if(o===null||a===null||v===0)return o=f,a=p,l=g,null;const x=f-o,k=p-a,b=Math.sqrt(x*x+k*k)/v;return o=f,a=p,l=g,b}const h=({x:f,y:p,placement:g,elements:v,onClose:x,nodeId:k,tree:C})=>function(_){function T(){i.clear(),x()}if(i.clear(),!v.domReference||!v.floating||g==null||f==null||p==null)return;const{clientX:R,clientY:L}=_,M=[R,L],A=si(_),$=_.type==="mouseleave",j=Dt(v.floating,A),V=Dt(v.domReference,A),U=v.domReference.getBoundingClientRect(),B=v.floating.getBoundingClientRect(),Z=g.split("-")[0],q=f>B.right-B.width/2,G=p>B.bottom-B.height/2,te=IJ(M,U),O=B.width>U.width,K=B.height>U.height,Y=(O?U:B).left,xe=(O?U:B).right,re=(K?U:B).top,ue=(K?U:B).bottom;if(j&&(s=!0,!$))return;if(V&&(s=!1),V&&!$){s=!0;return}if($&&un(_.relatedTarget)&&Dt(v.floating,_.relatedTarget)||C&&yu(C.nodesRef.current,k).some(({context:he})=>he==null?void 0:he.open))return;if(Z==="top"&&p>=U.bottom-1||Z==="bottom"&&p<=U.top+1||Z==="left"&&f>=U.right-1||Z==="right"&&f<=U.left+1)return T();let ke=[];switch(Z){case"top":ke=[[Y,U.top+1],[Y,B.bottom-1],[xe,B.bottom-1],[xe,U.top+1]];break;case"bottom":ke=[[Y,B.top+1],[Y,U.bottom-1],[xe,U.bottom-1],[xe,B.top+1]];break;case"left":ke=[[B.right-1,ue],[B.right-1,re],[U.left+1,re],[U.left+1,ue]];break;case"right":ke=[[U.right-1,ue],[U.right-1,re],[B.left+1,re],[B.left+1,ue]];break}function qe([he,ge]){switch(Z){case"top":{const we=[O?he+e/2:q?he+e*4:he-e*4,ge+e+1],ae=[O?he-e/2:q?he+e*4:he-e*4,ge+e+1],me=[[B.left,q||O?B.bottom-e:B.top],[B.right,q?O?B.bottom-e:B.top:B.bottom-e]];return[we,ae,...me]}case"bottom":{const we=[O?he+e/2:q?he+e*4:he-e*4,ge-e],ae=[O?he-e/2:q?he+e*4:he-e*4,ge-e],me=[[B.left,q||O?B.top+e:B.bottom],[B.right,q?O?B.top+e:B.bottom:B.top+e]];return[we,ae,...me]}case"left":{const we=[he+e+1,K?ge+e/2:G?ge+e*4:ge-e*4],ae=[he+e+1,K?ge-e/2:G?ge+e*4:ge-e*4];return[...[[G||K?B.right-e:B.left,B.top],[G?K?B.right-e:B.left:B.right-e,B.bottom]],we,ae]}case"right":{const we=[he-e,K?ge+e/2:G?ge+e*4:ge-e*4],ae=[he-e,K?ge-e/2:G?ge+e*4:ge-e*4],me=[[G||K?B.left+e:B.right,B.top],[G?K?B.left+e:B.right:B.left+e,B.bottom]];return[we,ae,...me]}default:return[]}}if(!YT([R,L],ke)){if(s&&!te)return T();if(!$&&r){const he=c(_.clientX,_.clientY);if(he!==null&&he<.1)return T()}YT([R,L],qe([f,p]))?!s&&r&&i.start(40,T):T()}};return h.__options={blockPointerEvents:n},h}const DJ=y.createContext(void 0);function FJ(t){const e=y.useContext(DJ);if(e===void 0&&!t)throw new Error(Ao(69));return e}const Tj="ArrowUp",Pj="ArrowDown",Lj="ArrowLeft",Mj="ArrowRight",Aj="Home",Nj="End",BJ=new Set([Lj,Mj]),$J=new Set([Tj,Pj]),zJ=new Set([...BJ,...$J]);[...zJ];const UJ=new Set([Tj,Pj,Lj,Mj,Aj,Nj]);function VJ(t){return t==="starting"?qK:Ar}const WJ={...kN,...nX},FS=y.forwardRef(function(e,n){const{render:r,className:i,finalFocus:s,...o}=e,{store:a}=Ml(),{side:l,align:c}=wN(),h=FJ(!0)!=null,f=a.useState("open"),p=a.useState("transitionStatus"),g=a.useState("popupProps"),v=a.useState("mounted"),x=a.useState("instantType"),k=a.useState("activeTriggerElement"),C=a.useState("parent"),b=a.useState("lastOpenChangeReason"),_=a.useState("rootId"),T=a.useState("floatingRootContext"),R=a.useState("floatingTreeRoot"),L=a.useState("closeDelay"),M=a.useState("activeTriggerElement");jN({open:f,ref:a.context.popupRef,onComplete(){var B,Z;f&&((Z=(B=a.context).onOpenChangeComplete)==null||Z.call(B,!0))}}),y.useEffect(()=>{function B(Z){a.setOpen(!1,en(Z.reason,Z.domEvent))}return R.events.on("close",B),()=>{R.events.off("close",B)}},[R.events,a]);const A=a.useState("hoverEnabled"),$=a.useState("disabled");CJ(T,{enabled:A&&!$&&C.type!=="context-menu"&&C.type!=="menubar",closeDelay:L});const j=y.useMemo(()=>({transitionStatus:p,side:l,align:c,open:f,nested:C.type==="menu",instant:x}),[p,l,c,f,C.type,x]),V=Al("div",e,{state:j,ref:[n,a.context.popupRef],stateAttributesMapping:WJ,props:[g,{onKeyDown(B){h&&UJ.has(B.key)&&B.stopPropagation()}},VJ(p),o,{"data-rootownerid":_}]});let U=C.type===void 0||C.type==="context-menu";return(k||C.type==="menubar"&&b!==bS)&&(U=!0),w.jsx(jZ,{context:T,modal:!1,disabled:!v,returnFocus:s===void 0?U:s,initialFocus:C.type!=="menu",restoreFocus:!0,externalTree:C.type!=="menubar"?R:void 0,previousFocusableElement:M,nextFocusableElement:C.type===void 0?a.context.triggerFocusTargetRef:void 0,beforeContentFocusGuardRef:C.type===void 0?a.context.beforeContentFocusGuardRef:void 0,children:V})}),jj=y.createContext(void 0);function HJ(){const t=y.useContext(jj);if(t===void 0)throw new Error(Ao(32));return t}const BS=y.forwardRef(function(e,n){const{keepMounted:r=!1,...i}=e,{store:s}=Ml();return s.useState("mounted")||r?w.jsx(jj.Provider,{value:r,children:w.jsx(PZ,{ref:n,...i})}):null});function GJ(t){return xS(19)?t:t?"true":void 0}const qJ=y.createContext(void 0);function Ij(){const t=y.useContext(qJ);return(t==null?void 0:t.direction)??"ltr"}const YJ=t=>({name:"arrow",options:t,async fn(e){var K,Y;const{x:n,y:r,placement:i,rects:s,platform:o,elements:a,middlewareData:l}=e,{element:c,padding:h=0,offsetParent:f="real"}=fa(t,e)||{};if(c==null)return{};const p=HN(h),g={x:n,y:r},v=MS(i),x=LS(v),k=await o.getDimensions(c),C=v==="y",b=C?"top":"left",_=C?"bottom":"right",T=C?"clientHeight":"clientWidth",R=s.reference[x]+s.reference[v]-g[v]-s.floating[x],L=g[v]-s.reference[v],M=f==="real"?await((K=o.getOffsetParent)==null?void 0:K.call(o,c)):a.floating;let A=a.floating[T]||s.floating[x];(!A||!await((Y=o.isElement)==null?void 0:Y.call(o,M)))&&(A=a.floating[T]||s.floating[x]);const $=R/2-L/2,j=A/2-k[x]/2-1,V=Math.min(p[b],j),U=Math.min(p[_],j),B=V,Z=A-k[x]-U,q=A/2-k[x]/2+$,G=Kx(B,q,Z),te=!l.arrow&&jl(i)!=null&&q!==G&&s.reference[x]/2-(q<B?V:U)-k[x]/2<0,O=te?q<B?q-B:q-Z:0;return{[v]:g[v]+O,data:{[v]:G,centerOffset:q-G-O,...te&&{alignmentOffset:O}},reset:te}}}),KJ=(t,e)=>({...YJ(t),options:[t,e]}),XJ={name:"hide",async fn(t){var a;const{width:e,height:n,x:r,y:i}=t.rects.reference,s=e===0&&n===0&&r===0&&i===0;return{data:{referenceHidden:((a=(await _Q().fn(t)).data)==null?void 0:a.referenceHidden)||s}}}},ZJ={sideX:"left",sideY:"top"};function Oj(t,e,n){const r=t==="inline-start"||t==="inline-end";return{top:"top",right:r?n?"inline-start":"inline-end":"right",bottom:"bottom",left:r?n?"inline-end":"inline-start":"left"}[e]}function KT(t,e,n){const{rects:r,placement:i}=t;return{side:Oj(e,Qi(i),n),align:jl(i)||"center",anchor:{width:r.reference.width,height:r.reference.height},positioner:{width:r.floating.width,height:r.floating.height}}}function QJ(t){var nt,lt;const{anchor:e,positionMethod:n="absolute",side:r="bottom",sideOffset:i=0,align:s="center",alignOffset:o=0,collisionBoundary:a,collisionPadding:l=5,sticky:c=!1,arrowPadding:h=5,disableAnchorTracking:f=!1,keepMounted:p=!1,floatingRootContext:g,mounted:v,collisionAvoidance:x,shiftCrossAxis:k=!1,nodeId:C,adaptiveOrigin:b,lazyFlip:_=!1,externalTree:T}=t,[R,L]=y.useState(null);!v&&R!==null&&L(null);const M=x.side||"flip",A=x.align||"flip",$=x.fallbackAxisSide||"end",j=typeof e=="function"?e:void 0,V=dt(j),U=j?V:e,B=Wr(e),q=Ij()==="rtl",G=R||{top:"top",right:"right",bottom:"bottom",left:"left","inline-end":q?"left":"right","inline-start":q?"right":"left"}[r],te=s==="center"?G:`${G}-${s}`;let O=l;const K=1,Y=r==="bottom"?K:0,xe=r==="top"?K:0,re=r==="right"?K:0,ue=r==="left"?K:0;typeof O=="number"?O={top:O+Y,right:O+ue,bottom:O+xe,left:O+re}:O&&(O={top:(O.top||0)+Y,right:(O.right||0)+ue,bottom:(O.bottom||0)+xe,left:(O.left||0)+re});const ke={boundary:a==="clipping-ancestors"?"clippingAncestors":a,padding:O},qe=y.useRef(null),he=Wr(i),ge=Wr(o),me=[mQ(Ke=>{const xt=KT(Ke,r,q),Lt=typeof he.current=="function"?he.current(xt):he.current,rt=typeof ge.current=="function"?ge.current(xt):ge.current;return{mainAxis:Lt,crossAxis:rt,alignmentAxis:rt}},[typeof i!="function"?i:0,typeof o!="function"?o:0,q,r])],X=A==="none"&&M!=="shift",ye=!X&&(c||k||M==="shift"),_e=M==="none"?null:wQ({...ke,padding:{top:O.top+K,right:O.right+K,bottom:O.bottom+K,left:O.left+K},mainAxis:!k&&M==="flip",crossAxis:A==="flip"?"alignment":!1,fallbackAxisSideDirection:$}),at=X?null:vQ(Ke=>{const xt=Lo(Ke.elements.floating).documentElement;return{...ke,rootBoundary:k?{x:0,y:0,width:xt.clientWidth,height:xt.clientHeight}:void 0,mainAxis:A!=="none",crossAxis:ye,limiter:c||k?void 0:yQ(Lt=>{if(!qe.current)return{};const{width:rt,height:Nt}=qe.current.getBoundingClientRect(),ht=Cs(Qi(Lt.placement)),zt=ht==="y"?rt:Nt,Et=ht==="y"?O.left+O.right:O.top+O.bottom;return{offset:zt/2+Et/2}})}},[ke,c,k,O,A]);M==="shift"||A==="shift"||s==="center"?me.push(at,_e):me.push(_e,at),me.push(xQ({...ke,apply({elements:{floating:Ke},rects:{reference:xt},availableWidth:Lt,availableHeight:rt}){Object.entries({"--available-width":`${Lt}px`,"--available-height":`${rt}px`,"--anchor-width":`${xt.width}px`,"--anchor-height":`${xt.height}px`}).forEach(([Nt,ht])=>{Ke.style.setProperty(Nt,ht)})}}),KJ(()=>({element:qe.current||document.createElement("div"),padding:h,offsetParent:"floating"}),[h]),{name:"transformOrigin",fn(Ke){var Un,qr,kr;const{elements:xt,middlewareData:Lt,placement:rt,rects:Nt,y:ht}=Ke,zt=Qi(rt),Et=Cs(zt),ut=qe.current,Xt=((Un=Lt.arrow)==null?void 0:Un.x)||0,ft=((qr=Lt.arrow)==null?void 0:qr.y)||0,Ft=(ut==null?void 0:ut.clientWidth)||0,St=(ut==null?void 0:ut.clientHeight)||0,ln=Xt+Ft/2,Gt=ft+St/2,qt=Math.abs(((kr=Lt.shift)==null?void 0:kr.y)||0),mt=Nt.reference.height/2,vt=typeof i=="function"?i(KT(Ke,r,q)):i,Ut=qt>vt,Cr={top:`${ln}px calc(100% + ${vt}px)`,bottom:`${ln}px ${-vt}px`,left:`calc(100% + ${vt}px) ${Gt}px`,right:`${-vt}px ${Gt}px`}[zt],zn=`${ln}px ${Nt.reference.y+mt-ht}px`;return xt.floating.style.setProperty("--transform-origin",ye&&Et==="y"&&Ut?zn:Cr),{}}},XJ,b),kt(()=>{!v&&g&&g.update({referenceElement:null,floatingElement:null,domReferenceElement:null})},[v,g]);const Le=y.useMemo(()=>({elementResize:!f&&typeof ResizeObserver<"u",layoutShift:!f&&typeof IntersectionObserver<"u"}),[f]),{refs:fe,elements:ve,x:Ae,y:De,middlewareData:Ue,update:Ie,placement:ze,context:Ce,isPositioned:Oe,floatingStyles:Ne}=yJ({rootContext:g,placement:te,middleware:me,strategy:n,whileElementsMounted:p?void 0:(...Ke)=>VT(...Ke,Le),nodeId:C,externalTree:T}),{sideX:yt,sideY:Fe}=Ue.adaptiveOrigin||ZJ,st=Oe?n:"fixed",wt=y.useMemo(()=>b?{position:st,[yt]:Ae,[Fe]:De}:{position:st,...Ne},[b,st,yt,Ae,Fe,De,Ne]),At=y.useRef(null);kt(()=>{if(!v)return;const Ke=B.current,xt=typeof Ke=="function"?Ke():Ke,rt=(XT(xt)?xt.current:xt)||null||null;rt!==At.current&&(fe.setPositionReference(rt),At.current=rt)},[v,fe,U,B]),y.useEffect(()=>{if(!v)return;const Ke=B.current;typeof Ke!="function"&&XT(Ke)&&Ke.current!==At.current&&(fe.setPositionReference(Ke.current),At.current=Ke.current)},[v,fe,U,B]),y.useEffect(()=>{if(p&&v&&ve.domReference&&ve.floating)return VT(ve.domReference,ve.floating,Ie,Le)},[p,v,ve,Ie,Le]);const Ye=Qi(ze),Re=Oj(r,Ye,q),Te=jl(ze)||"center",pe=!!((nt=Ue.hide)!=null&&nt.referenceHidden);kt(()=>{_&&v&&Oe&&L(Ye)},[_,v,Oe,Ye]);const be=y.useMemo(()=>{var Ke,xt;return{position:"absolute",top:(Ke=Ue.arrow)==null?void 0:Ke.y,left:(xt=Ue.arrow)==null?void 0:xt.x}},[Ue.arrow]),gt=((lt=Ue.arrow)==null?void 0:lt.centerOffset)!==0;return y.useMemo(()=>({positionerStyles:wt,arrowStyles:be,arrowRef:qe,arrowUncentered:gt,side:Re,align:Te,physicalSide:Ye,anchorHidden:pe,refs:fe,context:Ce,isPositioned:Oe,update:Ie}),[wt,be,qe,gt,Re,Te,Ye,pe,fe,Ce,Oe,Ie])}function XT(t){return t!=null&&"current"in t}function JJ(t){const{children:e,elementsRef:n,labelsRef:r,onMapChange:i}=t,s=dt(i),o=y.useRef(0),a=Ls(tee).current,l=Ls(eee).current,[c,h]=y.useState(0),f=y.useRef(c),p=dt((C,b)=>{l.set(C,b??null),f.current+=1,h(f.current)}),g=dt(C=>{l.delete(C),f.current+=1,h(f.current)}),v=y.useMemo(()=>{const C=new Map;return Array.from(l.keys()).filter(_=>_.isConnected).sort(nee).forEach((_,T)=>{const R=l.get(_)??{};C.set(_,{...R,index:T})}),C},[l,c]);kt(()=>{if(typeof MutationObserver!="function"||v.size===0)return;const C=new MutationObserver(b=>{const _=new Set,T=R=>_.has(R)?_.delete(R):_.add(R);b.forEach(R=>{R.removedNodes.forEach(T),R.addedNodes.forEach(T)}),_.size===0&&(f.current+=1,h(f.current))});return v.forEach((b,_)=>{_.parentElement&&C.observe(_.parentElement,{childList:!0})}),()=>{C.disconnect()}},[v]),kt(()=>{f.current===c&&(n.current.length!==v.size&&(n.current.length=v.size),r&&r.current.length!==v.size&&(r.current.length=v.size),o.current=v.size),s(v)},[s,v,n,r,c]),kt(()=>()=>{n.current=[]},[n]),kt(()=>()=>{r&&(r.current=[])},[r]);const x=dt(C=>(a.add(C),()=>{a.delete(C)}));kt(()=>{a.forEach(C=>C(v))},[a,v]);const k=y.useMemo(()=>({register:p,unregister:g,subscribeMapChange:x,elementsRef:n,labelsRef:r,nextIndexRef:o}),[p,g,x,n,r,o]);return w.jsx(LN.Provider,{value:k,children:e})}function eee(){return new Map}function tee(){return new Set}function nee(t,e){const n=t.compareDocumentPosition(e);return n&Node.DOCUMENT_POSITION_FOLLOWING||n&Node.DOCUMENT_POSITION_CONTAINED_BY?-1:n&Node.DOCUMENT_POSITION_PRECEDING||n&Node.DOCUMENT_POSITION_CONTAINS?1:0}const ree=y.forwardRef(function(e,n){const{cutout:r,...i}=e;let s;if(r){const o=r==null?void 0:r.getBoundingClientRect();s=`polygon(
      0% 0%,
      100% 0%,
      100% 100%,
      0% 100%,
      0% 0%,
      ${o.left}px ${o.top}px,
      ${o.left}px ${o.bottom}px,
      ${o.right}px ${o.bottom}px,
      ${o.right}px ${o.top}px,
      ${o.left}px ${o.top}px
    )`}return w.jsx("div",{ref:n,role:"presentation","data-base-ui-inert":"",...i,style:{position:"fixed",inset:0,userSelect:"none",WebkitUserSelect:"none",clipPath:s}})}),$S=y.forwardRef(function(e,n){var ae;const{anchor:r,positionMethod:i="absolute",className:s,render:o,side:a,align:l,sideOffset:c=0,alignOffset:h=0,collisionBoundary:f="clipping-ancestors",collisionPadding:p=5,arrowPadding:g=5,sticky:v=!1,disableAnchorTracking:x=!1,collisionAvoidance:k=KK,...C}=e,{store:b}=Ml(),_=HJ(),T=sp(!0),R=b.useState("parent"),L=b.useState("floatingRootContext"),M=b.useState("floatingTreeRoot"),A=b.useState("mounted"),$=b.useState("open"),j=b.useState("modal"),V=b.useState("activeTriggerElement"),U=b.useState("lastOpenChangeReason"),B=b.useState("floatingNodeId"),Z=b.useState("floatingParentNodeId");let q=r,G=c,te=h,O=l;R.type==="context-menu"&&(q=r??((ae=R.context)==null?void 0:ae.anchor),O=O??"start",!a&&O!=="center"&&(te=e.alignOffset??2,G=e.sideOffset??-5));let K=a,Y=O;R.type==="menu"?(K=K??"inline-end",Y=Y??"start"):R.type==="menubar"&&(K=K??"bottom",Y=Y??"start");const xe=R.type==="context-menu",re=QJ({anchor:q,floatingRootContext:L,positionMethod:T?"fixed":i,mounted:A,side:K,sideOffset:G,align:Y,alignOffset:te,arrowPadding:xe?0:g,collisionBoundary:f,collisionPadding:p,sticky:v,nodeId:B,keepMounted:_,disableAnchorTracking:x,collisionAvoidance:k,shiftCrossAxis:xe,externalTree:M}),ue=y.useMemo(()=>{const me={};return $||(me.pointerEvents="none"),{role:"presentation",hidden:!A,style:{...re.positionerStyles,...me}}},[$,A,re.positionerStyles]);y.useEffect(()=>{function me(X){X.open?(X.parentNodeId===B&&b.set("hoverEnabled",!1),X.nodeId!==B&&X.parentNodeId===b.select("floatingParentNodeId")&&b.setOpen(!1,en(Lh))):X.parentNodeId===B&&X.reason!==Lh&&b.set("hoverEnabled",!0)}return M.events.on("menuopenchange",me),()=>{M.events.off("menuopenchange",me)}},[b,M.events,B]),y.useEffect(()=>{if(b.select("floatingParentNodeId")==null)return;function me(X){if(X.open||X.nodeId!==b.select("floatingParentNodeId"))return;const ye=X.reason??Lh;b.setOpen(!1,en(ye))}return M.events.on("menuopenchange",me),()=>{M.events.off("menuopenchange",me)}},[M.events,b]),y.useEffect(()=>{function me(X){!$||X.nodeId!==b.select("floatingParentNodeId")||X.target&&V&&V!==X.target&&b.setOpen(!1,en(Lh))}return M.events.on("itemhover",me),()=>{M.events.off("itemhover",me)}},[M.events,$,V,b]),y.useEffect(()=>{const me={open:$,nodeId:B,parentNodeId:Z,reason:b.select("lastOpenChangeReason")};M.events.emit("menuopenchange",me)},[M.events,$,b,B,Z]);const ke=y.useMemo(()=>({open:$,side:re.side,align:re.align,anchorHidden:re.anchorHidden,nested:R.type==="menu"}),[$,re.side,re.align,re.anchorHidden,R.type]),qe=y.useMemo(()=>({side:re.side,align:re.align,arrowRef:re.arrowRef,arrowUncentered:re.arrowUncentered,arrowStyles:re.arrowStyles,nodeId:re.context.nodeId}),[re.side,re.align,re.arrowRef,re.arrowUncentered,re.arrowStyles,re.context.nodeId]),he=Al("div",e,{state:ke,stateAttributesMapping:kN,ref:[n,b.useStateSetter("positionerElement")],props:[ue,C]}),ge=A&&R.type!=="menu"&&(R.type!=="menubar"&&j&&U!==Yi||R.type==="menubar"&&R.context.modal);let we=null;return R.type==="menubar"?we=R.context.contentElement:R.type===void 0&&(we=V),w.jsxs(yN.Provider,{value:qe,children:[ge&&w.jsx(ree,{ref:R.type==="context-menu"||R.type==="nested-context-menu"?R.context.internalBackdropRef:null,inert:GJ(!$),cutout:we}),w.jsx(bZ,{id:B,children:w.jsx(JJ,{elementsRef:b.context.itemDomElements,labelsRef:b.context.itemLabels,children:he})})]})});let ZT={},QT={},JT="";function iee(t){if(typeof document>"u")return!1;const e=Lo(t);return jr(e).innerWidth-e.documentElement.clientWidth>0}function see(t){const e=Lo(t),n=e.documentElement,r=e.body,i=Iu(n)?n:r,s=i.style.overflow;return i.style.overflow="hidden",()=>{i.style.overflow=s}}function oee(t){var p,g;const e=Lo(t),n=e.documentElement,r=e.body,i=jr(n);let s=0,o=0;const a=wo.create(),l=typeof CSS<"u"&&((p=CSS.supports)==null?void 0:p.call(CSS,"scrollbar-gutter","stable"));if(jX&&(((g=i.visualViewport)==null?void 0:g.scale)??1)!==1)return()=>{};function c(){const v=i.getComputedStyle(n),x=i.getComputedStyle(r),b=(v.scrollbarGutter||"").includes("both-edges")?"stable both-edges":"stable";s=n.scrollTop,o=n.scrollLeft,ZT={scrollbarGutter:n.style.scrollbarGutter,overflowY:n.style.overflowY,overflowX:n.style.overflowX},JT=n.style.scrollBehavior,QT={position:r.style.position,height:r.style.height,width:r.style.width,boxSizing:r.style.boxSizing,overflowY:r.style.overflowY,overflowX:r.style.overflowX,scrollBehavior:r.style.scrollBehavior};const _=n.scrollHeight>n.clientHeight,T=n.scrollWidth>n.clientWidth,R=v.overflowY==="scroll"||x.overflowY==="scroll",L=v.overflowX==="scroll"||x.overflowX==="scroll",M=Math.max(0,i.innerWidth-n.clientWidth),A=Math.max(0,i.innerHeight-n.clientHeight),$=parseFloat(x.marginTop)+parseFloat(x.marginBottom),j=parseFloat(x.marginLeft)+parseFloat(x.marginRight),V=Iu(n)?n:r;if(l){n.style.scrollbarGutter=b,V.style.overflowY="hidden",V.style.overflowX="hidden";return}Object.assign(n.style,{scrollbarGutter:b,overflowY:"hidden",overflowX:"hidden"}),(_||R)&&(n.style.overflowY="scroll"),(T||L)&&(n.style.overflowX="scroll"),Object.assign(r.style,{position:"relative",height:$||A?`calc(100dvh - ${$+A}px)`:"100dvh",width:j||M?`calc(100vw - ${j+M}px)`:"100vw",boxSizing:"border-box",overflow:"hidden",scrollBehavior:"unset"}),r.scrollTop=s,r.scrollLeft=o,n.setAttribute("data-base-ui-scroll-locked",""),n.style.scrollBehavior="unset"}function h(){Object.assign(n.style,ZT),Object.assign(r.style,QT),l||(n.scrollTop=s,n.scrollLeft=o,n.removeAttribute("data-base-ui-scroll-locked"),n.style.scrollBehavior=JT)}function f(){h(),a.request(c)}return c(),i.addEventListener("resize",f),()=>{a.cancel(),h(),typeof i.removeEventListener=="function"&&i.removeEventListener("resize",f)}}class aee{constructor(){_t(this,"lockCount",0);_t(this,"restore",null);_t(this,"timeoutLock",ku.create());_t(this,"timeoutUnlock",ku.create());_t(this,"release",()=>{this.lockCount-=1,this.lockCount===0&&this.restore&&this.timeoutUnlock.start(0,this.unlock)});_t(this,"unlock",()=>{var e;this.lockCount===0&&this.restore&&((e=this.restore)==null||e.call(this),this.restore=null)})}acquire(e){return this.lockCount+=1,this.lockCount===1&&this.restore===null&&this.timeoutLock.start(0,()=>this.lock(e)),this.release}lock(e){if(this.lockCount===0||this.restore!==null)return;const r=Lo(e).documentElement,i=jr(r).getComputedStyle(r).overflowY;if(i==="hidden"||i==="clip"){this.restore=CN;return}const s=IX||!iee(e);this.restore=s?see(e):oee(e)}}const lee=new aee;function uee(t=!0,e=null){kt(()=>{if(t)return lee.acquire(e)},[t,e])}const cee=y.createContext(null);function Dj(t){const e=y.useContext(cee);if(e===null&&!t)throw new Error(Ao(5));return e}function dee(t){const e=y.useRef(""),n=y.useCallback(i=>{i.defaultPrevented||(e.current=i.pointerType,t(i,i.pointerType))},[t]);return{onClick:y.useCallback(i=>{if(i.detail===0){t(i,"keyboard");return}"pointerType"in i&&t(i,i.pointerType),t(i,e.current),e.current=""},[t]),onPointerDown:n}}function hee(t){const[e,n]=y.useState(null),r=dt((a,l)=>{t||n(l)}),i=y.useCallback(()=>{n(null)},[]),{onClick:s,onPointerDown:o}=dee(r);return y.useMemo(()=>({openMethod:e,reset:i,triggerProps:{onClick:s,onPointerDown:o}}),[e,i,s,o])}const fee={...mJ,disabled:Ot(t=>t.parent.type==="menubar"&&t.parent.context.disabled||t.disabled),modal:Ot(t=>(t.parent.type===void 0||t.parent.type==="context-menu")&&(t.modal??!0)),allowMouseEnter:Ot(t=>t.parent.type==="menu"?t.parent.store.select("allowMouseEnter"):t.allowMouseEnter),stickIfOpen:Ot(t=>t.stickIfOpen),parent:Ot(t=>t.parent),rootId:Ot(t=>t.parent.type==="menu"?t.parent.store.select("rootId"):t.parent.type!==void 0?t.parent.context.rootId:t.rootId),activeIndex:Ot(t=>t.activeIndex),isActive:Ot((t,e)=>t.activeIndex===e),hoverEnabled:Ot(t=>t.hoverEnabled),instantType:Ot(t=>t.instantType),lastOpenChangeReason:Ot(t=>t.openChangeReason),floatingTreeRoot:Ot(t=>t.parent.type==="menu"?t.parent.store.select("floatingTreeRoot"):t.floatingTreeRoot),floatingNodeId:Ot(t=>t.floatingNodeId),floatingParentNodeId:Ot(t=>t.floatingParentNodeId),itemProps:Ot(t=>t.itemProps),closeDelay:Ot(t=>t.closeDelay),keyboardEventRelay:Ot(t=>{if(t.keyboardEventRelay)return t.keyboardEventRelay;if(t.parent.type==="menu")return t.parent.store.select("keyboardEventRelay")})};class zS extends kj{constructor(n){super({...pee(),...n},{positionerRef:y.createRef(),popupRef:y.createRef(),typingRef:{current:!1},itemDomElements:{current:[]},itemLabels:{current:[]},allowMouseUpTriggerRef:{current:!1},triggerFocusTargetRef:y.createRef(),beforeContentFocusGuardRef:y.createRef(),onOpenChangeComplete:void 0,triggerElements:new DS},fee);_t(this,"unsubscribeParentListener",null);this.observe(Ot(r=>r.allowMouseEnter),(r,i)=>{this.state.parent.type==="menu"&&r!==i&&this.state.parent.store.set("allowMouseEnter",r)}),this.unsubscribeParentListener=this.observe("parent",r=>{var i;if((i=this.unsubscribeParentListener)==null||i.call(this),r.type==="menu"){this.unsubscribeParentListener=r.store.subscribe(()=>{this.notifyAll()}),this.context.allowMouseUpTriggerRef=r.store.context.allowMouseUpTriggerRef;return}r.type!==void 0&&(this.context.allowMouseUpTriggerRef=r.context.allowMouseUpTriggerRef),this.unsubscribeParentListener=null})}setOpen(n,r){this.state.floatingRootContext.context.events.emit("setOpen",{open:n,eventDetails:r})}static useStore(n,r){return Ls(()=>n??new zS(r)).current}}function pee(){return{...gJ(),disabled:!1,modal:!0,allowMouseEnter:!0,stickIfOpen:!0,parent:{type:void 0},rootId:void 0,activeIndex:null,hoverEnabled:!0,instantType:void 0,openChangeReason:null,floatingTreeRoot:new NS,floatingNodeId:void 0,floatingParentNodeId:null,itemProps:Ar,keyboardEventRelay:void 0,closeDelay:0}}const gee=y.createContext(void 0);function mee(){return y.useContext(gee)}function Fj(t){const{children:e,open:n,onOpenChange:r,onOpenChangeComplete:i,defaultOpen:s=!1,disabled:o=!1,modal:a,loopFocus:l=!0,orientation:c="vertical",actionsRef:h,closeParentOnEsc:f=!0,handle:p,triggerId:g,defaultTriggerId:v=null,highlightItemOnHover:x=!0}=t,k=sp(!0),C=Ml(!0),b=Dj(!0),_=mee(),T=y.useMemo(()=>_&&C?{type:"menu",store:C.store}:b?{type:"menubar",context:b}:k&&!C?{type:"context-menu",context:k}:{type:void 0},[k,C,b,_]),R=zS.useStore(p==null?void 0:p.store,{parent:T}),L=R.useState("floatingTreeRoot"),M=sj(L),A=xa();kt(()=>{k&&!C?R.update({parent:{type:"context-menu",context:k},floatingNodeId:M,floatingParentNodeId:A}):C&&R.update({floatingNodeId:M,floatingParentNodeId:A})},[k,C,M,A,R]),R.useControlledProp("open",n,s),R.useControlledProp("activeTriggerId",g,v),R.useContextCallback("onOpenChangeComplete",i);const $=R.useState("open"),j=R.useState("activeTriggerElement"),V=R.useState("positionerElement"),U=R.useState("hoverEnabled"),B=R.useState("modal"),Z=R.useState("disabled"),q=R.useState("lastOpenChangeReason"),G=R.useState("parent"),te=R.useState("activeIndex"),O=R.useState("payload"),K=R.useState("floatingParentNodeId"),Y=y.useRef(null),xe=K!=null;let re;R.useSyncedValues({disabled:o,modal:G.type===void 0?a:void 0,rootId:Ll()});const{openMethod:ue,triggerProps:ke,reset:qe}=hee($);hJ(R);const{forceUnmount:he}=fJ($,R,()=>{R.update({allowMouseEnter:!1,stickIfOpen:!0}),qe()}),ge=y.useRef(G.type!=="context-menu"),we=wi();y.useEffect(()=>{if($||(Y.current=null),G.type==="context-menu"){if(!$){we.clear(),ge.current=!1;return}we.start(500,()=>{ge.current=!0})}},[we,$,G.type]),uee($&&B&&q!==Yi&&ue!=="touch",V),kt(()=>{!$&&!U&&R.set("hoverEnabled",!0)},[$,U,R]);const ae=y.useRef(!0),me=wi(),X=dt((pe,be)=>{const gt=be.reason;if($===pe&&be.trigger===j||(be.preventUnmountOnClose=()=>{R.set("preventUnmountingOnClose",!0)},!pe&&be.trigger==null&&(be.trigger=j??void 0),r==null||r(pe,be),be.isCanceled))return;const nt={open:pe,nativeEvent:be.event,reason:be.reason,nested:xe};re==null||re.emit("openchange",nt);const lt=be.event;if(pe===!1&&(lt==null?void 0:lt.type)==="click"&&lt.pointerType==="touch"&&!ae.current)return;if(!pe&&te!==null){const rt=R.context.itemDomElements.current[te];queueMicrotask(()=>{rt==null||rt.setAttribute("tabindex","-1")})}pe&&gt===o0?(ae.current=!1,me.start(300,()=>{ae.current=!0})):(ae.current=!0,me.clear());const Ke=(gt===hl||gt===EN)&&lt.detail===0&&(lt==null?void 0:lt.isTrusted),xt=!pe&&(gt===SS||gt==null);function Lt(){var ht;const rt={open:pe,openChangeReason:gt};Y.current=be.event??null;const Nt=((ht=be.trigger)==null?void 0:ht.id)??null;(Nt||pe)&&(rt.activeTriggerId=Nt,rt.activeTriggerElement=be.trigger??null),R.update(rt)}gt===Yi?oi.flushSync(Lt):Lt(),G.type==="menubar"&&(gt===o0||gt===sd||gt===Yi||gt===cm||gt===Lh)?R.set("instantType","group"):Ke||xt?R.set("instantType",Ke?"click":"dismiss"):R.set("instantType",void 0)}),ye=y.useCallback(pe=>{const be=en(pe);return be.preventUnmountOnClose=()=>{R.set("preventUnmountingOnClose",!0)},be},[R]),_e=y.useCallback(()=>{R.setOpen(!1,ye(lX))},[R,ye]);y.useImperativeHandle(h,()=>({unmount:he,close:_e}),[he,_e]);let at;G.type==="context-menu"&&(at=G.context),y.useImperativeHandle(at==null?void 0:at.positionerRef,()=>V,[V]),y.useImperativeHandle(at==null?void 0:at.actionsRef,()=>({setOpen:X}),[X]);const Le=wJ({popupStore:R,onOpenChange:X});re=Le.context.events,y.useEffect(()=>{const pe=({open:be,eventDetails:gt})=>X(be,gt);return re.on("setOpen",pe),()=>{re==null||re.off("setOpen",pe)}},[re,X]);const fe=CQ(Le,{enabled:!Z,bubbles:f&&G.type==="menu",outsidePress(){var pe;return G.type!=="context-menu"||((pe=Y.current)==null?void 0:pe.type)==="contextmenu"?!0:ge.current},externalTree:xe?L:void 0}),ve=NJ(Le,{role:"menu"}),Ae=Ij(),De=y.useCallback(pe=>{R.select("activeIndex")!==pe&&R.set("activeIndex",pe)},[R]),Ue=MJ(Le,{enabled:!Z,listRef:R.context.itemDomElements,activeIndex:te,nested:G.type!==void 0,loopFocus:l,orientation:c,parentOrientation:G.type==="menubar"?G.context.orientation:void 0,rtl:Ae==="rtl",disabledIndices:i0,onNavigate:De,openOnArrowKeyDown:G.type!=="context-menu",externalTree:xe?L:void 0,focusItemOnHover:x}),Ie=y.useCallback(pe=>{R.context.typingRef.current=pe},[R]),ze=jJ(Le,{listRef:R.context.itemLabels,activeIndex:te,resetMs:HK,onMatch:pe=>{$&&pe!==te&&R.set("activeIndex",pe)},onTypingChange:Ie}),{getReferenceProps:Ce,getFloatingProps:Oe,getItemProps:Ne,getTriggerProps:yt}=Rj([fe,ve,Ue,ze]),Fe=y.useMemo(()=>{const pe=J0(Ce(),{onMouseEnter(){R.set("hoverEnabled",!0)},onMouseMove(){R.set("allowMouseEnter",!0)}},ke);return delete pe.role,pe},[Ce,R,ke]),st=y.useMemo(()=>{const pe=yt();if(!pe)return pe;const{role:be,["aria-controls"]:gt,...nt}=pe;return nt},[yt]),wt=iv(),At=y.useMemo(()=>Oe({onMouseEnter(){G.type==="menu"&&wt.request(()=>R.set("hoverEnabled",!1))},onMouseMove(){R.set("allowMouseEnter",!0)},onClick(){R.select("hoverEnabled")&&R.set("hoverEnabled",!1)},onKeyDown(pe){const be=R.select("keyboardEventRelay");be&&!pe.isPropagationStopped()&&be(pe)}}),[Oe,G.type,wt,R]),Ye=y.useMemo(()=>Ne(),[Ne]);R.useSyncedValues({floatingRootContext:Le,activeTriggerProps:Fe,inactiveTriggerProps:st,popupProps:At,itemProps:Ye});const Re=y.useMemo(()=>({store:R,parent:T}),[R,T]),Te=w.jsx(wS.Provider,{value:Re,children:typeof e=="function"?e({payload:O}):e});return G.type===void 0||G.type==="context-menu"?w.jsx(SZ,{externalTree:L,children:Te}):Te}function vee(t){const e=t.getBoundingClientRect(),n=window.getComputedStyle(t,"::before"),r=window.getComputedStyle(t,"::after");if(!(n.content!=="none"||r.content!=="none"))return e;const s=parseFloat(n.width)||0,o=parseFloat(n.height)||0,a=parseFloat(r.width)||0,l=parseFloat(r.height)||0,c=Math.max(e.width,s,a),h=Math.max(e.height,o,l),f=c-e.width,p=h-e.height;return{left:e.left-f/2,right:e.right+f/2,top:e.top-p/2,bottom:e.bottom+p/2}}function yee(t={}){const{highlightItemOnHover:e,highlightedIndex:n,onHighlightedIndexChange:r}=ES(),{ref:i,index:s}=MN(t),o=n===s,a=y.useRef(null),l=id(i,a);return{compositeProps:y.useMemo(()=>({tabIndex:o?0:-1,onFocus(){r(s)},onMouseMove(){const h=a.current;if(!e||!h)return;const f=h.hasAttribute("disabled")||h.ariaDisabled==="true";!o&&!f&&h.focus()}}),[o,r,s,e]),compositeRef:l,index:s}}function wee(t){const{render:e,className:n,state:r=Ar,props:i=i0,refs:s=i0,metadata:o,stateAttributesMapping:a,tag:l="div",...c}=t,{compositeProps:h,compositeRef:f}=yee({metadata:o});return Al(l,t,{state:r,ref:[...s,f],props:[h,...i,c],stateAttributesMapping:a})}function US(t){if(Kn(t)&&t.hasAttribute("data-rootownerid"))return t.getAttribute("data-rootownerid")??void 0;if(!Eo(t))return US(Po(t))}function xee(t){const{enabled:e=!0,mouseDownAction:n,open:r}=t,i=y.useRef(!1);return y.useMemo(()=>e?{onMouseDown:s=>{(n==="open"&&!r||n==="close"&&r)&&(i.current=!0,Lo(s.currentTarget).addEventListener("click",()=>{i.current=!1},{once:!0}))},onClick:s=>{i.current&&(i.current=!1,s.preventBaseUIHandler())}}:Ar,[e,n,r])}const zg=2,_ee=y.forwardRef(function(e,n){const{render:r,className:i,disabled:s=!1,nativeButton:o=!0,id:a,openOnHover:l,delay:c=100,closeDelay:h=0,handle:f,payload:p,...g}=e,v=Ml(!0),x=(f==null?void 0:f.store)??(v==null?void 0:v.store);if(!x)throw new Error(Ao(85));const k=AN(a),C=x.useState("isTriggerActive",k),b=x.useState("floatingRootContext"),_=x.useState("isOpenedByTrigger",k),T=y.useRef(null),R=See(),L=ES(!0),M=Il(),A=y.useMemo(()=>M??new NS,[M]),$=sj(A),j=xa(),{registerTrigger:V,isMountedByThisTrigger:U}=dJ(k,T,x,{payload:p,closeDelay:h,parent:R,floatingTreeRoot:A,floatingNodeId:$,floatingParentNodeId:j,keyboardEventRelay:L==null?void 0:L.relayKeyboardEvent}),B=x.useState("disabled"),Z=s||B||R.type==="menubar"&&R.context.disabled,{getButtonProps:q,buttonRef:G}=PN({disabled:Z,native:o});y.useEffect(()=>{!_&&R.type===void 0&&(x.context.allowMouseUpTriggerRef.current=!1)},[x,_,R.type]);const te=y.useRef(null),O=wi(),K=dt(ve=>{if(!te.current)return;O.clear(),x.context.allowMouseUpTriggerRef.current=!1;const Ae=ve.target;if(Dt(te.current,Ae)||Dt(x.select("positionerElement"),Ae)||Ae===te.current||Ae!=null&&US(Ae)===x.select("rootId"))return;const De=vee(te.current);ve.clientX>=De.left-zg&&ve.clientX<=De.right+zg&&ve.clientY>=De.top-zg&&ve.clientY<=De.bottom+zg||A.events.emit("close",{domEvent:ve,reason:RN})});y.useEffect(()=>{_&&x.select("lastOpenChangeReason")===Yi&&Lo(te.current).addEventListener("mouseup",K,{once:!0})},[_,K,x]);const Y=R.type==="menubar"&&R.context.hasSubmenuOpen,re=RJ(b,{enabled:(l??Y??!1)&&!Z&&R.type!=="context-menu"&&(R.type!=="menubar"||Y&&!U),handleClose:OJ({blockPointerEvents:R.type!=="menubar"}),mouseOnly:!0,move:!1,restMs:R.type===void 0?c:void 0,delay:{close:h},triggerElementRef:T,externalTree:A,isActiveTrigger:C}),ue=bee(_,x.select("lastOpenChangeReason")),ke=IZ(b,{enabled:!Z&&R.type!=="context-menu",event:_&&R.type==="menubar"?"click":"mousedown",toggle:!0,ignoreMouse:!1,stickIfOpen:R.type===void 0?ue:!1}),qe=xJ(b,{enabled:!Z&&(R.type!=="menubar"&&_||Y)}),he=xee({open:_,enabled:R.type==="menubar",mouseDownAction:"open"}),ge=Rj([ke,qe]),we=R.type==="menubar",ae=y.useMemo(()=>({disabled:Z,open:_}),[Z,_]),me=x.useState("triggerProps",U),X=[te,n,G,V,T],ye=[ge.getReferenceProps(),re??Ar,me,{"aria-haspopup":"menu",id:k,onMouseDown:ve=>{if(x.select("open"))return;O.start(200,()=>{x.context.allowMouseUpTriggerRef.current=!0}),Lo(ve.currentTarget).addEventListener("mouseup",K,{once:!0})}},we?{role:"menuitem"}:{},he,g,q],_e=y.useRef(null),at=dt(ve=>{oi.flushSync(()=>{x.setOpen(!1,en(sd,ve.nativeEvent,ve.currentTarget))});const Ae=xZ(_e.current);Ae==null||Ae.focus()}),Le=dt(ve=>{var De;const Ae=x.select("positionerElement");if(Ae&&Vc(ve,Ae))(De=x.context.beforeContentFocusGuardRef.current)==null||De.focus();else{oi.flushSync(()=>{x.setOpen(!1,en(sd,ve.nativeEvent,ve.currentTarget))});let Ue=wZ(T.current);for(;Ue!==null&&Dt(Ae,Ue)||Ue!=null&&Ue.hasAttribute("aria-hidden");){const Ie=Ue;if(Ue=AS(Ue),Ue===Ie)break}Ue==null||Ue.focus()}}),fe=Al("button",e,{enabled:!we,stateAttributesMapping:Vx,state:ae,ref:X,props:ye});return we?w.jsx(wee,{tag:"button",render:r,className:i,state:ae,refs:X,props:ye,stateAttributesMapping:Vx}):_?w.jsxs(y.Fragment,{children:[w.jsx(cd,{ref:_e,onFocus:at},`${k}-pre-focus-guard`),w.jsx(y.Fragment,{children:fe},k),w.jsx(cd,{ref:x.context.triggerFocusTargetRef,onFocus:Le},`${k}-post-focus-guard`)]}):w.jsx(y.Fragment,{children:fe},k)});function bee(t,e){const n=wi(),[r,i]=y.useState(!1);return kt(()=>{t&&e==="trigger-hover"?(i(!0),n.start(GK,()=>{i(!1)})):t||(n.clear(),i(!1))},[t,e,n]),r}function See(){const t=sp(!0),e=Ml(!0),n=Dj(!0);return y.useMemo(()=>n?{type:"menubar",context:n}:t&&!e?{type:"context-menu",context:t}:{type:void 0},[t,e,n])}const Bj=y.forwardRef(function(e,n){const{className:r,render:i,orientation:s="horizontal",...o}=e,a=y.useMemo(()=>({orientation:s}),[s]);return Al("div",e,{state:a,ref:n,props:[{role:"separator","aria-orientation":s},o]})});function $j(t){const[e,n]=y.useState({getBoundingClientRect(){return DOMRect.fromRect({width:0,height:0,x:0,y:0})}}),r=y.useRef(null),i=y.useRef(null),s=y.useRef(null),o=y.useRef(null),a=y.useRef(!0),l=y.useRef(null),c=Ll(),h=y.useMemo(()=>({anchor:e,setAnchor:n,actionsRef:s,backdropRef:r,internalBackdropRef:i,positionerRef:o,allowMouseUpTriggerRef:a,initialCursorPointRef:l,rootId:c}),[e,c]);return w.jsx(vN.Provider,{value:h,children:w.jsx(wS.Provider,{value:void 0,children:w.jsx(Fj,{...t})})})}const eP=500,zj=y.forwardRef(function(e,n){const{render:r,className:i,...s}=e,{setAnchor:o,actionsRef:a,internalBackdropRef:l,backdropRef:c,positionerRef:h,allowMouseUpTriggerRef:f,initialCursorPointRef:p,rootId:g}=sp(!1),{store:v}=Ml(!1),x=v.useState("open"),k=y.useRef(null),C=y.useRef(null),b=wi(),_=wi(),T=y.useRef(!1);function R(U,B,Z){var G;const q=Z.type.startsWith("touch");p.current={x:U,y:B},o({getBoundingClientRect(){return DOMRect.fromRect({width:q?10:0,height:q?10:0,x:U,y:B})}}),T.current=!1,(G=a.current)==null||G.setOpen(!0,en(hl,Z)),_.start(eP,()=>{T.current=!0})}function L(U){f.current=!0,Vr(U),R(U.clientX,U.clientY,U.nativeEvent),Lo(k.current).addEventListener("mouseup",Z=>{var G;if(f.current=!1,!T.current)return;_.clear(),T.current=!1;const q=si(Z);Dt(h.current,q)||g&&q&&US(q)===g||(G=a.current)==null||G.setOpen(!1,en(RN,Z))},{once:!0})}function M(U){if(f.current=!1,U.touches.length===1){U.stopPropagation();const B=U.touches[0];C.current={x:B.clientX,y:B.clientY},b.start(eP,()=>{C.current&&R(C.current.x,C.current.y,U.nativeEvent)})}}function A(U){if(b.isStarted()&&C.current&&U.touches.length===1){const B=U.touches[0],Z=10,q=Math.abs(B.clientX-C.current.x),G=Math.abs(B.clientY-C.current.y);(q>Z||G>Z)&&b.clear()}}function $(){b.clear(),C.current=null}y.useEffect(()=>{function U(Z){const G=si(Z);(Dt(k.current,G)||Dt(l.current,G)||Dt(c.current,G))&&Z.preventDefault()}const B=Lo(k.current);return B.addEventListener("contextmenu",U),()=>{B.removeEventListener("contextmenu",U)}},[c,l]);const j=y.useMemo(()=>({open:x}),[x]);return Al("div",e,{state:j,ref:[k,n],props:[{onContextMenu:L,onTouchStart:M,onTouchMove:A,onTouchEnd:$,onTouchCancel:$,style:{WebkitTouchCallout:"none"}},s],stateAttributesMapping:Vx})});function Cee(){return w.jsx("div",{className:"layer-item__thumbnail"})}function kee({layer:t,isActive:e,isBackground:n,onSelect:r,onToggleVisibility:i,onRename:s,onDelete:o,onDuplicate:a,onMerge:l,canMerge:c}){const{attributes:h,listeners:f,setNodeRef:p,transform:g,transition:v,isDragging:x}=gN({id:t.id}),[k,C]=Be.useState(!1),[b,_]=Be.useState(t.name),T={transform:rd.Transform.toString(g),transition:v,opacity:x?.4:1},R=()=>{b.trim()!==""?s(b.trim()):_(t.name),C(!1)},L=M=>{M.key==="Enter"?R():M.key==="Escape"&&(_(t.name),C(!1))};return w.jsxs($j,{children:[w.jsx(zj,{className:"layer-context-menu__trigger",children:w.jsxs("div",{ref:p,style:T,className:`layer-item ${e?"layer-item--active":""} ${n?"layer-item--background":""} ${x?"layer-item--dragging":""}`,onClick:r,...n?{}:{...h,...f},children:[w.jsx("div",{className:"layer-item__section layer-item__section--visibility",children:w.jsx("button",{className:"layer-item__visibility",onClick:M=>{M.stopPropagation(),i()},title:t.visible?"Hide layer":"Show layer",children:t.visible&&w.jsx("span",{className:"layer-item__eye-icon",children:""})})}),w.jsx("div",{className:"layer-item__divider"}),w.jsx("div",{className:"layer-item__section layer-item__section--thumbnail",children:w.jsx(Cee,{})}),w.jsx("div",{className:"layer-item__divider"}),w.jsxs("div",{className:"layer-item__section layer-item__section--name",children:[k&&!n?w.jsx("input",{className:"layer-item__name-input",value:b,onChange:M=>_(M.target.value),onBlur:R,onKeyDown:L,onClick:M=>M.stopPropagation(),autoFocus:!0}):w.jsx("div",{className:"layer-item__name",onDoubleClick:M=>{n||(M.stopPropagation(),C(!0))},style:n?{cursor:"default"}:void 0,children:t.name}),w.jsx("span",{className:"layer-item__count",children:t.strokes.length})]})]})}),w.jsx(BS,{children:w.jsx($S,{className:"layer-context-menu__positioner",children:w.jsxs(FS,{className:"layer-context-menu__popup",children:[w.jsxs(Ks,{className:"layer-context-menu__item",onClick:a,children:[w.jsx(KV,{className:"layer-context-menu__item-icon",size:16}),"Duplicate Layer"]}),!n&&w.jsxs(Ks,{className:"layer-context-menu__item",onClick:()=>C(!0),children:[w.jsx(KM,{className:"layer-context-menu__item-icon",size:16}),"Rename Layer"]}),w.jsxs(Ks,{className:"layer-context-menu__item",onClick:l,disabled:!c,children:[w.jsx(tW,{className:"layer-context-menu__item-icon",size:16}),"Merge Selected Layers"]}),w.jsx(Bj,{className:"layer-context-menu__separator"}),!n&&w.jsxs(Ks,{className:"layer-context-menu__item layer-context-menu__item--danger",onClick:o,children:[w.jsx(XM,{className:"layer-context-menu__item-icon",size:16}),"Delete Layer"]})]})})})]})}function Eee({layers:t,activeLayerId:e,onLayersChange:n,onActiveLayerChange:r}){const i=qA(GA(K0,{activationConstraint:{delay:250,tolerance:5}})),s=[...t].sort((v,x)=>x.order-v.order),o=s.map(v=>v.id),a=v=>{const{active:x,over:k}=v;if(!k||x.id===k.id)return;const C=s.findIndex(R=>R.id===x.id),b=s.findIndex(R=>R.id===k.id),_=Q0(s,C,b),T=_.map((R,L)=>({...R,order:_.length-1-L}));n(T)},l=()=>{const v=Math.max(...t.map(k=>k.order),-1),x={id:crypto.randomUUID(),name:`Layer ${t.length+1}`,visible:!0,order:v+1,strokes:[]};n([...t,x]),r(x.id)},c=v=>{n(t.map(x=>x.id===v?{...x,visible:!x.visible}:x))},h=(v,x)=>{n(t.map(k=>k.id===v?{...k,name:x}:k))},f=v=>{if(t.length<=1){alert("Cannot delete the last layer");return}const x=t.find(C=>C.id===v);if(!x||x.strokes.length>0&&!window.confirm(`Delete "${x.name}"? This will remove ${x.strokes.length} strokes.`))return;const k=t.filter(C=>C.id!==v);n(k),v===e&&k.length>0&&r(k[0].id)},p=v=>{const x=t.find(_=>_.id===v);if(!x)return;const k=Math.max(...t.map(_=>_.order),-1),C=x.strokes.map(_=>({..._,clientId:crypto.randomUUID()})),b={id:crypto.randomUUID(),name:`${x.name} Copy`,visible:x.visible,order:k+1,strokes:C};n([...t,b]),r(b.id)},g=v=>{alert("Multi-layer selection and merging will be available in a future update.")};return w.jsxs("div",{className:"layer-panel",children:[w.jsxs("div",{className:"layer-panel__header",children:[w.jsx("h3",{children:"Layers"}),w.jsx("button",{className:"layer-panel__new-button",onClick:l,children:"+ New"})]}),w.jsx(lN,{sensors:i,collisionDetection:YA,onDragEnd:a,modifiers:[mN],children:w.jsx(fN,{items:o,strategy:cN,children:w.jsx("div",{className:"layer-panel__list",children:s.map(v=>w.jsx(kee,{layer:v,isActive:v.id===e,isBackground:v.name==="Background"&&v.order===0,onSelect:()=>r(v.id),onToggleVisibility:()=>c(v.id),onRename:x=>h(v.id,x),onDelete:()=>f(v.id),onDuplicate:()=>p(v.id),onMerge:()=>g(v.id),canMerge:!1},v.id))})})})]})}function Ree({activeTool:t,onToolChange:e}){const n=w.jsx("svg",{width:"20px",height:"20px",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:w.jsx("path",{d:"M14.8686 4.13134L14.1615 3.42423L14.1615 3.42423L14.8686 4.13134ZM7.81459 7.48152L8.08931 8.44304L7.81459 7.48152ZM5.57564 9.83884L6.55004 10.0637V10.0637L5.57564 9.83884ZM3 21L2.02561 20.7751C1.94808 21.1111 2.04909 21.4633 2.29289 21.7071C2.5367 21.9509 2.8889 22.0519 3.22486 21.9744L3 21ZM14.1611 18.4243L13.9363 17.4499L13.9363 17.4499L14.1611 18.4243ZM16.5185 16.1854L15.5569 15.9107L16.5185 16.1854ZM19.8686 9.13134L20.5757 9.83845V9.83845L19.8686 9.13134ZM19.8686 6.8686L19.1615 7.57571H19.1615L19.8686 6.8686ZM17.1314 4.13134L17.8385 3.42423V3.42423L17.1314 4.13134ZM20.5368 8.30899L19.5858 7.99997L20.5368 8.30899ZM20.5368 7.69095L19.5858 7.99997L20.5368 7.69095ZM15.4404 18.0251L15.9601 18.8794H15.9601L15.4404 18.0251ZM16.0539 17.4424L16.8804 18.0054L16.8804 18.0054L16.0539 17.4424ZM6.55756 7.94607L7.12056 8.77253L7.12056 8.77253L6.55756 7.94607ZM5.97487 8.55957L6.82922 9.07928L6.82922 9.07928L5.97487 8.55957ZM15.691 3.46313L15.382 2.51207L15.691 3.46313ZM16.309 3.46313L16.618 2.51207L16.618 2.51207L16.309 3.46313ZM9.14645 16.2676C9.53697 15.8771 9.53697 15.2439 9.14644 14.8534C8.75591 14.4629 8.12275 14.4629 7.73223 14.8534L9.14645 16.2676ZM10 14.5C10 14.7761 9.77614 15 9.5 15V17C10.8807 17 12 15.8807 12 14.5H10ZM9.5 15C9.22386 15 9 14.7761 9 14.5H7C7 15.8807 8.11929 17 9.5 17V15ZM9 14.5C9 14.2238 9.22386 14 9.5 14V12C8.11929 12 7 13.1193 7 14.5H9ZM9.5 14C9.77614 14 10 14.2238 10 14.5H12C12 13.1193 10.8807 12 9.5 12V14ZM14.1615 3.42423L12.2929 5.29286L13.7071 6.70708L15.5757 4.83845L14.1615 3.42423ZM12.7253 5.03845L7.53987 6.51999L8.08931 8.44304L13.2747 6.96149L12.7253 5.03845ZM4.60125 9.61398L2.02561 20.7751L3.97439 21.2248L6.55004 10.0637L4.60125 9.61398ZM3.22486 21.9744L14.386 19.3987L13.9363 17.4499L2.77514 20.0256L3.22486 21.9744ZM17.48 16.4601L18.9615 11.2747L17.0385 10.7252L15.5569 15.9107L17.48 16.4601ZM18.7071 11.7071L20.5757 9.83845L19.1615 8.42424L17.2929 10.2929L18.7071 11.7071ZM20.5757 6.16149L17.8385 3.42423L16.4243 4.83845L19.1615 7.57571L20.5757 6.16149ZM20.5757 9.83845C20.7621 9.65211 20.9449 9.47038 21.0858 9.30446C21.2342 9.12961 21.3938 8.90772 21.4879 8.618L19.5858 7.99997C19.6057 7.93858 19.6292 7.92986 19.5611 8.01011C19.4854 8.09928 19.3712 8.21456 19.1615 8.42424L20.5757 9.83845ZM19.1615 7.57571C19.3712 7.78538 19.4854 7.90066 19.5611 7.98984C19.6292 8.07008 19.6057 8.06136 19.5858 7.99997L21.4879 7.38194C21.3938 7.09222 21.2342 6.87033 21.0858 6.69548C20.9449 6.52957 20.7621 6.34783 20.5757 6.16149L19.1615 7.57571ZM21.4879 8.618C21.6184 8.21632 21.6184 7.78362 21.4879 7.38194L19.5858 7.99997V7.99997L21.4879 8.618ZM14.386 19.3987C14.988 19.2598 15.5141 19.1507 15.9601 18.8794L14.9207 17.1708C14.8157 17.2346 14.6727 17.28 13.9363 17.4499L14.386 19.3987ZM15.5569 15.9107C15.3493 16.6373 15.2966 16.7778 15.2274 16.8794L16.8804 18.0054C17.1743 17.574 17.3103 17.0541 17.48 16.4601L15.5569 15.9107ZM15.9601 18.8794C16.3257 18.6571 16.6395 18.359 16.8804 18.0054L15.2274 16.8794C15.1471 16.9973 15.0426 17.0966 14.9207 17.1708L15.9601 18.8794ZM7.53987 6.51999C6.94585 6.68971 6.426 6.82571 5.99457 7.11961L7.12056 8.77253C7.22213 8.70334 7.36263 8.65066 8.08931 8.44304L7.53987 6.51999ZM6.55004 10.0637C6.71998 9.32729 6.76535 9.18427 6.82922 9.07928L5.12053 8.03986C4.84922 8.48586 4.74017 9.01202 4.60125 9.61398L6.55004 10.0637ZM5.99457 7.11961C5.64092 7.36052 5.34291 7.67429 5.12053 8.03986L6.82922 9.07928C6.90334 8.95742 7.00268 8.85283 7.12056 8.77253L5.99457 7.11961ZM15.5757 4.83845C15.7854 4.62878 15.9007 4.51459 15.9899 4.43889C16.0701 4.37076 16.0614 4.39424 16 4.41418L15.382 2.51207C15.0922 2.60621 14.8704 2.76578 14.6955 2.91421C14.5296 3.05506 14.3479 3.2379 14.1615 3.42423L15.5757 4.83845ZM17.8385 3.42423C17.6521 3.23789 17.4704 3.05506 17.3045 2.91421C17.1296 2.76578 16.9078 2.60621 16.618 2.51207L16 4.41418C15.9386 4.39424 15.9299 4.37077 16.0101 4.43889C16.0993 4.51459 16.2146 4.62877 16.4243 4.83845L17.8385 3.42423ZM16 4.41418H16L16.618 2.51207C16.2163 2.38156 15.7837 2.38156 15.382 2.51207L16 4.41418ZM12.2929 6.70708L17.2929 11.7071L18.7071 10.2929L13.7071 5.29286L12.2929 6.70708ZM7.73223 14.8534L2.29289 20.2929L3.70711 21.7071L9.14645 16.2676L7.73223 14.8534Z",fill:"currentColor"})}),r=w.jsxs("svg",{width:"20px",height:"20px",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:[w.jsx("path",{fill:"none",stroke:"currentColor",strokeMiterlimit:"10",strokeWidth:"1.91px",d:"M13.59,19l-2.82,2.83a2.33,2.33,0,0,1-1.63.67h0a2.31,2.31,0,0,1-1.63-.67L2.17,16.49a2.31,2.31,0,0,1-.67-1.63h0a2.33,2.33,0,0,1,.67-1.63L5,10.41Z"}),w.jsx("rect",{fill:"none",stroke:"currentColor",strokeMiterlimit:"10",strokeWidth:"1.91px",x:"7.45",y:"4.17",width:"12.59",height:"12.15",transform:"translate(-3.22 12.73) rotate(-45)"})]}),i=w.jsxs("svg",{width:"20px",height:"20px",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[w.jsx("path",{d:"M8 10L12 3L16 10H8Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),w.jsx("path",{d:"M10 17.5C10 19.433 8.433 21 6.5 21C4.567 21 3 19.433 3 17.5C3 15.567 4.567 14 6.5 14C8.433 14 10 15.567 10 17.5Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),w.jsx("path",{d:"M14 14H21V21H14V14Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]});return w.jsxs("div",{className:"tool-selection-panel",children:[w.jsx("button",{className:`tool-selection-panel__button ${t==="pen"?"tool-selection-panel__button--active":""}`,onClick:()=>e("pen"),"aria-label":"Pen Tool",title:"Pen Tool",children:n}),w.jsx("button",{className:`tool-selection-panel__button ${t==="eraser"?"tool-selection-panel__button--active":""}`,onClick:()=>e("eraser"),"aria-label":"Eraser Tool",title:"Eraser Tool",children:r}),w.jsx("button",{className:`tool-selection-panel__button ${t==="shape"?"tool-selection-panel__button--active":""}`,onClick:()=>e("shape"),"aria-label":"Shape Tool",title:"Shape Tool",children:i})]})}function e_(){return e_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},e_.apply(null,arguments)}var Mc=255,m0=100,Tee=t=>{var{r:e,g:n,b:r,a:i}=t,s=Math.max(e,n,r),o=s-Math.min(e,n,r),a=o?s===e?(n-r)/o:s===n?2+(r-e)/o:4+(e-n)/o:0;return{h:60*(a<0?a+6:a),s:s?o/s*m0:0,v:s/Mc*m0,a:i}},Pee=t=>{var{r:e,g:n,b:r}=t,i=e<<16|n<<8|r;return"#"+(s=>new Array(7-s.length).join("0")+s)(i.toString(16))},rl=t=>Tee(Lee(t)),Lee=t=>{var e=t.replace("#","");/^#?/.test(t)&&e.length===3&&(t="#"+e.charAt(0)+e.charAt(0)+e.charAt(1)+e.charAt(1)+e.charAt(2)+e.charAt(2));var n=new RegExp("[A-Za-z0-9]{2}","g"),[r,i,s=0,o]=t.match(n).map(a=>parseInt(a,16));return{r,g:i,b:s,a:(o??255)/Mc}},Mee=t=>{var{h:e,s:n,v:r,a:i}=t,s=e/60,o=n/m0,a=r/m0,l=Math.floor(s)%6,c=s-Math.floor(s),h=Mc*a*(1-o),f=Mc*a*(1-o*c),p=Mc*a*(1-o*(1-c));a*=Mc;var g={};switch(l){case 0:g.r=a,g.g=p,g.b=h;break;case 1:g.r=f,g.g=a,g.b=h;break;case 2:g.r=h,g.g=a,g.b=p;break;case 3:g.r=h,g.g=f,g.b=a;break;case 4:g.r=p,g.g=h,g.b=a;break;case 5:g.r=a,g.g=h,g.b=f;break}return g.r=Math.round(g.r),g.g=Math.round(g.g),g.b=Math.round(g.b),e_({},g,{a:i})},Uj=t=>Pee(Mee(t));function Aee(t,e,n,r){const i=n*.86,s=(r-90)*Math.PI/180,o={x:t+i*Math.cos(s),y:e+i*Math.sin(s)},a={x:t+i*Math.cos(s+2*Math.PI/3),y:e+i*Math.sin(s+2*Math.PI/3)},l={x:t+i*Math.cos(s+4*Math.PI/3),y:e+i*Math.sin(s+4*Math.PI/3)};return{hue:o,white:a,black:l}}function Vj(t,e){const{hue:n,white:r,black:i}=e,s=(r.y-i.y)*(n.x-i.x)+(i.x-r.x)*(n.y-i.y),o=((r.y-i.y)*(t.x-i.x)+(i.x-r.x)*(t.y-i.y))/s,a=((i.y-n.y)*(t.x-i.x)+(n.x-i.x)*(t.y-i.y))/s,l=1-o-a;return{hue:o,white:a,black:l}}function Nee(t,e){return{x:t.hue*e.hue.x+t.white*e.white.x+t.black*e.black.x,y:t.hue*e.hue.y+t.white*e.white.y+t.black*e.black.y}}function Wj(t){return t.hue>=0&&t.white>=0&&t.black>=0}function jee(t){if(Wj(t))return t;const e=Math.max(0,t.hue),n=Math.max(0,t.white),r=Math.max(0,t.black),i=e+n+r;return{hue:e/i,white:n/i,black:r/i}}function Iee(t){const{hue:e,white:n}=t,r=e+n,i=r*100;return{s:r>0?e/r*100:0,v:i}}function Oee(t,e){const n=t/100,r=e/100,i=r,s=i*n,o=i*(1-n),a=1-r;return{hue:s,white:o,black:a}}function Dee(t,e,n){const r=Oee(t,e);return Nee(r,n)}function Fee(t,e){const n=Vj(t,e),r=jee(n);return Iee(r)}function Bee(t){const e={x:(t.hue.x+t.black.x)/2,y:(t.hue.y+t.black.y)/2},n={x:(t.hue.x+t.white.x)/2,y:(t.hue.y+t.white.y)/2};return{hueToWhite:{start:e,end:t.white},blackOverlay:{start:n,end:t.black}}}function $ee(t,e,n){const r=e/100,i=n/100,s=i*r,o=s*(1-Math.abs(t/60%2-1)),a=i-s;let l=0,c=0,h=0;t>=0&&t<60?(l=s,c=o,h=0):t>=60&&t<120?(l=o,c=s,h=0):t>=120&&t<180?(l=0,c=s,h=o):t>=180&&t<240?(l=0,c=o,h=s):t>=240&&t<300?(l=o,c=0,h=s):(l=s,c=0,h=o);const f=Math.round((l+a)*255),p=Math.round((c+a)*255),g=Math.round((h+a)*255);return`rgb(${f}, ${p}, ${g})`}function Hj({hue:t,saturation:e,value:n,onChange:r,radius:i,size:s}){const o=y.useRef(null),[a,l]=y.useState(!1),c=s/2,h=Aee(c,c,i,t),f=Bee(h),p=Dee(e,n,h),g=$ee(t,e,n),v=(C,b)=>{if(!o.current)return;const _=o.current.getBoundingClientRect(),T={x:C-_.left,y:b-_.top},{s:R,v:L}=Fee(T,h);r(R,L)},x=C=>{if(!o.current)return;const b=o.current.getBoundingClientRect(),_={x:C.clientX-b.left,y:C.clientY-b.top},T=Vj(_,h);if(!Wj(T))return;C.preventDefault(),C.stopPropagation(),l(!0);const L=A=>{v(A.clientX,A.clientY)},M=()=>{l(!1),window.removeEventListener("pointermove",L),window.removeEventListener("pointerup",M)};window.addEventListener("pointermove",L),window.addEventListener("pointerup",M),v(C.clientX,C.clientY)},k=`hsl(${t}, 100%, 50%)`;return w.jsxs("div",{className:"sv-triangle",ref:o,style:{width:`${s}px`,height:`${s}px`},children:[w.jsxs("svg",{className:"sv-triangle__svg",width:s,height:s,onPointerDown:x,style:{cursor:a?"grabbing":"crosshair"},children:[w.jsxs("defs",{children:[w.jsxs("linearGradient",{id:"sv-gradient-hue",x1:f.hueToWhite.start.x,y1:f.hueToWhite.start.y,x2:f.hueToWhite.end.x,y2:f.hueToWhite.end.y,gradientUnits:"userSpaceOnUse",children:[w.jsx("stop",{offset:"0%",stopColor:k}),w.jsx("stop",{offset:"100%",stopColor:"white"})]}),w.jsxs("linearGradient",{id:"sv-gradient-black",x1:f.blackOverlay.start.x,y1:f.blackOverlay.start.y,x2:f.blackOverlay.end.x,y2:f.blackOverlay.end.y,gradientUnits:"userSpaceOnUse",children:[w.jsx("stop",{offset:"0%",stopColor:"transparent"}),w.jsx("stop",{offset:"100%",stopColor:"black"})]})]}),w.jsx("polygon",{points:`${h.hue.x},${h.hue.y} ${h.white.x},${h.white.y} ${h.black.x},${h.black.y}`,fill:"url(#sv-gradient-hue)",className:"sv-triangle__base"}),w.jsx("polygon",{points:`${h.hue.x},${h.hue.y} ${h.white.x},${h.white.y} ${h.black.x},${h.black.y}`,fill:"url(#sv-gradient-black)",className:"sv-triangle__overlay"})]}),w.jsx("div",{className:`sv-triangle__thumb ${a?"sv-triangle__thumb--dragging":""}`,style:{left:`${p.x}px`,top:`${p.y}px`,background:g}})]})}const fm=176,VS=18,Gj=fm/2,rc=Gj-VS,zee=rc+VS/2;function Uee({brushSize:t,brushColor:e,onBrushSizeChange:n,onBrushColorChange:r}){const[i,s]=y.useState("normal"),[o,a]=y.useState(100),[l,c]=y.useState(()=>{const R=rl(e);return Number.isFinite(R.h)?R.h:0}),h=y.useRef(null),f=y.useRef(e);y.useEffect(()=>{if(e!==f.current){const R=rl(e);Number.isFinite(R.h)&&R.s>0&&c(R.h)}},[e]);const p=rl(e),g=Number.isFinite(l)?l:0,v={...p,h:g},x=`hsl(${v.h}, 100%, 50%)`,k=(R,L,M)=>{const A=R!==void 0?R:g,$=L!==void 0?L:v.s,j=M!==void 0?M:v.v;R!==void 0&&Number.isFinite(R)&&c(R);const U=Uj({h:A,s:$,v:j,a:100});f.current=U,r(U)},C=(R,L)=>{if(!h.current)return;const M=h.current.getBoundingClientRect(),A=M.left+M.width/2,$=M.top+M.height/2,j=R-A,V=L-$,B=(Math.atan2(V,j)*180/Math.PI+450)%360;k(B)},b=(R,L)=>{R.preventDefault();const M=$=>L($.clientX,$.clientY),A=()=>{window.removeEventListener("pointermove",M),window.removeEventListener("pointerup",A)};window.addEventListener("pointermove",M),window.addEventListener("pointerup",A),L(R.clientX,R.clientY)},_=R=>{if(!h.current)return;const L=h.current.getBoundingClientRect(),M=L.left+L.width/2,A=L.top+L.height/2,$=R.clientX-M,j=R.clientY-A,V=Math.sqrt($*$+j*j);V>=rc&&V<=Gj&&b(R,C)},T=(R,L)=>{k(void 0,R,L)};return w.jsxs("div",{className:"pen-tool-config",children:[w.jsxs("div",{className:"pen-tool-config__section",children:[w.jsx("h4",{className:"pen-tool-config__section-title",children:"Pen Type"}),w.jsxs("div",{className:"pen-tool-config__brush-types",children:[w.jsxs("button",{className:`pen-tool-config__brush-type ${i==="normal"?"pen-tool-config__brush-type--active":""}`,onClick:()=>s("normal"),children:[w.jsx("div",{className:"pen-tool-config__brush-preview",children:w.jsx("div",{className:"pen-tool-config__brush-circle"})}),w.jsx("span",{className:"pen-tool-config__brush-label",children:"Normal"})]}),w.jsxs("div",{className:"pen-tool-config__brush-type pen-tool-config__brush-type--placeholder",children:[w.jsx("div",{className:"pen-tool-config__brush-preview",children:w.jsx("div",{className:"pen-tool-config__brush-circle pen-tool-config__brush-circle--disabled"})}),w.jsx("span",{className:"pen-tool-config__brush-label pen-tool-config__brush-label--disabled",children:"More Soon"})]})]})]}),w.jsx("div",{className:"pen-tool-config__divider"}),w.jsxs("div",{className:"pen-tool-config__section",children:[w.jsx("h4",{className:"pen-tool-config__section-title",children:"Tool Properties"}),w.jsxs("div",{className:"pen-tool-config__property",children:[w.jsxs("label",{className:"pen-tool-config__property-label",children:[w.jsx("span",{children:"Brush Size"}),w.jsxs("span",{className:"pen-tool-config__property-value",children:[t,"px"]})]}),w.jsxs("div",{className:"pen-tool-config__slider-container",children:[w.jsx("input",{type:"range",min:"1",max:"50",value:t,onChange:R=>n(Number(R.target.value)),className:"pen-tool-config__slider"}),w.jsx("div",{className:"pen-tool-config__slider-fill",style:{width:`${t/50*100}%`}})]})]}),w.jsxs("div",{className:"pen-tool-config__property",children:[w.jsxs("label",{className:"pen-tool-config__property-label",children:[w.jsx("span",{children:"Opacity"}),w.jsxs("span",{className:"pen-tool-config__property-value",children:[o,"%"]})]}),w.jsxs("div",{className:"pen-tool-config__slider-container",children:[w.jsx("input",{type:"range",min:"0",max:"100",value:o,onChange:R=>a(Number(R.target.value)),className:"pen-tool-config__slider"}),w.jsx("div",{className:"pen-tool-config__slider-fill",style:{width:`${o}%`}})]})]})]}),w.jsx("div",{className:"pen-tool-config__divider"}),w.jsxs("div",{className:"pen-tool-config__section",children:[w.jsx("h4",{className:"pen-tool-config__section-title",children:"Color"}),w.jsxs("div",{className:"pen-tool-config__color-wheel-container",children:[w.jsxs("div",{className:"pen-tool-config__wheel",style:{width:`${fm}px`,height:`${fm}px`,"--wheel-thickness":`${VS}px`,"--wheel-inner":`${rc*2}px`},ref:h,onPointerDown:_,children:[w.jsx("div",{className:"pen-tool-config__wheel-track"}),w.jsx("div",{className:"pen-tool-config__wheel-ring"}),w.jsx("div",{className:"pen-tool-config__wheel-hole",style:{width:`${rc*2}px`,height:`${rc*2}px`}}),w.jsx("div",{className:"pen-tool-config__hue-thumb",style:{transform:`translate(-50%, -50%) rotate(${v.h-90}deg) translate(${zee}px) rotate(${-v.h+90}deg)`,background:x}}),w.jsx(Hj,{hue:v.h,saturation:v.s,value:v.v,onChange:T,radius:rc,size:fm})]}),w.jsxs("div",{className:"pen-tool-config__color-meta",children:[w.jsx("div",{className:"pen-tool-config__color-preview",style:{background:e}}),w.jsxs("div",{className:"pen-tool-config__color-input-wrap",children:[w.jsx("label",{className:"pen-tool-config__swatch-label",children:"HEX"}),w.jsx("input",{type:"text",value:e.toUpperCase(),onChange:R=>{const L=R.target.value;if(/^#[0-9A-Fa-f]{0,6}$/.test(L)){f.current=L;const M=rl(L);Number.isFinite(M.h)&&M.s>0&&c(M.h),r(L)}},className:"pen-tool-config__color-input",placeholder:"#000000"})]})]})]})]})]})}function Vee({brushSize:t,onBrushSizeChange:e}){const[n,r]=y.useState(100);return w.jsxs("div",{className:"eraser-tool-config",children:[w.jsxs("div",{className:"eraser-tool-config__section",children:[w.jsx("h4",{className:"eraser-tool-config__section-title",children:"Tool Properties"}),w.jsxs("div",{className:"eraser-tool-config__property",children:[w.jsxs("label",{className:"eraser-tool-config__property-label",children:[w.jsx("span",{children:"Brush Size"}),w.jsxs("span",{className:"eraser-tool-config__property-value",children:[t,"px"]})]}),w.jsxs("div",{className:"eraser-tool-config__slider-container",children:[w.jsx("input",{type:"range",min:"1",max:"50",value:t,onChange:i=>e(Number(i.target.value)),className:"eraser-tool-config__slider"}),w.jsx("div",{className:"eraser-tool-config__slider-fill",style:{width:`${t/50*100}%`}})]})]}),w.jsxs("div",{className:"eraser-tool-config__property",children:[w.jsxs("label",{className:"eraser-tool-config__property-label",children:[w.jsx("span",{children:"Opacity"}),w.jsxs("span",{className:"eraser-tool-config__property-value",children:[n,"%"]})]}),w.jsxs("div",{className:"eraser-tool-config__slider-container",children:[w.jsx("input",{type:"range",min:"0",max:"100",value:n,onChange:i=>r(Number(i.target.value)),className:"eraser-tool-config__slider"}),w.jsx("div",{className:"eraser-tool-config__slider-fill",style:{width:`${n}%`}})]})]})]}),w.jsx("div",{className:"eraser-tool-config__divider"}),w.jsx("div",{className:"eraser-tool-config__section",children:w.jsxs("div",{className:"eraser-tool-config__info",children:[w.jsx("div",{className:"eraser-tool-config__info-icon",children:w.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:w.jsx("path",{d:"M12 16V12M12 8H12.01M21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}),w.jsx("p",{className:"eraser-tool-config__info-text",children:"Eraser removes strokes from the active layer"})]})})]})}const pm=176,WS=18,qj=pm/2,ic=qj-WS,Wee=ic+WS/2;function Hee({brushSize:t,brushColor:e,selectedShape:n,fillEnabled:r,fillColor:i,onBrushSizeChange:s,onBrushColorChange:o,onShapeChange:a,onFillEnabledChange:l,onFillColorChange:c}){const[h,f]=y.useState(!1),[p,g]=y.useState(()=>{const U=rl(h?i:e);return Number.isFinite(U.h)?U.h:0}),v=y.useRef(null),x=y.useRef(h?i:e),k=h?i:e,C=h?c:o;y.useEffect(()=>{if(k!==x.current){const U=rl(k);Number.isFinite(U.h)&&U.s>0&&g(U.h)}},[k]);const b=rl(k),_=Number.isFinite(p)?p:0,T={...b,h:_},R=`hsl(${T.h}, 100%, 50%)`,L=(U,B,Z)=>{const q=U!==void 0?U:_,G=B!==void 0?B:T.s,te=Z!==void 0?Z:T.v;U!==void 0&&Number.isFinite(U)&&g(U);const K=Uj({h:q,s:G,v:te,a:100});x.current=K,C(K)},M=(U,B)=>{if(!v.current)return;const Z=v.current.getBoundingClientRect(),q=Z.left+Z.width/2,G=Z.top+Z.height/2,te=U-q,O=B-G,Y=(Math.atan2(O,te)*180/Math.PI+450)%360;L(Y)},A=(U,B)=>{U.preventDefault();const Z=G=>B(G.clientX,G.clientY),q=()=>{window.removeEventListener("pointermove",Z),window.removeEventListener("pointerup",q)};window.addEventListener("pointermove",Z),window.addEventListener("pointerup",q),B(U.clientX,U.clientY)},$=U=>{if(!v.current)return;const B=v.current.getBoundingClientRect(),Z=B.left+B.width/2,q=B.top+B.height/2,G=U.clientX-Z,te=U.clientY-q,O=Math.sqrt(G*G+te*te);O>=ic&&O<=qj&&A(U,M)},j=(U,B)=>{L(void 0,U,B)},V=[{type:"line",label:"Line",icon:w.jsx("svg",{width:"20",height:"20",viewBox:"0 0 20 20",children:w.jsx("line",{x1:"2",y1:"18",x2:"18",y2:"2",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})})},{type:"rectangle",label:"Rectangle",icon:w.jsx("svg",{width:"20",height:"20",viewBox:"0 0 20 20",children:w.jsx("rect",{x:"3",y:"3",width:"14",height:"14",stroke:"currentColor",strokeWidth:"2",fill:"none"})})},{type:"ellipse",label:"Ellipse",icon:w.jsx("svg",{width:"20",height:"20",viewBox:"0 0 20 20",children:w.jsx("ellipse",{cx:"10",cy:"10",rx:"7",ry:"7",stroke:"currentColor",strokeWidth:"2",fill:"none"})})},{type:"triangle",label:"Triangle",icon:w.jsx("svg",{width:"20",height:"20",viewBox:"0 0 20 20",children:w.jsx("path",{d:"M10 3 L17 17 L3 17 Z",stroke:"currentColor",strokeWidth:"2",fill:"none"})})}];return w.jsxs("div",{className:"shape-tool-config",children:[w.jsxs("div",{className:"shape-tool-config__section",children:[w.jsx("h4",{className:"shape-tool-config__section-title",children:"Shape Type"}),w.jsx("div",{className:"shape-tool-config__shape-grid",children:V.map(U=>w.jsxs("button",{className:`shape-tool-config__shape-button ${n===U.type?"shape-tool-config__shape-button--active":""}`,onClick:()=>a(U.type),title:U.label,children:[U.icon,w.jsx("span",{className:"shape-tool-config__shape-label",children:U.label})]},U.type))})]}),w.jsx("div",{className:"shape-tool-config__divider"}),w.jsxs("div",{className:"shape-tool-config__section",children:[w.jsx("h4",{className:"shape-tool-config__section-title",children:"Properties"}),w.jsxs("div",{className:"shape-tool-config__property",children:[w.jsxs("label",{className:"shape-tool-config__property-label",children:[w.jsx("span",{children:"Stroke Width"}),w.jsxs("span",{className:"shape-tool-config__property-value",children:[t,"px"]})]}),w.jsxs("div",{className:"shape-tool-config__slider-container",children:[w.jsx("input",{type:"range",min:"1",max:"50",value:t,onChange:U=>s(Number(U.target.value)),className:"shape-tool-config__slider"}),w.jsx("div",{className:"shape-tool-config__slider-fill",style:{width:`${t/50*100}%`}})]})]}),w.jsx("div",{className:"shape-tool-config__property",children:w.jsxs("label",{className:"shape-tool-config__property-label",children:[w.jsx("span",{children:"Fill"}),w.jsx("input",{type:"checkbox",checked:r,onChange:U=>l(U.target.checked),className:"shape-tool-config__checkbox"})]})})]}),w.jsx("div",{className:"shape-tool-config__divider"}),w.jsxs("div",{className:"shape-tool-config__section",children:[w.jsx("h4",{className:"shape-tool-config__section-title",children:"Color"}),w.jsxs("div",{className:"shape-tool-config__color-type-toggle",children:[w.jsx("button",{className:`shape-tool-config__color-type-button ${h?"":"shape-tool-config__color-type-button--active"}`,onClick:()=>f(!1),children:"Stroke"}),r&&w.jsx("button",{className:`shape-tool-config__color-type-button ${h?"shape-tool-config__color-type-button--active":""}`,onClick:()=>f(!0),children:"Fill"})]}),w.jsxs("div",{className:"shape-tool-config__color-wheel-container",children:[w.jsxs("div",{className:"shape-tool-config__wheel",style:{width:`${pm}px`,height:`${pm}px`,"--wheel-thickness":`${WS}px`,"--wheel-inner":`${ic*2}px`},ref:v,onPointerDown:$,children:[w.jsx("div",{className:"shape-tool-config__wheel-track"}),w.jsx("div",{className:"shape-tool-config__wheel-ring"}),w.jsx("div",{className:"shape-tool-config__wheel-hole",style:{width:`${ic*2}px`,height:`${ic*2}px`}}),w.jsx("div",{className:"shape-tool-config__hue-thumb",style:{transform:`translate(-50%, -50%) rotate(${T.h-90}deg) translate(${Wee}px) rotate(${-T.h+90}deg)`,background:R}}),w.jsx(Hj,{hue:T.h,saturation:T.s,value:T.v,onChange:j,radius:ic,size:pm})]}),w.jsxs("div",{className:"shape-tool-config__color-meta",children:[w.jsx("div",{className:"shape-tool-config__color-preview",style:{background:k}}),w.jsxs("div",{className:"shape-tool-config__color-input-wrap",children:[w.jsx("label",{className:"shape-tool-config__swatch-label",children:"HEX"}),w.jsx("input",{type:"text",value:k.toUpperCase(),onChange:U=>{const B=U.target.value;if(/^#[0-9A-Fa-f]{0,6}$/.test(B)){x.current=B;const Z=rl(B);Number.isFinite(Z.h)&&Z.s>0&&g(Z.h),C(B)}},className:"shape-tool-config__color-input",placeholder:"#000000"})]})]})]})]})]})}function Gee({project:t}){const e=t.config,n=(e==null?void 0:e.width)||1e3,r=(e==null?void 0:e.height)||1e3,i=(e==null?void 0:e.backgroundColor)||"#ffffff",[s,o]=Be.useState("pen"),[a,l]=Be.useState([]),[c,h]=Be.useState(""),[f,p]=Be.useState(5),[g,v]=Be.useState("#df4b26"),[x,k]=Be.useState(null),[C,b]=Be.useState(!1),[_,T]=Be.useState(null),[R,L]=Be.useState("rectangle"),[M,A]=Be.useState(!1),[$,j]=Be.useState("#ffffff"),[V,U]=Be.useState([]),[B,Z]=Be.useState(-1),q=Be.useRef(!1),[G,te]=Be.useState(1),O=window.innerWidth-480,K=window.innerHeight,Y=(O-n)/2,xe=(K-r)/2,[re,ue]=Be.useState({x:Y,y:xe}),ke=Be.useRef(null),[qe,he]=Be.useState(!0),ge=Be.useRef(!1),we=Be.useRef(!1),ae=Be.useRef(null),me=Be.useRef(null),X=Be.useRef(null),ye=Be.useRef(!1),_e=Be.useRef(null),at=Be.useRef(null),Le=Be.useRef(null),fe=Be.useRef(null),ve=Be.useRef(null),Ae=Be.useRef({shift:!1,alt:!1,ctrl:!1}),De=Re=>{const Te=Re.getPointerPosition();if(!Te)return null;const pe=Re.getAbsoluteTransform().copy();return pe.invert(),pe.point(Te)},Ue=Be.useCallback(()=>{at.current&&me.current&&(ve.current={container:at.current.getBoundingClientRect(),stage:me.current.container().getBoundingClientRect()})},[]),Ie=Be.useCallback(Re=>{q.current||(U(Te=>{const pe=Te.slice(0,B+1);return pe.push(JSON.parse(JSON.stringify(Re))),pe.length>30&&pe.shift(),pe}),Z(Te=>Te+1>=30?29:Te+1))},[B]),ze=Be.useCallback(()=>{if(B>0){q.current=!0;const Re=V[B-1];l(JSON.parse(JSON.stringify(Re))),Z(Te=>Te-1),setTimeout(()=>{q.current=!1},0)}},[V,B]),Ce=Be.useCallback(()=>{if(B<V.length-1){q.current=!0;const Re=V[B+1];l(JSON.parse(JSON.stringify(Re))),Z(Te=>Te+1),setTimeout(()=>{q.current=!1},0)}},[V,B]),Oe=Re=>{Re.evt.preventDefault();const Te=Re.target.getStage(),pe=G,be=Te.getPointerPosition(),gt=1.1,nt=Re.evt.deltaY<0?pe*gt:pe/gt,lt=Math.max(.1,Math.min(10,nt)),Ke={x:(be.x-re.x)/pe,y:(be.y-re.y)/pe},xt={x:be.x-Ke.x*lt,y:be.y-Ke.y*lt};te(lt),ue(xt)},Ne=Re=>{const Te=Re.target.getStage(),pe=Re.evt.button===1,be=Re.evt.button===0&&ye.current;if(pe||be){Re.evt.preventDefault(),ge.current=!1,we.current=!0;const nt=Te.getPointerPosition();ae.current=nt,he(!1),Te.container().style.cursor="grabbing"}else if(Re.evt.button===0){we.current=!1,ge.current=!0;const nt=De(Te);nt&&c&&fe.current&&(Le.current={clientId:hr(),tool:s,points:[nt.x,nt.y],color:g,strokeWidth:f,...s==="shape"&&{shapeType:R,fillColor:M?$:void 0}},fe.current.points([nt.x,nt.y]),fe.current.stroke(g),fe.current.strokeWidth(f),fe.current.globalCompositeOperation(s==="eraser"?"destination-out":"source-over"),fe.current.getLayer().batchDraw())}},yt=Re=>{var be,gt;const Te=Re.target.getStage(),pe=Te.getPointerPosition();if(pe){if(ke.current&&((be=ve.current)!=null&&be.container)&&((gt=ve.current)!=null&&gt.stage)){const{container:nt,stage:lt}=ve.current,Ke=pe.x+(lt.left-nt.left),xt=pe.y+(lt.top-nt.top);ke.current.style.transform=`translate(${Ke}px, ${xt}px)`}if(we.current&&ae.current){const nt=pe.x-ae.current.x,lt=pe.y-ae.current.y,Ke=Te.x()+nt,xt=Te.y()+lt;Te.x(Ke),Te.y(xt),Te.batchDraw(),ae.current=pe}else if(ge.current&&Le.current){const nt=De(Te);if(nt&&fe.current){const lt=Le.current;if(lt.tool==="shape"){const ut=lt.points[0],Xt=lt.points[1];let ft=nt.x,Ft=nt.y,St=ft-ut,ln=Ft-Xt;if(Ae.current.shift){const Gt=Math.max(Math.abs(St),Math.abs(ln));St=St<0?-Gt:Gt,ln=ln<0?-Gt:Gt,ft=ut+St,Ft=Xt+ln}if(Ae.current.alt){const Gt=ut,qt=Xt;ft=Gt+St,Ft=qt+ln;const mt=Gt-St,vt=qt-ln;lt.points=[mt,vt,ft,Ft]}else lt.points=[ut,Xt,ft,Ft]}else if(lt.points.push(nt.x,nt.y),lt.tool==="eraser"){const ut=f/2;l(Xt=>Xt.map(ft=>{if(ft.id!==c)return ft;const Ft=(ft.shapes||[]).filter(St=>{const ln=St.x,Gt=St.y,qt=St.x+St.width*St.scaleX,mt=St.y+St.height*St.scaleY;return!(nt.x+ut>ln&&nt.x-ut<qt&&nt.y+ut>Gt&&nt.y-ut<mt)});return{...ft,shapes:Ft}}))}const[Ke,xt,Lt,rt]=lt.points,Nt=Math.min(Ke,Lt),ht=Math.min(xt,rt),zt=Math.abs(Lt-Ke),Et=Math.abs(rt-xt);if(lt.shapeType==="rectangle")fe.current.x(Nt),fe.current.y(ht),fe.current.width(zt),fe.current.height(Et);else if(lt.shapeType==="ellipse"){const ut=Nt+zt/2,Xt=ht+Et/2;fe.current.x(ut),fe.current.y(Xt),fe.current.radiusX(zt/2),fe.current.radiusY(Et/2)}else if(lt.shapeType==="triangle"){const ut=[Nt+zt/2,ht,Nt+zt,ht+Et,Nt,ht+Et];fe.current.points(ut)}else fe.current.points(lt.points);fe.current.getLayer().batchDraw()}}}},Fe=()=>{if(ge.current&&Le.current&&c){const Re=Le.current;l(Te=>{const pe=Te.map(be=>be.id!==c?be:{...be,strokes:[...be.strokes,Re]});return Ie(pe),pe}),Le.current=null,fe.current&&(fe.current.points([]),fe.current.getLayer().batchDraw())}we.current&&me.current&&ue({x:me.current.x(),y:me.current.y()}),ge.current=!1,we.current=!1,ae.current=null,he(!0),me.current&&(ye.current?me.current.container().style.cursor="grab":me.current.container().style.cursor="none")},st=()=>{he(!0)},wt=()=>{he(!1)};Be.useEffect(()=>{(async()=>{console.log("Loading canvas for project:",t.id);const{layers:Te,activeLayerId:pe}=await Xq(t.id);console.log("Loaded",Te.length,"layers from database"),l(Te),h(pe),k(new Date),U([JSON.parse(JSON.stringify(Te))]),Z(0)})()},[t.id]),Be.useEffect(()=>{if(a.length===0&&!x){const Re={id:hr(),name:"Layer 1",visible:!0,order:0,strokes:[]};l([Re]),h(Re.id),U([[JSON.parse(JSON.stringify(Re))]]),Z(0)}},[a.length,x]),Be.useEffect(()=>{if(a.length===0&&!x)return;const Re=setTimeout(async()=>{try{b(!0),T(null);const Te=a.reduce((pe,be)=>pe+be.strokes.length,0);console.log("Attempting to save canvas with",a.length,"layers and",Te,"strokes"),await Kq(t.id,a,c),k(new Date),console.log("Canvas saved successfully")}catch(Te){console.error("Auto-save failed:",Te),T(Te instanceof Error?Te.message:"Save failed")}finally{b(!1)}},2e3);return()=>clearTimeout(Re)},[a,c,t.id]),Be.useEffect(()=>{me.current&&X.current&&(X.current.getCanvas()._canvas.getContext("2d",{willReadFrequently:!0}),X.current.batchDraw())},[]),Be.useEffect(()=>{if(!_e.current)return;const Re=50;let Te=Re*G;G<.5&&(Te=Re*G*2);const pe=re.x%Te,be=re.y%Te;_e.current.style.backgroundSize=`${Te}px ${Te}px`,_e.current.style.backgroundPosition=`${pe}px ${be}px`},[G,re]),Be.useEffect(()=>{Ue()},[G,re,Ue]),Be.useEffect(()=>{const Re=pe=>{if((pe.ctrlKey||pe.metaKey)&&!pe.shiftKey&&pe.key==="z"){pe.preventDefault(),ze();return}if((pe.ctrlKey||pe.metaKey)&&(pe.key==="y"||pe.shiftKey&&pe.key==="z")){pe.preventDefault(),Ce();return}pe.key==="Shift"&&(Ae.current.shift=!0),pe.key==="Alt"&&(Ae.current.alt=!0),(pe.key==="Control"||pe.key==="Meta")&&(Ae.current.ctrl=!0),pe.code==="Space"&&!ye.current&&(pe.preventDefault(),ye.current=!0,me.current&&!we.current&&(me.current.container().style.cursor="grab"))},Te=pe=>{pe.key==="Shift"&&(Ae.current.shift=!1),pe.key==="Alt"&&(Ae.current.alt=!1),(pe.key==="Control"||pe.key==="Meta")&&(Ae.current.ctrl=!1),pe.code==="Space"&&(pe.preventDefault(),ye.current=!1,me.current&&!we.current&&(me.current.container().style.cursor="none"))};return window.addEventListener("keydown",Re),window.addEventListener("keyup",Te),()=>{window.removeEventListener("keydown",Re),window.removeEventListener("keyup",Te)}},[ze,Ce]);const At=Re=>{if(Re.tool!=="shape"||!Re.shapeType||Re.points.length<4)return null;const[Te,pe,be,gt]=Re.points,nt=Math.min(Te,be),lt=Math.min(pe,gt),Ke=Math.abs(be-Te),xt=Math.abs(gt-pe),Lt={key:Re.clientId,stroke:Re.color,strokeWidth:Re.strokeWidth,fill:Re.fillColor||"transparent",listening:!1,perfectDrawEnabled:!1,shadowForStrokeEnabled:!1};switch(Re.shapeType){case"line":return w.jsx(Va,{...Lt,points:[Te,pe,be,gt],lineCap:"round"});case"rectangle":return w.jsx(Va,{...Lt,points:[nt,lt,nt+Ke,lt,nt+Ke,lt+xt,nt,lt+xt],closed:!0});case"ellipse":return w.jsx(Va,{...Lt,points:Ye(nt+Ke/2,lt+xt/2,Ke/2,xt/2),closed:!0,tension:0});case"triangle":const rt=nt+Ke/2,Nt=lt,ht=lt+xt;return w.jsx(Va,{...Lt,points:[rt,Nt,nt+Ke,ht,nt,ht],closed:!0});default:return null}},Ye=(Re,Te,pe,be)=>{const gt=[];for(let lt=0;lt<=64;lt++){const Ke=lt/64*2*Math.PI,xt=Re+pe*Math.cos(Ke),Lt=Te+be*Math.sin(Ke);gt.push(xt,Lt)}return gt};return w.jsxs("div",{className:"canvas-workspace",children:[w.jsx(Ree,{activeTool:s,onToolChange:o}),s==="pen"?w.jsx(Uee,{brushSize:f,brushColor:g,onBrushSizeChange:p,onBrushColorChange:v}):s==="eraser"?w.jsx(Vee,{brushSize:f,onBrushSizeChange:p}):w.jsx(Hee,{brushSize:f,brushColor:g,selectedShape:R,fillEnabled:M,fillColor:$,onBrushSizeChange:p,onBrushColorChange:v,onShapeChange:L,onFillEnabledChange:A,onFillColorChange:j}),w.jsxs("div",{ref:at,className:"canvas-workspace__canvas-container",onMouseEnter:st,onMouseLeave:wt,children:[w.jsx("div",{ref:_e,className:"canvas-workspace__grid-background"}),w.jsxs(qq,{ref:me,width:window.innerWidth-480,height:window.innerHeight,onWheel:Oe,onMouseDown:Ne,onMousemove:yt,onMouseup:Fe,scaleX:G,scaleY:G,x:re.x,y:re.y,style:{cursor:"none",position:"relative",zIndex:1},children:[w.jsx(w1,{listening:!1,children:w.jsx(Va,{points:[0,0,n,0,n,r,0,r],closed:!0,fill:i,stroke:i,strokeWidth:0,listening:!1})}),a.filter(Re=>Re.visible).sort((Re,Te)=>Re.order-Te.order).map(Re=>w.jsxs(w1,{ref:Re.id===c?X:void 0,listening:!1,children:[Re.strokes.map(Te=>Te.tool==="shape"?At(Te):w.jsx(Va,{points:Te.points,stroke:Te.color,strokeWidth:Te.strokeWidth,tension:.5,lineCap:"round",lineJoin:"round",globalCompositeOperation:Te.tool==="eraser"?"destination-out":"source-over",perfectDrawEnabled:!1,shadowForStrokeEnabled:!1,hitStrokeWidth:0,listening:!1},Te.clientId)),Re.id===c&&(s==="pen"||s==="eraser"||s==="shape"&&R==="line")&&w.jsx(Va,{ref:fe,points:[],stroke:g,strokeWidth:f,tension:.5,lineCap:"round",lineJoin:"round",globalCompositeOperation:s==="eraser"?"destination-out":"source-over",perfectDrawEnabled:!1,shadowForStrokeEnabled:!1,listening:!1})]},Re.id)),w.jsxs(w1,{listening:!1,children:[s==="shape"&&R==="rectangle"&&w.jsx(Hq,{ref:fe,x:0,y:0,width:0,height:0,stroke:g,strokeWidth:f,fill:M?$:void 0,perfectDrawEnabled:!1,shadowForStrokeEnabled:!1,listening:!1}),s==="shape"&&R==="ellipse"&&w.jsx(Gq,{ref:fe,x:0,y:0,radiusX:0,radiusY:0,stroke:g,strokeWidth:f,fill:M?$:void 0,perfectDrawEnabled:!1,shadowForStrokeEnabled:!1,listening:!1}),s==="shape"&&R==="triangle"&&w.jsx(Va,{ref:fe,points:[],stroke:g,strokeWidth:f,fill:M?$:void 0,closed:!0,perfectDrawEnabled:!1,shadowForStrokeEnabled:!1,listening:!1})]})]}),qe&&!we.current&&w.jsx("div",{ref:ke,style:{position:"absolute",left:0,top:0,pointerEvents:"none",mixBlendMode:"difference",zIndex:999},children:s==="shape"?w.jsxs("svg",{width:20*G,height:20*G,style:{transform:`translate(${-(10*G)}px, ${-(10*G)}px)`},children:[w.jsx("line",{x1:"0",y1:10*G,x2:20*G,y2:10*G,stroke:"#ffffff",strokeWidth:Math.max(1.5,2*G)}),w.jsx("line",{x1:10*G,y1:"0",x2:10*G,y2:20*G,stroke:"#ffffff",strokeWidth:Math.max(1.5,2*G)})]}):w.jsx("svg",{width:(f+4)*G,height:(f+4)*G,style:{transform:`translate(${-(f+4)*G/2}px, ${-(f+4)*G/2}px)`},children:w.jsx("circle",{cx:(f+4)*G/2,cy:(f+4)*G/2,r:f*G/2,fill:"none",stroke:"#ffffff",strokeWidth:Math.max(1.5,2*G),strokeDasharray:"4 4"})})})]}),w.jsx("div",{className:"canvas-workspace__sidebar",children:w.jsxs("div",{className:"canvas-workspace__sidebar-content",children:[w.jsx("h3",{className:"canvas-workspace__sidebar-title",children:"Properties"}),w.jsxs("div",{className:"canvas-workspace__property-group",children:[w.jsxs("label",{className:"canvas-workspace__label",children:["Zoom: ",Math.round(G*100),"%"]}),w.jsx("button",{onClick:()=>{te(1);const Re=window.innerWidth-520,Te=window.innerHeight,pe=(Re-n)/2,be=(Te-r)/2;ue({x:pe,y:be})},className:"canvas-workspace__button",children:"Reset View"}),w.jsxs("div",{className:"canvas-workspace__help-text",children:[w.jsx("p",{children:" Scroll to zoom"}),w.jsx("p",{children:" Space + Drag to pan"}),w.jsx("p",{children:" Middle-click to pan"})]})]}),w.jsx("div",{className:"canvas-workspace__divider"}),w.jsxs("div",{className:"canvas-workspace__property-group",children:[w.jsx("label",{className:"canvas-workspace__label",children:"Canvas Info"}),w.jsxs("div",{className:"canvas-workspace__info",children:[w.jsxs("p",{children:["Layers: ",a.length]}),w.jsxs("p",{children:["Total Strokes: ",a.reduce((Re,Te)=>Re+Te.strokes.length,0)]}),w.jsx("p",{children:C?" Saving...":_?` Error: ${_}`:x?` Saved ${x.toLocaleTimeString()}`:""})]})]}),w.jsx("div",{className:"canvas-workspace__divider"}),w.jsx(Eee,{layers:a,activeLayerId:c,onLayersChange:l,onActiveLayerChange:h})]})})]})}function Yj(t,e){const[n,r]=y.useState(null),[i,s]=y.useState(mn),[o,a]=y.useState(!1),[l,c]=y.useState(!1),[h,f]=y.useState(null),[p,g]=y.useState("legacy"),v=y.useCallback(async()=>{if(!t||!e)return;a(!0),f(null);const{data:k,error:C}=await Ct.from("projects").select("*").eq("id",t).eq("user_id",e).single();if(C){f(C.message),a(!1);return}const b=k;r(b);try{const{config:_,storage:T}=await sB({projectId:t,userId:e,legacyConfig:b.battle_map_config});s(_),g(T)}catch(_){console.error("Failed to load battle map state",_),f("Failed to load battle map state"),s(mn)}finally{a(!1)}},[t,e]);y.useEffect(()=>{v()},[v]);const x=y.useCallback(async k=>{if(!(!t||!e)){c(!0),f(null);try{const{config:C,storage:b}=await pL({projectId:t,userId:e,config:k});s(C),g(b)}catch(C){console.error("Failed to persist battle map state",C),f("Failed to save battle map state")}finally{c(!1)}}},[t,e]);return{project:n,config:i,setConfig:s,isLoading:o,isSaving:l,error:h,storageMode:p,refresh:v,saveConfig:x}}const qee=[{id:"stone-1x1",gridType:"square",label:"Stone 1x1",cols:1,rows:1,image:"/assets/widgets/stone_tile.webp",isFixed:!0},{id:"stone-2x1",gridType:"square",label:"Stone 2x1",cols:2,rows:2,image:"/assets/widgets/stone_tile.webp",isFixed:!0},{id:"stone-1x2",gridType:"square",label:"Stone 1x2",cols:1,rows:2,image:"/assets/widgets/stone_tile.webp",isFixed:!0},{id:"gravel-1x1",gridType:"square",label:"Gravel 1x1",cols:2,rows:1,image:"/assets/widgets/gravel_tile.webp",isFixed:!0},{id:"gravel-2x1",gridType:"square",label:"Gravel 2x1",cols:1,rows:1,image:"/assets/widgets/gravel_tile.webp",isFixed:!0},{id:"gravel-2x2",gridType:"square",label:"Gravel 2x2",cols:1,rows:1,image:"/assets/widgets/gravel_tile.webp",isFixed:!0}],Yee=[{id:"hex_grass",gridType:"square",label:"hex_grass",cols:1,rows:1,image:"/assets/widgets/hex/grass/hex_grass.webp",isFixed:!0},{id:"hex_grass_path_1",gridType:"square",label:"hex_grass_path_1",cols:1,rows:1,image:"/assets/widgets/hex/grass/hex_grass_path_1.webp",isFixed:!0},{id:"hex_grass_path_2",gridType:"square",label:"hex_grass_path_2",cols:1,rows:1,image:"/assets/widgets/hex/grass/hex_grass_path_2.webp",isFixed:!0},{id:"hex_grass_path_3",gridType:"square",label:"hex_grass_path_3",cols:1,rows:1,image:"/assets/widgets/hex/grass/hex_grass_path_3.webp",isFixed:!0},{id:"hex_grass_path_4",gridType:"square",label:"hex_grass_path_4",cols:1,rows:1,image:"/assets/widgets/hex/grass/hex_grass_path_4.webp",isFixed:!0},{id:"hex_grass_path_5",gridType:"square",label:"hex_grass_path_5",cols:1,rows:1,image:"/assets/widgets/hex/grass/hex_grass_path_5.webp",isFixed:!0},{id:"hex_grass_path_6",gridType:"square",label:"hex_grass_path_6",cols:1,rows:1,image:"/assets/widgets/hex/grass/hex_grass_path_6.webp",isFixed:!0}],Kee=[{id:"hex_grass",gridType:"hex",label:"hex_grass",image:"/assets/widgets/hex/grass/hex_grass.webp",isFixed:!0},{id:"hex_grass_path_1",gridType:"hex",label:"hex_grass_path_1",image:"/assets/widgets/hex/grass/hex_grass_path_1.webp",isFixed:!0},{id:"hex_grass_path_2",gridType:"hex",label:"hex_grass_path_2",image:"/assets/widgets/hex/grass/hex_grass_path_2.webp",isFixed:!0},{id:"hex_grass_path_3",gridType:"hex",label:"hex_grass_path_3",image:"/assets/widgets/hex/grass/hex_grass_path_3.webp",isFixed:!0},{id:"hex_grass_path_4",gridType:"hex",label:"hex_grass_path_4",image:"/assets/widgets/hex/grass/hex_grass_path_4.webp",isFixed:!0},{id:"hex_grass_path_5",gridType:"hex",label:"hex_grass_path_5",image:"/assets/widgets/hex/grass/hex_grass_path_5.webp",isFixed:!0},{id:"hex_grass_path_6",gridType:"hex",label:"hex_grass_path_6",image:"/assets/widgets/hex/grass/hex_grass_path_6.webp",isFixed:!0}],tP=.85,O1=[{title:"Stone Tiles",tiles:qee},{title:"Dirt Tiles",tiles:Yee}],D1=[{title:"Hex Tiles",tiles:Kee}],Kj=async(t,e)=>{if(!t||t.startsWith("data:"))return t;const n=e==null?void 0:e.get(t);if(n)return n;try{const i=await(await fetch(t,{mode:"cors"})).blob(),s=await new Promise((o,a)=>{const l=new FileReader;l.onloadend=()=>{typeof l.result=="string"?o(l.result):a(new Error("Failed to convert image to data URL"))},l.onerror=a,l.readAsDataURL(i)});return e==null||e.set(t,s),s}catch(r){return console.error("Failed to inline image",r),t}},Xj=t=>new Promise((e,n)=>{const r=new Image;r.onload=()=>e(r),r.onerror=i=>n(i),r.decoding="async",r.crossOrigin="anonymous",r.src=t}),Zj=(t,e)=>{const n=document.createElement("a");n.href=t,n.download=e,n.rel="noopener",document.body.appendChild(n),n.click(),requestAnimationFrame(()=>n.remove())};function Qj({layers:t,activeLayerId:e,onActiveLayerChange:n,onToggleVisibility:r,onAddLayer:i,onRenameLayer:s,onMoveLayerUp:o,onMoveLayerDown:a,onDeleteLayer:l,onReorderLayers:c}){const h=qA(GA(K0,{activationConstraint:{delay:250,tolerance:5}})),f=t.map(g=>g.id),p=g=>{const{active:v,over:x}=g;if(!x||v.id===x.id)return;const k=t.findIndex(_=>_.id===v.id),C=t.findIndex(_=>_.id===x.id);if(k<0||C<0)return;const b=Q0(t,k,C);c(b)};return w.jsxs("div",{className:"layer-panel battlemap-layer-panel",children:[w.jsxs("div",{className:"layer-panel__header",children:[w.jsx("h3",{children:"Layers"}),w.jsxs(Fj,{children:[w.jsx(_ee,{type:"button",className:"layer-panel__new-button battlemap-layer-panel__new-button",title:"Add layer",children:w.jsx(oW,{size:16,"aria-hidden":!0})}),w.jsx(BS,{children:w.jsx($S,{className:"layer-context-menu__positioner",children:w.jsxs(FS,{className:"layer-context-menu__popup",children:[w.jsx(Ks,{className:"layer-context-menu__item",onClick:()=>i("tiles"),children:"Tile Layer"}),w.jsx(Ks,{className:"layer-context-menu__item",onClick:()=>i("image"),children:"Image"}),w.jsx(Ks,{className:"layer-context-menu__item",onClick:()=>i("background"),children:"Background"})]})})})]})]}),w.jsx(lN,{sensors:h,collisionDetection:YA,onDragEnd:p,modifiers:[mN],children:w.jsx(fN,{items:f,strategy:cN,children:w.jsx("div",{className:"layer-panel__list",children:t.map(g=>w.jsx(Zee,{layer:g,isActive:g.id===e,onSelect:()=>n(g.id),onToggleVisibility:()=>r(g.id),onRename:v=>s(g.id,v),onMoveUp:()=>o(g.id),onMoveDown:()=>a(g.id),onDelete:()=>l(g.id)},g.id))})})})]})}function Xee({kind:t}){return t==="tiles"?w.jsx("svg",{width:"24",height:"24",viewBox:"0 0 42.704 42.704",xmlns:"http://www.w3.org/2000/svg","aria-hidden":!0,children:w.jsx("path",{d:`M42.629,14.199c-0.006-0.021-0.019-0.04-0.024-0.061c-0.031-0.096-0.07-0.189-0.121-0.278c0-0.004-0.002-0.007-0.004-0.01
          c-0.019-0.031-0.041-0.057-0.062-0.088c-0.045-0.07-0.09-0.142-0.143-0.206c-0.04-0.046-0.086-0.085-0.129-0.127
          c-0.043-0.042-0.084-0.087-0.133-0.126c-0.062-0.051-0.135-0.092-0.201-0.133c-0.033-0.02-0.062-0.045-0.096-0.063l-14.777-7.73
          c-0.531-0.277-1.16-0.282-1.695-0.016l-3.266,1.635l-9.062-4.479c-0.536-0.267-1.171-0.257-1.7,0.025L0.986,7.999
          C0.373,8.325-0.008,8.967,0,9.662c0.008,0.695,0.402,1.327,1.023,1.641l15.518,7.83L2,26.986c-0.034,0.02-0.061,0.043-0.094,0.062
          c-0.07,0.043-0.141,0.085-0.204,0.14c-0.05,0.041-0.091,0.088-0.136,0.133c-0.041,0.044-0.084,0.08-0.121,0.125
          c-0.056,0.068-0.102,0.145-0.146,0.22c-0.018,0.026-0.039,0.052-0.055,0.081c-0.002,0.003-0.002,0.005-0.004,0.007
          c-0.053,0.102-0.094,0.207-0.129,0.313c-0.02,0.064-0.031,0.133-0.045,0.197c-0.011,0.062-0.027,0.119-0.034,0.182
          c-0.007,0.066-0.001,0.135-0.001,0.199c0.001,0.057-0.004,0.107,0.001,0.164c0.009,0.084,0.029,0.164,0.049,0.248
          c0.009,0.033,0.011,0.069,0.021,0.104c0.036,0.113,0.084,0.229,0.142,0.34c0.001,0.002,0.002,0.004,0.002,0.006
          c0.005,0.009,0.012,0.013,0.015,0.021c0.069,0.125,0.157,0.24,0.255,0.349c0.029,0.032,0.059,0.062,0.09,0.092
          c0.083,0.079,0.175,0.149,0.273,0.215c0.031,0.021,0.061,0.043,0.094,0.062c0.012,0.006,0.021,0.018,0.033,0.021l18.472,9.893
          c0.08,0.043,0.165,0.064,0.247,0.097c0.053,0.02,0.103,0.045,0.157,0.061c0.156,0.041,0.315,0.064,0.472,0.064
          c0.002,0,0.004,0,0.004,0c0.15,0,0.307-0.021,0.459-0.062c0.051-0.012,0.098-0.035,0.146-0.055
          c0.078-0.024,0.158-0.048,0.234-0.085l18.357-9.321c0.916-0.467,1.282-1.586,0.814-2.502c-0.021-0.043-0.052-0.078-0.076-0.119
          c-0.113-0.526-0.449-1.006-0.972-1.27l-9.215-4.648l10.619-5.917c0.004-0.002,0.008-0.004,0.012-0.006l0.019-0.009
          c0.021-0.015,0.043-0.033,0.065-0.048c0.077-0.049,0.152-0.098,0.229-0.158c0.041-0.034,0.073-0.077,0.112-0.116
          c0.049-0.047,0.099-0.091,0.14-0.143c0.049-0.064,0.09-0.131,0.131-0.199c0.02-0.034,0.045-0.062,0.062-0.099
          c0.002-0.003,0.003-0.007,0.004-0.01c0.044-0.081,0.072-0.166,0.104-0.253c0.074-0.219,0.104-0.443,0.098-0.666
          c0-0.049,0.006-0.096,0-0.142C42.689,14.433,42.665,14.315,42.629,14.199z M5.905,9.595l6.222-3.318l5.892,2.912l-6.07,3.456
          L5.905,9.595z M36.043,28.972l-14.662,7.444L6.817,28.617l13.776-7.442L36.043,28.972z M27.1,20.289l-5.674-2.861l-5.489-2.77
          l6.926-3.942l3.191-1.599l10.881,5.691L27.1,20.289z`,fill:"currentColor"})}):t==="background"?w.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-hidden":!0,children:w.jsx("path",{d:"M14.2639 15.9375L12.5958 14.2834C11.7909 13.4851 11.3884 13.086 10.9266 12.9401C10.5204 12.8118 10.0838 12.8165 9.68048 12.9536C9.22188 13.1095 8.82814 13.5172 8.04068 14.3326L4.04409 18.2801M14.2639 15.9375L14.6053 15.599C15.4112 14.7998 15.8141 14.4002 16.2765 14.2543C16.6831 14.126 17.12 14.1311 17.5236 14.2687C17.9824 14.4251 18.3761 14.8339 19.1634 15.6514L20 16.4934M14.2639 15.9375L18.275 19.9565M18.275 19.9565C17.9176 20 17.4543 20 16.8 20H7.2C6.07989 20 5.51984 20 5.09202 19.782C4.71569 19.5903 4.40973 19.2843 4.21799 18.908C4.12796 18.7313 4.07512 18.5321 4.04409 18.2801M18.275 19.9565C18.5293 19.9256 18.7301 19.8727 18.908 19.782C19.2843 19.5903 19.5903 19.2843 19.782 18.908C20 18.4802 20 17.9201 20 16.8V16.4934M4.04409 18.2801C4 17.9221 4 17.4575 4 16.8V7.2C4 6.0799 4 5.51984 4.21799 5.09202C4.40973 4.71569 4.71569 4.40973 5.09202 4.21799C5.51984 4 6.07989 4 7.2 4H16.8C17.9201 4 18.4802 4 18.908 4.21799C19.2843 4.40973 19.5903 4.71569 19.782 5.09202C20 5.51984 20 6.0799 20 7.2V16.4934M17 8.99989C17 10.1045 16.1046 10.9999 15 10.9999C13.8954 10.9999 13 10.1045 13 8.99989C13 7.89532 13.8954 6.99989 15 6.99989C16.1046 6.99989 17 7.89532 17 8.99989Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}):w.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-hidden":!0,children:[w.jsx("rect",{x:"3",y:"3",width:"7",height:"7",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),w.jsx("rect",{x:"3",y:"14",width:"7",height:"7",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),w.jsx("rect",{x:"14",y:"3",width:"7",height:"7",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),w.jsx("rect",{x:"14",y:"14",width:"7",height:"7",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]})}function Zee({layer:t,isActive:e,onSelect:n,onToggleVisibility:r,onRename:i,onMoveUp:s,onMoveDown:o,onDelete:a}){const{attributes:l,listeners:c,setNodeRef:h,transform:f,transition:p,isDragging:g}=gN({id:t.id}),v={transform:rd.Transform.toString(f),transition:p,opacity:g?.4:1};return w.jsx(Qee,{layer:t,isActive:e,onSelect:n,onToggleVisibility:r,onRename:i,onMoveUp:s,onMoveDown:o,onDelete:a,dragAttributes:l,dragListeners:c,dragRef:h,dragStyle:v,isDragging:g})}function Qee({layer:t,isActive:e,onSelect:n,onToggleVisibility:r,onRename:i,onMoveUp:s,onMoveDown:o,onDelete:a,dragAttributes:l,dragListeners:c,dragRef:h,dragStyle:f,isDragging:p}){const[g,v]=Be.useState(!1),[x,k]=Be.useState(t.name);Be.useEffect(()=>{g||k(t.name)},[g,t.name]);const C=()=>{const b=x.trim();b?i(b):k(t.name),v(!1)};return w.jsxs($j,{children:[w.jsx(zj,{className:"layer-context-menu__trigger",children:w.jsxs("div",{ref:h,style:f,className:`layer-item${e?" layer-item--active":""}${t.kind==="grid"?" battlemap-layer-panel__item--grid":""}${p?" layer-item--dragging":""}`,onClick:n,onKeyDown:b=>{b.key==="Enter"||b.key===" "?(b.preventDefault(),n()):b.key==="Escape"&&g&&(b.preventDefault(),k(t.name),v(!1))},...l,...c,children:[w.jsx("div",{className:"layer-item__section layer-item__section--visibility",children:w.jsx("button",{type:"button",className:"layer-item__visibility",onClick:b=>{b.stopPropagation(),r()},"aria-label":t.visible?"Hide layer":"Show layer",children:t.visible?w.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-hidden":!0,children:w.jsx("path",{d:"M3 14C3 9.02944 7.02944 5 12 5C16.9706 5 21 9.02944 21 14M17 14C17 16.7614 14.7614 19 12 19C9.23858 19 7 16.7614 7 14C7 11.2386 9.23858 9 12 9C14.7614 9 17 11.2386 17 14Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}):w.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-hidden":!0,children:w.jsx("path",{d:"M9.60997 9.60714C8.05503 10.4549 7 12.1043 7 14C7 16.7614 9.23858 19 12 19C13.8966 19 15.5466 17.944 16.3941 16.3878M21 14C21 9.02944 16.9706 5 12 5C11.5582 5 11.1238 5.03184 10.699 5.09334M3 14C3 11.0069 4.46104 8.35513 6.70883 6.71886M3 3L21 21",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})}),w.jsx("div",{className:"layer-item__divider"}),w.jsx("div",{className:"layer-item__section layer-item__section--thumbnail",children:w.jsx("div",{className:"layer-item__thumbnail battlemap-layer-panel__thumbnail",children:w.jsx(Xee,{kind:t.kind})})}),w.jsx("div",{className:"layer-item__divider"}),w.jsx("div",{className:"layer-item__section layer-item__section--name",children:g?w.jsx("input",{className:"layer-item__name-input",value:x,onChange:b=>k(b.target.value),onBlur:C,onKeyDown:b=>{b.key==="Enter"?(b.preventDefault(),C()):b.key==="Escape"&&(b.preventDefault(),k(t.name),v(!1))},onClick:b=>b.stopPropagation(),autoFocus:!0}):w.jsx("div",{className:"layer-item__name",onDoubleClick:b=>{b.stopPropagation(),v(!0)},children:t.name})})]})}),w.jsx(BS,{children:w.jsx($S,{className:"layer-context-menu__positioner",children:w.jsxs(FS,{className:"layer-context-menu__popup",children:[w.jsxs(Ks,{className:"layer-context-menu__item",onClick:()=>v(!0),children:[w.jsx(KM,{className:"layer-context-menu__item-icon",size:16}),"Rename"]}),w.jsxs(Ks,{className:"layer-context-menu__item",onClick:s,children:[w.jsx("span",{className:"layer-context-menu__item-icon","aria-hidden":!0,children:w.jsx("svg",{width:"16",height:"16",viewBox:"0 -4.5 20 20",xmlns:"http://www.w3.org/2000/svg","aria-hidden":!0,children:w.jsx("path",{d:"M223.707692,6534.63378 L223.707692,6534.63378 C224.097436,6534.22888 224.097436,6533.57338 223.707692,6533.16951 L215.444127,6524.60657 C214.66364,6523.79781 213.397472,6523.79781 212.616986,6524.60657 L204.29246,6533.23165 C203.906714,6533.6324 203.901717,6534.27962 204.282467,6534.68555 C204.671211,6535.10081 205.31179,6535.10495 205.70653,6534.69695 L213.323521,6526.80297 C213.714264,6526.39807 214.346848,6526.39807 214.737591,6526.80297 L222.294621,6534.63378 C222.684365,6535.03868 223.317949,6535.03868 223.707692,6534.63378",transform:"translate(-204 -6524)",fill:"currentColor"})})}),"Move Up"]}),w.jsxs(Ks,{className:"layer-context-menu__item",onClick:o,children:[w.jsx("span",{className:"layer-context-menu__item-icon","aria-hidden":!0,children:w.jsx("svg",{width:"16",height:"16",viewBox:"0 -4.5 20 20",xmlns:"http://www.w3.org/2000/svg","aria-hidden":!0,children:w.jsx("path",{d:"M164.292308,6524.36583 L164.292308,6524.36583 C163.902564,6524.77071 163.902564,6525.42619 164.292308,6525.83004 L172.555873,6534.39267 C173.33636,6535.20244 174.602528,6535.20244 175.383014,6534.39267 L183.70754,6525.76791 C184.093286,6525.36716 184.098283,6524.71997 183.717533,6524.31405 C183.328789,6523.89985 182.68821,6523.89467 182.29347,6524.30266 L174.676479,6532.19636 C174.285736,6532.60124 173.653152,6532.60124 173.262409,6532.19636 L165.705379,6524.36583 C165.315635,6523.96094 164.683051,6523.96094 164.292308,6524.36583",transform:"translate(-164 -6524)",fill:"currentColor"})})}),"Move Down"]}),w.jsx(Bj,{className:"layer-context-menu__separator"}),w.jsxs(Ks,{className:"layer-context-menu__item layer-context-menu__item--danger",onClick:a,disabled:t.kind==="grid",children:[w.jsx(XM,{className:"layer-context-menu__item-icon",size:16}),"Delete"]})]})})})]})}const nP=3,mh="grid-layer",F1=1,B1=30,Jee=.5,rP=11,$1=.5,z1=20,ete=.5,iP=11,tte=t=>t.map((e,n)=>({tile:e,index:n})),t_=(t,e,n)=>Math.min(n,Math.max(e,t)),sP=(t,e,n)=>(t_(t,e,n)-e)/(n-e)*100,oP=(t,e)=>{const n=t.trim();if(!n)return e;if(n.startsWith("#"))return n;const r=n.match(/rgba?\((\d+),\s*(\d+),\s*(\d+)/i);if(!r)return e;const i=s=>Number(s).toString(16).padStart(2,"0");return`#${i(r[1])}${i(r[2])}${i(r[3])}`};function nte(){var Q;const{projectId:t}=ab(),{user:e}=Ii(),n=no(),{project:r,config:i,isLoading:s,isSaving:o,error:a,saveConfig:l}=Yj(t,e==null?void 0:e.id),c=i.gridType==="square"?i:mn,h=c.gridColumns||mn.gridColumns,f=c.gridRows||mn.gridRows,p=c.cellSize||mn.cellSize,[g,v]=y.useState(c.widgets??[]),[x,k]=y.useState(null),[C,b]=y.useState(null),[_,T]=y.useState(null),[R,L]=y.useState(null),[M,A]=y.useState(null),[$,j]=y.useState(null),[V,U]=y.useState(1),[B,Z]=y.useState({x:0,y:0}),[q,G]=y.useState(!1),[te,O]=y.useState(!1),[K,Y]=y.useState(()=>Object.fromEntries(O1.map(N=>[N.title,!1]))),[xe,re]=y.useState(!1),[ue,ke]=y.useState(!1),[qe,he]=y.useState(!1),[ge,we]=y.useState(!1),[ae,me]=y.useState(()=>c.layers&&c.layers.length>0?c.layers:[{id:mh,name:"Grid Map Layer",kind:"grid",visible:!0}]),[X,ye]=y.useState(c.activeLayerId??mh),_e=y.useRef(ae),at=y.useRef(X),[Le,fe]=y.useState(Number.isFinite(c.gridLineWidth)?Number(c.gridLineWidth):mn.gridLineWidth??1),[ve,Ae]=y.useState(Number.isFinite(c.gridBorderWidth)?Number(c.gridBorderWidth):mn.gridBorderWidth??2),[De,Ue]=y.useState(c.gridLineColor??""),[Ie,ze]=y.useState(c.gridBorderColor??""),Ce=y.useRef(Le),Oe=y.useRef(ve),Ne=y.useRef(De),yt=y.useRef(Ie),[Fe,st]=y.useState(!1),[wt,At]=y.useState(!1),[Ye,Re]=y.useState(!1),[Te,pe]=y.useState(!1),[be,gt]=y.useState(!1),[nt,lt]=y.useState(null),[Ke,xt]=y.useState(!1),[Lt,rt]=y.useState(null),[Nt,ht]=y.useState(null),zt=y.useRef(null),Et=y.useRef(null),ut=y.useMemo(()=>ae.find(N=>N.id===X),[ae,X]),Xt=(ut==null?void 0:ut.kind)==="grid",ft=(ut==null?void 0:ut.kind)==="tiles",Ft=((Q=ae.find(N=>N.kind==="grid"))==null?void 0:Q.visible)??!0,St=y.useMemo(()=>{var N;return((N=ae.find(D=>D.kind==="tiles"))==null?void 0:N.id)??null},[ae]),ln=y.useMemo(()=>[...ae].reverse(),[ae]),Gt=y.useMemo(()=>{const N=new Map,D=St??mh;return g.forEach(z=>{var le;const ie=z.layerId??D;N.has(ie)||N.set(ie,[]),(le=N.get(ie))==null||le.push(z)}),N},[St,g]);y.useEffect(()=>{Xt||(st(!1),Re(!1)),ft||gt(!1)},[Xt,ft]);const qt=y.useMemo(()=>{const N=new Map;return O1.forEach(D=>{D.tiles.forEach(z=>{N.set(z.id,z)})}),N},[]),mt=y.useCallback(()=>{const N=[];for(let D=0;D<f;D+=1)for(let z=0;z<h;z+=1)N.push({x:z,y:D});return N},[h,f]),[vt,Ut]=y.useState(()=>c.allowedSquareCells&&c.allowedSquareCells.length>0?c.allowedSquareCells:mt()),Cr=y.useMemo(()=>new Set(vt.map(N=>`${N.x},${N.y}`)),[vt]),zn=y.useMemo(()=>{if(!vt.length)return null;let N=Number.POSITIVE_INFINITY,D=Number.POSITIVE_INFINITY,z=Number.NEGATIVE_INFINITY,ie=Number.NEGATIVE_INFINITY;return vt.forEach(le=>{const de=le.x*p,Ge=le.y*p;N=Math.min(N,de),D=Math.min(D,Ge),z=Math.max(z,de+p),ie=Math.max(ie,Ge+p)}),{minX:N,minY:D,maxX:z,maxY:ie,width:z-N,height:ie-D}},[vt,p]),Un=y.useMemo(()=>{if(!vt.length)return[];const N=new Set(vt.map(z=>`${z.x},${z.y}`)),D=[];return vt.forEach(z=>{const ie=z.x*p,le=z.y*p;N.has(`${z.x},${z.y-1}`)||D.push({x1:ie,y1:le,x2:ie+p,y2:le}),N.has(`${z.x+1},${z.y}`)||D.push({x1:ie+p,y1:le,x2:ie+p,y2:le+p}),N.has(`${z.x},${z.y+1}`)||D.push({x1:ie+p,y1:le+p,x2:ie,y2:le+p}),N.has(`${z.x-1},${z.y}`)||D.push({x1:ie,y1:le+p,x2:ie,y2:le})}),D},[vt,p]),qr=y.useRef(null),kr=y.useRef(null),io=y.useRef(null),Ol=y.useRef(!1),Ir=y.useRef(null),fr=y.useRef(!1),ui=y.useRef({x:0,y:0}),Xn=y.useRef(V),Er=y.useRef(null),so=y.useRef(null),jo=y.useRef(!1),_a=y.useRef(new Map),Di=y.useRef(null),Yr=y.useRef(null),Or=y.useRef(null),rs=y.useRef(!1),As=y.useRef(!1),bi=y.useRef(!1),ci=y.useRef(null),tn=y.useRef(r==null?void 0:r.id);y.useEffect(()=>{_e.current=ae},[ae]),y.useEffect(()=>{at.current=X},[X]),y.useEffect(()=>{Ce.current=Le},[Le]),y.useEffect(()=>{Oe.current=ve},[ve]),y.useEffect(()=>{Ne.current=De},[De]),y.useEffect(()=>{yt.current=Ie},[Ie]);const Yt=y.useCallback(async()=>{if(rs.current||!Di.current)return;const N=Di.current;Di.current=null,rs.current=!0;let D=!1;try{await l(N)}catch(z){console.error("Failed to save battle map",z),D=!0}finally{rs.current=!1,Di.current?Yt():D||(As.current=!1)}},[l]),sn=y.useCallback((N,D,z)=>{As.current=!0,Di.current={gridType:"square",gridColumns:h,gridRows:f,cellSize:p,gridLineColor:Ne.current||void 0,gridBorderColor:yt.current||void 0,gridLineWidth:Ce.current,gridBorderWidth:Oe.current,widgets:N,allowedSquareCells:D,layers:(z==null?void 0:z.layers)??_e.current,activeLayerId:(z==null?void 0:z.activeLayerId)??at.current,version:i.version,updated_at:i.updated_at},Yr.current&&clearTimeout(Yr.current),Yr.current=setTimeout(()=>{Yr.current=null,Yt()},80)},[p,i.updated_at,i.version,Yt,h,f]),Rt=y.useCallback((N,D=X)=>{me(N),ye(D),sn(g,vt,{layers:N,activeLayerId:D})},[X,vt,sn,g]),on=y.useCallback(()=>{sn(g,vt)},[vt,sn,g]),Dr=y.useCallback(()=>{Or.current&&clearTimeout(Or.current),Or.current=setTimeout(()=>{Or.current=null,on()},250)},[on]);y.useEffect(()=>{const N=(r==null?void 0:r.id)&&(r==null?void 0:r.id)!==tn.current;if(i.gridType!=="square")return;const D=i.version??0;(N||!bi.current||!As.current&&D>=(ci.current??-1))&&(v(i.widgets??[]),me(i.layers&&i.layers.length>0?i.layers:[{id:mh,name:"Grid Map Layer",kind:"grid",visible:!0}]),ye(i.activeLayerId??mh),i.allowedSquareCells&&i.allowedSquareCells.length>0?Ut(i.allowedSquareCells):(N||!bi.current)&&Ut(mt()),fe(Number.isFinite(i.gridLineWidth)?Number(i.gridLineWidth):mn.gridLineWidth??1),Ae(Number.isFinite(i.gridBorderWidth)?Number(i.gridBorderWidth):mn.gridBorderWidth??2),Ue(i.gridLineColor??""),ze(i.gridBorderColor??""),bi.current=!0,ci.current=D,tn.current=r==null?void 0:r.id)},[mt,i,r==null?void 0:r.id]),y.useEffect(()=>()=>{Yr.current&&clearTimeout(Yr.current),Or.current&&clearTimeout(Or.current)},[]);const Vn=y.useCallback((N,D=Xn.current)=>{ui.current=N,so.current={pan:N,scale:D},kr.current&&kr.current.setAttribute("transform",`translate(${N.x} ${N.y}) scale(${D})`),Er.current===null&&(Er.current=requestAnimationFrame(()=>{Er.current=null;const z=so.current;!z||!kr.current||kr.current.setAttribute("transform",`translate(${z.pan.x} ${z.pan.y}) scale(${z.scale})`)}))},[]),Cn=y.useCallback((N,D)=>{Vn(N,D??Xn.current),Z(N)},[Vn]);y.useEffect(()=>()=>{Er.current!==null&&cancelAnimationFrame(Er.current)},[]),y.useLayoutEffect(()=>{Xn.current=V,Vn(ui.current,V)},[V,Vn]),y.useLayoutEffect(()=>{ui.current=B,Vn(B,Xn.current)},[B,Vn]);const Ht=y.useCallback((N,D)=>{var de;const z=(de=qr.current)==null?void 0:de.getBoundingClientRect();if(!z)return null;const ie=ui.current,le=Xn.current;return{x:(N-z.left-ie.x)/le,y:(D-z.top-ie.y)/le}},[]),Pn=y.useCallback((N,D)=>({x:Math.floor(N/p),y:Math.floor(D/p)}),[p]),Ln=y.useCallback((N,D,z)=>{const ie=[];for(let le=0;le<Math.max(1,D);le+=1)for(let de=0;de<Math.max(1,z);de+=1)ie.push({x:N.x+le,y:N.y+de});return ie},[]),Si=y.useCallback((N,D,z)=>Ln(N,D,z).every(le=>Cr.has(`${le.x},${le.y}`)),[Cr,Ln]),di=y.useCallback((N,D,z,ie)=>{const le=Math.max(1,D),de=Math.max(1,z);return g.find(Ge=>{if(ie&&Ge.id===ie)return!1;const $e=Math.max(1,Ge.w??1),Ve=Math.max(1,Ge.h??1),Bt=N.x<Ge.x+$e&&N.x+le>Ge.x,Wt=N.y<Ge.y+Ve&&N.y+de>Ge.y;return Bt&&Wt})},[g]),pr=y.useCallback((N,D)=>{const z=Math.max(1,N.w??1),ie=Math.max(1,N.h??1);return D.x>=N.x&&D.x<N.x+z&&D.y>=N.y&&D.y<N.y+ie},[]),Io=y.useCallback(N=>{if(!be||!nt||!ft||!X)return;const D=qt.get(nt);if(!D)return;const z=Math.max(1,D.cols??1),ie=Math.max(1,D.rows??1);if(!Si(N,z,ie))return;const le=`${N.x}-${N.y}`;if(zt.current===le)return;const de=($e,Ve,Bt,Wt)=>{const Wn=Math.max(1,$e.w??1),Zn=Math.max(1,$e.h??1),Qn=Ve.x<$e.x+Wn&&Ve.x+Bt>$e.x,xn=Ve.y<$e.y+Zn&&Ve.y+Wt>$e.y;return Qn&&xn};let Ge=!1;v($e=>{const Ve=$e.find(Wn=>de(Wn,N,z,ie));if(Ve){if((Ve.layerId??St)!==X||$e.find(xn=>xn.id!==Ve.id&&de(xn,N,z,ie)))return $e;const Qn=$e.map(xn=>xn.id===Ve.id?{...xn,x:N.x,y:N.y,w:z,h:ie,tileId:D.id,appearance:{backgroundImageUrl:D.image}}:xn);return sn(Qn,vt),Ge=!0,Qn}const Bt={id:hr(),x:N.x,y:N.y,w:z,h:ie,content:"",layerId:X,tileId:D.id,appearance:{backgroundImageUrl:D.image}},Wt=[...$e,Bt];return sn(Wt,vt),Ge=!0,Wt}),zt.current=le,Ge&&j("Painted tile.")},[X,vt,St,be,Si,ft,sn,nt,qt]),is=y.useCallback(N=>N.type==="palette"?{cols:N.tile.cols??1,rows:N.tile.rows??1}:{cols:N.widget.w??1,rows:N.widget.h??1},[]),oo=y.useCallback(N=>{var de;const D=(de=qr.current)==null?void 0:de.getBoundingClientRect();if(!D||!zn)return;const z=N??V,ie=zn.minX+zn.width/2,le=zn.minY+zn.height/2;Cn({x:D.width/2-ie*z,y:D.height/2-le*z})},[Cn,zn,V]),Kr=y.useCallback(N=>{const D=g.filter(z=>z.id!==N);v(D),sn(D,vt),b(null),j("Tile deleted.")},[vt,sn,g]),Ci=y.useCallback((N,D)=>{if(N===void 0||D===void 0)return;const z=Ht(N,D);if(!z)return;const ie=Pn(z.x,z.y),le=g.find(de=>de.x===ie.x&&de.y===ie.y);le&&Kr(le.id)},[Kr,Pn,Ht,g]),Fi=y.useCallback((N,D)=>{if(N===void 0||D===void 0)return;const z=Ht(N,D);if(!z)return;const ie=Pn(z.x,z.y),le=`${ie.x},${ie.y}`;Et.current!==le&&(Et.current=le,Ut(de=>{if(de.some(Ve=>Ve.x===ie.x&&Ve.y===ie.y))return de;const $e=[...de,ie];return j("Grid cell added (saving...)."),sn(g,$e),$e}))},[Pn,sn,Ht,g]),ss=y.useCallback((N,D)=>{if(N===void 0||D===void 0)return;const z=Ht(N,D);if(!z)return;const ie=Pn(z.x,z.y),le=`${ie.x},${ie.y}`;Et.current!==le&&(Et.current=le,Ut(de=>{if(!de.some(Ve=>Ve.x===ie.x&&Ve.y===ie.y))return de;const $e=de.filter(Ve=>Ve.x!==ie.x||Ve.y!==ie.y);return v(Ve=>{const Bt=Ve.filter(Wt=>!pr(Wt,ie));return C&&Ve.some(Wt=>Wt.id===C)&&(Bt.some(Wn=>Wn.id===C)||b(null)),j("Grid cell removed (saving...)."),sn(Bt,$e),Bt}),$e}))},[pr,Pn,sn,C,Ht]),Ns=y.useCallback((N,D)=>{const z=io.current;if(!z||N===void 0||D===void 0)return!1;const ie=z.getBoundingClientRect();return N>=ie.left&&N<=ie.right&&D>=ie.top&&D<=ie.bottom},[]),ba=y.useCallback((N,D)=>{const z=Ns(N,D);return Ol.current=z,we(z),z},[Ns]);y.useEffect(()=>{const N=()=>{var z;((z=qr.current)==null?void 0:z.getBoundingClientRect())&&zn&&(jo.current||(oo(),jo.current=!0))};return N(),window.addEventListener("resize",N),()=>window.removeEventListener("resize",N)},[zn,oo]),y.useEffect(()=>{const N=z=>{z.code==="Space"&&G(!0),(z.key==="Delete"||z.key==="Backspace")&&C&&(z.preventDefault(),Kr(C))},D=z=>{z.code==="Space"&&(G(!1),O(!1))};return window.addEventListener("keydown",N),window.addEventListener("keyup",D),()=>{window.removeEventListener("keydown",N),window.removeEventListener("keyup",D)}},[Kr,C]),y.useEffect(()=>{const N=D=>{if(D.code!=="Space")return;const z=document.activeElement;!z||!z.closest(".battlemap-workspace")||!z.closest('button, [role="button"]')||D.preventDefault()};return window.addEventListener("keydown",N,{capture:!0}),()=>{window.removeEventListener("keydown",N,{capture:!0})}},[]),y.useEffect(()=>{be||(xt(!1),lt(null),zt.current=null)},[be]),y.useEffect(()=>{Fe||At(!1),Ye||pe(!1),!Fe&&!Ye&&(rt(null),ht(null),Et.current=null)},[Fe,Ye]),y.useEffect(()=>{if(!_)return;const N=z=>{A({x:z.clientX,y:z.clientY});const ie=Ht(z.clientX,z.clientY);if(!ie){k(null),re(!1),ba(z.clientX,z.clientY);return}const le=Pn(ie.x,ie.y),de=is(_),Ge=Si(le,de.cols,de.rows),$e=di(le,de.cols,de.rows,(_==null?void 0:_.type)==="widget"?_.widget.id:void 0);k(le),re(Ge&&!$e),ba(z.clientX,z.clientY)},D=z=>{A({x:z.clientX,y:z.clientY});const ie=ba(z.clientX,z.clientY),le=Ht(z.clientX,z.clientY),de=le?Pn(le.x,le.y):x,Ge=_?is(_):{cols:1,rows:1},$e=de?Si(de,Ge.cols,Ge.rows):!1,Ve=de?di(de,Ge.cols,Ge.rows,(_==null?void 0:_.type)==="widget"?_.widget.id:void 0):void 0;if(ie&&(_==null?void 0:_.type)==="widget")Kr(_.widget.id);else if(de&&$e)if(_.type==="palette")if(!ft||!X)j("Select a Tile Layer to place tiles.");else if(Ve)j("That placement overlaps another tile.");else{const Bt={id:hr(),x:de.x,y:de.y,w:Ge.cols,h:Ge.rows,content:"",layerId:X,tileId:_.tile.id,appearance:{backgroundImageUrl:_.tile.image}},Wt=[...g,Bt];v(Wt),sn(Wt,vt),j("Placed tile on grid.")}else{const Bt=R??_.widget,Wt=Bt.x===de.x&&Bt.y===de.y;if(Ve)j("That spot is already occupied.");else if(!Wt){const Wn=g.map(Zn=>Zn.id===_.widget.id?{...Zn,x:de.x,y:de.y}:Zn);v(Wn),sn(Wn,vt),j("Moved tile.")}}else de&&!$e?j("Tile does not fit in the grid here."):_.type==="widget"?j("Outside the grid. Returning tile to its spot."):_.type==="palette"&&j("Drop tiles inside the grid.");T(null),L(null),k(null),re(!1),A(null),we(!1),Ol.current=!1};return window.addEventListener("mousemove",N),window.addEventListener("mouseup",D),()=>{window.removeEventListener("mousemove",N),window.removeEventListener("mouseup",D),he(!1)}},[X,vt,_,R,x,Kr,Si,ft,sn,Pn,di,is,he,Ht,ba,g]);const Sa=y.useCallback(N=>{q&&(N.preventDefault(),O(!0),fr.current=!0,Ir.current={x:N.clientX,y:N.clientY,panX:ui.current.x,panY:ui.current.y})},[q]),Ca=y.useCallback(N=>{if(!fr.current||!Ir.current)return;const D=N.clientX-Ir.current.x,z=N.clientY-Ir.current.y;Vn({x:Ir.current.panX+D,y:Ir.current.panY+z},Xn.current)},[Vn]),os=y.useCallback(()=>{O(!1),fr.current=!1,Ir.current=null,Z(ui.current)},[]);y.useEffect(()=>{if(!te)return;const N=z=>{if(!fr.current||!Ir.current)return;const ie=z.clientX-Ir.current.x,le=z.clientY-Ir.current.y;Vn({x:Ir.current.panX+ie,y:Ir.current.panY+le},Xn.current)},D=()=>{os()};return window.addEventListener("mousemove",N),window.addEventListener("mouseup",D),()=>{window.removeEventListener("mousemove",N),window.removeEventListener("mouseup",D)}},[te,Vn,os]);const Oo=y.useCallback(N=>{ue&&(N.preventDefault(),he(!0),Ci(N.clientX,N.clientY))},[Ci,ue]),Nd=y.useCallback(N=>{!ue||!qe||(N.preventDefault(),Ci(N.clientX,N.clientY))},[Ci,qe,ue]),Do=y.useCallback(()=>{ue&&he(!1)},[ue]),Vt=y.useCallback((N,D)=>{if(N===void 0||D===void 0||!Fe&&!Ye)return;const z=Ht(N,D);if(!z){rt(null),ht(null);return}const ie=Pn(z.x,z.y),le=`${ie.x},${ie.y}`;if(Fe&&!Cr.has(le)){rt(ie),ht("expand");return}if(Ye&&Cr.has(le)){rt(ie),ht("shrink");return}rt(null),ht(null)},[Cr,Fe,Ye,Pn,Ht]),Ou=y.useCallback((N,D)=>{Fe&&(Et.current=null,At(!0),Fi(N,D))},[Fi,Fe]),ka=y.useCallback((N,D)=>{!Fe||!wt||Fi(N,D)},[Fi,Fe,wt]),Ea=y.useCallback(()=>{wt&&(At(!1),Et.current=null)},[wt]),jd=y.useCallback((N,D)=>{Ye&&(Et.current=null,pe(!0),ss(N,D))},[Ye,ss]),Id=y.useCallback((N,D)=>{!Ye||!Te||ss(N,D)},[Ye,Te,ss]),Mn=y.useCallback(()=>{Te&&(pe(!1),Et.current=null)},[Te]),Ra=y.useCallback(N=>{var de;N.preventDefault();const D=.0015,z=Math.min(10,Math.max(.1,Xn.current*Math.exp(-N.deltaY*D))),ie=(de=qr.current)==null?void 0:de.getBoundingClientRect();if(!ie){U(z),Xn.current=z,Vn(ui.current,z);return}const le=Ht(N.clientX,N.clientY);if(U(z),Xn.current=z,le){const Ge=N.clientX-ie.left,$e=N.clientY-ie.top;Cn({x:Ge-le.x*z,y:$e-le.y*z},z)}},[Cn,Vn,Ht]);y.useEffect(()=>{const N=qr.current;if(!N)return;const D=z=>{Ra(z)};return N.addEventListener("wheel",D,{passive:!1}),()=>{N.removeEventListener("wheel",D)}},[Ra,s]);const Du=y.useCallback((N,D)=>{if(D.preventDefault(),!!ft){if(be){lt(N.id),j(`Draw mode: ${N.label} selected.`);return}T({type:"palette",tile:N}),j(null)}},[be,ft]),Ta=y.useCallback((N,D)=>{const z=N.layerId??St;if(!(!ft||z!==X)&&!(q||be)){if(D.preventDefault(),ue){Kr(N.id);return}b(N.id),T({type:"widget",widget:N}),L({x:N.x,y:N.y}),A({x:D.clientX,y:D.clientY}),j(null)}},[X,St,Kr,ue,be,q,ft]),as=y.useCallback((N,D)=>{if(!be||q||!ft)return;if(!nt){j("Select a tile to draw.");return}if(N===void 0||D===void 0)return;const z=Ht(N,D);if(!z)return;zt.current=null;const ie=Pn(z.x,z.y);Io(ie),xt(!0)},[be,q,ft,Io,Pn,nt,Ht]),Pa=y.useCallback((N,D)=>{if(!be||!Ke||N===void 0||D===void 0)return;const z=Ht(N,D);if(!z)return;const ie=Pn(z.x,z.y);Io(ie)},[be,Ke,Io,Pn,Ht]),sr=y.useCallback(()=>{Ke&&(xt(!1),zt.current=null)},[Ke]),Fu=y.useMemo(()=>{var N,D;return _?_.type==="palette"?_.tile.image:((N=qt.get(_.widget.tileId??""))==null?void 0:N.image)??((D=_.widget.appearance)==null?void 0:D.backgroundImageUrl)??null:null},[_,qt]),Od=y.useMemo(()=>({"--grid-line-color":De||void 0,"--grid-border-color":Ie||void 0,"--grid-line-width":`${Le}px`,"--grid-border-width":`${ve}px`}),[Ie,ve,De,Le]),gr=y.useCallback(()=>{var le;const N=(le=qr.current)==null?void 0:le.closest(".square-workspace"),D=getComputedStyle(N||document.documentElement),z=parseFloat(D.getPropertyValue("--grid-line-width")),ie=parseFloat(D.getPropertyValue("--grid-border-width"));return{background:D.getPropertyValue("--bg").trim()||"#0f172a",gridLine:D.getPropertyValue("--grid-line-color").trim()||"#e2e8f0",gridBorder:D.getPropertyValue("--grid-border-color").trim()||"#f8fafc",gridLineWidth:Number.isFinite(z)?z:1,gridBorderWidth:Number.isFinite(ie)?ie:2}},[]),Bi=y.useMemo(()=>De||oP(gr().gridLine,"#94a3b8"),[gr,De]),Fo=y.useMemo(()=>Ie||oP(gr().gridBorder,"#94a3b8"),[gr,Ie]),La=sP(ve,F1,B1),F=sP(Le,$1,z1),H=y.useCallback(async N=>{if(!zn){j("Grid not ready to export.");return}try{const D=Math.max(12,p*.25),z=zn.minX-D,ie=zn.minY-D,le=zn.width+D*2,de=zn.height+D*2,{background:Ge,gridBorder:$e,gridLine:Ve,gridBorderWidth:Bt,gridLineWidth:Wt}=gr(),Wn=new Map;await Promise.all(g.map(async pn=>{var or,ao;const hn=((or=qt.get(pn.tileId??""))==null?void 0:or.image)??((ao=pn.appearance)==null?void 0:ao.backgroundImageUrl)??void 0;if(!hn||Wn.has(hn))return;const nn=await Kj(hn,_a.current);Wn.set(hn,nn)}));const Zn=[];Zn.push(`<svg xmlns="http://www.w3.org/2000/svg" width="${le}" height="${de}" viewBox="${z} ${ie} ${le} ${de}" fill="none">`),[...ae].reverse().forEach(pn=>{pn.visible&&(pn.kind==="tiles"&&(Gt.get(pn.id)??[]).forEach(nn=>{var Uo,Ma;const or=nn.x*p,ao=nn.y*p,$o=(nn.w??1)*p,Bl=(nn.h??1)*p,Is=((Uo=qt.get(nn.tileId??""))==null?void 0:Uo.image)??((Ma=nn.appearance)==null?void 0:Ma.backgroundImageUrl)??"",zo=Is?Wn.get(Is)??Is:"";zo?Zn.push(`<image href="${zo}" x="${or}" y="${ao}" width="${$o}" height="${Bl}" preserveAspectRatio="xMidYMid slice" />`):Zn.push(`<rect x="${or}" y="${ao}" width="${$o}" height="${Bl}" fill="#d0d0d0" />`)}),pn.kind==="grid"&&(vt.forEach(hn=>{const nn=hn.x*p,or=hn.y*p;Zn.push(`<rect x="${nn}" y="${or}" width="${p}" height="${p}" fill="none" stroke="${Ve}" stroke-width="${Wt}" />`)}),Un.forEach(hn=>{Zn.push(`<line x1="${hn.x1}" y1="${hn.y1}" x2="${hn.x2}" y2="${hn.y2}" stroke="${$e}" stroke-width="${Bt}" stroke-linecap="round" stroke-linejoin="round" />`)})))}),Zn.push("</svg>");const xn=Zn.join(""),an=new Blob([xn],{type:"image/svg+xml;charset=utf-8"}),js=URL.createObjectURL(an),Hn=await Xj(js),Xr=document.createElement("canvas");Xr.width=Math.ceil(le),Xr.height=Math.ceil(de);const Bo=Xr.getContext("2d");if(!Bo){URL.revokeObjectURL(js),j("Unable to export: canvas not available.");return}Bo.fillStyle=Ge,Bo.fillRect(0,0,Xr.width,Xr.height),Bo.drawImage(Hn,0,0,Xr.width,Xr.height),URL.revokeObjectURL(js);const Dl=N==="png"?"image/png":"image/jpeg",Fl=N==="jpeg"?.92:void 0,Jn=Xr.toDataURL(Dl,Fl);Zj(Jn,`battle-map.${N==="png"?"png":"jpg"}`),j(`Saved battle map as ${N.toUpperCase()}.`)}catch(D){console.error("Export failed",D),j("Failed to export battle map.")}},[vt,p,zn,Un,ae,qt,Gt]);return s?w.jsx("div",{className:"battlemap-workspace__loading",children:w.jsx("p",{className:"battlemap-workspace__loading-text",children:"Loading battle map..."})}):!r||a?w.jsxs("div",{className:"battlemap-workspace__error",children:[w.jsx("p",{className:"battlemap-workspace__error-text",children:a??"Battle map not found."}),w.jsx("button",{className:"button button--ghost battlemap-workspace__error-button",onClick:()=>n("/app"),children:"Back to Projects"})]}):w.jsxs("div",{className:`battlemap-workspace square-workspace${ue?" is-delete-mode":""}`,style:Od,children:[w.jsxs("div",{className:"battlemap-workspace__sidebar square-workspace__sidebar",children:[w.jsxs("div",{className:"battlemap-workspace__sidebar-header",children:[w.jsx("button",{className:"button button--ghost battlemap-workspace__back-button",onClick:()=>n("/app"),children:"Back to Projects"}),w.jsx("h2",{className:"battlemap-workspace__project-name",children:r.name})]}),w.jsxs("div",{className:"battlemap-workspace__sidebar-actions",children:[w.jsx("button",{type:"button",className:"button button--ghost battlemap-workspace__reset-button",onClick:()=>{U(1),jo.current=!1,oo(1),jo.current=!0},children:"Reset View"}),w.jsxs("div",{className:"battlemap-workspace__export-actions",children:[w.jsx("button",{type:"button",className:"button battlemap-workspace__export-button",onClick:()=>H("png"),children:"Save Battle Map (PNG)"}),w.jsx("button",{type:"button",className:"button button--ghost battlemap-workspace__export-button",onClick:()=>H("jpeg"),children:"Save Battle Map (JPEG)"})]})]}),w.jsxs("p",{className:"battlemap-workspace__hint battlemap-workspace__autosave",children:["Auto-save: ",o?"Saving...":"Synced"]}),$?w.jsx("p",{className:"square-workspace__status",children:$}):null]}),w.jsx("div",{className:"battlemap-workspace__main square-workspace__main",children:w.jsxs("div",{ref:qr,className:`battlemap-workspace__viewport square-workspace__viewport${q?" is-space-held":""}${te?" is-panning":""}${Fe?" is-expand-mode":""}${Ye?" is-shrink-mode":""}`,onMouseDown:N=>{q?Sa(N):be?as(N.clientX,N.clientY):Fe?Ou(N.clientX,N.clientY):Ye?jd(N.clientX,N.clientY):ue?Oo(N):Sa(N)},onMouseMove:N=>{(Fe||Ye)&&Vt(N.clientX,N.clientY),te?Ca(N):be&&Ke?Pa(N.clientX,N.clientY):Fe?ka(N.clientX,N.clientY):Ye?Id(N.clientX,N.clientY):ue?Nd(N):Ca(N)},onMouseUp:N=>{te?os():be&&Ke?sr():Fe?Ea():Ye?Mn():ue?Do():os()},onMouseLeave:()=>{te?os():be&&Ke?sr():Fe?(Ea(),rt(null),ht(null)):Ye?(Mn(),rt(null),ht(null)):ue?Do():os()},children:[w.jsx("svg",{className:"square-workspace__surface",children:w.jsxs("g",{ref:kr,transform:`translate(${B.x} ${B.y}) scale(${V})`,children:[ln.map(N=>{if(!N.visible)return null;if(N.kind==="grid")return w.jsxs("g",{"data-layer":"grid",children:[vt.map(D=>{const z=D.x*p,ie=D.y*p;return w.jsx("rect",{className:"square-workspace__cell",x:z,y:ie,width:p,height:p},`${D.x}-${D.y}`)}),Un.map((D,z)=>w.jsx("line",{className:"square-workspace__grid-boundary",x1:D.x1,y1:D.y1,x2:D.x2,y2:D.y2},`boundary-${z}`))]},N.id);if(N.kind==="tiles"){const D=Gt.get(N.id)??[];return D.length?w.jsx("g",{"data-layer":"tiles",children:D.map(z=>{var Bt,Wt;const ie=z.x*p,le=z.y*p,de=qt.get(z.tileId??""),Ge=p*(z.w??1),$e=p*(z.h??1),Ve=(_==null?void 0:_.type)==="widget"&&_.widget.id===z.id;return w.jsxs("g",{className:`square-workspace__tile${Ve?" is-drag-origin":""}`,onMouseDown:Wn=>Ta(z,Wn),children:[de||(Bt=z.appearance)!=null&&Bt.backgroundImageUrl?w.jsx("image",{href:(de==null?void 0:de.image)??((Wt=z.appearance)==null?void 0:Wt.backgroundImageUrl),x:ie,y:le,width:Ge,height:$e,preserveAspectRatio:"xMidYMid slice"}):w.jsx("rect",{x:ie,y:le,width:Ge,height:$e,fill:"#d0d0d0"}),w.jsx("rect",{className:"square-workspace__tile-border",x:ie,y:le,width:Ge,height:$e})]},z.id)})},N.id):null}return null}),Ft&&x&&xe&&_?w.jsx("rect",{className:"square-workspace__hover",x:x.x*p,y:x.y*p,width:p*is(_).cols,height:p*is(_).rows}):null,Ft&&Lt&&Nt==="expand"?w.jsx("rect",{className:"square-workspace__expand-preview",x:Lt.x*p,y:Lt.y*p,width:p,height:p}):null,Ft&&Lt&&Nt==="shrink"?w.jsx("rect",{className:"square-workspace__shrink-preview",x:Lt.x*p,y:Lt.y*p,width:p,height:p}):null]})}),w.jsx("div",{id:"trash-dropzone",ref:io,className:`battlemap-delete-panel${ge?" is-active":""}${ue?" is-toggle-active":""}`,"aria-label":"Drop tiles here to delete them",role:"presentation",onClick:()=>{ke(N=>{const D=!N;return D?(st(!1),gt(!1),Re(!1),j("Delete mode enabled.")):j("Delete mode disabled."),he(!1),D})},children:w.jsx("span",{className:"battlemap-delete-panel__icon","aria-hidden":!0})}),_&&M&&Fu?w.jsx("div",{className:"square-workspace__drag-preview",style:{left:`${M.x}px`,top:`${M.y}px`,transform:"translate(-50%, -50%)",width:`${p*(_.type==="palette"?_.tile.cols:_.widget.w??1)*V}px`,height:`${p*(_.type==="palette"?_.tile.rows:_.widget.h??1)*V}px`},children:w.jsx("img",{src:Fu,alt:"Drag preview",style:{width:"100%",height:"100%",objectFit:"cover",pointerEvents:"none"}})}):null]})}),w.jsxs("div",{className:"battlemap-workspace__right-sidebar",children:[w.jsx(Qj,{layers:ae,activeLayerId:X,onActiveLayerChange:N=>{Rt(ae,N)},onToggleVisibility:N=>{const D=ae.map(z=>z.id===N?{...z,visible:!z.visible}:z);Rt(D)},onAddLayer:N=>{const D=(()=>N==="grid"?"Grid Layer":N==="tiles"?"Tile Layer":N==="image"?"Image Layer":N==="background"?"Background Layer":"Layer")(),z=ae.filter(de=>de.kind==="tiles").length,ie={id:crypto.randomUUID(),name:N==="tiles"?`${D} ${z+1}`:`${D} ${ae.length}`,kind:N,visible:!0};let le=[...ae];if(N==="tiles"){const de=ae.findIndex($e=>$e.kind==="grid"),Ge=de>=0?de+1:0;le=[...ae.slice(0,Ge),ie,...ae.slice(Ge)]}else le=[...ae,ie];Rt(le,ie.id)},onRenameLayer:(N,D)=>{const z=ae.map(ie=>ie.id===N?{...ie,name:D}:ie);Rt(z)},onMoveLayerUp:N=>{const D=ae.findIndex(ie=>ie.id===N);if(D<=0)return;const z=[...ae];[z[D-1],z[D]]=[z[D],z[D-1]],Rt(z)},onMoveLayerDown:N=>{const D=ae.findIndex(ie=>ie.id===N);if(D<0||D>=ae.length-1)return;const z=[...ae];[z[D+1],z[D]]=[z[D],z[D+1]],Rt(z)},onDeleteLayer:N=>{var de,Ge;const D=ae.find($e=>$e.id===N);if(!D||D.kind==="grid"||D.kind==="tiles"&&ae.filter(Ve=>Ve.kind==="tiles").length<=1||ae.length<=1)return;const z=ae.filter($e=>$e.id!==N),ie=ae.findIndex($e=>$e.id===N),le=X===N?((de=z[Math.max(0,ie-1)])==null?void 0:de.id)??((Ge=z[0])==null?void 0:Ge.id):X;if(D.kind==="tiles"){const $e=g.filter(Ve=>(Ve.layerId??St)!==N);v($e),me(z),ye(le),sn($e,vt,{layers:z,activeLayerId:le});return}Rt(z,le)},onReorderLayers:N=>{Rt(N)}}),w.jsxs("div",{className:"battlemap-workspace__control-section battlemap-workspace__control-section--compact",children:[w.jsx("h3",{className:"battlemap-workspace__control-title",children:"Grid Properties"}),Xt?w.jsxs(w.Fragment,{children:[w.jsxs("div",{className:"battlemap-grid-toggle-row",children:[w.jsx("button",{type:"button",className:`button button--ghost battlemap-grid-toggle${Fe?" is-active":""}`,onClick:()=>{st(N=>{const D=!N;return D?(ke(!1),gt(!1),Re(!1),j("Expand Grid Mode enabled. Click or drag to add cells.")):j("Expand Grid Mode disabled."),D})},onKeyDown:N=>{N.code==="Space"&&N.preventDefault()},children:"Expand"}),w.jsx("button",{type:"button",className:`button button--ghost battlemap-grid-toggle${Ye?" is-active":""}`,onClick:()=>{Re(N=>{const D=!N;return D?(ke(!1),gt(!1),st(!1),j("Decrease Grid Mode enabled. Click or drag to remove cells.")):j("Decrease Grid Mode disabled."),D})},onKeyDown:N=>{N.code==="Space"&&N.preventDefault()},children:"Decrease"})]}),w.jsx("h3",{className:"battlemap-workspace__control-title battlemap-grid-visuals-title",children:"Grid Visuals"}),w.jsxs("div",{className:"battlemap-grid-visual",children:[w.jsxs("div",{className:"battlemap-grid-visual__label-row",children:[w.jsx("span",{children:"Outer Border Thickness"}),w.jsxs("span",{className:"battlemap-grid-visual__value",children:[ve.toFixed(1),"px"]})]}),w.jsxs("div",{className:"battlemap-grid-slider-wrap",style:{"--tick-count":rP},children:[w.jsx("input",{type:"range",min:F1,max:B1,step:Jee,value:ve,onChange:N=>{const D=t_(Number(N.target.value),F1,B1);Ae(D),Oe.current=D},onPointerUp:on,onKeyUp:on,className:"battlemap-grid-slider","aria-label":"Outer border thickness"}),w.jsxs("output",{className:"battlemap-grid-slider__value",style:{left:`${La}%`},children:[ve.toFixed(1),"px"]}),w.jsx("div",{className:"battlemap-grid-slider__ticks","aria-hidden":!0,children:Array.from({length:rP}).map((N,D)=>w.jsx("span",{},`grid-border-tick-${D}`))})]}),w.jsx("input",{type:"color",value:Fo,onChange:N=>{const D=N.currentTarget.value;ze(D),yt.current=D,Dr()},className:"battlemap-grid-color","aria-label":"Outer border color"})]}),w.jsxs("div",{className:"battlemap-grid-visual",children:[w.jsxs("div",{className:"battlemap-grid-visual__label-row",children:[w.jsx("span",{children:"Inner Grid Thickness"}),w.jsxs("span",{className:"battlemap-grid-visual__value",children:[Le.toFixed(1),"px"]})]}),w.jsxs("div",{className:"battlemap-grid-slider-wrap",style:{"--tick-count":iP},children:[w.jsx("input",{type:"range",min:$1,max:z1,step:ete,value:Le,onChange:N=>{const D=t_(Number(N.target.value),$1,z1);fe(D),Ce.current=D},onPointerUp:on,onKeyUp:on,className:"battlemap-grid-slider","aria-label":"Inner grid thickness"}),w.jsxs("output",{className:"battlemap-grid-slider__value",style:{left:`${F}%`},children:[Le.toFixed(1),"px"]}),w.jsx("div",{className:"battlemap-grid-slider__ticks","aria-hidden":!0,children:Array.from({length:iP}).map((N,D)=>w.jsx("span",{},`grid-line-tick-${D}`))})]}),w.jsx("input",{type:"color",value:Bi,onChange:N=>{const D=N.currentTarget.value;Ue(D),Ne.current=D,Dr()},className:"battlemap-grid-color","aria-label":"Inner grid color"})]})]}):w.jsx("p",{className:"battlemap-workspace__hint",children:"Grid tools appear when the Grid Map Layer is active."}),w.jsx("p",{className:"battlemap-workspace__hint",children:"Hold space + drag to pan. Scroll to zoom. Drop tiles to snap to the grid. Occupied cells are swapped."})]}),w.jsxs("div",{className:"battlemap-workspace__control-section battlemap-workspace__tiles-panel--sidebar",children:[w.jsx("h3",{className:"battlemap-workspace__control-title",children:"Tiles"}),ft?w.jsxs(w.Fragment,{children:[w.jsx("div",{className:"battlemap-workspace__mode-toggle",children:w.jsx("button",{type:"button",className:`button ${be?"button--primary":"button--ghost"}`,onClick:()=>{gt(N=>{const D=!N;return D?(ke(!1),st(!1),Re(!1),j("Draw mode enabled. Pick a tile, then click or drag on the grid.")):j("Draw mode disabled."),D}),T(null),re(!1),zt.current=null},onKeyDown:N=>{N.code==="Space"&&N.preventDefault()},children:be?"Draw Mode: ON":"Draw Mode"})}),w.jsx("div",{className:"battlemap-workspace__tiles-scroll",children:O1.map(N=>w.jsxs("div",{className:`battlemap-workspace__tile-group${K[N.title]?" is-open":""}`,children:[w.jsxs("button",{type:"button",className:"battlemap-workspace__tile-group-toggle",onClick:()=>Y(D=>({...D,[N.title]:!D[N.title]})),"aria-expanded":K[N.title]??!1,"aria-controls":`tile-group-${N.title}`,children:[w.jsx("span",{className:"battlemap-workspace__tile-group-title",children:N.title}),w.jsx("span",{className:`battlemap-workspace__tile-group-chevron${K[N.title]?" is-open":""}`,"aria-hidden":!0})]}),w.jsx("div",{id:`tile-group-${N.title}`,className:`battlemap-workspace__widget-tray${K[N.title]?" is-open":""}`,role:"region","aria-label":`${N.title} tiles`,style:{"--tile-preview-columns":nP,"--tile-preview-scale":tP,"--widget-preview-scale":tP},children:tte(N.tiles).map(({tile:D,index:z})=>w.jsx("div",{className:"battlemap-workspace__widget-template-wrapper",style:{gridColumnEnd:`span ${D.cols}`,gridRowEnd:`span ${D.rows}`,"--tile-cols":D.cols,"--tile-rows":D.rows,justifySelf:D.cols>=nP?"stretch":"center"},children:w.jsx("div",{className:`battlemap-workspace__widget-template${be?" is-draw-mode":""}${nt===D.id?" is-selected":""}`,onMouseDown:ie=>Du(D,ie),"aria-label":`${D.label} tile`,style:{"--widget-bg-image":`url("${D.image}")`,"--tile-cols":D.cols,"--tile-rows":D.rows}})},`${D.id}-${z}`))})]},N.title))})]}):w.jsx("p",{className:"battlemap-workspace__hint",children:"Select a Tile Layer to browse and place tiles."})]})]})]})}const sa=t=>Number.isFinite(t)&&!Number.isNaN(t),v0=t=>typeof t=="object"&&t!==null,rte=t=>typeof t=="function",y0=t=>v0(t)&&sa(t.col)&&sa(t.row),ite=t=>v0(t)&&sa(t.x)&&sa(t.y),n_=t=>Array.isArray(t)&&sa(t[0])&&sa(t[1]),lv=(t,e)=>e+t*(e&1)>>1,r_=([t,e,n=-t-e])=>({q:t,r:e,s:n});function w0({q:t,r:e,s:n}){const r=sa(t),i=sa(e),s=sa(n);if(r&&i&&s)return{q:t,r:e,s:n};if(r&&i)return{q:t,r:e,s:-t-e};if(r&&s)return{q:t,r:-t-n,s:n};if(i&&s)return{q:-e-n,r:e,s:n};throw new TypeError(`Can't determine three cube coordinates from less than two coordinates. Received: { q: ${t}, r: ${e}, s: ${n} }.`)}var _s=(t=>(t.FLAT="FLAT",t.POINTY="POINTY",t))(_s||{});function ste(t,e){if(v0(t)&&t.xRadius>0&&t.yRadius>0)return t;if(v0(t)&&t.width>0&&t.height>0){const{width:n,height:r}=t;return e===_s.POINTY?{xRadius:n/Math.sqrt(3),yRadius:r/2}:{xRadius:n/2,yRadius:r/Math.sqrt(3)}}if(t>0)return{xRadius:t,yRadius:t};throw new TypeError(`Invalid dimensions: ${JSON.stringify(t)}. Dimensions must be expressed as an Ellipse ({ xRadius: number, yRadius: number }), a Rectangle ({ width: number, height: number }) or a number.`)}function ote(t,e){if(ite(t))return t;if(!e)throw new TypeError(`Supply a bounding box ({ width: number, height: number }). Received: ${JSON.stringify(e)}`);if(t==="topLeft")return{x:e.width*-.5,y:e.height*-.5};throw new TypeError(`Invalid origin: ${JSON.stringify(t)}. Origin must be expressed as a Point ({ x: number, y: number }) or the string 'topLeft'.`)}class HS{constructor(e=[0,0]){_t(this,"q");_t(this,"r");const{q:n,r}=i_(this,e);this.q=n,this.r=r}static get settings(){const{dimensions:e,orientation:n,origin:r,offset:i}=this.prototype;return{dimensions:e,orientation:n,origin:r,offset:i}}get center(){const{width:e,height:n,x:r,y:i}=this;return{x:e/2-r,y:n/2-i}}get col(){return aP(this).col}get corners(){const{orientation:e,width:n,height:r,x:i,y:s}=this;return e===_s.POINTY?ate(n,r,i,s):lte(n,r,i,s)}get dimensions(){return Mh.dimensions}get height(){const{orientation:e,dimensions:{yRadius:n}}=this;return e===_s.POINTY?n*2:n*Math.sqrt(3)}get isFlat(){return this.orientation===_s.FLAT}get isPointy(){return this.orientation===_s.POINTY}get orientation(){return Mh.orientation}get origin(){return Mh.origin}get offset(){return Mh.offset}get row(){return aP(this).row}get width(){const{orientation:e,dimensions:{xRadius:n}}=this;return e===_s.POINTY?n*Math.sqrt(3):n*2}get x(){return lP(this).x}get y(){return lP(this).y}get s(){return-this.q-this.r}clone(e=this){return new this.constructor(e)}equals(e){return ute(this,y0(e)?nI(this,e):e)}toString(){return`${this.constructor.name}(${this.q},${this.r})`}translate(e){return fte(this,e)}}const Mh={dimensions:{xRadius:1,yRadius:1},orientation:_s.POINTY,origin:{x:0,y:0},offset:-1},ate=(t,e,n,r)=>[{x:n+t*.5,y:r-e*.25},{x:n+t*.5,y:r+e*.25},{x:n,y:r+e*.5},{x:n-t*.5,y:r+e*.25},{x:n-t*.5,y:r-e*.25},{x:n,y:r-e*.5}],lte=(t,e,n,r)=>[{x:n+t*.25,y:r-e*.5},{x:n+t*.5,y:r},{x:n+t*.25,y:r+e*.5},{x:n-t*.25,y:r+e*.5},{x:n-t*.5,y:r},{x:n-t*.25,y:r-e*.5}];function Jj(t){const{dimensions:e,orientation:n,origin:r,offset:i}={...Mh,...t};return class extends HS{get dimensions(){return ste(e,n)}get orientation(){return n}get origin(){return ote(r,this)}get offset(){return i}}}function ute(t,e){if(y0(t)&&y0(e))return t.col===e.col&&t.row===e.row;if(Object.hasOwn(t,"col")||Object.hasOwn(e,"col"))throw new Error(`Can't compare coordinates where one are offset coordinates. Either pass two offset coordinates or two axial/cube coordinates. Received: ${JSON.stringify(t)} and ${JSON.stringify(e)}`);const n=n_(t)?r_(t):t,r=n_(e)?r_(e):e;return n.q===r.q&&n.r===r.r}const cte=(t,e,n)=>({col:t+lv(n,e),row:e}),dte=(t,e,n)=>({col:t,row:e+lv(n,t)}),aP=({q:t,r:e,offset:n,isPointy:r})=>r?cte(t,e,n):dte(t,e,n),lP=({orientation:t,dimensions:{xRadius:e,yRadius:n},origin:{x:r,y:i},q:s,r:o})=>t===_s.POINTY?{x:e*Math.sqrt(3)*(s+o/2)-r,y:n*3/2*o-i}:{x:e*3/2*s-r,y:n*Math.sqrt(3)*(o+s/2)-i},eI=(t,e,n)=>{const r=t-lv(n,e),i=e,s=-r-i;return{q:r,r:i,s}},tI=(t,e,n)=>{const r=t,i=e-lv(n,t),s=-r-i;return{q:r,r:i,s}},nI=({offset:t,orientation:e},{col:n,row:r})=>e===_s.POINTY?eI(n,r,t):tI(n,r,t),uP=t=>{const{q:e,r:n,s:r}=w0(t);let i=Math.round(e),s=Math.round(n),o=Math.round(r);const a=Math.abs(e-i),l=Math.abs(n-s),c=Math.abs(r-o);return a>l&&a>c?i=-s-o:l>c?s=-i-o:o=-i-s,{q:i,r:s,s:o}},hte=({dimensions:{xRadius:t,yRadius:e},origin:n,orientation:r},{x:i,y:s})=>(i+=n.x,s+=n.y,r===_s.POINTY?uP({q:Math.sqrt(3)*i/(3*t)-s/(3*e),r:2/3*(s/e)}):uP({q:2/3*(i/t),r:Math.sqrt(3)*s/(3*e)-i/(3*t)}));function i_(t,e){return n_(e)?r_(e):y0(e)?nI(t,e):w0(e)}function fte(t,e){const{q:n,r,s:i}=w0(t),{q:s,r:o,s:a}=w0(e),l={q:n+s,r:r+o,s:i+a};return t instanceof HS?t.clone(l):l}function cP(t,e,n){const{q:r,r:i,s}=i_(t,e),{q:o,r:a,s:l}=i_(t,n);return Math.max(Math.abs(r-o),Math.abs(i-a),Math.abs(s-l))}var Xs=(t=>(t[t.N=0]="N",t[t.NE=1]="NE",t[t.E=2]="E",t[t.SE=3]="SE",t[t.S=4]="S",t[t.SW=5]="SW",t[t.W=6]="W",t[t.NW=7]="NW",t))(Xs||{});const pte=[null,{q:1,r:-1},{q:1,r:0},{q:0,r:1},null,{q:-1,r:1},{q:-1,r:0},{q:0,r:-1}],gte=[{q:0,r:-1},{q:1,r:-1},null,{q:1,r:0},{q:0,r:1},{q:-1,r:1},null,{q:-1,r:0}],mte=({offset:t,q:e,r:n,col:r,row:i},s)=>{if(s===Xs.S||s===Xs.N){const a=s===Xs.S?i+1:i-1;return eI(r,a,t)}const o=pte[s];return{q:e+o.q,r:n+o.r}},vte=({offset:t,q:e,r:n,col:r,row:i},s)=>{if(s===Xs.E||s===Xs.W){const a=s===Xs.E?r+1:r-1;return tI(a,i,t)}const o=gte[s];return{q:e+o.q,r:n+o.r}},yte=(t,e)=>t.clone(t.isPointy?mte(t,e):vte(t,e));function wte(t){return Array.isArray(t)?function(e,n){const r=[];let i=n;for(const s of t)for(const o of s(e,i))r.push(i=o);return r}:t}Xs.E,Xs.N,Xs.S,Xs.W;var gs,Qa,hu,Ah,Bf,o_,$f,a_,zf,l_;const Jo=class Jo{constructor(e,n=[]){ql(this,hu);ql(this,Bf);ql(this,$f);ql(this,zf);ql(this,gs,void 0);ql(this,Qa,new Map);if(e instanceof Jo){oy(this,gs,zi(e,gs)),this.setHexes(e);return}oy(this,gs,e),this.setHexes(Bs(this,Bf,o_).call(this,n))}static fromIterable(e){const n=e[Symbol.iterator]().next().value;if(!n)throw new TypeError(`Can't create grid from empty iterable: ${JSON.stringify(e)}`);return new Jo(n.constructor,e)}static fromJSON({hexSettings:e,coordinates:n},r){if(r){const s=n.map(r),o=s.length>0?s[0].constructor:r({q:0,r:0},0,[{q:0,r:0}]).constructor;return new Jo(o,s)}const i=Jj(e);return new Jo(i,n.map(s=>new i(s)))}get size(){return zi(this,Qa).size}get pixelWidth(){if(this.size===0)return 0;const{isPointy:e,width:n}=this.hexPrototype,r=this.toArray(),{0:i,length:s,[s-1]:o}=e?r.sort((a,l)=>l.s-a.s||a.q-l.q):r.sort((a,l)=>a.q-l.q);return o.x-i.x+n}get pixelHeight(){if(this.size===0)return 0;const{isPointy:e,height:n}=this.hexPrototype,r=this.toArray(),{0:i,length:s,[s-1]:o}=e?r.sort((a,l)=>a.r-l.r):r.sort((a,l)=>l.s-a.s||a.r-l.r);return o.y-i.y+n}[Symbol.iterator](){return zi(this,Qa).values()}get hexPrototype(){return zi(this,gs).prototype}createHex(e){return new(zi(this,gs))(e)}getHex(e){const n=this.createHex(e);return zi(this,Qa).get(n.toString())}hasHex(e){return zi(this,Qa).has(e.toString())}setHexes(e){for(const n of e){const r=n instanceof HS?n:new(zi(this,gs))(n);Bs(this,hu,Ah).call(this,r)}return this}filter(e){var r;const n=new Jo(zi(this,gs));for(const i of this)e(i)&&Bs(r=n,hu,Ah).call(r,i);return n}map(e){var r;const n=new Jo(zi(this,gs));for(const i of this)Bs(r=n,hu,Ah).call(r,e(i));return n}traverse(e,{bail:n=!1}={}){var i;const r=new Jo(zi(this,gs));for(const s of Bs(this,Bf,o_).call(this,e)){const o=this.getHex(s);if(o)Bs(i=r,hu,Ah).call(i,o);else if(n)return r}return r}forEach(e){for(const n of this)e(n);return this}reduce(e,n){if(n===void 0){let i,s,o;for(const a of this)s=o,o=a,s&&(i=e(s,o));return i}let r=n;for(const i of this)r=e(r,i);return r}toArray(){return Array.from(this)}toJSON(){const{dimensions:e,orientation:n,origin:r,offset:i}=this.hexPrototype;return{hexSettings:{dimensions:e,orientation:n,origin:r,offset:i},coordinates:this.toArray()}}toString(){return`${this.constructor.name}(${this.size})`}pointToHex(e,{allowOutside:n=!0}={}){const r=hte(this.hexPrototype,e),i=this.getHex(r);return n?i??this.createHex(r):i}distance(e,n,{allowOutside:r=!0}={}){if(r)return cP(this.hexPrototype,e,n);const i=this.getHex(e),s=this.getHex(n);if(!(!i||!s))return cP(this.hexPrototype,i,s)}neighborOf(e,n,{allowOutside:r=!0}={}){const i=yte(this.createHex(e),n),s=this.getHex(i);return r?s??i:s}};gs=new WeakMap,Qa=new WeakMap,hu=new WeakSet,Ah=function(e){zi(this,Qa).set(e.toString(),e)},Bf=new WeakSet,o_=function(e){return Bs(this,$f,a_).call(this,e)?Bs(this,zf,l_).call(this,e):Array.isArray(e)&&Bs(this,$f,a_).call(this,e[0])?Bs(this,zf,l_).call(this,wte(e)):e},$f=new WeakSet,a_=function(e){return rte(e)},zf=new WeakSet,l_=function(e){return e(this.createHex.bind(this))};let s_=Jo;const xte=t=>{const e=_s.FLAT,n=Jj({dimensions:t.hexSize,orientation:e,origin:{x:0,y:0}}),r=new s_(n),i=r.createHex({q:0,r:0}),s=i.width,o=i.height;return{grid:r,hexWidth:s,hexHeight:o,hexToPixel:h=>{const f=r.createHex({q:h.q,r:h.r});return{x:f.x,y:f.y}},pixelToHex:h=>{const f=r.pointToHex(h);return{q:f.q,r:f.r,s:f.s}},hexToCorners:h=>r.createHex({q:h.q,r:h.r}).corners.map(p=>({x:p.x,y:p.y}))}};const vh="grid-layer",U1=1,V1=30,_te=.5,dP=11,W1=.5,H1=20,bte=.5,hP=11,u_=(t,e,n)=>Math.min(n,Math.max(e,t)),fP=(t,e,n)=>(u_(t,e,n)-e)/(n-e)*100,pP=(t,e)=>{const n=t.trim();if(!n)return e;if(n.startsWith("#"))return n;const r=n.match(/rgba?\((\d+),\s*(\d+),\s*(\d+)/i);if(!r)return e;const i=s=>Number(s).toString(16).padStart(2,"0");return`#${i(r[1])}${i(r[2])}${i(r[3])}`};function Ste(){var La;const{projectId:t}=ab(),{user:e}=Ii(),n=no(),{project:r,config:i,isLoading:s,isSaving:o,error:a,saveConfig:l}=Yj(t,e==null?void 0:e.id),c=i.gridType==="hex"?i:cr,h=c.hexSettings??cr.hexSettings??{hexSize:80,orientation:"pointy"},f=Math.max(c.gridColumns||cr.gridColumns,c.gridRows||cr.gridRows),p=Math.max(1,Math.ceil(f/2)),[g,v]=y.useState(c.hexWidgets??[]),[x,k]=y.useState(null),[C,b]=y.useState(null),[_,T]=y.useState(null),[R,L]=y.useState(null),[M,A]=y.useState(null),[$,j]=y.useState(null),[V,U]=y.useState(1),[B,Z]=y.useState({x:0,y:0}),[q,G]=y.useState(!1),[te,O]=y.useState(!1),[K,Y]=y.useState(()=>Object.fromEntries(D1.map(F=>[F.title,!1]))),[xe,re]=y.useState(!1),[ue,ke]=y.useState(!1),[qe,he]=y.useState(!1),[ge,we]=y.useState(!1),[ae,me]=y.useState(()=>c.layers&&c.layers.length>0?c.layers:[{id:vh,name:"Grid Map Layer",kind:"grid",visible:!0}]),[X,ye]=y.useState(c.activeLayerId??vh),_e=y.useRef(ae),at=y.useRef(X),[Le,fe]=y.useState(Number.isFinite(c.gridLineWidth)?Number(c.gridLineWidth):cr.gridLineWidth??1),[ve,Ae]=y.useState(Number.isFinite(c.gridBorderWidth)?Number(c.gridBorderWidth):cr.gridBorderWidth??2),[De,Ue]=y.useState(c.gridLineColor??""),[Ie,ze]=y.useState(c.gridBorderColor??""),Ce=y.useRef(Le),Oe=y.useRef(ve),Ne=y.useRef(De),yt=y.useRef(Ie),[Fe,st]=y.useState(!1),[wt,At]=y.useState(!1),[Ye,Re]=y.useState(!1),[Te,pe]=y.useState(!1),[be,gt]=y.useState(!1),[nt,lt]=y.useState(null),[Ke,xt]=y.useState(!1),[Lt,rt]=y.useState(null),[Nt,ht]=y.useState(null),zt=y.useRef(null),Et=y.useRef(null),ut=y.useMemo(()=>ae.find(F=>F.id===X),[ae,X]),Xt=(ut==null?void 0:ut.kind)==="grid",ft=(ut==null?void 0:ut.kind)==="tiles",Ft=((La=ae.find(F=>F.kind==="grid"))==null?void 0:La.visible)??!0,St=y.useMemo(()=>{var F;return((F=ae.find(H=>H.kind==="tiles"))==null?void 0:F.id)??null},[ae]),ln=y.useMemo(()=>[...ae].reverse(),[ae]),Gt=y.useMemo(()=>{const F=new Map,H=St??vh;return g.forEach(Q=>{var D;const N=Q.layerId??H;F.has(N)||F.set(N,[]),(D=F.get(N))==null||D.push(Q)}),F},[St,g]);y.useEffect(()=>{Xt||(st(!1),Re(!1)),ft||gt(!1)},[Xt,ft]);const qt=y.useMemo(()=>{const F=new Map;return D1.forEach(H=>{H.tiles.forEach(Q=>{F.set(Q.id,Q)})}),F},[]),mt=y.useMemo(()=>xte(h),[h.hexSize,h.orientation]),vt=y.useCallback(F=>{const H=[];for(let Q=-F+1;Q<=F-1;Q+=1)for(let N=-F+1;N<=F-1;N+=1){const D=-Q-N;Math.max(Math.abs(Q),Math.abs(N),Math.abs(D))<F&&H.push({q:Q,r:N,s:D})}return H},[]),[Ut,Cr]=y.useState(()=>c.allowedHexCells&&c.allowedHexCells.length>0?c.allowedHexCells:vt(p)),zn=y.useMemo(()=>new Set(Ut.map(F=>`${F.q},${F.r}`)),[Ut]),Un=y.useMemo(()=>{if(!Ut.length)return null;let F=Number.POSITIVE_INFINITY,H=Number.POSITIVE_INFINITY,Q=Number.NEGATIVE_INFINITY,N=Number.NEGATIVE_INFINITY;return Ut.forEach(D=>{mt.hexToCorners({q:D.q,r:D.r}).forEach(ie=>{F=Math.min(F,ie.x),H=Math.min(H,ie.y),Q=Math.max(Q,ie.x),N=Math.max(N,ie.y)})}),{minX:F,minY:H,maxX:Q,maxY:N,width:Q-F,height:N-H}},[Ut,mt]),qr=y.useMemo(()=>{if(!Ut.length)return[];const F=new Map,H=Q=>`${Q.x.toFixed(4)},${Q.y.toFixed(4)}`;return Ut.forEach(Q=>{const N=mt.hexToCorners({q:Q.q,r:Q.r});for(let D=0;D<N.length;D+=1){const z=N[D],ie=N[(D+1)%N.length],le=H(z),de=H(ie),Ge=le<de?`${le}|${de}`:`${de}|${le}`,$e=F.get(Ge);$e?$e.count+=1:F.set(Ge,{start:z,end:ie,count:1})}}),Array.from(F.values()).filter(Q=>Q.count===1)},[Ut,mt]),kr=y.useRef(null),io=y.useRef(null),Ol=y.useRef(null),Ir=y.useRef(!1),fr=y.useRef(null),ui=y.useRef(!1),Xn=y.useRef({x:0,y:0}),Er=y.useRef(V),so=y.useRef(null),jo=y.useRef(null),_a=y.useRef(!1),Di=y.useRef(new Map),Yr=y.useRef(null),Or=y.useRef(null),rs=y.useRef(null),As=y.useRef(!1),bi=y.useRef(!1),ci=y.useRef(!1),tn=y.useRef(null),Yt=y.useRef(r==null?void 0:r.id);y.useEffect(()=>{_e.current=ae},[ae]),y.useEffect(()=>{at.current=X},[X]),y.useEffect(()=>{Ce.current=Le},[Le]),y.useEffect(()=>{Oe.current=ve},[ve]),y.useEffect(()=>{Ne.current=De},[De]),y.useEffect(()=>{yt.current=Ie},[Ie]);const sn=y.useCallback(async()=>{if(As.current||!Yr.current)return;const F=Yr.current;Yr.current=null,As.current=!0;let H=!1;try{await l(F)}catch(Q){console.error("Failed to save hex battle map",Q),H=!0}finally{As.current=!1,Yr.current?sn():H||(bi.current=!1)}},[l]),Rt=y.useCallback((F,H,Q)=>{bi.current=!0,Yr.current={gridType:"hex",gridColumns:p*2-1,gridRows:p*2-1,cellSize:c.cellSize||h.hexSize,gridLineColor:Ne.current||void 0,gridBorderColor:yt.current||void 0,gridLineWidth:Ce.current,gridBorderWidth:Oe.current,widgets:[],hexSettings:h,hexWidgets:F,allowedHexCells:Q??Ut,layers:(H==null?void 0:H.layers)??_e.current,activeLayerId:(H==null?void 0:H.activeLayerId)??at.current,version:c.version,updated_at:c.updated_at},Or.current&&clearTimeout(Or.current),Or.current=setTimeout(()=>{Or.current=null,sn()},80)},[Ut,sn,p,c.cellSize,c.updated_at,c.version,h]),on=y.useCallback((F,H=X)=>{me(F),ye(H),Rt(g,{layers:F,activeLayerId:H})},[X,g,Rt]),Dr=y.useCallback(()=>{Rt(g)},[g,Rt]),Vn=y.useCallback(()=>{rs.current&&clearTimeout(rs.current),rs.current=setTimeout(()=>{rs.current=null,Dr()},250)},[Dr]);y.useEffect(()=>{const F=(r==null?void 0:r.id)&&(r==null?void 0:r.id)!==Yt.current;if(i.gridType!=="hex")return;const H=i.version??0;(F||!ci.current||!bi.current&&H>=(tn.current??-1))&&(v(i.hexWidgets??[]),me(i.layers&&i.layers.length>0?i.layers:[{id:vh,name:"Grid Map Layer",kind:"grid",visible:!0}]),ye(i.activeLayerId??vh),i.allowedHexCells&&i.allowedHexCells.length>0?Cr(i.allowedHexCells):(F||!ci.current)&&Cr(vt(p)),fe(Number.isFinite(i.gridLineWidth)?Number(i.gridLineWidth):cr.gridLineWidth??1),Ae(Number.isFinite(i.gridBorderWidth)?Number(i.gridBorderWidth):cr.gridBorderWidth??2),Ue(i.gridLineColor??""),ze(i.gridBorderColor??""),ci.current=!0,tn.current=H,Yt.current=r==null?void 0:r.id)},[vt,i,p,r==null?void 0:r.id]),y.useEffect(()=>()=>{Or.current&&clearTimeout(Or.current),rs.current&&clearTimeout(rs.current)},[]);const Cn=y.useCallback(F=>{if(!be||!nt||!ft||!X||!Ut.some(z=>z.q===F.q&&z.r===F.r))return;const Q=`${F.q},${F.r}`;if(zt.current===Q)return;const N=qt.get(nt);if(!N)return;let D=!1;v(z=>{const ie=z.find(Ge=>Ge.q===F.q&&Ge.r===F.r);if(ie){if((ie.layerId??St)!==X)return z;const $e=z.map(Ve=>Ve.id===ie.id?{...Ve,tileId:N.id,appearance:{backgroundImageUrl:N.image}}:Ve);return Rt($e),D=!0,$e}const le={id:hr(),gridType:"hex",q:F.q,r:F.r,s:F.s??-(F.q+F.r),layerId:X,tileId:N.id,appearance:{backgroundImageUrl:N.image}},de=[...z,le];return Rt(de),D=!0,de}),zt.current=Q,D&&j("Painted tile.")},[X,Ut,St,be,ft,Rt,nt,qt]),Ht=y.useCallback((F,H=Er.current)=>{Xn.current=F,jo.current={pan:F,scale:H},io.current&&io.current.setAttribute("transform",`translate(${F.x} ${F.y}) scale(${H})`),so.current===null&&(so.current=requestAnimationFrame(()=>{so.current=null;const Q=jo.current;!Q||!io.current||io.current.setAttribute("transform",`translate(${Q.pan.x} ${Q.pan.y}) scale(${Q.scale})`)}))},[]),Pn=y.useCallback((F,H)=>{Ht(F,H??Er.current),Z(F)},[Ht]);y.useEffect(()=>()=>{so.current!==null&&cancelAnimationFrame(so.current)},[]),y.useLayoutEffect(()=>{Er.current=V,Ht(Xn.current,V)},[V,Ht]),y.useLayoutEffect(()=>{Xn.current=B,Ht(B,Er.current)},[B,Ht]);const Ln=y.useCallback((F,H)=>{var z;const Q=(z=kr.current)==null?void 0:z.getBoundingClientRect();if(!Q)return null;const N=Xn.current,D=Er.current;return{x:(F-Q.left-N.x)/D,y:(H-Q.top-N.y)/D}},[]),Si=y.useCallback(F=>{var z;const H=(z=kr.current)==null?void 0:z.getBoundingClientRect();if(!H||!Un)return;const Q=F??V,N=Un.minX+Un.width/2,D=Un.minY+Un.height/2;Pn({x:H.width/2-N*Q,y:H.height/2-D*Q})},[Pn,Un,V]),di=y.useCallback(F=>{const H=g.filter(Q=>Q.id!==F);v(H),Rt(H),b(null),j("Tile deleted.")},[g,Rt]),pr=y.useCallback((F,H)=>{if(F===void 0||H===void 0)return;const Q=Ln(F,H);if(!Q)return;const N=mt.pixelToHex(Q),D=g.find(z=>z.q===N.q&&z.r===N.r);D&&di(D.id)},[mt,di,g,Ln]),Io=y.useCallback((F,H)=>F.q===H.q&&F.r===H.r,[]),is=y.useCallback((F,H)=>{if(F===void 0||H===void 0)return;const Q=Ln(F,H);if(!Q)return;const N=mt.pixelToHex(Q),D=`${N.q},${N.r}`;Et.current!==D&&(Et.current=D,Cr(z=>{if(z.some(de=>de.q===N.q&&de.r===N.r))return z;const le=[...z,N];return Rt(g,void 0,le),j("Added hex tile to grid."),le}))},[mt,g,Rt,Ln]),oo=y.useCallback((F,H)=>{if(F===void 0||H===void 0)return;const Q=Ln(F,H);if(!Q)return;const N=mt.pixelToHex(Q),D=`${N.q},${N.r}`;Et.current!==D&&(Et.current=D,Cr(z=>{if(!z.some(de=>de.q===N.q&&de.r===N.r))return z;const le=z.filter(de=>de.q!==N.q||de.r!==N.r);return v(de=>{const Ge=de.filter($e=>!Io($e,N));return C&&de.some($e=>$e.id===C)&&(Ge.some(Ve=>Ve.id===C)||b(null)),Rt(Ge,void 0,le),j("Removed hex tile from grid."),Ge}),le}))},[Io,mt,Rt,C,Ln]),Kr=y.useCallback((F,H)=>{const Q=Ol.current;if(!Q||F===void 0||H===void 0)return!1;const N=Q.getBoundingClientRect();return F>=N.left&&F<=N.right&&H>=N.top&&H<=N.bottom},[]),Ci=y.useCallback((F,H)=>{const Q=Kr(F,H);return Ir.current=Q,we(Q),Q},[Kr]);y.useEffect(()=>{const F=()=>{var Q;((Q=kr.current)==null?void 0:Q.getBoundingClientRect())&&(_a.current||(Si(),_a.current=!0))};return F(),window.addEventListener("resize",F),()=>window.removeEventListener("resize",F)},[Un,Si]),y.useEffect(()=>{const F=Q=>{Q.code==="Space"&&G(!0),(Q.key==="Delete"||Q.key==="Backspace")&&C&&(Q.preventDefault(),di(C))},H=Q=>{Q.code==="Space"&&(G(!1),O(!1))};return window.addEventListener("keydown",F),window.addEventListener("keyup",H),()=>{window.removeEventListener("keydown",F),window.removeEventListener("keyup",H)}},[di,C]),y.useEffect(()=>{const F=H=>{if(H.code!=="Space")return;const Q=document.activeElement;!Q||!Q.closest(".battlemap-workspace")||!Q.closest('button, [role="button"]')||H.preventDefault()};return window.addEventListener("keydown",F,{capture:!0}),()=>{window.removeEventListener("keydown",F,{capture:!0})}},[]),y.useEffect(()=>{be||(xt(!1),lt(null),zt.current=null)},[be]),y.useEffect(()=>{Fe||At(!1),Ye||pe(!1),!Fe&&!Ye&&(rt(null),ht(null),Et.current=null)},[Fe,Ye]),y.useEffect(()=>{if(!_)return;const F=Q=>{A({x:Q.clientX,y:Q.clientY});const N=Ln(Q.clientX,Q.clientY);if(!N){k(null),re(!1),Ci(Q.clientX,Q.clientY);return}const D=mt.pixelToHex(N),z=Ut.some(ie=>ie.q===D.q&&ie.r===D.r);k(D),re(z),Ci(Q.clientX,Q.clientY)},H=Q=>{A({x:Q.clientX,y:Q.clientY});const N=Ci(Q.clientX,Q.clientY),D=Ln(Q.clientX,Q.clientY),z=D?mt.pixelToHex(D):x,ie=z?Ut.some(le=>le.q===z.q&&le.r===z.r):!1;if(N&&(_==null?void 0:_.type)==="widget")di(_.widget.id);else if(z&&ie){const le=g.find(de=>de.q===z.q&&de.r===z.r);if(_.type==="palette")if(!ft||!X)j("Select a Tile Layer to place tiles.");else if(le)j("That hex is already occupied.");else{const de={id:hr(),gridType:"hex",q:z.q,r:z.r,s:z.s,layerId:X,tileId:_.tile.id,appearance:{backgroundImageUrl:_.tile.image}},Ge=[...g,de];v(Ge),Rt(Ge),j("Placed tile on hex grid.")}else{const de=R??_.widget,Ge=de.q===z.q&&de.r===z.r;if(le&&le.id!==_.widget.id){if((le.layerId??St)!==X){j("That hex is already occupied.");return}const Ve=g.map(Bt=>Bt.id===_.widget.id?{...Bt,q:z.q,r:z.r,s:z.s}:Bt.id===le.id?{...Bt,q:de.q,r:de.r,s:de.s}:Bt);v(Ve),Rt(Ve),j("Swapped tiles.")}else if(!Ge){const $e=g.map(Ve=>Ve.id===_.widget.id?{...Ve,q:z.q,r:z.r,s:z.s}:Ve);v($e),Rt($e),j("Moved tile.")}}}else _.type==="widget"?j("Outside the grid. Returning tile to its spot."):_.type==="palette"&&j("Drop tiles inside the grid.");T(null),L(null),k(null),re(!1),A(null),we(!1),Ir.current=!1};return window.addEventListener("mousemove",F),window.addEventListener("mouseup",H),()=>{window.removeEventListener("mousemove",F),window.removeEventListener("mouseup",H),he(!1)}},[X,Ut,St,_,R,mt,di,g,x,ft,Rt,he,Ln,Ci]);const Fi=y.useCallback(F=>{q&&(F.preventDefault(),O(!0),ui.current=!0,fr.current={x:F.clientX,y:F.clientY,panX:Xn.current.x,panY:Xn.current.y})},[q]),ss=y.useCallback(F=>{if(!ui.current||!fr.current)return;const H=F.clientX-fr.current.x,Q=F.clientY-fr.current.y;Ht({x:fr.current.panX+H,y:fr.current.panY+Q},Er.current)},[Ht]),Ns=y.useCallback(()=>{O(!1),ui.current=!1,fr.current=null,Z(Xn.current)},[]);y.useEffect(()=>{if(!te)return;const F=Q=>{if(!ui.current||!fr.current)return;const N=Q.clientX-fr.current.x,D=Q.clientY-fr.current.y;Ht({x:fr.current.panX+N,y:fr.current.panY+D},Er.current)},H=()=>{Ns()};return window.addEventListener("mousemove",F),window.addEventListener("mouseup",H),()=>{window.removeEventListener("mousemove",F),window.removeEventListener("mouseup",H)}},[te,Ht,Ns]);const ba=y.useCallback(F=>{ue&&(F.preventDefault(),he(!0),pr(F.clientX,F.clientY))},[pr,ue]),Sa=y.useCallback(F=>{!ue||!qe||(F.preventDefault(),pr(F.clientX,F.clientY))},[pr,qe,ue]),Ca=y.useCallback(()=>{ue&&he(!1)},[ue]),os=y.useCallback((F,H)=>{if(F===void 0||H===void 0||!Fe&&!Ye)return;const Q=Ln(F,H);if(!Q){rt(null),ht(null);return}const N=mt.pixelToHex(Q),D=`${N.q},${N.r}`;if(Fe&&!zn.has(D)){rt(N),ht("expand");return}if(Ye&&zn.has(D)){rt(N),ht("shrink");return}rt(null),ht(null)},[zn,mt,Fe,Ye,Ln]),Oo=y.useCallback((F,H)=>{Fe&&(Et.current=null,At(!0),is(F,H))},[is,Fe]),Nd=y.useCallback((F,H)=>{!Fe||!wt||is(F,H)},[is,Fe,wt]),Do=y.useCallback(()=>{wt&&(At(!1),Et.current=null)},[wt]),Vt=y.useCallback((F,H)=>{Ye&&(Et.current=null,pe(!0),oo(F,H))},[Ye,oo]),Ou=y.useCallback((F,H)=>{!Ye||!Te||oo(F,H)},[Ye,Te,oo]),ka=y.useCallback(()=>{Te&&(pe(!1),Et.current=null)},[Te]),Ea=y.useCallback(F=>{var z;F.preventDefault();const H=.0015,Q=Math.min(10,Math.max(.1,Er.current*Math.exp(-F.deltaY*H))),N=(z=kr.current)==null?void 0:z.getBoundingClientRect();if(!N){U(Q),Er.current=Q,Ht(Xn.current,Q);return}const D=Ln(F.clientX,F.clientY);if(U(Q),Er.current=Q,D){const ie=F.clientX-N.left,le=F.clientY-N.top;Pn({x:ie-D.x*Q,y:le-D.y*Q},Q)}},[Pn,Ht,Ln]);y.useEffect(()=>{const F=kr.current;if(!F)return;const H=Q=>{Ea(Q)};return F.addEventListener("wheel",H,{passive:!1}),()=>{F.removeEventListener("wheel",H)}},[Ea,s]);const jd=y.useCallback((F,H)=>{if(H.preventDefault(),!!ft){if(be){lt(F.id),j(`Draw mode: ${F.label} selected.`);return}T({type:"palette",tile:F}),j(null)}},[be,ft]),Id=y.useCallback((F,H)=>{const Q=F.layerId??St;if(!(!ft||Q!==X)&&!(q||be)){if(H.preventDefault(),ue){di(F.id);return}b(F.id),T({type:"widget",widget:F}),L({q:F.q,r:F.r,s:F.s}),A({x:H.clientX,y:H.clientY}),j(null)}},[X,St,di,ue,be,q,ft]),Mn=y.useCallback((F,H)=>{if(!be||q||!ft)return;if(!nt){j("Select a tile to draw.");return}if(F===void 0||H===void 0)return;const Q=Ln(F,H);if(!Q)return;zt.current=null;const N=mt.pixelToHex(Q);Cn(N),xt(!0)},[mt,be,q,ft,Cn,nt,Ln]),Ra=y.useCallback((F,H)=>{if(!be||!Ke||F===void 0||H===void 0)return;const Q=Ln(F,H);if(!Q)return;const N=mt.pixelToHex(Q);Cn(N)},[mt,be,Ke,Cn,Ln]),Du=y.useCallback(()=>{Ke&&(xt(!1),zt.current=null)},[Ke]),Ta=y.useMemo(()=>{var F,H;return _?_.type==="palette"?_.tile.image:((F=qt.get(_.widget.tileId))==null?void 0:F.image)??((H=_.widget.appearance)==null?void 0:H.backgroundImageUrl)??null:null},[_,qt]),as=y.useMemo(()=>{const F=mt.hexToCorners({q:0,r:0}),H=Math.min(...F.map(de=>de.x)),Q=Math.max(...F.map(de=>de.x)),N=Math.min(...F.map(de=>de.y)),D=Math.max(...F.map(de=>de.y)),z=Q-H,ie=D-N,le=F.map(de=>`${de.x-H},${de.y-N}`).join(" ");return{width:z,height:ie,points:le}},[mt]),Pa=y.useMemo(()=>({"--grid-line-color":De||void 0,"--grid-border-color":Ie||void 0,"--grid-line-width":`${Le}px`,"--grid-border-width":`${ve}px`}),[Ie,ve,De,Le]),sr=y.useCallback(()=>{var D;const F=(D=kr.current)==null?void 0:D.closest(".hex-workspace"),H=getComputedStyle(F||document.documentElement),Q=parseFloat(H.getPropertyValue("--grid-line-width")),N=parseFloat(H.getPropertyValue("--grid-border-width"));return{background:H.getPropertyValue("--bg").trim()||"#0f172a",gridLine:H.getPropertyValue("--grid-line-color").trim()||"#e2e8f0",gridBorder:H.getPropertyValue("--grid-border-color").trim()||"#f8fafc",gridLineWidth:Number.isFinite(Q)?Q:1,gridBorderWidth:Number.isFinite(N)?N:2,tileBorder:H.getPropertyValue("--grid-border-color").trim()||H.getPropertyValue("--text").trim()||"#6b7280"}},[]),Fu=y.useMemo(()=>De||pP(sr().gridLine,"#94a3b8"),[sr,De]),Od=y.useMemo(()=>Ie||pP(sr().gridBorder,"#94a3b8"),[sr,Ie]),gr=fP(ve,U1,V1),Bi=fP(Le,W1,H1),Fo=y.useCallback(async F=>{if(!Un){j("Grid not ready to export.");return}try{const H=Math.max(12,h.hexSize*.25),Q=Un.minX-H,N=Un.minY-H,D=Un.width+H*2,z=Un.height+H*2,{background:ie,gridBorder:le,gridLine:de,gridBorderWidth:Ge,gridLineWidth:$e,tileBorder:Ve}=sr(),Bt=new Map;await Promise.all(g.map(async Jn=>{var nn,or;const pn=((nn=qt.get(Jn.tileId))==null?void 0:nn.image)??((or=Jn.appearance)==null?void 0:or.backgroundImageUrl)??void 0;if(!pn||Bt.has(pn))return;const hn=await Kj(pn,Di.current);Bt.set(pn,hn)}));const Wt=[];Wt.push(`<svg xmlns="http://www.w3.org/2000/svg" width="${D}" height="${z}" viewBox="${Q} ${N} ${D} ${z}" fill="none">`);const Wn=[...ae].reverse(),Zn=Wn.filter(Jn=>Jn.kind==="tiles"&&Jn.visible).flatMap(Jn=>Gt.get(Jn.id)??[]);Zn.length&&(Wt.push("<defs>"),Zn.forEach(Jn=>{const hn=mt.hexToCorners({q:Jn.q,r:Jn.r}).map(or=>`${or.x},${or.y}`).join(" "),nn=`hex-export-${Jn.id.replace(/[^a-zA-Z0-9_-]/g,"-")}`;Wt.push(`<clipPath id="${nn}"><polygon points="${hn}" /></clipPath>`)}),Wt.push("</defs>")),Wn.forEach(Jn=>{Jn.visible&&(Jn.kind==="tiles"&&(Gt.get(Jn.id)??[]).forEach(hn=>{var Vo,Dd;const nn=mt.hexToCorners({q:hn.q,r:hn.r}),or=nn.map(hi=>`${hi.x},${hi.y}`).join(" "),ao=Math.min(...nn.map(hi=>hi.x)),$o=Math.max(...nn.map(hi=>hi.x)),Bl=Math.min(...nn.map(hi=>hi.y)),Is=Math.max(...nn.map(hi=>hi.y)),zo=`hex-export-${hn.id.replace(/[^a-zA-Z0-9_-]/g,"-")}`,Uo=((Vo=qt.get(hn.tileId))==null?void 0:Vo.image)??((Dd=hn.appearance)==null?void 0:Dd.backgroundImageUrl)??"",Ma=Uo?Bt.get(Uo)??Uo:"";Ma?Wt.push(`<image href="${Ma}" x="${ao}" y="${Bl}" width="${$o-ao}" height="${Is-Bl}" preserveAspectRatio="xMidYMid slice" clip-path="url(#${zo})" />`):Wt.push(`<polygon points="${or}" fill="#d0d0d0" />`),Wt.push(`<polygon points="${or}" fill="none" stroke="${Ve}" stroke-width="1.5" />`)}),Jn.kind==="grid"&&(Ut.forEach(pn=>{const hn=mt.hexToCorners({q:pn.q,r:pn.r}).map(nn=>`${nn.x},${nn.y}`).join(" ");Wt.push(`<polygon points="${hn}" fill="none" stroke="${de}" stroke-width="${$e}" />`)}),qr.forEach(pn=>{Wt.push(`<line x1="${pn.start.x}" y1="${pn.start.y}" x2="${pn.end.x}" y2="${pn.end.y}" stroke="${le}" stroke-width="${Ge}" stroke-linecap="round" stroke-linejoin="round" />`)})))}),Wt.push("</svg>");const Qn=Wt.join(""),xn=new Blob([Qn],{type:"image/svg+xml;charset=utf-8"}),an=URL.createObjectURL(xn),js=await Xj(an),Hn=document.createElement("canvas");Hn.width=Math.ceil(D),Hn.height=Math.ceil(z);const Xr=Hn.getContext("2d");if(!Xr){URL.revokeObjectURL(an),j("Unable to export: canvas not available.");return}Xr.fillStyle=ie||"transparent",Xr.fillRect(0,0,Hn.width,Hn.height),Xr.drawImage(js,0,0,Hn.width,Hn.height),URL.revokeObjectURL(an);const Bo=F==="png"?"image/png":"image/jpeg",Dl=F==="jpeg"?.92:void 0,Fl=Hn.toDataURL(Bo,Dl);Zj(Fl,`hex-battle-map.${F==="png"?"png":"jpg"}`),j(`Saved hex battle map as ${F.toUpperCase()}.`)}catch(H){console.error("Hex export failed",H),j("Failed to export hex battle map.")}},[Ut,qr,mt,sr,Un,h.hexSize,ae,qt,Gt]);return s?w.jsx("div",{className:"battlemap-workspace__loading",children:w.jsx("p",{className:"battlemap-workspace__loading-text",children:"Loading hex battle map..."})}):!r||a?w.jsxs("div",{className:"battlemap-workspace__error",children:[w.jsx("p",{className:"battlemap-workspace__error-text",children:a??"Battle map not found."}),w.jsx("button",{className:"button button--ghost battlemap-workspace__error-button",onClick:()=>n("/app"),children:"Back to Projects"})]}):w.jsxs("div",{className:`battlemap-workspace hex-workspace${ue?" is-delete-mode":""}`,style:Pa,children:[w.jsxs("div",{className:"battlemap-workspace__sidebar hex-workspace__sidebar",children:[w.jsxs("div",{className:"battlemap-workspace__sidebar-header",children:[w.jsx("button",{className:"button button--ghost battlemap-workspace__back-button",onClick:()=>n("/app"),children:"Back to Projects"}),w.jsx("h2",{className:"battlemap-workspace__project-name",children:r.name})]}),w.jsxs("div",{className:"battlemap-workspace__sidebar-actions",children:[w.jsx("button",{type:"button",className:"button button--ghost battlemap-workspace__reset-button",onClick:()=>{U(1),Si(1)},children:"Reset View"}),w.jsxs("div",{className:"battlemap-workspace__export-actions",children:[w.jsx("button",{type:"button",className:"button battlemap-workspace__export-button",onClick:()=>Fo("png"),children:"Save Battle Map (PNG)"}),w.jsx("button",{type:"button",className:"button button--ghost battlemap-workspace__export-button",onClick:()=>Fo("jpeg"),children:"Save Battle Map (JPEG)"})]})]}),w.jsxs("p",{className:"battlemap-workspace__hint battlemap-workspace__autosave",children:["Auto-save: ",o?"Saving...":"Synced"]}),$?w.jsx("p",{className:"hex-workspace__status",children:$}):null]}),w.jsx("div",{className:"battlemap-workspace__main hex-workspace__main",children:w.jsxs("div",{ref:kr,className:`battlemap-workspace__viewport hex-workspace__viewport${q?" is-space-held":""}${te?" is-panning":""}${Fe?" is-expand-mode":""}${Ye?" is-shrink-mode":""}`,onMouseDown:F=>{q?Fi(F):be?Mn(F.clientX,F.clientY):Fe?Oo(F.clientX,F.clientY):Ye?Vt(F.clientX,F.clientY):ue?ba(F):Fi(F)},onMouseMove:F=>{(Fe||Ye)&&os(F.clientX,F.clientY),te?ss(F):be&&Ke?Ra(F.clientX,F.clientY):Fe?Nd(F.clientX,F.clientY):Ye?Ou(F.clientX,F.clientY):ue?Sa(F):ss(F)},onMouseUp:F=>{te?Ns():be&&Ke?Du():Fe?Do():Ye?ka():ue?Ca():Ns()},onMouseLeave:()=>{te?Ns():be&&Ke?Du():Fe?(Do(),rt(null),ht(null)):Ye?(ka(),rt(null),ht(null)):ue?Ca():Ns()},children:[w.jsxs("svg",{className:"hex-workspace__surface",children:[w.jsx("defs",{children:g.map(F=>{const Q=mt.hexToCorners({q:F.q,r:F.r}).map(N=>`${N.x},${N.y}`).join(" ");return w.jsx("clipPath",{id:`hex-clip-${F.id}`,clipPathUnits:"userSpaceOnUse",children:w.jsx("polygon",{points:Q})},`clip-${F.id}`)})}),w.jsxs("g",{ref:io,transform:`translate(${B.x} ${B.y}) scale(${V})`,children:[ln.map(F=>{if(!F.visible)return null;if(F.kind==="grid")return w.jsxs("g",{"data-layer":"grid",children:[Ut.map(H=>{const N=mt.hexToCorners({q:H.q,r:H.r}).map(D=>`${D.x},${D.y}`).join(" ");return w.jsx("polygon",{className:"hex-workspace__cell",points:N},`${H.q}-${H.r}`)}),qr.map((H,Q)=>w.jsx("line",{className:"hex-workspace__grid-boundary",x1:H.start.x,y1:H.start.y,x2:H.end.x,y2:H.end.y},`boundary-${Q}`))]},F.id);if(F.kind==="tiles"){const H=Gt.get(F.id)??[];return H.length?w.jsx("g",{"data-layer":"tiles",children:H.map(Q=>{const N=mt.hexToCorners({q:Q.q,r:Q.r}),D=N.map(Ve=>`${Ve.x},${Ve.y}`).join(" "),z=Math.min(...N.map(Ve=>Ve.x)),ie=Math.max(...N.map(Ve=>Ve.x)),le=Math.min(...N.map(Ve=>Ve.y)),de=Math.max(...N.map(Ve=>Ve.y)),Ge=qt.get(Q.tileId),$e=(_==null?void 0:_.type)==="widget"&&_.widget.id===Q.id;return w.jsxs("g",{className:`hex-workspace__tile${$e?" is-drag-origin":""}`,onMouseDown:Ve=>Id(Q,Ve),children:[Ge?w.jsx("image",{href:Ge.image,x:z,y:le,width:ie-z,height:de-le,preserveAspectRatio:"xMidYMid slice",clipPath:`url(#hex-clip-${Q.id})`}):w.jsx("polygon",{points:D,fill:"#d0d0d0"}),w.jsx("polygon",{className:"hex-workspace__tile-border",points:D})]},Q.id)})},F.id):null}return null}),Ft&&x&&xe&&_?w.jsx("polygon",{className:"hex-workspace__hover",points:mt.hexToCorners({q:x.q,r:x.r}).map(F=>`${F.x},${F.y}`).join(" ")}):null,Ft&&Lt&&Nt==="expand"?w.jsx("polygon",{className:"hex-workspace__expand-preview",points:mt.hexToCorners({q:Lt.q,r:Lt.r}).map(F=>`${F.x},${F.y}`).join(" ")}):null,Ft&&Lt&&Nt==="shrink"?w.jsx("polygon",{className:"hex-workspace__shrink-preview",points:mt.hexToCorners({q:Lt.q,r:Lt.r}).map(F=>`${F.x},${F.y}`).join(" ")}):null]})]}),w.jsx("div",{id:"trash-dropzone",ref:Ol,className:`battlemap-delete-panel${ge?" is-active":""}${ue?" is-toggle-active":""}`,"aria-label":"Drop tiles here to delete them",role:"presentation",onClick:()=>{ke(F=>{const H=!F;return H?(st(!1),gt(!1),Re(!1),j("Delete mode enabled.")):j("Delete mode disabled."),he(!1),H})},children:w.jsx("span",{className:"battlemap-delete-panel__icon","aria-hidden":!0})}),_&&M&&Ta?w.jsx("div",{className:"hex-workspace__drag-preview",style:{left:`${M.x}px`,top:`${M.y}px`,transform:"translate(-50%, -50%)"},children:w.jsxs("svg",{width:as.width,height:as.height,viewBox:`0 0 ${as.width} ${as.height}`,style:{transform:`scale(${V})`,transformOrigin:"center center"},children:[w.jsx("defs",{children:w.jsx("clipPath",{id:"drag-preview-clip",children:w.jsx("polygon",{points:as.points})})}),w.jsx("image",{href:Ta,x:0,y:0,width:as.width,height:as.height,preserveAspectRatio:"xMidYMid slice",clipPath:"url(#drag-preview-clip)"}),w.jsx("polygon",{className:"hex-workspace__tile-border",points:as.points})]})}):null]})}),w.jsxs("div",{className:"battlemap-workspace__right-sidebar",children:[w.jsx(Qj,{layers:ae,activeLayerId:X,onActiveLayerChange:F=>{on(ae,F)},onToggleVisibility:F=>{const H=ae.map(Q=>Q.id===F?{...Q,visible:!Q.visible}:Q);on(H)},onAddLayer:F=>{const H=(()=>F==="grid"?"Grid Layer":F==="tiles"?"Tile Layer":F==="image"?"Image Layer":F==="background"?"Background Layer":"Layer")(),Q=ae.filter(z=>z.kind==="tiles").length,N={id:crypto.randomUUID(),name:F==="tiles"?`${H} ${Q+1}`:`${H} ${ae.length}`,kind:F,visible:!0};let D=[...ae];if(F==="tiles"){const z=ae.findIndex(le=>le.kind==="grid"),ie=z>=0?z+1:0;D=[...ae.slice(0,ie),N,...ae.slice(ie)]}else D=[...ae,N];on(D,N.id)},onRenameLayer:(F,H)=>{const Q=ae.map(N=>N.id===F?{...N,name:H}:N);on(Q)},onMoveLayerUp:F=>{const H=ae.findIndex(N=>N.id===F);if(H<=0)return;const Q=[...ae];[Q[H-1],Q[H]]=[Q[H],Q[H-1]],on(Q)},onMoveLayerDown:F=>{const H=ae.findIndex(N=>N.id===F);if(H<0||H>=ae.length-1)return;const Q=[...ae];[Q[H+1],Q[H]]=[Q[H],Q[H+1]],on(Q)},onDeleteLayer:F=>{var z,ie;const H=ae.find(le=>le.id===F);if(!H||H.kind==="grid"||H.kind==="tiles"&&ae.filter(de=>de.kind==="tiles").length<=1||ae.length<=1)return;const Q=ae.filter(le=>le.id!==F),N=ae.findIndex(le=>le.id===F),D=X===F?((z=Q[Math.max(0,N-1)])==null?void 0:z.id)??((ie=Q[0])==null?void 0:ie.id):X;if(H.kind==="tiles"){const le=g.filter(de=>(de.layerId??St)!==F);v(le),me(Q),ye(D),Rt(le,{layers:Q,activeLayerId:D});return}on(Q,D)},onReorderLayers:F=>{on(F)}}),w.jsxs("div",{className:"battlemap-workspace__control-section battlemap-workspace__control-section--compact",children:[w.jsx("h3",{className:"battlemap-workspace__control-title",children:"Grid Properties"}),Xt?w.jsxs(w.Fragment,{children:[w.jsxs("div",{className:"battlemap-grid-toggle-row",children:[w.jsx("button",{type:"button",className:`button button--ghost battlemap-grid-toggle${Fe?" is-active":""}`,onClick:()=>{st(F=>{const H=!F;return H?(ke(!1),gt(!1),Re(!1),j("Expand Hex Grid Mode enabled. Click or drag to add tiles.")):j("Expand Hex Grid Mode disabled."),H})},onKeyDown:F=>{F.code==="Space"&&F.preventDefault()},children:"Expand"}),w.jsx("button",{type:"button",className:`button button--ghost battlemap-grid-toggle${Ye?" is-active":""}`,onClick:()=>{Re(F=>{const H=!F;return H?(ke(!1),gt(!1),st(!1),j("Decrease Hex Grid Mode enabled. Click or drag to remove tiles.")):j("Decrease Hex Grid Mode disabled."),H})},onKeyDown:F=>{F.code==="Space"&&F.preventDefault()},children:"Decrease"})]}),w.jsx("h3",{className:"battlemap-workspace__control-title battlemap-grid-visuals-title",children:"Grid Visuals"}),w.jsxs("div",{className:"battlemap-grid-visual",children:[w.jsxs("div",{className:"battlemap-grid-visual__label-row",children:[w.jsx("span",{children:"Outer Border Thickness"}),w.jsxs("span",{className:"battlemap-grid-visual__value",children:[ve.toFixed(1),"px"]})]}),w.jsxs("div",{className:"battlemap-grid-slider-wrap",style:{"--tick-count":dP},children:[w.jsx("input",{type:"range",min:U1,max:V1,step:_te,value:ve,onChange:F=>{const H=u_(Number(F.target.value),U1,V1);Ae(H),Oe.current=H},onPointerUp:Dr,onKeyUp:Dr,className:"battlemap-grid-slider","aria-label":"Outer border thickness"}),w.jsxs("output",{className:"battlemap-grid-slider__value",style:{left:`${gr}%`},children:[ve.toFixed(1),"px"]}),w.jsx("div",{className:"battlemap-grid-slider__ticks","aria-hidden":!0,children:Array.from({length:dP}).map((F,H)=>w.jsx("span",{},`grid-border-tick-${H}`))})]}),w.jsx("input",{type:"color",value:Od,onChange:F=>{const H=F.currentTarget.value;ze(H),yt.current=H,Vn()},className:"battlemap-grid-color","aria-label":"Outer border color"})]}),w.jsxs("div",{className:"battlemap-grid-visual",children:[w.jsxs("div",{className:"battlemap-grid-visual__label-row",children:[w.jsx("span",{children:"Inner Grid Thickness"}),w.jsxs("span",{className:"battlemap-grid-visual__value",children:[Le.toFixed(1),"px"]})]}),w.jsxs("div",{className:"battlemap-grid-slider-wrap",style:{"--tick-count":hP},children:[w.jsx("input",{type:"range",min:W1,max:H1,step:bte,value:Le,onChange:F=>{const H=u_(Number(F.target.value),W1,H1);fe(H),Ce.current=H},onPointerUp:Dr,onKeyUp:Dr,className:"battlemap-grid-slider","aria-label":"Inner grid thickness"}),w.jsxs("output",{className:"battlemap-grid-slider__value",style:{left:`${Bi}%`},children:[Le.toFixed(1),"px"]}),w.jsx("div",{className:"battlemap-grid-slider__ticks","aria-hidden":!0,children:Array.from({length:hP}).map((F,H)=>w.jsx("span",{},`grid-line-tick-${H}`))})]}),w.jsx("input",{type:"color",value:Fu,onChange:F=>{const H=F.currentTarget.value;Ue(H),Ne.current=H,Vn()},className:"battlemap-grid-color","aria-label":"Inner grid color"})]})]}):w.jsx("p",{className:"battlemap-workspace__hint",children:"Grid tools appear when the Grid Map Layer is active."}),w.jsx("p",{className:"battlemap-workspace__hint",children:"Hold space + drag to pan. Scroll to zoom. Drop tiles to snap to the grid."})]}),w.jsxs("div",{className:"battlemap-workspace__control-section battlemap-workspace__tiles-panel--sidebar",children:[w.jsx("h3",{className:"battlemap-workspace__control-title",children:"Tiles"}),ft?w.jsxs(w.Fragment,{children:[w.jsx("div",{className:"battlemap-workspace__mode-toggle",children:w.jsx("button",{type:"button",className:`button ${be?"button--primary":"button--ghost"}`,onClick:()=>{gt(F=>{const H=!F;return H?(ke(!1),st(!1),Re(!1),j("Draw mode enabled. Pick a tile, then click or drag on the grid.")):j("Draw mode disabled."),H}),T(null),re(!1),zt.current=null},onKeyDown:F=>{F.code==="Space"&&F.preventDefault()},children:be?"Draw Mode: ON":"Draw Mode"})}),w.jsx("div",{className:"battlemap-workspace__tiles-scroll",children:D1.map(F=>w.jsxs("div",{className:`battlemap-workspace__tile-group${K[F.title]?" is-open":""}`,children:[w.jsxs("button",{type:"button",className:"battlemap-workspace__tile-group-toggle",onClick:()=>Y(H=>({...H,[F.title]:!H[F.title]})),"aria-expanded":K[F.title]??!1,"aria-controls":`tile-group-${F.title}`,children:[w.jsx("span",{className:"battlemap-workspace__tile-group-title",children:F.title}),w.jsx("span",{className:`battlemap-workspace__tile-group-chevron${K[F.title]?" is-open":""}`,"aria-hidden":!0})]}),w.jsx("div",{id:`tile-group-${F.title}`,className:`battlemap-workspace__widget-tray${K[F.title]?" is-open":""}`,role:"region","aria-label":`${F.title} tiles`,children:F.tiles.map(H=>w.jsx("div",{className:"battlemap-workspace__widget-template-wrapper",children:w.jsx("div",{className:`battlemap-workspace__widget-template battlemap-workspace__widget-template--hex${be?" is-draw-mode":""}${nt===H.id?" is-selected":""}`,onMouseDown:Q=>jd(H,Q),"aria-label":`${H.label} tile`,style:{"--widget-bg-image":`url("${H.image}")`},children:w.jsx("div",{className:"battlemap-workspace__widget-template-inner battlemap-workspace__widget-template-inner--hex"})})},H.id))})]},F.title))})]}):w.jsx("p",{className:"battlemap-workspace__hint",children:"Select a Tile Layer to browse and place tiles."})]})]})]})}function Cte(){const{projectId:t,projectType:e}=ab(),{user:n}=Ii(),r=no(),[i,s]=y.useState(null),[o,a]=y.useState(!0),[l,c]=y.useState(null);y.useEffect(()=>{(async()=>{if(!t||!n)return;a(!0);const{data:C,error:b}=await Ct.from("projects").select("*").eq("id",t).eq("user_id",n.id).single();if(b){c(b.message),a(!1);return}s(C),a(!1)})()},[t,n]);const h=(i==null?void 0:i.project_type)??e,f=h==="canvas",p=h==="battle-maps",x=(((i==null?void 0:i.battle_map_config)??{}).gridType??"square")==="hex";return f&&i?w.jsx(Gee,{project:i}):p?x?w.jsx(Ste,{}):w.jsx(nte,{}):w.jsxs("div",{className:"page",children:[w.jsxs("header",{className:"page__header",children:[w.jsxs("div",{children:[w.jsx("p",{className:"muted",children:"Workspace"}),w.jsx("h1",{children:(i==null?void 0:i.name)??"Loading project"}),w.jsxs("p",{className:"muted",children:["Project type: ",(i==null?void 0:i.project_type)??e]})]}),w.jsx("button",{className:"button button--ghost",onClick:()=>r("/app"),children:"Back to My Projects"})]}),o?w.jsx("p",{className:"muted",children:"Loading project"}):l?w.jsx("div",{className:"card",children:w.jsxs("div",{className:"card__body",children:[w.jsx("p",{className:"strong",children:"Unable to load project"}),w.jsx("p",{className:"muted",children:l})]})}):i?w.jsx("div",{className:"card",children:w.jsx("div",{className:"card__body",children:w.jsx("p",{className:"muted",children:"Workspace content will appear here."})})}):null]})}function G1({children:t}){const{user:e,loading:n}=Ii();return n?w.jsx("div",{className:"page",children:w.jsx("p",{className:"muted",children:"Checking authentication"})}):e?t:w.jsx($m,{to:"/login",replace:!0})}function gP({children:t}){const{user:e,loading:n}=Ii();return n?w.jsx("div",{className:"page",children:w.jsx("p",{className:"muted",children:"Checking authentication"})}):e?w.jsx($m,{to:"/app",replace:!0}):t}function kte(){return w.jsxs(nD,{children:[w.jsx(pi,{path:"/app",element:w.jsx(G1,{children:w.jsx(kW,{})})}),w.jsxs(pi,{path:"/settings",element:w.jsx(G1,{children:w.jsx(AW,{})}),children:[w.jsx(pi,{index:!0,element:w.jsx(NR,{})}),w.jsx(pi,{path:"profile",element:w.jsx(NR,{})}),w.jsx(pi,{path:"account",element:w.jsx(NW,{})}),w.jsx(pi,{path:"friends",element:w.jsx(AR,{})}),w.jsx(pi,{path:"notifications",element:w.jsx(AR,{})}),w.jsx(pi,{path:"appearance",element:w.jsx(LR,{})}),w.jsx(pi,{path:"themes",element:w.jsx(LR,{})}),w.jsx(pi,{path:"*",element:w.jsx($m,{to:"profile",replace:!0})})]}),w.jsx(pi,{path:"/workspace/:projectType/:projectId",element:w.jsx(G1,{children:w.jsx(Cte,{})})}),w.jsx(pi,{path:"/login",element:w.jsx(gP,{children:w.jsx(RW,{})})}),w.jsx(pi,{path:"/register",element:w.jsx(gP,{children:w.jsx(TW,{})})}),w.jsx(pi,{path:"*",element:w.jsx($m,{to:"/app",replace:!0})})]})}q1.createRoot(document.getElementById("root")).render(w.jsx(Be.StrictMode,{children:w.jsx(ED,{children:w.jsx(oF,{children:w.jsx(PW,{children:w.jsx(vW,{children:w.jsx(kte,{})})})})})}));
