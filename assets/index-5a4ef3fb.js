var jI=Object.defineProperty;var II=(t,e,n)=>e in t?jI(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var _t=(t,e,n)=>(II(t,typeof e!="symbol"?e+"":e,n),n),oy=(t,e,n)=>{if(!e.has(t))throw TypeError("Cannot "+n)};var Ui=(t,e,n)=>(oy(t,e,"read from private field"),n?n.call(t):e.get(t)),Yl=(t,e,n)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,n)},ay=(t,e,n,r)=>(oy(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n);var $s=(t,e,n)=>(oy(t,e,"access private method"),n);function vP(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function yP(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function OI(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),n}var wP={exports:{}},_0={},xP={exports:{}},$t={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vf=Symbol.for("react.element"),DI=Symbol.for("react.portal"),FI=Symbol.for("react.fragment"),BI=Symbol.for("react.strict_mode"),$I=Symbol.for("react.profiler"),zI=Symbol.for("react.provider"),UI=Symbol.for("react.context"),VI=Symbol.for("react.forward_ref"),WI=Symbol.for("react.suspense"),HI=Symbol.for("react.memo"),GI=Symbol.for("react.lazy"),fC=Symbol.iterator;function qI(t){return t===null||typeof t!="object"?null:(t=fC&&t[fC]||t["@@iterator"],typeof t=="function"?t:null)}var _P={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},bP=Object.assign,SP={};function fd(t,e,n){this.props=t,this.context=e,this.refs=SP,this.updater=n||_P}fd.prototype.isReactComponent={};fd.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};fd.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function CP(){}CP.prototype=fd.prototype;function d_(t,e,n){this.props=t,this.context=e,this.refs=SP,this.updater=n||_P}var h_=d_.prototype=new CP;h_.constructor=d_;bP(h_,fd.prototype);h_.isPureReactComponent=!0;var pC=Array.isArray,kP=Object.prototype.hasOwnProperty,f_={current:null},EP={key:!0,ref:!0,__self:!0,__source:!0};function RP(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)kP.call(e,r)&&!EP.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:Vf,type:t,key:s,ref:o,props:i,_owner:f_.current}}function YI(t,e){return{$$typeof:Vf,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function p_(t){return typeof t=="object"&&t!==null&&t.$$typeof===Vf}function KI(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var gC=/\/+/g;function ly(t,e){return typeof t=="object"&&t!==null&&t.key!=null?KI(""+t.key):e.toString(36)}function Vg(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Vf:case DI:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+ly(o,0):r,pC(i)?(n="",t!=null&&(n=t.replace(gC,"$&/")+"/"),Vg(i,e,n,"",function(c){return c})):i!=null&&(p_(i)&&(i=YI(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(gC,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",pC(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+ly(s,a);o+=Vg(s,e,n,l,i)}else if(l=qI(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+ly(s,a++),o+=Vg(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function zp(t,e,n){if(t==null)return t;var r=[],i=0;return Vg(t,r,"","",function(s){return e.call(n,s,i++)}),r}function XI(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var _i={current:null},Wg={transition:null},ZI={ReactCurrentDispatcher:_i,ReactCurrentBatchConfig:Wg,ReactCurrentOwner:f_};function TP(){throw Error("act(...) is not supported in production builds of React.")}$t.Children={map:zp,forEach:function(t,e,n){zp(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return zp(t,function(){e++}),e},toArray:function(t){return zp(t,function(e){return e})||[]},only:function(t){if(!p_(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};$t.Component=fd;$t.Fragment=FI;$t.Profiler=$I;$t.PureComponent=d_;$t.StrictMode=BI;$t.Suspense=WI;$t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ZI;$t.act=TP;$t.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=bP({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=f_.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)kP.call(e,l)&&!EP.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:Vf,type:t.type,key:i,ref:s,props:r,_owner:o}};$t.createContext=function(t){return t={$$typeof:UI,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:zI,_context:t},t.Consumer=t};$t.createElement=RP;$t.createFactory=function(t){var e=RP.bind(null,t);return e.type=t,e};$t.createRef=function(){return{current:null}};$t.forwardRef=function(t){return{$$typeof:VI,render:t}};$t.isValidElement=p_;$t.lazy=function(t){return{$$typeof:GI,_payload:{_status:-1,_result:t},_init:XI}};$t.memo=function(t,e){return{$$typeof:HI,type:t,compare:e===void 0?null:e}};$t.startTransition=function(t){var e=Wg.transition;Wg.transition={};try{t()}finally{Wg.transition=e}};$t.unstable_act=TP;$t.useCallback=function(t,e){return _i.current.useCallback(t,e)};$t.useContext=function(t){return _i.current.useContext(t)};$t.useDebugValue=function(){};$t.useDeferredValue=function(t){return _i.current.useDeferredValue(t)};$t.useEffect=function(t,e){return _i.current.useEffect(t,e)};$t.useId=function(){return _i.current.useId()};$t.useImperativeHandle=function(t,e,n){return _i.current.useImperativeHandle(t,e,n)};$t.useInsertionEffect=function(t,e){return _i.current.useInsertionEffect(t,e)};$t.useLayoutEffect=function(t,e){return _i.current.useLayoutEffect(t,e)};$t.useMemo=function(t,e){return _i.current.useMemo(t,e)};$t.useReducer=function(t,e,n){return _i.current.useReducer(t,e,n)};$t.useRef=function(t){return _i.current.useRef(t)};$t.useState=function(t){return _i.current.useState(t)};$t.useSyncExternalStore=function(t,e,n){return _i.current.useSyncExternalStore(t,e,n)};$t.useTransition=function(){return _i.current.useTransition()};$t.version="18.3.1";xP.exports=$t;var y=xP.exports;const Be=yP(y),PP=vP({__proto__:null,default:Be},[y]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var QI=y,JI=Symbol.for("react.element"),eO=Symbol.for("react.fragment"),tO=Object.prototype.hasOwnProperty,nO=QI.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,rO={key:!0,ref:!0,__self:!0,__source:!0};function LP(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)tO.call(e,r)&&!rO.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:JI,type:t,key:s,ref:o,props:i,_owner:nO.current}}_0.Fragment=eO;_0.jsx=LP;_0.jsxs=LP;wP.exports=_0;var w=wP.exports,Y1={},MP={exports:{}},ns={},AP={exports:{}},NP={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(O,K){var Y=O.length;O.push(K);e:for(;0<Y;){var xe=Y-1>>>1,re=O[xe];if(0<i(re,K))O[xe]=K,O[Y]=re,Y=xe;else break e}}function n(O){return O.length===0?null:O[0]}function r(O){if(O.length===0)return null;var K=O[0],Y=O.pop();if(Y!==K){O[0]=Y;e:for(var xe=0,re=O.length,ue=re>>>1;xe<ue;){var ke=2*(xe+1)-1,qe=O[ke],he=ke+1,ge=O[he];if(0>i(qe,Y))he<re&&0>i(ge,qe)?(O[xe]=ge,O[he]=Y,xe=he):(O[xe]=qe,O[ke]=Y,xe=ke);else if(he<re&&0>i(ge,Y))O[xe]=ge,O[he]=Y,xe=he;else break e}}return K}function i(O,K){var Y=O.sortIndex-K.sortIndex;return Y!==0?Y:O.id-K.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],h=1,f=null,p=3,g=!1,v=!1,x=!1,k=typeof setTimeout=="function"?setTimeout:null,C=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _(O){for(var K=n(c);K!==null;){if(K.callback===null)r(c);else if(K.startTime<=O)r(c),K.sortIndex=K.expirationTime,e(l,K);else break;K=n(c)}}function T(O){if(x=!1,_(O),!v)if(n(l)!==null)v=!0,G(R);else{var K=n(c);K!==null&&te(T,K.startTime-O)}}function R(O,K){v=!1,x&&(x=!1,C(A),A=-1),g=!0;var Y=p;try{for(_(K),f=n(l);f!==null&&(!(f.expirationTime>K)||O&&!V());){var xe=f.callback;if(typeof xe=="function"){f.callback=null,p=f.priorityLevel;var re=xe(f.expirationTime<=K);K=t.unstable_now(),typeof re=="function"?f.callback=re:f===n(l)&&r(l),_(K)}else r(l);f=n(l)}if(f!==null)var ue=!0;else{var ke=n(c);ke!==null&&te(T,ke.startTime-K),ue=!1}return ue}finally{f=null,p=Y,g=!1}}var L=!1,M=null,A=-1,$=5,j=-1;function V(){return!(t.unstable_now()-j<$)}function U(){if(M!==null){var O=t.unstable_now();j=O;var K=!0;try{K=M(!0,O)}finally{K?B():(L=!1,M=null)}}else L=!1}var B;if(typeof b=="function")B=function(){b(U)};else if(typeof MessageChannel<"u"){var Z=new MessageChannel,q=Z.port2;Z.port1.onmessage=U,B=function(){q.postMessage(null)}}else B=function(){k(U,0)};function G(O){M=O,L||(L=!0,B())}function te(O,K){A=k(function(){O(t.unstable_now())},K)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(O){O.callback=null},t.unstable_continueExecution=function(){v||g||(v=!0,G(R))},t.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):$=0<O?Math.floor(1e3/O):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(O){switch(p){case 1:case 2:case 3:var K=3;break;default:K=p}var Y=p;p=K;try{return O()}finally{p=Y}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(O,K){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var Y=p;p=O;try{return K()}finally{p=Y}},t.unstable_scheduleCallback=function(O,K,Y){var xe=t.unstable_now();switch(typeof Y=="object"&&Y!==null?(Y=Y.delay,Y=typeof Y=="number"&&0<Y?xe+Y:xe):Y=xe,O){case 1:var re=-1;break;case 2:re=250;break;case 5:re=1073741823;break;case 4:re=1e4;break;default:re=5e3}return re=Y+re,O={id:h++,callback:K,priorityLevel:O,startTime:Y,expirationTime:re,sortIndex:-1},Y>xe?(O.sortIndex=Y,e(c,O),n(l)===null&&O===n(c)&&(x?(C(A),A=-1):x=!0,te(T,Y-xe))):(O.sortIndex=re,e(l,O),v||g||(v=!0,G(R))),O},t.unstable_shouldYield=V,t.unstable_wrapCallback=function(O){var K=p;return function(){var Y=p;p=K;try{return O.apply(this,arguments)}finally{p=Y}}}})(NP);AP.exports=NP;var jh=AP.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iO=y,es=jh;function Ee(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var jP=new Set,lf={};function Tu(t,e){qc(t,e),qc(t+"Capture",e)}function qc(t,e){for(lf[t]=e,t=0;t<e.length;t++)jP.add(e[t])}var aa=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),K1=Object.prototype.hasOwnProperty,sO=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,mC={},vC={};function oO(t){return K1.call(vC,t)?!0:K1.call(mC,t)?!1:sO.test(t)?vC[t]=!0:(mC[t]=!0,!1)}function aO(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function lO(t,e,n,r){if(e===null||typeof e>"u"||aO(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function bi(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var qr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){qr[t]=new bi(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];qr[e]=new bi(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){qr[t]=new bi(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){qr[t]=new bi(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){qr[t]=new bi(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){qr[t]=new bi(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){qr[t]=new bi(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){qr[t]=new bi(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){qr[t]=new bi(t,5,!1,t.toLowerCase(),null,!1,!1)});var g_=/[\-:]([a-z])/g;function m_(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(g_,m_);qr[e]=new bi(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(g_,m_);qr[e]=new bi(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(g_,m_);qr[e]=new bi(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){qr[t]=new bi(t,1,!1,t.toLowerCase(),null,!1,!1)});qr.xlinkHref=new bi("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){qr[t]=new bi(t,1,!1,t.toLowerCase(),null,!0,!0)});function v_(t,e,n,r){var i=qr.hasOwnProperty(e)?qr[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(lO(e,n,i,r)&&(n=null),r||i===null?oO(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var ga=iO.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Up=Symbol.for("react.element"),oc=Symbol.for("react.portal"),ac=Symbol.for("react.fragment"),y_=Symbol.for("react.strict_mode"),X1=Symbol.for("react.profiler"),IP=Symbol.for("react.provider"),OP=Symbol.for("react.context"),w_=Symbol.for("react.forward_ref"),Z1=Symbol.for("react.suspense"),Q1=Symbol.for("react.suspense_list"),x_=Symbol.for("react.memo"),qa=Symbol.for("react.lazy"),DP=Symbol.for("react.offscreen"),yC=Symbol.iterator;function Jd(t){return t===null||typeof t!="object"?null:(t=yC&&t[yC]||t["@@iterator"],typeof t=="function"?t:null)}var Fn=Object.assign,uy;function wh(t){if(uy===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);uy=e&&e[1]||""}return`
`+uy+t}var cy=!1;function dy(t,e){if(!t||cy)return"";cy=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{cy=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?wh(t):""}function uO(t){switch(t.tag){case 5:return wh(t.type);case 16:return wh("Lazy");case 13:return wh("Suspense");case 19:return wh("SuspenseList");case 0:case 2:case 15:return t=dy(t.type,!1),t;case 11:return t=dy(t.type.render,!1),t;case 1:return t=dy(t.type,!0),t;default:return""}}function J1(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ac:return"Fragment";case oc:return"Portal";case X1:return"Profiler";case y_:return"StrictMode";case Z1:return"Suspense";case Q1:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case OP:return(t.displayName||"Context")+".Consumer";case IP:return(t._context.displayName||"Context")+".Provider";case w_:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case x_:return e=t.displayName||null,e!==null?e:J1(t.type)||"Memo";case qa:e=t._payload,t=t._init;try{return J1(t(e))}catch{}}return null}function cO(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return J1(e);case 8:return e===y_?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function vl(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function FP(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function dO(t){var e=FP(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Vp(t){t._valueTracker||(t._valueTracker=dO(t))}function BP(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=FP(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function mm(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function ew(t,e){var n=e.checked;return Fn({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function wC(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=vl(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function $P(t,e){e=e.checked,e!=null&&v_(t,"checked",e,!1)}function tw(t,e){$P(t,e);var n=vl(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?nw(t,e.type,n):e.hasOwnProperty("defaultValue")&&nw(t,e.type,vl(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function xC(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function nw(t,e,n){(e!=="number"||mm(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var xh=Array.isArray;function Nc(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+vl(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function rw(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Ee(91));return Fn({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function _C(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Ee(92));if(xh(n)){if(1<n.length)throw Error(Ee(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:vl(n)}}function zP(t,e){var n=vl(e.value),r=vl(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function bC(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function UP(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function iw(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?UP(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Wp,VP=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Wp=Wp||document.createElement("div"),Wp.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Wp.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function uf(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Ih={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},hO=["Webkit","ms","Moz","O"];Object.keys(Ih).forEach(function(t){hO.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Ih[e]=Ih[t]})});function WP(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Ih.hasOwnProperty(t)&&Ih[t]?(""+e).trim():e+"px"}function HP(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=WP(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var fO=Fn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function sw(t,e){if(e){if(fO[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Ee(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Ee(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Ee(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Ee(62))}}function ow(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var aw=null;function __(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var lw=null,jc=null,Ic=null;function SC(t){if(t=Gf(t)){if(typeof lw!="function")throw Error(Ee(280));var e=t.stateNode;e&&(e=E0(e),lw(t.stateNode,t.type,e))}}function GP(t){jc?Ic?Ic.push(t):Ic=[t]:jc=t}function qP(){if(jc){var t=jc,e=Ic;if(Ic=jc=null,SC(t),e)for(t=0;t<e.length;t++)SC(e[t])}}function YP(t,e){return t(e)}function KP(){}var hy=!1;function XP(t,e,n){if(hy)return t(e,n);hy=!0;try{return YP(t,e,n)}finally{hy=!1,(jc!==null||Ic!==null)&&(KP(),qP())}}function cf(t,e){var n=t.stateNode;if(n===null)return null;var r=E0(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Ee(231,e,typeof n));return n}var uw=!1;if(aa)try{var eh={};Object.defineProperty(eh,"passive",{get:function(){uw=!0}}),window.addEventListener("test",eh,eh),window.removeEventListener("test",eh,eh)}catch{uw=!1}function pO(t,e,n,r,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(h){this.onError(h)}}var Oh=!1,vm=null,ym=!1,cw=null,gO={onError:function(t){Oh=!0,vm=t}};function mO(t,e,n,r,i,s,o,a,l){Oh=!1,vm=null,pO.apply(gO,arguments)}function vO(t,e,n,r,i,s,o,a,l){if(mO.apply(this,arguments),Oh){if(Oh){var c=vm;Oh=!1,vm=null}else throw Error(Ee(198));ym||(ym=!0,cw=c)}}function Pu(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function ZP(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function CC(t){if(Pu(t)!==t)throw Error(Ee(188))}function yO(t){var e=t.alternate;if(!e){if(e=Pu(t),e===null)throw Error(Ee(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return CC(i),t;if(s===r)return CC(i),e;s=s.sibling}throw Error(Ee(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(Ee(189))}}if(n.alternate!==r)throw Error(Ee(190))}if(n.tag!==3)throw Error(Ee(188));return n.stateNode.current===n?t:e}function QP(t){return t=yO(t),t!==null?JP(t):null}function JP(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=JP(t);if(e!==null)return e;t=t.sibling}return null}var e4=es.unstable_scheduleCallback,kC=es.unstable_cancelCallback,wO=es.unstable_shouldYield,xO=es.unstable_requestPaint,sr=es.unstable_now,_O=es.unstable_getCurrentPriorityLevel,b_=es.unstable_ImmediatePriority,t4=es.unstable_UserBlockingPriority,wm=es.unstable_NormalPriority,bO=es.unstable_LowPriority,n4=es.unstable_IdlePriority,b0=null,So=null;function SO(t){if(So&&typeof So.onCommitFiberRoot=="function")try{So.onCommitFiberRoot(b0,t,void 0,(t.current.flags&128)===128)}catch{}}var Qs=Math.clz32?Math.clz32:EO,CO=Math.log,kO=Math.LN2;function EO(t){return t>>>=0,t===0?32:31-(CO(t)/kO|0)|0}var Hp=64,Gp=4194304;function _h(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function xm(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=_h(a):(s&=o,s!==0&&(r=_h(s)))}else o=n&~i,o!==0?r=_h(o):s!==0&&(r=_h(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Qs(e),i=1<<n,r|=t[n],e&=~i;return r}function RO(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function TO(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-Qs(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=RO(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function dw(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function r4(){var t=Hp;return Hp<<=1,!(Hp&4194240)&&(Hp=64),t}function fy(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Wf(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Qs(e),t[e]=n}function PO(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Qs(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function S_(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Qs(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var cn=0;function i4(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var s4,C_,o4,a4,l4,hw=!1,qp=[],sl=null,ol=null,al=null,df=new Map,hf=new Map,Xa=[],LO="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function EC(t,e){switch(t){case"focusin":case"focusout":sl=null;break;case"dragenter":case"dragleave":ol=null;break;case"mouseover":case"mouseout":al=null;break;case"pointerover":case"pointerout":df.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":hf.delete(e.pointerId)}}function th(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Gf(e),e!==null&&C_(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function MO(t,e,n,r,i){switch(e){case"focusin":return sl=th(sl,t,e,n,r,i),!0;case"dragenter":return ol=th(ol,t,e,n,r,i),!0;case"mouseover":return al=th(al,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return df.set(s,th(df.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,hf.set(s,th(hf.get(s)||null,t,e,n,r,i)),!0}return!1}function u4(t){var e=au(t.target);if(e!==null){var n=Pu(e);if(n!==null){if(e=n.tag,e===13){if(e=ZP(n),e!==null){t.blockedOn=e,l4(t.priority,function(){o4(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Hg(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=fw(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);aw=r,n.target.dispatchEvent(r),aw=null}else return e=Gf(n),e!==null&&C_(e),t.blockedOn=n,!1;e.shift()}return!0}function RC(t,e,n){Hg(t)&&n.delete(e)}function AO(){hw=!1,sl!==null&&Hg(sl)&&(sl=null),ol!==null&&Hg(ol)&&(ol=null),al!==null&&Hg(al)&&(al=null),df.forEach(RC),hf.forEach(RC)}function nh(t,e){t.blockedOn===e&&(t.blockedOn=null,hw||(hw=!0,es.unstable_scheduleCallback(es.unstable_NormalPriority,AO)))}function ff(t){function e(i){return nh(i,t)}if(0<qp.length){nh(qp[0],t);for(var n=1;n<qp.length;n++){var r=qp[n];r.blockedOn===t&&(r.blockedOn=null)}}for(sl!==null&&nh(sl,t),ol!==null&&nh(ol,t),al!==null&&nh(al,t),df.forEach(e),hf.forEach(e),n=0;n<Xa.length;n++)r=Xa[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Xa.length&&(n=Xa[0],n.blockedOn===null);)u4(n),n.blockedOn===null&&Xa.shift()}var Oc=ga.ReactCurrentBatchConfig,_m=!0;function NO(t,e,n,r){var i=cn,s=Oc.transition;Oc.transition=null;try{cn=1,k_(t,e,n,r)}finally{cn=i,Oc.transition=s}}function jO(t,e,n,r){var i=cn,s=Oc.transition;Oc.transition=null;try{cn=4,k_(t,e,n,r)}finally{cn=i,Oc.transition=s}}function k_(t,e,n,r){if(_m){var i=fw(t,e,n,r);if(i===null)Sy(t,e,r,bm,n),EC(t,r);else if(MO(i,t,e,n,r))r.stopPropagation();else if(EC(t,r),e&4&&-1<LO.indexOf(t)){for(;i!==null;){var s=Gf(i);if(s!==null&&s4(s),s=fw(t,e,n,r),s===null&&Sy(t,e,r,bm,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else Sy(t,e,r,null,n)}}var bm=null;function fw(t,e,n,r){if(bm=null,t=__(r),t=au(t),t!==null)if(e=Pu(t),e===null)t=null;else if(n=e.tag,n===13){if(t=ZP(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return bm=t,null}function c4(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(_O()){case b_:return 1;case t4:return 4;case wm:case bO:return 16;case n4:return 536870912;default:return 16}default:return 16}}var el=null,E_=null,Gg=null;function d4(){if(Gg)return Gg;var t,e=E_,n=e.length,r,i="value"in el?el.value:el.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return Gg=i.slice(t,1<r?1-r:void 0)}function qg(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Yp(){return!0}function TC(){return!1}function rs(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Yp:TC,this.isPropagationStopped=TC,this}return Fn(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Yp)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Yp)},persist:function(){},isPersistent:Yp}),e}var pd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},R_=rs(pd),Hf=Fn({},pd,{view:0,detail:0}),IO=rs(Hf),py,gy,rh,S0=Fn({},Hf,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:T_,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==rh&&(rh&&t.type==="mousemove"?(py=t.screenX-rh.screenX,gy=t.screenY-rh.screenY):gy=py=0,rh=t),py)},movementY:function(t){return"movementY"in t?t.movementY:gy}}),PC=rs(S0),OO=Fn({},S0,{dataTransfer:0}),DO=rs(OO),FO=Fn({},Hf,{relatedTarget:0}),my=rs(FO),BO=Fn({},pd,{animationName:0,elapsedTime:0,pseudoElement:0}),$O=rs(BO),zO=Fn({},pd,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),UO=rs(zO),VO=Fn({},pd,{data:0}),LC=rs(VO),WO={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},HO={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},GO={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function qO(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=GO[t])?!!e[t]:!1}function T_(){return qO}var YO=Fn({},Hf,{key:function(t){if(t.key){var e=WO[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=qg(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?HO[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:T_,charCode:function(t){return t.type==="keypress"?qg(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?qg(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),KO=rs(YO),XO=Fn({},S0,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),MC=rs(XO),ZO=Fn({},Hf,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:T_}),QO=rs(ZO),JO=Fn({},pd,{propertyName:0,elapsedTime:0,pseudoElement:0}),e8=rs(JO),t8=Fn({},S0,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),n8=rs(t8),r8=[9,13,27,32],P_=aa&&"CompositionEvent"in window,Dh=null;aa&&"documentMode"in document&&(Dh=document.documentMode);var i8=aa&&"TextEvent"in window&&!Dh,h4=aa&&(!P_||Dh&&8<Dh&&11>=Dh),AC=String.fromCharCode(32),NC=!1;function f4(t,e){switch(t){case"keyup":return r8.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function p4(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var lc=!1;function s8(t,e){switch(t){case"compositionend":return p4(e);case"keypress":return e.which!==32?null:(NC=!0,AC);case"textInput":return t=e.data,t===AC&&NC?null:t;default:return null}}function o8(t,e){if(lc)return t==="compositionend"||!P_&&f4(t,e)?(t=d4(),Gg=E_=el=null,lc=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return h4&&e.locale!=="ko"?null:e.data;default:return null}}var a8={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function jC(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!a8[t.type]:e==="textarea"}function g4(t,e,n,r){GP(r),e=Sm(e,"onChange"),0<e.length&&(n=new R_("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Fh=null,pf=null;function l8(t){E4(t,0)}function C0(t){var e=dc(t);if(BP(e))return t}function u8(t,e){if(t==="change")return e}var m4=!1;if(aa){var vy;if(aa){var yy="oninput"in document;if(!yy){var IC=document.createElement("div");IC.setAttribute("oninput","return;"),yy=typeof IC.oninput=="function"}vy=yy}else vy=!1;m4=vy&&(!document.documentMode||9<document.documentMode)}function OC(){Fh&&(Fh.detachEvent("onpropertychange",v4),pf=Fh=null)}function v4(t){if(t.propertyName==="value"&&C0(pf)){var e=[];g4(e,pf,t,__(t)),XP(l8,e)}}function c8(t,e,n){t==="focusin"?(OC(),Fh=e,pf=n,Fh.attachEvent("onpropertychange",v4)):t==="focusout"&&OC()}function d8(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return C0(pf)}function h8(t,e){if(t==="click")return C0(e)}function f8(t,e){if(t==="input"||t==="change")return C0(e)}function p8(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var eo=typeof Object.is=="function"?Object.is:p8;function gf(t,e){if(eo(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!K1.call(e,i)||!eo(t[i],e[i]))return!1}return!0}function DC(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function FC(t,e){var n=DC(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=DC(n)}}function y4(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?y4(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function w4(){for(var t=window,e=mm();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=mm(t.document)}return e}function L_(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function g8(t){var e=w4(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&y4(n.ownerDocument.documentElement,n)){if(r!==null&&L_(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=FC(n,s);var o=FC(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var m8=aa&&"documentMode"in document&&11>=document.documentMode,uc=null,pw=null,Bh=null,gw=!1;function BC(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;gw||uc==null||uc!==mm(r)||(r=uc,"selectionStart"in r&&L_(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Bh&&gf(Bh,r)||(Bh=r,r=Sm(pw,"onSelect"),0<r.length&&(e=new R_("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=uc)))}function Kp(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var cc={animationend:Kp("Animation","AnimationEnd"),animationiteration:Kp("Animation","AnimationIteration"),animationstart:Kp("Animation","AnimationStart"),transitionend:Kp("Transition","TransitionEnd")},wy={},x4={};aa&&(x4=document.createElement("div").style,"AnimationEvent"in window||(delete cc.animationend.animation,delete cc.animationiteration.animation,delete cc.animationstart.animation),"TransitionEvent"in window||delete cc.transitionend.transition);function k0(t){if(wy[t])return wy[t];if(!cc[t])return t;var e=cc[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in x4)return wy[t]=e[n];return t}var _4=k0("animationend"),b4=k0("animationiteration"),S4=k0("animationstart"),C4=k0("transitionend"),k4=new Map,$C="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function _l(t,e){k4.set(t,e),Tu(e,[t])}for(var xy=0;xy<$C.length;xy++){var _y=$C[xy],v8=_y.toLowerCase(),y8=_y[0].toUpperCase()+_y.slice(1);_l(v8,"on"+y8)}_l(_4,"onAnimationEnd");_l(b4,"onAnimationIteration");_l(S4,"onAnimationStart");_l("dblclick","onDoubleClick");_l("focusin","onFocus");_l("focusout","onBlur");_l(C4,"onTransitionEnd");qc("onMouseEnter",["mouseout","mouseover"]);qc("onMouseLeave",["mouseout","mouseover"]);qc("onPointerEnter",["pointerout","pointerover"]);qc("onPointerLeave",["pointerout","pointerover"]);Tu("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Tu("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Tu("onBeforeInput",["compositionend","keypress","textInput","paste"]);Tu("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Tu("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Tu("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var bh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),w8=new Set("cancel close invalid load scroll toggle".split(" ").concat(bh));function zC(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,vO(r,e,void 0,t),t.currentTarget=null}function E4(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;zC(i,a,c),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;zC(i,a,c),s=l}}}if(ym)throw t=cw,ym=!1,cw=null,t}function bn(t,e){var n=e[xw];n===void 0&&(n=e[xw]=new Set);var r=t+"__bubble";n.has(r)||(R4(e,t,2,!1),n.add(r))}function by(t,e,n){var r=0;e&&(r|=4),R4(n,t,r,e)}var Xp="_reactListening"+Math.random().toString(36).slice(2);function mf(t){if(!t[Xp]){t[Xp]=!0,jP.forEach(function(n){n!=="selectionchange"&&(w8.has(n)||by(n,!1,t),by(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Xp]||(e[Xp]=!0,by("selectionchange",!1,e))}}function R4(t,e,n,r){switch(c4(e)){case 1:var i=NO;break;case 4:i=jO;break;default:i=k_}n=i.bind(null,e,n,t),i=void 0,!uw||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Sy(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=au(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}XP(function(){var c=s,h=__(n),f=[];e:{var p=k4.get(t);if(p!==void 0){var g=R_,v=t;switch(t){case"keypress":if(qg(n)===0)break e;case"keydown":case"keyup":g=KO;break;case"focusin":v="focus",g=my;break;case"focusout":v="blur",g=my;break;case"beforeblur":case"afterblur":g=my;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=PC;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=DO;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=QO;break;case _4:case b4:case S4:g=$O;break;case C4:g=e8;break;case"scroll":g=IO;break;case"wheel":g=n8;break;case"copy":case"cut":case"paste":g=UO;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=MC}var x=(e&4)!==0,k=!x&&t==="scroll",C=x?p!==null?p+"Capture":null:p;x=[];for(var b=c,_;b!==null;){_=b;var T=_.stateNode;if(_.tag===5&&T!==null&&(_=T,C!==null&&(T=cf(b,C),T!=null&&x.push(vf(b,T,_)))),k)break;b=b.return}0<x.length&&(p=new g(p,v,null,n,h),f.push({event:p,listeners:x}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",g=t==="mouseout"||t==="pointerout",p&&n!==aw&&(v=n.relatedTarget||n.fromElement)&&(au(v)||v[la]))break e;if((g||p)&&(p=h.window===h?h:(p=h.ownerDocument)?p.defaultView||p.parentWindow:window,g?(v=n.relatedTarget||n.toElement,g=c,v=v?au(v):null,v!==null&&(k=Pu(v),v!==k||v.tag!==5&&v.tag!==6)&&(v=null)):(g=null,v=c),g!==v)){if(x=PC,T="onMouseLeave",C="onMouseEnter",b="mouse",(t==="pointerout"||t==="pointerover")&&(x=MC,T="onPointerLeave",C="onPointerEnter",b="pointer"),k=g==null?p:dc(g),_=v==null?p:dc(v),p=new x(T,b+"leave",g,n,h),p.target=k,p.relatedTarget=_,T=null,au(h)===c&&(x=new x(C,b+"enter",v,n,h),x.target=_,x.relatedTarget=k,T=x),k=T,g&&v)t:{for(x=g,C=v,b=0,_=x;_;_=Yu(_))b++;for(_=0,T=C;T;T=Yu(T))_++;for(;0<b-_;)x=Yu(x),b--;for(;0<_-b;)C=Yu(C),_--;for(;b--;){if(x===C||C!==null&&x===C.alternate)break t;x=Yu(x),C=Yu(C)}x=null}else x=null;g!==null&&UC(f,p,g,x,!1),v!==null&&k!==null&&UC(f,k,v,x,!0)}}e:{if(p=c?dc(c):window,g=p.nodeName&&p.nodeName.toLowerCase(),g==="select"||g==="input"&&p.type==="file")var R=u8;else if(jC(p))if(m4)R=f8;else{R=d8;var L=c8}else(g=p.nodeName)&&g.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(R=h8);if(R&&(R=R(t,c))){g4(f,R,n,h);break e}L&&L(t,p,c),t==="focusout"&&(L=p._wrapperState)&&L.controlled&&p.type==="number"&&nw(p,"number",p.value)}switch(L=c?dc(c):window,t){case"focusin":(jC(L)||L.contentEditable==="true")&&(uc=L,pw=c,Bh=null);break;case"focusout":Bh=pw=uc=null;break;case"mousedown":gw=!0;break;case"contextmenu":case"mouseup":case"dragend":gw=!1,BC(f,n,h);break;case"selectionchange":if(m8)break;case"keydown":case"keyup":BC(f,n,h)}var M;if(P_)e:{switch(t){case"compositionstart":var A="onCompositionStart";break e;case"compositionend":A="onCompositionEnd";break e;case"compositionupdate":A="onCompositionUpdate";break e}A=void 0}else lc?f4(t,n)&&(A="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(A="onCompositionStart");A&&(h4&&n.locale!=="ko"&&(lc||A!=="onCompositionStart"?A==="onCompositionEnd"&&lc&&(M=d4()):(el=h,E_="value"in el?el.value:el.textContent,lc=!0)),L=Sm(c,A),0<L.length&&(A=new LC(A,t,null,n,h),f.push({event:A,listeners:L}),M?A.data=M:(M=p4(n),M!==null&&(A.data=M)))),(M=i8?s8(t,n):o8(t,n))&&(c=Sm(c,"onBeforeInput"),0<c.length&&(h=new LC("onBeforeInput","beforeinput",null,n,h),f.push({event:h,listeners:c}),h.data=M))}E4(f,e)})}function vf(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Sm(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=cf(t,n),s!=null&&r.unshift(vf(t,s,i)),s=cf(t,e),s!=null&&r.push(vf(t,s,i))),t=t.return}return r}function Yu(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function UC(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,i?(l=cf(n,s),l!=null&&o.unshift(vf(n,l,a))):i||(l=cf(n,s),l!=null&&o.push(vf(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var x8=/\r\n?/g,_8=/\u0000|\uFFFD/g;function VC(t){return(typeof t=="string"?t:""+t).replace(x8,`
`).replace(_8,"")}function Zp(t,e,n){if(e=VC(e),VC(t)!==e&&n)throw Error(Ee(425))}function Cm(){}var mw=null,vw=null;function yw(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var ww=typeof setTimeout=="function"?setTimeout:void 0,b8=typeof clearTimeout=="function"?clearTimeout:void 0,WC=typeof Promise=="function"?Promise:void 0,S8=typeof queueMicrotask=="function"?queueMicrotask:typeof WC<"u"?function(t){return WC.resolve(null).then(t).catch(C8)}:ww;function C8(t){setTimeout(function(){throw t})}function Cy(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),ff(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);ff(e)}function ll(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function HC(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var gd=Math.random().toString(36).slice(2),_o="__reactFiber$"+gd,yf="__reactProps$"+gd,la="__reactContainer$"+gd,xw="__reactEvents$"+gd,k8="__reactListeners$"+gd,E8="__reactHandles$"+gd;function au(t){var e=t[_o];if(e)return e;for(var n=t.parentNode;n;){if(e=n[la]||n[_o]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=HC(t);t!==null;){if(n=t[_o])return n;t=HC(t)}return e}t=n,n=t.parentNode}return null}function Gf(t){return t=t[_o]||t[la],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function dc(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Ee(33))}function E0(t){return t[yf]||null}var _w=[],hc=-1;function bl(t){return{current:t}}function Sn(t){0>hc||(t.current=_w[hc],_w[hc]=null,hc--)}function wn(t,e){hc++,_w[hc]=t.current,t.current=e}var yl={},ui=bl(yl),Ni=bl(!1),xu=yl;function Yc(t,e){var n=t.type.contextTypes;if(!n)return yl;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function ji(t){return t=t.childContextTypes,t!=null}function km(){Sn(Ni),Sn(ui)}function GC(t,e,n){if(ui.current!==yl)throw Error(Ee(168));wn(ui,e),wn(Ni,n)}function T4(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(Ee(108,cO(t)||"Unknown",i));return Fn({},n,r)}function Em(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||yl,xu=ui.current,wn(ui,t),wn(Ni,Ni.current),!0}function qC(t,e,n){var r=t.stateNode;if(!r)throw Error(Ee(169));n?(t=T4(t,e,xu),r.__reactInternalMemoizedMergedChildContext=t,Sn(Ni),Sn(ui),wn(ui,t)):Sn(Ni),wn(Ni,n)}var ta=null,R0=!1,ky=!1;function P4(t){ta===null?ta=[t]:ta.push(t)}function R8(t){R0=!0,P4(t)}function Sl(){if(!ky&&ta!==null){ky=!0;var t=0,e=cn;try{var n=ta;for(cn=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}ta=null,R0=!1}catch(i){throw ta!==null&&(ta=ta.slice(t+1)),e4(b_,Sl),i}finally{cn=e,ky=!1}}return null}var fc=[],pc=0,Rm=null,Tm=0,ys=[],ws=0,_u=null,na=1,ra="";function Jl(t,e){fc[pc++]=Tm,fc[pc++]=Rm,Rm=t,Tm=e}function L4(t,e,n){ys[ws++]=na,ys[ws++]=ra,ys[ws++]=_u,_u=t;var r=na;t=ra;var i=32-Qs(r)-1;r&=~(1<<i),n+=1;var s=32-Qs(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,na=1<<32-Qs(e)+i|n<<i|r,ra=s+t}else na=1<<s|n<<i|r,ra=t}function M_(t){t.return!==null&&(Jl(t,1),L4(t,1,0))}function A_(t){for(;t===Rm;)Rm=fc[--pc],fc[pc]=null,Tm=fc[--pc],fc[pc]=null;for(;t===_u;)_u=ys[--ws],ys[ws]=null,ra=ys[--ws],ys[ws]=null,na=ys[--ws],ys[ws]=null}var Zi=null,Xi=null,En=!1,Ks=null;function M4(t,e){var n=Ss(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function YC(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Zi=t,Xi=ll(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Zi=t,Xi=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=_u!==null?{id:na,overflow:ra}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Ss(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Zi=t,Xi=null,!0):!1;default:return!1}}function bw(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Sw(t){if(En){var e=Xi;if(e){var n=e;if(!YC(t,e)){if(bw(t))throw Error(Ee(418));e=ll(n.nextSibling);var r=Zi;e&&YC(t,e)?M4(r,n):(t.flags=t.flags&-4097|2,En=!1,Zi=t)}}else{if(bw(t))throw Error(Ee(418));t.flags=t.flags&-4097|2,En=!1,Zi=t}}}function KC(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Zi=t}function Qp(t){if(t!==Zi)return!1;if(!En)return KC(t),En=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!yw(t.type,t.memoizedProps)),e&&(e=Xi)){if(bw(t))throw A4(),Error(Ee(418));for(;e;)M4(t,e),e=ll(e.nextSibling)}if(KC(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Ee(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Xi=ll(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Xi=null}}else Xi=Zi?ll(t.stateNode.nextSibling):null;return!0}function A4(){for(var t=Xi;t;)t=ll(t.nextSibling)}function Kc(){Xi=Zi=null,En=!1}function N_(t){Ks===null?Ks=[t]:Ks.push(t)}var T8=ga.ReactCurrentBatchConfig;function ih(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Ee(309));var r=n.stateNode}if(!r)throw Error(Ee(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(Ee(284));if(!n._owner)throw Error(Ee(290,t))}return t}function Jp(t,e){throw t=Object.prototype.toString.call(e),Error(Ee(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function XC(t){var e=t._init;return e(t._payload)}function N4(t){function e(C,b){if(t){var _=C.deletions;_===null?(C.deletions=[b],C.flags|=16):_.push(b)}}function n(C,b){if(!t)return null;for(;b!==null;)e(C,b),b=b.sibling;return null}function r(C,b){for(C=new Map;b!==null;)b.key!==null?C.set(b.key,b):C.set(b.index,b),b=b.sibling;return C}function i(C,b){return C=hl(C,b),C.index=0,C.sibling=null,C}function s(C,b,_){return C.index=_,t?(_=C.alternate,_!==null?(_=_.index,_<b?(C.flags|=2,b):_):(C.flags|=2,b)):(C.flags|=1048576,b)}function o(C){return t&&C.alternate===null&&(C.flags|=2),C}function a(C,b,_,T){return b===null||b.tag!==6?(b=Ay(_,C.mode,T),b.return=C,b):(b=i(b,_),b.return=C,b)}function l(C,b,_,T){var R=_.type;return R===ac?h(C,b,_.props.children,T,_.key):b!==null&&(b.elementType===R||typeof R=="object"&&R!==null&&R.$$typeof===qa&&XC(R)===b.type)?(T=i(b,_.props),T.ref=ih(C,b,_),T.return=C,T):(T=em(_.type,_.key,_.props,null,C.mode,T),T.ref=ih(C,b,_),T.return=C,T)}function c(C,b,_,T){return b===null||b.tag!==4||b.stateNode.containerInfo!==_.containerInfo||b.stateNode.implementation!==_.implementation?(b=Ny(_,C.mode,T),b.return=C,b):(b=i(b,_.children||[]),b.return=C,b)}function h(C,b,_,T,R){return b===null||b.tag!==7?(b=gu(_,C.mode,T,R),b.return=C,b):(b=i(b,_),b.return=C,b)}function f(C,b,_){if(typeof b=="string"&&b!==""||typeof b=="number")return b=Ay(""+b,C.mode,_),b.return=C,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Up:return _=em(b.type,b.key,b.props,null,C.mode,_),_.ref=ih(C,null,b),_.return=C,_;case oc:return b=Ny(b,C.mode,_),b.return=C,b;case qa:var T=b._init;return f(C,T(b._payload),_)}if(xh(b)||Jd(b))return b=gu(b,C.mode,_,null),b.return=C,b;Jp(C,b)}return null}function p(C,b,_,T){var R=b!==null?b.key:null;if(typeof _=="string"&&_!==""||typeof _=="number")return R!==null?null:a(C,b,""+_,T);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Up:return _.key===R?l(C,b,_,T):null;case oc:return _.key===R?c(C,b,_,T):null;case qa:return R=_._init,p(C,b,R(_._payload),T)}if(xh(_)||Jd(_))return R!==null?null:h(C,b,_,T,null);Jp(C,_)}return null}function g(C,b,_,T,R){if(typeof T=="string"&&T!==""||typeof T=="number")return C=C.get(_)||null,a(b,C,""+T,R);if(typeof T=="object"&&T!==null){switch(T.$$typeof){case Up:return C=C.get(T.key===null?_:T.key)||null,l(b,C,T,R);case oc:return C=C.get(T.key===null?_:T.key)||null,c(b,C,T,R);case qa:var L=T._init;return g(C,b,_,L(T._payload),R)}if(xh(T)||Jd(T))return C=C.get(_)||null,h(b,C,T,R,null);Jp(b,T)}return null}function v(C,b,_,T){for(var R=null,L=null,M=b,A=b=0,$=null;M!==null&&A<_.length;A++){M.index>A?($=M,M=null):$=M.sibling;var j=p(C,M,_[A],T);if(j===null){M===null&&(M=$);break}t&&M&&j.alternate===null&&e(C,M),b=s(j,b,A),L===null?R=j:L.sibling=j,L=j,M=$}if(A===_.length)return n(C,M),En&&Jl(C,A),R;if(M===null){for(;A<_.length;A++)M=f(C,_[A],T),M!==null&&(b=s(M,b,A),L===null?R=M:L.sibling=M,L=M);return En&&Jl(C,A),R}for(M=r(C,M);A<_.length;A++)$=g(M,C,A,_[A],T),$!==null&&(t&&$.alternate!==null&&M.delete($.key===null?A:$.key),b=s($,b,A),L===null?R=$:L.sibling=$,L=$);return t&&M.forEach(function(V){return e(C,V)}),En&&Jl(C,A),R}function x(C,b,_,T){var R=Jd(_);if(typeof R!="function")throw Error(Ee(150));if(_=R.call(_),_==null)throw Error(Ee(151));for(var L=R=null,M=b,A=b=0,$=null,j=_.next();M!==null&&!j.done;A++,j=_.next()){M.index>A?($=M,M=null):$=M.sibling;var V=p(C,M,j.value,T);if(V===null){M===null&&(M=$);break}t&&M&&V.alternate===null&&e(C,M),b=s(V,b,A),L===null?R=V:L.sibling=V,L=V,M=$}if(j.done)return n(C,M),En&&Jl(C,A),R;if(M===null){for(;!j.done;A++,j=_.next())j=f(C,j.value,T),j!==null&&(b=s(j,b,A),L===null?R=j:L.sibling=j,L=j);return En&&Jl(C,A),R}for(M=r(C,M);!j.done;A++,j=_.next())j=g(M,C,A,j.value,T),j!==null&&(t&&j.alternate!==null&&M.delete(j.key===null?A:j.key),b=s(j,b,A),L===null?R=j:L.sibling=j,L=j);return t&&M.forEach(function(U){return e(C,U)}),En&&Jl(C,A),R}function k(C,b,_,T){if(typeof _=="object"&&_!==null&&_.type===ac&&_.key===null&&(_=_.props.children),typeof _=="object"&&_!==null){switch(_.$$typeof){case Up:e:{for(var R=_.key,L=b;L!==null;){if(L.key===R){if(R=_.type,R===ac){if(L.tag===7){n(C,L.sibling),b=i(L,_.props.children),b.return=C,C=b;break e}}else if(L.elementType===R||typeof R=="object"&&R!==null&&R.$$typeof===qa&&XC(R)===L.type){n(C,L.sibling),b=i(L,_.props),b.ref=ih(C,L,_),b.return=C,C=b;break e}n(C,L);break}else e(C,L);L=L.sibling}_.type===ac?(b=gu(_.props.children,C.mode,T,_.key),b.return=C,C=b):(T=em(_.type,_.key,_.props,null,C.mode,T),T.ref=ih(C,b,_),T.return=C,C=T)}return o(C);case oc:e:{for(L=_.key;b!==null;){if(b.key===L)if(b.tag===4&&b.stateNode.containerInfo===_.containerInfo&&b.stateNode.implementation===_.implementation){n(C,b.sibling),b=i(b,_.children||[]),b.return=C,C=b;break e}else{n(C,b);break}else e(C,b);b=b.sibling}b=Ny(_,C.mode,T),b.return=C,C=b}return o(C);case qa:return L=_._init,k(C,b,L(_._payload),T)}if(xh(_))return v(C,b,_,T);if(Jd(_))return x(C,b,_,T);Jp(C,_)}return typeof _=="string"&&_!==""||typeof _=="number"?(_=""+_,b!==null&&b.tag===6?(n(C,b.sibling),b=i(b,_),b.return=C,C=b):(n(C,b),b=Ay(_,C.mode,T),b.return=C,C=b),o(C)):n(C,b)}return k}var Xc=N4(!0),j4=N4(!1),Pm=bl(null),Lm=null,gc=null,j_=null;function I_(){j_=gc=Lm=null}function O_(t){var e=Pm.current;Sn(Pm),t._currentValue=e}function Cw(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Dc(t,e){Lm=t,j_=gc=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Mi=!0),t.firstContext=null)}function Ts(t){var e=t._currentValue;if(j_!==t)if(t={context:t,memoizedValue:e,next:null},gc===null){if(Lm===null)throw Error(Ee(308));gc=t,Lm.dependencies={lanes:0,firstContext:t}}else gc=gc.next=t;return e}var lu=null;function D_(t){lu===null?lu=[t]:lu.push(t)}function I4(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,D_(e)):(n.next=i.next,i.next=n),e.interleaved=n,ua(t,r)}function ua(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Ya=!1;function F_(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function O4(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function ia(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function ul(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Kt&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,ua(t,n)}return i=r.interleaved,i===null?(e.next=e,D_(r)):(e.next=i.next,i.next=e),r.interleaved=e,ua(t,n)}function Yg(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,S_(t,n)}}function ZC(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Mm(t,e,n,r){var i=t.updateQueue;Ya=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var h=t.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==o&&(a===null?h.firstBaseUpdate=c:a.next=c,h.lastBaseUpdate=l))}if(s!==null){var f=i.baseState;o=0,h=c=l=null,a=s;do{var p=a.lane,g=a.eventTime;if((r&p)===p){h!==null&&(h=h.next={eventTime:g,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var v=t,x=a;switch(p=e,g=n,x.tag){case 1:if(v=x.payload,typeof v=="function"){f=v.call(g,f,p);break e}f=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=x.payload,p=typeof v=="function"?v.call(g,f,p):v,p==null)break e;f=Fn({},f,p);break e;case 2:Ya=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,p=i.effects,p===null?i.effects=[a]:p.push(a))}else g={eventTime:g,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(c=h=g,l=f):h=h.next=g,o|=p;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;p=a,a=p.next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}while(1);if(h===null&&(l=f),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=h,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Su|=o,t.lanes=o,t.memoizedState=f}}function QC(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(Ee(191,i));i.call(r)}}}var qf={},Co=bl(qf),wf=bl(qf),xf=bl(qf);function uu(t){if(t===qf)throw Error(Ee(174));return t}function B_(t,e){switch(wn(xf,e),wn(wf,t),wn(Co,qf),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:iw(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=iw(e,t)}Sn(Co),wn(Co,e)}function Zc(){Sn(Co),Sn(wf),Sn(xf)}function D4(t){uu(xf.current);var e=uu(Co.current),n=iw(e,t.type);e!==n&&(wn(wf,t),wn(Co,n))}function $_(t){wf.current===t&&(Sn(Co),Sn(wf))}var In=bl(0);function Am(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Ey=[];function z_(){for(var t=0;t<Ey.length;t++)Ey[t]._workInProgressVersionPrimary=null;Ey.length=0}var Kg=ga.ReactCurrentDispatcher,Ry=ga.ReactCurrentBatchConfig,bu=0,Dn=null,_r=null,Mr=null,Nm=!1,$h=!1,_f=0,P8=0;function ni(){throw Error(Ee(321))}function U_(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!eo(t[n],e[n]))return!1;return!0}function V_(t,e,n,r,i,s){if(bu=s,Dn=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Kg.current=t===null||t.memoizedState===null?N8:j8,t=n(r,i),$h){s=0;do{if($h=!1,_f=0,25<=s)throw Error(Ee(301));s+=1,Mr=_r=null,e.updateQueue=null,Kg.current=I8,t=n(r,i)}while($h)}if(Kg.current=jm,e=_r!==null&&_r.next!==null,bu=0,Mr=_r=Dn=null,Nm=!1,e)throw Error(Ee(300));return t}function W_(){var t=_f!==0;return _f=0,t}function vo(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Mr===null?Dn.memoizedState=Mr=t:Mr=Mr.next=t,Mr}function Ps(){if(_r===null){var t=Dn.alternate;t=t!==null?t.memoizedState:null}else t=_r.next;var e=Mr===null?Dn.memoizedState:Mr.next;if(e!==null)Mr=e,_r=t;else{if(t===null)throw Error(Ee(310));_r=t,t={memoizedState:_r.memoizedState,baseState:_r.baseState,baseQueue:_r.baseQueue,queue:_r.queue,next:null},Mr===null?Dn.memoizedState=Mr=t:Mr=Mr.next=t}return Mr}function bf(t,e){return typeof e=="function"?e(t):e}function Ty(t){var e=Ps(),n=e.queue;if(n===null)throw Error(Ee(311));n.lastRenderedReducer=t;var r=_r,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,c=s;do{var h=c.lane;if((bu&h)===h)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var f={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=f,o=r):l=l.next=f,Dn.lanes|=h,Su|=h}c=c.next}while(c!==null&&c!==s);l===null?o=r:l.next=a,eo(r,e.memoizedState)||(Mi=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,Dn.lanes|=s,Su|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Py(t){var e=Ps(),n=e.queue;if(n===null)throw Error(Ee(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);eo(s,e.memoizedState)||(Mi=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function F4(){}function B4(t,e){var n=Dn,r=Ps(),i=e(),s=!eo(r.memoizedState,i);if(s&&(r.memoizedState=i,Mi=!0),r=r.queue,H_(U4.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||Mr!==null&&Mr.memoizedState.tag&1){if(n.flags|=2048,Sf(9,z4.bind(null,n,r,i,e),void 0,null),jr===null)throw Error(Ee(349));bu&30||$4(n,e,i)}return i}function $4(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Dn.updateQueue,e===null?(e={lastEffect:null,stores:null},Dn.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function z4(t,e,n,r){e.value=n,e.getSnapshot=r,V4(e)&&W4(t)}function U4(t,e,n){return n(function(){V4(e)&&W4(t)})}function V4(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!eo(t,n)}catch{return!0}}function W4(t){var e=ua(t,1);e!==null&&Js(e,t,1,-1)}function JC(t){var e=vo();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:bf,lastRenderedState:t},e.queue=t,t=t.dispatch=A8.bind(null,Dn,t),[e.memoizedState,t]}function Sf(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Dn.updateQueue,e===null?(e={lastEffect:null,stores:null},Dn.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function H4(){return Ps().memoizedState}function Xg(t,e,n,r){var i=vo();Dn.flags|=t,i.memoizedState=Sf(1|e,n,void 0,r===void 0?null:r)}function T0(t,e,n,r){var i=Ps();r=r===void 0?null:r;var s=void 0;if(_r!==null){var o=_r.memoizedState;if(s=o.destroy,r!==null&&U_(r,o.deps)){i.memoizedState=Sf(e,n,s,r);return}}Dn.flags|=t,i.memoizedState=Sf(1|e,n,s,r)}function ek(t,e){return Xg(8390656,8,t,e)}function H_(t,e){return T0(2048,8,t,e)}function G4(t,e){return T0(4,2,t,e)}function q4(t,e){return T0(4,4,t,e)}function Y4(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function K4(t,e,n){return n=n!=null?n.concat([t]):null,T0(4,4,Y4.bind(null,e,t),n)}function G_(){}function X4(t,e){var n=Ps();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&U_(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Z4(t,e){var n=Ps();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&U_(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Q4(t,e,n){return bu&21?(eo(n,e)||(n=r4(),Dn.lanes|=n,Su|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Mi=!0),t.memoizedState=n)}function L8(t,e){var n=cn;cn=n!==0&&4>n?n:4,t(!0);var r=Ry.transition;Ry.transition={};try{t(!1),e()}finally{cn=n,Ry.transition=r}}function J4(){return Ps().memoizedState}function M8(t,e,n){var r=dl(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},e3(t))t3(e,n);else if(n=I4(t,e,n,r),n!==null){var i=wi();Js(n,t,r,i),n3(n,e,r)}}function A8(t,e,n){var r=dl(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(e3(t))t3(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,eo(a,o)){var l=e.interleaved;l===null?(i.next=i,D_(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=I4(t,e,i,r),n!==null&&(i=wi(),Js(n,t,r,i),n3(n,e,r))}}function e3(t){var e=t.alternate;return t===Dn||e!==null&&e===Dn}function t3(t,e){$h=Nm=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function n3(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,S_(t,n)}}var jm={readContext:Ts,useCallback:ni,useContext:ni,useEffect:ni,useImperativeHandle:ni,useInsertionEffect:ni,useLayoutEffect:ni,useMemo:ni,useReducer:ni,useRef:ni,useState:ni,useDebugValue:ni,useDeferredValue:ni,useTransition:ni,useMutableSource:ni,useSyncExternalStore:ni,useId:ni,unstable_isNewReconciler:!1},N8={readContext:Ts,useCallback:function(t,e){return vo().memoizedState=[t,e===void 0?null:e],t},useContext:Ts,useEffect:ek,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Xg(4194308,4,Y4.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Xg(4194308,4,t,e)},useInsertionEffect:function(t,e){return Xg(4,2,t,e)},useMemo:function(t,e){var n=vo();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=vo();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=M8.bind(null,Dn,t),[r.memoizedState,t]},useRef:function(t){var e=vo();return t={current:t},e.memoizedState=t},useState:JC,useDebugValue:G_,useDeferredValue:function(t){return vo().memoizedState=t},useTransition:function(){var t=JC(!1),e=t[0];return t=L8.bind(null,t[1]),vo().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Dn,i=vo();if(En){if(n===void 0)throw Error(Ee(407));n=n()}else{if(n=e(),jr===null)throw Error(Ee(349));bu&30||$4(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,ek(U4.bind(null,r,s,t),[t]),r.flags|=2048,Sf(9,z4.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=vo(),e=jr.identifierPrefix;if(En){var n=ra,r=na;n=(r&~(1<<32-Qs(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=_f++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=P8++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},j8={readContext:Ts,useCallback:X4,useContext:Ts,useEffect:H_,useImperativeHandle:K4,useInsertionEffect:G4,useLayoutEffect:q4,useMemo:Z4,useReducer:Ty,useRef:H4,useState:function(){return Ty(bf)},useDebugValue:G_,useDeferredValue:function(t){var e=Ps();return Q4(e,_r.memoizedState,t)},useTransition:function(){var t=Ty(bf)[0],e=Ps().memoizedState;return[t,e]},useMutableSource:F4,useSyncExternalStore:B4,useId:J4,unstable_isNewReconciler:!1},I8={readContext:Ts,useCallback:X4,useContext:Ts,useEffect:H_,useImperativeHandle:K4,useInsertionEffect:G4,useLayoutEffect:q4,useMemo:Z4,useReducer:Py,useRef:H4,useState:function(){return Py(bf)},useDebugValue:G_,useDeferredValue:function(t){var e=Ps();return _r===null?e.memoizedState=t:Q4(e,_r.memoizedState,t)},useTransition:function(){var t=Py(bf)[0],e=Ps().memoizedState;return[t,e]},useMutableSource:F4,useSyncExternalStore:B4,useId:J4,unstable_isNewReconciler:!1};function Hs(t,e){if(t&&t.defaultProps){e=Fn({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function kw(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Fn({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var P0={isMounted:function(t){return(t=t._reactInternals)?Pu(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=wi(),i=dl(t),s=ia(r,i);s.payload=e,n!=null&&(s.callback=n),e=ul(t,s,i),e!==null&&(Js(e,t,i,r),Yg(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=wi(),i=dl(t),s=ia(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=ul(t,s,i),e!==null&&(Js(e,t,i,r),Yg(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=wi(),r=dl(t),i=ia(n,r);i.tag=2,e!=null&&(i.callback=e),e=ul(t,i,r),e!==null&&(Js(e,t,r,n),Yg(e,t,r))}};function tk(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!gf(n,r)||!gf(i,s):!0}function r3(t,e,n){var r=!1,i=yl,s=e.contextType;return typeof s=="object"&&s!==null?s=Ts(s):(i=ji(e)?xu:ui.current,r=e.contextTypes,s=(r=r!=null)?Yc(t,i):yl),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=P0,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function nk(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&P0.enqueueReplaceState(e,e.state,null)}function Ew(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},F_(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Ts(s):(s=ji(e)?xu:ui.current,i.context=Yc(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(kw(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&P0.enqueueReplaceState(i,i.state,null),Mm(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Qc(t,e){try{var n="",r=e;do n+=uO(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Ly(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Rw(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var O8=typeof WeakMap=="function"?WeakMap:Map;function i3(t,e,n){n=ia(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Om||(Om=!0,Dw=r),Rw(t,e)},n}function s3(t,e,n){n=ia(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Rw(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Rw(t,e),typeof r!="function"&&(cl===null?cl=new Set([this]):cl.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function rk(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new O8;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=X8.bind(null,t,e,n),e.then(t,t))}function ik(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function sk(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=ia(-1,1),e.tag=2,ul(n,e,1))),n.lanes|=1),t)}var D8=ga.ReactCurrentOwner,Mi=!1;function mi(t,e,n,r){e.child=t===null?j4(e,null,n,r):Xc(e,t.child,n,r)}function ok(t,e,n,r,i){n=n.render;var s=e.ref;return Dc(e,i),r=V_(t,e,n,r,s,i),n=W_(),t!==null&&!Mi?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,ca(t,e,i)):(En&&n&&M_(e),e.flags|=1,mi(t,e,r,i),e.child)}function ak(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!eb(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,o3(t,e,s,r,i)):(t=em(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:gf,n(o,r)&&t.ref===e.ref)return ca(t,e,i)}return e.flags|=1,t=hl(s,r),t.ref=e.ref,t.return=e,e.child=t}function o3(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(gf(s,r)&&t.ref===e.ref)if(Mi=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(Mi=!0);else return e.lanes=t.lanes,ca(t,e,i)}return Tw(t,e,n,r,i)}function a3(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},wn(vc,Wi),Wi|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,wn(vc,Wi),Wi|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,wn(vc,Wi),Wi|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,wn(vc,Wi),Wi|=r;return mi(t,e,i,n),e.child}function l3(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Tw(t,e,n,r,i){var s=ji(n)?xu:ui.current;return s=Yc(e,s),Dc(e,i),n=V_(t,e,n,r,s,i),r=W_(),t!==null&&!Mi?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,ca(t,e,i)):(En&&r&&M_(e),e.flags|=1,mi(t,e,n,i),e.child)}function lk(t,e,n,r,i){if(ji(n)){var s=!0;Em(e)}else s=!1;if(Dc(e,i),e.stateNode===null)Zg(t,e),r3(e,n,r),Ew(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=Ts(c):(c=ji(n)?xu:ui.current,c=Yc(e,c));var h=n.getDerivedStateFromProps,f=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&nk(e,o,r,c),Ya=!1;var p=e.memoizedState;o.state=p,Mm(e,r,o,i),l=e.memoizedState,a!==r||p!==l||Ni.current||Ya?(typeof h=="function"&&(kw(e,n,h,r),l=e.memoizedState),(a=Ya||tk(e,n,a,r,p,l,c))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,O4(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:Hs(e.type,a),o.props=c,f=e.pendingProps,p=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=Ts(l):(l=ji(n)?xu:ui.current,l=Yc(e,l));var g=n.getDerivedStateFromProps;(h=typeof g=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||p!==l)&&nk(e,o,r,l),Ya=!1,p=e.memoizedState,o.state=p,Mm(e,r,o,i);var v=e.memoizedState;a!==f||p!==v||Ni.current||Ya?(typeof g=="function"&&(kw(e,n,g,r),v=e.memoizedState),(c=Ya||tk(e,n,c,r,p,v,l)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,v,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,v,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=v),o.props=r,o.state=v,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),r=!1)}return Pw(t,e,n,r,s,i)}function Pw(t,e,n,r,i,s){l3(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&qC(e,n,!1),ca(t,e,s);r=e.stateNode,D8.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Xc(e,t.child,null,s),e.child=Xc(e,null,a,s)):mi(t,e,a,s),e.memoizedState=r.state,i&&qC(e,n,!0),e.child}function u3(t){var e=t.stateNode;e.pendingContext?GC(t,e.pendingContext,e.pendingContext!==e.context):e.context&&GC(t,e.context,!1),B_(t,e.containerInfo)}function uk(t,e,n,r,i){return Kc(),N_(i),e.flags|=256,mi(t,e,n,r),e.child}var Lw={dehydrated:null,treeContext:null,retryLane:0};function Mw(t){return{baseLanes:t,cachePool:null,transitions:null}}function c3(t,e,n){var r=e.pendingProps,i=In.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),wn(In,i&1),t===null)return Sw(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=A0(o,r,0,null),t=gu(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Mw(n),e.memoizedState=Lw,t):q_(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return F8(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=hl(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=hl(a,s):(s=gu(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?Mw(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=Lw,r}return s=t.child,t=s.sibling,r=hl(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function q_(t,e){return e=A0({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function eg(t,e,n,r){return r!==null&&N_(r),Xc(e,t.child,null,n),t=q_(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function F8(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=Ly(Error(Ee(422))),eg(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=A0({mode:"visible",children:r.children},i,0,null),s=gu(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&Xc(e,t.child,null,o),e.child.memoizedState=Mw(o),e.memoizedState=Lw,s);if(!(e.mode&1))return eg(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(Ee(419)),r=Ly(s,r,void 0),eg(t,e,o,r)}if(a=(o&t.childLanes)!==0,Mi||a){if(r=jr,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,ua(t,i),Js(r,t,i,-1))}return J_(),r=Ly(Error(Ee(421))),eg(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=Z8.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,Xi=ll(i.nextSibling),Zi=e,En=!0,Ks=null,t!==null&&(ys[ws++]=na,ys[ws++]=ra,ys[ws++]=_u,na=t.id,ra=t.overflow,_u=e),e=q_(e,r.children),e.flags|=4096,e)}function ck(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Cw(t.return,e,n)}function My(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function d3(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(mi(t,e,r.children,n),r=In.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&ck(t,n,e);else if(t.tag===19)ck(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(wn(In,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Am(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),My(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Am(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}My(e,!0,n,null,s);break;case"together":My(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Zg(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function ca(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Su|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Ee(153));if(e.child!==null){for(t=e.child,n=hl(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=hl(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function B8(t,e,n){switch(e.tag){case 3:u3(e),Kc();break;case 5:D4(e);break;case 1:ji(e.type)&&Em(e);break;case 4:B_(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;wn(Pm,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(wn(In,In.current&1),e.flags|=128,null):n&e.child.childLanes?c3(t,e,n):(wn(In,In.current&1),t=ca(t,e,n),t!==null?t.sibling:null);wn(In,In.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return d3(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),wn(In,In.current),r)break;return null;case 22:case 23:return e.lanes=0,a3(t,e,n)}return ca(t,e,n)}var h3,Aw,f3,p3;h3=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Aw=function(){};f3=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,uu(Co.current);var s=null;switch(n){case"input":i=ew(t,i),r=ew(t,r),s=[];break;case"select":i=Fn({},i,{value:void 0}),r=Fn({},r,{value:void 0}),s=[];break;case"textarea":i=rw(t,i),r=rw(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Cm)}sw(n,r);var o;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(lf.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var l=r[c];if(a=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(lf.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&bn("scroll",t),s||a===l||(s=[])):(s=s||[]).push(c,l))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};p3=function(t,e,n,r){n!==r&&(e.flags|=4)};function sh(t,e){if(!En)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function ri(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function $8(t,e,n){var r=e.pendingProps;switch(A_(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ri(e),null;case 1:return ji(e.type)&&km(),ri(e),null;case 3:return r=e.stateNode,Zc(),Sn(Ni),Sn(ui),z_(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Qp(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Ks!==null&&($w(Ks),Ks=null))),Aw(t,e),ri(e),null;case 5:$_(e);var i=uu(xf.current);if(n=e.type,t!==null&&e.stateNode!=null)f3(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(Ee(166));return ri(e),null}if(t=uu(Co.current),Qp(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[_o]=e,r[yf]=s,t=(e.mode&1)!==0,n){case"dialog":bn("cancel",r),bn("close",r);break;case"iframe":case"object":case"embed":bn("load",r);break;case"video":case"audio":for(i=0;i<bh.length;i++)bn(bh[i],r);break;case"source":bn("error",r);break;case"img":case"image":case"link":bn("error",r),bn("load",r);break;case"details":bn("toggle",r);break;case"input":wC(r,s),bn("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},bn("invalid",r);break;case"textarea":_C(r,s),bn("invalid",r)}sw(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&Zp(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Zp(r.textContent,a,t),i=["children",""+a]):lf.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&bn("scroll",r)}switch(n){case"input":Vp(r),xC(r,s,!0);break;case"textarea":Vp(r),bC(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Cm)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=UP(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[_o]=e,t[yf]=r,h3(t,e,!1,!1),e.stateNode=t;e:{switch(o=ow(n,r),n){case"dialog":bn("cancel",t),bn("close",t),i=r;break;case"iframe":case"object":case"embed":bn("load",t),i=r;break;case"video":case"audio":for(i=0;i<bh.length;i++)bn(bh[i],t);i=r;break;case"source":bn("error",t),i=r;break;case"img":case"image":case"link":bn("error",t),bn("load",t),i=r;break;case"details":bn("toggle",t),i=r;break;case"input":wC(t,r),i=ew(t,r),bn("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Fn({},r,{value:void 0}),bn("invalid",t);break;case"textarea":_C(t,r),i=rw(t,r),bn("invalid",t);break;default:i=r}sw(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?HP(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&VP(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&uf(t,l):typeof l=="number"&&uf(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(lf.hasOwnProperty(s)?l!=null&&s==="onScroll"&&bn("scroll",t):l!=null&&v_(t,s,l,o))}switch(n){case"input":Vp(t),xC(t,r,!1);break;case"textarea":Vp(t),bC(t);break;case"option":r.value!=null&&t.setAttribute("value",""+vl(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?Nc(t,!!r.multiple,s,!1):r.defaultValue!=null&&Nc(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Cm)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return ri(e),null;case 6:if(t&&e.stateNode!=null)p3(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Ee(166));if(n=uu(xf.current),uu(Co.current),Qp(e)){if(r=e.stateNode,n=e.memoizedProps,r[_o]=e,(s=r.nodeValue!==n)&&(t=Zi,t!==null))switch(t.tag){case 3:Zp(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Zp(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[_o]=e,e.stateNode=r}return ri(e),null;case 13:if(Sn(In),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(En&&Xi!==null&&e.mode&1&&!(e.flags&128))A4(),Kc(),e.flags|=98560,s=!1;else if(s=Qp(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(Ee(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(Ee(317));s[_o]=e}else Kc(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;ri(e),s=!1}else Ks!==null&&($w(Ks),Ks=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||In.current&1?Sr===0&&(Sr=3):J_())),e.updateQueue!==null&&(e.flags|=4),ri(e),null);case 4:return Zc(),Aw(t,e),t===null&&mf(e.stateNode.containerInfo),ri(e),null;case 10:return O_(e.type._context),ri(e),null;case 17:return ji(e.type)&&km(),ri(e),null;case 19:if(Sn(In),s=e.memoizedState,s===null)return ri(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)sh(s,!1);else{if(Sr!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Am(t),o!==null){for(e.flags|=128,sh(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return wn(In,In.current&1|2),e.child}t=t.sibling}s.tail!==null&&sr()>Jc&&(e.flags|=128,r=!0,sh(s,!1),e.lanes=4194304)}else{if(!r)if(t=Am(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),sh(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!En)return ri(e),null}else 2*sr()-s.renderingStartTime>Jc&&n!==1073741824&&(e.flags|=128,r=!0,sh(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=sr(),e.sibling=null,n=In.current,wn(In,r?n&1|2:n&1),e):(ri(e),null);case 22:case 23:return Q_(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Wi&1073741824&&(ri(e),e.subtreeFlags&6&&(e.flags|=8192)):ri(e),null;case 24:return null;case 25:return null}throw Error(Ee(156,e.tag))}function z8(t,e){switch(A_(e),e.tag){case 1:return ji(e.type)&&km(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Zc(),Sn(Ni),Sn(ui),z_(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return $_(e),null;case 13:if(Sn(In),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Ee(340));Kc()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Sn(In),null;case 4:return Zc(),null;case 10:return O_(e.type._context),null;case 22:case 23:return Q_(),null;case 24:return null;default:return null}}var tg=!1,si=!1,U8=typeof WeakSet=="function"?WeakSet:Set,Ze=null;function mc(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Yn(t,e,r)}else n.current=null}function Nw(t,e,n){try{n()}catch(r){Yn(t,e,r)}}var dk=!1;function V8(t,e){if(mw=_m,t=w4(),L_(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,h=0,f=t,p=null;t:for(;;){for(var g;f!==n||i!==0&&f.nodeType!==3||(a=o+i),f!==s||r!==0&&f.nodeType!==3||(l=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(g=f.firstChild)!==null;)p=f,f=g;for(;;){if(f===t)break t;if(p===n&&++c===i&&(a=o),p===s&&++h===r&&(l=o),(g=f.nextSibling)!==null)break;f=p,p=f.parentNode}f=g}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(vw={focusedElem:t,selectionRange:n},_m=!1,Ze=e;Ze!==null;)if(e=Ze,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Ze=t;else for(;Ze!==null;){e=Ze;try{var v=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var x=v.memoizedProps,k=v.memoizedState,C=e.stateNode,b=C.getSnapshotBeforeUpdate(e.elementType===e.type?x:Hs(e.type,x),k);C.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var _=e.stateNode.containerInfo;_.nodeType===1?_.textContent="":_.nodeType===9&&_.documentElement&&_.removeChild(_.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Ee(163))}}catch(T){Yn(e,e.return,T)}if(t=e.sibling,t!==null){t.return=e.return,Ze=t;break}Ze=e.return}return v=dk,dk=!1,v}function zh(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&Nw(e,n,s)}i=i.next}while(i!==r)}}function L0(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function jw(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function g3(t){var e=t.alternate;e!==null&&(t.alternate=null,g3(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[_o],delete e[yf],delete e[xw],delete e[k8],delete e[E8])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function m3(t){return t.tag===5||t.tag===3||t.tag===4}function hk(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||m3(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Iw(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Cm));else if(r!==4&&(t=t.child,t!==null))for(Iw(t,e,n),t=t.sibling;t!==null;)Iw(t,e,n),t=t.sibling}function Ow(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Ow(t,e,n),t=t.sibling;t!==null;)Ow(t,e,n),t=t.sibling}var Ur=null,qs=!1;function za(t,e,n){for(n=n.child;n!==null;)v3(t,e,n),n=n.sibling}function v3(t,e,n){if(So&&typeof So.onCommitFiberUnmount=="function")try{So.onCommitFiberUnmount(b0,n)}catch{}switch(n.tag){case 5:si||mc(n,e);case 6:var r=Ur,i=qs;Ur=null,za(t,e,n),Ur=r,qs=i,Ur!==null&&(qs?(t=Ur,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Ur.removeChild(n.stateNode));break;case 18:Ur!==null&&(qs?(t=Ur,n=n.stateNode,t.nodeType===8?Cy(t.parentNode,n):t.nodeType===1&&Cy(t,n),ff(t)):Cy(Ur,n.stateNode));break;case 4:r=Ur,i=qs,Ur=n.stateNode.containerInfo,qs=!0,za(t,e,n),Ur=r,qs=i;break;case 0:case 11:case 14:case 15:if(!si&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Nw(n,e,o),i=i.next}while(i!==r)}za(t,e,n);break;case 1:if(!si&&(mc(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Yn(n,e,a)}za(t,e,n);break;case 21:za(t,e,n);break;case 22:n.mode&1?(si=(r=si)||n.memoizedState!==null,za(t,e,n),si=r):za(t,e,n);break;default:za(t,e,n)}}function fk(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new U8),e.forEach(function(r){var i=Q8.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function zs(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Ur=a.stateNode,qs=!1;break e;case 3:Ur=a.stateNode.containerInfo,qs=!0;break e;case 4:Ur=a.stateNode.containerInfo,qs=!0;break e}a=a.return}if(Ur===null)throw Error(Ee(160));v3(s,o,i),Ur=null,qs=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){Yn(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)y3(e,t),e=e.sibling}function y3(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(zs(e,t),mo(t),r&4){try{zh(3,t,t.return),L0(3,t)}catch(x){Yn(t,t.return,x)}try{zh(5,t,t.return)}catch(x){Yn(t,t.return,x)}}break;case 1:zs(e,t),mo(t),r&512&&n!==null&&mc(n,n.return);break;case 5:if(zs(e,t),mo(t),r&512&&n!==null&&mc(n,n.return),t.flags&32){var i=t.stateNode;try{uf(i,"")}catch(x){Yn(t,t.return,x)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&$P(i,s),ow(a,o);var c=ow(a,s);for(o=0;o<l.length;o+=2){var h=l[o],f=l[o+1];h==="style"?HP(i,f):h==="dangerouslySetInnerHTML"?VP(i,f):h==="children"?uf(i,f):v_(i,h,f,c)}switch(a){case"input":tw(i,s);break;case"textarea":zP(i,s);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var g=s.value;g!=null?Nc(i,!!s.multiple,g,!1):p!==!!s.multiple&&(s.defaultValue!=null?Nc(i,!!s.multiple,s.defaultValue,!0):Nc(i,!!s.multiple,s.multiple?[]:"",!1))}i[yf]=s}catch(x){Yn(t,t.return,x)}}break;case 6:if(zs(e,t),mo(t),r&4){if(t.stateNode===null)throw Error(Ee(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(x){Yn(t,t.return,x)}}break;case 3:if(zs(e,t),mo(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{ff(e.containerInfo)}catch(x){Yn(t,t.return,x)}break;case 4:zs(e,t),mo(t);break;case 13:zs(e,t),mo(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(X_=sr())),r&4&&fk(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(si=(c=si)||h,zs(e,t),si=c):zs(e,t),mo(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!h&&t.mode&1)for(Ze=t,h=t.child;h!==null;){for(f=Ze=h;Ze!==null;){switch(p=Ze,g=p.child,p.tag){case 0:case 11:case 14:case 15:zh(4,p,p.return);break;case 1:mc(p,p.return);var v=p.stateNode;if(typeof v.componentWillUnmount=="function"){r=p,n=p.return;try{e=r,v.props=e.memoizedProps,v.state=e.memoizedState,v.componentWillUnmount()}catch(x){Yn(r,n,x)}}break;case 5:mc(p,p.return);break;case 22:if(p.memoizedState!==null){gk(f);continue}}g!==null?(g.return=p,Ze=g):gk(f)}h=h.sibling}e:for(h=null,f=t;;){if(f.tag===5){if(h===null){h=f;try{i=f.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=f.stateNode,l=f.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=WP("display",o))}catch(x){Yn(t,t.return,x)}}}else if(f.tag===6){if(h===null)try{f.stateNode.nodeValue=c?"":f.memoizedProps}catch(x){Yn(t,t.return,x)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;h===f&&(h=null),f=f.return}h===f&&(h=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:zs(e,t),mo(t),r&4&&fk(t);break;case 21:break;default:zs(e,t),mo(t)}}function mo(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(m3(n)){var r=n;break e}n=n.return}throw Error(Ee(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(uf(i,""),r.flags&=-33);var s=hk(t);Ow(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=hk(t);Iw(t,a,o);break;default:throw Error(Ee(161))}}catch(l){Yn(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function W8(t,e,n){Ze=t,w3(t)}function w3(t,e,n){for(var r=(t.mode&1)!==0;Ze!==null;){var i=Ze,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||tg;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||si;a=tg;var c=si;if(tg=o,(si=l)&&!c)for(Ze=i;Ze!==null;)o=Ze,l=o.child,o.tag===22&&o.memoizedState!==null?mk(i):l!==null?(l.return=o,Ze=l):mk(i);for(;s!==null;)Ze=s,w3(s),s=s.sibling;Ze=i,tg=a,si=c}pk(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,Ze=s):pk(t)}}function pk(t){for(;Ze!==null;){var e=Ze;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:si||L0(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!si)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Hs(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&QC(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}QC(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var h=c.memoizedState;if(h!==null){var f=h.dehydrated;f!==null&&ff(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Ee(163))}si||e.flags&512&&jw(e)}catch(p){Yn(e,e.return,p)}}if(e===t){Ze=null;break}if(n=e.sibling,n!==null){n.return=e.return,Ze=n;break}Ze=e.return}}function gk(t){for(;Ze!==null;){var e=Ze;if(e===t){Ze=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Ze=n;break}Ze=e.return}}function mk(t){for(;Ze!==null;){var e=Ze;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{L0(4,e)}catch(l){Yn(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){Yn(e,i,l)}}var s=e.return;try{jw(e)}catch(l){Yn(e,s,l)}break;case 5:var o=e.return;try{jw(e)}catch(l){Yn(e,o,l)}}}catch(l){Yn(e,e.return,l)}if(e===t){Ze=null;break}var a=e.sibling;if(a!==null){a.return=e.return,Ze=a;break}Ze=e.return}}var H8=Math.ceil,Im=ga.ReactCurrentDispatcher,Y_=ga.ReactCurrentOwner,Es=ga.ReactCurrentBatchConfig,Kt=0,jr=null,hr=null,Gr=0,Wi=0,vc=bl(0),Sr=0,Cf=null,Su=0,M0=0,K_=0,Uh=null,Li=null,X_=0,Jc=1/0,Zo=null,Om=!1,Dw=null,cl=null,ng=!1,tl=null,Dm=0,Vh=0,Fw=null,Qg=-1,Jg=0;function wi(){return Kt&6?sr():Qg!==-1?Qg:Qg=sr()}function dl(t){return t.mode&1?Kt&2&&Gr!==0?Gr&-Gr:T8.transition!==null?(Jg===0&&(Jg=r4()),Jg):(t=cn,t!==0||(t=window.event,t=t===void 0?16:c4(t.type)),t):1}function Js(t,e,n,r){if(50<Vh)throw Vh=0,Fw=null,Error(Ee(185));Wf(t,n,r),(!(Kt&2)||t!==jr)&&(t===jr&&(!(Kt&2)&&(M0|=n),Sr===4&&Za(t,Gr)),Ii(t,r),n===1&&Kt===0&&!(e.mode&1)&&(Jc=sr()+500,R0&&Sl()))}function Ii(t,e){var n=t.callbackNode;TO(t,e);var r=xm(t,t===jr?Gr:0);if(r===0)n!==null&&kC(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&kC(n),e===1)t.tag===0?R8(vk.bind(null,t)):P4(vk.bind(null,t)),S8(function(){!(Kt&6)&&Sl()}),n=null;else{switch(i4(r)){case 1:n=b_;break;case 4:n=t4;break;case 16:n=wm;break;case 536870912:n=n4;break;default:n=wm}n=R3(n,x3.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function x3(t,e){if(Qg=-1,Jg=0,Kt&6)throw Error(Ee(327));var n=t.callbackNode;if(Fc()&&t.callbackNode!==n)return null;var r=xm(t,t===jr?Gr:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Fm(t,r);else{e=r;var i=Kt;Kt|=2;var s=b3();(jr!==t||Gr!==e)&&(Zo=null,Jc=sr()+500,pu(t,e));do try{Y8();break}catch(a){_3(t,a)}while(1);I_(),Im.current=s,Kt=i,hr!==null?e=0:(jr=null,Gr=0,e=Sr)}if(e!==0){if(e===2&&(i=dw(t),i!==0&&(r=i,e=Bw(t,i))),e===1)throw n=Cf,pu(t,0),Za(t,r),Ii(t,sr()),n;if(e===6)Za(t,r);else{if(i=t.current.alternate,!(r&30)&&!G8(i)&&(e=Fm(t,r),e===2&&(s=dw(t),s!==0&&(r=s,e=Bw(t,s))),e===1))throw n=Cf,pu(t,0),Za(t,r),Ii(t,sr()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(Ee(345));case 2:eu(t,Li,Zo);break;case 3:if(Za(t,r),(r&130023424)===r&&(e=X_+500-sr(),10<e)){if(xm(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){wi(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=ww(eu.bind(null,t,Li,Zo),e);break}eu(t,Li,Zo);break;case 4:if(Za(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-Qs(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=sr()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*H8(r/1960))-r,10<r){t.timeoutHandle=ww(eu.bind(null,t,Li,Zo),r);break}eu(t,Li,Zo);break;case 5:eu(t,Li,Zo);break;default:throw Error(Ee(329))}}}return Ii(t,sr()),t.callbackNode===n?x3.bind(null,t):null}function Bw(t,e){var n=Uh;return t.current.memoizedState.isDehydrated&&(pu(t,e).flags|=256),t=Fm(t,e),t!==2&&(e=Li,Li=n,e!==null&&$w(e)),t}function $w(t){Li===null?Li=t:Li.push.apply(Li,t)}function G8(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!eo(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Za(t,e){for(e&=~K_,e&=~M0,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Qs(e),r=1<<n;t[n]=-1,e&=~r}}function vk(t){if(Kt&6)throw Error(Ee(327));Fc();var e=xm(t,0);if(!(e&1))return Ii(t,sr()),null;var n=Fm(t,e);if(t.tag!==0&&n===2){var r=dw(t);r!==0&&(e=r,n=Bw(t,r))}if(n===1)throw n=Cf,pu(t,0),Za(t,e),Ii(t,sr()),n;if(n===6)throw Error(Ee(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,eu(t,Li,Zo),Ii(t,sr()),null}function Z_(t,e){var n=Kt;Kt|=1;try{return t(e)}finally{Kt=n,Kt===0&&(Jc=sr()+500,R0&&Sl())}}function Cu(t){tl!==null&&tl.tag===0&&!(Kt&6)&&Fc();var e=Kt;Kt|=1;var n=Es.transition,r=cn;try{if(Es.transition=null,cn=1,t)return t()}finally{cn=r,Es.transition=n,Kt=e,!(Kt&6)&&Sl()}}function Q_(){Wi=vc.current,Sn(vc)}function pu(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,b8(n)),hr!==null)for(n=hr.return;n!==null;){var r=n;switch(A_(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&km();break;case 3:Zc(),Sn(Ni),Sn(ui),z_();break;case 5:$_(r);break;case 4:Zc();break;case 13:Sn(In);break;case 19:Sn(In);break;case 10:O_(r.type._context);break;case 22:case 23:Q_()}n=n.return}if(jr=t,hr=t=hl(t.current,null),Gr=Wi=e,Sr=0,Cf=null,K_=M0=Su=0,Li=Uh=null,lu!==null){for(e=0;e<lu.length;e++)if(n=lu[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}lu=null}return t}function _3(t,e){do{var n=hr;try{if(I_(),Kg.current=jm,Nm){for(var r=Dn.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Nm=!1}if(bu=0,Mr=_r=Dn=null,$h=!1,_f=0,Y_.current=null,n===null||n.return===null){Sr=1,Cf=e,hr=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=Gr,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,h=a,f=h.tag;if(!(h.mode&1)&&(f===0||f===11||f===15)){var p=h.alternate;p?(h.updateQueue=p.updateQueue,h.memoizedState=p.memoizedState,h.lanes=p.lanes):(h.updateQueue=null,h.memoizedState=null)}var g=ik(o);if(g!==null){g.flags&=-257,sk(g,o,a,s,e),g.mode&1&&rk(s,c,e),e=g,l=c;var v=e.updateQueue;if(v===null){var x=new Set;x.add(l),e.updateQueue=x}else v.add(l);break e}else{if(!(e&1)){rk(s,c,e),J_();break e}l=Error(Ee(426))}}else if(En&&a.mode&1){var k=ik(o);if(k!==null){!(k.flags&65536)&&(k.flags|=256),sk(k,o,a,s,e),N_(Qc(l,a));break e}}s=l=Qc(l,a),Sr!==4&&(Sr=2),Uh===null?Uh=[s]:Uh.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var C=i3(s,l,e);ZC(s,C);break e;case 1:a=l;var b=s.type,_=s.stateNode;if(!(s.flags&128)&&(typeof b.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(cl===null||!cl.has(_)))){s.flags|=65536,e&=-e,s.lanes|=e;var T=s3(s,a,e);ZC(s,T);break e}}s=s.return}while(s!==null)}C3(n)}catch(R){e=R,hr===n&&n!==null&&(hr=n=n.return);continue}break}while(1)}function b3(){var t=Im.current;return Im.current=jm,t===null?jm:t}function J_(){(Sr===0||Sr===3||Sr===2)&&(Sr=4),jr===null||!(Su&268435455)&&!(M0&268435455)||Za(jr,Gr)}function Fm(t,e){var n=Kt;Kt|=2;var r=b3();(jr!==t||Gr!==e)&&(Zo=null,pu(t,e));do try{q8();break}catch(i){_3(t,i)}while(1);if(I_(),Kt=n,Im.current=r,hr!==null)throw Error(Ee(261));return jr=null,Gr=0,Sr}function q8(){for(;hr!==null;)S3(hr)}function Y8(){for(;hr!==null&&!wO();)S3(hr)}function S3(t){var e=E3(t.alternate,t,Wi);t.memoizedProps=t.pendingProps,e===null?C3(t):hr=e,Y_.current=null}function C3(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=z8(n,e),n!==null){n.flags&=32767,hr=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Sr=6,hr=null;return}}else if(n=$8(n,e,Wi),n!==null){hr=n;return}if(e=e.sibling,e!==null){hr=e;return}hr=e=t}while(e!==null);Sr===0&&(Sr=5)}function eu(t,e,n){var r=cn,i=Es.transition;try{Es.transition=null,cn=1,K8(t,e,n,r)}finally{Es.transition=i,cn=r}return null}function K8(t,e,n,r){do Fc();while(tl!==null);if(Kt&6)throw Error(Ee(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Ee(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(PO(t,s),t===jr&&(hr=jr=null,Gr=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||ng||(ng=!0,R3(wm,function(){return Fc(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Es.transition,Es.transition=null;var o=cn;cn=1;var a=Kt;Kt|=4,Y_.current=null,V8(t,n),y3(n,t),g8(vw),_m=!!mw,vw=mw=null,t.current=n,W8(n),xO(),Kt=a,cn=o,Es.transition=s}else t.current=n;if(ng&&(ng=!1,tl=t,Dm=i),s=t.pendingLanes,s===0&&(cl=null),SO(n.stateNode),Ii(t,sr()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Om)throw Om=!1,t=Dw,Dw=null,t;return Dm&1&&t.tag!==0&&Fc(),s=t.pendingLanes,s&1?t===Fw?Vh++:(Vh=0,Fw=t):Vh=0,Sl(),null}function Fc(){if(tl!==null){var t=i4(Dm),e=Es.transition,n=cn;try{if(Es.transition=null,cn=16>t?16:t,tl===null)var r=!1;else{if(t=tl,tl=null,Dm=0,Kt&6)throw Error(Ee(331));var i=Kt;for(Kt|=4,Ze=t.current;Ze!==null;){var s=Ze,o=s.child;if(Ze.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(Ze=c;Ze!==null;){var h=Ze;switch(h.tag){case 0:case 11:case 15:zh(8,h,s)}var f=h.child;if(f!==null)f.return=h,Ze=f;else for(;Ze!==null;){h=Ze;var p=h.sibling,g=h.return;if(g3(h),h===c){Ze=null;break}if(p!==null){p.return=g,Ze=p;break}Ze=g}}}var v=s.alternate;if(v!==null){var x=v.child;if(x!==null){v.child=null;do{var k=x.sibling;x.sibling=null,x=k}while(x!==null)}}Ze=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,Ze=o;else e:for(;Ze!==null;){if(s=Ze,s.flags&2048)switch(s.tag){case 0:case 11:case 15:zh(9,s,s.return)}var C=s.sibling;if(C!==null){C.return=s.return,Ze=C;break e}Ze=s.return}}var b=t.current;for(Ze=b;Ze!==null;){o=Ze;var _=o.child;if(o.subtreeFlags&2064&&_!==null)_.return=o,Ze=_;else e:for(o=b;Ze!==null;){if(a=Ze,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:L0(9,a)}}catch(R){Yn(a,a.return,R)}if(a===o){Ze=null;break e}var T=a.sibling;if(T!==null){T.return=a.return,Ze=T;break e}Ze=a.return}}if(Kt=i,Sl(),So&&typeof So.onPostCommitFiberRoot=="function")try{So.onPostCommitFiberRoot(b0,t)}catch{}r=!0}return r}finally{cn=n,Es.transition=e}}return!1}function yk(t,e,n){e=Qc(n,e),e=i3(t,e,1),t=ul(t,e,1),e=wi(),t!==null&&(Wf(t,1,e),Ii(t,e))}function Yn(t,e,n){if(t.tag===3)yk(t,t,n);else for(;e!==null;){if(e.tag===3){yk(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(cl===null||!cl.has(r))){t=Qc(n,t),t=s3(e,t,1),e=ul(e,t,1),t=wi(),e!==null&&(Wf(e,1,t),Ii(e,t));break}}e=e.return}}function X8(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=wi(),t.pingedLanes|=t.suspendedLanes&n,jr===t&&(Gr&n)===n&&(Sr===4||Sr===3&&(Gr&130023424)===Gr&&500>sr()-X_?pu(t,0):K_|=n),Ii(t,e)}function k3(t,e){e===0&&(t.mode&1?(e=Gp,Gp<<=1,!(Gp&130023424)&&(Gp=4194304)):e=1);var n=wi();t=ua(t,e),t!==null&&(Wf(t,e,n),Ii(t,n))}function Z8(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),k3(t,n)}function Q8(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(Ee(314))}r!==null&&r.delete(e),k3(t,n)}var E3;E3=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Ni.current)Mi=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Mi=!1,B8(t,e,n);Mi=!!(t.flags&131072)}else Mi=!1,En&&e.flags&1048576&&L4(e,Tm,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Zg(t,e),t=e.pendingProps;var i=Yc(e,ui.current);Dc(e,n),i=V_(null,e,r,t,i,n);var s=W_();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,ji(r)?(s=!0,Em(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,F_(e),i.updater=P0,e.stateNode=i,i._reactInternals=e,Ew(e,r,t,n),e=Pw(null,e,r,!0,s,n)):(e.tag=0,En&&s&&M_(e),mi(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Zg(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=e6(r),t=Hs(r,t),i){case 0:e=Tw(null,e,r,t,n);break e;case 1:e=lk(null,e,r,t,n);break e;case 11:e=ok(null,e,r,t,n);break e;case 14:e=ak(null,e,r,Hs(r.type,t),n);break e}throw Error(Ee(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Hs(r,i),Tw(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Hs(r,i),lk(t,e,r,i,n);case 3:e:{if(u3(e),t===null)throw Error(Ee(387));r=e.pendingProps,s=e.memoizedState,i=s.element,O4(t,e),Mm(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Qc(Error(Ee(423)),e),e=uk(t,e,r,n,i);break e}else if(r!==i){i=Qc(Error(Ee(424)),e),e=uk(t,e,r,n,i);break e}else for(Xi=ll(e.stateNode.containerInfo.firstChild),Zi=e,En=!0,Ks=null,n=j4(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Kc(),r===i){e=ca(t,e,n);break e}mi(t,e,r,n)}e=e.child}return e;case 5:return D4(e),t===null&&Sw(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,yw(r,i)?o=null:s!==null&&yw(r,s)&&(e.flags|=32),l3(t,e),mi(t,e,o,n),e.child;case 6:return t===null&&Sw(e),null;case 13:return c3(t,e,n);case 4:return B_(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Xc(e,null,r,n):mi(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Hs(r,i),ok(t,e,r,i,n);case 7:return mi(t,e,e.pendingProps,n),e.child;case 8:return mi(t,e,e.pendingProps.children,n),e.child;case 12:return mi(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,wn(Pm,r._currentValue),r._currentValue=o,s!==null)if(eo(s.value,o)){if(s.children===i.children&&!Ni.current){e=ca(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=ia(-1,n&-n),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var h=c.pending;h===null?l.next=l:(l.next=h.next,h.next=l),c.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),Cw(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(Ee(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Cw(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}mi(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Dc(e,n),i=Ts(i),r=r(i),e.flags|=1,mi(t,e,r,n),e.child;case 14:return r=e.type,i=Hs(r,e.pendingProps),i=Hs(r.type,i),ak(t,e,r,i,n);case 15:return o3(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Hs(r,i),Zg(t,e),e.tag=1,ji(r)?(t=!0,Em(e)):t=!1,Dc(e,n),r3(e,r,i),Ew(e,r,i,n),Pw(null,e,r,!0,t,n);case 19:return d3(t,e,n);case 22:return a3(t,e,n)}throw Error(Ee(156,e.tag))};function R3(t,e){return e4(t,e)}function J8(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ss(t,e,n,r){return new J8(t,e,n,r)}function eb(t){return t=t.prototype,!(!t||!t.isReactComponent)}function e6(t){if(typeof t=="function")return eb(t)?1:0;if(t!=null){if(t=t.$$typeof,t===w_)return 11;if(t===x_)return 14}return 2}function hl(t,e){var n=t.alternate;return n===null?(n=Ss(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function em(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")eb(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case ac:return gu(n.children,i,s,e);case y_:o=8,i|=8;break;case X1:return t=Ss(12,n,e,i|2),t.elementType=X1,t.lanes=s,t;case Z1:return t=Ss(13,n,e,i),t.elementType=Z1,t.lanes=s,t;case Q1:return t=Ss(19,n,e,i),t.elementType=Q1,t.lanes=s,t;case DP:return A0(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case IP:o=10;break e;case OP:o=9;break e;case w_:o=11;break e;case x_:o=14;break e;case qa:o=16,r=null;break e}throw Error(Ee(130,t==null?t:typeof t,""))}return e=Ss(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function gu(t,e,n,r){return t=Ss(7,t,r,e),t.lanes=n,t}function A0(t,e,n,r){return t=Ss(22,t,r,e),t.elementType=DP,t.lanes=n,t.stateNode={isHidden:!1},t}function Ay(t,e,n){return t=Ss(6,t,null,e),t.lanes=n,t}function Ny(t,e,n){return e=Ss(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function t6(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=fy(0),this.expirationTimes=fy(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=fy(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function tb(t,e,n,r,i,s,o,a,l){return t=new t6(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Ss(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},F_(s),t}function n6(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:oc,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function T3(t){if(!t)return yl;t=t._reactInternals;e:{if(Pu(t)!==t||t.tag!==1)throw Error(Ee(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(ji(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Ee(171))}if(t.tag===1){var n=t.type;if(ji(n))return T4(t,n,e)}return e}function P3(t,e,n,r,i,s,o,a,l){return t=tb(n,r,!0,t,i,s,o,a,l),t.context=T3(null),n=t.current,r=wi(),i=dl(n),s=ia(r,i),s.callback=e??null,ul(n,s,i),t.current.lanes=i,Wf(t,i,r),Ii(t,r),t}function N0(t,e,n,r){var i=e.current,s=wi(),o=dl(i);return n=T3(n),e.context===null?e.context=n:e.pendingContext=n,e=ia(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=ul(i,e,o),t!==null&&(Js(t,i,o,s),Yg(t,i,o)),o}function Bm(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function wk(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function nb(t,e){wk(t,e),(t=t.alternate)&&wk(t,e)}function r6(){return null}var L3=typeof reportError=="function"?reportError:function(t){console.error(t)};function rb(t){this._internalRoot=t}j0.prototype.render=rb.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Ee(409));N0(t,e,null,null)};j0.prototype.unmount=rb.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Cu(function(){N0(null,t,null,null)}),e[la]=null}};function j0(t){this._internalRoot=t}j0.prototype.unstable_scheduleHydration=function(t){if(t){var e=a4();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Xa.length&&e!==0&&e<Xa[n].priority;n++);Xa.splice(n,0,t),n===0&&u4(t)}};function ib(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function I0(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function xk(){}function i6(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=Bm(o);s.call(c)}}var o=P3(e,r,t,0,null,!1,!1,"",xk);return t._reactRootContainer=o,t[la]=o.current,mf(t.nodeType===8?t.parentNode:t),Cu(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var c=Bm(l);a.call(c)}}var l=tb(t,0,!1,null,null,!1,!1,"",xk);return t._reactRootContainer=l,t[la]=l.current,mf(t.nodeType===8?t.parentNode:t),Cu(function(){N0(e,l,n,r)}),l}function O0(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=Bm(o);a.call(l)}}N0(e,o,t,i)}else o=i6(n,e,t,i,r);return Bm(o)}s4=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=_h(e.pendingLanes);n!==0&&(S_(e,n|1),Ii(e,sr()),!(Kt&6)&&(Jc=sr()+500,Sl()))}break;case 13:Cu(function(){var r=ua(t,1);if(r!==null){var i=wi();Js(r,t,1,i)}}),nb(t,1)}};C_=function(t){if(t.tag===13){var e=ua(t,134217728);if(e!==null){var n=wi();Js(e,t,134217728,n)}nb(t,134217728)}};o4=function(t){if(t.tag===13){var e=dl(t),n=ua(t,e);if(n!==null){var r=wi();Js(n,t,e,r)}nb(t,e)}};a4=function(){return cn};l4=function(t,e){var n=cn;try{return cn=t,e()}finally{cn=n}};lw=function(t,e,n){switch(e){case"input":if(tw(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=E0(r);if(!i)throw Error(Ee(90));BP(r),tw(r,i)}}}break;case"textarea":zP(t,n);break;case"select":e=n.value,e!=null&&Nc(t,!!n.multiple,e,!1)}};YP=Z_;KP=Cu;var s6={usingClientEntryPoint:!1,Events:[Gf,dc,E0,GP,qP,Z_]},oh={findFiberByHostInstance:au,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},o6={bundleType:oh.bundleType,version:oh.version,rendererPackageName:oh.rendererPackageName,rendererConfig:oh.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ga.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=QP(t),t===null?null:t.stateNode},findFiberByHostInstance:oh.findFiberByHostInstance||r6,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var rg=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!rg.isDisabled&&rg.supportsFiber)try{b0=rg.inject(o6),So=rg}catch{}}ns.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=s6;ns.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ib(e))throw Error(Ee(200));return n6(t,e,null,n)};ns.createRoot=function(t,e){if(!ib(t))throw Error(Ee(299));var n=!1,r="",i=L3;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=tb(t,1,!1,null,null,n,!1,r,i),t[la]=e.current,mf(t.nodeType===8?t.parentNode:t),new rb(e)};ns.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Ee(188)):(t=Object.keys(t).join(","),Error(Ee(268,t)));return t=QP(e),t=t===null?null:t.stateNode,t};ns.flushSync=function(t){return Cu(t)};ns.hydrate=function(t,e,n){if(!I0(e))throw Error(Ee(200));return O0(null,t,e,!0,n)};ns.hydrateRoot=function(t,e,n){if(!ib(t))throw Error(Ee(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=L3;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=P3(e,null,t,1,n??null,i,!1,s,o),t[la]=e.current,mf(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new j0(e)};ns.render=function(t,e,n){if(!I0(e))throw Error(Ee(200));return O0(null,t,e,!1,n)};ns.unmountComponentAtNode=function(t){if(!I0(t))throw Error(Ee(40));return t._reactRootContainer?(Cu(function(){O0(null,null,t,!1,function(){t._reactRootContainer=null,t[la]=null})}),!0):!1};ns.unstable_batchedUpdates=Z_;ns.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!I0(n))throw Error(Ee(200));if(t==null||t._reactInternals===void 0)throw Error(Ee(38));return O0(t,e,n,!1,r)};ns.version="18.3.1-next-f1338f8080-20240426";function M3(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(M3)}catch(t){console.error(t)}}M3(),MP.exports=ns;var ai=MP.exports,_k=ai;Y1.createRoot=_k.createRoot,Y1.hydrateRoot=_k.hydrateRoot;const a6="modulepreload",l6=function(t){return"/Bean_WebApp/"+t},bk={},u6=function(e,n,r){if(!n||n.length===0)return e();const i=document.getElementsByTagName("link");return Promise.all(n.map(s=>{if(s=l6(s),s in bk)return;bk[s]=!0;const o=s.endsWith(".css"),a=o?'[rel="stylesheet"]':"";if(!!r)for(let h=i.length-1;h>=0;h--){const f=i[h];if(f.href===s&&(!o||f.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${s}"]${a}`))return;const c=document.createElement("link");if(c.rel=o?"stylesheet":a6,o||(c.as="script",c.crossOrigin=""),c.href=s,document.head.appendChild(c),o)return new Promise((h,f)=>{c.addEventListener("load",h),c.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${s}`)))})})).then(()=>e()).catch(s=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=s,window.dispatchEvent(o),!o.defaultPrevented)throw s})};var Sk="popstate";function c6(t={}){function e(r,i){let{pathname:s,search:o,hash:a}=r.location;return zw("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:kf(i)}return h6(e,n,null,t)}function Tn(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Ls(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function d6(){return Math.random().toString(36).substring(2,10)}function Ck(t,e){return{usr:t.state,key:t.key,idx:e}}function zw(t,e,n=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?md(e):e,state:n,key:e&&e.key||r||d6()}}function kf({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function md(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substring(r),t=t.substring(0,r)),t&&(e.pathname=t)}return e}function h6(t,e,n,r={}){let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a="POP",l=null,c=h();c==null&&(c=0,o.replaceState({...o.state,idx:c},""));function h(){return(o.state||{idx:null}).idx}function f(){a="POP";let k=h(),C=k==null?null:k-c;c=k,l&&l({action:a,location:x.location,delta:C})}function p(k,C){a="PUSH";let b=zw(x.location,k,C);n&&n(b,k),c=h()+1;let _=Ck(b,c),T=x.createHref(b);try{o.pushState(_,"",T)}catch(R){if(R instanceof DOMException&&R.name==="DataCloneError")throw R;i.location.assign(T)}s&&l&&l({action:a,location:x.location,delta:1})}function g(k,C){a="REPLACE";let b=zw(x.location,k,C);n&&n(b,k),c=h();let _=Ck(b,c),T=x.createHref(b);o.replaceState(_,"",T),s&&l&&l({action:a,location:x.location,delta:0})}function v(k){return f6(k)}let x={get action(){return a},get location(){return t(i,o)},listen(k){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(Sk,f),l=k,()=>{i.removeEventListener(Sk,f),l=null}},createHref(k){return e(i,k)},createURL:v,encodeLocation(k){let C=v(k);return{pathname:C.pathname,search:C.search,hash:C.hash}},push:p,replace:g,go(k){return o.go(k)}};return x}function f6(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),Tn(n,"No window.location.(origin|href) available to create URL");let r=typeof t=="string"?t:kf(t);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function A3(t,e,n="/"){return p6(t,e,n,!1)}function p6(t,e,n,r){let i=typeof e=="string"?md(e):e,s=da(i.pathname||"/",n);if(s==null)return null;let o=N3(t);g6(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=E6(s);a=C6(o[l],c,r)}return a}function N3(t,e=[],n=[],r="",i=!1){let s=(o,a,l=i,c)=>{let h={relativePath:c===void 0?o.path||"":c,caseSensitive:o.caseSensitive===!0,childrenIndex:a,route:o};if(h.relativePath.startsWith("/")){if(!h.relativePath.startsWith(r)&&l)return;Tn(h.relativePath.startsWith(r),`Absolute route path "${h.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),h.relativePath=h.relativePath.slice(r.length)}let f=sa([r,h.relativePath]),p=n.concat(h);o.children&&o.children.length>0&&(Tn(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${f}".`),N3(o.children,e,p,f,l)),!(o.path==null&&!o.index)&&e.push({path:f,score:b6(f,o.index),routesMeta:p})};return t.forEach((o,a)=>{var l;if(o.path===""||!((l=o.path)!=null&&l.includes("?")))s(o,a);else for(let c of j3(o.path))s(o,a,!0,c)}),e}function j3(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=j3(r.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),i&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function g6(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:S6(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var m6=/^:[\w-]+$/,v6=3,y6=2,w6=1,x6=10,_6=-2,kk=t=>t==="*";function b6(t,e){let n=t.split("/"),r=n.length;return n.some(kk)&&(r+=_6),e&&(r+=y6),n.filter(i=>!kk(i)).reduce((i,s)=>i+(m6.test(s)?v6:s===""?w6:x6),r)}function S6(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function C6(t,e,n=!1){let{routesMeta:r}=t,i={},s="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],c=a===r.length-1,h=s==="/"?e:e.slice(s.length)||"/",f=$m({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},h),p=l.route;if(!f&&c&&n&&!r[r.length-1].route.index&&(f=$m({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},h)),!f)return null;Object.assign(i,f.params),o.push({params:i,pathname:sa([s,f.pathname]),pathnameBase:M6(sa([s,f.pathnameBase])),route:p}),f.pathnameBase!=="/"&&(s=sa([s,f.pathnameBase]))}return o}function $m(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=k6(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((c,{paramName:h,isOptional:f},p)=>{if(h==="*"){let v=a[p]||"";o=s.slice(0,s.length-v.length).replace(/(.)\/+$/,"$1")}const g=a[p];return f&&!g?c[h]=void 0:c[h]=(g||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:o,pattern:t}}function k6(t,e=!1,n=!0){Ls(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function E6(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Ls(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function da(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}var R6=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,T6=t=>R6.test(t);function P6(t,e="/"){let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?md(t):t,s;if(n)if(T6(n))s=n;else{if(n.includes("//")){let o=n;n=n.replace(/\/\/+/g,"/"),Ls(!1,`Pathnames cannot have embedded double slashes - normalizing ${o} -> ${n}`)}n.startsWith("/")?s=Ek(n.substring(1),"/"):s=Ek(n,e)}else s=e;return{pathname:s,search:A6(r),hash:N6(i)}}function Ek(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function jy(t,e,n,r){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function L6(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function sb(t){let e=L6(t);return e.map((n,r)=>r===e.length-1?n.pathname:n.pathnameBase)}function ob(t,e,n,r=!1){let i;typeof t=="string"?i=md(t):(i={...t},Tn(!i.pathname||!i.pathname.includes("?"),jy("?","pathname","search",i)),Tn(!i.pathname||!i.pathname.includes("#"),jy("#","pathname","hash",i)),Tn(!i.search||!i.search.includes("#"),jy("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=n;else{let f=e.length-1;if(!r&&o.startsWith("..")){let p=o.split("/");for(;p[0]==="..";)p.shift(),f-=1;i.pathname=p.join("/")}a=f>=0?e[f]:"/"}let l=P6(i,a),c=o&&o!=="/"&&o.endsWith("/"),h=(s||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||h)&&(l.pathname+="/"),l}var sa=t=>t.join("/").replace(/\/\/+/g,"/"),M6=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),A6=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,N6=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function j6(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var I3=["POST","PUT","PATCH","DELETE"];new Set(I3);var I6=["GET",...I3];new Set(I6);var vd=y.createContext(null);vd.displayName="DataRouter";var D0=y.createContext(null);D0.displayName="DataRouterState";y.createContext(!1);var O3=y.createContext({isTransitioning:!1});O3.displayName="ViewTransition";var O6=y.createContext(new Map);O6.displayName="Fetchers";var D6=y.createContext(null);D6.displayName="Await";var no=y.createContext(null);no.displayName="Navigation";var Yf=y.createContext(null);Yf.displayName="Location";var As=y.createContext({outlet:null,matches:[],isDataRoute:!1});As.displayName="Route";var ab=y.createContext(null);ab.displayName="RouteError";function F6(t,{relative:e}={}){Tn(yd(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=y.useContext(no),{hash:i,pathname:s,search:o}=Kf(t,{relative:e}),a=s;return n!=="/"&&(a=s==="/"?n:sa([n,s])),r.createHref({pathname:a,search:o,hash:i})}function yd(){return y.useContext(Yf)!=null}function Cl(){return Tn(yd(),"useLocation() may be used only in the context of a <Router> component."),y.useContext(Yf).location}var D3="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function F3(t){y.useContext(no).static||y.useLayoutEffect(t)}function ro(){let{isDataRoute:t}=y.useContext(As);return t?J6():B6()}function B6(){Tn(yd(),"useNavigate() may be used only in the context of a <Router> component.");let t=y.useContext(vd),{basename:e,navigator:n}=y.useContext(no),{matches:r}=y.useContext(As),{pathname:i}=Cl(),s=JSON.stringify(sb(r)),o=y.useRef(!1);return F3(()=>{o.current=!0}),y.useCallback((l,c={})=>{if(Ls(o.current,D3),!o.current)return;if(typeof l=="number"){n.go(l);return}let h=ob(l,JSON.parse(s),i,c.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:sa([e,h.pathname])),(c.replace?n.replace:n.push)(h,c.state,c)},[e,n,s,i,t])}var $6=y.createContext(null);function z6(t){let e=y.useContext(As).outlet;return y.useMemo(()=>e&&y.createElement($6.Provider,{value:t},e),[e,t])}function lb(){let{matches:t}=y.useContext(As),e=t[t.length-1];return e?e.params:{}}function Kf(t,{relative:e}={}){let{matches:n}=y.useContext(As),{pathname:r}=Cl(),i=JSON.stringify(sb(n));return y.useMemo(()=>ob(t,JSON.parse(i),r,e==="path"),[t,i,r,e])}function U6(t,e){return B3(t,e)}function B3(t,e,n,r,i){var b;Tn(yd(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s}=y.useContext(no),{matches:o}=y.useContext(As),a=o[o.length-1],l=a?a.params:{},c=a?a.pathname:"/",h=a?a.pathnameBase:"/",f=a&&a.route;{let _=f&&f.path||"";$3(c,!f||_.endsWith("*")||_.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${c}" (under <Route path="${_}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${_}"> to <Route path="${_==="/"?"*":`${_}/*`}">.`)}let p=Cl(),g;if(e){let _=typeof e=="string"?md(e):e;Tn(h==="/"||((b=_.pathname)==null?void 0:b.startsWith(h)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${h}" but pathname "${_.pathname}" was given in the \`location\` prop.`),g=_}else g=p;let v=g.pathname||"/",x=v;if(h!=="/"){let _=h.replace(/^\//,"").split("/");x="/"+v.replace(/^\//,"").split("/").slice(_.length).join("/")}let k=A3(t,{pathname:x});Ls(f||k!=null,`No routes matched location "${g.pathname}${g.search}${g.hash}" `),Ls(k==null||k[k.length-1].route.element!==void 0||k[k.length-1].route.Component!==void 0||k[k.length-1].route.lazy!==void 0,`Matched leaf route at location "${g.pathname}${g.search}${g.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let C=q6(k&&k.map(_=>Object.assign({},_,{params:Object.assign({},l,_.params),pathname:sa([h,s.encodeLocation?s.encodeLocation(_.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:_.pathname]),pathnameBase:_.pathnameBase==="/"?h:sa([h,s.encodeLocation?s.encodeLocation(_.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:_.pathnameBase])})),o,n,r,i);return e&&C?y.createElement(Yf.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...g},navigationType:"POP"}},C):C}function V6(){let t=Q6(),e=j6(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},s={padding:"2px 4px",backgroundColor:r},o=null;return console.error("Error handled by React Router default ErrorBoundary:",t),o=y.createElement(y.Fragment,null,y.createElement("p",null," Hey developer "),y.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",y.createElement("code",{style:s},"ErrorBoundary")," or"," ",y.createElement("code",{style:s},"errorElement")," prop on your route.")),y.createElement(y.Fragment,null,y.createElement("h2",null,"Unexpected Application Error!"),y.createElement("h3",{style:{fontStyle:"italic"}},e),n?y.createElement("pre",{style:i},n):null,o)}var W6=y.createElement(V6,null),H6=class extends y.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.onError?this.props.onError(t,e):console.error("React Router caught the following error during render",t)}render(){return this.state.error!==void 0?y.createElement(As.Provider,{value:this.props.routeContext},y.createElement(ab.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function G6({routeContext:t,match:e,children:n}){let r=y.useContext(vd);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),y.createElement(As.Provider,{value:t},n)}function q6(t,e=[],n=null,r=null,i=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let s=t,o=n==null?void 0:n.errors;if(o!=null){let h=s.findIndex(f=>f.route.id&&(o==null?void 0:o[f.route.id])!==void 0);Tn(h>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),s=s.slice(0,Math.min(s.length,h+1))}let a=!1,l=-1;if(n)for(let h=0;h<s.length;h++){let f=s[h];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(l=h),f.route.id){let{loaderData:p,errors:g}=n,v=f.route.loader&&!p.hasOwnProperty(f.route.id)&&(!g||g[f.route.id]===void 0);if(f.route.lazy||v){a=!0,l>=0?s=s.slice(0,l+1):s=[s[0]];break}}}let c=n&&r?(h,f)=>{var p,g;r(h,{location:n.location,params:((g=(p=n.matches)==null?void 0:p[0])==null?void 0:g.params)??{},errorInfo:f})}:void 0;return s.reduceRight((h,f,p)=>{let g,v=!1,x=null,k=null;n&&(g=o&&f.route.id?o[f.route.id]:void 0,x=f.route.errorElement||W6,a&&(l<0&&p===0?($3("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),v=!0,k=null):l===p&&(v=!0,k=f.route.hydrateFallbackElement||null)));let C=e.concat(s.slice(0,p+1)),b=()=>{let _;return g?_=x:v?_=k:f.route.Component?_=y.createElement(f.route.Component,null):f.route.element?_=f.route.element:_=h,y.createElement(G6,{match:f,routeContext:{outlet:h,matches:C,isDataRoute:n!=null},children:_})};return n&&(f.route.ErrorBoundary||f.route.errorElement||p===0)?y.createElement(H6,{location:n.location,revalidation:n.revalidation,component:x,error:g,children:b(),routeContext:{outlet:null,matches:C,isDataRoute:!0},onError:c}):b()},null)}function ub(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Y6(t){let e=y.useContext(vd);return Tn(e,ub(t)),e}function K6(t){let e=y.useContext(D0);return Tn(e,ub(t)),e}function X6(t){let e=y.useContext(As);return Tn(e,ub(t)),e}function cb(t){let e=X6(t),n=e.matches[e.matches.length-1];return Tn(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function Z6(){return cb("useRouteId")}function Q6(){var r;let t=y.useContext(ab),e=K6("useRouteError"),n=cb("useRouteError");return t!==void 0?t:(r=e.errors)==null?void 0:r[n]}function J6(){let{router:t}=Y6("useNavigate"),e=cb("useNavigate"),n=y.useRef(!1);return F3(()=>{n.current=!0}),y.useCallback(async(i,s={})=>{Ls(n.current,D3),n.current&&(typeof i=="number"?t.navigate(i):await t.navigate(i,{fromRouteId:e,...s}))},[t,e])}var Rk={};function $3(t,e,n){!e&&!Rk[t]&&(Rk[t]=!0,Ls(!1,n))}y.memo(eD);function eD({routes:t,future:e,state:n,unstable_onError:r}){return B3(t,void 0,n,r,e)}function zm({to:t,replace:e,state:n,relative:r}){Tn(yd(),"<Navigate> may be used only in the context of a <Router> component.");let{static:i}=y.useContext(no);Ls(!i,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:s}=y.useContext(As),{pathname:o}=Cl(),a=ro(),l=ob(t,sb(s),o,r==="path"),c=JSON.stringify(l);return y.useEffect(()=>{a(JSON.parse(c),{replace:e,state:n,relative:r})},[a,c,r,e,n]),null}function tD(t){return z6(t.context)}function gi(t){Tn(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function nD({basename:t="/",children:e=null,location:n,navigationType:r="POP",navigator:i,static:s=!1}){Tn(!yd(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=t.replace(/^\/*/,"/"),a=y.useMemo(()=>({basename:o,navigator:i,static:s,future:{}}),[o,i,s]);typeof n=="string"&&(n=md(n));let{pathname:l="/",search:c="",hash:h="",state:f=null,key:p="default"}=n,g=y.useMemo(()=>{let v=da(l,o);return v==null?null:{location:{pathname:v,search:c,hash:h,state:f,key:p},navigationType:r}},[o,l,c,h,f,p,r]);return Ls(g!=null,`<Router basename="${o}"> is not able to match the URL "${l}${c}${h}" because it does not start with the basename, so the <Router> won't render anything.`),g==null?null:y.createElement(no.Provider,{value:a},y.createElement(Yf.Provider,{children:e,value:g}))}function rD({children:t,location:e}){return U6(Uw(t),e)}function Uw(t,e=[]){let n=[];return y.Children.forEach(t,(r,i)=>{if(!y.isValidElement(r))return;let s=[...e,i];if(r.type===y.Fragment){n.push.apply(n,Uw(r.props.children,s));return}Tn(r.type===gi,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Tn(!r.props.index||!r.props.children,"An index route cannot have child routes.");let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Uw(r.props.children,s)),n.push(o)}),n}var tm="get",nm="application/x-www-form-urlencoded";function F0(t){return t!=null&&typeof t.tagName=="string"}function iD(t){return F0(t)&&t.tagName.toLowerCase()==="button"}function sD(t){return F0(t)&&t.tagName.toLowerCase()==="form"}function oD(t){return F0(t)&&t.tagName.toLowerCase()==="input"}function aD(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function lD(t,e){return t.button===0&&(!e||e==="_self")&&!aD(t)}var ig=null;function uD(){if(ig===null)try{new FormData(document.createElement("form"),0),ig=!1}catch{ig=!0}return ig}var cD=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Iy(t){return t!=null&&!cD.has(t)?(Ls(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${nm}"`),null):t}function dD(t,e){let n,r,i,s,o;if(sD(t)){let a=t.getAttribute("action");r=a?da(a,e):null,n=t.getAttribute("method")||tm,i=Iy(t.getAttribute("enctype"))||nm,s=new FormData(t)}else if(iD(t)||oD(t)&&(t.type==="submit"||t.type==="image")){let a=t.form;if(a==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let l=t.getAttribute("formaction")||a.getAttribute("action");if(r=l?da(l,e):null,n=t.getAttribute("formmethod")||a.getAttribute("method")||tm,i=Iy(t.getAttribute("formenctype"))||Iy(a.getAttribute("enctype"))||nm,s=new FormData(a,t),!uD()){let{name:c,type:h,value:f}=t;if(h==="image"){let p=c?`${c}.`:"";s.append(`${p}x`,"0"),s.append(`${p}y`,"0")}else c&&s.append(c,f)}}else{if(F0(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=tm,r=null,i=nm,o=t}return s&&i==="text/plain"&&(o=s,s=void 0),{action:r,method:n.toLowerCase(),encType:i,formData:s,body:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function db(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function hD(t,e,n){let r=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return r.pathname==="/"?r.pathname=`_root.${n}`:e&&da(r.pathname,e)==="/"?r.pathname=`${e.replace(/\/$/,"")}/_root.${n}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${n}`,r}async function fD(t,e){if(t.id in e)return e[t.id];try{let n=await u6(()=>import(t.module),[]);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function pD(t){return t!=null&&typeof t.page=="string"}function gD(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function mD(t,e,n){let r=await Promise.all(t.map(async i=>{let s=e.routes[i.route.id];if(s){let o=await fD(s,n);return o.links?o.links():[]}return[]}));return xD(r.flat(1).filter(gD).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function Tk(t,e,n,r,i,s){let o=(l,c)=>n[c]?l.route.id!==n[c].route.id:!0,a=(l,c)=>{var h;return n[c].pathname!==l.pathname||((h=n[c].route.path)==null?void 0:h.endsWith("*"))&&n[c].params["*"]!==l.params["*"]};return s==="assets"?e.filter((l,c)=>o(l,c)||a(l,c)):s==="data"?e.filter((l,c)=>{var f;let h=r.routes[l.route.id];if(!h||!h.hasLoader)return!1;if(o(l,c)||a(l,c))return!0;if(l.route.shouldRevalidate){let p=l.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:((f=n[0])==null?void 0:f.params)||{},nextUrl:new URL(t,window.origin),nextParams:l.params,defaultShouldRevalidate:!0});if(typeof p=="boolean")return p}return!0}):[]}function vD(t,e,{includeHydrateFallback:n}={}){return yD(t.map(r=>{let i=e.routes[r.route.id];if(!i)return[];let s=[i.module];return i.clientActionModule&&(s=s.concat(i.clientActionModule)),i.clientLoaderModule&&(s=s.concat(i.clientLoaderModule)),n&&i.hydrateFallbackModule&&(s=s.concat(i.hydrateFallbackModule)),i.imports&&(s=s.concat(i.imports)),s}).flat(1))}function yD(t){return[...new Set(t)]}function wD(t){let e={},n=Object.keys(t).sort();for(let r of n)e[r]=t[r];return e}function xD(t,e){let n=new Set,r=new Set(e);return t.reduce((i,s)=>{if(e&&!pD(s)&&s.as==="script"&&s.href&&r.has(s.href))return i;let a=JSON.stringify(wD(s));return n.has(a)||(n.add(a),i.push({key:a,link:s})),i},[])}function z3(){let t=y.useContext(vd);return db(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function _D(){let t=y.useContext(D0);return db(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var hb=y.createContext(void 0);hb.displayName="FrameworkContext";function U3(){let t=y.useContext(hb);return db(t,"You must render this element inside a <HydratedRouter> element"),t}function bD(t,e){let n=y.useContext(hb),[r,i]=y.useState(!1),[s,o]=y.useState(!1),{onFocus:a,onBlur:l,onMouseEnter:c,onMouseLeave:h,onTouchStart:f}=e,p=y.useRef(null);y.useEffect(()=>{if(t==="render"&&o(!0),t==="viewport"){let x=C=>{C.forEach(b=>{o(b.isIntersecting)})},k=new IntersectionObserver(x,{threshold:.5});return p.current&&k.observe(p.current),()=>{k.disconnect()}}},[t]),y.useEffect(()=>{if(r){let x=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(x)}}},[r]);let g=()=>{i(!0)},v=()=>{i(!1),o(!1)};return n?t!=="intent"?[s,p,{}]:[s,p,{onFocus:ah(a,g),onBlur:ah(l,v),onMouseEnter:ah(c,g),onMouseLeave:ah(h,v),onTouchStart:ah(f,g)}]:[!1,p,{}]}function ah(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function SD({page:t,...e}){let{router:n}=z3(),r=y.useMemo(()=>A3(n.routes,t,n.basename),[n.routes,t,n.basename]);return r?y.createElement(kD,{page:t,matches:r,...e}):null}function CD(t){let{manifest:e,routeModules:n}=U3(),[r,i]=y.useState([]);return y.useEffect(()=>{let s=!1;return mD(t,e,n).then(o=>{s||i(o)}),()=>{s=!0}},[t,e,n]),r}function kD({page:t,matches:e,...n}){let r=Cl(),{manifest:i,routeModules:s}=U3(),{basename:o}=z3(),{loaderData:a,matches:l}=_D(),c=y.useMemo(()=>Tk(t,e,l,i,r,"data"),[t,e,l,i,r]),h=y.useMemo(()=>Tk(t,e,l,i,r,"assets"),[t,e,l,i,r]),f=y.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let v=new Set,x=!1;if(e.forEach(C=>{var _;let b=i.routes[C.route.id];!b||!b.hasLoader||(!c.some(T=>T.route.id===C.route.id)&&C.route.id in a&&((_=s[C.route.id])!=null&&_.shouldRevalidate)||b.hasClientLoader?x=!0:v.add(C.route.id))}),v.size===0)return[];let k=hD(t,o,"data");return x&&v.size>0&&k.searchParams.set("_routes",e.filter(C=>v.has(C.route.id)).map(C=>C.route.id).join(",")),[k.pathname+k.search]},[o,a,r,i,c,e,t,s]),p=y.useMemo(()=>vD(h,i),[h,i]),g=CD(h);return y.createElement(y.Fragment,null,f.map(v=>y.createElement("link",{key:v,rel:"prefetch",as:"fetch",href:v,...n})),p.map(v=>y.createElement("link",{key:v,rel:"modulepreload",href:v,...n})),g.map(({key:v,link:x})=>y.createElement("link",{key:v,nonce:n.nonce,...x})))}function ED(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var V3=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{V3&&(window.__reactRouterVersion="7.9.6")}catch{}function RD({basename:t,children:e,window:n}){let r=y.useRef();r.current==null&&(r.current=c6({window:n,v5Compat:!0}));let i=r.current,[s,o]=y.useState({action:i.action,location:i.location}),a=y.useCallback(l=>{y.startTransition(()=>o(l))},[o]);return y.useLayoutEffect(()=>i.listen(a),[i,a]),y.createElement(nD,{basename:t,children:e,location:s.location,navigationType:s.action,navigator:i})}var W3=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,fb=y.forwardRef(function({onClick:e,discover:n="render",prefetch:r="none",relative:i,reloadDocument:s,replace:o,state:a,target:l,to:c,preventScrollReset:h,viewTransition:f,...p},g){let{basename:v}=y.useContext(no),x=typeof c=="string"&&W3.test(c),k,C=!1;if(typeof c=="string"&&x&&(k=c,V3))try{let $=new URL(window.location.href),j=c.startsWith("//")?new URL($.protocol+c):new URL(c),V=da(j.pathname,v);j.origin===$.origin&&V!=null?c=V+j.search+j.hash:C=!0}catch{Ls(!1,`<Link to="${c}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let b=F6(c,{relative:i}),[_,T,R]=bD(r,p),L=LD(c,{replace:o,state:a,target:l,preventScrollReset:h,relative:i,viewTransition:f});function M($){e&&e($),$.defaultPrevented||L($)}let A=y.createElement("a",{...p,...R,href:k||b,onClick:C||s?e:M,ref:ED(g,T),target:l,"data-discover":!x&&n==="render"?"true":void 0});return _&&!x?y.createElement(y.Fragment,null,A,y.createElement(SD,{page:b})):A});fb.displayName="Link";var H3=y.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:r="",end:i=!1,style:s,to:o,viewTransition:a,children:l,...c},h){let f=Kf(o,{relative:c.relative}),p=Cl(),g=y.useContext(D0),{navigator:v,basename:x}=y.useContext(no),k=g!=null&&ID(f)&&a===!0,C=v.encodeLocation?v.encodeLocation(f).pathname:f.pathname,b=p.pathname,_=g&&g.navigation&&g.navigation.location?g.navigation.location.pathname:null;n||(b=b.toLowerCase(),_=_?_.toLowerCase():null,C=C.toLowerCase()),_&&x&&(_=da(_,x)||_);const T=C!=="/"&&C.endsWith("/")?C.length-1:C.length;let R=b===C||!i&&b.startsWith(C)&&b.charAt(T)==="/",L=_!=null&&(_===C||!i&&_.startsWith(C)&&_.charAt(C.length)==="/"),M={isActive:R,isPending:L,isTransitioning:k},A=R?e:void 0,$;typeof r=="function"?$=r(M):$=[r,R?"active":null,L?"pending":null,k?"transitioning":null].filter(Boolean).join(" ");let j=typeof s=="function"?s(M):s;return y.createElement(fb,{...c,"aria-current":A,className:$,ref:h,style:j,to:o,viewTransition:a},typeof l=="function"?l(M):l)});H3.displayName="NavLink";var TD=y.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:r,replace:i,state:s,method:o=tm,action:a,onSubmit:l,relative:c,preventScrollReset:h,viewTransition:f,...p},g)=>{let v=ND(),x=jD(a,{relative:c}),k=o.toLowerCase()==="get"?"get":"post",C=typeof a=="string"&&W3.test(a),b=_=>{if(l&&l(_),_.defaultPrevented)return;_.preventDefault();let T=_.nativeEvent.submitter,R=(T==null?void 0:T.getAttribute("formmethod"))||o;v(T||_.currentTarget,{fetcherKey:e,method:R,navigate:n,replace:i,state:s,relative:c,preventScrollReset:h,viewTransition:f})};return y.createElement("form",{ref:g,method:k,action:x,onSubmit:r?l:b,...p,"data-discover":!C&&t==="render"?"true":void 0})});TD.displayName="Form";function PD(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function G3(t){let e=y.useContext(vd);return Tn(e,PD(t)),e}function LD(t,{target:e,replace:n,state:r,preventScrollReset:i,relative:s,viewTransition:o}={}){let a=ro(),l=Cl(),c=Kf(t,{relative:s});return y.useCallback(h=>{if(lD(h,e)){h.preventDefault();let f=n!==void 0?n:kf(l)===kf(c);a(t,{replace:f,state:r,preventScrollReset:i,relative:s,viewTransition:o})}},[l,a,c,n,r,e,t,i,s,o])}var MD=0,AD=()=>`__${String(++MD)}__`;function ND(){let{router:t}=G3("useSubmit"),{basename:e}=y.useContext(no),n=Z6();return y.useCallback(async(r,i={})=>{let{action:s,method:o,encType:a,formData:l,body:c}=dD(r,e);if(i.navigate===!1){let h=i.fetcherKey||AD();await t.fetch(h,n,i.action||s,{preventScrollReset:i.preventScrollReset,formData:l,body:c,formMethod:i.method||o,formEncType:i.encType||a,flushSync:i.flushSync})}else await t.navigate(i.action||s,{preventScrollReset:i.preventScrollReset,formData:l,body:c,formMethod:i.method||o,formEncType:i.encType||a,replace:i.replace,state:i.state,fromRouteId:n,flushSync:i.flushSync,viewTransition:i.viewTransition})},[t,e,n])}function jD(t,{relative:e}={}){let{basename:n}=y.useContext(no),r=y.useContext(As);Tn(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),s={...Kf(t||".",{relative:e})},o=Cl();if(t==null){s.search=o.search;let a=new URLSearchParams(s.search),l=a.getAll("index");if(l.some(h=>h==="")){a.delete("index"),l.filter(f=>f).forEach(f=>a.append("index",f));let h=a.toString();s.search=h?`?${h}`:""}}return(!t||t===".")&&i.route.index&&(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(s.pathname=s.pathname==="/"?n:sa([n,s.pathname])),kf(s)}function ID(t,{relative:e}={}){let n=y.useContext(O3);Tn(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=G3("useViewTransitionState"),i=Kf(t,{relative:e});if(!n.isTransitioning)return!1;let s=da(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=da(n.nextLocation.pathname,r)||n.nextLocation.pathname;return $m(i.pathname,o)!=null||$m(i.pathname,s)!=null}const OD=t=>w.jsxs("svg",{width:"24px",height:"24px",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t,children:[w.jsx("rect",{x:"3",y:"4",width:"18",height:"5",rx:"1",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),w.jsx("path",{d:"M5 9H19V18C19 19.1046 18.1046 20 17 20H7C5.89543 20 5 19.1046 5 18V9Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),w.jsx("path",{d:"M10 13H14",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}),DD=t=>w.jsxs("svg",{width:"24px",height:"24px",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t,children:[w.jsx("path",{d:"M3 6C3 4.34315 4.34315 3 6 3H14C15.6569 3 17 4.34315 17 6V14C17 15.6569 15.6569 17 14 17H6C4.34315 17 3 15.6569 3 14V6Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),w.jsx("path",{d:"M21 7V18C21 19.6569 19.6569 21 18 21H7",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),w.jsx("path",{d:"M10 10V7M10 10V13M10 10H13M10 10H7",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}),FD=t=>w.jsx("svg",{width:"24px",height:"24px",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t,children:w.jsx("path",{d:"M3 19V18C3 15.7909 4.79086 14 7 14H11C13.2091 14 15 15.7909 15 18V19M15 11C16.6569 11 18 9.65685 18 8C18 6.34315 16.6569 5 15 5M21 19V18C21 15.7909 19.2091 14 17 14H16.5M12 8C12 9.65685 10.6569 11 9 11C7.34315 11 6 9.65685 6 8C6 6.34315 7.34315 5 9 5C10.6569 5 12 6.34315 12 8Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})});var Vw=function(t,e){return Vw=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},Vw(t,e)};function q3(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Vw(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var Um=function(){return Um=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Um.apply(this,arguments)};function wd(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function Y3(t,e,n,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s}function K3(t,e){return function(n,r){e(n,r,t)}}function X3(t,e,n,r,i,s){function o(C){if(C!==void 0&&typeof C!="function")throw new TypeError("Function expected");return C}for(var a=r.kind,l=a==="getter"?"get":a==="setter"?"set":"value",c=!e&&t?r.static?t:t.prototype:null,h=e||(c?Object.getOwnPropertyDescriptor(c,r.name):{}),f,p=!1,g=n.length-1;g>=0;g--){var v={};for(var x in r)v[x]=x==="access"?{}:r[x];for(var x in r.access)v.access[x]=r.access[x];v.addInitializer=function(C){if(p)throw new TypeError("Cannot add initializers after decoration has completed");s.push(o(C||null))};var k=(0,n[g])(a==="accessor"?{get:h.get,set:h.set}:h[l],v);if(a==="accessor"){if(k===void 0)continue;if(k===null||typeof k!="object")throw new TypeError("Object expected");(f=o(k.get))&&(h.get=f),(f=o(k.set))&&(h.set=f),(f=o(k.init))&&i.unshift(f)}else(f=o(k))&&(a==="field"?i.unshift(f):h[l]=f)}c&&Object.defineProperty(c,r.name,h),p=!0}function Z3(t,e,n){for(var r=arguments.length>2,i=0;i<e.length;i++)n=r?e[i].call(t,n):e[i].call(t);return r?n:void 0}function Q3(t){return typeof t=="symbol"?t:"".concat(t)}function J3(t,e,n){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(t,"name",{configurable:!0,value:n?"".concat(n," ",e):e})}function e5(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function it(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(h){try{c(r.next(h))}catch(f){o(f)}}function l(h){try{c(r.throw(h))}catch(f){o(f)}}function c(h){h.done?s(h.value):i(h.value).then(a,l)}c((r=r.apply(t,e||[])).next())})}function t5(t,e){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return o.next=a(0),o.throw=a(1),o.return=a(2),typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(c){return function(h){return l([c,h])}}function l(c){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,c[0]&&(n=0)),n;)try{if(r=1,i&&(s=c[0]&2?i.return:c[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,c[1])).done)return s;switch(i=0,s&&(c=[c[0]&2,s.value]),c[0]){case 0:case 1:s=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,i=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!s||c[1]>s[0]&&c[1]<s[3])){n.label=c[1];break}if(c[0]===6&&n.label<s[1]){n.label=s[1],s=c;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(c);break}s[2]&&n.ops.pop(),n.trys.pop();continue}c=e.call(t,n)}catch(h){c=[6,h],i=0}finally{r=s=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}var B0=Object.create?function(t,e,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]};function n5(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&B0(e,t,n)}function Vm(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function pb(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)s.push(i.value)}catch(a){o={error:a}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return s}function r5(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(pb(arguments[e]));return t}function i5(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),i=0,e=0;e<n;e++)for(var s=arguments[e],o=0,a=s.length;o<a;o++,i++)r[i]=s[o];return r}function s5(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return t.concat(s||Array.prototype.slice.call(e))}function ed(t){return this instanceof ed?(this.v=t,this):new ed(t)}function o5(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,s=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(g){return function(v){return Promise.resolve(v).then(g,f)}}function a(g,v){r[g]&&(i[g]=function(x){return new Promise(function(k,C){s.push([g,x,k,C])>1||l(g,x)})},v&&(i[g]=v(i[g])))}function l(g,v){try{c(r[g](v))}catch(x){p(s[0][3],x)}}function c(g){g.value instanceof ed?Promise.resolve(g.value.v).then(h,f):p(s[0][2],g)}function h(g){l("next",g)}function f(g){l("throw",g)}function p(g,v){g(v),s.shift(),s.length&&l(s[0][0],s[0][1])}}function a5(t){var e,n;return e={},r("next"),r("throw",function(i){throw i}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(i,s){e[i]=t[i]?function(o){return(n=!n)?{value:ed(t[i](o)),done:!1}:s?s(o):o}:s}}function l5(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof Vm=="function"?Vm(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=t[s]&&function(o){return new Promise(function(a,l){o=t[s](o),i(a,l,o.done,o.value)})}}function i(s,o,a,l){Promise.resolve(l).then(function(c){s({value:c,done:a})},o)}}function u5(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}var BD=Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e},Ww=function(t){return Ww=Object.getOwnPropertyNames||function(e){var n=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[n.length]=r);return n},Ww(t)};function c5(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n=Ww(t),r=0;r<n.length;r++)n[r]!=="default"&&B0(e,t,n[r]);return BD(e,t),e}function d5(t){return t&&t.__esModule?t:{default:t}}function h5(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)}function f5(t,e,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(t,n):i?i.value=n:e.set(t,n),n}function p5(t,e){if(e===null||typeof e!="object"&&typeof e!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof t=="function"?e===t:t.has(e)}function g5(t,e,n){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var r,i;if(n){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=e[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=e[Symbol.dispose],n&&(i=r)}if(typeof r!="function")throw new TypeError("Object not disposable.");i&&(r=function(){try{i.call(this)}catch(s){return Promise.reject(s)}}),t.stack.push({value:e,dispose:r,async:n})}else n&&t.stack.push({async:!0});return e}var $D=typeof SuppressedError=="function"?SuppressedError:function(t,e,n){var r=new Error(n);return r.name="SuppressedError",r.error=t,r.suppressed=e,r};function m5(t){function e(s){t.error=t.hasError?new $D(s,t.error,"An error was suppressed during disposal."):s,t.hasError=!0}var n,r=0;function i(){for(;n=t.stack.pop();)try{if(!n.async&&r===1)return r=0,t.stack.push(n),Promise.resolve().then(i);if(n.dispose){var s=n.dispose.call(n.value);if(n.async)return r|=2,Promise.resolve(s).then(i,function(o){return e(o),i()})}else r|=1}catch(o){e(o)}if(r===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return i()}function v5(t,e){return typeof t=="string"&&/^\.\.?\//.test(t)?t.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(n,r,i,s,o){return r?e?".jsx":".js":i&&(!s||!o)?n:i+s+"."+o.toLowerCase()+"js"}):t}const zD={__extends:q3,__assign:Um,__rest:wd,__decorate:Y3,__param:K3,__esDecorate:X3,__runInitializers:Z3,__propKey:Q3,__setFunctionName:J3,__metadata:e5,__awaiter:it,__generator:t5,__createBinding:B0,__exportStar:n5,__values:Vm,__read:pb,__spread:r5,__spreadArrays:i5,__spreadArray:s5,__await:ed,__asyncGenerator:o5,__asyncDelegator:a5,__asyncValues:l5,__makeTemplateObject:u5,__importStar:c5,__importDefault:d5,__classPrivateFieldGet:h5,__classPrivateFieldSet:f5,__classPrivateFieldIn:p5,__addDisposableResource:g5,__disposeResources:m5,__rewriteRelativeImportExtension:v5},UD=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:g5,get __assign(){return Um},__asyncDelegator:a5,__asyncGenerator:o5,__asyncValues:l5,__await:ed,__awaiter:it,__classPrivateFieldGet:h5,__classPrivateFieldIn:p5,__classPrivateFieldSet:f5,__createBinding:B0,__decorate:Y3,__disposeResources:m5,__esDecorate:X3,__exportStar:n5,__extends:q3,__generator:t5,__importDefault:d5,__importStar:c5,__makeTemplateObject:u5,__metadata:e5,__param:K3,__propKey:Q3,__read:pb,__rest:wd,__rewriteRelativeImportExtension:v5,__runInitializers:Z3,__setFunctionName:J3,__spread:r5,__spreadArray:s5,__spreadArrays:i5,__values:Vm,default:zD},Symbol.toStringTag,{value:"Module"})),VD=t=>t?(...e)=>t(...e):(...e)=>fetch(...e);class gb extends Error{constructor(e,n="FunctionsError",r){super(e),this.name=n,this.context=r}}class WD extends gb{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Pk extends gb{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Lk extends gb{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Hw;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(Hw||(Hw={}));class HD{constructor(e,{headers:n={},customFetch:r,region:i=Hw.Any}={}){this.url=e,this.headers=n,this.region=i,this.fetch=VD(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return it(this,arguments,void 0,function*(n,r={}){var i;let s,o;try{const{headers:a,method:l,body:c,signal:h,timeout:f}=r;let p={},{region:g}=r;g||(g=this.region);const v=new URL(`${this.url}/${n}`);g&&g!=="any"&&(p["x-region"]=g,v.searchParams.set("forceFunctionRegion",g));let x;c&&(a&&!Object.prototype.hasOwnProperty.call(a,"Content-Type")||!a)?typeof Blob<"u"&&c instanceof Blob||c instanceof ArrayBuffer?(p["Content-Type"]="application/octet-stream",x=c):typeof c=="string"?(p["Content-Type"]="text/plain",x=c):typeof FormData<"u"&&c instanceof FormData?x=c:(p["Content-Type"]="application/json",x=JSON.stringify(c)):x=c;let k=h;f&&(o=new AbortController,s=setTimeout(()=>o.abort(),f),h?(k=o.signal,h.addEventListener("abort",()=>o.abort())):k=o.signal);const C=yield this.fetch(v.toString(),{method:l||"POST",headers:Object.assign(Object.assign(Object.assign({},p),this.headers),a),body:x,signal:k}).catch(R=>{throw new WD(R)}),b=C.headers.get("x-relay-error");if(b&&b==="true")throw new Pk(C);if(!C.ok)throw new Lk(C);let _=((i=C.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),T;return _==="application/json"?T=yield C.json():_==="application/octet-stream"||_==="application/pdf"?T=yield C.blob():_==="text/event-stream"?T=C:_==="multipart/form-data"?T=yield C.formData():T=yield C.text(),{data:T,error:null,response:C}}catch(a){return{data:null,error:a,response:a instanceof Lk||a instanceof Pk?a.context:void 0}}finally{s&&clearTimeout(s)}})}}var vi={};const xd=OI(UD);var sg={},og={},ag={},lg={},ug={},cg={},Mk;function y5(){if(Mk)return cg;Mk=1,Object.defineProperty(cg,"__esModule",{value:!0});class t extends Error{constructor(n){super(n.message),this.name="PostgrestError",this.details=n.details,this.hint=n.hint,this.code=n.code}}return cg.default=t,cg}var Ak;function w5(){if(Ak)return ug;Ak=1,Object.defineProperty(ug,"__esModule",{value:!0});const e=xd.__importDefault(y5());class n{constructor(i){var s,o;this.shouldThrowOnError=!1,this.method=i.method,this.url=i.url,this.headers=new Headers(i.headers),this.schema=i.schema,this.body=i.body,this.shouldThrowOnError=(s=i.shouldThrowOnError)!==null&&s!==void 0?s:!1,this.signal=i.signal,this.isMaybeSingle=(o=i.isMaybeSingle)!==null&&o!==void 0?o:!1,i.fetch?this.fetch=i.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(i,s){return this.headers=new Headers(this.headers),this.headers.set(i,s),this}then(i,s){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const o=this.fetch;let a=o(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async l=>{var c,h,f,p;let g=null,v=null,x=null,k=l.status,C=l.statusText;if(l.ok){if(this.method!=="HEAD"){const R=await l.text();R===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((c=this.headers.get("Accept"))===null||c===void 0)&&c.includes("application/vnd.pgrst.plan+text"))?v=R:v=JSON.parse(R))}const _=(h=this.headers.get("Prefer"))===null||h===void 0?void 0:h.match(/count=(exact|planned|estimated)/),T=(f=l.headers.get("content-range"))===null||f===void 0?void 0:f.split("/");_&&T&&T.length>1&&(x=parseInt(T[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(v)&&(v.length>1?(g={code:"PGRST116",details:`Results contain ${v.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},v=null,x=null,k=406,C="Not Acceptable"):v.length===1?v=v[0]:v=null)}else{const _=await l.text();try{g=JSON.parse(_),Array.isArray(g)&&l.status===404&&(v=[],g=null,k=200,C="OK")}catch{l.status===404&&_===""?(k=204,C="No Content"):g={message:_}}if(g&&this.isMaybeSingle&&(!((p=g==null?void 0:g.details)===null||p===void 0)&&p.includes("0 rows"))&&(g=null,k=200,C="OK"),g&&this.shouldThrowOnError)throw new e.default(g)}return{error:g,data:v,count:x,status:k,statusText:C}});return this.shouldThrowOnError||(a=a.catch(l=>{var c,h,f,p,g,v;let x="";const k=l==null?void 0:l.cause;if(k){const C=(c=k==null?void 0:k.message)!==null&&c!==void 0?c:"",b=(h=k==null?void 0:k.code)!==null&&h!==void 0?h:"";x=`${(f=l==null?void 0:l.name)!==null&&f!==void 0?f:"FetchError"}: ${l==null?void 0:l.message}`,x+=`

Caused by: ${(p=k==null?void 0:k.name)!==null&&p!==void 0?p:"Error"}: ${C}`,b&&(x+=` (${b})`),k!=null&&k.stack&&(x+=`
${k.stack}`)}else x=(g=l==null?void 0:l.stack)!==null&&g!==void 0?g:"";return{error:{message:`${(v=l==null?void 0:l.name)!==null&&v!==void 0?v:"FetchError"}: ${l==null?void 0:l.message}`,details:x,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),a.then(i,s)}returns(){return this}overrideTypes(){return this}}return ug.default=n,ug}var Nk;function x5(){if(Nk)return lg;Nk=1,Object.defineProperty(lg,"__esModule",{value:!0});const e=xd.__importDefault(w5());class n extends e.default{select(i){let s=!1;const o=(i??"*").split("").map(a=>/\s/.test(a)&&!s?"":(a==='"'&&(s=!s),a)).join("");return this.url.searchParams.set("select",o),this.headers.append("Prefer","return=representation"),this}order(i,{ascending:s=!0,nullsFirst:o,foreignTable:a,referencedTable:l=a}={}){const c=l?`${l}.order`:"order",h=this.url.searchParams.get(c);return this.url.searchParams.set(c,`${h?`${h},`:""}${i}.${s?"asc":"desc"}${o===void 0?"":o?".nullsfirst":".nullslast"}`),this}limit(i,{foreignTable:s,referencedTable:o=s}={}){const a=typeof o>"u"?"limit":`${o}.limit`;return this.url.searchParams.set(a,`${i}`),this}range(i,s,{foreignTable:o,referencedTable:a=o}={}){const l=typeof a>"u"?"offset":`${a}.offset`,c=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(l,`${i}`),this.url.searchParams.set(c,`${s-i+1}`),this}abortSignal(i){return this.signal=i,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:i=!1,verbose:s=!1,settings:o=!1,buffers:a=!1,wal:l=!1,format:c="text"}={}){var h;const f=[i?"analyze":null,s?"verbose":null,o?"settings":null,a?"buffers":null,l?"wal":null].filter(Boolean).join("|"),p=(h=this.headers.get("Accept"))!==null&&h!==void 0?h:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${c}; for="${p}"; options=${f};`),c==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(i){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${i}`),this}}return lg.default=n,lg}var jk;function mb(){if(jk)return ag;jk=1,Object.defineProperty(ag,"__esModule",{value:!0});const e=xd.__importDefault(x5()),n=new RegExp("[,()]");class r extends e.default{eq(s,o){return this.url.searchParams.append(s,`eq.${o}`),this}neq(s,o){return this.url.searchParams.append(s,`neq.${o}`),this}gt(s,o){return this.url.searchParams.append(s,`gt.${o}`),this}gte(s,o){return this.url.searchParams.append(s,`gte.${o}`),this}lt(s,o){return this.url.searchParams.append(s,`lt.${o}`),this}lte(s,o){return this.url.searchParams.append(s,`lte.${o}`),this}like(s,o){return this.url.searchParams.append(s,`like.${o}`),this}likeAllOf(s,o){return this.url.searchParams.append(s,`like(all).{${o.join(",")}}`),this}likeAnyOf(s,o){return this.url.searchParams.append(s,`like(any).{${o.join(",")}}`),this}ilike(s,o){return this.url.searchParams.append(s,`ilike.${o}`),this}ilikeAllOf(s,o){return this.url.searchParams.append(s,`ilike(all).{${o.join(",")}}`),this}ilikeAnyOf(s,o){return this.url.searchParams.append(s,`ilike(any).{${o.join(",")}}`),this}regexMatch(s,o){return this.url.searchParams.append(s,`match.${o}`),this}regexIMatch(s,o){return this.url.searchParams.append(s,`imatch.${o}`),this}is(s,o){return this.url.searchParams.append(s,`is.${o}`),this}isDistinct(s,o){return this.url.searchParams.append(s,`isdistinct.${o}`),this}in(s,o){const a=Array.from(new Set(o)).map(l=>typeof l=="string"&&n.test(l)?`"${l}"`:`${l}`).join(",");return this.url.searchParams.append(s,`in.(${a})`),this}contains(s,o){return typeof o=="string"?this.url.searchParams.append(s,`cs.${o}`):Array.isArray(o)?this.url.searchParams.append(s,`cs.{${o.join(",")}}`):this.url.searchParams.append(s,`cs.${JSON.stringify(o)}`),this}containedBy(s,o){return typeof o=="string"?this.url.searchParams.append(s,`cd.${o}`):Array.isArray(o)?this.url.searchParams.append(s,`cd.{${o.join(",")}}`):this.url.searchParams.append(s,`cd.${JSON.stringify(o)}`),this}rangeGt(s,o){return this.url.searchParams.append(s,`sr.${o}`),this}rangeGte(s,o){return this.url.searchParams.append(s,`nxl.${o}`),this}rangeLt(s,o){return this.url.searchParams.append(s,`sl.${o}`),this}rangeLte(s,o){return this.url.searchParams.append(s,`nxr.${o}`),this}rangeAdjacent(s,o){return this.url.searchParams.append(s,`adj.${o}`),this}overlaps(s,o){return typeof o=="string"?this.url.searchParams.append(s,`ov.${o}`):this.url.searchParams.append(s,`ov.{${o.join(",")}}`),this}textSearch(s,o,{config:a,type:l}={}){let c="";l==="plain"?c="pl":l==="phrase"?c="ph":l==="websearch"&&(c="w");const h=a===void 0?"":`(${a})`;return this.url.searchParams.append(s,`${c}fts${h}.${o}`),this}match(s){return Object.entries(s).forEach(([o,a])=>{this.url.searchParams.append(o,`eq.${a}`)}),this}not(s,o,a){return this.url.searchParams.append(s,`not.${o}.${a}`),this}or(s,{foreignTable:o,referencedTable:a=o}={}){const l=a?`${a}.or`:"or";return this.url.searchParams.append(l,`(${s})`),this}filter(s,o,a){return this.url.searchParams.append(s,`${o}.${a}`),this}}return ag.default=r,ag}var Ik;function _5(){if(Ik)return og;Ik=1,Object.defineProperty(og,"__esModule",{value:!0});const e=xd.__importDefault(mb());class n{constructor(i,{headers:s={},schema:o,fetch:a}){this.url=i,this.headers=new Headers(s),this.schema=o,this.fetch=a}select(i,s){const{head:o=!1,count:a}=s??{},l=o?"HEAD":"GET";let c=!1;const h=(i??"*").split("").map(f=>/\s/.test(f)&&!c?"":(f==='"'&&(c=!c),f)).join("");return this.url.searchParams.set("select",h),a&&this.headers.append("Prefer",`count=${a}`),new e.default({method:l,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(i,{count:s,defaultToNull:o=!0}={}){var a;const l="POST";if(s&&this.headers.append("Prefer",`count=${s}`),o||this.headers.append("Prefer","missing=default"),Array.isArray(i)){const c=i.reduce((h,f)=>h.concat(Object.keys(f)),[]);if(c.length>0){const h=[...new Set(c)].map(f=>`"${f}"`);this.url.searchParams.set("columns",h.join(","))}}return new e.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}upsert(i,{onConflict:s,ignoreDuplicates:o=!1,count:a,defaultToNull:l=!0}={}){var c;const h="POST";if(this.headers.append("Prefer",`resolution=${o?"ignore":"merge"}-duplicates`),s!==void 0&&this.url.searchParams.set("on_conflict",s),a&&this.headers.append("Prefer",`count=${a}`),l||this.headers.append("Prefer","missing=default"),Array.isArray(i)){const f=i.reduce((p,g)=>p.concat(Object.keys(g)),[]);if(f.length>0){const p=[...new Set(f)].map(g=>`"${g}"`);this.url.searchParams.set("columns",p.join(","))}}return new e.default({method:h,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(c=this.fetch)!==null&&c!==void 0?c:fetch})}update(i,{count:s}={}){var o;const a="PATCH";return s&&this.headers.append("Prefer",`count=${s}`),new e.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}delete({count:i}={}){var s;const o="DELETE";return i&&this.headers.append("Prefer",`count=${i}`),new e.default({method:o,url:this.url,headers:this.headers,schema:this.schema,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}}return og.default=n,og}var Ok;function GD(){if(Ok)return sg;Ok=1,Object.defineProperty(sg,"__esModule",{value:!0});const t=xd,e=t.__importDefault(_5()),n=t.__importDefault(mb());class r{constructor(s,{headers:o={},schema:a,fetch:l}={}){this.url=s,this.headers=new Headers(o),this.schemaName=a,this.fetch=l}from(s){if(!s||typeof s!="string"||s.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");const o=new URL(`${this.url}/${s}`);return new e.default(o,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(s){return new r(this.url,{headers:this.headers,schema:s,fetch:this.fetch})}rpc(s,o={},{head:a=!1,get:l=!1,count:c}={}){var h;let f;const p=new URL(`${this.url}/rpc/${s}`);let g;a||l?(f=a?"HEAD":"GET",Object.entries(o).filter(([x,k])=>k!==void 0).map(([x,k])=>[x,Array.isArray(k)?`{${k.join(",")}}`:`${k}`]).forEach(([x,k])=>{p.searchParams.append(x,k)})):(f="POST",g=o);const v=new Headers(this.headers);return c&&v.set("Prefer",`count=${c}`),new n.default({method:f,url:p,headers:v,schema:this.schemaName,body:g,fetch:(h=this.fetch)!==null&&h!==void 0?h:fetch})}}return sg.default=r,sg}Object.defineProperty(vi,"__esModule",{value:!0});var b5=vi.PostgrestError=A5=vi.PostgrestBuilder=L5=vi.PostgrestTransformBuilder=T5=vi.PostgrestFilterBuilder=E5=vi.PostgrestQueryBuilder=C5=vi.PostgrestClient=void 0;const _d=xd,S5=_d.__importDefault(GD());var C5=vi.PostgrestClient=S5.default;const k5=_d.__importDefault(_5());var E5=vi.PostgrestQueryBuilder=k5.default;const R5=_d.__importDefault(mb());var T5=vi.PostgrestFilterBuilder=R5.default;const P5=_d.__importDefault(x5());var L5=vi.PostgrestTransformBuilder=P5.default;const M5=_d.__importDefault(w5());var A5=vi.PostgrestBuilder=M5.default;const N5=_d.__importDefault(y5());b5=vi.PostgrestError=N5.default;var j5=vi.default={PostgrestClient:S5.default,PostgrestQueryBuilder:k5.default,PostgrestFilterBuilder:R5.default,PostgrestTransformBuilder:P5.default,PostgrestBuilder:M5.default,PostgrestError:N5.default};const qD=vP({__proto__:null,get PostgrestBuilder(){return A5},get PostgrestClient(){return C5},get PostgrestError(){return b5},get PostgrestFilterBuilder(){return T5},get PostgrestQueryBuilder(){return E5},get PostgrestTransformBuilder(){return L5},default:j5},[vi]),{PostgrestClient:YD,PostgrestQueryBuilder:Tte,PostgrestFilterBuilder:Pte,PostgrestTransformBuilder:Lte,PostgrestBuilder:Mte,PostgrestError:Ate}=j5||qD;class KD{constructor(){}static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const n=process.versions;if(n&&n.node){const r=n.node,i=parseInt(r.replace(/^v/,"").split(".")[0]);return i>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${i} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${i} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let n=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(n+=`

Suggested solution: ${e.workaround}`),new Error(n)}static createWebSocket(e,n){const r=this.getWebSocketConstructor();return new r(e,n)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const XD="2.84.0",ZD=`realtime-js/${XD}`,I5="1.0.0",QD="2.0.0",Dk=I5,Gw=1e4,JD=1e3,e9=100;var iu;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(iu||(iu={}));var xr;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(xr||(xr={}));var Ys;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(Ys||(Ys={}));var qw;(function(t){t.websocket="websocket"})(qw||(qw={}));var su;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(su||(su={}));class t9{constructor(){this.HEADER_LENGTH=1,this.META_LENGTH=4,this.USER_BROADCAST_PUSH_META_LENGTH=5,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast"}encode(e,n){if(e.event===this.BROADCAST_EVENT&&!(e.payload instanceof ArrayBuffer)&&typeof e.payload.event=="string")return n(this._binaryEncodeUserBroadcastPush(e));let r=[e.join_ref,e.ref,e.topic,e.event,e.payload];return n(JSON.stringify(r))}_binaryEncodeUserBroadcastPush(e){var n;return this._isArrayBuffer((n=e.payload)===null||n===void 0?void 0:n.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var n,r,i,s;const o=e.topic,a=(n=e.ref)!==null&&n!==void 0?n:"",l=(r=e.join_ref)!==null&&r!==void 0?r:"",c=e.payload.event,h=(s=(i=e.payload)===null||i===void 0?void 0:i.payload)!==null&&s!==void 0?s:new ArrayBuffer(0),f=this.USER_BROADCAST_PUSH_META_LENGTH+l.length+a.length+o.length+c.length,p=new ArrayBuffer(this.HEADER_LENGTH+f);let g=new DataView(p),v=0;g.setUint8(v++,this.KINDS.userBroadcastPush),g.setUint8(v++,l.length),g.setUint8(v++,a.length),g.setUint8(v++,o.length),g.setUint8(v++,c.length),g.setUint8(v++,this.BINARY_ENCODING),Array.from(l,k=>g.setUint8(v++,k.charCodeAt(0))),Array.from(a,k=>g.setUint8(v++,k.charCodeAt(0))),Array.from(o,k=>g.setUint8(v++,k.charCodeAt(0))),Array.from(c,k=>g.setUint8(v++,k.charCodeAt(0)));var x=new Uint8Array(p.byteLength+h.byteLength);return x.set(new Uint8Array(p),0),x.set(new Uint8Array(h),p.byteLength),x.buffer}_encodeJsonUserBroadcastPush(e){var n,r,i,s;const o=e.topic,a=(n=e.ref)!==null&&n!==void 0?n:"",l=(r=e.join_ref)!==null&&r!==void 0?r:"",c=e.payload.event,h=(s=(i=e.payload)===null||i===void 0?void 0:i.payload)!==null&&s!==void 0?s:{},p=new TextEncoder().encode(JSON.stringify(h)).buffer,g=this.USER_BROADCAST_PUSH_META_LENGTH+l.length+a.length+o.length+c.length,v=new ArrayBuffer(this.HEADER_LENGTH+g);let x=new DataView(v),k=0;x.setUint8(k++,this.KINDS.userBroadcastPush),x.setUint8(k++,l.length),x.setUint8(k++,a.length),x.setUint8(k++,o.length),x.setUint8(k++,c.length),x.setUint8(k++,this.JSON_ENCODING),Array.from(l,b=>x.setUint8(k++,b.charCodeAt(0))),Array.from(a,b=>x.setUint8(k++,b.charCodeAt(0))),Array.from(o,b=>x.setUint8(k++,b.charCodeAt(0))),Array.from(c,b=>x.setUint8(k++,b.charCodeAt(0)));var C=new Uint8Array(v.byteLength+p.byteLength);return C.set(new Uint8Array(v),0),C.set(new Uint8Array(p),v.byteLength),C.buffer}decode(e,n){if(this._isArrayBuffer(e)){let r=this._binaryDecode(e);return n(r)}if(typeof e=="string"){const r=JSON.parse(e),[i,s,o,a,l]=r;return n({join_ref:i,ref:s,topic:o,event:a,payload:l})}return n({})}_binaryDecode(e){const n=new DataView(e),r=n.getUint8(0),i=new TextDecoder;switch(r){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(e,n,i)}}_decodeUserBroadcast(e,n,r){const i=n.getUint8(1),s=n.getUint8(2),o=n.getUint8(3),a=n.getUint8(4);let l=this.HEADER_LENGTH+4;const c=r.decode(e.slice(l,l+i));l=l+i;const h=r.decode(e.slice(l,l+s));l=l+s;const f=r.decode(e.slice(l,l+o));l=l+o;const p=e.slice(l,e.byteLength),g=a===this.JSON_ENCODING?JSON.parse(r.decode(p)):p,v={type:this.BROADCAST_EVENT,event:h,payload:g};return o>0&&(v.meta=JSON.parse(f)),{join_ref:null,ref:null,topic:c,event:this.BROADCAST_EVENT,payload:v}}_isArrayBuffer(e){var n;return e instanceof ArrayBuffer||((n=e==null?void 0:e.constructor)===null||n===void 0?void 0:n.name)==="ArrayBuffer"}}class O5{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var yn;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(yn||(yn={}));const Fk=(t,e,n={})=>{var r;const i=(r=n.skipTypes)!==null&&r!==void 0?r:[];return e?Object.keys(e).reduce((s,o)=>(s[o]=n9(o,t,e,i),s),{}):{}},n9=(t,e,n,r)=>{const i=e.find(a=>a.name===t),s=i==null?void 0:i.type,o=n[t];return s&&!r.includes(s)?D5(s,o):Yw(o)},D5=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return o9(e,n)}switch(t){case yn.bool:return r9(e);case yn.float4:case yn.float8:case yn.int2:case yn.int4:case yn.int8:case yn.numeric:case yn.oid:return i9(e);case yn.json:case yn.jsonb:return s9(e);case yn.timestamp:return a9(e);case yn.abstime:case yn.date:case yn.daterange:case yn.int4range:case yn.int8range:case yn.money:case yn.reltime:case yn.text:case yn.time:case yn.timestamptz:case yn.timetz:case yn.tsrange:case yn.tstzrange:return Yw(e);default:return Yw(e)}},Yw=t=>t,r9=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},i9=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},s9=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},o9=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,r=t[n];if(t[0]==="{"&&r==="}"){let s;const o=t.slice(1,n);try{s=JSON.parse("["+o+"]")}catch{s=o?o.split(","):[]}return s.map(a=>D5(e,a))}return t},a9=t=>typeof t=="string"?t.replace(" ","T"):t,F5=t=>{const e=new URL(t);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class Oy{constructor(e,n,r={},i=Gw){this.channel=e,this.event=n,this.payload=r,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var r;return this._hasReceived(e)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Bk;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(Bk||(Bk={}));class Wh{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},i=>{const{onJoin:s,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Wh.syncState(this.state,i,s,o),this.pendingDiffs.forEach(l=>{this.state=Wh.syncDiff(this.state,l,s,o)}),this.pendingDiffs=[],a()}),this.channel._on(r.diff,{},i=>{const{onJoin:s,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=Wh.syncDiff(this.state,i,s,o),a())}),this.onJoin((i,s,o)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:s,newPresences:o})}),this.onLeave((i,s,o)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:s,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,r,i){const s=this.cloneDeep(e),o=this.transformState(n),a={},l={};return this.map(s,(c,h)=>{o[c]||(l[c]=h)}),this.map(o,(c,h)=>{const f=s[c];if(f){const p=h.map(k=>k.presence_ref),g=f.map(k=>k.presence_ref),v=h.filter(k=>g.indexOf(k.presence_ref)<0),x=f.filter(k=>p.indexOf(k.presence_ref)<0);v.length>0&&(a[c]=v),x.length>0&&(l[c]=x)}else a[c]=h}),this.syncDiff(s,{joins:a,leaves:l},r,i)}static syncDiff(e,n,r,i){const{joins:s,leaves:o}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),i||(i=()=>{}),this.map(s,(a,l)=>{var c;const h=(c=e[a])!==null&&c!==void 0?c:[];if(e[a]=this.cloneDeep(l),h.length>0){const f=e[a].map(g=>g.presence_ref),p=h.filter(g=>f.indexOf(g.presence_ref)<0);e[a].unshift(...p)}r(a,h,l)}),this.map(o,(a,l)=>{let c=e[a];if(!c)return;const h=l.map(f=>f.presence_ref);c=c.filter(f=>h.indexOf(f.presence_ref)<0),e[a]=c,i(a,c,l),c.length===0&&delete e[a]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(r=>n(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,r)=>{const i=e[r];return"metas"in i?n[r]=i.metas.map(s=>(s.presence_ref=s.phx_ref,delete s.phx_ref,delete s.phx_ref_prev,s)):n[r]=i,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var $k;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})($k||($k={}));var Hh;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(Hh||(Hh={}));var Qo;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(Qo||(Qo={}));class vb{constructor(e,n={config:{}},r){var i,s;if(this.topic=e,this.params=n,this.socket=r,this.bindings={},this.state=xr.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new Oy(this,Ys.join,this.params,this.timeout),this.rejoinTimer=new O5(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=xr.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=xr.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=xr.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=xr.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=xr.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Ys.reply,{},(o,a)=>{this._trigger(this._replyEventName(a),o)}),this.presence=new Wh(this),this.broadcastEndpointURL=F5(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((s=(i=this.params.config)===null||i===void 0?void 0:i.broadcast)===null||s===void 0)&&s.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,n=this.timeout){var r,i,s;if(this.socket.isConnected()||this.socket.connect(),this.state==xr.closed){const{config:{broadcast:o,presence:a,private:l}}=this.params,c=(i=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(g=>g.filter))!==null&&i!==void 0?i:[],h=!!this.bindings[Hh.PRESENCE]&&this.bindings[Hh.PRESENCE].length>0||((s=this.params.config.presence)===null||s===void 0?void 0:s.enabled)===!0,f={},p={broadcast:o,presence:Object.assign(Object.assign({},a),{enabled:h}),postgres_changes:c,private:l};this.socket.accessTokenValue&&(f.access_token=this.socket.accessTokenValue),this._onError(g=>e==null?void 0:e(Qo.CHANNEL_ERROR,g)),this._onClose(()=>e==null?void 0:e(Qo.CLOSED)),this.updateJoinPayload(Object.assign({config:p},f)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:g})=>{var v;if(this.socket.setAuth(),g===void 0){e==null||e(Qo.SUBSCRIBED);return}else{const x=this.bindings.postgres_changes,k=(v=x==null?void 0:x.length)!==null&&v!==void 0?v:0,C=[];for(let b=0;b<k;b++){const _=x[b],{filter:{event:T,schema:R,table:L,filter:M}}=_,A=g&&g[b];if(A&&A.event===T&&A.schema===R&&A.table===L&&A.filter===M)C.push(Object.assign(Object.assign({},_),{id:A.id}));else{this.unsubscribe(),this.state=xr.errored,e==null||e(Qo.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=C,e&&e(Qo.SUBSCRIBED);return}}).receive("error",g=>{this.state=xr.errored,e==null||e(Qo.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(g).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(Qo.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,r){return this.state===xr.joined&&e===Hh.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,n,r)}async httpSend(e,n,r={}){var i;const s=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(n==null)return Promise.reject("Payload is required for httpSend()");const o={method:"POST",headers:{Authorization:s,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:n,private:this.private}]})},a=await this._fetchWithTimeout(this.broadcastEndpointURL,o,(i=r.timeout)!==null&&i!==void 0?i:this.timeout);if(a.status===202)return{success:!0};let l=a.statusText;try{const c=await a.json();l=c.error||c.message||l}catch{}return Promise.reject(new Error(l))}async send(e,n={}){var r,i;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:s,payload:o}=e,l={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:s,payload:o,private:this.private}]})};try{const c=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((i=c.body)===null||i===void 0?void 0:i.cancel()),c.ok?"ok":"error"}catch(c){return c.name==="AbortError"?"timed out":"error"}}else return new Promise(s=>{var o,a,l;const c=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((l=(a=(o=this.params)===null||o===void 0?void 0:o.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.ack)&&s("ok"),c.receive("ok",()=>s("ok")),c.receive("error",()=>s("error")),c.receive("timeout",()=>s("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=xr.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Ys.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(i=>{r=new Oy(this,Ys.leave,{},e),r.receive("ok",()=>{n(),i("ok")}).receive("timeout",()=>{n(),i("timed out")}).receive("error",()=>{i("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=xr.closed,this.bindings={}}async _fetchWithTimeout(e,n,r){const i=new AbortController,s=setTimeout(()=>i.abort(),r),o=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:i.signal}));return clearTimeout(s),o}_push(e,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new Oy(this,e,n,r);return this._canPush()?i.send():this._addToPushBuffer(i),i}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>e9){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(e,n,r){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,r){var i,s;const o=e.toLocaleLowerCase(),{close:a,error:l,leave:c,join:h}=Ys;if(r&&[a,l,c,h].indexOf(o)>=0&&r!==this._joinRef())return;let p=this._onMessage(o,n,r);if(n&&!p)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(g=>{var v,x,k;return((v=g.filter)===null||v===void 0?void 0:v.event)==="*"||((k=(x=g.filter)===null||x===void 0?void 0:x.event)===null||k===void 0?void 0:k.toLocaleLowerCase())===o}).map(g=>g.callback(p,r)):(s=this.bindings[o])===null||s===void 0||s.filter(g=>{var v,x,k,C,b,_;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in g){const T=g.id,R=(v=g.filter)===null||v===void 0?void 0:v.event;return T&&((x=n.ids)===null||x===void 0?void 0:x.includes(T))&&(R==="*"||(R==null?void 0:R.toLocaleLowerCase())===((k=n.data)===null||k===void 0?void 0:k.type.toLocaleLowerCase()))}else{const T=(b=(C=g==null?void 0:g.filter)===null||C===void 0?void 0:C.event)===null||b===void 0?void 0:b.toLocaleLowerCase();return T==="*"||T===((_=n==null?void 0:n.event)===null||_===void 0?void 0:_.toLocaleLowerCase())}else return g.type.toLocaleLowerCase()===o}).map(g=>{if(typeof p=="object"&&"ids"in p){const v=p.data,{schema:x,table:k,commit_timestamp:C,type:b,errors:_}=v;p=Object.assign(Object.assign({},{schema:x,table:k,commit_timestamp:C,eventType:b,new:{},old:{},errors:_}),this._getPayloadRecords(v))}g.callback(p,r)})}_isClosed(){return this.state===xr.closed}_isJoined(){return this.state===xr.joined}_isJoining(){return this.state===xr.joining}_isLeaving(){return this.state===xr.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,r){const i=e.toLocaleLowerCase(),s={type:i,filter:n,callback:r};return this.bindings[i]?this.bindings[i].push(s):this.bindings[i]=[s],this}_off(e,n){const r=e.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(i=>{var s;return!(((s=i.type)===null||s===void 0?void 0:s.toLocaleLowerCase())===r&&vb.isEqual(i.filter,n))})),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const r in e)if(e[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Ys.close,{},e)}_onError(e){this._on(Ys.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=xr.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=Fk(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=Fk(e.columns,e.old_record)),n}}const Dy=()=>{},dg={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},l9=[1e3,2e3,5e3,1e4],u9=1e4,c9=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class d9{constructor(e,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Gw,this.transport=null,this.heartbeatIntervalMs=dg.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Dy,this.ref=0,this.reconnectTimer=null,this.vsn=Dk,this.logger=Dy,this.conn=null,this.sendBuffer=[],this.serializer=new t9,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=i=>i?(...s)=>i(...s):(...s)=>fetch(...s),!(!((r=n==null?void 0:n.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${e}/${qw.websocket}`,this.httpEndpoint=F5(e),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=KD.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const n=e.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(e?this.conn.close(e,n??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,n,r){this.logger(e,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case iu.connecting:return su.Connecting;case iu.open:return su.Open;case iu.closing:return su.Closing;default:return su.Closed}}isConnected(){return this.connectionState()===su.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,n={config:{}}){const r=`realtime:${e}`,i=this.getChannels().find(s=>s.topic===r);if(i)return i;{const s=new vb(`realtime:${e}`,n,this);return this.channels.push(s),s}}push(e){const{topic:n,event:r,payload:i,ref:s}=e,o=()=>{this.encode(e,a=>{var l;(l=this.conn)===null||l===void 0||l.send(a)})};this.log("push",`${n} ${r} (${s})`,i),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(JD,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},dg.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply")try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error")}catch(c){this.log("error","error in heartbeat callback",c)}n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:i,payload:s,ref:o}=n,a=o?`(${o})`:"",l=s.status||"";this.log("receive",`${l} ${r} ${i} ${a}`.trim(),s),this.channels.filter(c=>c._isMember(r)).forEach(c=>c._trigger(i,s,o)),this._triggerStateCallbacks("message",n)})}_clearTimer(e){var n;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){if(this.conn){if(this.conn.readyState===iu.open||this.conn.readyState===iu.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(n=>{this.log("error","error waiting for auth on connect",n),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var n;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(Ys.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const r=e.match(/\?/)?"&":"?",i=new URLSearchParams(n);return`${e}${r}${i}`}_workerObjectUrl(e){let n;if(e)n=e;else{const r=new Blob([c9],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(e,n=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(e=null){let n;e?n=e:this.accessToken?n=await this.accessToken():n=this.accessTokenValue,this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(r=>{const i={access_token:n,version:ZD};n&&r.updateJoinPayload(i),r.joinedOnce&&r._isJoined()&&r._push(Ys.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(n=>{this.log("error",`error setting auth in ${e}`,n)})}_triggerStateCallbacks(e,n){try{this.stateChangeCallbacks[e].forEach(r=>{try{r(n)}catch(i){this.log("error",`error in ${e} callback`,i)}})}catch(r){this.log("error",`error triggering ${e} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new O5(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},dg.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var n,r,i,s,o,a,l,c,h,f,p,g;switch(this.transport=(n=e==null?void 0:e.transport)!==null&&n!==void 0?n:null,this.timeout=(r=e==null?void 0:e.timeout)!==null&&r!==void 0?r:Gw,this.heartbeatIntervalMs=(i=e==null?void 0:e.heartbeatIntervalMs)!==null&&i!==void 0?i:dg.HEARTBEAT_INTERVAL,this.worker=(s=e==null?void 0:e.worker)!==null&&s!==void 0?s:!1,this.accessToken=(o=e==null?void 0:e.accessToken)!==null&&o!==void 0?o:null,this.heartbeatCallback=(a=e==null?void 0:e.heartbeatCallback)!==null&&a!==void 0?a:Dy,this.vsn=(l=e==null?void 0:e.vsn)!==null&&l!==void 0?l:Dk,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(c=e==null?void 0:e.reconnectAfterMs)!==null&&c!==void 0?c:v=>l9[v-1]||u9,this.vsn){case I5:this.encode=(h=e==null?void 0:e.encode)!==null&&h!==void 0?h:(v,x)=>x(JSON.stringify(v)),this.decode=(f=e==null?void 0:e.decode)!==null&&f!==void 0?f:(v,x)=>x(JSON.parse(v));break;case QD:this.encode=(p=e==null?void 0:e.encode)!==null&&p!==void 0?p:this.serializer.encode.bind(this.serializer),this.decode=(g=e==null?void 0:e.decode)!==null&&g!==void 0?g:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}class yb extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function jn(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class h9 extends yb{constructor(e,n,r){super(e),this.name="StorageApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Kw extends yb{constructor(e,n){super(e),this.name="StorageUnknownError",this.originalError=n}}const wb=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),f9=()=>Response,Xw=t=>{if(Array.isArray(t))return t.map(n=>Xw(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,r])=>{const i=n.replace(/([-_][a-z])/gi,s=>s.toUpperCase().replace(/[-_]/g,""));e[i]=Xw(r)}),e},p9=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},Fy=t=>{var e;return t.msg||t.message||t.error_description||(typeof t.error=="string"?t.error:(e=t.error)===null||e===void 0?void 0:e.message)||JSON.stringify(t)},g9=(t,e,n)=>it(void 0,void 0,void 0,function*(){const r=yield f9();t instanceof r&&!(n!=null&&n.noResolveJson)?t.json().then(i=>{const s=t.status||500,o=(i==null?void 0:i.statusCode)||s+"";e(new h9(Fy(i),s,o))}).catch(i=>{e(new Kw(Fy(i),i))}):e(new Kw(Fy(t),t))}),m9=(t,e,n,r)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||!r?i:(p9(r)?(i.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),i.body=JSON.stringify(r)):i.body=r,e!=null&&e.duplex&&(i.duplex=e.duplex),Object.assign(Object.assign({},i),n))};function Xf(t,e,n,r,i,s){return it(this,void 0,void 0,function*(){return new Promise((o,a)=>{t(n,m9(e,r,i,s)).then(l=>{if(!l.ok)throw l;return r!=null&&r.noResolveJson?l:l.json()}).then(l=>o(l)).catch(l=>g9(l,a,r))})})}function Ef(t,e,n,r){return it(this,void 0,void 0,function*(){return Xf(t,"GET",e,n,r)})}function Gs(t,e,n,r,i){return it(this,void 0,void 0,function*(){return Xf(t,"POST",e,r,i,n)})}function Zw(t,e,n,r,i){return it(this,void 0,void 0,function*(){return Xf(t,"PUT",e,r,i,n)})}function v9(t,e,n,r){return it(this,void 0,void 0,function*(){return Xf(t,"HEAD",e,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function xb(t,e,n,r,i){return it(this,void 0,void 0,function*(){return Xf(t,"DELETE",e,r,i,n)})}class y9{constructor(e,n){this.downloadFn=e,this.shouldThrowOnError=n}then(e,n){return this.execute().then(e,n)}execute(){return it(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(jn(e))return{data:null,error:e};throw e}})}}var B5;class w9{constructor(e,n){this.downloadFn=e,this.shouldThrowOnError=n,this[B5]="BlobDownloadBuilder",this.promise=null}asStream(){return new y9(this.downloadFn,this.shouldThrowOnError)}then(e,n){return this.getPromise().then(e,n)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return it(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(jn(e))return{data:null,error:e};throw e}})}}B5=Symbol.toStringTag;const x9=w9,_9={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},zk={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class b9{constructor(e,n={},r,i){this.shouldThrowOnError=!1,this.url=e,this.headers=n,this.bucketId=r,this.fetch=wb(i)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,n,r,i){return it(this,void 0,void 0,function*(){try{let s;const o=Object.assign(Object.assign({},zk),i);let a=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const l=o.metadata;typeof Blob<"u"&&r instanceof Blob?(s=new FormData,s.append("cacheControl",o.cacheControl),l&&s.append("metadata",this.encodeMetadata(l)),s.append("",r)):typeof FormData<"u"&&r instanceof FormData?(s=r,s.has("cacheControl")||s.append("cacheControl",o.cacheControl),l&&!s.has("metadata")&&s.append("metadata",this.encodeMetadata(l))):(s=r,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType,l&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(l))),(typeof ReadableStream<"u"&&s instanceof ReadableStream||s&&typeof s=="object"&&"pipe"in s&&typeof s.pipe=="function")&&!o.duplex&&(o.duplex="half")),i!=null&&i.headers&&(a=Object.assign(Object.assign({},a),i.headers));const c=this._removeEmptyFolders(n),h=this._getFinalPath(c),f=yield(e=="PUT"?Zw:Gs)(this.fetch,`${this.url}/object/${h}`,s,Object.assign({headers:a},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{data:{path:c,id:f.Id,fullPath:f.Key},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(jn(s))return{data:null,error:s};throw s}})}upload(e,n,r){return it(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,n,r)})}uploadToSignedUrl(e,n,r,i){return it(this,void 0,void 0,function*(){const s=this._removeEmptyFolders(e),o=this._getFinalPath(s),a=new URL(this.url+`/object/upload/sign/${o}`);a.searchParams.set("token",n);try{let l;const c=Object.assign({upsert:zk.upsert},i),h=Object.assign(Object.assign({},this.headers),{"x-upsert":String(c.upsert)});typeof Blob<"u"&&r instanceof Blob?(l=new FormData,l.append("cacheControl",c.cacheControl),l.append("",r)):typeof FormData<"u"&&r instanceof FormData?(l=r,l.append("cacheControl",c.cacheControl)):(l=r,h["cache-control"]=`max-age=${c.cacheControl}`,h["content-type"]=c.contentType);const f=yield Zw(this.fetch,a.toString(),l,{headers:h});return{data:{path:s,fullPath:f.Key},error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(jn(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(e,n){return it(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const i=Object.assign({},this.headers);n!=null&&n.upsert&&(i["x-upsert"]="true");const s=yield Gs(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:i}),o=new URL(this.url+s.url),a=o.searchParams.get("token");if(!a)throw new yb("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:a},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(jn(r))return{data:null,error:r};throw r}})}update(e,n,r){return it(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,n,r)})}move(e,n,r){return it(this,void 0,void 0,function*(){try{return{data:yield Gs(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(jn(i))return{data:null,error:i};throw i}})}copy(e,n,r){return it(this,void 0,void 0,function*(){try{return{data:{path:(yield Gs(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(jn(i))return{data:null,error:i};throw i}})}createSignedUrl(e,n,r){return it(this,void 0,void 0,function*(){try{let i=this._getFinalPath(e),s=yield Gs(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return s={signedUrl:encodeURI(`${this.url}${s.signedURL}${o}`)},{data:s,error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(jn(i))return{data:null,error:i};throw i}})}createSignedUrls(e,n,r){return it(this,void 0,void 0,function*(){try{const i=yield Gs(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:e},{headers:this.headers}),s=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:i.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${s}`):null})),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(jn(i))return{data:null,error:i};throw i}})}download(e,n){const i=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",s=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),o=s?`?${s}`:"",a=this._getFinalPath(e),l=()=>Ef(this.fetch,`${this.url}/${i}/${a}${o}`,{headers:this.headers,noResolveJson:!0});return new x9(l,this.shouldThrowOnError)}info(e){return it(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{const r=yield Ef(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:Xw(r),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(jn(r))return{data:null,error:r};throw r}})}exists(e){return it(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{return yield v9(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(jn(r)&&r instanceof Kw){const i=r.originalError;if([400,404].includes(i==null?void 0:i.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,n){const r=this._getFinalPath(e),i=[],s=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";s!==""&&i.push(s);const a=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});l!==""&&i.push(l);let c=i.join("&");return c!==""&&(c=`?${c}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${r}${c}`)}}}remove(e){return it(this,void 0,void 0,function*(){try{return{data:yield xb(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(jn(n))return{data:null,error:n};throw n}})}list(e,n,r){return it(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},_9),n),{prefix:e||""});return{data:yield Gs(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},r),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(jn(i))return{data:null,error:i};throw i}})}listV2(e,n){return it(this,void 0,void 0,function*(){try{const r=Object.assign({},e);return{data:yield Gs(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},n),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(jn(r))return{data:null,error:r};throw r}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const n=[];return e.width&&n.push(`width=${e.width}`),e.height&&n.push(`height=${e.height}`),e.resize&&n.push(`resize=${e.resize}`),e.format&&n.push(`format=${e.format}`),e.quality&&n.push(`quality=${e.quality}`),n.join("&")}}const $5="2.84.0",z5={"X-Client-Info":`storage-js/${$5}`};class S9{constructor(e,n={},r,i){this.shouldThrowOnError=!1;const s=new URL(e);i!=null&&i.useNewHostname&&/supabase\.(co|in|red)$/.test(s.hostname)&&!s.hostname.includes("storage.supabase.")&&(s.hostname=s.hostname.replace("supabase.","storage.supabase.")),this.url=s.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},z5),n),this.fetch=wb(r)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(e){return it(this,void 0,void 0,function*(){try{const n=this.listBucketOptionsToQueryString(e);return{data:yield Ef(this.fetch,`${this.url}/bucket${n}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(jn(n))return{data:null,error:n};throw n}})}getBucket(e){return it(this,void 0,void 0,function*(){try{return{data:yield Ef(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(jn(n))return{data:null,error:n};throw n}})}createBucket(e){return it(this,arguments,void 0,function*(n,r={public:!1}){try{return{data:yield Gs(this.fetch,`${this.url}/bucket`,{id:n,name:n,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(jn(i))return{data:null,error:i};throw i}})}updateBucket(e,n){return it(this,void 0,void 0,function*(){try{return{data:yield Zw(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(jn(r))return{data:null,error:r};throw r}})}emptyBucket(e){return it(this,void 0,void 0,function*(){try{return{data:yield Gs(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(jn(n))return{data:null,error:n};throw n}})}deleteBucket(e){return it(this,void 0,void 0,function*(){try{return{data:yield xb(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(jn(n))return{data:null,error:n};throw n}})}listBucketOptionsToQueryString(e){const n={};return e&&("limit"in e&&(n.limit=String(e.limit)),"offset"in e&&(n.offset=String(e.offset)),e.search&&(n.search=e.search),e.sortColumn&&(n.sortColumn=e.sortColumn),e.sortOrder&&(n.sortOrder=e.sortOrder)),Object.keys(n).length>0?"?"+new URLSearchParams(n).toString():""}}class C9{constructor(e,n={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},z5),n),this.fetch=wb(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return it(this,void 0,void 0,function*(){try{return{data:yield Gs(this.fetch,`${this.url}/bucket`,{name:e},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(jn(n))return{data:null,error:n};throw n}})}listBuckets(e){return it(this,void 0,void 0,function*(){try{const n=new URLSearchParams;(e==null?void 0:e.limit)!==void 0&&n.set("limit",e.limit.toString()),(e==null?void 0:e.offset)!==void 0&&n.set("offset",e.offset.toString()),e!=null&&e.sortColumn&&n.set("sortColumn",e.sortColumn),e!=null&&e.sortOrder&&n.set("sortOrder",e.sortOrder),e!=null&&e.search&&n.set("search",e.search);const r=n.toString(),i=r?`${this.url}/bucket?${r}`:`${this.url}/bucket`;return{data:yield Ef(this.fetch,i,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(jn(n))return{data:null,error:n};throw n}})}deleteBucket(e){return it(this,void 0,void 0,function*(){try{return{data:yield xb(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(jn(n))return{data:null,error:n};throw n}})}}const _b={"X-Client-Info":`storage-js/${$5}`,"Content-Type":"application/json"};class U5 extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function Gi(t){return typeof t=="object"&&t!==null&&"__isStorageVectorsError"in t}class By extends U5{constructor(e,n,r){super(e),this.name="StorageVectorsApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class k9 extends U5{constructor(e,n){super(e),this.name="StorageVectorsUnknownError",this.originalError=n}}var Uk;(function(t){t.InternalError="InternalError",t.S3VectorConflictException="S3VectorConflictException",t.S3VectorNotFoundException="S3VectorNotFoundException",t.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",t.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",t.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(Uk||(Uk={}));const bb=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),E9=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},Vk=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),R9=(t,e,n)=>it(void 0,void 0,void 0,function*(){if(t&&typeof t=="object"&&"status"in t&&"ok"in t&&typeof t.status=="number"&&!(n!=null&&n.noResolveJson)){const i=t.status||500,s=t;if(typeof s.json=="function")s.json().then(o=>{const a=(o==null?void 0:o.statusCode)||(o==null?void 0:o.code)||i+"";e(new By(Vk(o),i,a))}).catch(()=>{const o=i+"",a=s.statusText||`HTTP ${i} error`;e(new By(a,i,o))});else{const o=i+"",a=s.statusText||`HTTP ${i} error`;e(new By(a,i,o))}}else e(new k9(Vk(t),t))}),T9=(t,e,n,r)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||!r?i:(E9(r)?(i.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),i.body=JSON.stringify(r)):i.body=r,Object.assign(Object.assign({},i),n))};function P9(t,e,n,r,i,s){return it(this,void 0,void 0,function*(){return new Promise((o,a)=>{t(n,T9(e,r,i,s)).then(l=>{if(!l.ok)throw l;if(r!=null&&r.noResolveJson)return l;const c=l.headers.get("content-type");return!c||!c.includes("application/json")?{}:l.json()}).then(l=>o(l)).catch(l=>R9(l,a,r))})})}function qi(t,e,n,r,i){return it(this,void 0,void 0,function*(){return P9(t,"POST",e,r,i,n)})}class L9{constructor(e,n={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},_b),n),this.fetch=bb(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(e){return it(this,void 0,void 0,function*(){try{return{data:(yield qi(this.fetch,`${this.url}/CreateIndex`,e,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Gi(n))return{data:null,error:n};throw n}})}getIndex(e,n){return it(this,void 0,void 0,function*(){try{return{data:yield qi(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:e,indexName:n},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Gi(r))return{data:null,error:r};throw r}})}listIndexes(e){return it(this,void 0,void 0,function*(){try{return{data:yield qi(this.fetch,`${this.url}/ListIndexes`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Gi(n))return{data:null,error:n};throw n}})}deleteIndex(e,n){return it(this,void 0,void 0,function*(){try{return{data:(yield qi(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:e,indexName:n},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Gi(r))return{data:null,error:r};throw r}})}}class M9{constructor(e,n={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},_b),n),this.fetch=bb(r)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(e){return it(this,void 0,void 0,function*(){try{if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield qi(this.fetch,`${this.url}/PutVectors`,e,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Gi(n))return{data:null,error:n};throw n}})}getVectors(e){return it(this,void 0,void 0,function*(){try{return{data:yield qi(this.fetch,`${this.url}/GetVectors`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Gi(n))return{data:null,error:n};throw n}})}listVectors(e){return it(this,void 0,void 0,function*(){try{if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return{data:yield qi(this.fetch,`${this.url}/ListVectors`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Gi(n))return{data:null,error:n};throw n}})}queryVectors(e){return it(this,void 0,void 0,function*(){try{return{data:yield qi(this.fetch,`${this.url}/QueryVectors`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Gi(n))return{data:null,error:n};throw n}})}deleteVectors(e){return it(this,void 0,void 0,function*(){try{if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield qi(this.fetch,`${this.url}/DeleteVectors`,e,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Gi(n))return{data:null,error:n};throw n}})}}class A9{constructor(e,n={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},_b),n),this.fetch=bb(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return it(this,void 0,void 0,function*(){try{return{data:(yield qi(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Gi(n))return{data:null,error:n};throw n}})}getBucket(e){return it(this,void 0,void 0,function*(){try{return{data:yield qi(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:e},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Gi(n))return{data:null,error:n};throw n}})}listBuckets(){return it(this,arguments,void 0,function*(e={}){try{return{data:yield qi(this.fetch,`${this.url}/ListVectorBuckets`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Gi(n))return{data:null,error:n};throw n}})}deleteBucket(e){return it(this,void 0,void 0,function*(){try{return{data:(yield qi(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Gi(n))return{data:null,error:n};throw n}})}}class N9 extends A9{constructor(e,n={}){super(e,n.headers||{},n.fetch)}from(e){return new j9(this.url,this.headers,e,this.fetch)}}class j9 extends L9{constructor(e,n,r,i){super(e,n,i),this.vectorBucketName=r}createIndex(e){const n=Object.create(null,{createIndex:{get:()=>super.createIndex}});return it(this,void 0,void 0,function*(){return n.createIndex.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const e=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return it(this,arguments,void 0,function*(n={}){return e.listIndexes.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName}))})}getIndex(e){const n=Object.create(null,{getIndex:{get:()=>super.getIndex}});return it(this,void 0,void 0,function*(){return n.getIndex.call(this,this.vectorBucketName,e)})}deleteIndex(e){const n=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return it(this,void 0,void 0,function*(){return n.deleteIndex.call(this,this.vectorBucketName,e)})}index(e){return new I9(this.url,this.headers,this.vectorBucketName,e,this.fetch)}}class I9 extends M9{constructor(e,n,r,i,s){super(e,n,s),this.vectorBucketName=r,this.indexName=i}putVectors(e){const n=Object.create(null,{putVectors:{get:()=>super.putVectors}});return it(this,void 0,void 0,function*(){return n.putVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(e){const n=Object.create(null,{getVectors:{get:()=>super.getVectors}});return it(this,void 0,void 0,function*(){return n.getVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const e=Object.create(null,{listVectors:{get:()=>super.listVectors}});return it(this,arguments,void 0,function*(n={}){return e.listVectors.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(e){const n=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return it(this,void 0,void 0,function*(){return n.queryVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(e){const n=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return it(this,void 0,void 0,function*(){return n.deleteVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class O9 extends S9{constructor(e,n={},r,i){super(e,n,r,i)}from(e){return new b9(this.url,this.headers,e,this.fetch)}get vectors(){return new N9(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new C9(this.url+"/iceberg",this.headers,this.fetch)}}const D9="2.84.0";let Sh="";typeof Deno<"u"?Sh="deno":typeof document<"u"?Sh="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Sh="react-native":Sh="node";const F9={"X-Client-Info":`supabase-js-${Sh}/${D9}`},B9={headers:F9},$9={schema:"public"},z9={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},U9={},V9=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),W9=()=>Headers,H9=(t,e,n)=>{const r=V9(n),i=W9();return async(s,o)=>{var a;const l=(a=await e())!==null&&a!==void 0?a:t;let c=new i(o==null?void 0:o.headers);return c.has("apikey")||c.set("apikey",t),c.has("Authorization")||c.set("Authorization",`Bearer ${l}`),r(s,Object.assign(Object.assign({},o),{headers:c}))}};function G9(t){return t.endsWith("/")?t:t+"/"}function q9(t,e){var n,r;const{db:i,auth:s,realtime:o,global:a}=t,{db:l,auth:c,realtime:h,global:f}=e,p={db:Object.assign(Object.assign({},l),i),auth:Object.assign(Object.assign({},c),s),realtime:Object.assign(Object.assign({},h),o),storage:{},global:Object.assign(Object.assign(Object.assign({},f),a),{headers:Object.assign(Object.assign({},(n=f==null?void 0:f.headers)!==null&&n!==void 0?n:{}),(r=a==null?void 0:a.headers)!==null&&r!==void 0?r:{})}),accessToken:async()=>""};return t.accessToken?p.accessToken=t.accessToken:delete p.accessToken,p}function Y9(t){const e=t==null?void 0:t.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(G9(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const V5="2.84.0",nc=30*1e3,Qw=3,$y=Qw*nc,K9="http://localhost:9999",X9="supabase.auth.token",Z9={"X-Client-Info":`gotrue-js/${V5}`},Jw="X-Supabase-Api-Version",W5={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Q9=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,J9=10*60*1e3;class Rf extends Error{constructor(e,n,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function ot(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class e7 extends Rf{constructor(e,n,r){super(e,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function t7(t){return ot(t)&&t.name==="AuthApiError"}class ou extends Rf{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class kl extends Rf{constructor(e,n,r,i){super(e,r,i),this.name=n,this.status=r}}class Vi extends kl{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function n7(t){return ot(t)&&t.name==="AuthSessionMissingError"}class Ku extends kl{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class hg extends kl{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class fg extends kl{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function r7(t){return ot(t)&&t.name==="AuthImplicitGrantRedirectError"}class Wk extends kl{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class ex extends kl{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function zy(t){return ot(t)&&t.name==="AuthRetryableFetchError"}class Hk extends kl{constructor(e,n,r){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class tx extends kl{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Wm="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Gk=` 	
\r=`.split(""),i7=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<Gk.length;e+=1)t[Gk[e].charCodeAt(0)]=-2;for(let e=0;e<Wm.length;e+=1)t[Wm[e].charCodeAt(0)]=e;return t})();function qk(t,e,n){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(Wm[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(Wm[r]),e.queuedBits-=6}}function H5(t,e,n){const r=i7[t];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function Yk(t){const e=[],n=o=>{e.push(String.fromCodePoint(o))},r={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},s=o=>{a7(o,r,n)};for(let o=0;o<t.length;o+=1)H5(t.charCodeAt(o),i,s);return e.join("")}function s7(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function o7(t,e){for(let n=0;n<t.length;n+=1){let r=t.charCodeAt(n);if(r>55295&&r<=56319){const i=(r-55296)*1024&65535;r=(t.charCodeAt(n+1)-56320&65535|i)+65536,n+=1}s7(r,e)}}function a7(t,e,n){if(e.utf8seq===0){if(t<=127){n(t);return}for(let r=1;r<6;r+=1)if(!(t>>7-r&1)){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function Bc(t){const e=[],n={queue:0,queuedBits:0},r=i=>{e.push(i)};for(let i=0;i<t.length;i+=1)H5(t.charCodeAt(i),n,r);return new Uint8Array(e)}function l7(t){const e=[];return o7(t,n=>e.push(n)),new Uint8Array(e)}function cu(t){const e=[],n={queue:0,queuedBits:0},r=i=>{e.push(i)};return t.forEach(i=>qk(i,n,r)),qk(null,n,r),e.join("")}function u7(t){return Math.round(Date.now()/1e3)+t}function c7(){return Symbol("auth-callback")}const zr=()=>typeof window<"u"&&typeof document<"u",Kl={tested:!1,writable:!1},G5=()=>{if(!zr())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Kl.tested)return Kl.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),Kl.tested=!0,Kl.writable=!0}catch{Kl.tested=!0,Kl.writable=!1}return Kl.writable};function d7(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((i,s)=>{e[s]=i})}catch{}return n.searchParams.forEach((r,i)=>{e[i]=r}),e}const q5=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),h7=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",rc=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},Xl=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},Ua=async(t,e)=>{await t.removeItem(e)};class $0{constructor(){this.promise=new $0.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}$0.promiseConstructor=Promise;function Uy(t){const e=t.split(".");if(e.length!==3)throw new tx("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!Q9.test(e[r]))throw new tx("JWT not in base64url format");return{header:JSON.parse(Yk(e[0])),payload:JSON.parse(Yk(e[1])),signature:Bc(e[2]),raw:{header:e[0],payload:e[1]}}}async function f7(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function p7(t,e){return new Promise((r,i)=>{(async()=>{for(let s=0;s<1/0;s++)try{const o=await t(s);if(!e(s,null,o)){r(o);return}}catch(o){if(!e(s,o)){i(o);return}}})()})}function g7(t){return("0"+t.toString(16)).substr(-2)}function m7(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let i="";for(let s=0;s<56;s++)i+=n.charAt(Math.floor(Math.random()*r));return i}return crypto.getRandomValues(e),Array.from(e,g7).join("")}async function v7(t){const n=new TextEncoder().encode(t),r=await crypto.subtle.digest("SHA-256",n),i=new Uint8Array(r);return Array.from(i).map(s=>String.fromCharCode(s)).join("")}async function y7(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await v7(t);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Xu(t,e,n=!1){const r=m7();let i=r;n&&(i+="/PASSWORD_RECOVERY"),await rc(t,`${e}-code-verifier`,i);const s=await y7(r);return[s,r===s?"plain":"s256"]}const w7=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function x7(t){const e=t.headers.get(Jw);if(!e||!e.match(w7))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function _7(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function b7(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const S7=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Zu(t){if(!S7.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Vy(){const t={};return new Proxy(t,{get:(e,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function C7(t,e){return new Proxy(t,{get:(n,r,i)=>{if(r==="__isInsecureUserWarningProxy")return!0;if(typeof r=="symbol"){const s=r.toString();if(s==="Symbol(Symbol.toPrimitive)"||s==="Symbol(Symbol.toStringTag)"||s==="Symbol(util.inspect.custom)"||s==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(n,r,i)}return!e.value&&typeof r=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(n,r,i)}})}function Kk(t){return JSON.parse(JSON.stringify(t))}const tu=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),k7=[502,503,504];async function Xk(t){var e;if(!h7(t))throw new ex(tu(t),0);if(k7.includes(t.status))throw new ex(tu(t),t.status);let n;try{n=await t.json()}catch(s){throw new ou(tu(s),s)}let r;const i=x7(t);if(i&&i.getTime()>=W5["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new Hk(tu(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new Vi}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((s,o)=>s&&typeof o=="string",!0))throw new Hk(tu(n),t.status,n.weak_password.reasons);throw new e7(tu(n),t.status||500,r)}const E7=(t,e,n,r)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),n))};async function pt(t,e,n,r){var i;const s=Object.assign({},r==null?void 0:r.headers);s[Jw]||(s[Jw]=W5["2024-01-01"].name),r!=null&&r.jwt&&(s.Authorization=`Bearer ${r.jwt}`);const o=(i=r==null?void 0:r.query)!==null&&i!==void 0?i:{};r!=null&&r.redirectTo&&(o.redirect_to=r.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",l=await R7(t,e,n+a,{headers:s,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(l):{data:Object.assign({},l),error:null}}async function R7(t,e,n,r,i,s){const o=E7(e,r,i,s);let a;try{a=await t(n,Object.assign({},o))}catch(l){throw console.error(l),new ex(tu(l),0)}if(a.ok||await Xk(a),r!=null&&r.noResolveJson)return a;try{return await a.json()}catch(l){await Xk(l)}}function Vs(t){var e;let n=null;L7(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=u7(t.expires_in)));const r=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:r},error:null}}function Zk(t){const e=Vs(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(e.data.weak_password=t.weak_password),e}function Qa(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function T7(t){return{data:t,error:null}}function P7(t){const{action_link:e,email_otp:n,hashed_token:r,redirect_to:i,verification_type:s}=t,o=wd(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:e,email_otp:n,hashed_token:r,redirect_to:i,verification_type:s},l=Object.assign({},o);return{data:{properties:a,user:l},error:null}}function Qk(t){return t}function L7(t){return t.access_token&&t.refresh_token&&t.expires_in}const Wy=["global","local","others"];class M7{constructor({url:e="",headers:n={},fetch:r}){this.url=e,this.headers=n,this.fetch=q5(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,n=Wy[0]){if(Wy.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Wy.join(", ")}`);try{return await pt(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(ot(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,n={}){try{return await pt(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:Qa})}catch(r){if(ot(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:n}=e,r=wd(e,["options"]),i=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(i.new_email=r==null?void 0:r.newEmail,delete i.newEmail),await pt(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:P7,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(ot(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await pt(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Qa})}catch(n){if(ot(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,r,i,s,o,a,l;try{const c={nextPage:null,lastPage:0,total:0},h=await pt(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(s=(i=e==null?void 0:e.perPage)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:""},xform:Qk});if(h.error)throw h.error;const f=await h.json(),p=(o=h.headers.get("x-total-count"))!==null&&o!==void 0?o:0,g=(l=(a=h.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return g.length>0&&(g.forEach(v=>{const x=parseInt(v.split(";")[0].split("=")[1].substring(0,1)),k=JSON.parse(v.split(";")[1].split("=")[1]);c[`${k}Page`]=x}),c.total=parseInt(p)),{data:Object.assign(Object.assign({},f),c),error:null}}catch(c){if(ot(c))return{data:{users:[]},error:c};throw c}}async getUserById(e){Zu(e);try{return await pt(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Qa})}catch(n){if(ot(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){Zu(e);try{return await pt(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:Qa})}catch(r){if(ot(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,n=!1){Zu(e);try{return await pt(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:Qa})}catch(r){if(ot(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){Zu(e.userId);try{const{data:n,error:r}=await pt(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:n,error:r}}catch(n){if(ot(n))return{data:null,error:n};throw n}}async _deleteFactor(e){Zu(e.userId),Zu(e.id);try{return{data:await pt(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(ot(n))return{data:null,error:n};throw n}}async _listOAuthClients(e){var n,r,i,s,o,a,l;try{const c={nextPage:null,lastPage:0,total:0},h=await pt(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(s=(i=e==null?void 0:e.perPage)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:""},xform:Qk});if(h.error)throw h.error;const f=await h.json(),p=(o=h.headers.get("x-total-count"))!==null&&o!==void 0?o:0,g=(l=(a=h.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return g.length>0&&(g.forEach(v=>{const x=parseInt(v.split(";")[0].split("=")[1].substring(0,1)),k=JSON.parse(v.split(";")[1].split("=")[1]);c[`${k}Page`]=x}),c.total=parseInt(p)),{data:Object.assign(Object.assign({},f),c),error:null}}catch(c){if(ot(c))return{data:{clients:[]},error:c};throw c}}async _createOAuthClient(e){try{return await pt(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(ot(n))return{data:null,error:n};throw n}}async _getOAuthClient(e){try{return await pt(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(ot(n))return{data:null,error:n};throw n}}async _updateOAuthClient(e,n){try{return await pt(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:n,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(ot(r))return{data:null,error:r};throw r}}async _deleteOAuthClient(e){try{return await pt(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(n){if(ot(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(e){try{return await pt(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(ot(n))return{data:null,error:n};throw n}}}function Jk(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}const Qu={debug:!!(globalThis&&G5()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Y5 extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class A7 extends Y5{}async function N7(t,e,n){Qu.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),Qu.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async i=>{if(i){Qu.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,i.name);try{return await n()}finally{Qu.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,i.name)}}else{if(e===0)throw Qu.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new A7(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(Qu.debug)try{const s=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(s,null,"  "))}catch(s){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",s)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}function j7(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function K5(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error(`@supabase/auth-js: Address "${t}" is invalid.`);return t.toLowerCase()}function I7(t){return parseInt(t,16)}function O7(t){const e=new TextEncoder().encode(t);return"0x"+Array.from(e,r=>r.toString(16).padStart(2,"0")).join("")}function D7(t){var e;const{chainId:n,domain:r,expirationTime:i,issuedAt:s=new Date,nonce:o,notBefore:a,requestId:l,resources:c,scheme:h,uri:f,version:p}=t;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(o&&o.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${o}`);if(!f)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(p!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${p}`);if(!((e=t.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${t.statement}`)}const g=K5(t.address),v=h?`${h}://${r}`:r,x=t.statement?`${t.statement}
`:"",k=`${v} wants you to sign in with your Ethereum account:
${g}

${x}`;let C=`URI: ${f}
Version: ${p}
Chain ID: ${n}${o?`
Nonce: ${o}`:""}
Issued At: ${s.toISOString()}`;if(i&&(C+=`
Expiration Time: ${i.toISOString()}`),a&&(C+=`
Not Before: ${a.toISOString()}`),l&&(C+=`
Request ID: ${l}`),c){let b=`
Resources:`;for(const _ of c){if(!_||typeof _!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${_}`);b+=`
- ${_}`}C+=b}return`${k}
${C}`}class ur extends Error{constructor({message:e,code:n,cause:r,name:i}){var s;super(e,{cause:r}),this.__isWebAuthnError=!0,this.name=(s=i??(r instanceof Error?r.name:void 0))!==null&&s!==void 0?s:"Unknown Error",this.code=n}}class Hm extends ur{constructor(e,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:e}),this.name="WebAuthnUnknownError",this.originalError=n}}function F7({error:t,options:e}){var n,r,i;const{publicKey:s}=e;if(!s)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new ur({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if(t.name==="ConstraintError"){if(((n=s.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new ur({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:t});if(e.mediation==="conditional"&&((r=s.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new ur({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:t});if(((i=s.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new ur({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:t})}else{if(t.name==="InvalidStateError")return new ur({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:t});if(t.name==="NotAllowedError")return new ur({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="NotSupportedError")return s.pubKeyCredParams.filter(a=>a.type==="public-key").length===0?new ur({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:t}):new ur({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:t});if(t.name==="SecurityError"){const o=window.location.hostname;if(X5(o)){if(s.rp.id!==o)return new ur({message:`The RP ID "${s.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new ur({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="TypeError"){if(s.user.id.byteLength<1||s.user.id.byteLength>64)return new ur({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:t})}else if(t.name==="UnknownError")return new ur({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new ur({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}function B7({error:t,options:e}){const{publicKey:n}=e;if(!n)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new ur({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else{if(t.name==="NotAllowedError")return new ur({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="SecurityError"){const r=window.location.hostname;if(X5(r)){if(n.rpId!==r)return new ur({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new ur({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="UnknownError")return new ur({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new ur({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}class $7{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const z7=new $7;function U7(t){if(!t)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(t);const{challenge:e,user:n,excludeCredentials:r}=t,i=wd(t,["challenge","user","excludeCredentials"]),s=Bc(e).buffer,o=Object.assign(Object.assign({},n),{id:Bc(n.id).buffer}),a=Object.assign(Object.assign({},i),{challenge:s,user:o});if(r&&r.length>0){a.excludeCredentials=new Array(r.length);for(let l=0;l<r.length;l++){const c=r[l];a.excludeCredentials[l]=Object.assign(Object.assign({},c),{id:Bc(c.id).buffer,type:c.type||"public-key",transports:c.transports})}}return a}function V7(t){if(!t)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(t);const{challenge:e,allowCredentials:n}=t,r=wd(t,["challenge","allowCredentials"]),i=Bc(e).buffer,s=Object.assign(Object.assign({},r),{challenge:i});if(n&&n.length>0){s.allowCredentials=new Array(n.length);for(let o=0;o<n.length;o++){const a=n[o];s.allowCredentials[o]=Object.assign(Object.assign({},a),{id:Bc(a.id).buffer,type:a.type||"public-key",transports:a.transports})}}return s}function W7(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const n=t;return{id:t.id,rawId:t.id,response:{attestationObject:cu(new Uint8Array(t.response.attestationObject)),clientDataJSON:cu(new Uint8Array(t.response.clientDataJSON))},type:"public-key",clientExtensionResults:t.getClientExtensionResults(),authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function H7(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const n=t,r=t.getClientExtensionResults(),i=t.response;return{id:t.id,rawId:t.id,response:{authenticatorData:cu(new Uint8Array(i.authenticatorData)),clientDataJSON:cu(new Uint8Array(i.clientDataJSON)),signature:cu(new Uint8Array(i.signature)),userHandle:i.userHandle?cu(new Uint8Array(i.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function X5(t){return t==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(t)}function eE(){var t,e;return!!(zr()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.create)=="function"&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.get)=="function")}async function G7(t){try{const e=await navigator.credentials.create(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Hm("Browser returned unexpected credential type",e)}:{data:null,error:new Hm("Empty credential response",e)}}catch(e){return{data:null,error:F7({error:e,options:t})}}}async function q7(t){try{const e=await navigator.credentials.get(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Hm("Browser returned unexpected credential type",e)}:{data:null,error:new Hm("Empty credential response",e)}}catch(e){return{data:null,error:B7({error:e,options:t})}}}const Y7={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},K7={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function Gm(...t){const e=i=>i!==null&&typeof i=="object"&&!Array.isArray(i),n=i=>i instanceof ArrayBuffer||ArrayBuffer.isView(i),r={};for(const i of t)if(i)for(const s in i){const o=i[s];if(o!==void 0)if(Array.isArray(o))r[s]=o;else if(n(o))r[s]=o;else if(e(o)){const a=r[s];e(a)?r[s]=Gm(a,o):r[s]=Gm(o)}else r[s]=o}return r}function X7(t,e){return Gm(Y7,t,e||{})}function Z7(t,e){return Gm(K7,t,e||{})}class Q7{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:n,friendlyName:r,signal:i},s){try{const{data:o,error:a}=await this.client.mfa.challenge({factorId:e,webauthn:n});if(!o)return{data:null,error:a};const l=i??z7.createNewAbortSignal();if(o.webauthn.type==="create"){const{user:c}=o.webauthn.credential_options.publicKey;c.name||(c.name=`${c.id}:${r}`),c.displayName||(c.displayName=c.name)}switch(o.webauthn.type){case"create":{const c=X7(o.webauthn.credential_options.publicKey,s==null?void 0:s.create),{data:h,error:f}=await G7({publicKey:c,signal:l});return h?{data:{factorId:e,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:h}},error:null}:{data:null,error:f}}case"request":{const c=Z7(o.webauthn.credential_options.publicKey,s==null?void 0:s.request),{data:h,error:f}=await q7(Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:c,signal:l}));return h?{data:{factorId:e,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:h}},error:null}:{data:null,error:f}}}}catch(o){return ot(o)?{data:null,error:o}:{data:null,error:new ou("Unexpected error in challenge",o)}}}async _verify({challengeId:e,factorId:n,webauthn:r}){return this.client.mfa.verify({factorId:n,challengeId:e,webauthn:r})}async _authenticate({factorId:e,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i}={}},s){if(!n)return{data:null,error:new Rf("rpId is required for WebAuthn authentication")};try{if(!eE())return{data:null,error:new ou("Browser does not support WebAuthn",null)};const{data:o,error:a}=await this.challenge({factorId:e,webauthn:{rpId:n,rpOrigins:r},signal:i},{request:s});if(!o)return{data:null,error:a};const{webauthn:l}=o;return this._verify({factorId:e,challengeId:o.challengeId,webauthn:{type:l.type,rpId:n,rpOrigins:r,credential_response:l.credential_response}})}catch(o){return ot(o)?{data:null,error:o}:{data:null,error:new ou("Unexpected error in authenticate",o)}}}async _register({friendlyName:e,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i}={}},s){if(!n)return{data:null,error:new Rf("rpId is required for WebAuthn registration")};try{if(!eE())return{data:null,error:new ou("Browser does not support WebAuthn",null)};const{data:o,error:a}=await this._enroll({friendlyName:e});if(!o)return await this.client.mfa.listFactors().then(h=>{var f;return(f=h.data)===null||f===void 0?void 0:f.all.find(p=>p.factor_type==="webauthn"&&p.friendly_name===e&&p.status!=="unverified")}).then(h=>h?this.client.mfa.unenroll({factorId:h==null?void 0:h.id}):void 0),{data:null,error:a};const{data:l,error:c}=await this._challenge({factorId:o.id,friendlyName:o.friendly_name,webauthn:{rpId:n,rpOrigins:r},signal:i},{create:s});return l?this._verify({factorId:o.id,challengeId:l.challengeId,webauthn:{rpId:n,rpOrigins:r,type:l.webauthn.type,credential_response:l.webauthn.credential_response}}):{data:null,error:c}}catch(o){return ot(o)?{data:null,error:o}:{data:null,error:new ou("Unexpected error in register",o)}}}}j7();const J7={url:K9,storageKey:X9,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Z9,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function tE(t,e,n){return await n()}const Ju={};class Tf{get jwks(){var e,n;return(n=(e=Ju[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(e){Ju[this.storageKey]=Object.assign(Object.assign({},Ju[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,n;return(n=(e=Ju[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Ju[this.storageKey]=Object.assign(Object.assign({},Ju[this.storageKey]),{cachedAt:e})}constructor(e){var n,r,i;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const s=Object.assign(Object.assign({},J7),e);if(this.storageKey=s.storageKey,this.instanceID=(n=Tf.nextInstanceID[this.storageKey])!==null&&n!==void 0?n:0,Tf.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.instanceID>0&&zr()){const o=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(o),this.logDebugMessages&&console.trace(o)}if(this.persistSession=s.persistSession,this.autoRefreshToken=s.autoRefreshToken,this.admin=new M7({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=q5(s.fetch),this.lock=s.lock||tE,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,this.throwOnError=s.throwOnError,s.lock?this.lock=s.lock:zr()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=N7:this.lock=tE,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new Q7(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(s.storage?this.storage=s.storage:G5()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Jk(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=Jk(this.memoryStorage)),zr()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(i=this.broadcastChannel)===null||i===void 0||i.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o),await this._notifyAllSubscribers(o.data.event,o.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${V5}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let n={},r="none";if(zr()&&(n=d7(window.location.href),this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce")),zr()&&this.detectSessionInUrl&&r!=="none"){const{data:i,error:s}=await this._getSessionFromURL(n,r);if(s){if(this._debug("#_initialize()","error detecting session from URL",s),r7(s)){const l=(e=s.details)===null||e===void 0?void 0:e.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:s}}return await this._removeSession(),{error:s}}const{session:o,redirectType:a}=i;return this._debug("#_initialize()","detected session in URL",o,"redirect type",a),await this._saveSession(o),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return ot(n)?this._returnResult({error:n}):this._returnResult({error:new ou("Unexpected error during initialization",n)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,r,i;try{const s=await pt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(i=e==null?void 0:e.options)===null||i===void 0?void 0:i.captchaToken}},xform:Vs}),{data:o,error:a}=s;if(a||!o)return this._returnResult({data:{user:null,session:null},error:a});const l=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),this._returnResult({data:{user:c,session:l},error:null})}catch(s){if(ot(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signUp(e){var n,r,i;try{let s;if("email"in e){const{email:h,password:f,options:p}=e;let g=null,v=null;this.flowType==="pkce"&&([g,v]=await Xu(this.storage,this.storageKey)),s=await pt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:p==null?void 0:p.emailRedirectTo,body:{email:h,password:f,data:(n=p==null?void 0:p.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken},code_challenge:g,code_challenge_method:v},xform:Vs})}else if("phone"in e){const{phone:h,password:f,options:p}=e;s=await pt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:h,password:f,data:(r=p==null?void 0:p.data)!==null&&r!==void 0?r:{},channel:(i=p==null?void 0:p.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken}},xform:Vs})}else throw new hg("You must provide either an email or phone number and a password");const{data:o,error:a}=s;if(a||!o)return this._returnResult({data:{user:null,session:null},error:a});const l=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),this._returnResult({data:{user:c,session:l},error:null})}catch(s){if(ot(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithPassword(e){try{let n;if("email"in e){const{email:s,password:o,options:a}=e;n=await pt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:s,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:Zk})}else if("phone"in e){const{phone:s,password:o,options:a}=e;n=await pt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:s,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:Zk})}else throw new hg("You must provide either an email or phone number and a password");const{data:r,error:i}=n;if(i)return this._returnResult({data:{user:null,session:null},error:i});if(!r||!r.session||!r.user){const s=new Ku;return this._returnResult({data:{user:null,session:null},error:s})}return r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),this._returnResult({data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:i})}catch(n){if(ot(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOAuth(e){var n,r,i,s;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(i=e.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(s=e.options)===null||s===void 0?void 0:s.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:n}=e;switch(n){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(e){var n,r,i,s,o,a,l,c,h,f,p;let g,v;if("message"in e)g=e.message,v=e.signature;else{const{chain:x,wallet:k,statement:C,options:b}=e;let _;if(zr())if(typeof k=="object")_=k;else{const $=window;if("ethereum"in $&&typeof $.ethereum=="object"&&"request"in $.ethereum&&typeof $.ethereum.request=="function")_=$.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof k!="object"||!(b!=null&&b.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");_=k}const T=new URL((n=b==null?void 0:b.url)!==null&&n!==void 0?n:window.location.href),R=await _.request({method:"eth_requestAccounts"}).then($=>$).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!R||R.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const L=K5(R[0]);let M=(r=b==null?void 0:b.signInWithEthereum)===null||r===void 0?void 0:r.chainId;if(!M){const $=await _.request({method:"eth_chainId"});M=I7($)}const A={domain:T.host,address:L,statement:C,uri:T.href,version:"1",chainId:M,nonce:(i=b==null?void 0:b.signInWithEthereum)===null||i===void 0?void 0:i.nonce,issuedAt:(o=(s=b==null?void 0:b.signInWithEthereum)===null||s===void 0?void 0:s.issuedAt)!==null&&o!==void 0?o:new Date,expirationTime:(a=b==null?void 0:b.signInWithEthereum)===null||a===void 0?void 0:a.expirationTime,notBefore:(l=b==null?void 0:b.signInWithEthereum)===null||l===void 0?void 0:l.notBefore,requestId:(c=b==null?void 0:b.signInWithEthereum)===null||c===void 0?void 0:c.requestId,resources:(h=b==null?void 0:b.signInWithEthereum)===null||h===void 0?void 0:h.resources};g=D7(A),v=await _.request({method:"personal_sign",params:[O7(g),L]})}try{const{data:x,error:k}=await pt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:g,signature:v},!((f=e.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(p=e.options)===null||p===void 0?void 0:p.captchaToken}}:null),xform:Vs});if(k)throw k;if(!x||!x.session||!x.user){const C=new Ku;return this._returnResult({data:{user:null,session:null},error:C})}return x.session&&(await this._saveSession(x.session),await this._notifyAllSubscribers("SIGNED_IN",x.session)),this._returnResult({data:Object.assign({},x),error:k})}catch(x){if(ot(x))return this._returnResult({data:{user:null,session:null},error:x});throw x}}async signInWithSolana(e){var n,r,i,s,o,a,l,c,h,f,p,g;let v,x;if("message"in e)v=e.message,x=e.signature;else{const{chain:k,wallet:C,statement:b,options:_}=e;let T;if(zr())if(typeof C=="object")T=C;else{const L=window;if("solana"in L&&typeof L.solana=="object"&&("signIn"in L.solana&&typeof L.solana.signIn=="function"||"signMessage"in L.solana&&typeof L.solana.signMessage=="function"))T=L.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof C!="object"||!(_!=null&&_.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");T=C}const R=new URL((n=_==null?void 0:_.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in T&&T.signIn){const L=await T.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},_==null?void 0:_.signInWithSolana),{version:"1",domain:R.host,uri:R.href}),b?{statement:b}:null));let M;if(Array.isArray(L)&&L[0]&&typeof L[0]=="object")M=L[0];else if(L&&typeof L=="object"&&"signedMessage"in L&&"signature"in L)M=L;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in M&&"signature"in M&&(typeof M.signedMessage=="string"||M.signedMessage instanceof Uint8Array)&&M.signature instanceof Uint8Array)v=typeof M.signedMessage=="string"?M.signedMessage:new TextDecoder().decode(M.signedMessage),x=M.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in T)||typeof T.signMessage!="function"||!("publicKey"in T)||typeof T!="object"||!T.publicKey||!("toBase58"in T.publicKey)||typeof T.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");v=[`${R.host} wants you to sign in with your Solana account:`,T.publicKey.toBase58(),...b?["",b,""]:[""],"Version: 1",`URI: ${R.href}`,`Issued At: ${(i=(r=_==null?void 0:_.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((s=_==null?void 0:_.signInWithSolana)===null||s===void 0)&&s.notBefore?[`Not Before: ${_.signInWithSolana.notBefore}`]:[],...!((o=_==null?void 0:_.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${_.signInWithSolana.expirationTime}`]:[],...!((a=_==null?void 0:_.signInWithSolana)===null||a===void 0)&&a.chainId?[`Chain ID: ${_.signInWithSolana.chainId}`]:[],...!((l=_==null?void 0:_.signInWithSolana)===null||l===void 0)&&l.nonce?[`Nonce: ${_.signInWithSolana.nonce}`]:[],...!((c=_==null?void 0:_.signInWithSolana)===null||c===void 0)&&c.requestId?[`Request ID: ${_.signInWithSolana.requestId}`]:[],...!((f=(h=_==null?void 0:_.signInWithSolana)===null||h===void 0?void 0:h.resources)===null||f===void 0)&&f.length?["Resources",..._.signInWithSolana.resources.map(M=>`- ${M}`)]:[]].join(`
`);const L=await T.signMessage(new TextEncoder().encode(v),"utf8");if(!L||!(L instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");x=L}}try{const{data:k,error:C}=await pt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:v,signature:cu(x)},!((p=e.options)===null||p===void 0)&&p.captchaToken?{gotrue_meta_security:{captcha_token:(g=e.options)===null||g===void 0?void 0:g.captchaToken}}:null),xform:Vs});if(C)throw C;if(!k||!k.session||!k.user){const b=new Ku;return this._returnResult({data:{user:null,session:null},error:b})}return k.session&&(await this._saveSession(k.session),await this._notifyAllSubscribers("SIGNED_IN",k.session)),this._returnResult({data:Object.assign({},k),error:C})}catch(k){if(ot(k))return this._returnResult({data:{user:null,session:null},error:k});throw k}}async _exchangeCodeForSession(e){const n=await Xl(this.storage,`${this.storageKey}-code-verifier`),[r,i]=(n??"").split("/");try{const{data:s,error:o}=await pt(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:Vs});if(await Ua(this.storage,`${this.storageKey}-code-verifier`),o)throw o;if(!s||!s.session||!s.user){const a=new Ku;return this._returnResult({data:{user:null,session:null,redirectType:null},error:a})}return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),this._returnResult({data:Object.assign(Object.assign({},s),{redirectType:i??null}),error:o})}catch(s){if(ot(s))return this._returnResult({data:{user:null,session:null,redirectType:null},error:s});throw s}}async signInWithIdToken(e){try{const{options:n,provider:r,token:i,access_token:s,nonce:o}=e,a=await pt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:i,access_token:s,nonce:o,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:Vs}),{data:l,error:c}=a;if(c)return this._returnResult({data:{user:null,session:null},error:c});if(!l||!l.session||!l.user){const h=new Ku;return this._returnResult({data:{user:null,session:null},error:h})}return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),this._returnResult({data:l,error:c})}catch(n){if(ot(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOtp(e){var n,r,i,s,o;try{if("email"in e){const{email:a,options:l}=e;let c=null,h=null;this.flowType==="pkce"&&([c,h]=await Xu(this.storage,this.storageKey));const{error:f}=await pt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(n=l==null?void 0:l.data)!==null&&n!==void 0?n:{},create_user:(r=l==null?void 0:l.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:c,code_challenge_method:h},redirectTo:l==null?void 0:l.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:f})}if("phone"in e){const{phone:a,options:l}=e,{data:c,error:h}=await pt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(i=l==null?void 0:l.data)!==null&&i!==void 0?i:{},create_user:(s=l==null?void 0:l.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(o=l==null?void 0:l.channel)!==null&&o!==void 0?o:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:h})}throw new hg("You must provide either an email or phone number.")}catch(a){if(ot(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async verifyOtp(e){var n,r;try{let i,s;"options"in e&&(i=(n=e.options)===null||n===void 0?void 0:n.redirectTo,s=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:o,error:a}=await pt(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:s}}),redirectTo:i,xform:Vs});if(a)throw a;if(!o)throw new Error("An error occurred on token verification.");const l=o.session,c=o.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),this._returnResult({data:{user:c,session:l},error:null})}catch(i){if(ot(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithSSO(e){var n,r,i,s,o;try{let a=null,l=null;this.flowType==="pkce"&&([a,l]=await Xu(this.storage,this.storageKey));const c=await pt(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((i=e==null?void 0:e.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:a,code_challenge_method:l}),headers:this.headers,xform:T7});return!((s=c.data)===null||s===void 0)&&s.url&&zr()&&!(!((o=e.options)===null||o===void 0)&&o.skipBrowserRedirect)&&window.location.assign(c.data.url),this._returnResult(c)}catch(a){if(ot(a))return this._returnResult({data:null,error:a});throw a}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;if(r)throw r;if(!n)throw new Vi;const{error:i}=await pt(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return this._returnResult({data:{user:null,session:null},error:i})})}catch(e){if(ot(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:r,type:i,options:s}=e,{error:o}=await pt(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:i,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},redirectTo:s==null?void 0:s.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:o})}else if("phone"in e){const{phone:r,type:i,options:s}=e,{data:o,error:a}=await pt(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:i,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:a})}throw new hg("You must provide either an email or phone number and a type")}catch(n){if(ot(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await Xl(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<$y:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.userStorage){const o=await Xl(this.userStorage,this.storageKey+"-user");o!=null&&o.user?e.user=o.user:e.user=Vy()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const o={value:this.suppressGetSessionWarning};e.user=C7(e.user,o),o.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:i,error:s}=await this._callRefreshToken(e.refresh_token);return s?this._returnResult({data:{session:null},error:s}):this._returnResult({data:{session:i},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await pt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Qa}):await this._useSession(async n=>{var r,i,s;const{data:o,error:a}=n;if(a)throw a;return!(!((r=o.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Vi}:await pt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(s=(i=o.session)===null||i===void 0?void 0:i.access_token)!==null&&s!==void 0?s:void 0,xform:Qa})})}catch(n){if(ot(n))return n7(n)&&(await this._removeSession(),await Ua(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:n});throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async r=>{const{data:i,error:s}=r;if(s)throw s;if(!i.session)throw new Vi;const o=i.session;let a=null,l=null;this.flowType==="pkce"&&e.email!=null&&([a,l]=await Xu(this.storage,this.storageKey));const{data:c,error:h}=await pt(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:a,code_challenge_method:l}),jwt:o.access_token,xform:Qa});if(h)throw h;return o.user=c.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),this._returnResult({data:{user:o.user},error:null})})}catch(r){if(ot(r))return this._returnResult({data:{user:null},error:r});throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Vi;const n=Date.now()/1e3;let r=n,i=!0,s=null;const{payload:o}=Uy(e.access_token);if(o.exp&&(r=o.exp,i=r<=n),i){const{data:a,error:l}=await this._callRefreshToken(e.refresh_token);if(l)return this._returnResult({data:{user:null,session:null},error:l});if(!a)return{data:{user:null,session:null},error:null};s=a}else{const{data:a,error:l}=await this._getUser(e.access_token);if(l)throw l;s={access_token:e.access_token,refresh_token:e.refresh_token,user:a.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)}return this._returnResult({data:{user:s.user,session:s},error:null})}catch(n){if(ot(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var r;if(!e){const{data:o,error:a}=n;if(a)throw a;e=(r=o.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new Vi;const{data:i,error:s}=await this._callRefreshToken(e.refresh_token);return s?this._returnResult({data:{user:null,session:null},error:s}):i?this._returnResult({data:{user:i.user,session:i},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(n){if(ot(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async _getSessionFromURL(e,n){try{if(!zr())throw new fg("No browser detected.");if(e.error||e.error_description||e.error_code)throw new fg(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new Wk("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new fg("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Wk("No code detected.");const{data:b,error:_}=await this._exchangeCodeForSession(e.code);if(_)throw _;const T=new URL(window.location.href);return T.searchParams.delete("code"),window.history.replaceState(window.history.state,"",T.toString()),{data:{session:b.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:i,access_token:s,refresh_token:o,expires_in:a,expires_at:l,token_type:c}=e;if(!s||!a||!o||!c)throw new fg("No session defined in URL");const h=Math.round(Date.now()/1e3),f=parseInt(a);let p=h+f;l&&(p=parseInt(l));const g=p-h;g*1e3<=nc&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${g}s, should have been closer to ${f}s`);const v=p-f;h-v>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",v,p,h):h-v<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",v,p,h);const{data:x,error:k}=await this._getUser(s);if(k)throw k;const C={provider_token:r,provider_refresh_token:i,access_token:s,expires_in:f,expires_at:p,refresh_token:o,token_type:c,user:x.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:C,redirectType:e.type},error:null})}catch(r){if(ot(r))return this._returnResult({data:{session:null,redirectType:null},error:r});throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await Xl(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:i,error:s}=n;if(s)return this._returnResult({error:s});const o=(r=i.session)===null||r===void 0?void 0:r.access_token;if(o){const{error:a}=await this.admin.signOut(o,e);if(a&&!(t7(a)&&(a.status===404||a.status===401||a.status===403)))return this._returnResult({error:a})}return e!=="others"&&(await this._removeSession(),await Ua(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const n=c7(),r={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async n=>{var r,i;try{const{data:{session:s},error:o}=n;if(o)throw o;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",s)),this._debug("INITIAL_SESSION","callback id",e,"session",s)}catch(s){await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",s),console.error(s)}})}async resetPasswordForEmail(e,n={}){let r=null,i=null;this.flowType==="pkce"&&([r,i]=await Xu(this.storage,this.storageKey,!0));try{return await pt(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:i,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(s){if(ot(s))return this._returnResult({data:null,error:s});throw s}}async getUserIdentities(){var e;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return this._returnResult({data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(n){if(ot(n))return this._returnResult({data:null,error:n});throw n}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var n;try{const{data:r,error:i}=await this._useSession(async s=>{var o,a,l,c,h;const{data:f,error:p}=s;if(p)throw p;const g=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(a=e.options)===null||a===void 0?void 0:a.scopes,queryParams:(l=e.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await pt(this.fetch,"GET",g,{headers:this.headers,jwt:(h=(c=f.session)===null||c===void 0?void 0:c.access_token)!==null&&h!==void 0?h:void 0})});if(i)throw i;return zr()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),this._returnResult({data:{provider:e.provider,url:r==null?void 0:r.url},error:null})}catch(r){if(ot(r))return this._returnResult({data:{provider:e.provider,url:null},error:r});throw r}}async linkIdentityIdToken(e){return await this._useSession(async n=>{var r;try{const{error:i,data:{session:s}}=n;if(i)throw i;const{options:o,provider:a,token:l,access_token:c,nonce:h}=e,f=await pt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(r=s==null?void 0:s.access_token)!==null&&r!==void 0?r:void 0,body:{provider:a,id_token:l,access_token:c,nonce:h,link_identity:!0,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:Vs}),{data:p,error:g}=f;return g?this._returnResult({data:{user:null,session:null},error:g}):!p||!p.session||!p.user?this._returnResult({data:{user:null,session:null},error:new Ku}):(p.session&&(await this._saveSession(p.session),await this._notifyAllSubscribers("USER_UPDATED",p.session)),this._returnResult({data:p,error:g}))}catch(i){if(ot(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}})}async unlinkIdentity(e){try{return await this._useSession(async n=>{var r,i;const{data:s,error:o}=n;if(o)throw o;return await pt(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(i=(r=s.session)===null||r===void 0?void 0:r.access_token)!==null&&i!==void 0?i:void 0})})}catch(n){if(ot(n))return this._returnResult({data:null,error:n});throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await p7(async i=>(i>0&&await f7(200*Math.pow(2,i-1)),this._debug(n,"refreshing attempt",i),await pt(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Vs})),(i,s)=>{const o=200*Math.pow(2,i);return s&&zy(s)&&Date.now()+o-r<nc})}catch(r){if(this._debug(n,"error",r),ot(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",r),zr()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const i=await Xl(this.storage,this.storageKey);if(i&&this.userStorage){let o=await Xl(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:i.user},await rc(this.userStorage,this.storageKey+"-user",o)),i.user=(e=o==null?void 0:o.user)!==null&&e!==void 0?e:Vy()}else if(i&&!i.user&&!i.user){const o=await Xl(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(i.user=o.user,await Ua(this.storage,this.storageKey+"-user"),await rc(this.storage,this.storageKey,i)):i.user=Vy()}if(this._debug(r,"session from storage",i),!this._isValidSession(i)){this._debug(r,"session is not valid"),i!==null&&await this._removeSession();return}const s=((n=i.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<$y;if(this._debug(r,`session has${s?"":" not"} expired with margin of ${$y}s`),s){if(this.autoRefreshToken&&i.refresh_token){const{error:o}=await this._callRefreshToken(i.refresh_token);o&&(console.error(o),zy(o)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(i.user&&i.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:a}=await this._getUser(i.access_token);!a&&(o!=null&&o.user)?(i.user=o.user,await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(r,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(r,"error",i),console.error(i);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var n,r;if(!e)throw new Vi;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new $0;const{data:s,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!s.session)throw new Vi;await this._saveSession(s.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",s.session);const a={data:s.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(s){if(this._debug(i,"error",s),ot(s)){const o={data:null,error:s};return zy(s)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(o),o}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(s),s}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(e,n,r=!0){const i=`#_notifyAllSubscribers(${e})`;this._debug(i,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:n});const s=[],o=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(e,n)}catch(l){s.push(l)}});if(await Promise.all(o),s.length>0){for(let a=0;a<s.length;a+=1)console.error(s[a]);throw s[0]}}finally{this._debug(i,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const n=Object.assign({},e),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await rc(this.userStorage,this.storageKey+"-user",{user:n.user});const i=Object.assign({},n);delete i.user;const s=Kk(i);await rc(this.storage,this.storageKey,s)}else{const i=Kk(n);await rc(this.storage,this.storageKey,i)}}async _removeSession(){this._debug("#_removeSession()"),await Ua(this.storage,this.storageKey),await Ua(this.storage,this.storageKey+"-code-verifier"),await Ua(this.storage,this.storageKey+"-user"),this.userStorage&&await Ua(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&zr()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),nc);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((r.expires_at*1e3-e)/nc);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${nc}ms, refresh threshold is ${Qw} ticks`),i<=Qw&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof Y5)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!zr()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,r){const i=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&i.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&i.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[s,o]=await Xu(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(s)}`,code_challenge_method:`${encodeURIComponent(o)}`});i.push(a.toString())}if(r!=null&&r.queryParams){const s=new URLSearchParams(r.queryParams);i.push(s.toString())}return r!=null&&r.skipBrowserRedirect&&i.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${i.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var r;const{data:i,error:s}=n;return s?this._returnResult({data:null,error:s}):await pt(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(ot(n))return this._returnResult({data:null,error:n});throw n}}async _enroll(e){try{return await this._useSession(async n=>{var r,i;const{data:s,error:o}=n;if(o)return this._returnResult({data:null,error:o});const a=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:l,error:c}=await pt(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return c?this._returnResult({data:null,error:c}):(e.factorType==="totp"&&l.type==="totp"&&(!((i=l==null?void 0:l.totp)===null||i===void 0)&&i.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),this._returnResult({data:l,error:null}))})}catch(n){if(ot(n))return this._returnResult({data:null,error:n});throw n}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:s}=n;if(s)return this._returnResult({data:null,error:s});const o=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?W7(e.webauthn.credential_response):H7(e.webauthn.credential_response)})}:{code:e.code}),{data:a,error:l}=await pt(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:o,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return l?this._returnResult({data:null,error:l}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),this._returnResult({data:a,error:l}))})}catch(n){if(ot(n))return this._returnResult({data:null,error:n});throw n}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:s}=n;if(s)return this._returnResult({data:null,error:s});const o=await pt(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});if(o.error)return o;const{data:a}=o;if(a.type!=="webauthn")return{data:a,error:null};switch(a.webauthn.type){case"create":return{data:Object.assign(Object.assign({},a),{webauthn:Object.assign(Object.assign({},a.webauthn),{credential_options:Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:U7(a.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},a),{webauthn:Object.assign(Object.assign({},a.webauthn),{credential_options:Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:V7(a.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if(ot(n))return this._returnResult({data:null,error:n});throw n}})}async _challengeAndVerify(e){const{data:n,error:r}=await this._challenge({factorId:e.factorId});return r?this._returnResult({data:null,error:r}):await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){var e;const{data:{user:n},error:r}=await this.getUser();if(r)return{data:null,error:r};const i={all:[],phone:[],totp:[],webauthn:[]};for(const s of(e=n==null?void 0:n.factors)!==null&&e!==void 0?e:[])i.all.push(s),s.status==="verified"&&i[s.factor_type].push(s);return{data:i,error:null}}async _getAuthenticatorAssuranceLevel(){var e,n;const{data:{session:r},error:i}=await this.getSession();if(i)return this._returnResult({data:null,error:i});if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:s}=Uy(r.access_token);let o=null;s.aal&&(o=s.aal);let a=o;((n=(e=r.user.factors)===null||e===void 0?void 0:e.filter(h=>h.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(a="aal2");const c=s.amr||[];return{data:{currentLevel:o,nextLevel:a,currentAuthenticationMethods:c},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async n=>{const{data:{session:r},error:i}=n;return i?this._returnResult({data:null,error:i}):r?await pt(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:r.access_token,xform:s=>({data:s,error:null})}):this._returnResult({data:null,error:new Vi})})}catch(n){if(ot(n))return this._returnResult({data:null,error:n});throw n}}async _approveAuthorization(e,n){try{return await this._useSession(async r=>{const{data:{session:i},error:s}=r;if(s)return this._returnResult({data:null,error:s});if(!i)return this._returnResult({data:null,error:new Vi});const o=await pt(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"approve"},xform:a=>({data:a,error:null})});return o.data&&o.data.redirect_url&&zr()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(o.data.redirect_url),o})}catch(r){if(ot(r))return this._returnResult({data:null,error:r});throw r}}async _denyAuthorization(e,n){try{return await this._useSession(async r=>{const{data:{session:i},error:s}=r;if(s)return this._returnResult({data:null,error:s});if(!i)return this._returnResult({data:null,error:new Vi});const o=await pt(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"deny"},xform:a=>({data:a,error:null})});return o.data&&o.data.redirect_url&&zr()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(o.data.redirect_url),o})}catch(r){if(ot(r))return this._returnResult({data:null,error:r});throw r}}async _listOAuthGrants(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;return r?this._returnResult({data:null,error:r}):n?await pt(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,xform:i=>({data:i,error:null})}):this._returnResult({data:null,error:new Vi})})}catch(e){if(ot(e))return this._returnResult({data:null,error:e});throw e}}async _revokeOAuthGrant(e){try{return await this._useSession(async n=>{const{data:{session:r},error:i}=n;return i?this._returnResult({data:null,error:i}):r?await pt(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,query:{client_id:e.clientId},xform:()=>({data:{},error:null})}):this._returnResult({data:null,error:new Vi})})}catch(n){if(ot(n))return this._returnResult({data:null,error:n});throw n}}async fetchJwk(e,n={keys:[]}){let r=n.keys.find(a=>a.kid===e);if(r)return r;const i=Date.now();if(r=this.jwks.keys.find(a=>a.kid===e),r&&this.jwks_cached_at+J9>i)return r;const{data:s,error:o}=await pt(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!s.keys||s.keys.length===0||(this.jwks=s,this.jwks_cached_at=i,r=s.keys.find(a=>a.kid===e),!r)?null:r}async getClaims(e,n={}){try{let r=e;if(!r){const{data:g,error:v}=await this.getSession();if(v||!g.session)return this._returnResult({data:null,error:v});r=g.session.access_token}const{header:i,payload:s,signature:o,raw:{header:a,payload:l}}=Uy(r);n!=null&&n.allowExpired||_7(s.exp);const c=!i.alg||i.alg.startsWith("HS")||!i.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(i.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!c){const{error:g}=await this.getUser(r);if(g)throw g;return{data:{claims:s,header:i,signature:o},error:null}}const h=b7(i.alg),f=await crypto.subtle.importKey("jwk",c,h,!0,["verify"]);if(!await crypto.subtle.verify(h,f,o,l7(`${a}.${l}`)))throw new tx("Invalid JWT signature");return{data:{claims:s,header:i,signature:o},error:null}}catch(r){if(ot(r))return this._returnResult({data:null,error:r});throw r}}}Tf.nextInstanceID={};const eF=Tf;class tF extends eF{constructor(e){super(e)}}class nF{constructor(e,n,r){var i,s,o;this.supabaseUrl=e,this.supabaseKey=n;const a=Y9(e);if(!n)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",a),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",a),this.storageUrl=new URL("storage/v1",a),this.functionsUrl=new URL("functions/v1",a);const l=`sb-${a.hostname.split(".")[0]}-auth-token`,c={db:$9,realtime:U9,auth:Object.assign(Object.assign({},z9),{storageKey:l}),global:B9},h=q9(r??{},c);this.storageKey=(i=h.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(s=h.global.headers)!==null&&s!==void 0?s:{},h.accessToken?(this.accessToken=h.accessToken,this.auth=new Proxy({},{get:(f,p)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(p)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=h.auth)!==null&&o!==void 0?o:{},this.headers,h.global.fetch),this.fetch=H9(n,this._getAccessToken.bind(this),h.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},h.realtime)),this.accessToken&&this.accessToken().then(f=>this.realtime.setAuth(f)).catch(f=>console.warn("Failed to set initial Realtime auth token:",f)),this.rest=new YD(new URL("rest/v1",a).href,{headers:this.headers,schema:h.db.schema,fetch:this.fetch}),this.storage=new O9(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),h.accessToken||this._listenForAuthEvents()}get functions(){return new HD(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,n={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,n,r)}channel(e,n={config:{}}){return this.realtime.channel(e,n)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e,n;if(this.accessToken)return await this.accessToken();const{data:r}=await this.auth.getSession();return(n=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&n!==void 0?n:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:i,userStorage:s,storageKey:o,flowType:a,lock:l,debug:c,throwOnError:h},f,p){const g={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new tF({url:this.authUrl.href,headers:Object.assign(Object.assign({},g),f),storageKey:o,autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:i,userStorage:s,flowType:a,lock:l,debug:c,throwOnError:h,fetch:p,hasCustomAuthorizationHeader:Object.keys(this.headers).some(v=>v.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new d9(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(e,n,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const rF=(t,e,n)=>new nF(t,e,n);function iF(){if(typeof window<"u"||typeof process>"u")return!1;const t=process.version;if(t==null)return!1;const e=t.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}iF()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const sF="https://ozrrupaayacbhwrknhro.supabase.co",oF="sb_publishable_78oAhP2ng_TRJB8xMwe9-Q_iSA-b5FJ",Ct=rF(sF,oF),Z5=y.createContext(void 0);function aF({children:t}){const[e,n]=y.useState(null),[r,i]=y.useState(null),[s,o]=y.useState(!0);y.useEffect(()=>{(async()=>{var v;const{data:g}=await Ct.auth.getSession();i(g.session),n(((v=g.session)==null?void 0:v.user)??null),o(!1)})();const{data:p}=Ct.auth.onAuthStateChange((g,v)=>{i(v),n((v==null?void 0:v.user)??null),o(!1)});return()=>{p.subscription.unsubscribe()}},[]);const a=y.useCallback(async(f,p)=>{const{error:g}=await Ct.auth.signInWithPassword({email:f,password:p});if(g)throw g},[]),l=y.useCallback(async(f,p)=>{const{error:g}=await Ct.auth.signUp({email:f,password:p});if(g)throw g},[]),c=y.useCallback(async()=>{const{error:f}=await Ct.auth.signOut();if(f)throw f},[]),h=y.useMemo(()=>({user:e,session:r,loading:s,signIn:a,signUp:l,signOut:c}),[s,r,a,l,c,e]);return w.jsx(Z5.Provider,{value:h,children:t})}function Oi(){const t=y.useContext(Z5);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t}function lF({items:t,selectedId:e,onSelect:n,className:r,itemClassName:i,showGradients:s=!0}){const o=y.useRef(null),[a,l]=y.useState(0),[c,h]=y.useState(1);return y.useEffect(()=>{const f=o.current;if(!f)return;const p=()=>{const{scrollTop:g,scrollHeight:v,clientHeight:x}=f;l(Math.min(g/40,1));const k=v-(g+x);h(v<=x?0:Math.min(k/40,1))};return p(),f.addEventListener("scroll",p),()=>f.removeEventListener("scroll",p)},[t.length]),w.jsxs("div",{className:`scrollable-list ${r??""}`,children:[w.jsx("div",{ref:o,className:"scrollable-list__items",children:t.map(f=>{const p=f.id===e;return w.jsxs("button",{type:"button",className:`scrollable-list__item ${p?"scrollable-list__item--selected":""} ${i??""}`,onClick:()=>n==null?void 0:n(f.id),"aria-pressed":p,children:[w.jsx("div",{className:"scrollable-list__item-label",children:f.label}),f.description?w.jsx("p",{className:"scrollable-list__item-description",children:f.description}):null]},f.id)})}),s&&w.jsxs(w.Fragment,{children:[w.jsx("div",{className:"scrollable-list__gradient scrollable-list__gradient--top",style:{opacity:a}}),w.jsx("div",{className:"scrollable-list__gradient scrollable-list__gradient--bottom",style:{opacity:c}})]})]})}class uF{constructor(e,n,r,i,s,o,a){_t(this,"width");_t(this,"height");_t(this,"ctx");_t(this,"x");_t(this,"y");_t(this,"color");_t(this,"speed");_t(this,"size");_t(this,"sizeStep");_t(this,"minSize");_t(this,"maxSizeInteger");_t(this,"maxSize");_t(this,"delay");_t(this,"counter");_t(this,"counterStep");_t(this,"isIdle");_t(this,"isReverse");_t(this,"isShimmer");this.width=e.width,this.height=e.height,this.ctx=n,this.x=r,this.y=i,this.color=s,this.speed=this.getRandomValue(.1,.9)*o,this.size=0,this.sizeStep=Math.random()*.4,this.minSize=.5,this.maxSizeInteger=2,this.maxSize=this.getRandomValue(this.minSize,this.maxSizeInteger),this.delay=a,this.counter=0,this.counterStep=Math.random()*4+(this.width+this.height)*.01,this.isIdle=!1,this.isReverse=!1,this.isShimmer=!1}getRandomValue(e,n){return Math.random()*(n-e)+e}draw(){const e=this.maxSizeInteger*.5-this.size*.5;this.ctx.fillStyle=this.color,this.ctx.fillRect(this.x+e,this.y+e,this.size,this.size)}appear(){if(this.isIdle=!1,this.counter<=this.delay){this.counter+=this.counterStep;return}this.size>=this.maxSize&&(this.isShimmer=!0),this.isShimmer?this.shimmer():this.size+=this.sizeStep,this.draw()}disappear(){if(this.isShimmer=!1,this.counter=0,this.size<=0){this.isIdle=!0;return}else this.size-=.1;this.draw()}shimmer(){this.size>=this.maxSize?this.isReverse=!0:this.size<=this.minSize&&(this.isReverse=!1),this.isReverse?this.size-=this.speed:this.size+=this.speed}}function cF(t,e){return t<=0||e?0:t>=100?100*.001:t*.001}const nE={default:{activeColor:null,gap:5,speed:35,colors:"#f8fafc,#f1f5f9,#cbd5e1",noFocus:!1},blue:{activeColor:"#e0f2fe",gap:10,speed:25,colors:"#e0f2fe,#7dd3fc,#0ea5e9",noFocus:!1},yellow:{activeColor:"#fef08a",gap:3,speed:20,colors:"#fef08a,#fde047,#eab308",noFocus:!1},pink:{activeColor:"#fecdd3",gap:6,speed:80,colors:"#fecdd3,#fda4af,#e11d48",noFocus:!0},gold:{activeColor:"#fef3c7",gap:5,speed:30,colors:"#fef3c7,#fbbf24,#d97706",noFocus:!1}};function dF({variant:t="default",gap:e,speed:n,colors:r,noFocus:i,className:s="",children:o,aspectRatio:a}){const l=y.useRef(null),c=y.useRef(null),h=y.useRef([]),f=y.useRef(null),p=y.useRef(performance.now()),g=y.useRef(window.matchMedia("(prefers-reduced-motion: reduce)").matches).current,v=nE[t]||nE.default,x=e??v.gap,k=n??v.speed,C=r??v.colors,b=i??v.noFocus,_=()=>{if(!l.current||!c.current)return;const j=l.current.getBoundingClientRect(),V=Math.floor(j.width),U=Math.floor(j.height),B=c.current.getContext("2d");c.current.width=V,c.current.height=U,c.current.style.width=`${V}px`,c.current.style.height=`${U}px`;const Z=C.split(","),q=[];for(let G=0;G<V;G+=parseInt(x.toString(),10))for(let te=0;te<U;te+=parseInt(x.toString(),10)){const O=Z[Math.floor(Math.random()*Z.length)],K=G-V/2,Y=te-U/2,xe=Math.sqrt(K*K+Y*Y),re=g?0:xe;if(!B)return;q.push(new uF(c.current,B,G,te,O,cF(k,g),re))}h.current=q},T=j=>{var G;f.current=requestAnimationFrame(()=>T(j));const V=performance.now(),U=V-p.current,B=1e3/60;if(U<B)return;p.current=V-U%B;const Z=(G=c.current)==null?void 0:G.getContext("2d");if(!Z||!c.current)return;Z.clearRect(0,0,c.current.width,c.current.height);let q=!0;for(let te=0;te<h.current.length;te++){const O=h.current[te];O[j](),O.isIdle||(q=!1)}q&&f.current!==null&&cancelAnimationFrame(f.current)},R=j=>{f.current!==null&&cancelAnimationFrame(f.current),f.current=requestAnimationFrame(()=>T(j))},L=()=>R("appear"),M=()=>R("disappear"),A=j=>{j.currentTarget.contains(j.relatedTarget)||R("appear")},$=j=>{j.currentTarget.contains(j.relatedTarget)||R("disappear")};return y.useEffect(()=>{_();const j=new ResizeObserver(()=>{_()});return l.current&&j.observe(l.current),()=>{j.disconnect(),f.current!==null&&cancelAnimationFrame(f.current)}},[x,k,C,b]),w.jsxs("div",{ref:l,className:`pixel-card ${s}`,style:a?{aspectRatio:`${a}`}:void 0,onMouseEnter:L,onMouseLeave:M,onFocus:b?void 0:A,onBlur:b?void 0:$,tabIndex:b?-1:0,children:[w.jsx("canvas",{className:"pixel-canvas",ref:c}),o]})}function Q5(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=Q5(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function hF(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=Q5(t))&&(r&&(r+=" "),r+=e);return r}const fF=(t,e)=>{const n=new Array(t.length+e.length);for(let r=0;r<t.length;r++)n[r]=t[r];for(let r=0;r<e.length;r++)n[t.length+r]=e[r];return n},pF=(t,e)=>({classGroupId:t,validator:e}),J5=(t=new Map,e=null,n)=>({nextPart:t,validators:e,classGroupId:n}),qm="-",rE=[],gF="arbitrary..",mF=t=>{const e=yF(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:o=>{if(o.startsWith("[")&&o.endsWith("]"))return vF(o);const a=o.split(qm),l=a[0]===""&&a.length>1?1:0;return eL(a,l,e)},getConflictingClassGroupIds:(o,a)=>{if(a){const l=r[o],c=n[o];return l?c?fF(c,l):l:c||rE}return n[o]||rE}}},eL=(t,e,n)=>{if(t.length-e===0)return n.classGroupId;const i=t[e],s=n.nextPart.get(i);if(s){const c=eL(t,e+1,s);if(c)return c}const o=n.validators;if(o===null)return;const a=e===0?t.join(qm):t.slice(e).join(qm),l=o.length;for(let c=0;c<l;c++){const h=o[c];if(h.validator(a))return h.classGroupId}},vF=t=>t.slice(1,-1).indexOf(":")===-1?void 0:(()=>{const e=t.slice(1,-1),n=e.indexOf(":"),r=e.slice(0,n);return r?gF+r:void 0})(),yF=t=>{const{theme:e,classGroups:n}=t;return wF(n,e)},wF=(t,e)=>{const n=J5();for(const r in t){const i=t[r];Sb(i,n,r,e)}return n},Sb=(t,e,n,r)=>{const i=t.length;for(let s=0;s<i;s++){const o=t[s];xF(o,e,n,r)}},xF=(t,e,n,r)=>{if(typeof t=="string"){_F(t,e,n);return}if(typeof t=="function"){bF(t,e,n,r);return}SF(t,e,n,r)},_F=(t,e,n)=>{const r=t===""?e:tL(e,t);r.classGroupId=n},bF=(t,e,n,r)=>{if(CF(t)){Sb(t(r),e,n,r);return}e.validators===null&&(e.validators=[]),e.validators.push(pF(n,t))},SF=(t,e,n,r)=>{const i=Object.entries(t),s=i.length;for(let o=0;o<s;o++){const[a,l]=i[o];Sb(l,tL(e,a),n,r)}},tL=(t,e)=>{let n=t;const r=e.split(qm),i=r.length;for(let s=0;s<i;s++){const o=r[s];let a=n.nextPart.get(o);a||(a=J5(),n.nextPart.set(o,a)),n=a}return n},CF=t=>"isThemeGetter"in t&&t.isThemeGetter===!0,kF=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=Object.create(null),r=Object.create(null);const i=(s,o)=>{n[s]=o,e++,e>t&&(e=0,r=n,n=Object.create(null))};return{get(s){let o=n[s];if(o!==void 0)return o;if((o=r[s])!==void 0)return i(s,o),o},set(s,o){s in n?n[s]=o:i(s,o)}}},nx="!",iE=":",EF=[],sE=(t,e,n,r,i)=>({modifiers:t,hasImportantModifier:e,baseClassName:n,maybePostfixModifierPosition:r,isExternal:i}),RF=t=>{const{prefix:e,experimentalParseClassName:n}=t;let r=i=>{const s=[];let o=0,a=0,l=0,c;const h=i.length;for(let x=0;x<h;x++){const k=i[x];if(o===0&&a===0){if(k===iE){s.push(i.slice(l,x)),l=x+1;continue}if(k==="/"){c=x;continue}}k==="["?o++:k==="]"?o--:k==="("?a++:k===")"&&a--}const f=s.length===0?i:i.slice(l);let p=f,g=!1;f.endsWith(nx)?(p=f.slice(0,-1),g=!0):f.startsWith(nx)&&(p=f.slice(1),g=!0);const v=c&&c>l?c-l:void 0;return sE(s,g,p,v)};if(e){const i=e+iE,s=r;r=o=>o.startsWith(i)?s(o.slice(i.length)):sE(EF,!1,o,void 0,!0)}if(n){const i=r;r=s=>n({className:s,parseClassName:i})}return r},TF=t=>{const e=new Map;return t.orderSensitiveModifiers.forEach((n,r)=>{e.set(n,1e6+r)}),n=>{const r=[];let i=[];for(let s=0;s<n.length;s++){const o=n[s],a=o[0]==="[",l=e.has(o);a||l?(i.length>0&&(i.sort(),r.push(...i),i=[]),r.push(o)):i.push(o)}return i.length>0&&(i.sort(),r.push(...i)),r}},PF=t=>({cache:kF(t.cacheSize),parseClassName:RF(t),sortModifiers:TF(t),...mF(t)}),LF=/\s+/,MF=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:i,sortModifiers:s}=e,o=[],a=t.trim().split(LF);let l="";for(let c=a.length-1;c>=0;c-=1){const h=a[c],{isExternal:f,modifiers:p,hasImportantModifier:g,baseClassName:v,maybePostfixModifierPosition:x}=n(h);if(f){l=h+(l.length>0?" "+l:l);continue}let k=!!x,C=r(k?v.substring(0,x):v);if(!C){if(!k){l=h+(l.length>0?" "+l:l);continue}if(C=r(v),!C){l=h+(l.length>0?" "+l:l);continue}k=!1}const b=p.length===0?"":p.length===1?p[0]:s(p).join(":"),_=g?b+nx:b,T=_+C;if(o.indexOf(T)>-1)continue;o.push(T);const R=i(C,k);for(let L=0;L<R.length;++L){const M=R[L];o.push(_+M)}l=h+(l.length>0?" "+l:l)}return l},AF=(...t)=>{let e=0,n,r,i="";for(;e<t.length;)(n=t[e++])&&(r=nL(n))&&(i&&(i+=" "),i+=r);return i},nL=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=nL(t[r]))&&(n&&(n+=" "),n+=e);return n},NF=(t,...e)=>{let n,r,i,s;const o=l=>{const c=e.reduce((h,f)=>f(h),t());return n=PF(c),r=n.cache.get,i=n.cache.set,s=a,a(l)},a=l=>{const c=r(l);if(c)return c;const h=MF(l,n);return i(l,h),h};return s=o,(...l)=>s(AF(...l))},jF=[],wr=t=>{const e=n=>n[t]||jF;return e.isThemeGetter=!0,e},rL=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,iL=/^\((?:(\w[\w-]*):)?(.+)\)$/i,IF=/^\d+\/\d+$/,OF=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,DF=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,FF=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,BF=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,$F=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,ec=t=>IF.test(t),jt=t=>!!t&&!Number.isNaN(Number(t)),Va=t=>!!t&&Number.isInteger(Number(t)),Hy=t=>t.endsWith("%")&&jt(t.slice(0,-1)),Ko=t=>OF.test(t),zF=()=>!0,UF=t=>DF.test(t)&&!FF.test(t),sL=()=>!1,VF=t=>BF.test(t),WF=t=>$F.test(t),HF=t=>!Je(t)&&!et(t),GF=t=>bd(t,lL,sL),Je=t=>rL.test(t),Zl=t=>bd(t,uL,UF),Gy=t=>bd(t,ZF,jt),oE=t=>bd(t,oL,sL),qF=t=>bd(t,aL,WF),pg=t=>bd(t,cL,VF),et=t=>iL.test(t),lh=t=>Sd(t,uL),YF=t=>Sd(t,QF),aE=t=>Sd(t,oL),KF=t=>Sd(t,lL),XF=t=>Sd(t,aL),gg=t=>Sd(t,cL,!0),bd=(t,e,n)=>{const r=rL.exec(t);return r?r[1]?e(r[1]):n(r[2]):!1},Sd=(t,e,n=!1)=>{const r=iL.exec(t);return r?r[1]?e(r[1]):n:!1},oL=t=>t==="position"||t==="percentage",aL=t=>t==="image"||t==="url",lL=t=>t==="length"||t==="size"||t==="bg-size",uL=t=>t==="length",ZF=t=>t==="number",QF=t=>t==="family-name",cL=t=>t==="shadow",JF=()=>{const t=wr("color"),e=wr("font"),n=wr("text"),r=wr("font-weight"),i=wr("tracking"),s=wr("leading"),o=wr("breakpoint"),a=wr("container"),l=wr("spacing"),c=wr("radius"),h=wr("shadow"),f=wr("inset-shadow"),p=wr("text-shadow"),g=wr("drop-shadow"),v=wr("blur"),x=wr("perspective"),k=wr("aspect"),C=wr("ease"),b=wr("animate"),_=()=>["auto","avoid","all","avoid-page","page","left","right","column"],T=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],R=()=>[...T(),et,Je],L=()=>["auto","hidden","clip","visible","scroll"],M=()=>["auto","contain","none"],A=()=>[et,Je,l],$=()=>[ec,"full","auto",...A()],j=()=>[Va,"none","subgrid",et,Je],V=()=>["auto",{span:["full",Va,et,Je]},Va,et,Je],U=()=>[Va,"auto",et,Je],B=()=>["auto","min","max","fr",et,Je],Z=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],q=()=>["start","end","center","stretch","center-safe","end-safe"],G=()=>["auto",...A()],te=()=>[ec,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...A()],O=()=>[t,et,Je],K=()=>[...T(),aE,oE,{position:[et,Je]}],Y=()=>["no-repeat",{repeat:["","x","y","space","round"]}],xe=()=>["auto","cover","contain",KF,GF,{size:[et,Je]}],re=()=>[Hy,lh,Zl],ue=()=>["","none","full",c,et,Je],ke=()=>["",jt,lh,Zl],qe=()=>["solid","dashed","dotted","double"],he=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],ge=()=>[jt,Hy,aE,oE],we=()=>["","none",v,et,Je],ae=()=>["none",jt,et,Je],me=()=>["none",jt,et,Je],X=()=>[jt,et,Je],ye=()=>[ec,"full",...A()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[Ko],breakpoint:[Ko],color:[zF],container:[Ko],"drop-shadow":[Ko],ease:["in","out","in-out"],font:[HF],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[Ko],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[Ko],shadow:[Ko],spacing:["px",jt],text:[Ko],"text-shadow":[Ko],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",ec,Je,et,k]}],container:["container"],columns:[{columns:[jt,Je,et,a]}],"break-after":[{"break-after":_()}],"break-before":[{"break-before":_()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:R()}],overflow:[{overflow:L()}],"overflow-x":[{"overflow-x":L()}],"overflow-y":[{"overflow-y":L()}],overscroll:[{overscroll:M()}],"overscroll-x":[{"overscroll-x":M()}],"overscroll-y":[{"overscroll-y":M()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:$()}],"inset-x":[{"inset-x":$()}],"inset-y":[{"inset-y":$()}],start:[{start:$()}],end:[{end:$()}],top:[{top:$()}],right:[{right:$()}],bottom:[{bottom:$()}],left:[{left:$()}],visibility:["visible","invisible","collapse"],z:[{z:[Va,"auto",et,Je]}],basis:[{basis:[ec,"full","auto",a,...A()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[jt,ec,"auto","initial","none",Je]}],grow:[{grow:["",jt,et,Je]}],shrink:[{shrink:["",jt,et,Je]}],order:[{order:[Va,"first","last","none",et,Je]}],"grid-cols":[{"grid-cols":j()}],"col-start-end":[{col:V()}],"col-start":[{"col-start":U()}],"col-end":[{"col-end":U()}],"grid-rows":[{"grid-rows":j()}],"row-start-end":[{row:V()}],"row-start":[{"row-start":U()}],"row-end":[{"row-end":U()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":B()}],"auto-rows":[{"auto-rows":B()}],gap:[{gap:A()}],"gap-x":[{"gap-x":A()}],"gap-y":[{"gap-y":A()}],"justify-content":[{justify:[...Z(),"normal"]}],"justify-items":[{"justify-items":[...q(),"normal"]}],"justify-self":[{"justify-self":["auto",...q()]}],"align-content":[{content:["normal",...Z()]}],"align-items":[{items:[...q(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...q(),{baseline:["","last"]}]}],"place-content":[{"place-content":Z()}],"place-items":[{"place-items":[...q(),"baseline"]}],"place-self":[{"place-self":["auto",...q()]}],p:[{p:A()}],px:[{px:A()}],py:[{py:A()}],ps:[{ps:A()}],pe:[{pe:A()}],pt:[{pt:A()}],pr:[{pr:A()}],pb:[{pb:A()}],pl:[{pl:A()}],m:[{m:G()}],mx:[{mx:G()}],my:[{my:G()}],ms:[{ms:G()}],me:[{me:G()}],mt:[{mt:G()}],mr:[{mr:G()}],mb:[{mb:G()}],ml:[{ml:G()}],"space-x":[{"space-x":A()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":A()}],"space-y-reverse":["space-y-reverse"],size:[{size:te()}],w:[{w:[a,"screen",...te()]}],"min-w":[{"min-w":[a,"screen","none",...te()]}],"max-w":[{"max-w":[a,"screen","none","prose",{screen:[o]},...te()]}],h:[{h:["screen","lh",...te()]}],"min-h":[{"min-h":["screen","lh","none",...te()]}],"max-h":[{"max-h":["screen","lh",...te()]}],"font-size":[{text:["base",n,lh,Zl]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[r,et,Gy]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",Hy,Je]}],"font-family":[{font:[YF,Je,e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[i,et,Je]}],"line-clamp":[{"line-clamp":[jt,"none",et,Gy]}],leading:[{leading:[s,...A()]}],"list-image":[{"list-image":["none",et,Je]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",et,Je]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:O()}],"text-color":[{text:O()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...qe(),"wavy"]}],"text-decoration-thickness":[{decoration:[jt,"from-font","auto",et,Zl]}],"text-decoration-color":[{decoration:O()}],"underline-offset":[{"underline-offset":[jt,"auto",et,Je]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:A()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",et,Je]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",et,Je]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:K()}],"bg-repeat":[{bg:Y()}],"bg-size":[{bg:xe()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Va,et,Je],radial:["",et,Je],conic:[Va,et,Je]},XF,qF]}],"bg-color":[{bg:O()}],"gradient-from-pos":[{from:re()}],"gradient-via-pos":[{via:re()}],"gradient-to-pos":[{to:re()}],"gradient-from":[{from:O()}],"gradient-via":[{via:O()}],"gradient-to":[{to:O()}],rounded:[{rounded:ue()}],"rounded-s":[{"rounded-s":ue()}],"rounded-e":[{"rounded-e":ue()}],"rounded-t":[{"rounded-t":ue()}],"rounded-r":[{"rounded-r":ue()}],"rounded-b":[{"rounded-b":ue()}],"rounded-l":[{"rounded-l":ue()}],"rounded-ss":[{"rounded-ss":ue()}],"rounded-se":[{"rounded-se":ue()}],"rounded-ee":[{"rounded-ee":ue()}],"rounded-es":[{"rounded-es":ue()}],"rounded-tl":[{"rounded-tl":ue()}],"rounded-tr":[{"rounded-tr":ue()}],"rounded-br":[{"rounded-br":ue()}],"rounded-bl":[{"rounded-bl":ue()}],"border-w":[{border:ke()}],"border-w-x":[{"border-x":ke()}],"border-w-y":[{"border-y":ke()}],"border-w-s":[{"border-s":ke()}],"border-w-e":[{"border-e":ke()}],"border-w-t":[{"border-t":ke()}],"border-w-r":[{"border-r":ke()}],"border-w-b":[{"border-b":ke()}],"border-w-l":[{"border-l":ke()}],"divide-x":[{"divide-x":ke()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":ke()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...qe(),"hidden","none"]}],"divide-style":[{divide:[...qe(),"hidden","none"]}],"border-color":[{border:O()}],"border-color-x":[{"border-x":O()}],"border-color-y":[{"border-y":O()}],"border-color-s":[{"border-s":O()}],"border-color-e":[{"border-e":O()}],"border-color-t":[{"border-t":O()}],"border-color-r":[{"border-r":O()}],"border-color-b":[{"border-b":O()}],"border-color-l":[{"border-l":O()}],"divide-color":[{divide:O()}],"outline-style":[{outline:[...qe(),"none","hidden"]}],"outline-offset":[{"outline-offset":[jt,et,Je]}],"outline-w":[{outline:["",jt,lh,Zl]}],"outline-color":[{outline:O()}],shadow:[{shadow:["","none",h,gg,pg]}],"shadow-color":[{shadow:O()}],"inset-shadow":[{"inset-shadow":["none",f,gg,pg]}],"inset-shadow-color":[{"inset-shadow":O()}],"ring-w":[{ring:ke()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:O()}],"ring-offset-w":[{"ring-offset":[jt,Zl]}],"ring-offset-color":[{"ring-offset":O()}],"inset-ring-w":[{"inset-ring":ke()}],"inset-ring-color":[{"inset-ring":O()}],"text-shadow":[{"text-shadow":["none",p,gg,pg]}],"text-shadow-color":[{"text-shadow":O()}],opacity:[{opacity:[jt,et,Je]}],"mix-blend":[{"mix-blend":[...he(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":he()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[jt]}],"mask-image-linear-from-pos":[{"mask-linear-from":ge()}],"mask-image-linear-to-pos":[{"mask-linear-to":ge()}],"mask-image-linear-from-color":[{"mask-linear-from":O()}],"mask-image-linear-to-color":[{"mask-linear-to":O()}],"mask-image-t-from-pos":[{"mask-t-from":ge()}],"mask-image-t-to-pos":[{"mask-t-to":ge()}],"mask-image-t-from-color":[{"mask-t-from":O()}],"mask-image-t-to-color":[{"mask-t-to":O()}],"mask-image-r-from-pos":[{"mask-r-from":ge()}],"mask-image-r-to-pos":[{"mask-r-to":ge()}],"mask-image-r-from-color":[{"mask-r-from":O()}],"mask-image-r-to-color":[{"mask-r-to":O()}],"mask-image-b-from-pos":[{"mask-b-from":ge()}],"mask-image-b-to-pos":[{"mask-b-to":ge()}],"mask-image-b-from-color":[{"mask-b-from":O()}],"mask-image-b-to-color":[{"mask-b-to":O()}],"mask-image-l-from-pos":[{"mask-l-from":ge()}],"mask-image-l-to-pos":[{"mask-l-to":ge()}],"mask-image-l-from-color":[{"mask-l-from":O()}],"mask-image-l-to-color":[{"mask-l-to":O()}],"mask-image-x-from-pos":[{"mask-x-from":ge()}],"mask-image-x-to-pos":[{"mask-x-to":ge()}],"mask-image-x-from-color":[{"mask-x-from":O()}],"mask-image-x-to-color":[{"mask-x-to":O()}],"mask-image-y-from-pos":[{"mask-y-from":ge()}],"mask-image-y-to-pos":[{"mask-y-to":ge()}],"mask-image-y-from-color":[{"mask-y-from":O()}],"mask-image-y-to-color":[{"mask-y-to":O()}],"mask-image-radial":[{"mask-radial":[et,Je]}],"mask-image-radial-from-pos":[{"mask-radial-from":ge()}],"mask-image-radial-to-pos":[{"mask-radial-to":ge()}],"mask-image-radial-from-color":[{"mask-radial-from":O()}],"mask-image-radial-to-color":[{"mask-radial-to":O()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":T()}],"mask-image-conic-pos":[{"mask-conic":[jt]}],"mask-image-conic-from-pos":[{"mask-conic-from":ge()}],"mask-image-conic-to-pos":[{"mask-conic-to":ge()}],"mask-image-conic-from-color":[{"mask-conic-from":O()}],"mask-image-conic-to-color":[{"mask-conic-to":O()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:K()}],"mask-repeat":[{mask:Y()}],"mask-size":[{mask:xe()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",et,Je]}],filter:[{filter:["","none",et,Je]}],blur:[{blur:we()}],brightness:[{brightness:[jt,et,Je]}],contrast:[{contrast:[jt,et,Je]}],"drop-shadow":[{"drop-shadow":["","none",g,gg,pg]}],"drop-shadow-color":[{"drop-shadow":O()}],grayscale:[{grayscale:["",jt,et,Je]}],"hue-rotate":[{"hue-rotate":[jt,et,Je]}],invert:[{invert:["",jt,et,Je]}],saturate:[{saturate:[jt,et,Je]}],sepia:[{sepia:["",jt,et,Je]}],"backdrop-filter":[{"backdrop-filter":["","none",et,Je]}],"backdrop-blur":[{"backdrop-blur":we()}],"backdrop-brightness":[{"backdrop-brightness":[jt,et,Je]}],"backdrop-contrast":[{"backdrop-contrast":[jt,et,Je]}],"backdrop-grayscale":[{"backdrop-grayscale":["",jt,et,Je]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[jt,et,Je]}],"backdrop-invert":[{"backdrop-invert":["",jt,et,Je]}],"backdrop-opacity":[{"backdrop-opacity":[jt,et,Je]}],"backdrop-saturate":[{"backdrop-saturate":[jt,et,Je]}],"backdrop-sepia":[{"backdrop-sepia":["",jt,et,Je]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":A()}],"border-spacing-x":[{"border-spacing-x":A()}],"border-spacing-y":[{"border-spacing-y":A()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",et,Je]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[jt,"initial",et,Je]}],ease:[{ease:["linear","initial",C,et,Je]}],delay:[{delay:[jt,et,Je]}],animate:[{animate:["none",b,et,Je]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[x,et,Je]}],"perspective-origin":[{"perspective-origin":R()}],rotate:[{rotate:ae()}],"rotate-x":[{"rotate-x":ae()}],"rotate-y":[{"rotate-y":ae()}],"rotate-z":[{"rotate-z":ae()}],scale:[{scale:me()}],"scale-x":[{"scale-x":me()}],"scale-y":[{"scale-y":me()}],"scale-z":[{"scale-z":me()}],"scale-3d":["scale-3d"],skew:[{skew:X()}],"skew-x":[{"skew-x":X()}],"skew-y":[{"skew-y":X()}],transform:[{transform:[et,Je,"","none","gpu","cpu"]}],"transform-origin":[{origin:R()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:ye()}],"translate-x":[{"translate-x":ye()}],"translate-y":[{"translate-y":ye()}],"translate-z":[{"translate-z":ye()}],"translate-none":["translate-none"],accent:[{accent:O()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:O()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",et,Je]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":A()}],"scroll-mx":[{"scroll-mx":A()}],"scroll-my":[{"scroll-my":A()}],"scroll-ms":[{"scroll-ms":A()}],"scroll-me":[{"scroll-me":A()}],"scroll-mt":[{"scroll-mt":A()}],"scroll-mr":[{"scroll-mr":A()}],"scroll-mb":[{"scroll-mb":A()}],"scroll-ml":[{"scroll-ml":A()}],"scroll-p":[{"scroll-p":A()}],"scroll-px":[{"scroll-px":A()}],"scroll-py":[{"scroll-py":A()}],"scroll-ps":[{"scroll-ps":A()}],"scroll-pe":[{"scroll-pe":A()}],"scroll-pt":[{"scroll-pt":A()}],"scroll-pr":[{"scroll-pr":A()}],"scroll-pb":[{"scroll-pb":A()}],"scroll-pl":[{"scroll-pl":A()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",et,Je]}],fill:[{fill:["none",...O()]}],"stroke-w":[{stroke:[jt,lh,Zl,Gy]}],stroke:[{stroke:["none",...O()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},eB=NF(JF);function Ym(...t){return eB(hF(t))}function fr(){return crypto.randomUUID()}function ir(t){return`/Bean_WebApp/${t.startsWith("/")?t.slice(1):t}`}const qy={backgroundColor:"#0000ff",borderColor:"#0000ff",textColor:"#ffffff"},Yy={backgroundColor:"#6b6f7b",borderColor:"#6b6f7b",textColor:"#ffffff",backgroundImageUrl:ir("assets/widgets/stone_tile.webp")},tB=t=>t.replace(/\sdata-bg="[^"]*"/gi,"").replace(/\sdata-border="[^"]*"/gi,"").replace(/\sdata-text="[^"]*"/gi,"").replace(/\sdata-bg-image="[^"]*"/gi,""),dL=(t,e)=>{if(!e)return t;const n=tB(t),r=[];if(e.backgroundColor&&r.push(`data-bg="${e.backgroundColor}"`),e.borderColor&&r.push(`data-border="${e.borderColor}"`),e.textColor&&r.push(`data-text="${e.textColor}"`),e.backgroundImageUrl&&r.push(`data-bg-image="${e.backgroundImageUrl}"`),!r.length)return n;const i=r.join(" "),s=/class="([^"]*\bbattlemap-widget-content\b[^"]*)"/i;return s.test(n)?n.replace(s,o=>`${o} ${i}`):`<div class="battlemap-widget-content" ${i}>${n||"Widget"}</div>`},nB=t=>{const e=r=>{const i=t.match(r);return i==null?void 0:i[1]},n={backgroundColor:e(/data-bg="([^"]+)"/i),borderColor:e(/data-border="([^"]+)"/i),textColor:e(/data-text="([^"]+)"/i),backgroundImageUrl:e(/data-bg-image="([^"]+)"/i)};return Object.values(n).some(Boolean)?n:void 0},hL=t=>{var e,n,r,i;return{backgroundColor:((e=t.appearance)==null?void 0:e.backgroundColor)??(t.isFixed?Yy.backgroundColor:qy.backgroundColor),borderColor:((n=t.appearance)==null?void 0:n.borderColor)??(t.isFixed?Yy.borderColor:qy.borderColor),textColor:((r=t.appearance)==null?void 0:r.textColor)??(t.isFixed?Yy.textColor:qy.textColor),backgroundImageUrl:(i=t.appearance)==null?void 0:i.backgroundImageUrl}},mn={gridType:"square",gridColumns:12,gridRows:8,cellSize:80,gridLineWidth:1,gridBorderWidth:2,widgets:[],layers:[{id:"grid-layer",name:"Grid Map Layer",kind:"grid",visible:!0},{id:fr(),name:"Tile Layer 1",kind:"tiles",visible:!0}],activeLayerId:"grid-layer",version:1},dr={gridType:"hex",gridColumns:7,gridRows:7,cellSize:80,gridLineWidth:1,gridBorderWidth:2,widgets:[],hexSettings:{hexSize:80,orientation:"flat"},hexWidgets:[],layers:[{id:"grid-layer",name:"Grid Map Layer",kind:"grid",visible:!0},{id:fr(),name:"Tile Layer 1",kind:"tiles",visible:!0}],activeLayerId:"grid-layer",version:1};let lE=!1,xs=!0,yo=!0,yc=!0,wc=!0,xc=!0,_c=!0,bc=!0,Sc=!0,Cc=!0,wo=!0;const Cb="grid-layer",rB=()=>[{id:Cb,name:"Grid Map Layer",kind:"grid",visible:!0},{id:fr(),name:"Tile Layer 1",kind:"tiles",visible:!0}],uE=t=>{if(!Array.isArray(t)||t.length===0)return rB();let e=t.map((i,s)=>{const o=typeof i.name=="string"&&i.name.trim().length>0?i.name.trim():`Layer ${s+1}`,a=i.kind==="grid"||i.kind==="tiles"||i.kind==="image"||i.kind==="background"?i.kind:"layer";return{id:typeof i.id=="string"&&i.id.length>0?i.id:fr(),name:o,kind:a,visible:i.visible!==!1}});if(e.some(i=>i.kind==="grid")||(e=[{id:Cb,name:"Grid Map Layer",kind:"grid",visible:!0},...e]),!e.some(i=>i.kind==="tiles")){const i={id:fr(),name:"Tile Layer 1",kind:"tiles",visible:!0},s=e.findIndex(o=>o.kind==="grid");s>=0?e=[...e.slice(0,s+1),i,...e.slice(s+1)]:e=[i,...e]}return e},cE=(t,e)=>{var r;if(t&&e.some(i=>i.id===t))return t;const n=e.find(i=>i.kind==="grid");return(n==null?void 0:n.id)??((r=e[0])==null?void 0:r.id)??Cb},mu=t=>{var n;if(!t||typeof t!="object")return!1;const e=((n=t.message)==null?void 0:n.toLowerCase())??"";return e.includes("does not exist")||e.includes("42p01")},Gn=(t,e)=>{var r;if(!t||typeof t!="object")return!1;const n=((r=t.message)==null?void 0:r.toLowerCase())??"";return n.includes("does not exist")&&n.includes(e.toLowerCase())},iB=(t,e)=>{const n=Number(t.q)||0,r=Number(t.r)||0,i=t.s!==void 0&&t.s!==null?Number(t.s):-(n+r);return{id:t.id||fr(),gridType:"hex",q:n,r,s:i,layerId:t.layerId??e,tileId:t.tileId??"",appearance:t.appearance,updated_at:t.updated_at}},nl=t=>{var l,c,h,f,p;const e=(t==null?void 0:t.gridType)==="hex"||Array.isArray(t==null?void 0:t.hexWidgets),n=Number((t==null?void 0:t.gridLineWidth)??mn.gridLineWidth??1),r=Number((t==null?void 0:t.gridBorderWidth)??mn.gridBorderWidth??2),i=typeof(t==null?void 0:t.gridLineColor)=="string"?t==null?void 0:t.gridLineColor:void 0,s=typeof(t==null?void 0:t.gridBorderColor)=="string"?t==null?void 0:t.gridBorderColor:void 0;if(e){const g=Number((l=t==null?void 0:t.hexSettings)==null?void 0:l.hexSize)||((c=dr.hexSettings)==null?void 0:c.hexSize)||dr.cellSize,v=((h=t==null?void 0:t.hexSettings)==null?void 0:h.orientation)==="pointy"?"pointy":"flat",x=Number(t==null?void 0:t.gridColumns)||dr.gridColumns,k=Number(t==null?void 0:t.gridRows)||dr.gridRows,C={hexSize:g,orientation:v},b=uE(t==null?void 0:t.layers),_=(f=b.find(T=>T.kind==="tiles"))==null?void 0:f.id;return{gridType:"hex",gridColumns:x,gridRows:k,cellSize:Number(t==null?void 0:t.cellSize)||g,gridLineWidth:n,gridBorderWidth:r,gridLineColor:i,gridBorderColor:s,widgets:[],hexSettings:C,hexWidgets:((t==null?void 0:t.hexWidgets)??[]).map(T=>iB(T,_)),allowedHexCells:t==null?void 0:t.allowedHexCells,layers:b,activeLayerId:cE(t==null?void 0:t.activeLayerId,b),version:(t==null?void 0:t.version)??dr.version,updated_at:t==null?void 0:t.updated_at}}const o=uE(t==null?void 0:t.layers),a=(p=o.find(g=>g.kind==="tiles"))==null?void 0:p.id;return{gridType:"square",gridColumns:Number(t==null?void 0:t.gridColumns)||mn.gridColumns,gridRows:Number(t==null?void 0:t.gridRows)||mn.gridRows,cellSize:Number(t==null?void 0:t.cellSize)||mn.cellSize,gridLineWidth:n,gridBorderWidth:r,gridLineColor:i,gridBorderColor:s,widgets:((t==null?void 0:t.widgets)??[]).map(g=>{const v=nB(g.content??""),x=hL({...g,appearance:g.appearance??v}),k=g.content&&g.content.trim().length?g.content:'<div class="battlemap-widget-content">Widget</div>',C=dL(k,x);return{id:g.id||fr(),x:g.x??0,y:g.y??0,w:g.w??1,h:g.h??1,content:C,layerId:g.layerId??a,tileId:g.tileId,appearance:x,isFixed:g.isFixed??!1,updated_at:g.updated_at}}),allowedSquareCells:t==null?void 0:t.allowedSquareCells,layers:o,activeLayerId:cE(t==null?void 0:t.activeLayerId,o),version:(t==null?void 0:t.version)??mn.version,updated_at:t==null?void 0:t.updated_at}};async function fL(){if(lE)return xs;const{error:t}=await Ct.from("battle_map_configs").select("project_id").limit(1);return t&&mu(t)&&(xs=!1),lE=!0,xs}async function sB(t,e){var c,h,f,p;let n;for(let g=0;g<3;g+=1){const v=["grid_columns","grid_rows","cell_size","version","updated_at"];yc&&v.push("allowed_square_cells"),wc&&v.push("layers"),xc&&v.push("active_layer_id"),_c&&v.push("grid_line_color"),bc&&v.push("grid_border_color"),Sc&&v.push("grid_line_width"),Cc&&v.push("grid_border_width");try{n=await Ct.from("battle_map_configs").select(v.join(", ")).eq("project_id",t).eq("user_id",e).limit(1)}catch(x){n={error:x}}if(!n.error)break;if(mu(n.error))return xs=!1,null;if(Gn(n.error,"allowed_square_cells")){yc=!1;continue}if(Gn(n.error,"layers")){wc=!1;continue}if(Gn(n.error,"active_layer_id")){xc=!1;continue}if(Gn(n.error,"grid_line_color")){_c=!1;continue}if(Gn(n.error,"grid_border_color")){bc=!1;continue}if(Gn(n.error,"grid_line_width")){Sc=!1;continue}if(Gn(n.error,"grid_border_width")){Cc=!1;continue}yc=!1,wc=!1,xc=!1,_c=!1,bc=!1,Sc=!1,Cc=!1}if(n.error){if(mu(n.error))return xs=!1,null;throw n.error}const r=(c=n.data)==null?void 0:c[0];if(!r)return null;const i=["id","x","y","w","h","content","updated_at","sort_index"];yo&&i.push("is_fixed"),wo&&i.push("layer_id");const s=i.join(", "),{data:o,error:a}=await Ct.from("battle_map_widgets").select(s).eq("project_id",t).eq("user_id",e).order("sort_index",{ascending:!0});if(a){if(Gn(a,"is_fixed")){yo=!1;const g=await Ct.from("battle_map_widgets").select(["id","x","y","w","h","content","updated_at","sort_index",...wo?["layer_id"]:[]].join(", ")).eq("project_id",t).eq("user_id",e).order("sort_index",{ascending:!0});if(g.error){if(Gn(g.error,"layer_id")){wo=!1;const v=await Ct.from("battle_map_widgets").select("id, x, y, w, h, content, updated_at, sort_index").eq("project_id",t).eq("user_id",e).order("sort_index",{ascending:!0});if(v.error)throw v.error;return nl({gridColumns:r.grid_columns,gridRows:r.grid_rows,cellSize:r.cell_size,widgets:((h=v.data)==null?void 0:h.map(x=>({id:x.id,x:x.x,y:x.y,w:x.w,h:x.h,content:x.content??"",updated_at:x.updated_at,isFixed:!1})))??[],version:r.version,updated_at:r.updated_at})}throw g.error}return nl({gridColumns:r.grid_columns,gridRows:r.grid_rows,cellSize:r.cell_size,widgets:((f=g.data)==null?void 0:f.map(v=>({id:v.id,x:v.x,y:v.y,w:v.w,h:v.h,content:v.content??"",layerId:wo?v.layer_id??void 0:void 0,updated_at:v.updated_at,isFixed:!1})))??[],version:r.version,updated_at:r.updated_at})}if(Gn(a,"layer_id")){wo=!1;const g=await Ct.from("battle_map_widgets").select(["id","x","y","w","h","content","updated_at","sort_index",...yo?["is_fixed"]:[]].join(", ")).eq("project_id",t).eq("user_id",e).order("sort_index",{ascending:!0});if(g.error)throw Gn(g.error,"is_fixed")&&(yo=!1),g.error;const v=((p=g.data)==null?void 0:p.map(x=>({id:x.id,x:x.x,y:x.y,w:x.w,h:x.h,content:x.content??"",isFixed:yo?x.is_fixed??!1:!1,updated_at:x.updated_at})))??[];return nl({gridColumns:r.grid_columns,gridRows:r.grid_rows,cellSize:r.cell_size,widgets:v,version:r.version,updated_at:r.updated_at})}if(mu(a))return xs=!1,null;throw a}const l=(o==null?void 0:o.map(g=>({id:g.id,x:g.x,y:g.y,w:g.w,h:g.h,content:g.content??"",isFixed:yo?g.is_fixed??!1:!1,layerId:wo?g.layer_id??void 0:void 0,updated_at:g.updated_at})))??[];return nl({gridColumns:r.grid_columns,gridRows:r.grid_rows,cellSize:r.cell_size,gridLineColor:_c?r.grid_line_color:void 0,gridBorderColor:bc?r.grid_border_color:void 0,gridLineWidth:Sc?r.grid_line_width:void 0,gridBorderWidth:Cc?r.grid_border_width:void 0,widgets:l,allowedSquareCells:yc?r.allowed_square_cells:void 0,layers:wc?r.layers:void 0,activeLayerId:xc?r.active_layer_id:void 0,version:r.version,updated_at:r.updated_at})}async function pL(t,e,n){const r=nl(n);if(r.gridType==="hex")return r;const i=(r.version??1)+1,s=new Date().toISOString(),o={project_id:t,user_id:e,grid_columns:r.gridColumns,grid_rows:r.gridRows,cell_size:r.cellSize,version:i,updated_at:s};let a;for(let p=0;p<3;p+=1){let g={...o};if(yc&&(g={...g,allowed_square_cells:r.allowedSquareCells??null}),wc&&(g={...g,layers:r.layers??null}),xc&&(g={...g,active_layer_id:r.activeLayerId??null}),_c&&(g={...g,grid_line_color:r.gridLineColor??null}),bc&&(g={...g,grid_border_color:r.gridBorderColor??null}),Sc&&(g={...g,grid_line_width:r.gridLineWidth??null}),Cc&&(g={...g,grid_border_width:r.gridBorderWidth??null}),a=await Ct.from("battle_map_configs").upsert(g),!a.error)break;if(Gn(a.error,"allowed_square_cells")){yc=!1;continue}if(Gn(a.error,"layers")){wc=!1;continue}if(Gn(a.error,"active_layer_id")){xc=!1;continue}if(Gn(a.error,"grid_line_color")){_c=!1;continue}if(Gn(a.error,"grid_border_color")){bc=!1;continue}if(Gn(a.error,"grid_line_width")){Sc=!1;continue}if(Gn(a.error,"grid_border_width")){Cc=!1;continue}if(mu(a.error))return xs=!1,r;throw a.error}if(a.error){if(mu(a.error))return xs=!1,r;throw a.error}const l=r.widgets.map((p,g)=>{const v=hL(p);return{id:p.id||fr(),project_id:t,user_id:e,x:p.x??0,y:p.y??0,w:p.w??1,h:p.h??1,content:dL(p.content??"",v),...yo?{is_fixed:p.isFixed??!1}:{},...wo?{layer_id:p.layerId??null}:{},sort_index:g,updated_at:s}}),{error:c}=await Ct.from("battle_map_widgets").upsert(l,{onConflict:"id"});if(c){if(Gn(c,"is_fixed")){yo=!1;const p=r.widgets.map((v,x)=>({id:v.id||fr(),project_id:t,user_id:e,x:v.x??0,y:v.y??0,w:v.w??1,h:v.h??1,content:v.content??"",...wo?{layer_id:v.layerId??null}:{},sort_index:x,updated_at:s})),g=await Ct.from("battle_map_widgets").upsert(p,{onConflict:"id"});if(g.error){if(Gn(g.error,"layer_id")){wo=!1;const v=r.widgets.map((k,C)=>({id:k.id||fr(),project_id:t,user_id:e,x:k.x??0,y:k.y??0,w:k.w??1,h:k.h??1,content:k.content??"",sort_index:C,updated_at:s})),x=await Ct.from("battle_map_widgets").upsert(v,{onConflict:"id"});if(x.error)throw x.error;return xs=!1,r}throw g.error}return xs=!1,r}if(Gn(c,"layer_id")){wo=!1;const p=r.widgets.map((v,x)=>({id:v.id||fr(),project_id:t,user_id:e,x:v.x??0,y:v.y??0,w:v.w??1,h:v.h??1,content:v.content??"",...yo?{is_fixed:v.isFixed??!1}:{},sort_index:x,updated_at:s})),g=await Ct.from("battle_map_widgets").upsert(p,{onConflict:"id"});if(g.error)throw Gn(g.error,"is_fixed")&&(yo=!1),g.error;return xs=!1,r}if(mu(c))return xs=!1,r;throw c}const{data:h}=await Ct.from("battle_map_widgets").select("id").eq("project_id",t).eq("user_id",e),f=(h==null?void 0:h.map(p=>p.id).filter(p=>!l.some(g=>g.id===p)))??[];return f.length>0&&await Ct.from("battle_map_widgets").delete().in("id",f),{...r,widgets:l.map(({id:p,x:g,y:v,w:x,h:k,content:C})=>{var b,_,T;return{id:p,x:g,y:v,w:x,h:k,content:C,appearance:(b=r.widgets.find(R=>R.id===p))==null?void 0:b.appearance,isFixed:((_=r.widgets.find(R=>R.id===p))==null?void 0:_.isFixed)??!1,layerId:(T=r.widgets.find(R=>R.id===p))==null?void 0:T.layerId,updated_at:s}}),version:i,updated_at:s}}async function dE(t,e,n){const r=n.gridType==="hex"?{gridType:"hex",gridColumns:n.gridColumns,gridRows:n.gridRows,cellSize:n.cellSize,gridLineColor:n.gridLineColor,gridBorderColor:n.gridBorderColor,gridLineWidth:n.gridLineWidth,gridBorderWidth:n.gridBorderWidth,hexSettings:n.hexSettings??dr.hexSettings,hexWidgets:n.hexWidgets??[],allowedHexCells:n.allowedHexCells,layers:n.layers,activeLayerId:n.activeLayerId,version:n.version,updated_at:n.updated_at}:{gridType:"square",gridColumns:n.gridColumns,gridRows:n.gridRows,cellSize:n.cellSize,gridLineColor:n.gridLineColor,gridBorderColor:n.gridBorderColor,gridLineWidth:n.gridLineWidth,gridBorderWidth:n.gridBorderWidth,widgets:n.widgets,allowedSquareCells:n.allowedSquareCells,layers:n.layers,activeLayerId:n.activeLayerId,version:n.version,updated_at:n.updated_at};await Ct.from("projects").update({battle_map_config:r}).eq("id",t).eq("user_id",e)}async function oB(t){var n,r,i,s,o,a,l,c,h;if(((n=t.legacyConfig)==null?void 0:n.gridType)==="hex")return{config:nl(t.legacyConfig),storage:"legacy"};const e=await fL();if(e){const f=await sB(t.projectId,t.userId);if(f)return{config:f.gridType==="square"?{...f,...(!f.allowedSquareCells||f.allowedSquareCells.length===0)&&((i=(r=t.legacyConfig)==null?void 0:r.allowedSquareCells)!=null&&i.length)?{allowedSquareCells:t.legacyConfig.allowedSquareCells}:{},...f.layers&&f.layers.length>0?{}:(s=t.legacyConfig)!=null&&s.layers?{layers:t.legacyConfig.layers}:{},...f.activeLayerId?{}:(o=t.legacyConfig)!=null&&o.activeLayerId?{activeLayerId:t.legacyConfig.activeLayerId}:{},...f.gridLineColor?{}:(a=t.legacyConfig)!=null&&a.gridLineColor?{gridLineColor:t.legacyConfig.gridLineColor}:{},...f.gridBorderColor?{}:(l=t.legacyConfig)!=null&&l.gridBorderColor?{gridBorderColor:t.legacyConfig.gridBorderColor}:{},...f.gridLineWidth!==void 0?{}:((c=t.legacyConfig)==null?void 0:c.gridLineWidth)!==void 0?{gridLineWidth:t.legacyConfig.gridLineWidth}:{},...f.gridBorderWidth!==void 0?{}:((h=t.legacyConfig)==null?void 0:h.gridBorderWidth)!==void 0?{gridBorderWidth:t.legacyConfig.gridBorderWidth}:{}}:f,storage:"advanced"}}if(t.legacyConfig){const f=nl(t.legacyConfig);if(e)try{await pL(t.projectId,t.userId,f)}catch(p){console.warn("Battle map migration failed, keeping legacy storage",p)}return{config:f,storage:e?"advanced":"legacy"}}return{config:mn,storage:e?"advanced":"legacy"}}async function gL(t){const e=await fL();let n=nl(t.config);if(n.gridType==="hex"){n={...n,version:(n.version??1)+1,updated_at:new Date().toISOString()};try{await dE(t.projectId,t.userId,n)}catch(r){console.warn("Failed to persist hex battle_map_config snapshot",r)}return{config:n,storage:"legacy"}}e?n=await pL(t.projectId,t.userId,n):n={...n,version:(n.version??1)+1};try{await dE(t.projectId,t.userId,n)}catch(r){console.warn("Failed to persist legacy battle_map_config snapshot",r)}return{config:n,storage:e?"advanced":"legacy"}}function aB({isOpen:t,onClose:e,projectTypes:n,selectedProjectTypeId:r,onSelectProjectType:i,onProjectCreated:s,existingProjects:o=[]}){var qe;const{user:a}=Oi(),l=ro(),c=y.useMemo(()=>n.find(he=>he.id===r),[n,r]),[h,f]=y.useState(""),[p,g]=y.useState(""),[v,x]=y.useState(!1),[k,C]=y.useState(null),[b,_]=y.useState(1e3),[T,R]=y.useState(1e3),[L,M]=y.useState("#ffffff"),[A,$]=y.useState(mn.gridColumns),[j,V]=y.useState(mn.gridRows),[U,B]=y.useState("square"),Z=((qe=dr.hexSettings)==null?void 0:qe.hexSize)??dr.cellSize,q=y.useMemo(()=>o.filter(ge=>ge.project_type==="canvas").length+1,[o]);y.useEffect(()=>{t&&(f(""),g(""),C(null),_(1e3),R(1e3),M("#ffffff"),$(mn.gridColumns),V(mn.gridRows),B("square"))},[t]);const G=r==="canvas",te=r==="battle-maps",O=280,K=b/T;let Y,xe;if(b>=T?(Y=O,xe=O/K):(xe=O,Y=O*K),!t)return null;const re=async he=>{if(he.preventDefault(),!a)return;x(!0),C(null);const ge=h.trim()||(G?`Canvas Project #${q}`:"");if(!ge){C("Project name is required"),x(!1);return}const we=Math.max(1,A||mn.gridColumns),ae=Math.max(1,j||mn.gridRows),me=Z,X=Math.max(1,we),ye=G?{width:b,height:T,backgroundColor:L}:te?U==="hex"?{gridType:U,gridColumns:X*2-1,gridRows:X*2-1,cellSize:me,widgets:[],hexSettings:{hexSize:me,orientation:"flat"},hexWidgets:[],version:dr.version}:{gridType:U,gridColumns:we,gridRows:ae,cellSize:mn.cellSize,widgets:[],version:mn.version}:{},_e={user_id:a.id,name:ge,project_type:r,description:p.trim()||null,config:ye},{data:at,error:Le}=await Ct.from("projects").insert([_e]).select().single();if(Le){C(Le.message),x(!1);return}const fe=at;G&&await ue(fe.id),te&&await ke(fe.id,we,ae,U,{hexSize:me}),s==null||s(fe),x(!1),e(),l(`/workspace/${r}/${fe.id}`)},ue=async he=>{if(a)try{const ge=fr(),we=fr(),ae={layers:[{id:ge,name:"Background",visible:!0,order:0,strokes:[]},{id:we,name:"Layer 1",visible:!0,order:1,strokes:[]}],activeLayerId:we,version:2};await Ct.from("canvases").insert({project_id:he,user_id:a.id,canvas_data:ae})}catch(ge){console.error("Failed to create initial canvas:",ge)}},ke=async(he,ge,we,ae,me)=>{var _e;if(!a)return;const X=(me==null?void 0:me.hexSize)??((_e=dr.hexSettings)==null?void 0:_e.hexSize)??dr.cellSize,ye=ae==="hex"?{gridType:"hex",gridColumns:ge*2-1,gridRows:ge*2-1,cellSize:X,widgets:[],hexSettings:{hexSize:X,orientation:"flat"},hexWidgets:[],version:dr.version}:{gridType:"square",gridColumns:ge,gridRows:we,cellSize:mn.cellSize,widgets:[],version:mn.version};try{await gL({projectId:he,userId:a.id,config:ye}),await Ct.from("battle_maps").insert({project_id:he,width:ae==="hex"?0:ge,height:ae==="hex"?0:we,tile_size:ye.cellSize,grid_type:ae})}catch(at){console.error("Failed to create initial battle map:",at)}};return w.jsx("div",{className:"new-project-overlay",onClick:e,role:"presentation",children:w.jsxs("div",{className:"new-project-panel",role:"dialog","aria-modal":"true","aria-labelledby":"new-project-title",onClick:he=>he.stopPropagation(),children:[w.jsxs("div",{className:"new-project-panel__column new-project-panel__column--left",children:[w.jsxs("div",{className:"new-project-panel__header",children:[w.jsx("h2",{id:"new-project-title",children:"New Project"}),w.jsx("p",{className:"new-project-panel__subtitle muted",children:"Choose a project type to get started."})]}),w.jsx(lF,{items:n,selectedId:r,onSelect:i})]}),w.jsx("div",{className:"new-project-panel__column new-project-panel__column--right",children:G?w.jsxs("div",{className:"new-project-canvas-layout",children:[w.jsxs("div",{className:"new-project-canvas-column",children:[w.jsx("h3",{className:"new-project-panel__selection-title",children:c==null?void 0:c.label}),w.jsxs("form",{className:"new-project-canvas-form",onSubmit:re,children:[w.jsxs("div",{className:"new-project-form__group",children:[w.jsx("label",{className:"new-project-form__label",htmlFor:"canvas-name",children:"Canvas Name"}),w.jsx("input",{id:"canvas-name",type:"text",value:h,onChange:he=>f(he.target.value),placeholder:`Canvas Project #${q}`,className:"new-project-form__input"})]}),w.jsx("div",{className:"new-project-canvas-divider"}),w.jsxs("div",{className:"new-project-form__grid",children:[w.jsxs("div",{className:"new-project-form__group",children:[w.jsx("label",{className:"new-project-form__label",htmlFor:"canvas-width",children:"Width"}),w.jsxs("div",{className:"new-project-form__input-with-unit",children:[w.jsx("input",{id:"canvas-width",type:"number",value:b,onChange:he=>_(Number(he.target.value)),min:"100",max:"10000",required:!0,className:"new-project-form__input"}),w.jsx("span",{className:"new-project-form__unit",children:"px"})]})]}),w.jsxs("div",{className:"new-project-form__group",children:[w.jsx("label",{className:"new-project-form__label",htmlFor:"canvas-height",children:"Height"}),w.jsxs("div",{className:"new-project-form__input-with-unit",children:[w.jsx("input",{id:"canvas-height",type:"number",value:T,onChange:he=>R(Number(he.target.value)),min:"100",max:"10000",required:!0,className:"new-project-form__input"}),w.jsx("span",{className:"new-project-form__unit",children:"px"})]})]})]}),w.jsxs("div",{className:"new-project-form__group",children:[w.jsx("label",{className:"new-project-form__label",htmlFor:"canvas-color",children:"Background Color"}),w.jsx("input",{id:"canvas-color",type:"color",value:L,onChange:he=>M(he.target.value),className:"new-project-form__color-input-circle",title:L})]}),k?w.jsx("p",{className:"new-project-form__error",children:k}):null,w.jsxs("div",{className:"new-project-form__actions",children:[w.jsx("button",{className:"button button--ghost",type:"button",onClick:e,disabled:v,children:"Cancel"}),w.jsx("button",{className:"button button--primary",type:"submit",disabled:v,children:v?"Creating":"Create"})]})]})]}),w.jsxs("div",{className:"new-project-canvas-column",children:[w.jsx("h3",{className:"new-project-canvas-preview__label",children:"Preview"}),w.jsxs("div",{className:"new-project-canvas-preview__container",children:[w.jsx("div",{className:"new-project-canvas-preview__card",style:{width:`${Y}px`,height:`${xe}px`},children:w.jsx(dF,{variant:"gold",children:w.jsx("div",{className:"new-project-canvas-preview__inner",style:{backgroundColor:L}})})}),w.jsxs("p",{className:"new-project-canvas-preview__dimensions",children:[b,"  ",T," px"]})]})]})]}):w.jsxs(w.Fragment,{children:[w.jsx("h3",{className:"new-project-panel__selection-title",children:c==null?void 0:c.label}),w.jsxs("form",{className:"new-project-form",onSubmit:re,children:[w.jsxs("div",{className:"new-project-form__group",children:[w.jsx("label",{className:"new-project-form__label",htmlFor:"project-name",children:"Project Name"}),w.jsx("input",{id:"project-name",type:"text",value:h,onChange:he=>f(he.target.value),placeholder:"Enter a project name",className:"new-project-form__input",required:!0})]}),w.jsxs("div",{className:"new-project-form__group",children:[w.jsxs("label",{className:"new-project-form__label",htmlFor:"project-description",children:["Description ",w.jsx("span",{className:"new-project-form__optional",children:"(optional)"})]}),w.jsx("textarea",{id:"project-description",value:p,onChange:he=>g(he.target.value),rows:3,placeholder:"Add a short summary for this project",className:"new-project-form__input"})]}),te?w.jsxs(w.Fragment,{children:[w.jsxs("div",{className:"new-project-form__group",children:[w.jsx("span",{className:"new-project-form__label",children:"Grid Type"}),w.jsxs("div",{className:"new-project-form__radio-group",children:[w.jsxs("label",{className:"new-project-form__radio",children:[w.jsx("input",{type:"radio",name:"battlemap-grid-type",value:"square",checked:U==="square",onChange:()=>B("square")}),w.jsx("span",{children:"Square (GridStack)"})]}),w.jsxs("label",{className:"new-project-form__radio",children:[w.jsx("input",{type:"radio",name:"battlemap-grid-type",value:"hex",checked:U==="hex",onChange:()=>B("hex")}),w.jsx("span",{children:"Hex"})]})]})]}),U==="square"?w.jsxs(w.Fragment,{children:[w.jsxs("div",{className:"new-project-form__grid",children:[w.jsxs("div",{className:"new-project-form__group",children:[w.jsx("label",{className:"new-project-form__label",htmlFor:"battlemap-columns",children:"Columns"}),w.jsx("input",{id:"battlemap-columns",type:"number",min:"1",max:"50",value:A,onChange:he=>$(Number(he.target.value)),className:"new-project-form__input",required:!0})]}),w.jsxs("div",{className:"new-project-form__group",children:[w.jsx("label",{className:"new-project-form__label",htmlFor:"battlemap-rows",children:"Rows"}),w.jsx("input",{id:"battlemap-rows",type:"number",min:"1",max:"50",value:j,onChange:he=>V(Number(he.target.value)),className:"new-project-form__input",required:!0})]})]}),w.jsx("p",{className:"new-project-form__optional",children:"Set the starting grid size (default 12 columns by 8 rows). You can expand later."})]}):w.jsxs(w.Fragment,{children:[w.jsxs("div",{className:"new-project-form__group",children:[w.jsx("label",{className:"new-project-form__label",htmlFor:"battlemap-columns",children:"Radius (hexes from center)"}),w.jsx("input",{id:"battlemap-columns",type:"number",min:"1",max:"50",value:A,onChange:he=>{const ge=Number(he.target.value);$(ge),V(ge)},className:"new-project-form__input",required:!0})]}),w.jsx("p",{className:"new-project-form__optional",children:"Hex grids are hexagonal; radius controls size. Orientation is flat-top."})]})]}):null,k?w.jsx("p",{className:"new-project-form__error",children:k}):null,w.jsxs("div",{className:"new-project-form__actions",children:[w.jsx("button",{className:"button button--ghost",type:"button",onClick:e,disabled:v,children:"Cancel"}),w.jsx("button",{className:"button button--primary",type:"submit",disabled:!h.trim()||v,children:v?"Creating":"Create"})]})]})]})})]})})}const Ky=(t,e)=>{let n=t.startsWith("#")?t.slice(1):t;n.length===3&&(n=n.split("").map(a=>a+a).join(""));const r=parseInt(n,16);let i=r>>16&255,s=r>>8&255,o=r&255;return i=Math.max(0,Math.min(255,Math.floor(i*(1-e)))),s=Math.max(0,Math.min(255,Math.floor(s*(1-e)))),o=Math.max(0,Math.min(255,Math.floor(o*(1-e)))),"#"+((1<<24)+(i<<16)+(s<<8)+o).toString(16).slice(1).toUpperCase()},lB=({color:t="#5227FF",size:e=1,items:n=[],className:r="",onClick:i})=>{const o=n.slice(0,3);for(;o.length<3;)o.push(null);const a=Ky(t,.08),l=Ky("#ffffff",.1),c=Ky("#ffffff",.05),h="#ffffff",f=()=>{i&&i()},p={"--folder-color":t,"--folder-back-color":a,"--paper-1":l,"--paper-2":c,"--paper-3":h},g={transform:`scale(${e})`};return w.jsx("div",{style:g,className:r,children:w.jsx("div",{className:"folder",style:p,onClick:f,children:w.jsxs("div",{className:"folder__back",children:[o.map((v,x)=>w.jsx("div",{className:`paper paper-${x+1}`,children:v},x)),w.jsx("div",{className:"folder__front"}),w.jsx("div",{className:"folder__front right"})]})})})};function uB({projects:t,isLoading:e,onSelectProject:n,onUpdateProject:r,onDeleteProject:i,onRefresh:s}){const[o,a]=y.useState(null),[l,c]=y.useState(""),[h,f]=y.useState(!1),[p,g]=y.useState(!1),[v,x]=y.useState(new Set),k=y.useRef(null),C=j=>({canvas:"#df4b26","battle-maps":"#FF6B35","character-sheets":"#4ECDC4","item-cards":"#FFD93D","game-boards":"#95E1D3","campaign-journal":"#F38181"})[j]||"#FF6B35";y.useEffect(()=>{o&&k.current&&(k.current.focus(),k.current.select())},[o]);const b=(j,V)=>{V.stopPropagation(),a(j.id),c(j.name)},_=async j=>{var V;if(!r||!l.trim()||l===((V=t.find(U=>U.id===j))==null?void 0:V.name)){a(null);return}f(!0);try{await r(j,l.trim()),a(null)}catch(U){console.error("Failed to update project name:",U)}finally{f(!1)}},T=()=>{a(null),c("")},R=(j,V)=>{j.key==="Enter"?_(V):j.key==="Escape"&&T()},L=()=>{g(!p),x(new Set)},M=(j,V)=>{V.stopPropagation(),x(U=>{const B=new Set(U);return B.has(j)?B.delete(j):B.add(j),B})},A=async(j,V)=>{if(V.stopPropagation(),!!i&&window.confirm("Are you sure you want to delete this project? This action cannot be undone."))try{await i(j),x(U=>{const B=new Set(U);return B.delete(j),B})}catch(U){console.error("Failed to delete project:",U)}},$=j=>{p||n(j)};return w.jsxs("div",{className:"my-projects",children:[w.jsxs("div",{className:"my-projects__toolbar",children:[w.jsxs("div",{children:[w.jsx("p",{className:"my-projects__eyebrow",children:"Projects"}),w.jsx("h2",{children:"My Projects"})]}),w.jsxs("div",{className:"my-projects__toolbar-actions",children:[i&&w.jsx("button",{className:`button ${p?"button--primary":"button--ghost"}`,onClick:L,disabled:e,children:p?"Done":"Edit"}),s?w.jsx("button",{className:"button button--ghost",onClick:s,disabled:e,children:"Refresh"}):null]})]}),e?w.jsx("p",{className:"muted",children:"Loading your projects"}):t.length===0?w.jsx("div",{className:"my-projects__empty",children:w.jsx("p",{className:"muted",children:"No projects yet. Create one to get started."})}):w.jsx("div",{className:"my-projects__grid",children:t.map(j=>{const V=v.has(j.id);return w.jsxs("div",{className:`my-projects__folder-wrapper ${p?"my-projects__folder-wrapper--edit-mode":""} ${V?"my-projects__folder-wrapper--selected":""}`,children:[w.jsxs("div",{className:"my-projects__folder-container",onClick:p?U=>M(j.id,U):void 0,children:[w.jsx(lB,{color:C(j.project_type),size:1.2,onClick:()=>$(j)}),p&&V&&w.jsx("button",{className:"my-projects__delete-btn",onClick:U=>A(j.id,U),title:"Delete project",children:""})]}),w.jsxs("div",{className:"my-projects__folder-info",children:[o===j.id?w.jsx("input",{ref:k,type:"text",className:"my-projects__title my-projects__title--editing",value:l,onChange:U=>c(U.target.value),onBlur:()=>_(j.id),onKeyDown:U=>R(U,j.id),disabled:h,maxLength:100}):w.jsx("h3",{className:"my-projects__title",onClick:U=>!p&&b(j,U),title:j.name,children:j.name}),w.jsxs("div",{className:"my-projects__meta",children:[w.jsx("span",{className:"my-projects__type",children:j.project_type}),w.jsx("span",{className:"my-projects__date",children:j.created_at?new Date(j.created_at).toLocaleDateString():""})]}),j.description?w.jsx("p",{className:"my-projects__description",children:j.description}):null]})]},j.id)})})]})}const kb=y.createContext({});function Eb(t){const e=y.useRef(null);return e.current===null&&(e.current=t()),e.current}const Rb=typeof window<"u",mL=Rb?y.useLayoutEffect:y.useEffect,z0=y.createContext(null);function Tb(t,e){t.indexOf(e)===-1&&t.push(e)}function Pb(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const ha=(t,e,n)=>n>e?e:n<t?t:n;let Lb=()=>{};const fa={},vL=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function yL(t){return typeof t=="object"&&t!==null}const wL=t=>/^0[^.\s]+$/u.test(t);function Mb(t){let e;return()=>(e===void 0&&(e=t()),e)}const Rs=t=>t,cB=(t,e)=>n=>e(t(n)),Zf=(...t)=>t.reduce(cB),Pf=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r};class Ab{constructor(){this.subscriptions=[]}add(e){return Tb(this.subscriptions,e),()=>Pb(this.subscriptions,e)}notify(e,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,n,r);else for(let s=0;s<i;s++){const o=this.subscriptions[s];o&&o(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const ko=t=>t*1e3,Cs=t=>t/1e3;function xL(t,e){return e?t*(1e3/e):0}const _L=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,dB=1e-7,hB=12;function fB(t,e,n,r,i){let s,o,a=0;do o=e+(n-e)/2,s=_L(o,r,i)-t,s>0?n=o:e=o;while(Math.abs(s)>dB&&++a<hB);return o}function Qf(t,e,n,r){if(t===e&&n===r)return Rs;const i=s=>fB(s,0,1,t,n);return s=>s===0||s===1?s:_L(i(s),e,r)}const bL=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,SL=t=>e=>1-t(1-e),CL=Qf(.33,1.53,.69,.99),Nb=SL(CL),kL=bL(Nb),EL=t=>(t*=2)<1?.5*Nb(t):.5*(2-Math.pow(2,-10*(t-1))),jb=t=>1-Math.sin(Math.acos(t)),RL=SL(jb),TL=bL(jb),pB=Qf(.42,0,1,1),gB=Qf(0,0,.58,1),PL=Qf(.42,0,.58,1),mB=t=>Array.isArray(t)&&typeof t[0]!="number",LL=t=>Array.isArray(t)&&typeof t[0]=="number",vB={linear:Rs,easeIn:pB,easeInOut:PL,easeOut:gB,circIn:jb,circInOut:TL,circOut:RL,backIn:Nb,backInOut:kL,backOut:CL,anticipate:EL},yB=t=>typeof t=="string",hE=t=>{if(LL(t)){Lb(t.length===4);const[e,n,r,i]=t;return Qf(e,n,r,i)}else if(yB(t))return vB[t];return t},mg=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"],fE={value:null,addProjectionMetrics:null};function wB(t,e){let n=new Set,r=new Set,i=!1,s=!1;const o=new WeakSet;let a={delta:0,timestamp:0,isProcessing:!1},l=0;function c(f){o.has(f)&&(h.schedule(f),t()),l++,f(a)}const h={schedule:(f,p=!1,g=!1)=>{const x=g&&i?n:r;return p&&o.add(f),x.has(f)||x.add(f),f},cancel:f=>{r.delete(f),o.delete(f)},process:f=>{if(a=f,i){s=!0;return}i=!0,[n,r]=[r,n],n.forEach(c),e&&fE.value&&fE.value.frameloop[e].push(l),l=0,n.clear(),i=!1,s&&(s=!1,h.process(f))}};return h}const xB=40;function ML(t,e){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},s=()=>n=!0,o=mg.reduce((_,T)=>(_[T]=wB(s,e?T:void 0),_),{}),{setup:a,read:l,resolveKeyframes:c,preUpdate:h,update:f,preRender:p,render:g,postRender:v}=o,x=()=>{const _=fa.useManualTiming?i.timestamp:performance.now();n=!1,fa.useManualTiming||(i.delta=r?1e3/60:Math.max(Math.min(_-i.timestamp,xB),1)),i.timestamp=_,i.isProcessing=!0,a.process(i),l.process(i),c.process(i),h.process(i),f.process(i),p.process(i),g.process(i),v.process(i),i.isProcessing=!1,n&&e&&(r=!1,t(x))},k=()=>{n=!0,r=!0,i.isProcessing||t(x)};return{schedule:mg.reduce((_,T)=>{const R=o[T];return _[T]=(L,M=!1,A=!1)=>(n||k(),R.schedule(L,M,A)),_},{}),cancel:_=>{for(let T=0;T<mg.length;T++)o[mg[T]].cancel(_)},state:i,steps:o}}const{schedule:Rn,cancel:wl,state:Vr,steps:Xy}=ML(typeof requestAnimationFrame<"u"?requestAnimationFrame:Rs,!0);let rm;function _B(){rm=void 0}const Ai={now:()=>(rm===void 0&&Ai.set(Vr.isProcessing||fa.useManualTiming?Vr.timestamp:performance.now()),rm),set:t=>{rm=t,queueMicrotask(_B)}},AL=t=>e=>typeof e=="string"&&e.startsWith(t),Ib=AL("--"),bB=AL("var(--"),Ob=t=>bB(t)?SB.test(t.split("/*")[0].trim()):!1,SB=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Cd={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Lf={...Cd,transform:t=>ha(0,1,t)},vg={...Cd,default:1},Gh=t=>Math.round(t*1e5)/1e5,Db=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function CB(t){return t==null}const kB=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Fb=(t,e)=>n=>!!(typeof n=="string"&&kB.test(n)&&n.startsWith(t)||e&&!CB(n)&&Object.prototype.hasOwnProperty.call(n,e)),NL=(t,e,n)=>r=>{if(typeof r!="string")return r;const[i,s,o,a]=r.match(Db);return{[t]:parseFloat(i),[e]:parseFloat(s),[n]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},EB=t=>ha(0,255,t),Zy={...Cd,transform:t=>Math.round(EB(t))},du={test:Fb("rgb","red"),parse:NL("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+Zy.transform(t)+", "+Zy.transform(e)+", "+Zy.transform(n)+", "+Gh(Lf.transform(r))+")"};function RB(t){let e="",n="",r="",i="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),i=t.substring(4,5),e+=e,n+=n,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const rx={test:Fb("#"),parse:RB,transform:du.transform},Jf=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Ha=Jf("deg"),Eo=Jf("%"),bt=Jf("px"),TB=Jf("vh"),PB=Jf("vw"),pE=(()=>({...Eo,parse:t=>Eo.parse(t)/100,transform:t=>Eo.transform(t*100)}))(),kc={test:Fb("hsl","hue"),parse:NL("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+Eo.transform(Gh(e))+", "+Eo.transform(Gh(n))+", "+Gh(Lf.transform(r))+")"},cr={test:t=>du.test(t)||rx.test(t)||kc.test(t),parse:t=>du.test(t)?du.parse(t):kc.test(t)?kc.parse(t):rx.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?du.transform(t):kc.transform(t),getAnimatableNone:t=>{const e=cr.parse(t);return e.alpha=0,cr.transform(e)}},LB=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function MB(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(Db))==null?void 0:e.length)||0)+(((n=t.match(LB))==null?void 0:n.length)||0)>0}const jL="number",IL="color",AB="var",NB="var(",gE="${}",jB=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Mf(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},i=[];let s=0;const a=e.replace(jB,l=>(cr.test(l)?(r.color.push(s),i.push(IL),n.push(cr.parse(l))):l.startsWith(NB)?(r.var.push(s),i.push(AB),n.push(l)):(r.number.push(s),i.push(jL),n.push(parseFloat(l))),++s,gE)).split(gE);return{values:n,split:a,indexes:r,types:i}}function OL(t){return Mf(t).values}function DL(t){const{split:e,types:n}=Mf(t),r=e.length;return i=>{let s="";for(let o=0;o<r;o++)if(s+=e[o],i[o]!==void 0){const a=n[o];a===jL?s+=Gh(i[o]):a===IL?s+=cr.transform(i[o]):s+=i[o]}return s}}const IB=t=>typeof t=="number"?0:cr.test(t)?cr.getAnimatableNone(t):t;function OB(t){const e=OL(t);return DL(t)(e.map(IB))}const xl={test:MB,parse:OL,createTransformer:DL,getAnimatableNone:OB};function Qy(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function DB({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let i=0,s=0,o=0;if(!e)i=s=o=n;else{const a=n<.5?n*(1+e):n+e-n*e,l=2*n-a;i=Qy(l,a,t+1/3),s=Qy(l,a,t),o=Qy(l,a,t-1/3)}return{red:Math.round(i*255),green:Math.round(s*255),blue:Math.round(o*255),alpha:r}}function Km(t,e){return n=>n>0?e:t}const On=(t,e,n)=>t+(e-t)*n,Jy=(t,e,n)=>{const r=t*t,i=n*(e*e-r)+r;return i<0?0:Math.sqrt(i)},FB=[rx,du,kc],BB=t=>FB.find(e=>e.test(t));function mE(t){const e=BB(t);if(!e)return!1;let n=e.parse(t);return e===kc&&(n=DB(n)),n}const vE=(t,e)=>{const n=mE(t),r=mE(e);if(!n||!r)return Km(t,e);const i={...n};return s=>(i.red=Jy(n.red,r.red,s),i.green=Jy(n.green,r.green,s),i.blue=Jy(n.blue,r.blue,s),i.alpha=On(n.alpha,r.alpha,s),du.transform(i))},ix=new Set(["none","hidden"]);function $B(t,e){return ix.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function zB(t,e){return n=>On(t,e,n)}function Bb(t){return typeof t=="number"?zB:typeof t=="string"?Ob(t)?Km:cr.test(t)?vE:WB:Array.isArray(t)?FL:typeof t=="object"?cr.test(t)?vE:UB:Km}function FL(t,e){const n=[...t],r=n.length,i=t.map((s,o)=>Bb(s)(s,e[o]));return s=>{for(let o=0;o<r;o++)n[o]=i[o](s);return n}}function UB(t,e){const n={...t,...e},r={};for(const i in n)t[i]!==void 0&&e[i]!==void 0&&(r[i]=Bb(t[i])(t[i],e[i]));return i=>{for(const s in r)n[s]=r[s](i);return n}}function VB(t,e){const n=[],r={color:0,var:0,number:0};for(let i=0;i<e.values.length;i++){const s=e.types[i],o=t.indexes[s][r[s]],a=t.values[o]??0;n[i]=a,r[s]++}return n}const WB=(t,e)=>{const n=xl.createTransformer(e),r=Mf(t),i=Mf(e);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?ix.has(t)&&!i.values.length||ix.has(e)&&!r.values.length?$B(t,e):Zf(FL(VB(r,i),i.values),n):Km(t,e)};function BL(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?On(t,e,n):Bb(t)(t,e)}const HB=t=>{const e=({timestamp:n})=>t(n);return{start:(n=!0)=>Rn.update(e,n),stop:()=>wl(e),now:()=>Vr.isProcessing?Vr.timestamp:Ai.now()}},$L=(t,e,n=10)=>{let r="";const i=Math.max(Math.round(e/n),2);for(let s=0;s<i;s++)r+=Math.round(t(s/(i-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},Xm=2e4;function $b(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<Xm;)e+=n,r=t.next(e);return e>=Xm?1/0:e}function GB(t,e=100,n){const r=n({...t,keyframes:[0,e]}),i=Math.min($b(r),Xm);return{type:"keyframes",ease:s=>r.next(i*s).value/e,duration:Cs(i)}}const qB=5;function zL(t,e,n){const r=Math.max(e-qB,0);return xL(n-t(r),e-r)}const qn={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},e1=.001;function YB({duration:t=qn.duration,bounce:e=qn.bounce,velocity:n=qn.velocity,mass:r=qn.mass}){let i,s,o=1-e;o=ha(qn.minDamping,qn.maxDamping,o),t=ha(qn.minDuration,qn.maxDuration,Cs(t)),o<1?(i=c=>{const h=c*o,f=h*t,p=h-n,g=sx(c,o),v=Math.exp(-f);return e1-p/g*v},s=c=>{const f=c*o*t,p=f*n+n,g=Math.pow(o,2)*Math.pow(c,2)*t,v=Math.exp(-f),x=sx(Math.pow(c,2),o);return(-i(c)+e1>0?-1:1)*((p-g)*v)/x}):(i=c=>{const h=Math.exp(-c*t),f=(c-n)*t+1;return-e1+h*f},s=c=>{const h=Math.exp(-c*t),f=(n-c)*(t*t);return h*f});const a=5/t,l=XB(i,s,a);if(t=ko(t),isNaN(l))return{stiffness:qn.stiffness,damping:qn.damping,duration:t};{const c=Math.pow(l,2)*r;return{stiffness:c,damping:o*2*Math.sqrt(r*c),duration:t}}}const KB=12;function XB(t,e,n){let r=n;for(let i=1;i<KB;i++)r=r-t(r)/e(r);return r}function sx(t,e){return t*Math.sqrt(1-e*e)}const ZB=["duration","bounce"],QB=["stiffness","damping","mass"];function yE(t,e){return e.some(n=>t[n]!==void 0)}function JB(t){let e={velocity:qn.velocity,stiffness:qn.stiffness,damping:qn.damping,mass:qn.mass,isResolvedFromDuration:!1,...t};if(!yE(t,QB)&&yE(t,ZB))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),i=r*r,s=2*ha(.05,1,1-(t.bounce||0))*Math.sqrt(i);e={...e,mass:qn.mass,stiffness:i,damping:s}}else{const n=YB(t);e={...e,...n,mass:qn.mass},e.isResolvedFromDuration=!0}return e}function Zm(t=qn.visualDuration,e=qn.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:i}=n;const s=n.keyframes[0],o=n.keyframes[n.keyframes.length-1],a={done:!1,value:s},{stiffness:l,damping:c,mass:h,duration:f,velocity:p,isResolvedFromDuration:g}=JB({...n,velocity:-Cs(n.velocity||0)}),v=p||0,x=c/(2*Math.sqrt(l*h)),k=o-s,C=Cs(Math.sqrt(l/h)),b=Math.abs(k)<5;r||(r=b?qn.restSpeed.granular:qn.restSpeed.default),i||(i=b?qn.restDelta.granular:qn.restDelta.default);let _;if(x<1){const R=sx(C,x);_=L=>{const M=Math.exp(-x*C*L);return o-M*((v+x*C*k)/R*Math.sin(R*L)+k*Math.cos(R*L))}}else if(x===1)_=R=>o-Math.exp(-C*R)*(k+(v+C*k)*R);else{const R=C*Math.sqrt(x*x-1);_=L=>{const M=Math.exp(-x*C*L),A=Math.min(R*L,300);return o-M*((v+x*C*k)*Math.sinh(A)+R*k*Math.cosh(A))/R}}const T={calculatedDuration:g&&f||null,next:R=>{const L=_(R);if(g)a.done=R>=f;else{let M=R===0?v:0;x<1&&(M=R===0?ko(v):zL(_,R,L));const A=Math.abs(M)<=r,$=Math.abs(o-L)<=i;a.done=A&&$}return a.value=a.done?o:L,a},toString:()=>{const R=Math.min($b(T),Xm),L=$L(M=>T.next(R*M).value,R,30);return R+"ms "+L},toTransition:()=>{}};return T}Zm.applyToOptions=t=>{const e=GB(t,100,Zm);return t.ease=e.ease,t.duration=ko(e.duration),t.type="keyframes",t};function ox({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:s=500,modifyTarget:o,min:a,max:l,restDelta:c=.5,restSpeed:h}){const f=t[0],p={done:!1,value:f},g=A=>a!==void 0&&A<a||l!==void 0&&A>l,v=A=>a===void 0?l:l===void 0||Math.abs(a-A)<Math.abs(l-A)?a:l;let x=n*e;const k=f+x,C=o===void 0?k:o(k);C!==k&&(x=C-f);const b=A=>-x*Math.exp(-A/r),_=A=>C+b(A),T=A=>{const $=b(A),j=_(A);p.done=Math.abs($)<=c,p.value=p.done?C:j};let R,L;const M=A=>{g(p.value)&&(R=A,L=Zm({keyframes:[p.value,v(p.value)],velocity:zL(_,A,p.value),damping:i,stiffness:s,restDelta:c,restSpeed:h}))};return M(0),{calculatedDuration:null,next:A=>{let $=!1;return!L&&R===void 0&&($=!0,T(A),M(A)),R!==void 0&&A>=R?L.next(A-R):(!$&&T(A),p)}}}function e$(t,e,n){const r=[],i=n||fa.mix||BL,s=t.length-1;for(let o=0;o<s;o++){let a=i(t[o],t[o+1]);if(e){const l=Array.isArray(e)?e[o]||Rs:e;a=Zf(l,a)}r.push(a)}return r}function t$(t,e,{clamp:n=!0,ease:r,mixer:i}={}){const s=t.length;if(Lb(s===e.length),s===1)return()=>e[0];if(s===2&&e[0]===e[1])return()=>e[1];const o=t[0]===t[1];t[0]>t[s-1]&&(t=[...t].reverse(),e=[...e].reverse());const a=e$(e,r,i),l=a.length,c=h=>{if(o&&h<t[0])return e[0];let f=0;if(l>1)for(;f<t.length-2&&!(h<t[f+1]);f++);const p=Pf(t[f],t[f+1],h);return a[f](p)};return n?h=>c(ha(t[0],t[s-1],h)):c}function n$(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const i=Pf(0,e,r);t.push(On(n,1,i))}}function r$(t){const e=[0];return n$(e,t.length-1),e}function i$(t,e){return t.map(n=>n*e)}function s$(t,e){return t.map(()=>e||PL).splice(0,t.length-1)}function qh({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const i=mB(r)?r.map(hE):hE(r),s={done:!1,value:e[0]},o=i$(n&&n.length===e.length?n:r$(e),t),a=t$(o,e,{ease:Array.isArray(i)?i:s$(e,i)});return{calculatedDuration:t,next:l=>(s.value=a(l),s.done=l>=t,s)}}const o$=t=>t!==null;function zb(t,{repeat:e,repeatType:n="loop"},r,i=1){const s=t.filter(o$),a=i<0||e&&n!=="loop"&&e%2===1?0:s.length-1;return!a||r===void 0?s[a]:r}const a$={decay:ox,inertia:ox,tween:qh,keyframes:qh,spring:Zm};function UL(t){typeof t.type=="string"&&(t.type=a$[t.type])}class Ub{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,n){return this.finished.then(e,n)}}const l$=t=>t/100;class Vb extends Ub{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var r,i;const{motionValue:n}=this.options;n&&n.updatedAt!==Ai.now()&&this.tick(Ai.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(i=(r=this.options).onStop)==null||i.call(r))},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;UL(e);const{type:n=qh,repeat:r=0,repeatDelay:i=0,repeatType:s,velocity:o=0}=e;let{keyframes:a}=e;const l=n||qh;l!==qh&&typeof a[0]!="number"&&(this.mixKeyframes=Zf(l$,BL(a[0],a[1])),a=[0,100]);const c=l({...e,keyframes:a});s==="mirror"&&(this.mirroredGenerator=l({...e,keyframes:[...a].reverse(),velocity:-o})),c.calculatedDuration===null&&(c.calculatedDuration=$b(c));const{calculatedDuration:h}=c;this.calculatedDuration=h,this.resolvedDuration=h+i,this.totalDuration=this.resolvedDuration*(r+1)-i,this.generator=c}updateTime(e){const n=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(e,n=!1){const{generator:r,totalDuration:i,mixKeyframes:s,mirroredGenerator:o,resolvedDuration:a,calculatedDuration:l}=this;if(this.startTime===null)return r.next(0);const{delay:c=0,keyframes:h,repeat:f,repeatType:p,repeatDelay:g,type:v,onUpdate:x,finalKeyframe:k}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-i/this.speed,this.startTime)),n?this.currentTime=e:this.updateTime(e);const C=this.currentTime-c*(this.playbackSpeed>=0?1:-1),b=this.playbackSpeed>=0?C<0:C>i;this.currentTime=Math.max(C,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=i);let _=this.currentTime,T=r;if(f){const A=Math.min(this.currentTime,i)/a;let $=Math.floor(A),j=A%1;!j&&A>=1&&(j=1),j===1&&$--,$=Math.min($,f+1),!!($%2)&&(p==="reverse"?(j=1-j,g&&(j-=g/a)):p==="mirror"&&(T=o)),_=ha(0,1,j)*a}const R=b?{done:!1,value:h[0]}:T.next(_);s&&(R.value=s(R.value));let{done:L}=R;!b&&l!==null&&(L=this.playbackSpeed>=0?this.currentTime>=i:this.currentTime<=0);const M=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&L);return M&&v!==ox&&(R.value=zb(h,this.options,k,this.speed)),x&&x(R.value),M&&this.finish(),R}then(e,n){return this.finished.then(e,n)}get duration(){return Cs(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+Cs(e)}get time(){return Cs(this.currentTime)}set time(e){var n;e=ko(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),(n=this.driver)==null||n.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(Ai.now());const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=Cs(this.currentTime))}play(){var i,s;if(this.isStopped)return;const{driver:e=HB,startTime:n}=this.options;this.driver||(this.driver=e(o=>this.tick(o))),(s=(i=this.options).onPlay)==null||s.call(i);const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=n??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Ai.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var e,n;this.notifyFinished(),this.teardown(),this.state="finished",(n=(e=this.options).onComplete)==null||n.call(e)}cancel(){var e,n;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(n=(e=this.options).onCancel)==null||n.call(e)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){var n;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(n=this.driver)==null||n.stop(),e.observe(this)}}function u$(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const hu=t=>t*180/Math.PI,ax=t=>{const e=hu(Math.atan2(t[1],t[0]));return lx(e)},c$={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:ax,rotateZ:ax,skewX:t=>hu(Math.atan(t[1])),skewY:t=>hu(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},lx=t=>(t=t%360,t<0&&(t+=360),t),wE=ax,xE=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),_E=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),d$={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:xE,scaleY:_E,scale:t=>(xE(t)+_E(t))/2,rotateX:t=>lx(hu(Math.atan2(t[6],t[5]))),rotateY:t=>lx(hu(Math.atan2(-t[2],t[0]))),rotateZ:wE,rotate:wE,skewX:t=>hu(Math.atan(t[4])),skewY:t=>hu(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function ux(t){return t.includes("scale")?1:0}function cx(t,e){if(!t||t==="none")return ux(e);const n=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,i;if(n)r=d$,i=n;else{const a=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=c$,i=a}if(!i)return ux(e);const s=r[e],o=i[1].split(",").map(f$);return typeof s=="function"?s(o):o[s]}const h$=(t,e)=>{const{transform:n="none"}=getComputedStyle(t);return cx(n,e)};function f$(t){return parseFloat(t.trim())}const kd=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Ed=(()=>new Set(kd))(),bE=t=>t===Cd||t===bt,p$=new Set(["x","y","z"]),g$=kd.filter(t=>!p$.has(t));function m$(t){const e=[];return g$.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const vu={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>cx(e,"x"),y:(t,{transform:e})=>cx(e,"y")};vu.translateX=vu.x;vu.translateY=vu.y;const yu=new Set;let dx=!1,hx=!1,fx=!1;function VL(){if(hx){const t=Array.from(yu).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const i=m$(r);i.length&&(n.set(r,i),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const i=n.get(r);i&&i.forEach(([s,o])=>{var a;(a=r.getValue(s))==null||a.set(o)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}hx=!1,dx=!1,yu.forEach(t=>t.complete(fx)),yu.clear()}function WL(){yu.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(hx=!0)})}function v$(){fx=!0,WL(),VL(),fx=!1}class Wb{constructor(e,n,r,i,s,o=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=i,this.element=s,this.isAsync=o}scheduleResolve(){this.state="scheduled",this.isAsync?(yu.add(this),dx||(dx=!0,Rn.read(WL),Rn.resolveKeyframes(VL))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:i}=this;if(e[0]===null){const s=i==null?void 0:i.get(),o=e[e.length-1];if(s!==void 0)e[0]=s;else if(r&&n){const a=r.readValue(n,o);a!=null&&(e[0]=a)}e[0]===void 0&&(e[0]=o),i&&s===void 0&&i.set(e[0])}u$(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),yu.delete(this)}cancel(){this.state==="scheduled"&&(yu.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const y$=t=>t.startsWith("--");function w$(t,e,n){y$(e)?t.style.setProperty(e,n):t.style[e]=n}const x$=Mb(()=>window.ScrollTimeline!==void 0),_$={};function b$(t,e){const n=Mb(t);return()=>_$[e]??n()}const HL=b$(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Ch=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,SE={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Ch([0,.65,.55,1]),circOut:Ch([.55,0,1,.45]),backIn:Ch([.31,.01,.66,-.59]),backOut:Ch([.33,1.53,.69,.99])};function GL(t,e){if(t)return typeof t=="function"?HL()?$L(t,e):"ease-out":LL(t)?Ch(t):Array.isArray(t)?t.map(n=>GL(n,e)||SE.easeOut):SE[t]}function S$(t,e,n,{delay:r=0,duration:i=300,repeat:s=0,repeatType:o="loop",ease:a="easeOut",times:l}={},c=void 0){const h={[e]:n};l&&(h.offset=l);const f=GL(a,i);Array.isArray(f)&&(h.easing=f);const p={delay:r,duration:i,easing:Array.isArray(f)?"linear":f,fill:"both",iterations:s+1,direction:o==="reverse"?"alternate":"normal"};return c&&(p.pseudoElement=c),t.animate(h,p)}function qL(t){return typeof t=="function"&&"applyToOptions"in t}function C$({type:t,...e}){return qL(t)&&HL()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class k$ extends Ub{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:n,name:r,keyframes:i,pseudoElement:s,allowFlatten:o=!1,finalKeyframe:a,onComplete:l}=e;this.isPseudoElement=!!s,this.allowFlatten=o,this.options=e,Lb(typeof e.type!="string");const c=C$(e);this.animation=S$(n,r,i,c,s),c.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!s){const h=zb(i,this.options,a,this.speed);this.updateMotionValue?this.updateMotionValue(h):w$(n,r,h),this.animation.cancel()}l==null||l(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var e,n;(n=(e=this.animation).finish)==null||n.call(e)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var e,n;this.isPseudoElement||(n=(e=this.animation).commitStyles)==null||n.call(e)}get duration(){var n,r;const e=((r=(n=this.animation.effect)==null?void 0:n.getComputedTiming)==null?void 0:r.call(n).duration)||0;return Cs(Number(e))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+Cs(e)}get time(){return Cs(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=ko(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:n}){var r;return this.allowFlatten&&((r=this.animation.effect)==null||r.updateTiming({easing:"linear"})),this.animation.onfinish=null,e&&x$()?(this.animation.timeline=e,Rs):n(this)}}const YL={anticipate:EL,backInOut:kL,circInOut:TL};function E$(t){return t in YL}function R$(t){typeof t.ease=="string"&&E$(t.ease)&&(t.ease=YL[t.ease])}const CE=10;class T$ extends k${constructor(e){R$(e),UL(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:n,onUpdate:r,onComplete:i,element:s,...o}=this.options;if(!n)return;if(e!==void 0){n.set(e);return}const a=new Vb({...o,autoplay:!1}),l=ko(this.finishedTime??this.time);n.setWithVelocity(a.sample(l-CE).value,a.sample(l).value,CE),a.stop()}}const kE=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(xl.test(t)||t==="0")&&!t.startsWith("url("));function P$(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function L$(t,e,n,r){const i=t[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const s=t[t.length-1],o=kE(i,e),a=kE(s,e);return!o||!a?!1:P$(t)||(n==="spring"||qL(n))&&r}function px(t){t.duration=0,t.type="keyframes"}const M$=new Set(["opacity","clipPath","filter","transform"]),A$=Mb(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function N$(t){var h;const{motionValue:e,name:n,repeatDelay:r,repeatType:i,damping:s,type:o}=t;if(!(((h=e==null?void 0:e.owner)==null?void 0:h.current)instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:c}=e.owner.getProps();return A$()&&n&&M$.has(n)&&(n!=="transform"||!c)&&!l&&!r&&i!=="mirror"&&s!==0&&o!=="inertia"}const j$=40;class I$ extends Ub{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:i=0,repeatDelay:s=0,repeatType:o="loop",keyframes:a,name:l,motionValue:c,element:h,...f}){var v;super(),this.stop=()=>{var x,k;this._animation&&(this._animation.stop(),(x=this.stopTimeline)==null||x.call(this)),(k=this.keyframeResolver)==null||k.cancel()},this.createdAt=Ai.now();const p={autoplay:e,delay:n,type:r,repeat:i,repeatDelay:s,repeatType:o,name:l,motionValue:c,element:h,...f},g=(h==null?void 0:h.KeyframeResolver)||Wb;this.keyframeResolver=new g(a,(x,k,C)=>this.onKeyframesResolved(x,k,p,!C),l,c,h),(v=this.keyframeResolver)==null||v.scheduleResolve()}onKeyframesResolved(e,n,r,i){this.keyframeResolver=void 0;const{name:s,type:o,velocity:a,delay:l,isHandoff:c,onUpdate:h}=r;this.resolvedAt=Ai.now(),L$(e,s,o,a)||((fa.instantAnimations||!l)&&(h==null||h(zb(e,r,n))),e[0]=e[e.length-1],px(r),r.repeat=0);const p={startTime:i?this.resolvedAt?this.resolvedAt-this.createdAt>j$?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...r,keyframes:e},g=!c&&N$(p)?new T$({...p,element:p.motionValue.owner.current}):new Vb(p);g.finished.then(()=>this.notifyFinished()).catch(Rs),this.pendingTimeline&&(this.stopTimeline=g.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=g}get finished(){return this._animation?this.animation.finished:this._finished}then(e,n){return this.finished.finally(e).then(()=>{})}get animation(){var e;return this._animation||((e=this.keyframeResolver)==null||e.resume(),v$()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var e;this._animation&&this.animation.cancel(),(e=this.keyframeResolver)==null||e.cancel()}}const O$=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function D$(t){const e=O$.exec(t);if(!e)return[,];const[,n,r,i]=e;return[`--${n??r}`,i]}function KL(t,e,n=1){const[r,i]=D$(t);if(!r)return;const s=window.getComputedStyle(e).getPropertyValue(r);if(s){const o=s.trim();return vL(o)?parseFloat(o):o}return Ob(i)?KL(i,e,n+1):i}function Hb(t,e){return(t==null?void 0:t[e])??(t==null?void 0:t.default)??t}const XL=new Set(["width","height","top","left","right","bottom",...kd]),F$={test:t=>t==="auto",parse:t=>t},ZL=t=>e=>e.test(t),QL=[Cd,bt,Eo,Ha,PB,TB,F$],EE=t=>QL.find(ZL(t));function B$(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||wL(t):!0}const $$=new Set(["brightness","contrast","saturate","opacity"]);function z$(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(Db)||[];if(!r)return t;const i=n.replace(r,"");let s=$$.has(e)?1:0;return r!==n&&(s*=100),e+"("+s+i+")"}const U$=/\b([a-z-]*)\(.*?\)/gu,gx={...xl,getAnimatableNone:t=>{const e=t.match(U$);return e?e.map(z$).join(" "):t}},RE={...Cd,transform:Math.round},V$={rotate:Ha,rotateX:Ha,rotateY:Ha,rotateZ:Ha,scale:vg,scaleX:vg,scaleY:vg,scaleZ:vg,skew:Ha,skewX:Ha,skewY:Ha,distance:bt,translateX:bt,translateY:bt,translateZ:bt,x:bt,y:bt,z:bt,perspective:bt,transformPerspective:bt,opacity:Lf,originX:pE,originY:pE,originZ:bt},Gb={borderWidth:bt,borderTopWidth:bt,borderRightWidth:bt,borderBottomWidth:bt,borderLeftWidth:bt,borderRadius:bt,radius:bt,borderTopLeftRadius:bt,borderTopRightRadius:bt,borderBottomRightRadius:bt,borderBottomLeftRadius:bt,width:bt,maxWidth:bt,height:bt,maxHeight:bt,top:bt,right:bt,bottom:bt,left:bt,padding:bt,paddingTop:bt,paddingRight:bt,paddingBottom:bt,paddingLeft:bt,margin:bt,marginTop:bt,marginRight:bt,marginBottom:bt,marginLeft:bt,backgroundPositionX:bt,backgroundPositionY:bt,...V$,zIndex:RE,fillOpacity:Lf,strokeOpacity:Lf,numOctaves:RE},W$={...Gb,color:cr,backgroundColor:cr,outlineColor:cr,fill:cr,stroke:cr,borderColor:cr,borderTopColor:cr,borderRightColor:cr,borderBottomColor:cr,borderLeftColor:cr,filter:gx,WebkitFilter:gx},JL=t=>W$[t];function eM(t,e){let n=JL(t);return n!==gx&&(n=xl),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const H$=new Set(["auto","none","0"]);function G$(t,e,n){let r=0,i;for(;r<t.length&&!i;){const s=t[r];typeof s=="string"&&!H$.has(s)&&Mf(s).values.length&&(i=t[r]),r++}if(i&&n)for(const s of e)t[s]=eM(n,i)}class q$ extends Wb{constructor(e,n,r,i,s){super(e,n,r,i,s,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let l=0;l<e.length;l++){let c=e[l];if(typeof c=="string"&&(c=c.trim(),Ob(c))){const h=KL(c,n.current);h!==void 0&&(e[l]=h),l===e.length-1&&(this.finalKeyframe=c)}}if(this.resolveNoneKeyframes(),!XL.has(r)||e.length!==2)return;const[i,s]=e,o=EE(i),a=EE(s);if(o!==a)if(bE(o)&&bE(a))for(let l=0;l<e.length;l++){const c=e[l];typeof c=="string"&&(e[l]=parseFloat(c))}else vu[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let i=0;i<e.length;i++)(e[i]===null||B$(e[i]))&&r.push(i);r.length&&G$(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=vu[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&e.getValue(r,i).jump(i,!1)}measureEndState(){var a;const{element:e,name:n,unresolvedKeyframes:r}=this;if(!e||!e.current)return;const i=e.getValue(n);i&&i.jump(this.measuredOrigin,!1);const s=r.length-1,o=r[s];r[s]=vu[n](e.measureViewportBox(),window.getComputedStyle(e.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),(a=this.removedTransforms)!=null&&a.length&&this.removedTransforms.forEach(([l,c])=>{e.getValue(l).set(c)}),this.resolveNoneKeyframes()}}function Y$(t,e,n){if(t instanceof EventTarget)return[t];if(typeof t=="string"){let r=document;e&&(r=e.current);const i=(n==null?void 0:n[t])??r.querySelectorAll(t);return i?Array.from(i):[]}return Array.from(t)}const tM=(t,e)=>e&&typeof t=="number"?e.transform(t):t;function nM(t){return yL(t)&&"offsetHeight"in t}const TE=30,K$=t=>!isNaN(parseFloat(t));class X${constructor(e,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{var s;const i=Ai.now();if(this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&((s=this.events.change)==null||s.notify(this.current),this.dependents))for(const o of this.dependents)o.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=Ai.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=K$(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new Ab);const r=this.events[e].add(n);return e==="change"?()=>{r(),Rn.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var e;(e=this.events.change)==null||e.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Ai.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>TE)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,TE);return xL(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var e,n;(e=this.dependents)==null||e.clear(),(n=this.events.destroy)==null||n.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function td(t,e){return new X$(t,e)}const{schedule:qb,cancel:Nte}=ML(queueMicrotask,!1),Ws={x:!1,y:!1};function rM(){return Ws.x||Ws.y}function Z$(t){return t==="x"||t==="y"?Ws[t]?null:(Ws[t]=!0,()=>{Ws[t]=!1}):Ws.x||Ws.y?null:(Ws.x=Ws.y=!0,()=>{Ws.x=Ws.y=!1})}function iM(t,e){const n=Y$(t),r=new AbortController,i={passive:!0,...e,signal:r.signal};return[n,i,()=>r.abort()]}function PE(t){return!(t.pointerType==="touch"||rM())}function Q$(t,e,n={}){const[r,i,s]=iM(t,n),o=a=>{if(!PE(a))return;const{target:l}=a,c=e(l,a);if(typeof c!="function"||!l)return;const h=f=>{PE(f)&&(c(f),l.removeEventListener("pointerleave",h))};l.addEventListener("pointerleave",h,i)};return r.forEach(a=>{a.addEventListener("pointerenter",o,i)}),s}const sM=(t,e)=>e?t===e?!0:sM(t,e.parentElement):!1,Yb=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,J$=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function ez(t){return J$.has(t.tagName)||t.tabIndex!==-1}const im=new WeakSet;function LE(t){return e=>{e.key==="Enter"&&t(e)}}function t1(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const tz=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=LE(()=>{if(im.has(n))return;t1(n,"down");const i=LE(()=>{t1(n,"up")}),s=()=>t1(n,"cancel");n.addEventListener("keyup",i,e),n.addEventListener("blur",s,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function ME(t){return Yb(t)&&!rM()}function nz(t,e,n={}){const[r,i,s]=iM(t,n),o=a=>{const l=a.currentTarget;if(!ME(a))return;im.add(l);const c=e(l,a),h=(g,v)=>{window.removeEventListener("pointerup",f),window.removeEventListener("pointercancel",p),im.has(l)&&im.delete(l),ME(g)&&typeof c=="function"&&c(g,{success:v})},f=g=>{h(g,l===window||l===document||n.useGlobalTarget||sM(l,g.target))},p=g=>{h(g,!1)};window.addEventListener("pointerup",f,i),window.addEventListener("pointercancel",p,i)};return r.forEach(a=>{(n.useGlobalTarget?window:a).addEventListener("pointerdown",o,i),nM(a)&&(a.addEventListener("focus",c=>tz(c,i)),!ez(a)&&!a.hasAttribute("tabindex")&&(a.tabIndex=0))}),s}function oM(t){return yL(t)&&"ownerSVGElement"in t}function rz(t){return oM(t)&&t.tagName==="svg"}const li=t=>!!(t&&t.getVelocity),iz=[...QL,cr,xl],sz=t=>iz.find(ZL(t)),Kb=y.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function AE(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function oz(...t){return e=>{let n=!1;const r=t.map(i=>{const s=AE(i,e);return!n&&typeof s=="function"&&(n=!0),s});if(n)return()=>{for(let i=0;i<r.length;i++){const s=r[i];typeof s=="function"?s():AE(t[i],null)}}}}function az(...t){return y.useCallback(oz(...t),t)}class lz extends y.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=n.offsetParent,i=nM(r)&&r.offsetWidth||0,s=this.props.sizeRef.current;s.height=n.offsetHeight||0,s.width=n.offsetWidth||0,s.top=n.offsetTop,s.left=n.offsetLeft,s.right=i-s.width-s.left}return null}componentDidUpdate(){}render(){return this.props.children}}function uz({children:t,isPresent:e,anchorX:n,root:r}){const i=y.useId(),s=y.useRef(null),o=y.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:a}=y.useContext(Kb),l=az(s,t==null?void 0:t.ref);return y.useInsertionEffect(()=>{const{width:c,height:h,top:f,left:p,right:g}=o.current;if(e||!s.current||!c||!h)return;const v=n==="left"?`left: ${p}`:`right: ${g}`;s.current.dataset.motionPopId=i;const x=document.createElement("style");a&&(x.nonce=a);const k=r??document.head;return k.appendChild(x),x.sheet&&x.sheet.insertRule(`
          [data-motion-pop-id="${i}"] {
            position: absolute !important;
            width: ${c}px !important;
            height: ${h}px !important;
            ${v}px !important;
            top: ${f}px !important;
          }
        `),()=>{k.contains(x)&&k.removeChild(x)}},[e]),w.jsx(lz,{isPresent:e,childRef:s,sizeRef:o,children:y.cloneElement(t,{ref:l})})}const cz=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:i,presenceAffectsLayout:s,mode:o,anchorX:a,root:l})=>{const c=Eb(dz),h=y.useId();let f=!0,p=y.useMemo(()=>(f=!1,{id:h,initial:e,isPresent:n,custom:i,onExitComplete:g=>{c.set(g,!0);for(const v of c.values())if(!v)return;r&&r()},register:g=>(c.set(g,!1),()=>c.delete(g))}),[n,c,r]);return s&&f&&(p={...p}),y.useMemo(()=>{c.forEach((g,v)=>c.set(v,!1))},[n]),y.useEffect(()=>{!n&&!c.size&&r&&r()},[n]),o==="popLayout"&&(t=w.jsx(uz,{isPresent:n,anchorX:a,root:l,children:t})),w.jsx(z0.Provider,{value:p,children:t})};function dz(){return new Map}function aM(t=!0){const e=y.useContext(z0);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:i}=e,s=y.useId();y.useEffect(()=>{if(t)return i(s)},[t]);const o=y.useCallback(()=>t&&r&&r(s),[s,r,t]);return!n&&r?[!1,o]:[!0]}const yg=t=>t.key||"";function NE(t){const e=[];return y.Children.forEach(t,n=>{y.isValidElement(n)&&e.push(n)}),e}const lM=({children:t,custom:e,initial:n=!0,onExitComplete:r,presenceAffectsLayout:i=!0,mode:s="sync",propagate:o=!1,anchorX:a="left",root:l})=>{const[c,h]=aM(o),f=y.useMemo(()=>NE(t),[t]),p=o&&!c?[]:f.map(yg),g=y.useRef(!0),v=y.useRef(f),x=Eb(()=>new Map),[k,C]=y.useState(f),[b,_]=y.useState(f);mL(()=>{g.current=!1,v.current=f;for(let L=0;L<b.length;L++){const M=yg(b[L]);p.includes(M)?x.delete(M):x.get(M)!==!0&&x.set(M,!1)}},[b,p.length,p.join("-")]);const T=[];if(f!==k){let L=[...f];for(let M=0;M<b.length;M++){const A=b[M],$=yg(A);p.includes($)||(L.splice(M,0,A),T.push(A))}return s==="wait"&&T.length&&(L=T),_(NE(L)),C(f),null}const{forceRender:R}=y.useContext(kb);return w.jsx(w.Fragment,{children:b.map(L=>{const M=yg(L),A=o&&!c?!1:f===b||p.includes(M),$=()=>{if(x.has(M))x.set(M,!0);else return;let j=!0;x.forEach(V=>{V||(j=!1)}),j&&(R==null||R(),_(v.current),o&&(h==null||h()),r&&r())};return w.jsx(cz,{isPresent:A,initial:!g.current||n?void 0:!1,custom:e,presenceAffectsLayout:i,mode:s,root:l,onExitComplete:A?void 0:$,anchorX:a,children:L},M)})})},uM=y.createContext({strict:!1}),jE={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},nd={};for(const t in jE)nd[t]={isEnabled:e=>jE[t].some(n=>!!e[n])};function hz(t){for(const e in t)nd[e]={...nd[e],...t[e]}}const fz=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Qm(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||fz.has(t)}let cM=t=>!Qm(t);function pz(t){typeof t=="function"&&(cM=e=>e.startsWith("on")?!Qm(e):t(e))}try{pz(require("@emotion/is-prop-valid").default)}catch{}function gz(t,e,n){const r={};for(const i in t)i==="values"&&typeof t.values=="object"||(cM(i)||n===!0&&Qm(i)||!e&&!Qm(i)||t.draggable&&i.startsWith("onDrag"))&&(r[i]=t[i]);return r}const U0=y.createContext({});function V0(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function Af(t){return typeof t=="string"||Array.isArray(t)}const Xb=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Zb=["initial",...Xb];function W0(t){return V0(t.animate)||Zb.some(e=>Af(t[e]))}function dM(t){return!!(W0(t)||t.variants)}function mz(t,e){if(W0(t)){const{initial:n,animate:r}=t;return{initial:n===!1||Af(n)?n:void 0,animate:Af(r)?r:void 0}}return t.inherit!==!1?e:{}}function vz(t){const{initial:e,animate:n}=mz(t,y.useContext(U0));return y.useMemo(()=>({initial:e,animate:n}),[IE(e),IE(n)])}function IE(t){return Array.isArray(t)?t.join(" "):t}const Nf={};function yz(t){for(const e in t)Nf[e]=t[e],Ib(e)&&(Nf[e].isCSSVariable=!0)}function hM(t,{layout:e,layoutId:n}){return Ed.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!Nf[t]||t==="opacity")}const wz={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},xz=kd.length;function _z(t,e,n){let r="",i=!0;for(let s=0;s<xz;s++){const o=kd[s],a=t[o];if(a===void 0)continue;let l=!0;if(typeof a=="number"?l=a===(o.startsWith("scale")?1:0):l=parseFloat(a)===0,!l||n){const c=tM(a,Gb[o]);if(!l){i=!1;const h=wz[o]||o;r+=`${h}(${c}) `}n&&(e[o]=c)}}return r=r.trim(),n?r=n(e,i?"":r):i&&(r="none"),r}function Qb(t,e,n){const{style:r,vars:i,transformOrigin:s}=t;let o=!1,a=!1;for(const l in e){const c=e[l];if(Ed.has(l)){o=!0;continue}else if(Ib(l)){i[l]=c;continue}else{const h=tM(c,Gb[l]);l.startsWith("origin")?(a=!0,s[l]=h):r[l]=h}}if(e.transform||(o||n?r.transform=_z(e,t.transform,n):r.transform&&(r.transform="none")),a){const{originX:l="50%",originY:c="50%",originZ:h=0}=s;r.transformOrigin=`${l} ${c} ${h}`}}const Jb=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function fM(t,e,n){for(const r in e)!li(e[r])&&!hM(r,n)&&(t[r]=e[r])}function bz({transformTemplate:t},e){return y.useMemo(()=>{const n=Jb();return Qb(n,e,t),Object.assign({},n.vars,n.style)},[e])}function Sz(t,e){const n=t.style||{},r={};return fM(r,n,t),Object.assign(r,bz(t,e)),r}function Cz(t,e){const n={},r=Sz(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}const kz={offset:"stroke-dashoffset",array:"stroke-dasharray"},Ez={offset:"strokeDashoffset",array:"strokeDasharray"};function Rz(t,e,n=1,r=0,i=!0){t.pathLength=1;const s=i?kz:Ez;t[s.offset]=bt.transform(-r);const o=bt.transform(e),a=bt.transform(n);t[s.array]=`${o} ${a}`}function pM(t,{attrX:e,attrY:n,attrScale:r,pathLength:i,pathSpacing:s=1,pathOffset:o=0,...a},l,c,h){if(Qb(t,a,c),l){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:f,style:p}=t;f.transform&&(p.transform=f.transform,delete f.transform),(p.transform||f.transformOrigin)&&(p.transformOrigin=f.transformOrigin??"50% 50%",delete f.transformOrigin),p.transform&&(p.transformBox=(h==null?void 0:h.transformBox)??"fill-box",delete f.transformBox),e!==void 0&&(f.x=e),n!==void 0&&(f.y=n),r!==void 0&&(f.scale=r),i!==void 0&&Rz(f,i,s,o,!1)}const gM=()=>({...Jb(),attrs:{}}),mM=t=>typeof t=="string"&&t.toLowerCase()==="svg";function Tz(t,e,n,r){const i=y.useMemo(()=>{const s=gM();return pM(s,e,mM(r),t.transformTemplate,t.style),{...s.attrs,style:{...s.style}}},[e]);if(t.style){const s={};fM(s,t.style,t),i.style={...s,...i.style}}return i}const Pz=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function eS(t){return typeof t!="string"||t.includes("-")?!1:!!(Pz.indexOf(t)>-1||/[A-Z]/u.test(t))}function Lz(t,e,n,{latestValues:r},i,s=!1){const a=(eS(t)?Tz:Cz)(e,r,i,t),l=gz(e,typeof t=="string",s),c=t!==y.Fragment?{...l,...a,ref:n}:{},{children:h}=e,f=y.useMemo(()=>li(h)?h.get():h,[h]);return y.createElement(t,{...c,children:f})}function OE(t){const e=[{},{}];return t==null||t.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function tS(t,e,n,r){if(typeof e=="function"){const[i,s]=OE(r);e=e(n!==void 0?n:t.custom,i,s)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[i,s]=OE(r);e=e(n!==void 0?n:t.custom,i,s)}return e}function sm(t){return li(t)?t.get():t}function Mz({scrapeMotionValuesFromProps:t,createRenderState:e},n,r,i){return{latestValues:Az(n,r,i,t),renderState:e()}}function Az(t,e,n,r){const i={},s=r(t,{});for(const p in s)i[p]=sm(s[p]);let{initial:o,animate:a}=t;const l=W0(t),c=dM(t);e&&c&&!l&&t.inherit!==!1&&(o===void 0&&(o=e.initial),a===void 0&&(a=e.animate));let h=n?n.initial===!1:!1;h=h||o===!1;const f=h?a:o;if(f&&typeof f!="boolean"&&!V0(f)){const p=Array.isArray(f)?f:[f];for(let g=0;g<p.length;g++){const v=tS(t,p[g]);if(v){const{transitionEnd:x,transition:k,...C}=v;for(const b in C){let _=C[b];if(Array.isArray(_)){const T=h?_.length-1:0;_=_[T]}_!==null&&(i[b]=_)}for(const b in x)i[b]=x[b]}}}return i}const vM=t=>(e,n)=>{const r=y.useContext(U0),i=y.useContext(z0),s=()=>Mz(t,e,r,i);return n?s():Eb(s)};function nS(t,e,n){var s;const{style:r}=t,i={};for(const o in r)(li(r[o])||e.style&&li(e.style[o])||hM(o,t)||((s=n==null?void 0:n.getValue(o))==null?void 0:s.liveStyle)!==void 0)&&(i[o]=r[o]);return i}const Nz=vM({scrapeMotionValuesFromProps:nS,createRenderState:Jb});function yM(t,e,n){const r=nS(t,e,n);for(const i in t)if(li(t[i])||li(e[i])){const s=kd.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[s]=t[i]}return r}const jz=vM({scrapeMotionValuesFromProps:yM,createRenderState:gM}),Iz=Symbol.for("motionComponentSymbol");function Ec(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function Oz(t,e,n){return y.useCallback(r=>{r&&t.onMount&&t.onMount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):Ec(n)&&(n.current=r))},[e])}const rS=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),Dz="framerAppearId",wM="data-"+rS(Dz),xM=y.createContext({});function Fz(t,e,n,r,i){var x,k;const{visualElement:s}=y.useContext(U0),o=y.useContext(uM),a=y.useContext(z0),l=y.useContext(Kb).reducedMotion,c=y.useRef(null);r=r||o.renderer,!c.current&&r&&(c.current=r(t,{visualState:e,parent:s,props:n,presenceContext:a,blockInitialAnimation:a?a.initial===!1:!1,reducedMotionConfig:l}));const h=c.current,f=y.useContext(xM);h&&!h.projection&&i&&(h.type==="html"||h.type==="svg")&&Bz(c.current,n,i,f);const p=y.useRef(!1);y.useInsertionEffect(()=>{h&&p.current&&h.update(n,a)});const g=n[wM],v=y.useRef(!!g&&!((x=window.MotionHandoffIsComplete)!=null&&x.call(window,g))&&((k=window.MotionHasOptimisedAnimation)==null?void 0:k.call(window,g)));return mL(()=>{h&&(p.current=!0,window.MotionIsMounted=!0,h.updateFeatures(),h.scheduleRenderMicrotask(),v.current&&h.animationState&&h.animationState.animateChanges())}),y.useEffect(()=>{h&&(!v.current&&h.animationState&&h.animationState.animateChanges(),v.current&&(queueMicrotask(()=>{var C;(C=window.MotionHandoffMarkAsComplete)==null||C.call(window,g)}),v.current=!1),h.enteringChildren=void 0)}),h}function Bz(t,e,n,r){const{layoutId:i,layout:s,drag:o,dragConstraints:a,layoutScroll:l,layoutRoot:c,layoutCrossfade:h}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:_M(t.parent)),t.projection.setOptions({layoutId:i,layout:s,alwaysMeasureLayout:!!o||a&&Ec(a),visualElement:t,animationType:typeof s=="string"?s:"both",initialPromotionConfig:r,crossfade:h,layoutScroll:l,layoutRoot:c})}function _M(t){if(t)return t.options.allowProjection!==!1?t.projection:_M(t.parent)}function n1(t,{forwardMotionProps:e=!1}={},n,r){n&&hz(n);const i=eS(t)?jz:Nz;function s(a,l){let c;const h={...y.useContext(Kb),...a,layoutId:$z(a)},{isStatic:f}=h,p=vz(a),g=i(a,f);if(!f&&Rb){zz();const v=Uz(h);c=v.MeasureLayout,p.visualElement=Fz(t,g,h,r,v.ProjectionNode)}return w.jsxs(U0.Provider,{value:p,children:[c&&p.visualElement?w.jsx(c,{visualElement:p.visualElement,...h}):null,Lz(t,a,Oz(g,p.visualElement,l),g,f,e)]})}s.displayName=`motion.${typeof t=="string"?t:`create(${t.displayName??t.name??""})`}`;const o=y.forwardRef(s);return o[Iz]=t,o}function $z({layoutId:t}){const e=y.useContext(kb).id;return e&&t!==void 0?e+"-"+t:t}function zz(t,e){y.useContext(uM).strict}function Uz(t){const{drag:e,layout:n}=nd;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(t)||n!=null&&n.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}function Vz(t,e){if(typeof Proxy>"u")return n1;const n=new Map,r=(s,o)=>n1(s,o,t,e),i=(s,o)=>r(s,o);return new Proxy(i,{get:(s,o)=>o==="create"?r:(n.has(o)||n.set(o,n1(o,void 0,t,e)),n.get(o))})}function bM({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function Wz({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function Hz(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function r1(t){return t===void 0||t===1}function mx({scale:t,scaleX:e,scaleY:n}){return!r1(t)||!r1(e)||!r1(n)}function nu(t){return mx(t)||SM(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function SM(t){return DE(t.x)||DE(t.y)}function DE(t){return t&&t!=="0%"}function Jm(t,e,n){const r=t-n,i=e*r;return n+i}function FE(t,e,n,r,i){return i!==void 0&&(t=Jm(t,i,r)),Jm(t,n,r)+e}function vx(t,e=0,n=1,r,i){t.min=FE(t.min,e,n,r,i),t.max=FE(t.max,e,n,r,i)}function CM(t,{x:e,y:n}){vx(t.x,e.translate,e.scale,e.originPoint),vx(t.y,n.translate,n.scale,n.originPoint)}const BE=.999999999999,$E=1.0000000000001;function Gz(t,e,n,r=!1){const i=n.length;if(!i)return;e.x=e.y=1;let s,o;for(let a=0;a<i;a++){s=n[a],o=s.projectionDelta;const{visualElement:l}=s.options;l&&l.props.style&&l.props.style.display==="contents"||(r&&s.options.layoutScroll&&s.scroll&&s!==s.root&&Tc(t,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,CM(t,o)),r&&nu(s.latestValues)&&Tc(t,s.latestValues))}e.x<$E&&e.x>BE&&(e.x=1),e.y<$E&&e.y>BE&&(e.y=1)}function Rc(t,e){t.min=t.min+e,t.max=t.max+e}function zE(t,e,n,r,i=.5){const s=On(t.min,t.max,i);vx(t,e,n,s,r)}function Tc(t,e){zE(t.x,e.x,e.scaleX,e.scale,e.originX),zE(t.y,e.y,e.scaleY,e.scale,e.originY)}function kM(t,e){return bM(Hz(t.getBoundingClientRect(),e))}function qz(t,e,n){const r=kM(t,n),{scroll:i}=e;return i&&(Rc(r.x,i.offset.x),Rc(r.y,i.offset.y)),r}const UE=()=>({translate:0,scale:1,origin:0,originPoint:0}),Pc=()=>({x:UE(),y:UE()}),VE=()=>({min:0,max:0}),tr=()=>({x:VE(),y:VE()}),yx={current:null},EM={current:!1};function Yz(){if(EM.current=!0,!!Rb)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>yx.current=t.matches;t.addEventListener("change",e),e()}else yx.current=!1}const Kz=new WeakMap;function Xz(t,e,n){for(const r in e){const i=e[r],s=n[r];if(li(i))t.addValue(r,i);else if(li(s))t.addValue(r,td(i,{owner:t}));else if(s!==i)if(t.hasValue(r)){const o=t.getValue(r);o.liveStyle===!0?o.jump(i):o.hasAnimated||o.set(i)}else{const o=t.getStaticValue(r);t.addValue(r,td(o!==void 0?o:i,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const WE=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class Zz{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:s,visualState:o},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Wb,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const p=Ai.now();this.renderScheduledAt<p&&(this.renderScheduledAt=p,Rn.render(this.render,!1,!0))};const{latestValues:l,renderState:c}=o;this.latestValues=l,this.baseTarget={...l},this.initialValues=n.initial?{...l}:{},this.renderState=c,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=a,this.blockInitialAnimation=!!s,this.isControllingVariants=W0(n),this.isVariantNode=dM(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:h,...f}=this.scrapeMotionValuesFromProps(n,{},this);for(const p in f){const g=f[p];l[p]!==void 0&&li(g)&&g.set(l[p])}}mount(e){var n;this.current=e,Kz.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,i)=>this.bindToMotionValue(i,r)),EM.current||Yz(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:yx.current,(n=this.parent)==null||n.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var e;this.projection&&this.projection.unmount(),wl(this.notifyUpdate),wl(this.render),this.valueSubscriptions.forEach(n=>n()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(e=this.parent)==null||e.removeChild(this);for(const n in this.events)this.events[n].clear();for(const n in this.features){const r=this.features[n];r&&(r.unmount(),r.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=Ed.has(e);r&&this.onBindTransform&&this.onBindTransform();const i=n.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&Rn.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let s;window.MotionCheckAppearSync&&(s=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{i(),s&&s(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in nd){const n=nd[e];if(!n)continue;const{isEnabled:r,Feature:i}=n;if(!this.features[e]&&i&&r(this.props)&&(this.features[e]=new i(this)),this.features[e]){const s=this.features[e];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):tr()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<WE.length;r++){const i=WE[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const s="on"+i,o=e[s];o&&(this.propEventSubscriptions[i]=this.on(i,o))}this.prevMotionValues=Xz(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=td(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(vL(r)||wL(r))?r=parseFloat(r):!sz(r)&&xl.test(n)&&(r=eM(e,n)),this.setBaseTarget(e,li(r)?r.get():r)),li(r)?r.get():r}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var s;const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const o=tS(this.props,n,(s=this.presenceContext)==null?void 0:s.custom);o&&(r=o[e])}if(n&&r!==void 0)return r;const i=this.getBaseTargetFromProps(this.props,e);return i!==void 0&&!li(i)?i:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new Ab),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}scheduleRenderMicrotask(){qb.render(this.render)}}class RM extends Zz{constructor(){super(...arguments),this.KeyframeResolver=q$}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;li(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function TM(t,{style:e,vars:n},r,i){const s=t.style;let o;for(o in e)s[o]=e[o];i==null||i.applyProjectionStyles(s,r);for(o in n)s.setProperty(o,n[o])}function Qz(t){return window.getComputedStyle(t)}class Jz extends RM{constructor(){super(...arguments),this.type="html",this.renderInstance=TM}readValueFromInstance(e,n){var r;if(Ed.has(n))return(r=this.projection)!=null&&r.isProjecting?ux(n):h$(e,n);{const i=Qz(e),s=(Ib(n)?i.getPropertyValue(n):i[n])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(e,{transformPagePoint:n}){return kM(e,n)}build(e,n,r){Qb(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return nS(e,n,r)}}const PM=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function eU(t,e,n,r){TM(t,e,void 0,r);for(const i in e.attrs)t.setAttribute(PM.has(i)?i:rS(i),e.attrs[i])}class tU extends RM{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=tr}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(Ed.has(n)){const r=JL(n);return r&&r.default||0}return n=PM.has(n)?n:rS(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return yM(e,n,r)}build(e,n,r){pM(e,n,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(e,n,r,i){eU(e,n,r,i)}mount(e){this.isSVGTag=mM(e.tagName),super.mount(e)}}const nU=(t,e)=>eS(t)?new tU(e):new Jz(e,{allowProjection:t!==y.Fragment});function $c(t,e,n){const r=t.getProps();return tS(r,e,n!==void 0?n:r.custom,t)}const wx=t=>Array.isArray(t);function rU(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,td(n))}function iU(t){return wx(t)?t[t.length-1]||0:t}function sU(t,e){const n=$c(t,e);let{transitionEnd:r={},transition:i={},...s}=n||{};s={...s,...r};for(const o in s){const a=iU(s[o]);rU(t,o,a)}}function oU(t){return!!(li(t)&&t.add)}function xx(t,e){const n=t.getValue("willChange");if(oU(n))return n.add(e);if(!n&&fa.WillChange){const r=new fa.WillChange("auto");t.addValue("willChange",r),r.add(e)}}function LM(t){return t.props[wM]}const aU=t=>t!==null;function lU(t,{repeat:e,repeatType:n="loop"},r){const i=t.filter(aU),s=e&&n!=="loop"&&e%2===1?0:i.length-1;return!s||r===void 0?i[s]:r}const uU={type:"spring",stiffness:500,damping:25,restSpeed:10},cU=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),dU={type:"keyframes",duration:.8},hU={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},fU=(t,{keyframes:e})=>e.length>2?dU:Ed.has(t)?t.startsWith("scale")?cU(e[1]):uU:hU;function pU({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:s,repeatType:o,repeatDelay:a,from:l,elapsed:c,...h}){return!!Object.keys(h).length}const iS=(t,e,n,r={},i,s)=>o=>{const a=Hb(r,t)||{},l=a.delay||r.delay||0;let{elapsed:c=0}=r;c=c-ko(l);const h={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...a,delay:-c,onUpdate:p=>{e.set(p),a.onUpdate&&a.onUpdate(p)},onComplete:()=>{o(),a.onComplete&&a.onComplete()},name:t,motionValue:e,element:s?void 0:i};pU(a)||Object.assign(h,fU(t,h)),h.duration&&(h.duration=ko(h.duration)),h.repeatDelay&&(h.repeatDelay=ko(h.repeatDelay)),h.from!==void 0&&(h.keyframes[0]=h.from);let f=!1;if((h.type===!1||h.duration===0&&!h.repeatDelay)&&(px(h),h.delay===0&&(f=!0)),(fa.instantAnimations||fa.skipAnimations)&&(f=!0,px(h),h.delay=0),h.allowFlatten=!a.type&&!a.ease,f&&!s&&e.get()!==void 0){const p=lU(h.keyframes,a);if(p!==void 0){Rn.update(()=>{h.onUpdate(p),h.onComplete()});return}}return a.isSync?new Vb(h):new I$(h)};function gU({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function MM(t,e,{delay:n=0,transitionOverride:r,type:i}={}){let{transition:s=t.getDefaultTransition(),transitionEnd:o,...a}=e;r&&(s=r);const l=[],c=i&&t.animationState&&t.animationState.getState()[i];for(const h in a){const f=t.getValue(h,t.latestValues[h]??null),p=a[h];if(p===void 0||c&&gU(c,h))continue;const g={delay:n,...Hb(s||{},h)},v=f.get();if(v!==void 0&&!f.isAnimating&&!Array.isArray(p)&&p===v&&!g.velocity)continue;let x=!1;if(window.MotionHandoffAnimation){const C=LM(t);if(C){const b=window.MotionHandoffAnimation(C,h,Rn);b!==null&&(g.startTime=b,x=!0)}}xx(t,h),f.start(iS(h,f,p,t.shouldReduceMotion&&XL.has(h)?{type:!1}:g,t,x));const k=f.animation;k&&l.push(k)}return o&&Promise.all(l).then(()=>{Rn.update(()=>{o&&sU(t,o)})}),l}function AM(t,e,n,r=0,i=1){const s=Array.from(t).sort((c,h)=>c.sortNodePosition(h)).indexOf(e),o=t.size,a=(o-1)*r;return typeof n=="function"?n(s,o):i===1?s*r:a-s*r}function _x(t,e,n={}){var l;const r=$c(t,e,n.type==="exit"?(l=t.presenceContext)==null?void 0:l.custom:void 0);let{transition:i=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(i=n.transitionOverride);const s=r?()=>Promise.all(MM(t,r,n)):()=>Promise.resolve(),o=t.variantChildren&&t.variantChildren.size?(c=0)=>{const{delayChildren:h=0,staggerChildren:f,staggerDirection:p}=i;return mU(t,e,c,h,f,p,n)}:()=>Promise.resolve(),{when:a}=i;if(a){const[c,h]=a==="beforeChildren"?[s,o]:[o,s];return c().then(()=>h())}else return Promise.all([s(),o(n.delay)])}function mU(t,e,n=0,r=0,i=0,s=1,o){const a=[];for(const l of t.variantChildren)l.notify("AnimationStart",e),a.push(_x(l,e,{...o,delay:n+(typeof r=="function"?0:r)+AM(t.variantChildren,l,r,i,s)}).then(()=>l.notify("AnimationComplete",e)));return Promise.all(a)}function vU(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(s=>_x(t,s,n));r=Promise.all(i)}else if(typeof e=="string")r=_x(t,e,n);else{const i=typeof e=="function"?$c(t,e,n.custom):e;r=Promise.all(MM(t,i,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}function NM(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}const yU=Zb.length;function jM(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?jM(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<yU;n++){const r=Zb[n],i=t.props[r];(Af(i)||i===!1)&&(e[r]=i)}return e}const wU=[...Xb].reverse(),xU=Xb.length;function _U(t){return e=>Promise.all(e.map(({animation:n,options:r})=>vU(t,n,r)))}function bU(t){let e=_U(t),n=HE(),r=!0;const i=l=>(c,h)=>{var p;const f=$c(t,h,l==="exit"?(p=t.presenceContext)==null?void 0:p.custom:void 0);if(f){const{transition:g,transitionEnd:v,...x}=f;c={...c,...x,...v}}return c};function s(l){e=l(t)}function o(l){const{props:c}=t,h=jM(t.parent)||{},f=[],p=new Set;let g={},v=1/0;for(let k=0;k<xU;k++){const C=wU[k],b=n[C],_=c[C]!==void 0?c[C]:h[C],T=Af(_),R=C===l?b.isActive:null;R===!1&&(v=k);let L=_===h[C]&&_!==c[C]&&T;if(L&&r&&t.manuallyAnimateOnMount&&(L=!1),b.protectedKeys={...g},!b.isActive&&R===null||!_&&!b.prevProp||V0(_)||typeof _=="boolean")continue;const M=SU(b.prevProp,_);let A=M||C===l&&b.isActive&&!L&&T||k>v&&T,$=!1;const j=Array.isArray(_)?_:[_];let V=j.reduce(i(C),{});R===!1&&(V={});const{prevResolvedValues:U={}}=b,B={...U,...V},Z=te=>{A=!0,p.has(te)&&($=!0,p.delete(te)),b.needsAnimating[te]=!0;const O=t.getValue(te);O&&(O.liveStyle=!1)};for(const te in B){const O=V[te],K=U[te];if(g.hasOwnProperty(te))continue;let Y=!1;wx(O)&&wx(K)?Y=!NM(O,K):Y=O!==K,Y?O!=null?Z(te):p.add(te):O!==void 0&&p.has(te)?Z(te):b.protectedKeys[te]=!0}b.prevProp=_,b.prevResolvedValues=V,b.isActive&&(g={...g,...V}),r&&t.blockInitialAnimation&&(A=!1);const q=L&&M;A&&(!q||$)&&f.push(...j.map(te=>{const O={type:C};if(typeof te=="string"&&r&&!q&&t.manuallyAnimateOnMount&&t.parent){const{parent:K}=t,Y=$c(K,te);if(K.enteringChildren&&Y){const{delayChildren:xe}=Y.transition||{};O.delay=AM(K.enteringChildren,t,xe)}}return{animation:te,options:O}}))}if(p.size){const k={};if(typeof c.initial!="boolean"){const C=$c(t,Array.isArray(c.initial)?c.initial[0]:c.initial);C&&C.transition&&(k.transition=C.transition)}p.forEach(C=>{const b=t.getBaseTarget(C),_=t.getValue(C);_&&(_.liveStyle=!0),k[C]=b??null}),f.push({animation:k})}let x=!!f.length;return r&&(c.initial===!1||c.initial===c.animate)&&!t.manuallyAnimateOnMount&&(x=!1),r=!1,x?e(f):Promise.resolve()}function a(l,c){var f;if(n[l].isActive===c)return Promise.resolve();(f=t.variantChildren)==null||f.forEach(p=>{var g;return(g=p.animationState)==null?void 0:g.setActive(l,c)}),n[l].isActive=c;const h=o(l);for(const p in n)n[p].protectedKeys={};return h}return{animateChanges:o,setActive:a,setAnimateFunction:s,getState:()=>n,reset:()=>{n=HE()}}}function SU(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!NM(e,t):!1}function Ql(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function HE(){return{animate:Ql(!0),whileInView:Ql(),whileHover:Ql(),whileTap:Ql(),whileDrag:Ql(),whileFocus:Ql(),exit:Ql()}}class El{constructor(e){this.isMounted=!1,this.node=e}update(){}}class CU extends El{constructor(e){super(e),e.animationState||(e.animationState=bU(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();V0(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)==null||e.call(this)}}let kU=0;class EU extends El{constructor(){super(...arguments),this.id=kU++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const i=this.node.animationState.setActive("exit",!e);n&&!e&&i.then(()=>{n(this.id)})}mount(){const{register:e,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const RU={animation:{Feature:CU},exit:{Feature:EU}};function jf(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}function ep(t){return{point:{x:t.pageX,y:t.pageY}}}const TU=t=>e=>Yb(e)&&t(e,ep(e));function Yh(t,e,n,r){return jf(t,e,TU(n),r)}const IM=1e-4,PU=1-IM,LU=1+IM,OM=.01,MU=0-OM,AU=0+OM;function yi(t){return t.max-t.min}function NU(t,e,n){return Math.abs(t-e)<=n}function GE(t,e,n,r=.5){t.origin=r,t.originPoint=On(e.min,e.max,t.origin),t.scale=yi(n)/yi(e),t.translate=On(n.min,n.max,t.origin)-t.originPoint,(t.scale>=PU&&t.scale<=LU||isNaN(t.scale))&&(t.scale=1),(t.translate>=MU&&t.translate<=AU||isNaN(t.translate))&&(t.translate=0)}function Kh(t,e,n,r){GE(t.x,e.x,n.x,r?r.originX:void 0),GE(t.y,e.y,n.y,r?r.originY:void 0)}function qE(t,e,n){t.min=n.min+e.min,t.max=t.min+yi(e)}function jU(t,e,n){qE(t.x,e.x,n.x),qE(t.y,e.y,n.y)}function YE(t,e,n){t.min=e.min-n.min,t.max=t.min+yi(e)}function Xh(t,e,n){YE(t.x,e.x,n.x),YE(t.y,e.y,n.y)}function gs(t){return[t("x"),t("y")]}const DM=({current:t})=>t?t.ownerDocument.defaultView:null,KE=(t,e)=>Math.abs(t-e);function IU(t,e){const n=KE(t.x,e.x),r=KE(t.y,e.y);return Math.sqrt(n**2+r**2)}class FM{constructor(e,n,{transformPagePoint:r,contextWindow:i=window,dragSnapToOrigin:s=!1,distanceThreshold:o=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const p=s1(this.lastMoveEventInfo,this.history),g=this.startEvent!==null,v=IU(p.offset,{x:0,y:0})>=this.distanceThreshold;if(!g&&!v)return;const{point:x}=p,{timestamp:k}=Vr;this.history.push({...x,timestamp:k});const{onStart:C,onMove:b}=this.handlers;g||(C&&C(this.lastMoveEvent,p),this.startEvent=this.lastMoveEvent),b&&b(this.lastMoveEvent,p)},this.handlePointerMove=(p,g)=>{this.lastMoveEvent=p,this.lastMoveEventInfo=i1(g,this.transformPagePoint),Rn.update(this.updatePoint,!0)},this.handlePointerUp=(p,g)=>{this.end();const{onEnd:v,onSessionEnd:x,resumeAnimation:k}=this.handlers;if(this.dragSnapToOrigin&&k&&k(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const C=s1(p.type==="pointercancel"?this.lastMoveEventInfo:i1(g,this.transformPagePoint),this.history);this.startEvent&&v&&v(p,C),x&&x(p,C)},!Yb(e))return;this.dragSnapToOrigin=s,this.handlers=n,this.transformPagePoint=r,this.distanceThreshold=o,this.contextWindow=i||window;const a=ep(e),l=i1(a,this.transformPagePoint),{point:c}=l,{timestamp:h}=Vr;this.history=[{...c,timestamp:h}];const{onSessionStart:f}=n;f&&f(e,s1(l,this.history)),this.removeListeners=Zf(Yh(this.contextWindow,"pointermove",this.handlePointerMove),Yh(this.contextWindow,"pointerup",this.handlePointerUp),Yh(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),wl(this.updatePoint)}}function i1(t,e){return e?{point:e(t.point)}:t}function XE(t,e){return{x:t.x-e.x,y:t.y-e.y}}function s1({point:t},e){return{point:t,delta:XE(t,BM(e)),offset:XE(t,OU(e)),velocity:DU(e,.1)}}function OU(t){return t[0]}function BM(t){return t[t.length-1]}function DU(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const i=BM(t);for(;n>=0&&(r=t[n],!(i.timestamp-r.timestamp>ko(e)));)n--;if(!r)return{x:0,y:0};const s=Cs(i.timestamp-r.timestamp);if(s===0)return{x:0,y:0};const o={x:(i.x-r.x)/s,y:(i.y-r.y)/s};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function FU(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?On(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?On(n,t,r.max):Math.min(t,n)),t}function ZE(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function BU(t,{top:e,left:n,bottom:r,right:i}){return{x:ZE(t.x,n,i),y:ZE(t.y,e,r)}}function QE(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function $U(t,e){return{x:QE(t.x,e.x),y:QE(t.y,e.y)}}function zU(t,e){let n=.5;const r=yi(t),i=yi(e);return i>r?n=Pf(e.min,e.max-r,t.min):r>i&&(n=Pf(t.min,t.max-i,e.min)),ha(0,1,n)}function UU(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const bx=.35;function VU(t=bx){return t===!1?t=0:t===!0&&(t=bx),{x:JE(t,"left","right"),y:JE(t,"top","bottom")}}function JE(t,e,n){return{min:eR(t,e),max:eR(t,n)}}function eR(t,e){return typeof t=="number"?t:t[e]||0}const WU=new WeakMap;class HU{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=tr(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:n=!1,distanceThreshold:r}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const s=f=>{const{dragSnapToOrigin:p}=this.getProps();p?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(ep(f).point)},o=(f,p)=>{const{drag:g,dragPropagation:v,onDragStart:x}=this.getProps();if(g&&!v&&(this.openDragLock&&this.openDragLock(),this.openDragLock=Z$(g),!this.openDragLock))return;this.latestPointerEvent=f,this.latestPanInfo=p,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),gs(C=>{let b=this.getAxisMotionValue(C).get()||0;if(Eo.test(b)){const{projection:_}=this.visualElement;if(_&&_.layout){const T=_.layout.layoutBox[C];T&&(b=yi(T)*(parseFloat(b)/100))}}this.originPoint[C]=b}),x&&Rn.postRender(()=>x(f,p)),xx(this.visualElement,"transform");const{animationState:k}=this.visualElement;k&&k.setActive("whileDrag",!0)},a=(f,p)=>{this.latestPointerEvent=f,this.latestPanInfo=p;const{dragPropagation:g,dragDirectionLock:v,onDirectionLock:x,onDrag:k}=this.getProps();if(!g&&!this.openDragLock)return;const{offset:C}=p;if(v&&this.currentDirection===null){this.currentDirection=GU(C),this.currentDirection!==null&&x&&x(this.currentDirection);return}this.updateAxis("x",p.point,C),this.updateAxis("y",p.point,C),this.visualElement.render(),k&&k(f,p)},l=(f,p)=>{this.latestPointerEvent=f,this.latestPanInfo=p,this.stop(f,p),this.latestPointerEvent=null,this.latestPanInfo=null},c=()=>gs(f=>{var p;return this.getAnimationState(f)==="paused"&&((p=this.getAxisMotionValue(f).animation)==null?void 0:p.play())}),{dragSnapToOrigin:h}=this.getProps();this.panSession=new FM(e,{onSessionStart:s,onStart:o,onMove:a,onSessionEnd:l,resumeAnimation:c},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:h,distanceThreshold:r,contextWindow:DM(this.visualElement)})}stop(e,n){const r=e||this.latestPointerEvent,i=n||this.latestPanInfo,s=this.isDragging;if(this.cancel(),!s||!i||!r)return;const{velocity:o}=i;this.startAnimation(o);const{onDragEnd:a}=this.getProps();a&&Rn.postRender(()=>a(r,i))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:i}=this.getProps();if(!r||!wg(e,i,this.currentDirection))return;const s=this.getAxisMotionValue(e);let o=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(o=FU(o,this.constraints[e],this.elastic[e])),s.set(o)}resolveConstraints(){var s;const{dragConstraints:e,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(s=this.visualElement.projection)==null?void 0:s.layout,i=this.constraints;e&&Ec(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=BU(r.layoutBox,e):this.constraints=!1,this.elastic=VU(n),i!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&gs(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=UU(r.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!Ec(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const s=qz(r,i.root,this.visualElement.getTransformPagePoint());let o=$U(i.layout.layoutBox,s);if(n){const a=n(Wz(o));this.hasMutatedConstraints=!!a,a&&(o=bM(a))}return o}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:s,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},c=gs(h=>{if(!wg(h,n,this.currentDirection))return;let f=l&&l[h]||{};o&&(f={min:0,max:0});const p=i?200:1e6,g=i?40:1e7,v={type:"inertia",velocity:r?e[h]:0,bounceStiffness:p,bounceDamping:g,timeConstant:750,restDelta:1,restSpeed:10,...s,...f};return this.startAxisValueAnimation(h,v)});return Promise.all(c).then(a)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return xx(this.visualElement,e),r.start(iS(e,r,0,n,this.visualElement,!1))}stopAnimation(){gs(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){gs(e=>{var n;return(n=this.getAxisMotionValue(e).animation)==null?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)==null?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){gs(n=>{const{drag:r}=this.getProps();if(!wg(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,s=this.getAxisMotionValue(n);if(i&&i.layout){const{min:o,max:a}=i.layout.layoutBox[n];s.set(e[n]-On(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!Ec(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};gs(o=>{const a=this.getAxisMotionValue(o);if(a&&this.constraints!==!1){const l=a.get();i[o]=zU({min:l,max:l},this.constraints[o])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),gs(o=>{if(!wg(o,e,null))return;const a=this.getAxisMotionValue(o),{min:l,max:c}=this.constraints[o];a.set(On(l,c,i[o]))})}addListeners(){if(!this.visualElement.current)return;WU.set(this.visualElement,this);const e=this.visualElement.current,n=Yh(e,"pointerdown",l=>{const{drag:c,dragListener:h=!0}=this.getProps();c&&h&&this.start(l)}),r=()=>{const{dragConstraints:l}=this.getProps();Ec(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,s=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),Rn.read(r);const o=jf(window,"resize",()=>this.scalePositionWithinConstraints()),a=i.addEventListener("didUpdate",({delta:l,hasLayoutChanged:c})=>{this.isDragging&&c&&(gs(h=>{const f=this.getAxisMotionValue(h);f&&(this.originPoint[h]+=l[h].translate,f.set(f.get()+l[h].translate))}),this.visualElement.render())});return()=>{o(),n(),s(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:s=!1,dragElastic:o=bx,dragMomentum:a=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:s,dragElastic:o,dragMomentum:a}}}function wg(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function GU(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class qU extends El{constructor(e){super(e),this.removeGroupControls=Rs,this.removeListeners=Rs,this.controls=new HU(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Rs}unmount(){this.removeGroupControls(),this.removeListeners()}}const tR=t=>(e,n)=>{t&&Rn.postRender(()=>t(e,n))};class YU extends El{constructor(){super(...arguments),this.removePointerDownListener=Rs}onPointerDown(e){this.session=new FM(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:DM(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:tR(e),onStart:tR(n),onMove:r,onEnd:(s,o)=>{delete this.session,i&&Rn.postRender(()=>i(s,o))}}}mount(){this.removePointerDownListener=Yh(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const om={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function nR(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const uh={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(bt.test(t))t=parseFloat(t);else return t;const n=nR(t,e.target.x),r=nR(t,e.target.y);return`${n}% ${r}%`}},KU={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,i=xl.parse(t);if(i.length>5)return r;const s=xl.createTransformer(t),o=typeof i[0]!="number"?1:0,a=n.x.scale*e.x,l=n.y.scale*e.y;i[0+o]/=a,i[1+o]/=l;const c=On(a,l,.5);return typeof i[2+o]=="number"&&(i[2+o]/=c),typeof i[3+o]=="number"&&(i[3+o]/=c),s(i)}};let o1=!1;class XU extends y.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:s}=e;yz(ZU),s&&(n.group&&n.group.add(s),r&&r.register&&i&&r.register(s),o1&&s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),om.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:i,isPresent:s}=this.props,{projection:o}=r;return o&&(o.isPresent=s,o1=!0,i||e.layoutDependency!==n||n===void 0||e.isPresent!==s?o.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?o.promote():o.relegate()||Rn.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),qb.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=e;o1=!0,i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function $M(t){const[e,n]=aM(),r=y.useContext(kb);return w.jsx(XU,{...t,layoutGroup:r,switchLayoutGroup:y.useContext(xM),isPresent:e,safeToRemove:n})}const ZU={borderRadius:{...uh,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:uh,borderTopRightRadius:uh,borderBottomLeftRadius:uh,borderBottomRightRadius:uh,boxShadow:KU};function QU(t,e,n){const r=li(t)?t:td(t);return r.start(iS("",r,e,n)),r.animation}const JU=(t,e)=>t.depth-e.depth;class eV{constructor(){this.children=[],this.isDirty=!1}add(e){Tb(this.children,e),this.isDirty=!0}remove(e){Pb(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(JU),this.isDirty=!1,this.children.forEach(e)}}function tV(t,e){const n=Ai.now(),r=({timestamp:i})=>{const s=i-n;s>=e&&(wl(r),t(s-e))};return Rn.setup(r,!0),()=>wl(r)}const zM=["TopLeft","TopRight","BottomLeft","BottomRight"],nV=zM.length,rR=t=>typeof t=="string"?parseFloat(t):t,iR=t=>typeof t=="number"||bt.test(t);function rV(t,e,n,r,i,s){i?(t.opacity=On(0,n.opacity??1,iV(r)),t.opacityExit=On(e.opacity??1,0,sV(r))):s&&(t.opacity=On(e.opacity??1,n.opacity??1,r));for(let o=0;o<nV;o++){const a=`border${zM[o]}Radius`;let l=sR(e,a),c=sR(n,a);if(l===void 0&&c===void 0)continue;l||(l=0),c||(c=0),l===0||c===0||iR(l)===iR(c)?(t[a]=Math.max(On(rR(l),rR(c),r),0),(Eo.test(c)||Eo.test(l))&&(t[a]+="%")):t[a]=c}(e.rotate||n.rotate)&&(t.rotate=On(e.rotate||0,n.rotate||0,r))}function sR(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const iV=UM(0,.5,RL),sV=UM(.5,.95,Rs);function UM(t,e,n){return r=>r<t?0:r>e?1:n(Pf(t,e,r))}function oR(t,e){t.min=e.min,t.max=e.max}function ps(t,e){oR(t.x,e.x),oR(t.y,e.y)}function aR(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function lR(t,e,n,r,i){return t-=e,t=Jm(t,1/n,r),i!==void 0&&(t=Jm(t,1/i,r)),t}function oV(t,e=0,n=1,r=.5,i,s=t,o=t){if(Eo.test(e)&&(e=parseFloat(e),e=On(o.min,o.max,e/100)-o.min),typeof e!="number")return;let a=On(s.min,s.max,r);t===s&&(a-=e),t.min=lR(t.min,e,n,a,i),t.max=lR(t.max,e,n,a,i)}function uR(t,e,[n,r,i],s,o){oV(t,e[n],e[r],e[i],e.scale,s,o)}const aV=["x","scaleX","originX"],lV=["y","scaleY","originY"];function cR(t,e,n,r){uR(t.x,e,aV,n?n.x:void 0,r?r.x:void 0),uR(t.y,e,lV,n?n.y:void 0,r?r.y:void 0)}function dR(t){return t.translate===0&&t.scale===1}function VM(t){return dR(t.x)&&dR(t.y)}function hR(t,e){return t.min===e.min&&t.max===e.max}function uV(t,e){return hR(t.x,e.x)&&hR(t.y,e.y)}function fR(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function WM(t,e){return fR(t.x,e.x)&&fR(t.y,e.y)}function pR(t){return yi(t.x)/yi(t.y)}function gR(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class cV{constructor(){this.members=[]}add(e){Tb(this.members,e),e.scheduleRender()}remove(e){if(Pb(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(i=>e===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const s=this.members[i];if(s.isPresent!==!1){r=s;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function dV(t,e,n){let r="";const i=t.x.translate/e.x,s=t.y.translate/e.y,o=(n==null?void 0:n.z)||0;if((i||s||o)&&(r=`translate3d(${i}px, ${s}px, ${o}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:c,rotate:h,rotateX:f,rotateY:p,skewX:g,skewY:v}=n;c&&(r=`perspective(${c}px) ${r}`),h&&(r+=`rotate(${h}deg) `),f&&(r+=`rotateX(${f}deg) `),p&&(r+=`rotateY(${p}deg) `),g&&(r+=`skewX(${g}deg) `),v&&(r+=`skewY(${v}deg) `)}const a=t.x.scale*e.x,l=t.y.scale*e.y;return(a!==1||l!==1)&&(r+=`scale(${a}, ${l})`),r||"none"}const a1=["","X","Y","Z"],hV=1e3;let fV=0;function l1(t,e,n,r){const{latestValues:i}=e;i[t]&&(n[t]=i[t],e.setStaticValue(t,0),r&&(r[t]=0))}function HM(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=LM(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:i,layoutId:s}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",Rn,!(i||s))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&HM(r)}function GM({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(o={},a=e==null?void 0:e()){this.id=fV++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(mV),this.nodes.forEach(xV),this.nodes.forEach(_V),this.nodes.forEach(vV)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new eV)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new Ab),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const l=this.eventHandlers.get(o);l&&l.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o){if(this.instance)return;this.isSVG=oM(o)&&!rz(o),this.instance=o;const{layoutId:a,layout:l,visualElement:c}=this.options;if(c&&!c.current&&c.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(l||a)&&(this.isLayoutDirty=!0),t){let h,f=0;const p=()=>this.root.updateBlockedByResize=!1;Rn.read(()=>{f=window.innerWidth}),t(o,()=>{const g=window.innerWidth;g!==f&&(f=g,this.root.updateBlockedByResize=!0,h&&h(),h=tV(p,250),om.hasAnimatedSinceResize&&(om.hasAnimatedSinceResize=!1,this.nodes.forEach(yR)))})}a&&this.root.registerSharedNode(a,this),this.options.animate!==!1&&c&&(a||l)&&this.addEventListener("didUpdate",({delta:h,hasLayoutChanged:f,hasRelativeLayoutChanged:p,layout:g})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const v=this.options.transition||c.getDefaultTransition()||EV,{onLayoutAnimationStart:x,onLayoutAnimationComplete:k}=c.getProps(),C=!this.targetLayout||!WM(this.targetLayout,g),b=!f&&p;if(this.options.layoutRoot||this.resumeFrom||b||f&&(C||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const _={...Hb(v,"layout"),onPlay:x,onComplete:k};(c.shouldReduceMotion||this.options.layoutRoot)&&(_.delay=0,_.type=!1),this.startAnimation(_),this.setAnimationOrigin(h,b)}else f||yR(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=g})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),wl(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(bV),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&HM(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let h=0;h<this.path.length;h++){const f=this.path[h];f.shouldResetTransform=!0,f.updateScroll("snapshot"),f.options.layoutRoot&&f.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const c=this.getTransformTemplate();this.prevTransformTemplateValue=c?c(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(mR);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(vR);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(wV),this.nodes.forEach(pV),this.nodes.forEach(gV)):this.nodes.forEach(vR),this.clearAllSnapshots();const a=Ai.now();Vr.delta=ha(0,1e3/60,a-Vr.timestamp),Vr.timestamp=a,Vr.isProcessing=!0,Xy.update.process(Vr),Xy.preRender.process(Vr),Xy.render.process(Vr),Vr.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,qb.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(yV),this.sharedNodes.forEach(SV)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Rn.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Rn.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!yi(this.snapshot.measuredBox.x)&&!yi(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=tr(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a&&this.instance){const l=r(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:l,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!i)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,a=this.projectionDelta&&!VM(this.projectionDelta),l=this.getTransformTemplate(),c=l?l(this.latestValues,""):void 0,h=c!==this.prevTransformTemplateValue;o&&this.instance&&(a||nu(this.latestValues)||h)&&(i(this.instance,c),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return o&&(l=this.removeTransform(l)),RV(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var c;const{visualElement:o}=this.options;if(!o)return tr();const a=o.measureViewportBox();if(!(((c=this.scroll)==null?void 0:c.wasRoot)||this.path.some(TV))){const{scroll:h}=this.root;h&&(Rc(a.x,h.offset.x),Rc(a.y,h.offset.y))}return a}removeElementScroll(o){var l;const a=tr();if(ps(a,o),(l=this.scroll)!=null&&l.wasRoot)return a;for(let c=0;c<this.path.length;c++){const h=this.path[c],{scroll:f,options:p}=h;h!==this.root&&f&&p.layoutScroll&&(f.wasRoot&&ps(a,o),Rc(a.x,f.offset.x),Rc(a.y,f.offset.y))}return a}applyTransform(o,a=!1){const l=tr();ps(l,o);for(let c=0;c<this.path.length;c++){const h=this.path[c];!a&&h.options.layoutScroll&&h.scroll&&h!==h.root&&Tc(l,{x:-h.scroll.offset.x,y:-h.scroll.offset.y}),nu(h.latestValues)&&Tc(l,h.latestValues)}return nu(this.latestValues)&&Tc(l,this.latestValues),l}removeTransform(o){const a=tr();ps(a,o);for(let l=0;l<this.path.length;l++){const c=this.path[l];if(!c.instance||!nu(c.latestValues))continue;mx(c.latestValues)&&c.updateSnapshot();const h=tr(),f=c.measurePageBox();ps(h,f),cR(a,c.latestValues,c.snapshot?c.snapshot.layoutBox:void 0,h)}return nu(this.latestValues)&&cR(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Vr.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var p;const a=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=a.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=a.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=a.isSharedProjectionDirty);const l=!!this.resumingFrom||this!==a;if(!(o||l&&this.isSharedProjectionDirty||this.isProjectionDirty||(p=this.parent)!=null&&p.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:h,layoutId:f}=this.options;if(!(!this.layout||!(h||f))){if(this.resolvedRelativeTargetAt=Vr.timestamp,!this.targetDelta&&!this.relativeTarget){const g=this.getClosestProjectingParent();g&&g.layout&&this.animationProgress!==1?(this.relativeParent=g,this.forceRelativeParentToResolveTarget(),this.relativeTarget=tr(),this.relativeTargetOrigin=tr(),Xh(this.relativeTargetOrigin,this.layout.layoutBox,g.layout.layoutBox),ps(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=tr(),this.targetWithTransforms=tr()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),jU(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):ps(this.target,this.layout.layoutBox),CM(this.target,this.targetDelta)):ps(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const g=this.getClosestProjectingParent();g&&!!g.resumingFrom==!!this.resumingFrom&&!g.options.layoutScroll&&g.target&&this.animationProgress!==1?(this.relativeParent=g,this.forceRelativeParentToResolveTarget(),this.relativeTarget=tr(),this.relativeTargetOrigin=tr(),Xh(this.relativeTargetOrigin,this.target,g.target),ps(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||mx(this.parent.latestValues)||SM(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var v;const o=this.getLead(),a=!!this.resumingFrom||this!==o;let l=!0;if((this.isProjectionDirty||(v=this.parent)!=null&&v.isProjectionDirty)&&(l=!1),a&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(l=!1),this.resolvedRelativeTargetAt===Vr.timestamp&&(l=!1),l)return;const{layout:c,layoutId:h}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(c||h))return;ps(this.layoutCorrected,this.layout.layoutBox);const f=this.treeScale.x,p=this.treeScale.y;Gz(this.layoutCorrected,this.treeScale,this.path,a),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=tr());const{target:g}=o;if(!g){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(aR(this.prevProjectionDelta.x,this.projectionDelta.x),aR(this.prevProjectionDelta.y,this.projectionDelta.y)),Kh(this.projectionDelta,this.layoutCorrected,g,this.latestValues),(this.treeScale.x!==f||this.treeScale.y!==p||!gR(this.projectionDelta.x,this.prevProjectionDelta.x)||!gR(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",g))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var a;if((a=this.options.visualElement)==null||a.scheduleRender(),o){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Pc(),this.projectionDelta=Pc(),this.projectionDeltaWithTransform=Pc()}setAnimationOrigin(o,a=!1){const l=this.snapshot,c=l?l.latestValues:{},h={...this.latestValues},f=Pc();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const p=tr(),g=l?l.source:void 0,v=this.layout?this.layout.source:void 0,x=g!==v,k=this.getStack(),C=!k||k.members.length<=1,b=!!(x&&!C&&this.options.crossfade===!0&&!this.path.some(kV));this.animationProgress=0;let _;this.mixTargetDelta=T=>{const R=T/1e3;wR(f.x,o.x,R),wR(f.y,o.y,R),this.setTargetDelta(f),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Xh(p,this.layout.layoutBox,this.relativeParent.layout.layoutBox),CV(this.relativeTarget,this.relativeTargetOrigin,p,R),_&&uV(this.relativeTarget,_)&&(this.isProjectionDirty=!1),_||(_=tr()),ps(_,this.relativeTarget)),x&&(this.animationValues=h,rV(h,c,this.latestValues,R,b,C)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=R},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){var a,l,c;this.notifyListeners("animationStart"),(a=this.currentAnimation)==null||a.stop(),(c=(l=this.resumingFrom)==null?void 0:l.currentAnimation)==null||c.stop(),this.pendingAnimation&&(wl(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Rn.update(()=>{om.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=td(0)),this.currentAnimation=QU(this.motionValue,[0,1e3],{...o,velocity:0,isSync:!0,onUpdate:h=>{this.mixTargetDelta(h),o.onUpdate&&o.onUpdate(h)},onStop:()=>{},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(hV),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:l,layout:c,latestValues:h}=o;if(!(!a||!l||!c)){if(this!==o&&this.layout&&c&&qM(this.options.animationType,this.layout.layoutBox,c.layoutBox)){l=this.target||tr();const f=yi(this.layout.layoutBox.x);l.x.min=o.target.x.min,l.x.max=l.x.min+f;const p=yi(this.layout.layoutBox.y);l.y.min=o.target.y.min,l.y.max=l.y.min+p}ps(a,l),Tc(a,h),Kh(this.projectionDeltaWithTransform,this.layoutCorrected,a,h)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new cV),this.sharedNodes.get(o).add(a);const c=a.options.initialPromotionConfig;a.promote({transition:c?c.transition:void 0,preserveFollowOpacity:c&&c.shouldPreserveFollowOpacity?c.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var a;const{layoutId:o}=this.options;return o?((a=this.getStack())==null?void 0:a.lead)||this:this}getPrevLead(){var a;const{layoutId:o}=this.options;return o?(a=this.getStack())==null?void 0:a.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:l}={}){const c=this.getStack();c&&c.promote(this,l),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:l}=o;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(a=!0),!a)return;const c={};l.z&&l1("z",o,c,this.animationValues);for(let h=0;h<a1.length;h++)l1(`rotate${a1[h]}`,o,c,this.animationValues),l1(`skew${a1[h]}`,o,c,this.animationValues);o.render();for(const h in c)o.setStaticValue(h,c[h]),this.animationValues&&(this.animationValues[h]=c[h]);o.scheduleRender()}applyProjectionStyles(o,a){if(!this.instance||this.isSVG)return;if(!this.isVisible){o.visibility="hidden";return}const l=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,o.visibility="",o.opacity="",o.pointerEvents=sm(a==null?void 0:a.pointerEvents)||"",o.transform=l?l(this.latestValues,""):"none";return}const c=this.getLead();if(!this.projectionDelta||!this.layout||!c.target){this.options.layoutId&&(o.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,o.pointerEvents=sm(a==null?void 0:a.pointerEvents)||""),this.hasProjected&&!nu(this.latestValues)&&(o.transform=l?l({},""):"none",this.hasProjected=!1);return}o.visibility="";const h=c.animationValues||c.latestValues;this.applyTransformsToTarget();let f=dV(this.projectionDeltaWithTransform,this.treeScale,h);l&&(f=l(h,f)),o.transform=f;const{x:p,y:g}=this.projectionDelta;o.transformOrigin=`${p.origin*100}% ${g.origin*100}% 0`,c.animationValues?o.opacity=c===this?h.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:h.opacityExit:o.opacity=c===this?h.opacity!==void 0?h.opacity:"":h.opacityExit!==void 0?h.opacityExit:0;for(const v in Nf){if(h[v]===void 0)continue;const{correct:x,applyTo:k,isCSSVariable:C}=Nf[v],b=f==="none"?h[v]:x(h[v],c);if(k){const _=k.length;for(let T=0;T<_;T++)o[k[T]]=b}else C?this.options.visualElement.renderState.vars[v]=b:o[v]=b}this.options.layoutId&&(o.pointerEvents=c===this?sm(a==null?void 0:a.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)==null?void 0:a.stop()}),this.root.nodes.forEach(mR),this.root.sharedNodes.clear()}}}function pV(t){t.updateLayout()}function gV(t){var n;const e=((n=t.resumeFrom)==null?void 0:n.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=t.layout,{animationType:s}=t.options,o=e.source!==t.layout.source;s==="size"?gs(f=>{const p=o?e.measuredBox[f]:e.layoutBox[f],g=yi(p);p.min=r[f].min,p.max=p.min+g}):qM(s,e.layoutBox,r)&&gs(f=>{const p=o?e.measuredBox[f]:e.layoutBox[f],g=yi(r[f]);p.max=p.min+g,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[f].max=t.relativeTarget[f].min+g)});const a=Pc();Kh(a,r,e.layoutBox);const l=Pc();o?Kh(l,t.applyTransform(i,!0),e.measuredBox):Kh(l,r,e.layoutBox);const c=!VM(a);let h=!1;if(!t.resumeFrom){const f=t.getClosestProjectingParent();if(f&&!f.resumeFrom){const{snapshot:p,layout:g}=f;if(p&&g){const v=tr();Xh(v,e.layoutBox,p.layoutBox);const x=tr();Xh(x,r,g.layoutBox),WM(v,x)||(h=!0),f.options.layoutRoot&&(t.relativeTarget=x,t.relativeTargetOrigin=v,t.relativeParent=f)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:e,delta:l,layoutDelta:a,hasLayoutChanged:c,hasRelativeLayoutChanged:h})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function mV(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function vV(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function yV(t){t.clearSnapshot()}function mR(t){t.clearMeasurements()}function vR(t){t.isLayoutDirty=!1}function wV(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function yR(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function xV(t){t.resolveTargetDelta()}function _V(t){t.calcProjection()}function bV(t){t.resetSkewAndRotation()}function SV(t){t.removeLeadSnapshot()}function wR(t,e,n){t.translate=On(e.translate,0,n),t.scale=On(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function xR(t,e,n,r){t.min=On(e.min,n.min,r),t.max=On(e.max,n.max,r)}function CV(t,e,n,r){xR(t.x,e.x,n.x,r),xR(t.y,e.y,n.y,r)}function kV(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const EV={duration:.45,ease:[.4,0,.1,1]},_R=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),bR=_R("applewebkit/")&&!_R("chrome/")?Math.round:Rs;function SR(t){t.min=bR(t.min),t.max=bR(t.max)}function RV(t){SR(t.x),SR(t.y)}function qM(t,e,n){return t==="position"||t==="preserve-aspect"&&!NU(pR(e),pR(n),.2)}function TV(t){var e;return t!==t.root&&((e=t.scroll)==null?void 0:e.wasRoot)}const PV=GM({attachResizeListener:(t,e)=>jf(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),u1={current:void 0},YM=GM({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!u1.current){const t=new PV({});t.mount(window),t.setOptions({layoutScroll:!0}),u1.current=t}return u1.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),LV={pan:{Feature:YU},drag:{Feature:qU,ProjectionNode:YM,MeasureLayout:$M}};function CR(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const i="onHover"+n,s=r[i];s&&Rn.postRender(()=>s(e,ep(e)))}class MV extends El{mount(){const{current:e}=this.node;e&&(this.unmount=Q$(e,(n,r)=>(CR(this.node,r,"Start"),i=>CR(this.node,i,"End"))))}unmount(){}}class AV extends El{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Zf(jf(this.node.current,"focus",()=>this.onFocus()),jf(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function kR(t,e,n){const{props:r}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const i="onTap"+(n==="End"?"":n),s=r[i];s&&Rn.postRender(()=>s(e,ep(e)))}class NV extends El{mount(){const{current:e}=this.node;e&&(this.unmount=nz(e,(n,r)=>(kR(this.node,r,"Start"),(i,{success:s})=>kR(this.node,i,s?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Sx=new WeakMap,c1=new WeakMap,jV=t=>{const e=Sx.get(t.target);e&&e(t)},IV=t=>{t.forEach(jV)};function OV({root:t,...e}){const n=t||document;c1.has(n)||c1.set(n,{});const r=c1.get(n),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(IV,{root:t,...e})),r[i]}function DV(t,e,n){const r=OV(e);return Sx.set(t,n),r.observe(t),()=>{Sx.delete(t),r.unobserve(t)}}const FV={some:0,all:1};class BV extends El{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:s}=e,o={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:FV[i]},a=l=>{const{isIntersecting:c}=l;if(this.isInView===c||(this.isInView=c,s&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:h,onViewportLeave:f}=this.node.getProps(),p=c?h:f;p&&p(l)};return DV(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some($V(e,n))&&this.startObserver()}unmount(){}}function $V({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const zV={inView:{Feature:BV},tap:{Feature:NV},focus:{Feature:AV},hover:{Feature:MV}},UV={layout:{ProjectionNode:YM,MeasureLayout:$M}},VV={...RU,...zV,...LV,...UV},tp=Vz(VV,nU);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WV=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),HV=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,r)=>r?r.toUpperCase():n.toLowerCase()),ER=t=>{const e=HV(t);return e.charAt(0).toUpperCase()+e.slice(1)},KM=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim(),GV=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var qV={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YV=y.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:s,iconNode:o,...a},l)=>y.createElement("svg",{ref:l,...qV,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:KM("lucide",i),...!s&&!GV(a)&&{"aria-hidden":"true"},...a},[...o.map(([c,h])=>y.createElement(c,h)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ma=(t,e)=>{const n=y.forwardRef(({className:r,...i},s)=>y.createElement(YV,{ref:s,iconNode:e,className:KM(`lucide-${WV(ER(t))}`,`lucide-${t}`,r),...i}));return n.displayName=ER(t),n};/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KV=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],XV=ma("copy",KV);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZV=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],QV=ma("eye-off",ZV);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JV=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],eW=ma("eye",JV);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tW=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],nW=ma("layers",tW);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rW=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],iW=ma("menu",rW);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sW=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],XM=ma("pen-line",sW);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oW=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],aW=ma("plus",oW);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lW=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],ZM=ma("trash-2",lW);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uW=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],cW=ma("x",uW);const QM=y.createContext(void 0),sS=()=>{const t=y.useContext(QM);if(!t)throw new Error("useSidebar must be used within a SidebarProvider");return t},dW=({children:t,open:e,setOpen:n,animate:r=!0})=>{const[i,s]=y.useState(!1),o=e!==void 0?e:i,a=n!==void 0?n:s;return w.jsx(QM.Provider,{value:{open:o,setOpen:a,animate:r},children:t})},hW=({children:t,open:e,setOpen:n,animate:r})=>w.jsx(dW,{open:e,setOpen:n,animate:r,children:t}),fW=t=>w.jsxs(w.Fragment,{children:[w.jsx(pW,{...t}),w.jsx(gW,{...t})]}),pW=({className:t,children:e,...n})=>{const{open:r,animate:i}=sS();return w.jsx(tp.div,{className:Ym("h-screen px-4 py-4 hidden md:flex md:flex-col sidebar-container w-[250px] flex-shrink-0 sticky top-0",t),animate:{width:i?r?"250px":"72px":"250px"},transition:{duration:.35,ease:"easeInOut"},...n,children:e})},gW=({className:t,children:e,...n})=>{const{open:r,setOpen:i}=sS();return w.jsx(w.Fragment,{children:w.jsxs("div",{className:Ym("h-10 px-4 py-4 flex flex-row md:hidden items-center justify-between sidebar-container w-full"),...n,children:[w.jsx("div",{className:"flex justify-end z-20 w-full",children:w.jsx(iW,{className:"sidebar-icon cursor-pointer",onClick:()=>i(!r)})}),w.jsx(lM,{children:r&&w.jsxs(tp.div,{initial:{x:"-100%",opacity:0},animate:{x:0,opacity:1},exit:{x:"-100%",opacity:0},transition:{duration:.3,ease:"easeInOut"},className:Ym("fixed h-full w-full inset-0 sidebar-container p-10 z-[100] flex flex-col justify-between",t),children:[w.jsx("div",{className:"absolute right-10 top-10 z-50 sidebar-icon cursor-pointer",onClick:()=>i(!r),children:w.jsx(cW,{})}),e]})})]})})},mW=({link:t,className:e,...n})=>{const{open:r,animate:i}=sS();return w.jsxs(fb,{to:t.href,className:Ym("flex items-center justify-start gap-2 group/sidebar px-0 py-2.5",e),...n,children:[t.icon,w.jsx(tp.span,{animate:{display:i?r?"inline-block":"none":"inline-block",opacity:i?r?1:0:1},transition:{duration:.2,ease:"easeInOut"},className:"sidebar-text text-sm group-hover/sidebar:translate-x-1 transition duration-150 whitespace-pre inline-block !p-0 !m-0",children:t.label})]})},JM=y.createContext(void 0);function eA(t){return[...(t||"").split(`
`).map(n=>n.trim()).filter(Boolean),"","",""].slice(0,3)}function vW(t,e){y.useEffect(()=>{if(!t)return;const n=Ct.channel("profile-context-updates").on("postgres_changes",{event:"*",schema:"public",table:"profiles",filter:`id=eq.${t}`},r=>{const i=r.new;e({displayName:i.display_name,bio:i.bio,website:i.website,socialAccounts:i.social_accounts?eA(i.social_accounts):void 0,avatarUrl:i.avatar_url,timezoneEnabled:typeof i.timezone_enabled=="boolean"?i.timezone_enabled:void 0,timezoneValue:i.timezone_value})});return()=>{n.unsubscribe()}},[e,t])}function yW({children:t}){const{user:e}=Oi(),[n,r]=y.useState(null),[i,s]=y.useState(""),[o,a]=y.useState(!0),l=y.useRef(null),c=y.useCallback(async()=>{if(!(e!=null&&e.id)){r(null),s(""),a(!1),l.current=null;return}l.current===null&&a(!0);try{const{data:g}=await Ct.from("profiles").select("display_name, bio, website, social_accounts, avatar_url, timezone_enabled, timezone_value").eq("id",e.id).single(),v={displayName:(g==null?void 0:g.display_name)??"",bio:(g==null?void 0:g.bio)??"",website:(g==null?void 0:g.website)??"",socialAccounts:eA(g==null?void 0:g.social_accounts),avatarUrl:(g==null?void 0:g.avatar_url)??"",timezoneEnabled:(g==null?void 0:g.timezone_enabled)??!1,timezoneValue:(g==null?void 0:g.timezone_value)??"",emailFallback:e.email??""};l.current=v,r(v)}finally{a(!1)}},[e]);y.useEffect(()=>{c()},[c]),y.useEffect(()=>{if(!(n!=null&&n.avatarUrl)){s("");return}let p=!0;return(async()=>{const{data:v,error:x}=await Ct.storage.from("avatars").createSignedUrl(n.avatarUrl,604800);if(p&&(v!=null&&v.signedUrl)&&!x){s(v.signedUrl);return}const{data:k}=Ct.storage.from("avatars").getPublicUrl(n.avatarUrl);p&&s(k.publicUrl??"")})(),()=>{p=!1}},[n==null?void 0:n.avatarUrl]);const h=y.useCallback(p=>{r(g=>{const v={displayName:p.displayName??(g==null?void 0:g.displayName)??"",bio:p.bio??(g==null?void 0:g.bio)??"",website:p.website??(g==null?void 0:g.website)??"",socialAccounts:p.socialAccounts??(g==null?void 0:g.socialAccounts)??["","",""],avatarUrl:p.avatarUrl??(g==null?void 0:g.avatarUrl)??"",timezoneEnabled:p.timezoneEnabled??(g==null?void 0:g.timezoneEnabled)??!1,timezoneValue:p.timezoneValue??(g==null?void 0:g.timezoneValue)??"",emailFallback:(g==null?void 0:g.emailFallback)??(e==null?void 0:e.email)??""};return l.current=v,v})},[e==null?void 0:e.email]);vW((e==null?void 0:e.id)??null,h);const f=y.useMemo(()=>({profile:n,avatarUrl:i,isLoading:o,refreshProfile:c}),[i,o,n,c]);return w.jsx(JM.Provider,{value:f,children:t})}function tA(){const t=y.useContext(JM);if(!t)throw new Error("useProfile must be used within a ProfileProvider");return t}function wW({workspaces:t,profileMenuItems:e,activeWorkspaceId:n,onSelectWorkspace:r}){const[i,s]=y.useState(()=>{const L=localStorage.getItem("sidebar-expanded");return L!==null?JSON.parse(L):!0}),[o,a]=y.useState(!1),l=y.useRef(null),c=y.useRef(null),h=ro(),{signOut:f,user:p}=Oi(),{profile:g,avatarUrl:v,isLoading:x}=tA();y.useEffect(()=>{localStorage.setItem("sidebar-expanded",JSON.stringify(i))},[i]),y.useEffect(()=>{const L=M=>{var U,B,Z;const A=M.target,$=(U=l.current)==null?void 0:U.contains(A),j=(B=c.current)==null?void 0:B.contains(A),V=A;console.log("Click outside check:",{clickedInsideTrigger:$,clickedInsideDropdown:j,target:A,targetTagName:V.tagName,targetParent:V.parentElement,targetParentParent:(Z=V.parentElement)==null?void 0:Z.parentElement,dropdownRef:c.current,manualCheck:c.current&&V&&c.current.contains(V)}),!$&&!j&&(console.log("Closing profile menu"),a(!1))};return o&&document.addEventListener("mousedown",L),()=>{document.removeEventListener("mousedown",L)}},[o]);const k=y.useMemo(()=>(g==null?void 0:g.displayName)||(g==null?void 0:g.emailFallback)||(p==null?void 0:p.email)||"Profile",[g==null?void 0:g.displayName,g==null?void 0:g.emailFallback,p==null?void 0:p.email]),C=y.useMemo(()=>((g==null?void 0:g.displayName)||(g==null?void 0:g.emailFallback)||(p==null?void 0:p.email)||"User").split(/\s+/).filter(Boolean).slice(0,2).map(M=>{var A;return(A=M[0])==null?void 0:A.toUpperCase()}).join(""),[g==null?void 0:g.displayName,g==null?void 0:g.emailFallback,p==null?void 0:p.email]),b=(L,M)=>{console.log("Profile menu item clicked:",L,M),M==null||M.stopPropagation(),M==null||M.preventDefault();const A={profile:"/settings/profile",themes:"/settings/appearance",settings:"/settings"};console.log("Navigating to:",A[L]??"/settings"),h(A[L]??"/settings"),a(!1)},_=async L=>{console.log("Logout clicked:",L),L==null||L.stopPropagation(),L==null||L.preventDefault(),a(!1),await f(),h("/login")},T=w.jsxs("svg",{width:"20px",height:"20px",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 flex-shrink-0",children:[w.jsx("path",{d:"M15 16.5V19C15 20.1046 14.1046 21 13 21H6C4.89543 21 4 20.1046 4 19V5C4 3.89543 4.89543 3 6 3H13C14.1046 3 15 3.89543 15 5V8.0625",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),w.jsx("path",{d:"M11 12H21M21 12L18.5 9.5M21 12L18.5 14.5",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}),R=t.map(L=>({label:L.title,href:`#${L.id}`,icon:w.jsx("span",{className:"sidebar-icon h-5 w-5 flex-shrink-0",children:L.icon})}));return w.jsx(hW,{open:i,setOpen:s,children:w.jsxs(fW,{className:"justify-between gap-10",children:[w.jsxs("div",{className:"flex flex-col flex-1 overflow-y-auto overflow-x-hidden",children:[w.jsxs("div",{className:"mb-2 flex items-center justify-end relative",style:{height:"42px"},children:[w.jsx(lM,{mode:"wait",children:i&&w.jsx(xW,{})}),w.jsx("button",{onClick:()=>s(!i),className:"w-[40px] h-[40px] flex items-center justify-center sidebar-button rounded-md sidebar-hover","aria-label":i?"Collapse sidebar":"Expand sidebar",title:i?"Collapse sidebar":"Expand sidebar",children:w.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"flex-shrink-0",children:w.jsx("path",{d:"M10 4H6C4.89543 4 4 4.89543 4 6V18C4 19.1046 4.89543 20 6 20H10M10 4H18C19.1046 4 20 4.89543 20 6V18C20 19.1046 19.1046 20 18 20H10M10 4V20",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})]}),w.jsx("div",{className:"mt-8 flex flex-col gap-2",children:R.map((L,M)=>w.jsx("div",{onClick:A=>{A.preventDefault();const $=t[M].id;r($)},className:`cursor-pointer px-2 ${t[M].id===n?"sidebar-active rounded-md":""}`,children:w.jsx(mW,{link:L})},M))})]}),w.jsxs("div",{className:"relative",ref:l,children:[w.jsxs("div",{onClick:()=>a(!o),className:"flex items-center justify-start gap-2 group/sidebar px-1.5 py-2.5 cursor-pointer sidebar-hover rounded-md px-2",children:[w.jsx("div",{className:"h-7 w-7 flex-shrink-0 rounded-full overflow-hidden sidebar-button flex items-center justify-center",children:x?w.jsx("div",{className:"w-full h-full sidebar-hover animate-pulse"}):v?w.jsx("img",{src:v,alt:"Profile avatar",className:"w-full h-full object-cover"}):w.jsx("span",{className:"text-xs font-medium sidebar-text",children:C})}),w.jsx(tp.span,{animate:{display:i?"inline-block":"none",opacity:i?1:0},transition:{duration:.2,ease:"easeInOut"},className:"sidebar-text text-sm whitespace-pre inline-block !p-0 !m-0",children:x?"Loading...":k})]}),o&&w.jsxs("div",{ref:c,onMouseDown:L=>{console.log("Dropdown mousedown - stopping propagation"),L.stopPropagation()},className:"fixed sidebar-dropdown rounded-md overflow-hidden",style:{bottom:"72px",left:"16px",width:i?"calc(var(--sidebar-width-expanded) - 32px)":"200px",zIndex:9999},children:[e.map(L=>w.jsxs("button",{onClick:M=>b(L.id,M),className:"w-full flex items-center gap-2 px-3 py-2 text-sm sidebar-text sidebar-dropdown-item transition-colors",children:[w.jsx("span",{className:"h-5 w-5 flex-shrink-0",children:L.icon}),w.jsx("span",{children:L.title})]},L.id)),w.jsx("div",{className:"sidebar-separator"}),w.jsxs("button",{onClick:L=>_(L),className:"w-full flex items-center gap-2 px-3 py-2 text-sm sidebar-dropdown-item transition-colors",style:{color:"var(--danger)"},children:[T,w.jsx("span",{children:"Log out"})]})]})]})]})})}const xW=()=>w.jsxs(tp.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2,ease:"easeInOut"},className:"font-normal flex space-x-2 items-center text-sm sidebar-text absolute left-2",children:[w.jsx("svg",{fill:"currentColor",width:"30px",height:"30px",viewBox:"0 0 64 64",version:"1.1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",xmlSpace:"preserve",className:"flex-shrink-0",style:{fillRule:"evenodd",clipRule:"evenodd",strokeLinejoin:"round",strokeMiterlimit:2},children:w.jsx("g",{transform:"matrix(1,0,0,1,-1152,-256)",children:w.jsxs("g",{id:"coffee-bean-filled",transform:"matrix(0.866025,0.5,-0.5,0.866025,717.879,-387.292)",children:[w.jsx("g",{transform:"matrix(1,0,0,1,0,-0.699553)",children:w.jsx("path",{d:"M737.673,328.231C738.494,328.056 739.334,328.427 739.757,329.152C739.955,329.463 740.106,329.722 740.106,329.722C740.106,329.722 745.206,338.581 739.429,352.782C737.079,358.559 736.492,366.083 738.435,371.679C738.697,372.426 738.482,373.258 737.89,373.784C737.298,374.31 736.447,374.426 735.735,374.077C730.192,371.375 722.028,365.058 722.021,352C722.015,340.226 728.812,330.279 737.673,328.231Z"})}),w.jsx("g",{transform:"matrix(-1,0,0,-1,1483.03,703.293)",children:w.jsx("path",{d:"M737.609,328.246C738.465,328.06 739.344,328.446 739.785,329.203C739.97,329.49 740.106,329.722 740.106,329.722C740.106,329.722 745.206,338.581 739.429,352.782C737.1,358.507 736.503,365.948 738.383,371.527C738.646,372.304 738.415,373.164 737.796,373.703C737.177,374.243 736.294,374.356 735.56,373.989C730.02,371.241 722.028,364.92 722.021,352C722.016,340.255 728.779,330.328 737.609,328.246Z"})})]})})}),w.jsx("span",{className:"font-medium sidebar-text whitespace-pre",children:"Bean App"})]});function _W({activeWorkspace:t,content:e}){return w.jsxs("main",{className:"workspace-area",children:[w.jsxs("div",{className:"workspace-area__header",children:[w.jsx("p",{className:"workspace-area__eyebrow",children:"Workspace"}),w.jsx("h1",{children:t?t.title:"Select a workspace"})]}),e??w.jsx("p",{children:t?"Page content goes here. Swap this section out for your real feature area.":"Choose a workspace from the sidebar to get started."})]})}const Cx=[{id:"new-project",title:"New Project",icon:w.jsx(DD,{}),source:"workspace"},{id:"my-projects",title:"My Projects",icon:w.jsx(OD,{}),source:"workspace"},{id:"playground",title:"Playground",icon:w.jsx(FD,{}),source:"workspace"}],RR=Cx.filter(t=>t.id!=="new-project"),TR=[{id:"canvas",label:"Canvas"},{id:"battle-maps",label:"Battle Maps"},{id:"character-sheets",label:"Character Sheets"},{id:"item-cards",label:"Item Cards"},{id:"game-boards",label:"Game Boards"},{id:"campaign-journal",label:"Campaign Journal"}],bW=w.jsx("svg",{width:"20px",height:"20px",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:w.jsx("path",{d:"M5 20V19C5 16.2386 7.23858 14 10 14H14C16.7614 14 19 16.2386 19 19V20M16 7C16 9.20914 14.2091 11 12 11C9.79086 11 8 9.20914 8 7C8 4.79086 9.79086 3 12 3C14.2091 3 16 4.79086 16 7Z",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})}),SW=w.jsxs("svg",{width:"20px",height:"20px",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[w.jsx("path",{d:"M8 13.5L10.7817 10.7183M10 16.5L13.2817 13.2183M10.7817 10.7183L17.2506 5.2123C17.4158 5.0717 17.6027 4.95892 17.8041 4.87836L17.8336 4.86658C18.6499 4.54005 19.4599 5.35013 19.1334 6.16645L19.1216 6.19589C19.0411 6.39729 18.9283 6.58424 18.7877 6.74942L13.2817 13.2183M10.7817 10.7183C11.615 10.7911 13.2817 11.393 13.2817 13.2183",stroke:"currentColor","stroke-width":"1.8","stroke-linecap":"round","stroke-linejoin":"round"}),w.jsx("path",{d:"M4.4853 17.2881C4.16795 15.5783 5.48027 14 7.2193 14V14C8.75504 14 10 15.245 10 16.7807V17C10 18.6569 8.65685 20 7 20H3.92627C3.6329 20 3.51004 19.6253 3.74646 19.4516L4.55841 18.855C4.67556 18.769 4.73314 18.6235 4.70662 18.4805L4.4853 17.2881Z",stroke:"currentColor","stroke-width":"1.8","stroke-linecap":"round","stroke-linejoin":"round"})]}),CW=w.jsxs("svg",{width:"20px",height:"20px",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[w.jsx("path",{d:"M6.07194 6.26794L6.57194 5.40192L6.07194 6.26794ZM4.70592 6.63397L3.83989 6.13397L3.83989 6.13397L4.70592 6.63397ZM3.70592 8.36602L2.83989 7.86602H2.83989L3.70592 8.36602ZM4.07194 9.73205L3.57194 10.5981H3.57194L4.07194 9.73205ZM4.07194 14.2679L3.57194 13.4019H3.57194L4.07194 14.2679ZM3.70592 15.634L4.57194 15.134H4.57194L3.70592 15.634ZM4.70592 17.366L3.83989 17.866H3.83989L4.70592 17.366ZM6.07194 17.732L6.57194 18.5981L6.07194 17.732ZM17.9284 17.732L17.4283 18.5981L17.4284 18.5981L17.9284 17.732ZM19.2944 17.366L18.4284 16.866L19.2944 17.366ZM20.2944 15.634L21.1604 16.134L20.2944 15.634ZM19.9284 14.2679L19.4284 15.134V15.134L19.9284 14.2679ZM19.9284 9.73205L20.4284 10.5981V10.5981L19.9284 9.73205ZM20.2944 8.36602L19.4284 8.86602L19.4284 8.86602L20.2944 8.36602ZM19.2944 6.63397L18.4284 7.13397L19.2944 6.63397ZM17.9284 6.26794L18.4284 7.13397L17.9284 6.26794ZM14.6514 6.61604L14.2089 7.51283L14.6514 6.61604ZM16.5119 7.08573L17.0119 7.95175L16.5119 7.08573ZM15.336 7.01204L14.7793 7.84277L15.336 7.01204ZM17.9873 11.6035L16.9894 11.6686L17.9873 11.6035ZM18.5118 10.5499L18.0118 9.68388L18.5118 10.5499ZM15.336 16.988L14.7793 16.1572L15.336 16.988ZM16.5119 16.9143L16.0119 17.7803L16.5119 16.9143ZM18.5118 13.4501L18.0118 14.3161L18.5118 13.4501ZM9.34892 17.384L9.79137 16.4872L9.34892 17.384ZM7.48838 16.9143L6.98838 16.0482L7.48838 16.9143ZM8.6643 16.988L8.10763 17.8187L8.6643 16.988ZM14.6514 17.384L15.0938 18.2808L14.6514 17.384ZM5.48852 10.5499L4.98852 11.4159L5.48852 10.5499ZM6.01304 11.6035L5.01516 11.5385L6.01304 11.6035ZM7.48839 7.08573L6.98839 7.95176L7.48839 7.08573ZM11.0001 4V4V2C9.89558 2 9.00015 2.89543 9.00015 4H11.0001ZM11.0001 5.63424V4H9.00015V5.63424H11.0001ZM9.22099 7.84277C9.40312 7.72073 9.59361 7.6104 9.79137 7.51283L8.90647 5.71924C8.62922 5.85603 8.36245 6.01056 8.10764 6.18131L9.22099 7.84277ZM5.57194 7.13397L6.98839 7.95176L7.98839 6.2197L6.57194 5.40192L5.57194 7.13397ZM5.57194 7.13397L6.57194 5.40192C5.61536 4.84963 4.39218 5.17738 3.83989 6.13397L5.57194 7.13397ZM4.57194 8.86602L5.57194 7.13397L3.83989 6.13397L2.83989 7.86602L4.57194 8.86602ZM4.57194 8.86602L4.57194 8.86602L2.83989 7.86602C2.28761 8.82261 2.61536 10.0458 3.57194 10.5981L4.57194 8.86602ZM5.98852 9.68388L4.57194 8.86602L3.57194 10.5981L4.98852 11.4159L5.98852 9.68388ZM7.00015 12C7.00015 11.8885 7.00378 11.778 7.01092 11.6686L5.01516 11.5385C5.0052 11.6912 5.00015 11.8451 5.00015 12H7.00015ZM7.01092 12.3314C7.00378 12.222 7.00015 12.1115 7.00015 12H5.00015C5.00015 12.1549 5.0052 12.3088 5.01516 12.4615L7.01092 12.3314ZM4.57194 15.134L5.98852 14.3161L4.98852 12.5841L3.57194 13.4019L4.57194 15.134ZM4.57194 15.134L4.57194 15.134L3.57194 13.4019C2.61536 13.9542 2.28761 15.1774 2.83989 16.134L4.57194 15.134ZM5.57194 16.866L4.57194 15.134L2.83989 16.134L3.83989 17.866L5.57194 16.866ZM5.57194 16.866L5.57194 16.866L3.83989 17.866C4.39218 18.8226 5.61536 19.1504 6.57194 18.5981L5.57194 16.866ZM6.98838 16.0482L5.57194 16.866L6.57194 18.5981L7.98838 17.7803L6.98838 16.0482ZM9.79137 16.4872C9.59361 16.3896 9.40312 16.2793 9.22098 16.1572L8.10763 17.8187C8.36245 17.9894 8.62922 18.144 8.90647 18.2808L9.79137 16.4872ZM11.0001 20V18.3658H9.00015V20H11.0001ZM11.0001 20H9.00015C9.00015 21.1046 9.89558 22 11.0001 22V20ZM13.0001 20H11.0001V22H13.0001V20ZM13.0001 20V22C14.1047 22 15.0001 21.1046 15.0001 20H13.0001ZM13.0001 18.3658V20H15.0001V18.3658H13.0001ZM14.7793 16.1572C14.5972 16.2793 14.4067 16.3896 14.2089 16.4872L15.0938 18.2808C15.3711 18.144 15.6378 17.9894 15.8927 17.8187L14.7793 16.1572ZM18.4284 16.866L17.0119 16.0482L16.0119 17.7803L17.4283 18.5981L18.4284 16.866ZM18.4284 16.866H18.4283L17.4284 18.5981C18.3849 19.1504 19.6081 18.8226 20.1604 17.866L18.4284 16.866ZM19.4284 15.134L18.4284 16.866L20.1604 17.866L21.1604 16.134L19.4284 15.134ZM19.4284 15.134V15.134L21.1604 16.134C21.7127 15.1774 21.3849 13.9542 20.4284 13.4019L19.4284 15.134ZM18.0118 14.3161L19.4284 15.134L20.4284 13.4019L19.0118 12.5841L18.0118 14.3161ZM17.0001 12C17.0001 12.1115 16.9965 12.222 16.9894 12.3314L18.9851 12.4615C18.9951 12.3088 19.0001 12.1549 19.0001 12H17.0001ZM16.9894 11.6686C16.9965 11.778 17.0001 11.8885 17.0001 12H19.0001C19.0001 11.8451 18.9951 11.6912 18.9851 11.5385L16.9894 11.6686ZM19.4284 8.86602L18.0118 9.68388L19.0118 11.4159L20.4284 10.5981L19.4284 8.86602ZM19.4284 8.86602L19.4284 8.86602L20.4284 10.5981C21.3849 10.0458 21.7127 8.82261 21.1604 7.86602L19.4284 8.86602ZM18.4284 7.13397L19.4284 8.86602L21.1604 7.86602L20.1604 6.13397L18.4284 7.13397ZM18.4284 7.13397V7.13397L20.1604 6.13397C19.6081 5.17738 18.3849 4.84963 17.4284 5.40192L18.4284 7.13397ZM17.0119 7.95175L18.4284 7.13397L17.4284 5.40192L16.0119 6.2197L17.0119 7.95175ZM14.2089 7.51283C14.4067 7.6104 14.5972 7.72072 14.7793 7.84277L15.8927 6.18131C15.6378 6.01056 15.3711 5.85603 15.0938 5.71924L14.2089 7.51283ZM13.0001 4V5.63423H15.0001V4H13.0001ZM13.0001 4H15.0001C15.0001 2.89543 14.1047 2 13.0001 2V4ZM11.0001 4H13.0001V2H11.0001V4ZM15.0938 5.71924C15.0511 5.69815 15.0232 5.67053 15.0094 5.65025C14.9972 5.63248 15.0001 5.62788 15.0001 5.63423H13.0001C13.0001 6.50299 13.5491 7.18731 14.2089 7.51283L15.0938 5.71924ZM16.0119 6.2197C16.0174 6.21655 16.0149 6.22132 15.9937 6.21972C15.9694 6.21789 15.9319 6.20762 15.8927 6.18131L14.7793 7.84277C15.3915 8.25303 16.2594 8.38623 17.0119 7.95175L16.0119 6.2197ZM18.9851 11.5385C18.9821 11.4913 18.992 11.4537 19.0025 11.4318C19.0118 11.4126 19.0172 11.4128 19.0118 11.4159L18.0118 9.68388C17.2604 10.1177 16.9415 10.9342 16.9894 11.6686L18.9851 11.5385ZM15.8927 17.8187C15.9319 17.7924 15.9694 17.7821 15.9937 17.7803C16.0149 17.7787 16.0174 17.7834 16.0119 17.7803L17.0119 16.0482C16.2594 15.6138 15.3915 15.747 14.7793 16.1572L15.8927 17.8187ZM19.0118 12.5841C19.0172 12.5872 19.0118 12.5874 19.0025 12.5682C18.992 12.5462 18.9821 12.5087 18.9851 12.4615L16.9894 12.3314C16.9415 13.0658 17.2604 13.8823 18.0118 14.3161L19.0118 12.5841ZM8.90647 18.2808C8.94923 18.3019 8.97711 18.3295 8.99094 18.3497C9.00306 18.3675 9.00015 18.3721 9.00015 18.3658H11.0001C11.0001 17.497 10.4512 16.8127 9.79137 16.4872L8.90647 18.2808ZM7.98838 17.7803C7.98292 17.7834 7.98539 17.7787 8.00661 17.7803C8.03085 17.7821 8.06836 17.7924 8.10763 17.8187L9.22098 16.1572C8.60875 15.747 7.74092 15.6138 6.98838 16.0482L7.98838 17.7803ZM15.0001 18.3658C15.0001 18.3721 14.9972 18.3675 15.0094 18.3497C15.0232 18.3295 15.0511 18.3019 15.0938 18.2808L14.2089 16.4872C13.5491 16.8127 13.0001 17.497 13.0001 18.3658H15.0001ZM5.01516 12.4615C5.01823 12.5086 5.00833 12.5462 4.99777 12.5682C4.98851 12.5874 4.9831 12.5872 4.98852 12.5841L5.98852 14.3161C6.73991 13.8823 7.05882 13.0658 7.01092 12.3314L5.01516 12.4615ZM4.98852 11.4159C4.9831 11.4128 4.98851 11.4126 4.99777 11.4318C5.00833 11.4537 5.01823 11.4913 5.01516 11.5385L7.01092 11.6686C7.05882 10.9342 6.73991 10.1177 5.98852 9.68388L4.98852 11.4159ZM8.10764 6.18131C8.06837 6.20763 8.03085 6.21789 8.00662 6.21972C7.9854 6.22133 7.98293 6.21655 7.98839 6.2197L6.98839 7.95176C7.74092 8.38623 8.60876 8.25303 9.22099 7.84277L8.10764 6.18131ZM9.00015 5.63424C9.00015 5.62788 9.00306 5.63248 8.99094 5.65025C8.97711 5.67053 8.94923 5.69815 8.90647 5.71924L9.79137 7.51283C10.4512 7.18731 11.0001 6.50299 11.0001 5.63424H9.00015Z",fill:"currentColor"}),w.jsx("circle",{cx:"12",cy:"12",r:"2",stroke:"currentColor","stroke-width":"1.8","stroke-linecap":"round","stroke-linejoin":"round"})]}),kW=[{id:"profile",title:"Profile",icon:bW,source:"profile"},{id:"themes",title:"Themes",icon:SW,source:"profile"},{id:"settings",title:"Settings",icon:CW,source:"profile"}];function EW(){var b,_,T;const t=ro(),{user:e}=Oi(),[n,r]=y.useState(((b=RR[0])==null?void 0:b.id)??((_=Cx[0])==null?void 0:_.id)),[i,s]=y.useState(!1),[o,a]=y.useState(((T=TR[0])==null?void 0:T.id)??""),[l,c]=y.useState([]),[h,f]=y.useState(!1),p=y.useCallback(async()=>{if(!e){c([]);return}f(!0);const{data:R,error:L}=await Ct.from("projects").select("*").eq("user_id",e.id).order("created_at",{ascending:!1});!L&&R&&c(R),f(!1)},[e]);y.useEffect(()=>{p()},[p]);const g=R=>{c(L=>[R,...L.filter(M=>M.id!==R.id)]),r("my-projects")},v=async(R,L)=>{if(!e)return;const{error:M}=await Ct.from("projects").update({name:L}).eq("id",R).eq("user_id",e.id);if(!M)c(A=>A.map($=>$.id===R?{...$,name:L}:$));else throw console.error("Failed to update project:",M),M},x=async R=>{if(!e)return;const{error:L}=await Ct.from("projects").delete().eq("id",R).eq("user_id",e.id);if(!L)c(M=>M.filter(A=>A.id!==R));else throw console.error("Failed to delete project:",L),L},k=y.useMemo(()=>RR.find(R=>R.id===n),[n]),C=y.useMemo(()=>n==="my-projects"?w.jsx(uB,{projects:l,isLoading:h,onSelectProject:R=>t(`/workspace/${R.project_type}/${R.id}`),onUpdateProject:v,onDeleteProject:x,onRefresh:p}):n==="playground"?w.jsx("p",{className:"muted",children:"Experiment with ideas here. Add tools or widgets as they are built."}):w.jsx("p",{className:"muted",children:"Choose a workspace from the sidebar to get started."}),[n,p,h,t,l]);return w.jsxs("div",{className:"app-layout",children:[w.jsx(wW,{workspaces:Cx,profileMenuItems:kW,activeWorkspaceId:n,onSelectWorkspace:R=>{if(R==="new-project"){s(!0);return}r(R)}}),w.jsx(_W,{activeWorkspace:k,content:C}),w.jsx(aB,{isOpen:i,onClose:()=>s(!1),projectTypes:TR,selectedProjectTypeId:o,onSelectProjectType:a,onProjectCreated:g,existingProjects:l})]})}const RW=()=>w.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 48 48",children:[w.jsx("path",{fill:"#FFC107",d:"M43.611 20.083H42V20H24v8h11.303c-1.649 4.657-6.08 8-11.303 8-6.627 0-12-5.373-12-12s12-5.373 12-12c3.059 0 5.842 1.154 7.961 3.039l5.657-5.657C34.046 6.053 29.268 4 24 4 12.955 4 4 12.955 4 24s8.955 20 20 20 20-8.955 20-20c0-2.641-.21-5.236-.611-7.743z"}),w.jsx("path",{fill:"#FF3D00",d:"M6.306 14.691l6.571 4.819C14.655 15.108 18.961 12 24 12c3.059 0 5.842 1.154 7.961 3.039l5.657-5.657C34.046 6.053 29.268 4 24 4 16.318 4 9.656 8.337 6.306 14.691z"}),w.jsx("path",{fill:"#4CAF50",d:"M24 44c5.166 0 9.86-1.977 13.409-5.192l-6.19-5.238C29.211 35.091 26.715 36 24 36c-5.202 0-9.619-3.317-11.283-7.946l-6.522 5.025C9.505 39.556 16.227 44 24 44z"}),w.jsx("path",{fill:"#1976D2",d:"M43.611 20.083H42V20H24v8h11.303c-.792 2.237-2.231 4.166-4.087 5.571l6.19 5.238C42.022 35.026 44 30.038 44 24c0-2.641-.21-5.236-.611-7.743z"})]}),PR=({children:t})=>w.jsx("div",{className:"rounded-2xl border border-border bg-foreground/5 backdrop-blur-sm transition-colors focus-within:border-violet-400/70 focus-within:bg-violet-500/10",children:t}),nA=({title:t=w.jsx("span",{className:"font-light text-foreground tracking-tighter",children:"Welcome"}),description:e="Access your account and continue your journey with us",heroImageSrc:n,onSignIn:r,onGoogleSignIn:i,onResetPassword:s,onCreateAccount:o,submitButtonText:a="Sign In",alternateActionText:l="New to our platform?",alternateActionLinkText:c="Create Account",email:h="",password:f="",onEmailChange:p,onPasswordChange:g,error:v,submitting:x=!1})=>{const[k,C]=y.useState(!1);return w.jsxs("div",{className:"h-[100dvh] flex flex-col md:flex-row font-geist w-[100dvw]",children:[w.jsx("section",{className:"flex-1 flex items-center justify-center p-8",children:w.jsx("div",{className:"w-full max-w-md",children:w.jsxs("div",{className:"flex flex-col gap-6",children:[w.jsx("h1",{className:"text-4xl md:text-5xl font-semibold leading-tight",children:t}),w.jsx("p",{className:"text-muted-foreground",children:e}),w.jsxs("form",{className:"space-y-5",onSubmit:r,children:[w.jsxs("div",{children:[w.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Email Address"}),w.jsx(PR,{children:w.jsx("input",{name:"email",type:"email",placeholder:"Enter your email address",className:"w-full bg-transparent text-sm p-4 rounded-2xl focus:outline-none",value:h,onChange:b=>p==null?void 0:p(b.target.value),required:!0})})]}),w.jsxs("div",{children:[w.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Password"}),w.jsx(PR,{children:w.jsxs("div",{className:"relative",children:[w.jsx("input",{name:"password",type:k?"text":"password",placeholder:"Enter your password",className:"w-full bg-transparent text-sm p-4 pr-12 rounded-2xl focus:outline-none",value:f,onChange:b=>g==null?void 0:g(b.target.value),required:!0}),w.jsx("button",{type:"button",onClick:()=>C(!k),className:"absolute inset-y-0 right-3 flex items-center",children:k?w.jsx(QV,{className:"w-5 h-5 text-muted-foreground hover:text-foreground transition-colors"}):w.jsx(eW,{className:"w-5 h-5 text-muted-foreground hover:text-foreground transition-colors"})})]})})]}),w.jsxs("div",{className:"flex items-center justify-between text-sm",children:[w.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[w.jsx("input",{type:"checkbox",name:"rememberMe",className:"custom-checkbox"}),w.jsx("span",{className:"text-foreground/90",children:"Keep me signed in"})]}),s&&w.jsx("a",{href:"#",onClick:b=>{b.preventDefault(),s()},className:"hover:underline text-violet-400 transition-colors",children:"Reset password"})]}),v&&w.jsx("p",{className:"text-red-500 text-sm",children:v}),w.jsx("button",{type:"submit",className:"w-full rounded-2xl bg-primary py-4 font-medium text-primary-foreground hover:bg-primary/90 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",disabled:x,children:x?"Please wait...":a})]}),i&&w.jsxs(w.Fragment,{children:[w.jsxs("div",{className:"relative flex items-center justify-center",children:[w.jsx("span",{className:"w-full border-t border-border"}),w.jsx("span",{className:"px-4 text-sm text-muted-foreground bg-background absolute",children:"Or continue with"})]}),w.jsxs("button",{onClick:i,className:"w-full flex items-center justify-center gap-3 border border-border rounded-2xl py-4 hover:bg-secondary transition-colors",children:[w.jsx(RW,{}),"Continue with Google"]})]}),o&&w.jsxs("p",{className:"text-center text-sm text-muted-foreground",children:[l," ",w.jsx("a",{href:"#",onClick:b=>{b.preventDefault(),o()},className:"text-violet-400 hover:underline transition-colors",children:c})]})]})})}),n&&w.jsx("section",{className:"hidden md:block flex-1 relative p-4",children:w.jsx("div",{className:"absolute inset-4 rounded-3xl bg-cover bg-center",style:{backgroundImage:`url(${n})`}})})]})};function TW(){const t=ro(),{signIn:e}=Oi(),[n,r]=y.useState(""),[i,s]=y.useState(""),[o,a]=y.useState(null),[l,c]=y.useState(!1),h=async p=>{p.preventDefault(),a(null),c(!0);try{await e(n,i),t("/app")}catch(g){a(g instanceof Error?g.message:"Unable to sign in.")}finally{c(!1)}},f=()=>{t("/register")};return w.jsx(nA,{title:w.jsx("span",{className:"font-light text-foreground tracking-tighter",children:"Welcome Back"}),description:"Access your dashboard to keep building.",heroImageSrc:"https://images.unsplash.com/photo-1642615835477-d303d7dc9ee9?w=2160&q=80",onSignIn:h,onCreateAccount:f,submitButtonText:"Sign In",alternateActionText:"Need an account?",alternateActionLinkText:"Register here",email:n,password:i,onEmailChange:r,onPasswordChange:s,error:o,submitting:l})}function PW(){const t=ro(),{signUp:e}=Oi(),[n,r]=y.useState(""),[i,s]=y.useState(""),[o,a]=y.useState(null),[l,c]=y.useState(!1),h=async p=>{p.preventDefault(),a(null),c(!0);try{await e(n,i),t("/app")}catch(g){a(g instanceof Error?g.message:"Unable to register.")}finally{c(!1)}},f=()=>{t("/login")};return w.jsx(nA,{title:w.jsx("span",{className:"font-light text-foreground tracking-tighter",children:"Create an Account"}),description:"Set up access to the app and future features.",heroImageSrc:"https://images.unsplash.com/photo-1618005182384-a83a8bd57fbe?w=2160&q=80",onSignIn:h,onCreateAccount:f,submitButtonText:"Create Account",alternateActionText:"Already registered?",alternateActionLinkText:"Log in here",email:n,password:i,onEmailChange:r,onPasswordChange:s,error:o,submitting:l})}const rA=y.createContext(void 0);function ch(t){typeof document>"u"||(document.documentElement.dataset.theme=t)}function LR(){return typeof window>"u"?"ink-wash":window.localStorage.getItem("theme-preference")??"ink-wash"}function LW({children:t}){const{user:e}=Oi(),[n,r]=y.useState(()=>{const h=LR();return ch(h),h}),[i,s]=y.useState(!0),[o,a]=y.useState(null);y.useEffect(()=>{let h=!0;return(async()=>{if(!(e!=null&&e.id)){const x=LR();r(x),ch(x),a(null),s(!1);return}s(!0);const{data:p,error:g}=await Ct.from("profiles").select("theme_preference").eq("id",e.id).single();if(!h)return;const v=(p==null?void 0:p.theme_preference)??"ink-wash";r(v),ch(v),window.localStorage.setItem("theme-preference",v),a(g&&g.code!=="PGRST116"?g.message:null),s(!1)})(),()=>{h=!1}},[e==null?void 0:e.id]),y.useEffect(()=>{ch(n)},[n]);const l=y.useCallback(async h=>{if(r(h),ch(h),window.localStorage.setItem("theme-preference",h),a(null),!(e!=null&&e.id))return;const{error:f}=await Ct.from("profiles").upsert({id:e.id,theme_preference:h});a(f?f.message:"Theme saved")},[e==null?void 0:e.id]),c=y.useMemo(()=>({theme:n,loading:i,status:o,setThemePreference:l}),[i,o,n,l]);return w.jsx(rA.Provider,{value:c,children:t})}function MW(){const t=y.useContext(rA);if(!t)throw new Error("useTheme must be used within a ThemeProvider");return t}const AW=[{id:"ink-wash",name:"Ink Wash",description:"Graphite neutrals inspired by monochrome ink."},{id:"light",name:"Light",description:"Bright, crisp default palette."},{id:"dark",name:"Dark",description:"Low-glare palette for late sessions."}];function MR(){const{theme:t,setThemePreference:e,status:n}=MW(),[r,i]=y.useState(null);y.useEffect(()=>{i(n)},[n]);const s=async o=>{i(null),await e(o)};return w.jsxs("div",{className:"settings-panel__content",children:[w.jsx("h2",{children:"Themes"}),w.jsx("p",{children:"Choose how the interface looks. Changes apply instantly and are stored with your profile."}),w.jsxs("div",{className:"settings-card",children:[w.jsx("div",{className:"settings-card__header",children:w.jsxs("div",{children:[w.jsx("h3",{children:"Theme"}),w.jsx("p",{children:"System follows your OS preference; selecting any palette applies it immediately."})]})}),w.jsx("div",{className:"theme-grid",children:AW.map(o=>w.jsxs("button",{type:"button",className:`theme-card ${t===o.id?"theme-card--active":""}`,onClick:()=>s(o.id),children:[w.jsx("div",{className:"theme-card__preview","data-theme":o.id}),w.jsxs("div",{className:"theme-card__body",children:[w.jsx("div",{className:"theme-card__title",children:o.name}),w.jsx("p",{className:"theme-card__description",children:o.description})]})]},o.id))}),r?w.jsx("p",{className:"settings-field__help",children:r}):null]})]})}const AR=[{sections:[{id:"profile",label:"Profile"},{id:"account",label:"Account"}]},{heading:"Access",sections:[{id:"friends",label:"Friends"},{id:"notifications",label:"Notifications"}]},{heading:"Appearance",sections:[{id:"appearance",label:"Themes"}]}];function NW(){return w.jsx("div",{className:"settings-layout",children:w.jsxs("div",{className:"settings-layout__shell",children:[w.jsx("header",{className:"settings-layout__header",children:w.jsx("div",{children:w.jsx("p",{className:"settings-layout__eyebrow",children:"Settings Center"})})}),w.jsxs("div",{className:"settings-layout__body",children:[w.jsx("nav",{className:"settings-nav","aria-label":"Settings sections",children:AR.map((t,e)=>w.jsxs("div",{className:"settings-nav__group",children:[t.heading?w.jsx("p",{className:"settings-nav__group-title",children:t.heading}):null,w.jsx("div",{className:"settings-nav__list",children:t.sections.map(n=>w.jsx(H3,{to:n.id,replace:!0,className:({isActive:r})=>`settings-nav__item ${r?"settings-nav__item--active":""}`,children:w.jsx("span",{className:"settings-nav__label",children:n.label})},n.id))}),e<AR.length-1?w.jsx("div",{className:"settings-nav__divider","aria-hidden":!0}):null]},t.heading??`group-${e}`))}),w.jsx("section",{className:"settings-panel","aria-live":"polite",children:w.jsx(tD,{})})]})]})})}function NR(){return w.jsxs("div",{className:"settings-panel__content",children:[w.jsx("h2",{children:"Notifications"}),w.jsx("p",{children:"Control emails and alerts."})]})}function jR(){const{user:t}=Oi(),{profile:e,avatarUrl:n,isLoading:r,refreshProfile:i}=tA(),s=y.useRef(null),[o,a]=y.useState({displayName:"",bio:"",website:"",socialAccounts:["","",""],avatarUrl:""}),[l,c]=y.useState(null),[h,f]=y.useState(!1),[p,g]=y.useState(!1);y.useEffect(()=>{e&&a({displayName:e.displayName,bio:e.bio,website:e.website,socialAccounts:[...e.socialAccounts],avatarUrl:e.avatarUrl})},[e]);const v=r||!e,x=o.displayName||(e==null?void 0:e.emailFallback)||(t==null?void 0:t.email)||"Profile",k=x.split(/\s+/).filter(Boolean).slice(0,2).map(R=>{var L;return(L=R[0])==null?void 0:L.toUpperCase()}).join(""),C=R=>L=>{a({...o,[R]:L.target.value})},b=R=>L=>{a(M=>{const A=[...M.socialAccounts];return A[R]=L.target.value,{...M,socialAccounts:A}})},_=async R=>{var M,A;const L=(M=R.target.files)==null?void 0:M[0];if(!(!L||!(t!=null&&t.id))){g(!0),c(null);try{const $=((A=L.name.split(".").pop())==null?void 0:A.toLowerCase())||"jpg",j=`${t.id}-${Date.now()}.${$}`,V=`${t.id}/${j}`,{error:U}=await Ct.storage.from("avatars").upload(V,L,{cacheControl:"0",upsert:!0,contentType:L.type||"image/jpeg"});if(U)throw U;const{error:B}=await Ct.from("profiles").update({avatar_url:V}).eq("id",t.id);if(B)throw B;a(Z=>({...Z,avatarUrl:V})),c("Profile picture updated"),await i()}catch($){c($ instanceof Error?$.message:"Unable to update profile picture")}finally{g(!1),R.target&&(R.target.value="")}}},T=async()=>{if(t!=null&&t.id){f(!0),c(null);try{const R={id:t.id,display_name:o.displayName,bio:o.bio,website:o.website,social_accounts:o.socialAccounts.map(M=>M.trim()).filter(Boolean).join(`
`),avatar_url:o.avatarUrl??null},{error:L}=await Ct.from("profiles").upsert(R);if(L)throw L;c("Profile updated"),await i()}catch(R){c(R instanceof Error?R.message:"Unable to update profile")}finally{f(!1)}}};return w.jsxs("div",{className:"settings-panel__content",children:[w.jsx("h2",{children:"Profile"}),w.jsxs("div",{className:"settings-profile__header",children:[w.jsxs("div",{className:`settings-profile__avatar ${v?"settings-profile__avatar--loading":""}`,onClick:()=>{var R;return(R=s.current)==null?void 0:R.click()},"aria-busy":p,children:[v?w.jsx("div",{className:"settings-profile__avatar-skeleton"}):n?w.jsx("img",{src:n,alt:"Profile avatar"}):w.jsx("span",{children:k}),!v&&w.jsx("div",{className:"settings-profile__avatar-overlay",children:p?"Uploading":"Change profile picture"})]}),w.jsx("input",{ref:s,type:"file",accept:"image/*",style:{display:"none"},onChange:_}),w.jsx("div",{className:"settings-profile__identity",children:v?w.jsxs(w.Fragment,{children:[w.jsx("div",{className:"settings-profile__name-skeleton"}),w.jsx("div",{className:"settings-profile__bio-skeleton"})]}):w.jsxs(w.Fragment,{children:[w.jsx("h3",{children:x}),w.jsx("p",{children:o.bio||"Because even heroes need a profile."})]})})]}),w.jsxs("div",{className:"settings-card",children:[w.jsx("div",{className:"settings-card__header",children:w.jsxs("div",{children:[w.jsx("h3",{children:"Public details"}),w.jsx("p",{children:"Your profile card carries these details wherever it wanders."})]})}),w.jsxs("div",{className:"settings-form",children:[w.jsxs("label",{className:"settings-field",children:[w.jsx("span",{className:"settings-field__label",children:"Display name"}),w.jsx("input",{type:"text",value:o.displayName,onChange:C("displayName")}),w.jsx("p",{className:"settings-field__help",children:"If you leave this blank, your email graciously takes the stage."})]}),w.jsxs("label",{className:"settings-field",children:[w.jsx("span",{className:"settings-field__label",children:"Short bio"}),w.jsx("textarea",{rows:3,value:o.bio,onChange:C("bio")}),w.jsx("p",{className:"settings-field__help",children:"Share a tiny tale about yourself for those who peek at your profile."})]})]})]}),w.jsxs("div",{className:"settings-card",children:[w.jsx("div",{className:"settings-card__header",children:w.jsxs("div",{children:[w.jsx("h3",{children:"Links"}),w.jsx("p",{children:"Share the destinations you want teammates to find."})]})}),w.jsxs("div",{className:"settings-form",children:[w.jsxs("label",{className:"settings-field",children:[w.jsx("span",{className:"settings-field__label",children:"Website"}),w.jsx("input",{type:"url",value:o.website,onChange:C("website"),placeholder:"https://"}),w.jsx("p",{className:"settings-field__help",children:"Portfolio, company site, or docs."})]}),w.jsx("hr",{className:"settings-divider"}),w.jsxs("div",{className:"settings-social",children:[w.jsx("div",{className:"settings-social__title",children:"Social accounts"}),w.jsx("div",{className:"settings-social__list",children:o.socialAccounts.map((R,L)=>w.jsxs("label",{className:"settings-field settings-field--inline",children:[w.jsx("span",{className:"settings-social__icon","aria-hidden":"true",children:w.jsx("svg",{width:"20px",height:"20px",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:w.jsx("path",{d:"M10.6666 13.3333L10.0808 12.7475C9.29978 11.9664 9.29978 10.7001 10.0808 9.91905L14.5857 5.41416C15.3668 4.63311 16.6331 4.63311 17.4142 5.41415L18.5857 6.58572C19.3668 7.36677 19.3668 8.6331 18.5857 9.41415L16.9999 10.9999M13.3333 10.6666L13.919 11.2524C14.7001 12.0335 14.7001 13.2998 13.919 14.0808L9.41415 18.5857C8.6331 19.3668 7.36677 19.3668 6.58572 18.5857L5.41416 17.4142C4.63311 16.6331 4.63311 15.3668 5.41416 14.5857L6.99994 12.9999",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}),w.jsx("input",{type:"text",value:R,onChange:b(L),placeholder:"Profile URL or handle"})]},L))}),w.jsx("p",{className:"settings-field__help",children:"Share up to three profiles for teammates to follow."})]})]})]}),w.jsxs("div",{className:"settings-profile__footer",children:[w.jsx("button",{className:"button button--primary",onClick:T,disabled:h,children:h?"Updating":"Update Profile"}),l?w.jsx("span",{className:"settings-profile__status",children:l}):null]})]})}function jW(){const{user:t}=Oi(),e=ro(),[n,r]=y.useState(null),[i,s]=y.useState(!1),[o,a]=y.useState({email:"",password:"",confirmText:""}),[l,c]=y.useState(!1),h=async()=>{if(!(t!=null&&t.email))return;const{error:p}=await Ct.auth.resetPasswordForEmail(t.email);r(p?p.message:"Reset email sent. Check your inbox.")},f=async()=>{if(!(!(t!=null&&t.id)||!t.email)&&!(o.email!==t.email||o.confirmText!=="DELETE"||!o.password)){c(!0);try{const{error:p}=await Ct.auth.signInWithPassword({email:t.email,password:o.password});if(p)throw p;const g=["projects","assets","canvases"];for(const v of g)await Ct.from(v).delete().eq("user_id",t.id);await Ct.storage.from("avatars").remove([`avatars/${t.id}.jpg`]),await Ct.from("profiles").delete().eq("id",t.id),await Ct.auth.admin.deleteUser(t.id),await Ct.auth.signOut(),e("/login",{replace:!0})}catch(p){r(p instanceof Error?p.message:"Unable to delete account")}finally{c(!1)}}};return w.jsxs("div",{className:"settings-panel__content",children:[w.jsx("h2",{children:"Account"}),w.jsx("p",{children:"Manage your credentials, recovery, and the nuclear option to delete everything."}),w.jsxs("div",{className:"settings-card",children:[w.jsx("div",{className:"settings-card__header",children:w.jsxs("div",{children:[w.jsx("h3",{children:"Login details"}),w.jsx("p",{children:"Your email is how you sign in and receive account updates."})]})}),w.jsxs("div",{className:"settings-form",children:[w.jsxs("label",{className:"settings-field",children:[w.jsx("span",{className:"settings-field__label",children:"Email address"}),w.jsx("input",{type:"email",value:(t==null?void 0:t.email)??"",readOnly:!0}),w.jsx("p",{className:"settings-field__help",children:"This comes from Supabase auth and cannot be edited here."})]}),w.jsx("button",{className:"button button--primary",type:"button",onClick:h,children:"Reset password"}),n?w.jsx("p",{className:"settings-field__help",children:n}):null]})]}),w.jsxs("div",{className:"settings-card settings-card--danger",children:[w.jsx("div",{className:"settings-card__header",children:w.jsxs("div",{children:[w.jsx("h3",{children:"Delete account"}),w.jsx("p",{children:"This permanently removes your account, data, and files."})]})}),w.jsx("button",{className:"button button--danger",type:"button",onClick:()=>s(!0),children:"Delete Account"})]}),i?w.jsx("div",{className:"modal-backdrop",children:w.jsxs("div",{className:"modal",children:[w.jsxs("header",{className:"modal__header",children:[w.jsx("h3",{children:"Confirm deletion"}),w.jsx("button",{className:"modal__close",onClick:()=>s(!1),"aria-label":"Close",children:""})]}),w.jsxs("div",{className:"modal__body",children:[w.jsx("p",{children:"Type your email and password to confirm. Paste is disabled to prevent mistakes."}),w.jsxs("label",{className:"settings-field",children:[w.jsx("span",{className:"settings-field__label",children:"Email"}),w.jsx("input",{type:"email",value:o.email,onChange:p=>a({...o,email:p.target.value}),onPaste:p=>p.preventDefault()})]}),w.jsxs("label",{className:"settings-field",children:[w.jsx("span",{className:"settings-field__label",children:"Password"}),w.jsx("input",{type:"password",value:o.password,onChange:p=>a({...o,password:p.target.value}),onPaste:p=>p.preventDefault()})]}),w.jsxs("label",{className:"settings-field",children:[w.jsx("span",{className:"settings-field__label",children:"Confirmation text"}),w.jsx("input",{type:"text",value:o.confirmText,placeholder:"Type DELETE",onChange:p=>a({...o,confirmText:p.target.value}),onPaste:p=>p.preventDefault()})]}),w.jsx("p",{className:"modal__warning",children:"This action will delete projects, assets, canvases, and your Supabase account. It cannot be undone."})]}),w.jsxs("footer",{className:"modal__footer",children:[w.jsx("button",{className:"button",onClick:()=>s(!1),disabled:l,children:"Cancel"}),w.jsx("button",{className:"button button--danger",onClick:f,disabled:l||!o.email||!o.password||o.email!==(t==null?void 0:t.email)||o.confirmText!=="DELETE",children:l?"Deleting":"Delete everything"})]})]})}):null]})}var IW=Math.PI/180;function OW(){return typeof window<"u"&&({}.toString.call(window)==="[object Window]"||{}.toString.call(window)==="[object global]")}const zc=typeof global<"u"?global:typeof window<"u"?window:typeof WorkerGlobalScope<"u"?self:{},tt={_global:zc,version:"8.1.3",isBrowser:OW(),isUnminified:/param/.test((function(t){}).toString()),dblClickWindow:400,getAngle(t){return tt.angleDeg?t*IW:t},enableTrace:!1,pointerEventsEnabled:!0,autoDrawEnabled:!0,hitOnDragEnabled:!1,capturePointerEventsEnabled:!1,_mouseListenClick:!1,_touchListenClick:!1,_pointerListenClick:!1,_mouseInDblClickWindow:!1,_touchInDblClickWindow:!1,_pointerInDblClickWindow:!1,pixelRatio:typeof window<"u"&&window.devicePixelRatio||1,dragDistance:3,angleDeg:!0,showWarnings:!0,dragButtons:[0,1],isDragging(){return tt.DD.isDragging},isDragReady(){return!!tt.DD.node},document:zc.document,_injectGlobal(t){zc.Konva=t}},$n=t=>{tt[t.prototype.getClassName()]=t};tt._injectGlobal(tt);class Yi{constructor(e=[1,0,0,1,0,0]){this.dirty=!1,this.m=e&&e.slice()||[1,0,0,1,0,0]}reset(){this.m[0]=1,this.m[1]=0,this.m[2]=0,this.m[3]=1,this.m[4]=0,this.m[5]=0}copy(){return new Yi(this.m)}copyInto(e){e.m[0]=this.m[0],e.m[1]=this.m[1],e.m[2]=this.m[2],e.m[3]=this.m[3],e.m[4]=this.m[4],e.m[5]=this.m[5]}point(e){var n=this.m;return{x:n[0]*e.x+n[2]*e.y+n[4],y:n[1]*e.x+n[3]*e.y+n[5]}}translate(e,n){return this.m[4]+=this.m[0]*e+this.m[2]*n,this.m[5]+=this.m[1]*e+this.m[3]*n,this}scale(e,n){return this.m[0]*=e,this.m[1]*=e,this.m[2]*=n,this.m[3]*=n,this}rotate(e){var n=Math.cos(e),r=Math.sin(e),i=this.m[0]*n+this.m[2]*r,s=this.m[1]*n+this.m[3]*r,o=this.m[0]*-r+this.m[2]*n,a=this.m[1]*-r+this.m[3]*n;return this.m[0]=i,this.m[1]=s,this.m[2]=o,this.m[3]=a,this}getTranslation(){return{x:this.m[4],y:this.m[5]}}skew(e,n){var r=this.m[0]+this.m[2]*n,i=this.m[1]+this.m[3]*n,s=this.m[2]+this.m[0]*e,o=this.m[3]+this.m[1]*e;return this.m[0]=r,this.m[1]=i,this.m[2]=s,this.m[3]=o,this}multiply(e){var n=this.m[0]*e.m[0]+this.m[2]*e.m[1],r=this.m[1]*e.m[0]+this.m[3]*e.m[1],i=this.m[0]*e.m[2]+this.m[2]*e.m[3],s=this.m[1]*e.m[2]+this.m[3]*e.m[3],o=this.m[0]*e.m[4]+this.m[2]*e.m[5]+this.m[4],a=this.m[1]*e.m[4]+this.m[3]*e.m[5]+this.m[5];return this.m[0]=n,this.m[1]=r,this.m[2]=i,this.m[3]=s,this.m[4]=o,this.m[5]=a,this}invert(){var e=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),n=this.m[3]*e,r=-this.m[1]*e,i=-this.m[2]*e,s=this.m[0]*e,o=e*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),a=e*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);return this.m[0]=n,this.m[1]=r,this.m[2]=i,this.m[3]=s,this.m[4]=o,this.m[5]=a,this}getMatrix(){return this.m}setAbsolutePosition(e,n){var r=this.m[0],i=this.m[1],s=this.m[2],o=this.m[3],a=this.m[4],l=this.m[5],c=(r*(n-l)-i*(e-a))/(r*o-i*s),h=(e-a-s*c)/r;return this.translate(h,c)}decompose(){var e=this.m[0],n=this.m[1],r=this.m[2],i=this.m[3],s=this.m[4],o=this.m[5],a=e*i-n*r;let l={x:s,y:o,rotation:0,scaleX:0,scaleY:0,skewX:0,skewY:0};if(e!=0||n!=0){var c=Math.sqrt(e*e+n*n);l.rotation=n>0?Math.acos(e/c):-Math.acos(e/c),l.scaleX=c,l.scaleY=a/c,l.skewX=(e*r+n*i)/a,l.skewY=0}else if(r!=0||i!=0){var h=Math.sqrt(r*r+i*i);l.rotation=Math.PI/2-(i>0?Math.acos(-r/h):-Math.acos(r/h)),l.scaleX=a/h,l.scaleY=h,l.skewX=0,l.skewY=(e*r+n*i)/a}return l.rotation=ne._getRotation(l.rotation),l}}var DW="[object Array]",FW="[object Number]",BW="[object String]",$W="[object Boolean]",zW=Math.PI/180,UW=180/Math.PI,d1="#",VW="",WW="0",HW="Konva warning: ",IR="Konva error: ",GW="rgb(",h1={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],transparent:[255,255,255,0],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]},qW=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/,xg=[];const YW=typeof requestAnimationFrame<"u"&&requestAnimationFrame||function(t){setTimeout(t,60)},ne={_isElement(t){return!!(t&&t.nodeType==1)},_isFunction(t){return!!(t&&t.constructor&&t.call&&t.apply)},_isPlainObject(t){return!!t&&t.constructor===Object},_isArray(t){return Object.prototype.toString.call(t)===DW},_isNumber(t){return Object.prototype.toString.call(t)===FW&&!isNaN(t)&&isFinite(t)},_isString(t){return Object.prototype.toString.call(t)===BW},_isBoolean(t){return Object.prototype.toString.call(t)===$W},isObject(t){return t instanceof Object},isValidSelector(t){if(typeof t!="string")return!1;var e=t[0];return e==="#"||e==="."||e===e.toUpperCase()},_sign(t){return t===0||t>0?1:-1},requestAnimFrame(t){xg.push(t),xg.length===1&&YW(function(){const e=xg;xg=[],e.forEach(function(n){n()})})},createCanvasElement(){var t=document.createElement("canvas");try{t.style=t.style||{}}catch{}return t},createImageElement(){return document.createElement("img")},_isInDocument(t){for(;t=t.parentNode;)if(t==document)return!0;return!1},_urlToImage(t,e){var n=ne.createImageElement();n.onload=function(){e(n)},n.src=t},_rgbToHex(t,e,n){return((1<<24)+(t<<16)+(e<<8)+n).toString(16).slice(1)},_hexToRgb(t){t=t.replace(d1,VW);var e=parseInt(t,16);return{r:e>>16&255,g:e>>8&255,b:e&255}},getRandomColor(){for(var t=(Math.random()*16777215<<0).toString(16);t.length<6;)t=WW+t;return d1+t},getRGB(t){var e;return t in h1?(e=h1[t],{r:e[0],g:e[1],b:e[2]}):t[0]===d1?this._hexToRgb(t.substring(1)):t.substr(0,4)===GW?(e=qW.exec(t.replace(/ /g,"")),{r:parseInt(e[1],10),g:parseInt(e[2],10),b:parseInt(e[3],10)}):{r:0,g:0,b:0}},colorToRGBA(t){return t=t||"black",ne._namedColorToRBA(t)||ne._hex3ColorToRGBA(t)||ne._hex6ColorToRGBA(t)||ne._rgbColorToRGBA(t)||ne._rgbaColorToRGBA(t)||ne._hslColorToRGBA(t)},_namedColorToRBA(t){var e=h1[t.toLowerCase()];return e?{r:e[0],g:e[1],b:e[2],a:1}:null},_rgbColorToRGBA(t){if(t.indexOf("rgb(")===0){t=t.match(/rgb\(([^)]+)\)/)[1];var e=t.split(/ *, */).map(Number);return{r:e[0],g:e[1],b:e[2],a:1}}},_rgbaColorToRGBA(t){if(t.indexOf("rgba(")===0){t=t.match(/rgba\(([^)]+)\)/)[1];var e=t.split(/ *, */).map(Number);return{r:e[0],g:e[1],b:e[2],a:e[3]}}},_hex6ColorToRGBA(t){if(t[0]==="#"&&t.length===7)return{r:parseInt(t.slice(1,3),16),g:parseInt(t.slice(3,5),16),b:parseInt(t.slice(5,7),16),a:1}},_hex3ColorToRGBA(t){if(t[0]==="#"&&t.length===4)return{r:parseInt(t[1]+t[1],16),g:parseInt(t[2]+t[2],16),b:parseInt(t[3]+t[3],16),a:1}},_hslColorToRGBA(t){if(/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.test(t)){const[e,...n]=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(t),r=Number(n[0])/360,i=Number(n[1])/100,s=Number(n[2])/100;let o,a,l;if(i===0)return l=s*255,{r:Math.round(l),g:Math.round(l),b:Math.round(l),a:1};s<.5?o=s*(1+i):o=s+i-s*i;const c=2*s-o,h=[0,0,0];for(let f=0;f<3;f++)a=r+1/3*-(f-1),a<0&&a++,a>1&&a--,6*a<1?l=c+(o-c)*6*a:2*a<1?l=o:3*a<2?l=c+(o-c)*(2/3-a)*6:l=c,h[f]=l*255;return{r:Math.round(h[0]),g:Math.round(h[1]),b:Math.round(h[2]),a:1}}},haveIntersection(t,e){return!(e.x>t.x+t.width||e.x+e.width<t.x||e.y>t.y+t.height||e.y+e.height<t.y)},cloneObject(t){var e={};for(var n in t)this._isPlainObject(t[n])?e[n]=this.cloneObject(t[n]):this._isArray(t[n])?e[n]=this.cloneArray(t[n]):e[n]=t[n];return e},cloneArray(t){return t.slice(0)},degToRad(t){return t*zW},radToDeg(t){return t*UW},_degToRad(t){return ne.warn("Util._degToRad is removed. Please use public Util.degToRad instead."),ne.degToRad(t)},_radToDeg(t){return ne.warn("Util._radToDeg is removed. Please use public Util.radToDeg instead."),ne.radToDeg(t)},_getRotation(t){return tt.angleDeg?ne.radToDeg(t):t},_capitalize(t){return t.charAt(0).toUpperCase()+t.slice(1)},throw(t){throw new Error(IR+t)},error(t){console.error(IR+t)},warn(t){tt.showWarnings&&console.warn(HW+t)},each(t,e){for(var n in t)e(n,t[n])},_inRange(t,e,n){return e<=t&&t<n},_getProjectionToSegment(t,e,n,r,i,s){var o,a,l,c=(t-n)*(t-n)+(e-r)*(e-r);if(c==0)o=t,a=e,l=(i-n)*(i-n)+(s-r)*(s-r);else{var h=((i-t)*(n-t)+(s-e)*(r-e))/c;h<0?(o=t,a=e,l=(t-i)*(t-i)+(e-s)*(e-s)):h>1?(o=n,a=r,l=(n-i)*(n-i)+(r-s)*(r-s)):(o=t+h*(n-t),a=e+h*(r-e),l=(o-i)*(o-i)+(a-s)*(a-s))}return[o,a,l]},_getProjectionToLine(t,e,n){var r=ne.cloneObject(t),i=Number.MAX_VALUE;return e.forEach(function(s,o){if(!(!n&&o===e.length-1)){var a=e[(o+1)%e.length],l=ne._getProjectionToSegment(s.x,s.y,a.x,a.y,t.x,t.y),c=l[0],h=l[1],f=l[2];f<i&&(r.x=c,r.y=h,i=f)}}),r},_prepareArrayForTween(t,e,n){var r,i=[],s=[];if(t.length>e.length){var o=e;e=t,t=o}for(r=0;r<t.length;r+=2)i.push({x:t[r],y:t[r+1]});for(r=0;r<e.length;r+=2)s.push({x:e[r],y:e[r+1]});var a=[];return s.forEach(function(l){var c=ne._getProjectionToLine(l,i,n);a.push(c.x),a.push(c.y)}),a},_prepareToStringify(t){var e;t.visitedByCircularReferenceRemoval=!0;for(var n in t)if(t.hasOwnProperty(n)&&t[n]&&typeof t[n]=="object"){if(e=Object.getOwnPropertyDescriptor(t,n),t[n].visitedByCircularReferenceRemoval||ne._isElement(t[n]))if(e.configurable)delete t[n];else return null;else if(ne._prepareToStringify(t[n])===null)if(e.configurable)delete t[n];else return null}return delete t.visitedByCircularReferenceRemoval,t},_assign(t,e){for(var n in e)t[n]=e[n];return t},_getFirstPointerId(t){return t.touches?t.changedTouches[0].identifier:999}};function Rl(t){return ne._isString(t)?'"'+t+'"':Object.prototype.toString.call(t)==="[object Number]"||ne._isBoolean(t)?t:Object.prototype.toString.call(t)}function iA(t){return t>255?255:t<0?0:Math.round(t)}function Me(){if(tt.isUnminified)return function(t,e){return ne._isNumber(t)||ne.warn(Rl(t)+' is a not valid value for "'+e+'" attribute. The value should be a number.'),t}}function sA(t){if(tt.isUnminified)return function(e,n){let r=ne._isNumber(e),i=ne._isArray(e)&&e.length==t;return!r&&!i&&ne.warn(Rl(e)+' is a not valid value for "'+n+'" attribute. The value should be a number or Array<number>('+t+")"),e}}function oS(){if(tt.isUnminified)return function(t,e){var n=ne._isNumber(t),r=t==="auto";return n||r||ne.warn(Rl(t)+' is a not valid value for "'+e+'" attribute. The value should be a number or "auto".'),t}}function Rd(){if(tt.isUnminified)return function(t,e){return ne._isString(t)||ne.warn(Rl(t)+' is a not valid value for "'+e+'" attribute. The value should be a string.'),t}}function oA(){if(tt.isUnminified)return function(t,e){const n=ne._isString(t),r=Object.prototype.toString.call(t)==="[object CanvasGradient]"||t&&t.addColorStop;return n||r||ne.warn(Rl(t)+' is a not valid value for "'+e+'" attribute. The value should be a string or a native gradient.'),t}}function KW(){if(tt.isUnminified)return function(t,e){return ne._isArray(t)?t.forEach(function(n){ne._isNumber(n)||ne.warn('"'+e+'" attribute has non numeric element '+n+". Make sure that all elements are numbers.")}):ne.warn(Rl(t)+' is a not valid value for "'+e+'" attribute. The value should be a array of numbers.'),t}}function io(){if(tt.isUnminified)return function(t,e){var n=t===!0||t===!1;return n||ne.warn(Rl(t)+' is a not valid value for "'+e+'" attribute. The value should be a boolean.'),t}}function XW(t){if(tt.isUnminified)return function(e,n){return ne.isObject(e)||ne.warn(Rl(e)+' is a not valid value for "'+n+'" attribute. The value should be an object with properties '+t),e}}var dh="get",hh="set";const W={addGetterSetter(t,e,n,r,i){W.addGetter(t,e,n),W.addSetter(t,e,r,i),W.addOverloadedGetterSetter(t,e)},addGetter(t,e,n){var r=dh+ne._capitalize(e);t.prototype[r]=t.prototype[r]||function(){var i=this.attrs[e];return i===void 0?n:i}},addSetter(t,e,n,r){var i=hh+ne._capitalize(e);t.prototype[i]||W.overWriteSetter(t,e,n,r)},overWriteSetter(t,e,n,r){var i=hh+ne._capitalize(e);t.prototype[i]=function(s){return n&&s!==void 0&&s!==null&&(s=n.call(this,s,e)),this._setAttr(e,s),r&&r.call(this),this}},addComponentsGetterSetter(t,e,n,r,i){var s=n.length,o=ne._capitalize,a=dh+o(e),l=hh+o(e),c,h;t.prototype[a]=function(){var p={};for(c=0;c<s;c++)h=n[c],p[h]=this.getAttr(e+o(h));return p};var f=XW(n);t.prototype[l]=function(p){var g=this.attrs[e],v;r&&(p=r.call(this,p)),f&&f.call(this,p,e);for(v in p)p.hasOwnProperty(v)&&this._setAttr(e+o(v),p[v]);return this._fireChangeEvent(e,g,p),i&&i.call(this),this},W.addOverloadedGetterSetter(t,e)},addOverloadedGetterSetter(t,e){var n=ne._capitalize(e),r=hh+n,i=dh+n;t.prototype[e]=function(){return arguments.length?(this[r](arguments[0]),this):this[i]()}},addDeprecatedGetterSetter(t,e,n,r){ne.error("Adding deprecated "+e);var i=dh+ne._capitalize(e),s=e+" property is deprecated and will be removed soon. Look at Konva change log for more information.";t.prototype[i]=function(){ne.error(s);var o=this.attrs[e];return o===void 0?n:o},W.addSetter(t,e,r,function(){ne.error(s)}),W.addOverloadedGetterSetter(t,e)},backCompat(t,e){ne.each(e,function(n,r){var i=t.prototype[r],s=dh+ne._capitalize(n),o=hh+ne._capitalize(n);function a(){i.apply(this,arguments),ne.error('"'+n+'" method is deprecated and will be removed soon. Use ""'+r+'" instead.')}t.prototype[n]=a,t.prototype[s]=a,t.prototype[o]=a})},afterSetFilter(){this._filterUpToDate=!1}};function ZW(t){var e=[],n=t.length,r=ne,i,s;for(i=0;i<n;i++)s=t[i],r._isNumber(s)?s=Math.round(s*1e3)/1e3:r._isString(s)||(s=s+""),e.push(s);return e}var OR=",",QW="(",JW=")",eH="([",tH="])",nH=";",rH="()",iH="=",DR=["arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","createLinearGradient","createPattern","createRadialGradient","drawImage","ellipse","fill","fillText","getImageData","createImageData","lineTo","moveTo","putImageData","quadraticCurveTo","rect","restore","rotate","save","scale","setLineDash","setTransform","stroke","strokeText","transform","translate"],sH=["fillStyle","strokeStyle","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","font","textAlign","textBaseline","globalAlpha","globalCompositeOperation","imageSmoothingEnabled"];const oH=100;let H0=class{constructor(e){this.canvas=e,this._context=e._canvas.getContext("2d"),tt.enableTrace&&(this.traceArr=[],this._enableTrace())}fillShape(e){e.fillEnabled()&&this._fill(e)}_fill(e){}strokeShape(e){e.hasStroke()&&this._stroke(e)}_stroke(e){}fillStrokeShape(e){e.attrs.fillAfterStrokeEnabled?(this.strokeShape(e),this.fillShape(e)):(this.fillShape(e),this.strokeShape(e))}getTrace(e,n){var r=this.traceArr,i=r.length,s="",o,a,l,c;for(o=0;o<i;o++)a=r[o],l=a.method,l?(c=a.args,s+=l,e?s+=rH:ne._isArray(c[0])?s+=eH+c.join(OR)+tH:(n&&(c=c.map(h=>typeof h=="number"?Math.floor(h):h)),s+=QW+c.join(OR)+JW)):(s+=a.property,e||(s+=iH+a.val)),s+=nH;return s}clearTrace(){this.traceArr=[]}_trace(e){var n=this.traceArr,r;n.push(e),r=n.length,r>=oH&&n.shift()}reset(){var e=this.getCanvas().getPixelRatio();this.setTransform(1*e,0,0,1*e,0,0)}getCanvas(){return this.canvas}clear(e){var n=this.getCanvas();e?this.clearRect(e.x||0,e.y||0,e.width||0,e.height||0):this.clearRect(0,0,n.getWidth()/n.pixelRatio,n.getHeight()/n.pixelRatio)}_applyLineCap(e){var n=e.getLineCap();n&&this.setAttr("lineCap",n)}_applyOpacity(e){var n=e.getAbsoluteOpacity();n!==1&&this.setAttr("globalAlpha",n)}_applyLineJoin(e){var n=e.attrs.lineJoin;n&&this.setAttr("lineJoin",n)}setAttr(e,n){this._context[e]=n}arc(e,n,r,i,s,o){this._context.arc(e,n,r,i,s,o)}arcTo(e,n,r,i,s){this._context.arcTo(e,n,r,i,s)}beginPath(){this._context.beginPath()}bezierCurveTo(e,n,r,i,s,o){this._context.bezierCurveTo(e,n,r,i,s,o)}clearRect(e,n,r,i){this._context.clearRect(e,n,r,i)}clip(){this._context.clip()}closePath(){this._context.closePath()}createImageData(e,n){var r=arguments;if(r.length===2)return this._context.createImageData(e,n);if(r.length===1)return this._context.createImageData(e)}createLinearGradient(e,n,r,i){return this._context.createLinearGradient(e,n,r,i)}createPattern(e,n){return this._context.createPattern(e,n)}createRadialGradient(e,n,r,i,s,o){return this._context.createRadialGradient(e,n,r,i,s,o)}drawImage(e,n,r,i,s,o,a,l,c){var h=arguments,f=this._context;h.length===3?f.drawImage(e,n,r):h.length===5?f.drawImage(e,n,r,i,s):h.length===9&&f.drawImage(e,n,r,i,s,o,a,l,c)}ellipse(e,n,r,i,s,o,a,l){this._context.ellipse(e,n,r,i,s,o,a,l)}isPointInPath(e,n){return this._context.isPointInPath(e,n)}fill(e){e?this._context.fill(e):this._context.fill()}fillRect(e,n,r,i){this._context.fillRect(e,n,r,i)}strokeRect(e,n,r,i){this._context.strokeRect(e,n,r,i)}fillText(e,n,r,i){i?this._context.fillText(e,n,r,i):this._context.fillText(e,n,r)}measureText(e){return this._context.measureText(e)}getImageData(e,n,r,i){return this._context.getImageData(e,n,r,i)}lineTo(e,n){this._context.lineTo(e,n)}moveTo(e,n){this._context.moveTo(e,n)}rect(e,n,r,i){this._context.rect(e,n,r,i)}putImageData(e,n,r){this._context.putImageData(e,n,r)}quadraticCurveTo(e,n,r,i){this._context.quadraticCurveTo(e,n,r,i)}restore(){this._context.restore()}rotate(e){this._context.rotate(e)}save(){this._context.save()}scale(e,n){this._context.scale(e,n)}setLineDash(e){this._context.setLineDash?this._context.setLineDash(e):"mozDash"in this._context?this._context.mozDash=e:"webkitLineDash"in this._context&&(this._context.webkitLineDash=e)}getLineDash(){return this._context.getLineDash()}setTransform(e,n,r,i,s,o){this._context.setTransform(e,n,r,i,s,o)}stroke(e){e?this._context.stroke(e):this._context.stroke()}strokeText(e,n,r,i){this._context.strokeText(e,n,r,i)}transform(e,n,r,i,s,o){this._context.transform(e,n,r,i,s,o)}translate(e,n){this._context.translate(e,n)}_enableTrace(){var e=this,n=DR.length,r=this.setAttr,i,s,o=function(a){var l=e[a],c;e[a]=function(){return s=ZW(Array.prototype.slice.call(arguments,0)),c=l.apply(e,arguments),e._trace({method:a,args:s}),c}};for(i=0;i<n;i++)o(DR[i]);e.setAttr=function(){r.apply(e,arguments);var a=arguments[0],l=arguments[1];(a==="shadowOffsetX"||a==="shadowOffsetY"||a==="shadowBlur")&&(l=l/this.canvas.getPixelRatio()),e._trace({property:a,val:l})}}_applyGlobalCompositeOperation(e){const n=e.attrs.globalCompositeOperation;var r=!n||n==="source-over";r||this.setAttr("globalCompositeOperation",n)}};sH.forEach(function(t){Object.defineProperty(H0.prototype,t,{get(){return this._context[t]},set(e){this._context[t]=e}})});class aH extends H0{_fillColor(e){var n=e.fill();this.setAttr("fillStyle",n),e._fillFunc(this)}_fillPattern(e){this.setAttr("fillStyle",e._getFillPattern()),e._fillFunc(this)}_fillLinearGradient(e){var n=e._getLinearGradient();n&&(this.setAttr("fillStyle",n),e._fillFunc(this))}_fillRadialGradient(e){var n=e._getRadialGradient();n&&(this.setAttr("fillStyle",n),e._fillFunc(this))}_fill(e){var n=e.fill(),r=e.getFillPriority();if(n&&r==="color"){this._fillColor(e);return}var i=e.getFillPatternImage();if(i&&r==="pattern"){this._fillPattern(e);return}var s=e.getFillLinearGradientColorStops();if(s&&r==="linear-gradient"){this._fillLinearGradient(e);return}var o=e.getFillRadialGradientColorStops();if(o&&r==="radial-gradient"){this._fillRadialGradient(e);return}n?this._fillColor(e):i?this._fillPattern(e):s?this._fillLinearGradient(e):o&&this._fillRadialGradient(e)}_strokeLinearGradient(e){var n=e.getStrokeLinearGradientStartPoint(),r=e.getStrokeLinearGradientEndPoint(),i=e.getStrokeLinearGradientColorStops(),s=this.createLinearGradient(n.x,n.y,r.x,r.y);if(i){for(var o=0;o<i.length;o+=2)s.addColorStop(i[o],i[o+1]);this.setAttr("strokeStyle",s)}}_stroke(e){var n=e.dash(),r=e.getStrokeScaleEnabled();if(e.hasStroke()){if(!r){this.save();var i=this.getCanvas().getPixelRatio();this.setTransform(i,0,0,i,0,0)}this._applyLineCap(e),n&&e.dashEnabled()&&(this.setLineDash(n),this.setAttr("lineDashOffset",e.dashOffset())),this.setAttr("lineWidth",e.strokeWidth()),e.getShadowForStrokeEnabled()||this.setAttr("shadowColor","rgba(0,0,0,0)");var s=e.getStrokeLinearGradientColorStops();s?this._strokeLinearGradient(e):this.setAttr("strokeStyle",e.stroke()),e._strokeFunc(this),r||this.restore()}}_applyShadow(e){var n,r,i,s=(n=e.getShadowRGBA())!==null&&n!==void 0?n:"black",o=(r=e.getShadowBlur())!==null&&r!==void 0?r:5,a=(i=e.getShadowOffset())!==null&&i!==void 0?i:{x:0,y:0},l=e.getAbsoluteScale(),c=this.canvas.getPixelRatio(),h=l.x*c,f=l.y*c;this.setAttr("shadowColor",s),this.setAttr("shadowBlur",o*Math.min(Math.abs(h),Math.abs(f))),this.setAttr("shadowOffsetX",a.x*h),this.setAttr("shadowOffsetY",a.y*f)}}class lH extends H0{_fill(e){this.save(),this.setAttr("fillStyle",e.colorKey),e._fillFuncHit(this),this.restore()}strokeShape(e){e.hasHitStroke()&&this._stroke(e)}_stroke(e){if(e.hasHitStroke()){var n=e.getStrokeScaleEnabled();if(!n){this.save();var r=this.getCanvas().getPixelRatio();this.setTransform(r,0,0,r,0,0)}this._applyLineCap(e);var i=e.hitStrokeWidth(),s=i==="auto"?e.strokeWidth():i;this.setAttr("lineWidth",s),this.setAttr("strokeStyle",e.colorKey),e._strokeFuncHit(this),n||this.restore()}}}var _g;function uH(){if(_g)return _g;var t=ne.createCanvasElement(),e=t.getContext("2d");return _g=function(){var n=tt._global.devicePixelRatio||1,r=e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1;return n/r}(),_g}class G0{constructor(e){this.pixelRatio=1,this.width=0,this.height=0,this.isCache=!1;var n=e||{},r=n.pixelRatio||tt.pixelRatio||uH();this.pixelRatio=r,this._canvas=ne.createCanvasElement(),this._canvas.style.padding="0",this._canvas.style.margin="0",this._canvas.style.border="0",this._canvas.style.background="transparent",this._canvas.style.position="absolute",this._canvas.style.top="0",this._canvas.style.left="0"}getContext(){return this.context}getPixelRatio(){return this.pixelRatio}setPixelRatio(e){var n=this.pixelRatio;this.pixelRatio=e,this.setSize(this.getWidth()/n,this.getHeight()/n)}setWidth(e){this.width=this._canvas.width=e*this.pixelRatio,this._canvas.style.width=e+"px";var n=this.pixelRatio,r=this.getContext()._context;r.scale(n,n)}setHeight(e){this.height=this._canvas.height=e*this.pixelRatio,this._canvas.style.height=e+"px";var n=this.pixelRatio,r=this.getContext()._context;r.scale(n,n)}getWidth(){return this.width}getHeight(){return this.height}setSize(e,n){this.setWidth(e||0),this.setHeight(n||0)}toDataURL(e,n){try{return this._canvas.toDataURL(e,n)}catch{try{return this._canvas.toDataURL()}catch(i){return ne.error("Unable to get data URL. "+i.message+" For more info read https://konvajs.org/docs/posts/Tainted_Canvas.html."),""}}}}W.addGetterSetter(G0,"pixelRatio",void 0,Me());class Uc extends G0{constructor(e={width:0,height:0}){super(e),this.context=new aH(this),this.setSize(e.width,e.height)}}class aS extends G0{constructor(e={width:0,height:0}){super(e),this.hitCanvas=!0,this.context=new lH(this),this.setSize(e.width,e.height)}}const Jt={get isDragging(){var t=!1;return Jt._dragElements.forEach(e=>{e.dragStatus==="dragging"&&(t=!0)}),t},justDragged:!1,get node(){var t;return Jt._dragElements.forEach(e=>{t=e.node}),t},_dragElements:new Map,_drag(t){const e=[];Jt._dragElements.forEach((n,r)=>{const{node:i}=n,s=i.getStage();s.setPointersPositions(t),n.pointerId===void 0&&(n.pointerId=ne._getFirstPointerId(t));const o=s._changedPointerPositions.find(c=>c.id===n.pointerId);if(o){if(n.dragStatus!=="dragging"){var a=i.dragDistance(),l=Math.max(Math.abs(o.x-n.startPointerPos.x),Math.abs(o.y-n.startPointerPos.y));if(l<a||(i.startDrag({evt:t}),!i.isDragging()))return}i._setDragPosition(t,n),e.push(i)}}),e.forEach(n=>{n.fire("dragmove",{type:"dragmove",target:n,evt:t},!0)})},_endDragBefore(t){Jt._dragElements.forEach(e=>{const{node:n}=e,r=n.getStage();if(t&&r.setPointersPositions(t),!r._changedPointerPositions.find(o=>o.id===e.pointerId))return;(e.dragStatus==="dragging"||e.dragStatus==="stopped")&&(Jt.justDragged=!0,tt._mouseListenClick=!1,tt._touchListenClick=!1,tt._pointerListenClick=!1,e.dragStatus="stopped");const s=e.node.getLayer()||e.node instanceof tt.Stage&&e.node;s&&s.batchDraw()})},_endDragAfter(t){Jt._dragElements.forEach((e,n)=>{e.dragStatus==="stopped"&&e.node.fire("dragend",{type:"dragend",target:e.node,evt:t},!0),e.dragStatus!=="dragging"&&Jt._dragElements.delete(n)})}};tt.isBrowser&&(window.addEventListener("mouseup",Jt._endDragBefore,!0),window.addEventListener("touchend",Jt._endDragBefore,!0),window.addEventListener("mousemove",Jt._drag),window.addEventListener("touchmove",Jt._drag),window.addEventListener("mouseup",Jt._endDragAfter,!1),window.addEventListener("touchend",Jt._endDragAfter,!1));var am="absoluteOpacity",bg="allEventListeners",Xo="absoluteTransform",FR="absoluteScale",fh="canvas",cH="Change",dH="children",hH="konva",kx="listening",BR="mouseenter",$R="mouseleave",zR="set",UR="Shape",lm=" ",VR="stage",Ga="transform",fH="Stage",Ex="visible",pH=["xChange.konva","yChange.konva","scaleXChange.konva","scaleYChange.konva","skewXChange.konva","skewYChange.konva","rotationChange.konva","offsetXChange.konva","offsetYChange.konva","transformsEnabledChange.konva"].join(lm);let gH=1,je=class Rx{constructor(e){this._id=gH++,this.eventListeners={},this.attrs={},this.index=0,this._allEventListeners=null,this.parent=null,this._cache=new Map,this._attachedDepsListeners=new Map,this._lastPos=null,this._batchingTransformChange=!1,this._needClearTransformCache=!1,this._filterUpToDate=!1,this._isUnderCache=!1,this._dragEventId=null,this._shouldFireChangeEvents=!1,this.setAttrs(e),this._shouldFireChangeEvents=!0}hasChildren(){return!1}_clearCache(e){(e===Ga||e===Xo)&&this._cache.get(e)?this._cache.get(e).dirty=!0:e?this._cache.delete(e):this._cache.clear()}_getCache(e,n){var r=this._cache.get(e),i=e===Ga||e===Xo,s=r===void 0||i&&r.dirty===!0;return s&&(r=n.call(this),this._cache.set(e,r)),r}_calculate(e,n,r){if(!this._attachedDepsListeners.get(e)){const i=n.map(s=>s+"Change.konva").join(lm);this.on(i,()=>{this._clearCache(e)}),this._attachedDepsListeners.set(e,!0)}return this._getCache(e,r)}_getCanvasCache(){return this._cache.get(fh)}_clearSelfAndDescendantCache(e){this._clearCache(e),e===Xo&&this.fire("absoluteTransformChange")}clearCache(){return this._cache.delete(fh),this._clearSelfAndDescendantCache(),this._requestDraw(),this}cache(e){var n=e||{},r={};(n.x===void 0||n.y===void 0||n.width===void 0||n.height===void 0)&&(r=this.getClientRect({skipTransform:!0,relativeTo:this.getParent()}));var i=Math.ceil(n.width||r.width),s=Math.ceil(n.height||r.height),o=n.pixelRatio,a=n.x===void 0?r.x:n.x,l=n.y===void 0?r.y:n.y,c=n.offset||0,h=n.drawBorder||!1,f=n.hitCanvasPixelRatio||1;if(!i||!s){ne.error("Can not cache the node. Width or height of the node equals 0. Caching is skipped.");return}i+=c*2,s+=c*2,a-=c,l-=c;var p=new Uc({pixelRatio:o,width:i,height:s}),g=new Uc({pixelRatio:o,width:0,height:0}),v=new aS({pixelRatio:f,width:i,height:s}),x=p.getContext(),k=v.getContext();return v.isCache=!0,p.isCache=!0,this._cache.delete(fh),this._filterUpToDate=!1,n.imageSmoothingEnabled===!1&&(p.getContext()._context.imageSmoothingEnabled=!1,g.getContext()._context.imageSmoothingEnabled=!1),x.save(),k.save(),x.translate(-a,-l),k.translate(-a,-l),this._isUnderCache=!0,this._clearSelfAndDescendantCache(am),this._clearSelfAndDescendantCache(FR),this.drawScene(p,this),this.drawHit(v,this),this._isUnderCache=!1,x.restore(),k.restore(),h&&(x.save(),x.beginPath(),x.rect(0,0,i,s),x.closePath(),x.setAttr("strokeStyle","red"),x.setAttr("lineWidth",5),x.stroke(),x.restore()),this._cache.set(fh,{scene:p,filter:g,hit:v,x:a,y:l}),this._requestDraw(),this}isCached(){return this._cache.has(fh)}getClientRect(e){throw new Error('abstract "getClientRect" method call')}_transformedRect(e,n){var r=[{x:e.x,y:e.y},{x:e.x+e.width,y:e.y},{x:e.x+e.width,y:e.y+e.height},{x:e.x,y:e.y+e.height}],i,s,o,a,l=this.getAbsoluteTransform(n);return r.forEach(function(c){var h=l.point(c);i===void 0&&(i=o=h.x,s=a=h.y),i=Math.min(i,h.x),s=Math.min(s,h.y),o=Math.max(o,h.x),a=Math.max(a,h.y)}),{x:i,y:s,width:o-i,height:a-s}}_drawCachedSceneCanvas(e){e.save(),e._applyOpacity(this),e._applyGlobalCompositeOperation(this);const n=this._getCanvasCache();e.translate(n.x,n.y);var r=this._getCachedSceneCanvas(),i=r.pixelRatio;e.drawImage(r._canvas,0,0,r.width/i,r.height/i),e.restore()}_drawCachedHitCanvas(e){var n=this._getCanvasCache(),r=n.hit;e.save(),e.translate(n.x,n.y),e.drawImage(r._canvas,0,0,r.width/r.pixelRatio,r.height/r.pixelRatio),e.restore()}_getCachedSceneCanvas(){var e=this.filters(),n=this._getCanvasCache(),r=n.scene,i=n.filter,s=i.getContext(),o,a,l,c;if(e){if(!this._filterUpToDate){var h=r.pixelRatio;i.setSize(r.width/r.pixelRatio,r.height/r.pixelRatio);try{for(o=e.length,s.clear(),s.drawImage(r._canvas,0,0,r.getWidth()/h,r.getHeight()/h),a=s.getImageData(0,0,i.getWidth(),i.getHeight()),l=0;l<o;l++){if(c=e[l],typeof c!="function"){ne.error("Filter should be type of function, but got "+typeof c+" instead. Please check correct filters");continue}c.call(this,a),s.putImageData(a,0,0)}}catch(f){ne.error("Unable to apply filter. "+f.message+" This post my help you https://konvajs.org/docs/posts/Tainted_Canvas.html.")}this._filterUpToDate=!0}return i}return r}on(e,n){if(this._cache&&this._cache.delete(bg),arguments.length===3)return this._delegate.apply(this,arguments);var r=e.split(lm),i=r.length,s,o,a,l,c;for(s=0;s<i;s++)o=r[s],a=o.split("."),l=a[0],c=a[1]||"",this.eventListeners[l]||(this.eventListeners[l]=[]),this.eventListeners[l].push({name:c,handler:n});return this}off(e,n){var r=(e||"").split(lm),i=r.length,s,o,a,l,c,h;if(this._cache&&this._cache.delete(bg),!e)for(o in this.eventListeners)this._off(o);for(s=0;s<i;s++)if(a=r[s],l=a.split("."),c=l[0],h=l[1],c)this.eventListeners[c]&&this._off(c,h,n);else for(o in this.eventListeners)this._off(o,h,n);return this}dispatchEvent(e){var n={target:this,type:e.type,evt:e};return this.fire(e.type,n),this}addEventListener(e,n){return this.on(e,function(r){n.call(this,r.evt)}),this}removeEventListener(e){return this.off(e),this}_delegate(e,n,r){var i=this;this.on(e,function(s){for(var o=s.target.findAncestors(n,!0,i),a=0;a<o.length;a++)s=ne.cloneObject(s),s.currentTarget=o[a],r.call(o[a],s)})}remove(){return this.isDragging()&&this.stopDrag(),Jt._dragElements.delete(this._id),this._remove(),this}_clearCaches(){this._clearSelfAndDescendantCache(Xo),this._clearSelfAndDescendantCache(am),this._clearSelfAndDescendantCache(FR),this._clearSelfAndDescendantCache(VR),this._clearSelfAndDescendantCache(Ex),this._clearSelfAndDescendantCache(kx)}_remove(){this._clearCaches();var e=this.getParent();e&&e.children&&(e.children.splice(this.index,1),e._setChildrenIndices(),this.parent=null)}destroy(){return this.remove(),this}getAttr(e){var n="get"+ne._capitalize(e);return ne._isFunction(this[n])?this[n]():this.attrs[e]}getAncestors(){for(var e=this.getParent(),n=[];e;)n.push(e),e=e.getParent();return n}getAttrs(){return this.attrs||{}}setAttrs(e){return this._batchTransformChanges(()=>{var n,r;if(!e)return this;for(n in e)n!==dH&&(r=zR+ne._capitalize(n),ne._isFunction(this[r])?this[r](e[n]):this._setAttr(n,e[n]))}),this}isListening(){return this._getCache(kx,this._isListening)}_isListening(e){if(!this.listening())return!1;const r=this.getParent();return r&&r!==e&&this!==e?r._isListening(e):!0}isVisible(){return this._getCache(Ex,this._isVisible)}_isVisible(e){if(!this.visible())return!1;const r=this.getParent();return r&&r!==e&&this!==e?r._isVisible(e):!0}shouldDrawHit(e,n=!1){if(e)return this._isVisible(e)&&this._isListening(e);var r=this.getLayer(),i=!1;Jt._dragElements.forEach(o=>{o.dragStatus==="dragging"&&(o.node.nodeType==="Stage"||o.node.getLayer()===r)&&(i=!0)});var s=!n&&!tt.hitOnDragEnabled&&i;return this.isListening()&&this.isVisible()&&!s}show(){return this.visible(!0),this}hide(){return this.visible(!1),this}getZIndex(){return this.index||0}getAbsoluteZIndex(){var e=this.getDepth(),n=this,r=0,i,s,o,a;function l(c){for(i=[],s=c.length,o=0;o<s;o++)a=c[o],r++,a.nodeType!==UR&&(i=i.concat(a.getChildren().slice())),a._id===n._id&&(o=s);i.length>0&&i[0].getDepth()<=e&&l(i)}return n.nodeType!==fH&&l(n.getStage().getChildren()),r}getDepth(){for(var e=0,n=this.parent;n;)e++,n=n.parent;return e}_batchTransformChanges(e){this._batchingTransformChange=!0,e(),this._batchingTransformChange=!1,this._needClearTransformCache&&(this._clearCache(Ga),this._clearSelfAndDescendantCache(Xo)),this._needClearTransformCache=!1}setPosition(e){return this._batchTransformChanges(()=>{this.x(e.x),this.y(e.y)}),this}getPosition(){return{x:this.x(),y:this.y()}}getRelativePointerPosition(){if(!this.getStage())return null;var e=this.getStage().getPointerPosition();if(!e)return null;var n=this.getAbsoluteTransform().copy();return n.invert(),n.point(e)}getAbsolutePosition(e){let n=!1,r=this.parent;for(;r;){if(r.isCached()){n=!0;break}r=r.parent}n&&!e&&(e=!0);var i=this.getAbsoluteTransform(e).getMatrix(),s=new Yi,o=this.offset();return s.m=i.slice(),s.translate(o.x,o.y),s.getTranslation()}setAbsolutePosition(e){var n=this._clearTransform();this.attrs.x=n.x,this.attrs.y=n.y,delete n.x,delete n.y,this._clearCache(Ga);var r=this._getAbsoluteTransform().copy();return r.invert(),r.translate(e.x,e.y),e={x:this.attrs.x+r.getTranslation().x,y:this.attrs.y+r.getTranslation().y},this._setTransform(n),this.setPosition({x:e.x,y:e.y}),this._clearCache(Ga),this._clearSelfAndDescendantCache(Xo),this}_setTransform(e){var n;for(n in e)this.attrs[n]=e[n]}_clearTransform(){var e={x:this.x(),y:this.y(),rotation:this.rotation(),scaleX:this.scaleX(),scaleY:this.scaleY(),offsetX:this.offsetX(),offsetY:this.offsetY(),skewX:this.skewX(),skewY:this.skewY()};return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scaleX=1,this.attrs.scaleY=1,this.attrs.offsetX=0,this.attrs.offsetY=0,this.attrs.skewX=0,this.attrs.skewY=0,e}move(e){var n=e.x,r=e.y,i=this.x(),s=this.y();return n!==void 0&&(i+=n),r!==void 0&&(s+=r),this.setPosition({x:i,y:s}),this}_eachAncestorReverse(e,n){var r=[],i=this.getParent(),s,o;if(!(n&&n._id===this._id)){for(r.unshift(this);i&&(!n||i._id!==n._id);)r.unshift(i),i=i.parent;for(s=r.length,o=0;o<s;o++)e(r[o])}}rotate(e){return this.rotation(this.rotation()+e),this}moveToTop(){if(!this.parent)return ne.warn("Node has no parent. moveToTop function is ignored."),!1;var e=this.index;return this.parent.children.splice(e,1),this.parent.children.push(this),this.parent._setChildrenIndices(),!0}moveUp(){if(!this.parent)return ne.warn("Node has no parent. moveUp function is ignored."),!1;var e=this.index,n=this.parent.getChildren().length;return e<n-1?(this.parent.children.splice(e,1),this.parent.children.splice(e+1,0,this),this.parent._setChildrenIndices(),!0):!1}moveDown(){if(!this.parent)return ne.warn("Node has no parent. moveDown function is ignored."),!1;var e=this.index;return e>0?(this.parent.children.splice(e,1),this.parent.children.splice(e-1,0,this),this.parent._setChildrenIndices(),!0):!1}moveToBottom(){if(!this.parent)return ne.warn("Node has no parent. moveToBottom function is ignored."),!1;var e=this.index;return e>0?(this.parent.children.splice(e,1),this.parent.children.unshift(this),this.parent._setChildrenIndices(),!0):!1}setZIndex(e){if(!this.parent)return ne.warn("Node has no parent. zIndex parameter is ignored."),this;(e<0||e>=this.parent.children.length)&&ne.warn("Unexpected value "+e+" for zIndex property. zIndex is just index of a node in children of its parent. Expected value is from 0 to "+(this.parent.children.length-1)+".");var n=this.index;return this.parent.children.splice(n,1),this.parent.children.splice(e,0,this),this.parent._setChildrenIndices(),this}getAbsoluteOpacity(){return this._getCache(am,this._getAbsoluteOpacity)}_getAbsoluteOpacity(){var e=this.opacity(),n=this.getParent();return n&&!n._isUnderCache&&(e*=n.getAbsoluteOpacity()),e}moveTo(e){return this.getParent()!==e&&(this._remove(),e.add(this)),this}toObject(){var e={},n=this.getAttrs(),r,i,s,o,a;e.attrs={};for(r in n)i=n[r],a=ne.isObject(i)&&!ne._isPlainObject(i)&&!ne._isArray(i),!a&&(s=typeof this[r]=="function"&&this[r],delete n[r],o=s?s.call(this):null,n[r]=i,o!==i&&(e.attrs[r]=i));return e.className=this.getClassName(),ne._prepareToStringify(e)}toJSON(){return JSON.stringify(this.toObject())}getParent(){return this.parent}findAncestors(e,n,r){var i=[];n&&this._isMatch(e)&&i.push(this);for(var s=this.parent;s;){if(s===r)return i;s._isMatch(e)&&i.push(s),s=s.parent}return i}isAncestorOf(e){return!1}findAncestor(e,n,r){return this.findAncestors(e,n,r)[0]}_isMatch(e){if(!e)return!1;if(typeof e=="function")return e(this);var n=e.replace(/ /g,"").split(","),r=n.length,i,s;for(i=0;i<r;i++)if(s=n[i],ne.isValidSelector(s)||(ne.warn('Selector "'+s+'" is invalid. Allowed selectors examples are "#foo", ".bar" or "Group".'),ne.warn('If you have a custom shape with such className, please change it to start with upper letter like "Triangle".'),ne.warn("Konva is awesome, right?")),s.charAt(0)==="#"){if(this.id()===s.slice(1))return!0}else if(s.charAt(0)==="."){if(this.hasName(s.slice(1)))return!0}else if(this.className===s||this.nodeType===s)return!0;return!1}getLayer(){var e=this.getParent();return e?e.getLayer():null}getStage(){return this._getCache(VR,this._getStage)}_getStage(){var e=this.getParent();if(e)return e.getStage()}fire(e,n={},r){return n.target=n.target||this,r?this._fireAndBubble(e,n):this._fire(e,n),this}getAbsoluteTransform(e){return e?this._getAbsoluteTransform(e):this._getCache(Xo,this._getAbsoluteTransform)}_getAbsoluteTransform(e){var n;if(e)return n=new Yi,this._eachAncestorReverse(function(i){var s=i.transformsEnabled();s==="all"?n.multiply(i.getTransform()):s==="position"&&n.translate(i.x()-i.offsetX(),i.y()-i.offsetY())},e),n;n=this._cache.get(Xo)||new Yi,this.parent?this.parent.getAbsoluteTransform().copyInto(n):n.reset();var r=this.transformsEnabled();if(r==="all")n.multiply(this.getTransform());else if(r==="position"){const i=this.attrs.x||0,s=this.attrs.y||0,o=this.attrs.offsetX||0,a=this.attrs.offsetY||0;n.translate(i-o,s-a)}return n.dirty=!1,n}getAbsoluteScale(e){for(var n=this;n;)n._isUnderCache&&(e=n),n=n.getParent();const i=this.getAbsoluteTransform(e).decompose();return{x:i.scaleX,y:i.scaleY}}getAbsoluteRotation(){return this.getAbsoluteTransform().decompose().rotation}getTransform(){return this._getCache(Ga,this._getTransform)}_getTransform(){var e,n,r=this._cache.get(Ga)||new Yi;r.reset();var i=this.x(),s=this.y(),o=tt.getAngle(this.rotation()),a=(e=this.attrs.scaleX)!==null&&e!==void 0?e:1,l=(n=this.attrs.scaleY)!==null&&n!==void 0?n:1,c=this.attrs.skewX||0,h=this.attrs.skewY||0,f=this.attrs.offsetX||0,p=this.attrs.offsetY||0;return(i!==0||s!==0)&&r.translate(i,s),o!==0&&r.rotate(o),(c!==0||h!==0)&&r.skew(c,h),(a!==1||l!==1)&&r.scale(a,l),(f!==0||p!==0)&&r.translate(-1*f,-1*p),r.dirty=!1,r}clone(e){var n=ne.cloneObject(this.attrs),r,i,s,o,a;for(r in e)n[r]=e[r];var l=new this.constructor(n);for(r in this.eventListeners)for(i=this.eventListeners[r],s=i.length,o=0;o<s;o++)a=i[o],a.name.indexOf(hH)<0&&(l.eventListeners[r]||(l.eventListeners[r]=[]),l.eventListeners[r].push(a));return l}_toKonvaCanvas(e){e=e||{};var n=this.getClientRect(),r=this.getStage(),i=e.x!==void 0?e.x:n.x,s=e.y!==void 0?e.y:n.y,o=e.pixelRatio||1,a=new Uc({width:e.width||n.width||(r?r.width():0),height:e.height||n.height||(r?r.height():0),pixelRatio:o}),l=a.getContext();return l.save(),(i||s)&&l.translate(-1*i,-1*s),this.drawScene(a),l.restore(),a}toCanvas(e){return this._toKonvaCanvas(e)._canvas}toDataURL(e){e=e||{};var n=e.mimeType||null,r=e.quality||null,i=this._toKonvaCanvas(e).toDataURL(n,r);return e.callback&&e.callback(i),i}toImage(e){if(!e||!e.callback)throw"callback required for toImage method config argument";var n=e.callback;delete e.callback,ne._urlToImage(this.toDataURL(e),function(r){n(r)})}setSize(e){return this.width(e.width),this.height(e.height),this}getSize(){return{width:this.width(),height:this.height()}}getClassName(){return this.className||this.nodeType}getType(){return this.nodeType}getDragDistance(){return this.attrs.dragDistance!==void 0?this.attrs.dragDistance:this.parent?this.parent.getDragDistance():tt.dragDistance}_off(e,n,r){var i=this.eventListeners[e],s,o,a;for(s=0;s<i.length;s++)if(o=i[s].name,a=i[s].handler,(o!=="konva"||n==="konva")&&(!n||o===n)&&(!r||r===a)){if(i.splice(s,1),i.length===0){delete this.eventListeners[e];break}s--}}_fireChangeEvent(e,n,r){this._fire(e+cH,{oldVal:n,newVal:r})}addName(e){if(!this.hasName(e)){var n=this.name(),r=n?n+" "+e:e;this.name(r)}return this}hasName(e){if(!e)return!1;const n=this.name();if(!n)return!1;var r=(n||"").split(/\s/g);return r.indexOf(e)!==-1}removeName(e){var n=(this.name()||"").split(/\s/g),r=n.indexOf(e);return r!==-1&&(n.splice(r,1),this.name(n.join(" "))),this}setAttr(e,n){var r=this[zR+ne._capitalize(e)];return ne._isFunction(r)?r.call(this,n):this._setAttr(e,n),this}_requestDraw(){if(tt.autoDrawEnabled){const e=this.getLayer()||this.getStage();e==null||e.batchDraw()}}_setAttr(e,n){var r=this.attrs[e];r===n&&!ne.isObject(n)||(n==null?delete this.attrs[e]:this.attrs[e]=n,this._shouldFireChangeEvents&&this._fireChangeEvent(e,r,n),this._requestDraw())}_setComponentAttr(e,n,r){var i;r!==void 0&&(i=this.attrs[e],i||(this.attrs[e]=this.getAttr(e)),this.attrs[e][n]=r,this._fireChangeEvent(e,i,r))}_fireAndBubble(e,n,r){n&&this.nodeType===UR&&(n.target=this);var i=(e===BR||e===$R)&&(r&&(this===r||this.isAncestorOf&&this.isAncestorOf(r))||this.nodeType==="Stage"&&!r);if(!i){this._fire(e,n);var s=(e===BR||e===$R)&&r&&r.isAncestorOf&&r.isAncestorOf(this)&&!r.isAncestorOf(this.parent);(n&&!n.cancelBubble||!n)&&this.parent&&this.parent.isListening()&&!s&&(r&&r.parent?this._fireAndBubble.call(this.parent,e,n,r):this._fireAndBubble.call(this.parent,e,n))}}_getProtoListeners(e){let n=this._cache.get(bg);if(!n){n={};let i=Object.getPrototypeOf(this);for(;i;){if(!i.eventListeners){i=Object.getPrototypeOf(i);continue}for(var r in i.eventListeners){const s=i.eventListeners[r],o=n[r]||[];n[r]=s.concat(o)}i=Object.getPrototypeOf(i)}this._cache.set(bg,n)}return n[e]}_fire(e,n){n=n||{},n.currentTarget=this,n.type=e;const r=this._getProtoListeners(e);if(r)for(var i=0;i<r.length;i++)r[i].handler.call(this,n);const s=this.eventListeners[e];if(s)for(var i=0;i<s.length;i++)s[i].handler.call(this,n)}draw(){return this.drawScene(),this.drawHit(),this}_createDragElement(e){var n=e?e.pointerId:void 0,r=this.getStage(),i=this.getAbsolutePosition(),s=r._getPointerById(n)||r._changedPointerPositions[0]||i;Jt._dragElements.set(this._id,{node:this,startPointerPos:s,offset:{x:s.x-i.x,y:s.y-i.y},dragStatus:"ready",pointerId:n})}startDrag(e,n=!0){Jt._dragElements.has(this._id)||this._createDragElement(e);const r=Jt._dragElements.get(this._id);r.dragStatus="dragging",this.fire("dragstart",{type:"dragstart",target:this,evt:e&&e.evt},n)}_setDragPosition(e,n){const r=this.getStage()._getPointerById(n.pointerId);if(r){var i={x:r.x-n.offset.x,y:r.y-n.offset.y},s=this.dragBoundFunc();if(s!==void 0){const o=s.call(this,i,e);o?i=o:ne.warn("dragBoundFunc did not return any value. That is unexpected behavior. You must return new absolute position from dragBoundFunc.")}(!this._lastPos||this._lastPos.x!==i.x||this._lastPos.y!==i.y)&&(this.setAbsolutePosition(i),this._requestDraw()),this._lastPos=i}}stopDrag(e){const n=Jt._dragElements.get(this._id);n&&(n.dragStatus="stopped"),Jt._endDragBefore(e),Jt._endDragAfter(e)}setDraggable(e){this._setAttr("draggable",e),this._dragChange()}isDragging(){const e=Jt._dragElements.get(this._id);return e?e.dragStatus==="dragging":!1}_listenDrag(){this._dragCleanup(),this.on("mousedown.konva touchstart.konva",function(e){var n=e.evt.button!==void 0,r=!n||tt.dragButtons.indexOf(e.evt.button)>=0;if(r&&!this.isDragging()){var i=!1;Jt._dragElements.forEach(s=>{this.isAncestorOf(s.node)&&(i=!0)}),i||this._createDragElement(e)}})}_dragChange(){if(this.attrs.draggable)this._listenDrag();else{this._dragCleanup();var e=this.getStage();if(!e)return;const n=Jt._dragElements.get(this._id),r=n&&n.dragStatus==="dragging",i=n&&n.dragStatus==="ready";r?this.stopDrag():i&&Jt._dragElements.delete(this._id)}}_dragCleanup(){this.off("mousedown.konva"),this.off("touchstart.konva")}isClientRectOnScreen(e={x:0,y:0}){const n=this.getStage();if(!n)return!1;const r={x:-e.x,y:-e.y,width:n.width()+e.x,height:n.height()+e.y};return ne.haveIntersection(r,this.getClientRect())}static create(e,n){return ne._isString(e)&&(e=JSON.parse(e)),this._createNode(e,n)}static _createNode(e,n){var r=Rx.prototype.getClassName.call(e),i=e.children,s,o,a;n&&(e.attrs.container=n),tt[r]||(ne.warn('Can not find a node with class name "'+r+'". Fallback to "Shape".'),r="Shape");const l=tt[r];if(s=new l(e.attrs),i)for(o=i.length,a=0;a<o;a++)s.add(Rx._createNode(i[a]));return s}};je.prototype.nodeType="Node";je.prototype._attrsAffectingSize=[];je.prototype.eventListeners={};je.prototype.on.call(je.prototype,pH,function(){if(this._batchingTransformChange){this._needClearTransformCache=!0;return}this._clearCache(Ga),this._clearSelfAndDescendantCache(Xo)});je.prototype.on.call(je.prototype,"visibleChange.konva",function(){this._clearSelfAndDescendantCache(Ex)});je.prototype.on.call(je.prototype,"listeningChange.konva",function(){this._clearSelfAndDescendantCache(kx)});je.prototype.on.call(je.prototype,"opacityChange.konva",function(){this._clearSelfAndDescendantCache(am)});const vn=W.addGetterSetter;vn(je,"zIndex");vn(je,"absolutePosition");vn(je,"position");vn(je,"x",0,Me());vn(je,"y",0,Me());vn(je,"globalCompositeOperation","source-over",Rd());vn(je,"opacity",1,Me());vn(je,"name","",Rd());vn(je,"id","",Rd());vn(je,"rotation",0,Me());W.addComponentsGetterSetter(je,"scale",["x","y"]);vn(je,"scaleX",1,Me());vn(je,"scaleY",1,Me());W.addComponentsGetterSetter(je,"skew",["x","y"]);vn(je,"skewX",0,Me());vn(je,"skewY",0,Me());W.addComponentsGetterSetter(je,"offset",["x","y"]);vn(je,"offsetX",0,Me());vn(je,"offsetY",0,Me());vn(je,"dragDistance",null,Me());vn(je,"width",0,Me());vn(je,"height",0,Me());vn(je,"listening",!0,io());vn(je,"preventDefault",!0,io());vn(je,"filters",null,function(t){return this._filterUpToDate=!1,t});vn(je,"visible",!0,io());vn(je,"transformsEnabled","all",Rd());vn(je,"size");vn(je,"dragBoundFunc");vn(je,"draggable",!1,io());W.backCompat(je,{rotateDeg:"rotate",setRotationDeg:"setRotation",getRotationDeg:"getRotation"});class Qi extends je{constructor(){super(...arguments),this.children=[]}getChildren(e){if(!e)return this.children||[];const n=this.children||[];var r=[];return n.forEach(function(i){e(i)&&r.push(i)}),r}hasChildren(){return this.getChildren().length>0}removeChildren(){return this.getChildren().forEach(e=>{e.parent=null,e.index=0,e.remove()}),this.children=[],this._requestDraw(),this}destroyChildren(){return this.getChildren().forEach(e=>{e.parent=null,e.index=0,e.destroy()}),this.children=[],this._requestDraw(),this}add(...e){if(arguments.length>1){for(var n=0;n<arguments.length;n++)this.add(arguments[n]);return this}var r=e[0];return r.getParent()?(r.moveTo(this),this):(this._validateAdd(r),r.index=this.getChildren().length,r.parent=this,r._clearCaches(),this.getChildren().push(r),this._fire("add",{child:r}),this._requestDraw(),this)}destroy(){return this.hasChildren()&&this.destroyChildren(),super.destroy(),this}find(e){return this._generalFind(e,!1)}findOne(e){var n=this._generalFind(e,!0);return n.length>0?n[0]:void 0}_generalFind(e,n){var r=[];return this._descendants(i=>{const s=i._isMatch(e);return s&&r.push(i),!!(s&&n)}),r}_descendants(e){let n=!1;const r=this.getChildren();for(const i of r){if(n=e(i),n)return!0;if(i.hasChildren()&&(n=i._descendants(e),n))return!0}return!1}toObject(){var e=je.prototype.toObject.call(this);return e.children=[],this.getChildren().forEach(n=>{e.children.push(n.toObject())}),e}isAncestorOf(e){for(var n=e.getParent();n;){if(n._id===this._id)return!0;n=n.getParent()}return!1}clone(e){var n=je.prototype.clone.call(this,e);return this.getChildren().forEach(function(r){n.add(r.clone())}),n}getAllIntersections(e){var n=[];return this.find("Shape").forEach(function(r){r.isVisible()&&r.intersects(e)&&n.push(r)}),n}_clearSelfAndDescendantCache(e){var n;super._clearSelfAndDescendantCache(e),!this.isCached()&&((n=this.children)===null||n===void 0||n.forEach(function(r){r._clearSelfAndDescendantCache(e)}))}_setChildrenIndices(){var e;(e=this.children)===null||e===void 0||e.forEach(function(n,r){n.index=r}),this._requestDraw()}drawScene(e,n){var r=this.getLayer(),i=e||r&&r.getCanvas(),s=i&&i.getContext(),o=this._getCanvasCache(),a=o&&o.scene,l=i&&i.isCache;if(!this.isVisible()&&!l)return this;if(a){s.save();var c=this.getAbsoluteTransform(n).getMatrix();s.transform(c[0],c[1],c[2],c[3],c[4],c[5]),this._drawCachedSceneCanvas(s),s.restore()}else this._drawChildren("drawScene",i,n);return this}drawHit(e,n){if(!this.shouldDrawHit(n))return this;var r=this.getLayer(),i=e||r&&r.hitCanvas,s=i&&i.getContext(),o=this._getCanvasCache(),a=o&&o.hit;if(a){s.save();var l=this.getAbsoluteTransform(n).getMatrix();s.transform(l[0],l[1],l[2],l[3],l[4],l[5]),this._drawCachedHitCanvas(s),s.restore()}else this._drawChildren("drawHit",i,n);return this}_drawChildren(e,n,r){var i,s=n&&n.getContext(),o=this.clipWidth(),a=this.clipHeight(),l=this.clipFunc(),c=o&&a||l;const h=r===this;if(c){s.save();var f=this.getAbsoluteTransform(r),p=f.getMatrix();if(s.transform(p[0],p[1],p[2],p[3],p[4],p[5]),s.beginPath(),l)l.call(this,s,this);else{var g=this.clipX(),v=this.clipY();s.rect(g,v,o,a)}s.clip(),p=f.copy().invert().getMatrix(),s.transform(p[0],p[1],p[2],p[3],p[4],p[5])}var x=!h&&this.globalCompositeOperation()!=="source-over"&&e==="drawScene";x&&(s.save(),s._applyGlobalCompositeOperation(this)),(i=this.children)===null||i===void 0||i.forEach(function(k){k[e](n,r)}),x&&s.restore(),c&&s.restore()}getClientRect(e){var n;e=e||{};var r=e.skipTransform,i=e.relativeTo,s,o,a,l,c={x:1/0,y:1/0,width:0,height:0},h=this;(n=this.children)===null||n===void 0||n.forEach(function(x){if(x.visible()){var k=x.getClientRect({relativeTo:h,skipShadow:e.skipShadow,skipStroke:e.skipStroke});k.width===0&&k.height===0||(s===void 0?(s=k.x,o=k.y,a=k.x+k.width,l=k.y+k.height):(s=Math.min(s,k.x),o=Math.min(o,k.y),a=Math.max(a,k.x+k.width),l=Math.max(l,k.y+k.height)))}});for(var f=this.find("Shape"),p=!1,g=0;g<f.length;g++){var v=f[g];if(v._isVisible(this)){p=!0;break}}return p&&s!==void 0?c={x:s,y:o,width:a-s,height:l-o}:c={x:0,y:0,width:0,height:0},r?c:this._transformedRect(c,i)}}W.addComponentsGetterSetter(Qi,"clip",["x","y","width","height"]);W.addGetterSetter(Qi,"clipX",void 0,Me());W.addGetterSetter(Qi,"clipY",void 0,Me());W.addGetterSetter(Qi,"clipWidth",void 0,Me());W.addGetterSetter(Qi,"clipHeight",void 0,Me());W.addGetterSetter(Qi,"clipFunc");const If=new Map,aA=tt._global.PointerEvent!==void 0;function f1(t){return If.get(t)}function lS(t){return{evt:t,pointerId:t.pointerId}}function lA(t,e){return If.get(t)===e}function uA(t,e){Zh(t),e.getStage()&&(If.set(t,e),aA&&e._fire("gotpointercapture",lS(new PointerEvent("gotpointercapture"))))}function Zh(t,e){const n=If.get(t);if(!n)return;const r=n.getStage();r&&r.content,If.delete(t),aA&&n._fire("lostpointercapture",lS(new PointerEvent("lostpointercapture")))}var mH="Stage",vH="string",WR="px",yH="mouseout",cA="mouseleave",dA="mouseover",hA="mouseenter",fA="mousemove",pA="mousedown",gA="mouseup",kh="pointermove",Eh="pointerdown",Lc="pointerup",Rh="pointercancel",wH="lostpointercapture",Sg="pointerout",Cg="pointerleave",kg="pointerover",Eg="pointerenter",Tx="contextmenu",mA="touchstart",vA="touchend",yA="touchmove",wA="touchcancel",Px="wheel",xH=5,_H=[[hA,"_pointerenter"],[pA,"_pointerdown"],[fA,"_pointermove"],[gA,"_pointerup"],[cA,"_pointerleave"],[mA,"_pointerdown"],[yA,"_pointermove"],[vA,"_pointerup"],[wA,"_pointercancel"],[dA,"_pointerover"],[Px,"_wheel"],[Tx,"_contextmenu"],[Eh,"_pointerdown"],[kh,"_pointermove"],[Lc,"_pointerup"],[Rh,"_pointercancel"],[wH,"_lostpointercapture"]];const p1={mouse:{[Sg]:yH,[Cg]:cA,[kg]:dA,[Eg]:hA,[kh]:fA,[Eh]:pA,[Lc]:gA,[Rh]:"mousecancel",pointerclick:"click",pointerdblclick:"dblclick"},touch:{[Sg]:"touchout",[Cg]:"touchleave",[kg]:"touchover",[Eg]:"touchenter",[kh]:yA,[Eh]:mA,[Lc]:vA,[Rh]:wA,pointerclick:"tap",pointerdblclick:"dbltap"},pointer:{[Sg]:Sg,[Cg]:Cg,[kg]:kg,[Eg]:Eg,[kh]:kh,[Eh]:Eh,[Lc]:Lc,[Rh]:Rh,pointerclick:"pointerclick",pointerdblclick:"pointerdblclick"}},Th=t=>t.indexOf("pointer")>=0?"pointer":t.indexOf("touch")>=0?"touch":"mouse",tc=t=>{const e=Th(t);if(e==="pointer")return tt.pointerEventsEnabled&&p1.pointer;if(e==="touch")return p1.touch;if(e==="mouse")return p1.mouse};function HR(t={}){return(t.clipFunc||t.clipWidth||t.clipHeight)&&ne.warn("Stage does not support clipping. Please use clip for Layers or Groups."),t}const bH="Pointer position is missing and not registered by the stage. Looks like it is outside of the stage container. You can set it manually from event: stage.setPointersPositions(event);",um=[];let q0=class extends Qi{constructor(e){super(HR(e)),this._pointerPositions=[],this._changedPointerPositions=[],this._buildDOM(),this._bindContentEvents(),um.push(this),this.on("widthChange.konva heightChange.konva",this._resizeDOM),this.on("visibleChange.konva",this._checkVisibility),this.on("clipWidthChange.konva clipHeightChange.konva clipFuncChange.konva",()=>{HR(this.attrs)}),this._checkVisibility()}_validateAdd(e){const n=e.getType()==="Layer",r=e.getType()==="FastLayer";n||r||ne.throw("You may only add layers to the stage.")}_checkVisibility(){if(!this.content)return;const e=this.visible()?"":"none";this.content.style.display=e}setContainer(e){if(typeof e===vH){if(e.charAt(0)==="."){var n=e.slice(1);e=document.getElementsByClassName(n)[0]}else{var r;e.charAt(0)!=="#"?r=e:r=e.slice(1),e=document.getElementById(r)}if(!e)throw"Can not find container in document with id "+r}return this._setAttr("container",e),this.content&&(this.content.parentElement&&this.content.parentElement.removeChild(this.content),e.appendChild(this.content)),this}shouldDrawHit(){return!0}clear(){var e=this.children,n=e.length,r;for(r=0;r<n;r++)e[r].clear();return this}clone(e){return e||(e={}),e.container=typeof document<"u"&&document.createElement("div"),Qi.prototype.clone.call(this,e)}destroy(){super.destroy();var e=this.content;e&&ne._isInDocument(e)&&this.container().removeChild(e);var n=um.indexOf(this);return n>-1&&um.splice(n,1),this}getPointerPosition(){const e=this._pointerPositions[0]||this._changedPointerPositions[0];return e?{x:e.x,y:e.y}:(ne.warn(bH),null)}_getPointerById(e){return this._pointerPositions.find(n=>n.id===e)}getPointersPositions(){return this._pointerPositions}getStage(){return this}getContent(){return this.content}_toKonvaCanvas(e){e=e||{},e.x=e.x||0,e.y=e.y||0,e.width=e.width||this.width(),e.height=e.height||this.height();var n=new Uc({width:e.width,height:e.height,pixelRatio:e.pixelRatio||1}),r=n.getContext()._context,i=this.children;return(e.x||e.y)&&r.translate(-1*e.x,-1*e.y),i.forEach(function(s){if(s.isVisible()){var o=s._toKonvaCanvas(e);r.drawImage(o._canvas,e.x,e.y,o.getWidth()/o.getPixelRatio(),o.getHeight()/o.getPixelRatio())}}),n}getIntersection(e){if(!e)return null;var n=this.children,r=n.length,i=r-1,s;for(s=i;s>=0;s--){const o=n[s].getIntersection(e);if(o)return o}return null}_resizeDOM(){var e=this.width(),n=this.height();this.content&&(this.content.style.width=e+WR,this.content.style.height=n+WR),this.bufferCanvas.setSize(e,n),this.bufferHitCanvas.setSize(e,n),this.children.forEach(r=>{r.setSize({width:e,height:n}),r.draw()})}add(e,...n){if(arguments.length>1){for(var r=0;r<arguments.length;r++)this.add(arguments[r]);return this}super.add(e);var i=this.children.length;return i>xH&&ne.warn("The stage has "+i+" layers. Recommended maximum number of layers is 3-5. Adding more layers into the stage may drop the performance. Rethink your tree structure, you can use Konva.Group."),e.setSize({width:this.width(),height:this.height()}),e.draw(),tt.isBrowser&&this.content.appendChild(e.canvas._canvas),this}getParent(){return null}getLayer(){return null}hasPointerCapture(e){return lA(e,this)}setPointerCapture(e){uA(e,this)}releaseCapture(e){Zh(e)}getLayers(){return this.children}_bindContentEvents(){tt.isBrowser&&_H.forEach(([e,n])=>{this.content.addEventListener(e,r=>{this[n](r)})})}_pointerenter(e){this.setPointersPositions(e);const n=tc(e.type);this._fire(n.pointerenter,{evt:e,target:this,currentTarget:this})}_pointerover(e){this.setPointersPositions(e);const n=tc(e.type);this._fire(n.pointerover,{evt:e,target:this,currentTarget:this})}_getTargetShape(e){let n=this[e+"targetShape"];return n&&!n.getStage()&&(n=null),n}_pointerleave(e){const n=tc(e.type),r=Th(e.type);if(n){this.setPointersPositions(e);var i=this._getTargetShape(r),s=!Jt.isDragging||tt.hitOnDragEnabled;i&&s?(i._fireAndBubble(n.pointerout,{evt:e}),i._fireAndBubble(n.pointerleave,{evt:e}),this._fire(n.pointerleave,{evt:e,target:this,currentTarget:this}),this[r+"targetShape"]=null):s&&(this._fire(n.pointerleave,{evt:e,target:this,currentTarget:this}),this._fire(n.pointerout,{evt:e,target:this,currentTarget:this})),this.pointerPos=void 0,this._pointerPositions=[]}}_pointerdown(e){const n=tc(e.type),r=Th(e.type);if(n){this.setPointersPositions(e);var i=!1;this._changedPointerPositions.forEach(s=>{var o=this.getIntersection(s);if(Jt.justDragged=!1,tt["_"+r+"ListenClick"]=!0,!(o&&o.isListening()))return;tt.capturePointerEventsEnabled&&o.setPointerCapture(s.id),this[r+"ClickStartShape"]=o,o._fireAndBubble(n.pointerdown,{evt:e,pointerId:s.id}),i=!0;const l=e.type.indexOf("touch")>=0;o.preventDefault()&&e.cancelable&&l&&e.preventDefault()}),i||this._fire(n.pointerdown,{evt:e,target:this,currentTarget:this,pointerId:this._pointerPositions[0].id})}}_pointermove(e){const n=tc(e.type),r=Th(e.type);if(!n)return;Jt.isDragging&&Jt.node.preventDefault()&&e.cancelable&&e.preventDefault(),this.setPointersPositions(e);var i=!Jt.isDragging||tt.hitOnDragEnabled;if(!i)return;var s={};let o=!1;var a=this._getTargetShape(r);this._changedPointerPositions.forEach(l=>{const c=f1(l.id)||this.getIntersection(l),h=l.id,f={evt:e,pointerId:h};var p=a!==c;if(p&&a&&(a._fireAndBubble(n.pointerout,f,c),a._fireAndBubble(n.pointerleave,f,c)),c){if(s[c._id])return;s[c._id]=!0}c&&c.isListening()?(o=!0,p&&(c._fireAndBubble(n.pointerover,f,a),c._fireAndBubble(n.pointerenter,f,a),this[r+"targetShape"]=c),c._fireAndBubble(n.pointermove,f)):a&&(this._fire(n.pointerover,{evt:e,target:this,currentTarget:this,pointerId:h}),this[r+"targetShape"]=null)}),o||this._fire(n.pointermove,{evt:e,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id})}_pointerup(e){const n=tc(e.type),r=Th(e.type);if(!n)return;this.setPointersPositions(e);const i=this[r+"ClickStartShape"],s=this[r+"ClickEndShape"];var o={};let a=!1;this._changedPointerPositions.forEach(l=>{const c=f1(l.id)||this.getIntersection(l);if(c){if(c.releaseCapture(l.id),o[c._id])return;o[c._id]=!0}const h=l.id,f={evt:e,pointerId:h};let p=!1;tt["_"+r+"InDblClickWindow"]?(p=!0,clearTimeout(this[r+"DblTimeout"])):Jt.justDragged||(tt["_"+r+"InDblClickWindow"]=!0,clearTimeout(this[r+"DblTimeout"])),this[r+"DblTimeout"]=setTimeout(function(){tt["_"+r+"InDblClickWindow"]=!1},tt.dblClickWindow),c&&c.isListening()?(a=!0,this[r+"ClickEndShape"]=c,c._fireAndBubble(n.pointerup,f),tt["_"+r+"ListenClick"]&&i&&i===c&&(c._fireAndBubble(n.pointerclick,f),p&&s&&s===c&&c._fireAndBubble(n.pointerdblclick,f))):(this[r+"ClickEndShape"]=null,tt["_"+r+"ListenClick"]&&this._fire(n.pointerclick,{evt:e,target:this,currentTarget:this,pointerId:h}),p&&this._fire(n.pointerdblclick,{evt:e,target:this,currentTarget:this,pointerId:h}))}),a||this._fire(n.pointerup,{evt:e,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),tt["_"+r+"ListenClick"]=!1,e.cancelable&&e.preventDefault()}_contextmenu(e){this.setPointersPositions(e);var n=this.getIntersection(this.getPointerPosition());n&&n.isListening()?n._fireAndBubble(Tx,{evt:e}):this._fire(Tx,{evt:e,target:this,currentTarget:this})}_wheel(e){this.setPointersPositions(e);var n=this.getIntersection(this.getPointerPosition());n&&n.isListening()?n._fireAndBubble(Px,{evt:e}):this._fire(Px,{evt:e,target:this,currentTarget:this})}_pointercancel(e){this.setPointersPositions(e);const n=f1(e.pointerId)||this.getIntersection(this.getPointerPosition());n&&n._fireAndBubble(Lc,lS(e)),Zh(e.pointerId)}_lostpointercapture(e){Zh(e.pointerId)}setPointersPositions(e){var n=this._getContentPosition(),r=null,i=null;e=e||window.event,e.touches!==void 0?(this._pointerPositions=[],this._changedPointerPositions=[],Array.prototype.forEach.call(e.touches,s=>{this._pointerPositions.push({id:s.identifier,x:(s.clientX-n.left)/n.scaleX,y:(s.clientY-n.top)/n.scaleY})}),Array.prototype.forEach.call(e.changedTouches||e.touches,s=>{this._changedPointerPositions.push({id:s.identifier,x:(s.clientX-n.left)/n.scaleX,y:(s.clientY-n.top)/n.scaleY})})):(r=(e.clientX-n.left)/n.scaleX,i=(e.clientY-n.top)/n.scaleY,this.pointerPos={x:r,y:i},this._pointerPositions=[{x:r,y:i,id:ne._getFirstPointerId(e)}],this._changedPointerPositions=[{x:r,y:i,id:ne._getFirstPointerId(e)}])}_setPointerPosition(e){ne.warn('Method _setPointerPosition is deprecated. Use "stage.setPointersPositions(event)" instead.'),this.setPointersPositions(e)}_getContentPosition(){if(!this.content||!this.content.getBoundingClientRect)return{top:0,left:0,scaleX:1,scaleY:1};var e=this.content.getBoundingClientRect();return{top:e.top,left:e.left,scaleX:e.width/this.content.clientWidth||1,scaleY:e.height/this.content.clientHeight||1}}_buildDOM(){if(this.bufferCanvas=new Uc({width:this.width(),height:this.height()}),this.bufferHitCanvas=new aS({pixelRatio:1,width:this.width(),height:this.height()}),!!tt.isBrowser){var e=this.container();if(!e)throw"Stage has no container. A container is required.";e.innerHTML="",this.content=document.createElement("div"),this.content.style.position="relative",this.content.style.userSelect="none",this.content.className="konvajs-content",this.content.setAttribute("role","presentation"),e.appendChild(this.content),this._resizeDOM()}}cache(){return ne.warn("Cache function is not allowed for stage. You may use cache only for layers, groups and shapes."),this}clearCache(){return this}batchDraw(){return this.getChildren().forEach(function(e){e.batchDraw()}),this}};q0.prototype.nodeType=mH;$n(q0);W.addGetterSetter(q0,"container");var xA="hasShadow",_A="shadowRGBA",bA="patternImage",SA="linearGradient",CA="radialGradient";let Rg;function g1(){return Rg||(Rg=ne.createCanvasElement().getContext("2d"),Rg)}const Qh={};function SH(t){t.fill()}function CH(t){t.stroke()}function kH(t){t.fill()}function EH(t){t.stroke()}function RH(){this._clearCache(xA)}function TH(){this._clearCache(_A)}function PH(){this._clearCache(bA)}function LH(){this._clearCache(SA)}function MH(){this._clearCache(CA)}class Se extends je{constructor(e){super(e);let n;for(;n=ne.getRandomColor(),!(n&&!(n in Qh)););this.colorKey=n,Qh[n]=this}getContext(){return ne.warn("shape.getContext() method is deprecated. Please do not use it."),this.getLayer().getContext()}getCanvas(){return ne.warn("shape.getCanvas() method is deprecated. Please do not use it."),this.getLayer().getCanvas()}getSceneFunc(){return this.attrs.sceneFunc||this._sceneFunc}getHitFunc(){return this.attrs.hitFunc||this._hitFunc}hasShadow(){return this._getCache(xA,this._hasShadow)}_hasShadow(){return this.shadowEnabled()&&this.shadowOpacity()!==0&&!!(this.shadowColor()||this.shadowBlur()||this.shadowOffsetX()||this.shadowOffsetY())}_getFillPattern(){return this._getCache(bA,this.__getFillPattern)}__getFillPattern(){if(this.fillPatternImage()){var e=g1();const n=e.createPattern(this.fillPatternImage(),this.fillPatternRepeat()||"repeat");if(n&&n.setTransform){const r=new Yi;r.translate(this.fillPatternX(),this.fillPatternY()),r.rotate(tt.getAngle(this.fillPatternRotation())),r.scale(this.fillPatternScaleX(),this.fillPatternScaleY()),r.translate(-1*this.fillPatternOffsetX(),-1*this.fillPatternOffsetY());const i=r.getMatrix();n.setTransform({a:i[0],b:i[1],c:i[2],d:i[3],e:i[4],f:i[5]})}return n}}_getLinearGradient(){return this._getCache(SA,this.__getLinearGradient)}__getLinearGradient(){var e=this.fillLinearGradientColorStops();if(e){for(var n=g1(),r=this.fillLinearGradientStartPoint(),i=this.fillLinearGradientEndPoint(),s=n.createLinearGradient(r.x,r.y,i.x,i.y),o=0;o<e.length;o+=2)s.addColorStop(e[o],e[o+1]);return s}}_getRadialGradient(){return this._getCache(CA,this.__getRadialGradient)}__getRadialGradient(){var e=this.fillRadialGradientColorStops();if(e){for(var n=g1(),r=this.fillRadialGradientStartPoint(),i=this.fillRadialGradientEndPoint(),s=n.createRadialGradient(r.x,r.y,this.fillRadialGradientStartRadius(),i.x,i.y,this.fillRadialGradientEndRadius()),o=0;o<e.length;o+=2)s.addColorStop(e[o],e[o+1]);return s}}getShadowRGBA(){return this._getCache(_A,this._getShadowRGBA)}_getShadowRGBA(){if(this.hasShadow()){var e=ne.colorToRGBA(this.shadowColor());return"rgba("+e.r+","+e.g+","+e.b+","+e.a*(this.shadowOpacity()||1)+")"}}hasFill(){return this._calculate("hasFill",["fillEnabled","fill","fillPatternImage","fillLinearGradientColorStops","fillRadialGradientColorStops"],()=>this.fillEnabled()&&!!(this.fill()||this.fillPatternImage()||this.fillLinearGradientColorStops()||this.fillRadialGradientColorStops()))}hasStroke(){return this._calculate("hasStroke",["strokeEnabled","strokeWidth","stroke","strokeLinearGradientColorStops"],()=>this.strokeEnabled()&&this.strokeWidth()&&!!(this.stroke()||this.strokeLinearGradientColorStops()))}hasHitStroke(){const e=this.hitStrokeWidth();return e==="auto"?this.hasStroke():this.strokeEnabled()&&!!e}intersects(e){var n=this.getStage(),r=n.bufferHitCanvas,i;return r.getContext().clear(),this.drawHit(r,null,!0),i=r.context.getImageData(Math.round(e.x),Math.round(e.y),1,1).data,i[3]>0}destroy(){return je.prototype.destroy.call(this),delete Qh[this.colorKey],delete this.colorKey,this}_useBufferCanvas(e){var n;if(!this.getStage()||!((n=this.attrs.perfectDrawEnabled)!==null&&n!==void 0?n:!0))return!1;const i=e||this.hasFill(),s=this.hasStroke(),o=this.getAbsoluteOpacity()!==1;if(i&&s&&o)return!0;const a=this.hasShadow(),l=this.shadowForStrokeEnabled();return!!(i&&s&&a&&l)}setStrokeHitEnabled(e){ne.warn("strokeHitEnabled property is deprecated. Please use hitStrokeWidth instead."),e?this.hitStrokeWidth("auto"):this.hitStrokeWidth(0)}getStrokeHitEnabled(){return this.hitStrokeWidth()!==0}getSelfRect(){var e=this.size();return{x:this._centroid?-e.width/2:0,y:this._centroid?-e.height/2:0,width:e.width,height:e.height}}getClientRect(e={}){const n=e.skipTransform,r=e.relativeTo,i=this.getSelfRect(),o=!e.skipStroke&&this.hasStroke()&&this.strokeWidth()||0,a=i.width+o,l=i.height+o,c=!e.skipShadow&&this.hasShadow(),h=c?this.shadowOffsetX():0,f=c?this.shadowOffsetY():0,p=a+Math.abs(h),g=l+Math.abs(f),v=c&&this.shadowBlur()||0,x=p+v*2,k=g+v*2;let C=0;Math.round(o/2)!==o/2&&(C=1);const b={width:x+C,height:k+C,x:-Math.round(o/2+v)+Math.min(h,0)+i.x,y:-Math.round(o/2+v)+Math.min(f,0)+i.y};return n?b:this._transformedRect(b,r)}drawScene(e,n){var r=this.getLayer(),i=e||r.getCanvas(),s=i.getContext(),o=this._getCanvasCache(),a=this.getSceneFunc(),l=this.hasShadow(),c,h,f,p=i.isCache,g=n===this;if(!this.isVisible()&&!g)return this;if(o){s.save();var v=this.getAbsoluteTransform(n).getMatrix();return s.transform(v[0],v[1],v[2],v[3],v[4],v[5]),this._drawCachedSceneCanvas(s),s.restore(),this}if(!a)return this;if(s.save(),this._useBufferCanvas()&&!p){c=this.getStage(),h=c.bufferCanvas,f=h.getContext(),f.clear(),f.save(),f._applyLineJoin(this);var x=this.getAbsoluteTransform(n).getMatrix();f.transform(x[0],x[1],x[2],x[3],x[4],x[5]),a.call(this,f,this),f.restore();var k=h.pixelRatio;l&&s._applyShadow(this),s._applyOpacity(this),s._applyGlobalCompositeOperation(this),s.drawImage(h._canvas,0,0,h.width/k,h.height/k)}else{if(s._applyLineJoin(this),!g){var x=this.getAbsoluteTransform(n).getMatrix();s.transform(x[0],x[1],x[2],x[3],x[4],x[5]),s._applyOpacity(this),s._applyGlobalCompositeOperation(this)}l&&s._applyShadow(this),a.call(this,s,this)}return s.restore(),this}drawHit(e,n,r=!1){if(!this.shouldDrawHit(n,r))return this;var i=this.getLayer(),s=e||i.hitCanvas,o=s&&s.getContext(),a=this.hitFunc()||this.sceneFunc(),l=this._getCanvasCache(),c=l&&l.hit;if(this.colorKey||ne.warn("Looks like your canvas has a destroyed shape in it. Do not reuse shape after you destroyed it. If you want to reuse shape you should call remove() instead of destroy()"),c){o.save();var h=this.getAbsoluteTransform(n).getMatrix();return o.transform(h[0],h[1],h[2],h[3],h[4],h[5]),this._drawCachedHitCanvas(o),o.restore(),this}if(!a)return this;if(o.save(),o._applyLineJoin(this),!(this===n)){var p=this.getAbsoluteTransform(n).getMatrix();o.transform(p[0],p[1],p[2],p[3],p[4],p[5])}return a.call(this,o,this),o.restore(),this}drawHitFromCache(e=0){var n=this._getCanvasCache(),r=this._getCachedSceneCanvas(),i=n.hit,s=i.getContext(),o=i.getWidth(),a=i.getHeight(),l,c,h,f,p,g;s.clear(),s.drawImage(r._canvas,0,0,o,a);try{for(l=s.getImageData(0,0,o,a),c=l.data,h=c.length,f=ne._hexToRgb(this.colorKey),p=0;p<h;p+=4)g=c[p+3],g>e?(c[p]=f.r,c[p+1]=f.g,c[p+2]=f.b,c[p+3]=255):c[p+3]=0;s.putImageData(l,0,0)}catch(v){ne.error("Unable to draw hit graph from cached scene canvas. "+v.message)}return this}hasPointerCapture(e){return lA(e,this)}setPointerCapture(e){uA(e,this)}releaseCapture(e){Zh(e)}}Se.prototype._fillFunc=SH;Se.prototype._strokeFunc=CH;Se.prototype._fillFuncHit=kH;Se.prototype._strokeFuncHit=EH;Se.prototype._centroid=!1;Se.prototype.nodeType="Shape";$n(Se);Se.prototype.eventListeners={};Se.prototype.on.call(Se.prototype,"shadowColorChange.konva shadowBlurChange.konva shadowOffsetChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",RH);Se.prototype.on.call(Se.prototype,"shadowColorChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",TH);Se.prototype.on.call(Se.prototype,"fillPriorityChange.konva fillPatternImageChange.konva fillPatternRepeatChange.konva fillPatternScaleXChange.konva fillPatternScaleYChange.konva fillPatternOffsetXChange.konva fillPatternOffsetYChange.konva fillPatternXChange.konva fillPatternYChange.konva fillPatternRotationChange.konva",PH);Se.prototype.on.call(Se.prototype,"fillPriorityChange.konva fillLinearGradientColorStopsChange.konva fillLinearGradientStartPointXChange.konva fillLinearGradientStartPointYChange.konva fillLinearGradientEndPointXChange.konva fillLinearGradientEndPointYChange.konva",LH);Se.prototype.on.call(Se.prototype,"fillPriorityChange.konva fillRadialGradientColorStopsChange.konva fillRadialGradientStartPointXChange.konva fillRadialGradientStartPointYChange.konva fillRadialGradientEndPointXChange.konva fillRadialGradientEndPointYChange.konva fillRadialGradientStartRadiusChange.konva fillRadialGradientEndRadiusChange.konva",MH);W.addGetterSetter(Se,"stroke",void 0,oA());W.addGetterSetter(Se,"strokeWidth",2,Me());W.addGetterSetter(Se,"fillAfterStrokeEnabled",!1);W.addGetterSetter(Se,"hitStrokeWidth","auto",oS());W.addGetterSetter(Se,"strokeHitEnabled",!0,io());W.addGetterSetter(Se,"perfectDrawEnabled",!0,io());W.addGetterSetter(Se,"shadowForStrokeEnabled",!0,io());W.addGetterSetter(Se,"lineJoin");W.addGetterSetter(Se,"lineCap");W.addGetterSetter(Se,"sceneFunc");W.addGetterSetter(Se,"hitFunc");W.addGetterSetter(Se,"dash");W.addGetterSetter(Se,"dashOffset",0,Me());W.addGetterSetter(Se,"shadowColor",void 0,Rd());W.addGetterSetter(Se,"shadowBlur",0,Me());W.addGetterSetter(Se,"shadowOpacity",1,Me());W.addComponentsGetterSetter(Se,"shadowOffset",["x","y"]);W.addGetterSetter(Se,"shadowOffsetX",0,Me());W.addGetterSetter(Se,"shadowOffsetY",0,Me());W.addGetterSetter(Se,"fillPatternImage");W.addGetterSetter(Se,"fill",void 0,oA());W.addGetterSetter(Se,"fillPatternX",0,Me());W.addGetterSetter(Se,"fillPatternY",0,Me());W.addGetterSetter(Se,"fillLinearGradientColorStops");W.addGetterSetter(Se,"strokeLinearGradientColorStops");W.addGetterSetter(Se,"fillRadialGradientStartRadius",0);W.addGetterSetter(Se,"fillRadialGradientEndRadius",0);W.addGetterSetter(Se,"fillRadialGradientColorStops");W.addGetterSetter(Se,"fillPatternRepeat","repeat");W.addGetterSetter(Se,"fillEnabled",!0);W.addGetterSetter(Se,"strokeEnabled",!0);W.addGetterSetter(Se,"shadowEnabled",!0);W.addGetterSetter(Se,"dashEnabled",!0);W.addGetterSetter(Se,"strokeScaleEnabled",!0);W.addGetterSetter(Se,"fillPriority","color");W.addComponentsGetterSetter(Se,"fillPatternOffset",["x","y"]);W.addGetterSetter(Se,"fillPatternOffsetX",0,Me());W.addGetterSetter(Se,"fillPatternOffsetY",0,Me());W.addComponentsGetterSetter(Se,"fillPatternScale",["x","y"]);W.addGetterSetter(Se,"fillPatternScaleX",1,Me());W.addGetterSetter(Se,"fillPatternScaleY",1,Me());W.addComponentsGetterSetter(Se,"fillLinearGradientStartPoint",["x","y"]);W.addComponentsGetterSetter(Se,"strokeLinearGradientStartPoint",["x","y"]);W.addGetterSetter(Se,"fillLinearGradientStartPointX",0);W.addGetterSetter(Se,"strokeLinearGradientStartPointX",0);W.addGetterSetter(Se,"fillLinearGradientStartPointY",0);W.addGetterSetter(Se,"strokeLinearGradientStartPointY",0);W.addComponentsGetterSetter(Se,"fillLinearGradientEndPoint",["x","y"]);W.addComponentsGetterSetter(Se,"strokeLinearGradientEndPoint",["x","y"]);W.addGetterSetter(Se,"fillLinearGradientEndPointX",0);W.addGetterSetter(Se,"strokeLinearGradientEndPointX",0);W.addGetterSetter(Se,"fillLinearGradientEndPointY",0);W.addGetterSetter(Se,"strokeLinearGradientEndPointY",0);W.addComponentsGetterSetter(Se,"fillRadialGradientStartPoint",["x","y"]);W.addGetterSetter(Se,"fillRadialGradientStartPointX",0);W.addGetterSetter(Se,"fillRadialGradientStartPointY",0);W.addComponentsGetterSetter(Se,"fillRadialGradientEndPoint",["x","y"]);W.addGetterSetter(Se,"fillRadialGradientEndPointX",0);W.addGetterSetter(Se,"fillRadialGradientEndPointY",0);W.addGetterSetter(Se,"fillPatternRotation",0);W.backCompat(Se,{dashArray:"dash",getDashArray:"getDash",setDashArray:"getDash",drawFunc:"sceneFunc",getDrawFunc:"getSceneFunc",setDrawFunc:"setSceneFunc",drawHitFunc:"hitFunc",getDrawHitFunc:"getHitFunc",setDrawHitFunc:"setHitFunc"});var AH="#",NH="beforeDraw",jH="draw",kA=[{x:0,y:0},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1}],IH=kA.length;let Lu=class extends Qi{constructor(e){super(e),this.canvas=new Uc,this.hitCanvas=new aS({pixelRatio:1}),this._waitingForDraw=!1,this.on("visibleChange.konva",this._checkVisibility),this._checkVisibility(),this.on("imageSmoothingEnabledChange.konva",this._setSmoothEnabled),this._setSmoothEnabled()}createPNGStream(){return this.canvas._canvas.createPNGStream()}getCanvas(){return this.canvas}getNativeCanvasElement(){return this.canvas._canvas}getHitCanvas(){return this.hitCanvas}getContext(){return this.getCanvas().getContext()}clear(e){return this.getContext().clear(e),this.getHitCanvas().getContext().clear(e),this}setZIndex(e){super.setZIndex(e);var n=this.getStage();return n&&n.content&&(n.content.removeChild(this.getNativeCanvasElement()),e<n.children.length-1?n.content.insertBefore(this.getNativeCanvasElement(),n.children[e+1].getCanvas()._canvas):n.content.appendChild(this.getNativeCanvasElement())),this}moveToTop(){je.prototype.moveToTop.call(this);var e=this.getStage();return e&&e.content&&(e.content.removeChild(this.getNativeCanvasElement()),e.content.appendChild(this.getNativeCanvasElement())),!0}moveUp(){var e=je.prototype.moveUp.call(this);if(!e)return!1;var n=this.getStage();return!n||!n.content?!1:(n.content.removeChild(this.getNativeCanvasElement()),this.index<n.children.length-1?n.content.insertBefore(this.getNativeCanvasElement(),n.children[this.index+1].getCanvas()._canvas):n.content.appendChild(this.getNativeCanvasElement()),!0)}moveDown(){if(je.prototype.moveDown.call(this)){var e=this.getStage();if(e){var n=e.children;e.content&&(e.content.removeChild(this.getNativeCanvasElement()),e.content.insertBefore(this.getNativeCanvasElement(),n[this.index+1].getCanvas()._canvas))}return!0}return!1}moveToBottom(){if(je.prototype.moveToBottom.call(this)){var e=this.getStage();if(e){var n=e.children;e.content&&(e.content.removeChild(this.getNativeCanvasElement()),e.content.insertBefore(this.getNativeCanvasElement(),n[1].getCanvas()._canvas))}return!0}return!1}getLayer(){return this}remove(){var e=this.getNativeCanvasElement();return je.prototype.remove.call(this),e&&e.parentNode&&ne._isInDocument(e)&&e.parentNode.removeChild(e),this}getStage(){return this.parent}setSize({width:e,height:n}){return this.canvas.setSize(e,n),this.hitCanvas.setSize(e,n),this._setSmoothEnabled(),this}_validateAdd(e){var n=e.getType();n!=="Group"&&n!=="Shape"&&ne.throw("You may only add groups and shapes to a layer.")}_toKonvaCanvas(e){return e=e||{},e.width=e.width||this.getWidth(),e.height=e.height||this.getHeight(),e.x=e.x!==void 0?e.x:this.x(),e.y=e.y!==void 0?e.y:this.y(),je.prototype._toKonvaCanvas.call(this,e)}_checkVisibility(){this.visible()?this.canvas._canvas.style.display="block":this.canvas._canvas.style.display="none"}_setSmoothEnabled(){this.getContext()._context.imageSmoothingEnabled=this.imageSmoothingEnabled()}getWidth(){if(this.parent)return this.parent.width()}setWidth(){ne.warn('Can not change width of layer. Use "stage.width(value)" function instead.')}getHeight(){if(this.parent)return this.parent.height()}setHeight(){ne.warn('Can not change height of layer. Use "stage.height(value)" function instead.')}batchDraw(){return this._waitingForDraw||(this._waitingForDraw=!0,ne.requestAnimFrame(()=>{this.draw(),this._waitingForDraw=!1})),this}getIntersection(e){if(!this.isListening()||!this.isVisible())return null;for(var n=1,r=!1;;){for(let i=0;i<IH;i++){const s=kA[i],o=this._getIntersection({x:e.x+s.x*n,y:e.y+s.y*n}),a=o.shape;if(a)return a;if(r=!!o.antialiased,!o.antialiased)break}if(r)n+=1;else return null}}_getIntersection(e){const n=this.hitCanvas.pixelRatio,r=this.hitCanvas.context.getImageData(Math.round(e.x*n),Math.round(e.y*n),1,1).data,i=r[3];if(i===255){const s=ne._rgbToHex(r[0],r[1],r[2]),o=Qh[AH+s];return o?{shape:o}:{antialiased:!0}}else if(i>0)return{antialiased:!0};return{}}drawScene(e,n){var r=this.getLayer(),i=e||r&&r.getCanvas();return this._fire(NH,{node:this}),this.clearBeforeDraw()&&i.getContext().clear(),Qi.prototype.drawScene.call(this,i,n),this._fire(jH,{node:this}),this}drawHit(e,n){var r=this.getLayer(),i=e||r&&r.hitCanvas;return r&&r.clearBeforeDraw()&&r.getHitCanvas().getContext().clear(),Qi.prototype.drawHit.call(this,i,n),this}enableHitGraph(){return this.hitGraphEnabled(!0),this}disableHitGraph(){return this.hitGraphEnabled(!1),this}setHitGraphEnabled(e){ne.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening(e)}getHitGraphEnabled(e){return ne.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening()}toggleHitCanvas(){if(!(!this.parent||!this.parent.content)){var e=this.parent,n=!!this.hitCanvas._canvas.parentNode;n?e.content.removeChild(this.hitCanvas._canvas):e.content.appendChild(this.hitCanvas._canvas)}}};Lu.prototype.nodeType="Layer";$n(Lu);W.addGetterSetter(Lu,"imageSmoothingEnabled",!0);W.addGetterSetter(Lu,"clearBeforeDraw",!0);W.addGetterSetter(Lu,"hitGraphEnabled",!0,io());class uS extends Lu{constructor(e){super(e),this.listening(!1),ne.warn('Konva.Fast layer is deprecated. Please use "new Konva.Layer({ listening: false })" instead.')}}uS.prototype.nodeType="FastLayer";$n(uS);class rd extends Qi{_validateAdd(e){var n=e.getType();n!=="Group"&&n!=="Shape"&&ne.throw("You may only add groups and shapes to groups.")}}rd.prototype.nodeType="Group";$n(rd);var m1=function(){return zc.performance&&zc.performance.now?function(){return zc.performance.now()}:function(){return new Date().getTime()}}();class _s{constructor(e,n){this.id=_s.animIdCounter++,this.frame={time:0,timeDiff:0,lastTime:m1(),frameRate:0},this.func=e,this.setLayers(n)}setLayers(e){var n=[];return e?e.length>0?n=e:n=[e]:n=[],this.layers=n,this}getLayers(){return this.layers}addLayer(e){var n=this.layers,r=n.length,i;for(i=0;i<r;i++)if(n[i]._id===e._id)return!1;return this.layers.push(e),!0}isRunning(){var e=_s,n=e.animations,r=n.length,i;for(i=0;i<r;i++)if(n[i].id===this.id)return!0;return!1}start(){return this.stop(),this.frame.timeDiff=0,this.frame.lastTime=m1(),_s._addAnimation(this),this}stop(){return _s._removeAnimation(this),this}_updateFrameObject(e){this.frame.timeDiff=e-this.frame.lastTime,this.frame.lastTime=e,this.frame.time+=this.frame.timeDiff,this.frame.frameRate=1e3/this.frame.timeDiff}static _addAnimation(e){this.animations.push(e),this._handleAnimation()}static _removeAnimation(e){var n=e.id,r=this.animations,i=r.length,s;for(s=0;s<i;s++)if(r[s].id===n){this.animations.splice(s,1);break}}static _runFrames(){var e={},n=this.animations,r,i,s,o,a,l,c,h,f;for(o=0;o<n.length;o++)if(r=n[o],i=r.layers,s=r.func,r._updateFrameObject(m1()),l=i.length,s?f=s.call(r,r.frame)!==!1:f=!0,!!f)for(a=0;a<l;a++)c=i[a],c._id!==void 0&&(e[c._id]=c);for(h in e)e.hasOwnProperty(h)&&e[h].batchDraw()}static _animationLoop(){var e=_s;e.animations.length?(e._runFrames(),ne.requestAnimFrame(e._animationLoop)):e.animRunning=!1}static _handleAnimation(){this.animRunning||(this.animRunning=!0,ne.requestAnimFrame(this._animationLoop))}}_s.animations=[];_s.animIdCounter=0;_s.animRunning=!1;var OH={node:1,duration:1,easing:1,onFinish:1,yoyo:1},DH=1,GR=2,qR=3,FH=0,YR=["fill","stroke","shadowColor"];class BH{constructor(e,n,r,i,s,o,a){this.prop=e,this.propFunc=n,this.begin=i,this._pos=i,this.duration=o,this._change=0,this.prevPos=0,this.yoyo=a,this._time=0,this._position=0,this._startTime=0,this._finish=0,this.func=r,this._change=s-this.begin,this.pause()}fire(e){var n=this[e];n&&n()}setTime(e){e>this.duration?this.yoyo?(this._time=this.duration,this.reverse()):this.finish():e<0?this.yoyo?(this._time=0,this.play()):this.reset():(this._time=e,this.update())}getTime(){return this._time}setPosition(e){this.prevPos=this._pos,this.propFunc(e),this._pos=e}getPosition(e){return e===void 0&&(e=this._time),this.func(e,this.begin,this._change,this.duration)}play(){this.state=GR,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onPlay")}reverse(){this.state=qR,this._time=this.duration-this._time,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onReverse")}seek(e){this.pause(),this._time=e,this.update(),this.fire("onSeek")}reset(){this.pause(),this._time=0,this.update(),this.fire("onReset")}finish(){this.pause(),this._time=this.duration,this.update(),this.fire("onFinish")}update(){this.setPosition(this.getPosition(this._time)),this.fire("onUpdate")}onEnterFrame(){var e=this.getTimer()-this._startTime;this.state===GR?this.setTime(e):this.state===qR&&this.setTime(this.duration-e)}pause(){this.state=DH,this.fire("onPause")}getTimer(){return new Date().getTime()}}class nr{constructor(e){var n=this,r=e.node,i=r._id,s,o=e.easing||Jh.Linear,a=!!e.yoyo,l;typeof e.duration>"u"?s=.3:e.duration===0?s=.001:s=e.duration,this.node=r,this._id=FH++;var c=r.getLayer()||(r instanceof tt.Stage?r.getLayers():null);c||ne.error("Tween constructor have `node` that is not in a layer. Please add node into layer first."),this.anim=new _s(function(){n.tween.onEnterFrame()},c),this.tween=new BH(l,function(h){n._tweenFunc(h)},o,0,1,s*1e3,a),this._addListeners(),nr.attrs[i]||(nr.attrs[i]={}),nr.attrs[i][this._id]||(nr.attrs[i][this._id]={}),nr.tweens[i]||(nr.tweens[i]={});for(l in e)OH[l]===void 0&&this._addAttr(l,e[l]);this.reset(),this.onFinish=e.onFinish,this.onReset=e.onReset,this.onUpdate=e.onUpdate}_addAttr(e,n){var r=this.node,i=r._id,s,o,a,l,c,h,f,p;if(a=nr.tweens[i][e],a&&delete nr.attrs[i][a][e],s=r.getAttr(e),ne._isArray(n))if(o=[],c=Math.max(n.length,s.length),e==="points"&&n.length!==s.length&&(n.length>s.length?(f=s,s=ne._prepareArrayForTween(s,n,r.closed())):(h=n,n=ne._prepareArrayForTween(n,s,r.closed()))),e.indexOf("fill")===0)for(l=0;l<c;l++)if(l%2===0)o.push(n[l]-s[l]);else{var g=ne.colorToRGBA(s[l]);p=ne.colorToRGBA(n[l]),s[l]=g,o.push({r:p.r-g.r,g:p.g-g.g,b:p.b-g.b,a:p.a-g.a})}else for(l=0;l<c;l++)o.push(n[l]-s[l]);else YR.indexOf(e)!==-1?(s=ne.colorToRGBA(s),p=ne.colorToRGBA(n),o={r:p.r-s.r,g:p.g-s.g,b:p.b-s.b,a:p.a-s.a}):o=n-s;nr.attrs[i][this._id][e]={start:s,diff:o,end:n,trueEnd:h,trueStart:f},nr.tweens[i][e]=this._id}_tweenFunc(e){var n=this.node,r=nr.attrs[n._id][this._id],i,s,o,a,l,c,h,f;for(i in r){if(s=r[i],o=s.start,a=s.diff,f=s.end,ne._isArray(o))if(l=[],h=Math.max(o.length,f.length),i.indexOf("fill")===0)for(c=0;c<h;c++)c%2===0?l.push((o[c]||0)+a[c]*e):l.push("rgba("+Math.round(o[c].r+a[c].r*e)+","+Math.round(o[c].g+a[c].g*e)+","+Math.round(o[c].b+a[c].b*e)+","+(o[c].a+a[c].a*e)+")");else for(c=0;c<h;c++)l.push((o[c]||0)+a[c]*e);else YR.indexOf(i)!==-1?l="rgba("+Math.round(o.r+a.r*e)+","+Math.round(o.g+a.g*e)+","+Math.round(o.b+a.b*e)+","+(o.a+a.a*e)+")":l=o+a*e;n.setAttr(i,l)}}_addListeners(){this.tween.onPlay=()=>{this.anim.start()},this.tween.onReverse=()=>{this.anim.start()},this.tween.onPause=()=>{this.anim.stop()},this.tween.onFinish=()=>{var e=this.node,n=nr.attrs[e._id][this._id];n.points&&n.points.trueEnd&&e.setAttr("points",n.points.trueEnd),this.onFinish&&this.onFinish.call(this)},this.tween.onReset=()=>{var e=this.node,n=nr.attrs[e._id][this._id];n.points&&n.points.trueStart&&e.points(n.points.trueStart),this.onReset&&this.onReset()},this.tween.onUpdate=()=>{this.onUpdate&&this.onUpdate.call(this)}}play(){return this.tween.play(),this}reverse(){return this.tween.reverse(),this}reset(){return this.tween.reset(),this}seek(e){return this.tween.seek(e*1e3),this}pause(){return this.tween.pause(),this}finish(){return this.tween.finish(),this}destroy(){var e=this.node._id,n=this._id,r=nr.tweens[e],i;this.pause();for(i in r)delete nr.tweens[e][i];delete nr.attrs[e][n]}}nr.attrs={};nr.tweens={};je.prototype.to=function(t){var e=t.onFinish;t.node=this,t.onFinish=function(){this.destroy(),e&&e()};var n=new nr(t);n.play()};const Jh={BackEaseIn(t,e,n,r){var i=1.70158;return n*(t/=r)*t*((i+1)*t-i)+e},BackEaseOut(t,e,n,r){var i=1.70158;return n*((t=t/r-1)*t*((i+1)*t+i)+1)+e},BackEaseInOut(t,e,n,r){var i=1.70158;return(t/=r/2)<1?n/2*(t*t*(((i*=1.525)+1)*t-i))+e:n/2*((t-=2)*t*(((i*=1.525)+1)*t+i)+2)+e},ElasticEaseIn(t,e,n,r,i,s){var o=0;return t===0?e:(t/=r)===1?e+n:(s||(s=r*.3),!i||i<Math.abs(n)?(i=n,o=s/4):o=s/(2*Math.PI)*Math.asin(n/i),-(i*Math.pow(2,10*(t-=1))*Math.sin((t*r-o)*(2*Math.PI)/s))+e)},ElasticEaseOut(t,e,n,r,i,s){var o=0;return t===0?e:(t/=r)===1?e+n:(s||(s=r*.3),!i||i<Math.abs(n)?(i=n,o=s/4):o=s/(2*Math.PI)*Math.asin(n/i),i*Math.pow(2,-10*t)*Math.sin((t*r-o)*(2*Math.PI)/s)+n+e)},ElasticEaseInOut(t,e,n,r,i,s){var o=0;return t===0?e:(t/=r/2)===2?e+n:(s||(s=r*(.3*1.5)),!i||i<Math.abs(n)?(i=n,o=s/4):o=s/(2*Math.PI)*Math.asin(n/i),t<1?-.5*(i*Math.pow(2,10*(t-=1))*Math.sin((t*r-o)*(2*Math.PI)/s))+e:i*Math.pow(2,-10*(t-=1))*Math.sin((t*r-o)*(2*Math.PI)/s)*.5+n+e)},BounceEaseOut(t,e,n,r){return(t/=r)<1/2.75?n*(7.5625*t*t)+e:t<2/2.75?n*(7.5625*(t-=1.5/2.75)*t+.75)+e:t<2.5/2.75?n*(7.5625*(t-=2.25/2.75)*t+.9375)+e:n*(7.5625*(t-=2.625/2.75)*t+.984375)+e},BounceEaseIn(t,e,n,r){return n-Jh.BounceEaseOut(r-t,0,n,r)+e},BounceEaseInOut(t,e,n,r){return t<r/2?Jh.BounceEaseIn(t*2,0,n,r)*.5+e:Jh.BounceEaseOut(t*2-r,0,n,r)*.5+n*.5+e},EaseIn(t,e,n,r){return n*(t/=r)*t+e},EaseOut(t,e,n,r){return-n*(t/=r)*(t-2)+e},EaseInOut(t,e,n,r){return(t/=r/2)<1?n/2*t*t+e:-n/2*(--t*(t-2)-1)+e},StrongEaseIn(t,e,n,r){return n*(t/=r)*t*t*t*t+e},StrongEaseOut(t,e,n,r){return n*((t=t/r-1)*t*t*t*t+1)+e},StrongEaseInOut(t,e,n,r){return(t/=r/2)<1?n/2*t*t*t*t*t+e:n/2*((t-=2)*t*t*t*t+2)+e},Linear(t,e,n,r){return n*t/r+e}},ku=ne._assign(tt,{Util:ne,Transform:Yi,Node:je,Container:Qi,Stage:q0,stages:um,Layer:Lu,FastLayer:uS,Group:rd,DD:Jt,Shape:Se,shapes:Qh,Animation:_s,Tween:nr,Easings:Jh,Context:H0,Canvas:G0});class va extends Se{_sceneFunc(e){var n=tt.getAngle(this.angle()),r=this.clockwise();e.beginPath(),e.arc(0,0,this.outerRadius(),0,n,r),e.arc(0,0,this.innerRadius(),n,0,!r),e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(e){this.outerRadius(e/2)}setHeight(e){this.outerRadius(e/2)}}va.prototype._centroid=!0;va.prototype.className="Arc";va.prototype._attrsAffectingSize=["innerRadius","outerRadius"];$n(va);W.addGetterSetter(va,"innerRadius",0,Me());W.addGetterSetter(va,"outerRadius",0,Me());W.addGetterSetter(va,"angle",0,Me());W.addGetterSetter(va,"clockwise",!1,io());function Lx(t,e,n,r,i,s,o){var a=Math.sqrt(Math.pow(n-t,2)+Math.pow(r-e,2)),l=Math.sqrt(Math.pow(i-n,2)+Math.pow(s-r,2)),c=o*a/(a+l),h=o*l/(a+l),f=n-c*(i-t),p=r-c*(s-e),g=n+h*(i-t),v=r+h*(s-e);return[f,p,g,v]}function KR(t,e){var n=t.length,r=[],i,s;for(i=2;i<n-2;i+=2)s=Lx(t[i-2],t[i-1],t[i],t[i+1],t[i+2],t[i+3],e),!isNaN(s[0])&&(r.push(s[0]),r.push(s[1]),r.push(t[i]),r.push(t[i+1]),r.push(s[2]),r.push(s[3]));return r}let ya=class extends Se{constructor(e){super(e),this.on("pointsChange.konva tensionChange.konva closedChange.konva bezierChange.konva",function(){this._clearCache("tensionPoints")})}_sceneFunc(e){var n=this.points(),r=n.length,i=this.tension(),s=this.closed(),o=this.bezier(),a,l,c;if(r){if(e.beginPath(),e.moveTo(n[0],n[1]),i!==0&&r>4){for(a=this.getTensionPoints(),l=a.length,c=s?0:4,s||e.quadraticCurveTo(a[0],a[1],a[2],a[3]);c<l-2;)e.bezierCurveTo(a[c++],a[c++],a[c++],a[c++],a[c++],a[c++]);s||e.quadraticCurveTo(a[l-2],a[l-1],n[r-2],n[r-1])}else if(o)for(c=2;c<r;)e.bezierCurveTo(n[c++],n[c++],n[c++],n[c++],n[c++],n[c++]);else for(c=2;c<r;c+=2)e.lineTo(n[c],n[c+1]);s?(e.closePath(),e.fillStrokeShape(this)):e.strokeShape(this)}}getTensionPoints(){return this._getCache("tensionPoints",this._getTensionPoints)}_getTensionPoints(){return this.closed()?this._getTensionPointsClosed():KR(this.points(),this.tension())}_getTensionPointsClosed(){var e=this.points(),n=e.length,r=this.tension(),i=Lx(e[n-2],e[n-1],e[0],e[1],e[2],e[3],r),s=Lx(e[n-4],e[n-3],e[n-2],e[n-1],e[0],e[1],r),o=KR(e,r),a=[i[2],i[3]].concat(o).concat([s[0],s[1],e[n-2],e[n-1],s[2],s[3],i[0],i[1],e[0],e[1]]);return a}getWidth(){return this.getSelfRect().width}getHeight(){return this.getSelfRect().height}getSelfRect(){var e=this.points();if(e.length<4)return{x:e[0]||0,y:e[1]||0,width:0,height:0};this.tension()!==0?e=[e[0],e[1],...this._getTensionPoints(),e[e.length-2],e[e.length-1]]:e=this.points();for(var n=e[0],r=e[0],i=e[1],s=e[1],o,a,l=0;l<e.length/2;l++)o=e[l*2],a=e[l*2+1],n=Math.min(n,o),r=Math.max(r,o),i=Math.min(i,a),s=Math.max(s,a);return{x:n,y:i,width:r-n,height:s-i}}};ya.prototype.className="Line";ya.prototype._attrsAffectingSize=["points","bezier","tension"];$n(ya);W.addGetterSetter(ya,"closed",!1);W.addGetterSetter(ya,"bezier",!1);W.addGetterSetter(ya,"tension",0,Me());W.addGetterSetter(ya,"points",[],KW());class fn extends Se{constructor(e){super(e),this.dataArray=[],this.pathLength=0,this.dataArray=fn.parsePathData(this.data()),this.pathLength=0;for(var n=0;n<this.dataArray.length;++n)this.pathLength+=this.dataArray[n].pathLength;this.on("dataChange.konva",function(){this.dataArray=fn.parsePathData(this.data()),this.pathLength=0;for(var r=0;r<this.dataArray.length;++r)this.pathLength+=this.dataArray[r].pathLength})}_sceneFunc(e){var n=this.dataArray;e.beginPath();for(var r=!1,i=0;i<n.length;i++){var s=n[i].command,o=n[i].points;switch(s){case"L":e.lineTo(o[0],o[1]);break;case"M":e.moveTo(o[0],o[1]);break;case"C":e.bezierCurveTo(o[0],o[1],o[2],o[3],o[4],o[5]);break;case"Q":e.quadraticCurveTo(o[0],o[1],o[2],o[3]);break;case"A":var a=o[0],l=o[1],c=o[2],h=o[3],f=o[4],p=o[5],g=o[6],v=o[7],x=c>h?c:h,k=c>h?1:c/h,C=c>h?h/c:1;e.translate(a,l),e.rotate(g),e.scale(k,C),e.arc(0,0,x,f,f+p,1-v),e.scale(1/k,1/C),e.rotate(-g),e.translate(-a,-l);break;case"z":r=!0,e.closePath();break}}!r&&!this.hasFill()?e.strokeShape(this):e.fillStrokeShape(this)}getSelfRect(){var e=[];this.dataArray.forEach(function(c){if(c.command==="A"){var h=c.points[4],f=c.points[5],p=c.points[4]+f,g=Math.PI/180;if(Math.abs(h-p)<g&&(g=Math.abs(h-p)),f<0)for(let v=h-g;v>p;v-=g){const x=fn.getPointOnEllipticalArc(c.points[0],c.points[1],c.points[2],c.points[3],v,0);e.push(x.x,x.y)}else for(let v=h+g;v<p;v+=g){const x=fn.getPointOnEllipticalArc(c.points[0],c.points[1],c.points[2],c.points[3],v,0);e.push(x.x,x.y)}}else if(c.command==="C")for(let v=0;v<=1;v+=.01){const x=fn.getPointOnCubicBezier(v,c.start.x,c.start.y,c.points[0],c.points[1],c.points[2],c.points[3],c.points[4],c.points[5]);e.push(x.x,x.y)}else e=e.concat(c.points)});for(var n=e[0],r=e[0],i=e[1],s=e[1],o,a,l=0;l<e.length/2;l++)o=e[l*2],a=e[l*2+1],isNaN(o)||(n=Math.min(n,o),r=Math.max(r,o)),isNaN(a)||(i=Math.min(i,a),s=Math.max(s,a));return{x:Math.round(n),y:Math.round(i),width:Math.round(r-n),height:Math.round(s-i)}}getLength(){return this.pathLength}getPointAtLength(e){var n,r=0,i=this.dataArray.length;if(!i)return null;for(;r<i&&e>this.dataArray[r].pathLength;)e-=this.dataArray[r].pathLength,++r;if(r===i)return n=this.dataArray[r-1].points.slice(-2),{x:n[0],y:n[1]};if(e<.01)return n=this.dataArray[r].points.slice(0,2),{x:n[0],y:n[1]};var s=this.dataArray[r],o=s.points;switch(s.command){case"L":return fn.getPointOnLine(e,s.start.x,s.start.y,o[0],o[1]);case"C":return fn.getPointOnCubicBezier(e/s.pathLength,s.start.x,s.start.y,o[0],o[1],o[2],o[3],o[4],o[5]);case"Q":return fn.getPointOnQuadraticBezier(e/s.pathLength,s.start.x,s.start.y,o[0],o[1],o[2],o[3]);case"A":var a=o[0],l=o[1],c=o[2],h=o[3],f=o[4],p=o[5],g=o[6];return f+=p*e/s.pathLength,fn.getPointOnEllipticalArc(a,l,c,h,f,g)}return null}static getLineLength(e,n,r,i){return Math.sqrt((r-e)*(r-e)+(i-n)*(i-n))}static getPointOnLine(e,n,r,i,s,o,a){o===void 0&&(o=n),a===void 0&&(a=r);var l=(s-r)/(i-n+1e-8),c=Math.sqrt(e*e/(1+l*l));i<n&&(c*=-1);var h=l*c,f;if(i===n)f={x:o,y:a+h};else if((a-r)/(o-n+1e-8)===l)f={x:o+c,y:a+h};else{var p,g,v=this.getLineLength(n,r,i,s),x=(o-n)*(i-n)+(a-r)*(s-r);x=x/(v*v),p=n+x*(i-n),g=r+x*(s-r);var k=this.getLineLength(o,a,p,g),C=Math.sqrt(e*e-k*k);c=Math.sqrt(C*C/(1+l*l)),i<n&&(c*=-1),h=l*c,f={x:p+c,y:g+h}}return f}static getPointOnCubicBezier(e,n,r,i,s,o,a,l,c){function h(k){return k*k*k}function f(k){return 3*k*k*(1-k)}function p(k){return 3*k*(1-k)*(1-k)}function g(k){return(1-k)*(1-k)*(1-k)}var v=l*h(e)+o*f(e)+i*p(e)+n*g(e),x=c*h(e)+a*f(e)+s*p(e)+r*g(e);return{x:v,y:x}}static getPointOnQuadraticBezier(e,n,r,i,s,o,a){function l(g){return g*g}function c(g){return 2*g*(1-g)}function h(g){return(1-g)*(1-g)}var f=o*l(e)+i*c(e)+n*h(e),p=a*l(e)+s*c(e)+r*h(e);return{x:f,y:p}}static getPointOnEllipticalArc(e,n,r,i,s,o){var a=Math.cos(o),l=Math.sin(o),c={x:r*Math.cos(s),y:i*Math.sin(s)};return{x:e+(c.x*a-c.y*l),y:n+(c.x*l+c.y*a)}}static parsePathData(e){if(!e)return[];var n=e,r=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"];n=n.replace(new RegExp(" ","g"),",");for(var i=0;i<r.length;i++)n=n.replace(new RegExp(r[i],"g"),"|"+r[i]);var s=n.split("|"),o=[],a=[],l=0,c=0,h=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:e[-+]?\d+)?)/gi,f;for(i=1;i<s.length;i++){var p=s[i],g=p.charAt(0);for(p=p.slice(1),a.length=0;f=h.exec(p);)a.push(f[0]);for(var v=[],x=0,k=a.length;x<k;x++){if(a[x]==="00"){v.push(0,0);continue}var C=parseFloat(a[x]);isNaN(C)?v.push(0):v.push(C)}for(;v.length>0&&!isNaN(v[0]);){var b=null,_=[],T=l,R=c,L,M,A,$,j,V,U,B,Z,q;switch(g){case"l":l+=v.shift(),c+=v.shift(),b="L",_.push(l,c);break;case"L":l=v.shift(),c=v.shift(),_.push(l,c);break;case"m":var G=v.shift(),te=v.shift();if(l+=G,c+=te,b="M",o.length>2&&o[o.length-1].command==="z"){for(var O=o.length-2;O>=0;O--)if(o[O].command==="M"){l=o[O].points[0]+G,c=o[O].points[1]+te;break}}_.push(l,c),g="l";break;case"M":l=v.shift(),c=v.shift(),b="M",_.push(l,c),g="L";break;case"h":l+=v.shift(),b="L",_.push(l,c);break;case"H":l=v.shift(),b="L",_.push(l,c);break;case"v":c+=v.shift(),b="L",_.push(l,c);break;case"V":c=v.shift(),b="L",_.push(l,c);break;case"C":_.push(v.shift(),v.shift(),v.shift(),v.shift()),l=v.shift(),c=v.shift(),_.push(l,c);break;case"c":_.push(l+v.shift(),c+v.shift(),l+v.shift(),c+v.shift()),l+=v.shift(),c+=v.shift(),b="C",_.push(l,c);break;case"S":M=l,A=c,L=o[o.length-1],L.command==="C"&&(M=l+(l-L.points[2]),A=c+(c-L.points[3])),_.push(M,A,v.shift(),v.shift()),l=v.shift(),c=v.shift(),b="C",_.push(l,c);break;case"s":M=l,A=c,L=o[o.length-1],L.command==="C"&&(M=l+(l-L.points[2]),A=c+(c-L.points[3])),_.push(M,A,l+v.shift(),c+v.shift()),l+=v.shift(),c+=v.shift(),b="C",_.push(l,c);break;case"Q":_.push(v.shift(),v.shift()),l=v.shift(),c=v.shift(),_.push(l,c);break;case"q":_.push(l+v.shift(),c+v.shift()),l+=v.shift(),c+=v.shift(),b="Q",_.push(l,c);break;case"T":M=l,A=c,L=o[o.length-1],L.command==="Q"&&(M=l+(l-L.points[0]),A=c+(c-L.points[1])),l=v.shift(),c=v.shift(),b="Q",_.push(M,A,l,c);break;case"t":M=l,A=c,L=o[o.length-1],L.command==="Q"&&(M=l+(l-L.points[0]),A=c+(c-L.points[1])),l+=v.shift(),c+=v.shift(),b="Q",_.push(M,A,l,c);break;case"A":$=v.shift(),j=v.shift(),V=v.shift(),U=v.shift(),B=v.shift(),Z=l,q=c,l=v.shift(),c=v.shift(),b="A",_=this.convertEndpointToCenterParameterization(Z,q,l,c,U,B,$,j,V);break;case"a":$=v.shift(),j=v.shift(),V=v.shift(),U=v.shift(),B=v.shift(),Z=l,q=c,l+=v.shift(),c+=v.shift(),b="A",_=this.convertEndpointToCenterParameterization(Z,q,l,c,U,B,$,j,V);break}o.push({command:b||g,points:_,start:{x:T,y:R},pathLength:this.calcLength(T,R,b||g,_)})}(g==="z"||g==="Z")&&o.push({command:"z",points:[],start:void 0,pathLength:0})}return o}static calcLength(e,n,r,i){var s,o,a,l,c=fn;switch(r){case"L":return c.getLineLength(e,n,i[0],i[1]);case"C":for(s=0,o=c.getPointOnCubicBezier(0,e,n,i[0],i[1],i[2],i[3],i[4],i[5]),l=.01;l<=1;l+=.01)a=c.getPointOnCubicBezier(l,e,n,i[0],i[1],i[2],i[3],i[4],i[5]),s+=c.getLineLength(o.x,o.y,a.x,a.y),o=a;return s;case"Q":for(s=0,o=c.getPointOnQuadraticBezier(0,e,n,i[0],i[1],i[2],i[3]),l=.01;l<=1;l+=.01)a=c.getPointOnQuadraticBezier(l,e,n,i[0],i[1],i[2],i[3]),s+=c.getLineLength(o.x,o.y,a.x,a.y),o=a;return s;case"A":s=0;var h=i[4],f=i[5],p=i[4]+f,g=Math.PI/180;if(Math.abs(h-p)<g&&(g=Math.abs(h-p)),o=c.getPointOnEllipticalArc(i[0],i[1],i[2],i[3],h,0),f<0)for(l=h-g;l>p;l-=g)a=c.getPointOnEllipticalArc(i[0],i[1],i[2],i[3],l,0),s+=c.getLineLength(o.x,o.y,a.x,a.y),o=a;else for(l=h+g;l<p;l+=g)a=c.getPointOnEllipticalArc(i[0],i[1],i[2],i[3],l,0),s+=c.getLineLength(o.x,o.y,a.x,a.y),o=a;return a=c.getPointOnEllipticalArc(i[0],i[1],i[2],i[3],p,0),s+=c.getLineLength(o.x,o.y,a.x,a.y),s}return 0}static convertEndpointToCenterParameterization(e,n,r,i,s,o,a,l,c){var h=c*(Math.PI/180),f=Math.cos(h)*(e-r)/2+Math.sin(h)*(n-i)/2,p=-1*Math.sin(h)*(e-r)/2+Math.cos(h)*(n-i)/2,g=f*f/(a*a)+p*p/(l*l);g>1&&(a*=Math.sqrt(g),l*=Math.sqrt(g));var v=Math.sqrt((a*a*(l*l)-a*a*(p*p)-l*l*(f*f))/(a*a*(p*p)+l*l*(f*f)));s===o&&(v*=-1),isNaN(v)&&(v=0);var x=v*a*p/l,k=v*-l*f/a,C=(e+r)/2+Math.cos(h)*x-Math.sin(h)*k,b=(n+i)/2+Math.sin(h)*x+Math.cos(h)*k,_=function(j){return Math.sqrt(j[0]*j[0]+j[1]*j[1])},T=function(j,V){return(j[0]*V[0]+j[1]*V[1])/(_(j)*_(V))},R=function(j,V){return(j[0]*V[1]<j[1]*V[0]?-1:1)*Math.acos(T(j,V))},L=R([1,0],[(f-x)/a,(p-k)/l]),M=[(f-x)/a,(p-k)/l],A=[(-1*f-x)/a,(-1*p-k)/l],$=R(M,A);return T(M,A)<=-1&&($=Math.PI),T(M,A)>=1&&($=0),o===0&&$>0&&($=$-2*Math.PI),o===1&&$<0&&($=$+2*Math.PI),[C,b,a,l,L,$,h,o]}}fn.prototype.className="Path";fn.prototype._attrsAffectingSize=["data"];$n(fn);W.addGetterSetter(fn,"data");class Mu extends ya{_sceneFunc(e){super._sceneFunc(e);var n=Math.PI*2,r=this.points(),i=r,s=this.tension()!==0&&r.length>4;s&&(i=this.getTensionPoints());var o=this.pointerLength(),a=r.length,l,c;if(s){const g=[i[i.length-4],i[i.length-3],i[i.length-2],i[i.length-1],r[a-2],r[a-1]],v=fn.calcLength(i[i.length-4],i[i.length-3],"C",g),x=fn.getPointOnQuadraticBezier(Math.min(1,1-o/v),g[0],g[1],g[2],g[3],g[4],g[5]);l=r[a-2]-x.x,c=r[a-1]-x.y}else l=r[a-2]-r[a-4],c=r[a-1]-r[a-3];var h=(Math.atan2(c,l)+n)%n,f=this.pointerWidth();this.pointerAtEnding()&&(e.save(),e.beginPath(),e.translate(r[a-2],r[a-1]),e.rotate(h),e.moveTo(0,0),e.lineTo(-o,f/2),e.lineTo(-o,-f/2),e.closePath(),e.restore()),this.pointerAtBeginning()&&(e.save(),e.translate(r[0],r[1]),s?(l=(i[0]+i[2])/2-r[0],c=(i[1]+i[3])/2-r[1]):(l=r[2]-r[0],c=r[3]-r[1]),e.rotate((Math.atan2(-c,-l)+n)%n),e.moveTo(0,0),e.lineTo(-o,f/2),e.lineTo(-o,-f/2),e.closePath(),e.restore());var p=this.dashEnabled();p&&(this.attrs.dashEnabled=!1,e.setLineDash([])),e.fillStrokeShape(this),p&&(this.attrs.dashEnabled=!0)}getSelfRect(){const e=super.getSelfRect(),n=this.pointerWidth()/2;return{x:e.x-n,y:e.y-n,width:e.width+n*2,height:e.height+n*2}}}Mu.prototype.className="Arrow";$n(Mu);W.addGetterSetter(Mu,"pointerLength",10,Me());W.addGetterSetter(Mu,"pointerWidth",10,Me());W.addGetterSetter(Mu,"pointerAtBeginning",!1);W.addGetterSetter(Mu,"pointerAtEnding",!0);class Td extends Se{_sceneFunc(e){e.beginPath(),e.arc(0,0,this.attrs.radius||0,0,Math.PI*2,!1),e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(e){this.radius()!==e/2&&this.radius(e/2)}setHeight(e){this.radius()!==e/2&&this.radius(e/2)}}Td.prototype._centroid=!0;Td.prototype.className="Circle";Td.prototype._attrsAffectingSize=["radius"];$n(Td);W.addGetterSetter(Td,"radius",0,Me());let Tl=class extends Se{_sceneFunc(e){var n=this.radiusX(),r=this.radiusY();e.beginPath(),e.save(),n!==r&&e.scale(1,r/n),e.arc(0,0,n,0,Math.PI*2,!1),e.restore(),e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.radiusX()*2}getHeight(){return this.radiusY()*2}setWidth(e){this.radiusX(e/2)}setHeight(e){this.radiusY(e/2)}};Tl.prototype.className="Ellipse";Tl.prototype._centroid=!0;Tl.prototype._attrsAffectingSize=["radiusX","radiusY"];$n(Tl);W.addComponentsGetterSetter(Tl,"radius",["x","y"]);W.addGetterSetter(Tl,"radiusX",0,Me());W.addGetterSetter(Tl,"radiusY",0,Me());let wa=class EA extends Se{constructor(e){super(e),this.on("imageChange.konva",()=>{this._setImageLoad()}),this._setImageLoad()}_setImageLoad(){const e=this.image();e&&e.complete||e&&e.readyState===4||e&&e.addEventListener&&e.addEventListener("load",()=>{this._requestDraw()})}_useBufferCanvas(){return super._useBufferCanvas(!0)}_sceneFunc(e){const n=this.getWidth(),r=this.getHeight(),i=this.attrs.image;let s;if(i){const o=this.attrs.cropWidth,a=this.attrs.cropHeight;o&&a?s=[i,this.cropX(),this.cropY(),o,a,0,0,n,r]:s=[i,0,0,n,r]}(this.hasFill()||this.hasStroke())&&(e.beginPath(),e.rect(0,0,n,r),e.closePath(),e.fillStrokeShape(this)),i&&e.drawImage.apply(e,s)}_hitFunc(e){var n=this.width(),r=this.height();e.beginPath(),e.rect(0,0,n,r),e.closePath(),e.fillStrokeShape(this)}getWidth(){var e,n;return(e=this.attrs.width)!==null&&e!==void 0?e:(n=this.image())===null||n===void 0?void 0:n.width}getHeight(){var e,n;return(e=this.attrs.height)!==null&&e!==void 0?e:(n=this.image())===null||n===void 0?void 0:n.height}static fromURL(e,n){var r=ne.createImageElement();r.onload=function(){var i=new EA({image:r});n(i)},r.crossOrigin="Anonymous",r.src=e}};wa.prototype.className="Image";$n(wa);W.addGetterSetter(wa,"image");W.addComponentsGetterSetter(wa,"crop",["x","y","width","height"]);W.addGetterSetter(wa,"cropX",0,Me());W.addGetterSetter(wa,"cropY",0,Me());W.addGetterSetter(wa,"cropWidth",0,Me());W.addGetterSetter(wa,"cropHeight",0,Me());var RA=["fontFamily","fontSize","fontStyle","padding","lineHeight","text","width","height"],$H="Change.konva",zH="none",Mx="up",Ax="right",Nx="down",jx="left",UH=RA.length;class cS extends rd{constructor(e){super(e),this.on("add.konva",function(n){this._addListeners(n.child),this._sync()})}getText(){return this.find("Text")[0]}getTag(){return this.find("Tag")[0]}_addListeners(e){var n=this,r,i=function(){n._sync()};for(r=0;r<UH;r++)e.on(RA[r]+$H,i)}getWidth(){return this.getText().width()}getHeight(){return this.getText().height()}_sync(){var e=this.getText(),n=this.getTag(),r,i,s,o,a,l,c;if(e&&n){switch(r=e.width(),i=e.height(),s=n.pointerDirection(),o=n.pointerWidth(),c=n.pointerHeight(),a=0,l=0,s){case Mx:a=r/2,l=-1*c;break;case Ax:a=r+o,l=i/2;break;case Nx:a=r/2,l=i+c;break;case jx:a=-1*o,l=i/2;break}n.setAttrs({x:-1*a,y:-1*l,width:r,height:i}),e.setAttrs({x:-1*a,y:-1*l})}}}cS.prototype.className="Label";$n(cS);class Au extends Se{_sceneFunc(e){var n=this.width(),r=this.height(),i=this.pointerDirection(),s=this.pointerWidth(),o=this.pointerHeight(),a=this.cornerRadius();let l=0,c=0,h=0,f=0;typeof a=="number"?l=c=h=f=Math.min(a,n/2,r/2):(l=Math.min(a[0]||0,n/2,r/2),c=Math.min(a[1]||0,n/2,r/2),f=Math.min(a[2]||0,n/2,r/2),h=Math.min(a[3]||0,n/2,r/2)),e.beginPath(),e.moveTo(l,0),i===Mx&&(e.lineTo((n-s)/2,0),e.lineTo(n/2,-1*o),e.lineTo((n+s)/2,0)),e.lineTo(n-c,0),e.arc(n-c,c,c,Math.PI*3/2,0,!1),i===Ax&&(e.lineTo(n,(r-o)/2),e.lineTo(n+s,r/2),e.lineTo(n,(r+o)/2)),e.lineTo(n,r-f),e.arc(n-f,r-f,f,0,Math.PI/2,!1),i===Nx&&(e.lineTo((n+s)/2,r),e.lineTo(n/2,r+o),e.lineTo((n-s)/2,r)),e.lineTo(h,r),e.arc(h,r-h,h,Math.PI/2,Math.PI,!1),i===jx&&(e.lineTo(0,(r+o)/2),e.lineTo(-1*s,r/2),e.lineTo(0,(r-o)/2)),e.lineTo(0,l),e.arc(l,l,l,Math.PI,Math.PI*3/2,!1),e.closePath(),e.fillStrokeShape(this)}getSelfRect(){var e=0,n=0,r=this.pointerWidth(),i=this.pointerHeight(),s=this.pointerDirection(),o=this.width(),a=this.height();return s===Mx?(n-=i,a+=i):s===Nx?a+=i:s===jx?(e-=r*1.5,o+=r):s===Ax&&(o+=r*1.5),{x:e,y:n,width:o,height:a}}}Au.prototype.className="Tag";$n(Au);W.addGetterSetter(Au,"pointerDirection",zH);W.addGetterSetter(Au,"pointerWidth",0,Me());W.addGetterSetter(Au,"pointerHeight",0,Me());W.addGetterSetter(Au,"cornerRadius",0,sA(4));let np=class extends Se{_sceneFunc(e){var n=this.cornerRadius(),r=this.width(),i=this.height();if(e.beginPath(),!n)e.rect(0,0,r,i);else{let s=0,o=0,a=0,l=0;typeof n=="number"?s=o=a=l=Math.min(n,r/2,i/2):(s=Math.min(n[0]||0,r/2,i/2),o=Math.min(n[1]||0,r/2,i/2),l=Math.min(n[2]||0,r/2,i/2),a=Math.min(n[3]||0,r/2,i/2)),e.moveTo(s,0),e.lineTo(r-o,0),e.arc(r-o,o,o,Math.PI*3/2,0,!1),e.lineTo(r,i-l),e.arc(r-l,i-l,l,0,Math.PI/2,!1),e.lineTo(a,i),e.arc(a,i-a,a,Math.PI/2,Math.PI,!1),e.lineTo(0,s),e.arc(s,s,s,Math.PI,Math.PI*3/2,!1)}e.closePath(),e.fillStrokeShape(this)}};np.prototype.className="Rect";$n(np);W.addGetterSetter(np,"cornerRadius",0,sA(4));class Nu extends Se{_sceneFunc(e){const n=this._getPoints();e.beginPath(),e.moveTo(n[0].x,n[0].y);for(var r=1;r<n.length;r++)e.lineTo(n[r].x,n[r].y);e.closePath(),e.fillStrokeShape(this)}_getPoints(){const e=this.attrs.sides,n=this.attrs.radius||0,r=[];for(var i=0;i<e;i++)r.push({x:n*Math.sin(i*2*Math.PI/e),y:-1*n*Math.cos(i*2*Math.PI/e)});return r}getSelfRect(){const e=this._getPoints();var n=e[0].x,r=e[0].y,i=e[0].x,s=e[0].y;return e.forEach(o=>{n=Math.min(n,o.x),r=Math.max(r,o.x),i=Math.min(i,o.y),s=Math.max(s,o.y)}),{x:n,y:i,width:r-n,height:s-i}}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(e){this.radius(e/2)}setHeight(e){this.radius(e/2)}}Nu.prototype.className="RegularPolygon";Nu.prototype._centroid=!0;Nu.prototype._attrsAffectingSize=["radius"];$n(Nu);W.addGetterSetter(Nu,"radius",0,Me());W.addGetterSetter(Nu,"sides",0,Me());var XR=Math.PI*2;class ju extends Se{_sceneFunc(e){e.beginPath(),e.arc(0,0,this.innerRadius(),0,XR,!1),e.moveTo(this.outerRadius(),0),e.arc(0,0,this.outerRadius(),XR,0,!0),e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(e){this.outerRadius(e/2)}setHeight(e){this.outerRadius(e/2)}}ju.prototype.className="Ring";ju.prototype._centroid=!0;ju.prototype._attrsAffectingSize=["innerRadius","outerRadius"];$n(ju);W.addGetterSetter(ju,"innerRadius",0,Me());W.addGetterSetter(ju,"outerRadius",0,Me());class Ao extends Se{constructor(e){super(e),this._updated=!0,this.anim=new _s(()=>{var n=this._updated;return this._updated=!1,n}),this.on("animationChange.konva",function(){this.frameIndex(0)}),this.on("frameIndexChange.konva",function(){this._updated=!0}),this.on("frameRateChange.konva",function(){this.anim.isRunning()&&(clearInterval(this.interval),this._setInterval())})}_sceneFunc(e){var n=this.animation(),r=this.frameIndex(),i=r*4,s=this.animations()[n],o=this.frameOffsets(),a=s[i+0],l=s[i+1],c=s[i+2],h=s[i+3],f=this.image();if((this.hasFill()||this.hasStroke())&&(e.beginPath(),e.rect(0,0,c,h),e.closePath(),e.fillStrokeShape(this)),f)if(o){var p=o[n],g=r*2;e.drawImage(f,a,l,c,h,p[g+0],p[g+1],c,h)}else e.drawImage(f,a,l,c,h,0,0,c,h)}_hitFunc(e){var n=this.animation(),r=this.frameIndex(),i=r*4,s=this.animations()[n],o=this.frameOffsets(),a=s[i+2],l=s[i+3];if(e.beginPath(),o){var c=o[n],h=r*2;e.rect(c[h+0],c[h+1],a,l)}else e.rect(0,0,a,l);e.closePath(),e.fillShape(this)}_useBufferCanvas(){return super._useBufferCanvas(!0)}_setInterval(){var e=this;this.interval=setInterval(function(){e._updateIndex()},1e3/this.frameRate())}start(){if(!this.isRunning()){var e=this.getLayer();this.anim.setLayers(e),this._setInterval(),this.anim.start()}}stop(){this.anim.stop(),clearInterval(this.interval)}isRunning(){return this.anim.isRunning()}_updateIndex(){var e=this.frameIndex(),n=this.animation(),r=this.animations(),i=r[n],s=i.length/4;e<s-1?this.frameIndex(e+1):this.frameIndex(0)}}Ao.prototype.className="Sprite";$n(Ao);W.addGetterSetter(Ao,"animation");W.addGetterSetter(Ao,"animations");W.addGetterSetter(Ao,"frameOffsets");W.addGetterSetter(Ao,"image");W.addGetterSetter(Ao,"frameIndex",0,Me());W.addGetterSetter(Ao,"frameRate",17,Me());W.backCompat(Ao,{index:"frameIndex",getIndex:"getFrameIndex",setIndex:"setFrameIndex"});class Pl extends Se{_sceneFunc(e){var n=this.innerRadius(),r=this.outerRadius(),i=this.numPoints();e.beginPath(),e.moveTo(0,0-r);for(var s=1;s<i*2;s++){var o=s%2===0?r:n,a=o*Math.sin(s*Math.PI/i),l=-1*o*Math.cos(s*Math.PI/i);e.lineTo(a,l)}e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(e){this.outerRadius(e/2)}setHeight(e){this.outerRadius(e/2)}}Pl.prototype.className="Star";Pl.prototype._centroid=!0;Pl.prototype._attrsAffectingSize=["innerRadius","outerRadius"];$n(Pl);W.addGetterSetter(Pl,"numPoints",5,Me());W.addGetterSetter(Pl,"innerRadius",0,Me());W.addGetterSetter(Pl,"outerRadius",0,Me());function TA(t){return Array.from(t)}var Tg="auto",VH="center",ph="justify",WH="Change.konva",HH="2d",ZR="-",PA="left",GH="text",qH="Text",YH="top",KH="bottom",QR="middle",LA="normal",XH="px ",Pg=" ",ZH="right",QH="word",JH="char",eG="none",v1="",MA=["fontFamily","fontSize","fontStyle","fontVariant","padding","align","verticalAlign","lineHeight","text","width","height","wrap","ellipsis","letterSpacing"],tG=MA.length;function nG(t){return t.split(",").map(e=>{e=e.trim();const n=e.indexOf(" ")>=0,r=e.indexOf('"')>=0||e.indexOf("'")>=0;return n&&!r&&(e=`"${e}"`),e}).join(", ")}var Lg;function y1(){return Lg||(Lg=ne.createCanvasElement().getContext(HH),Lg)}function rG(t){t.fillText(this._partialText,this._partialTextX,this._partialTextY)}function iG(t){t.strokeText(this._partialText,this._partialTextX,this._partialTextY)}function sG(t){return t=t||{},!t.fillLinearGradientColorStops&&!t.fillRadialGradientColorStops&&!t.fillPatternImage&&(t.fill=t.fill||"black"),t}class Bn extends Se{constructor(e){super(sG(e)),this._partialTextX=0,this._partialTextY=0;for(var n=0;n<tG;n++)this.on(MA[n]+WH,this._setTextData);this._setTextData()}_sceneFunc(e){var n=this.textArr,r=n.length;if(this.text()){var i=this.padding(),s=this.fontSize(),o=this.lineHeight()*s,a=this.verticalAlign(),l=0,c=this.align(),h=this.getWidth(),f=this.letterSpacing(),p=this.fill(),g=this.textDecoration(),v=g.indexOf("underline")!==-1,x=g.indexOf("line-through")!==-1,k,C=0,C=o/2,b=0,_=0;for(e.setAttr("font",this._getContextFont()),e.setAttr("textBaseline",QR),e.setAttr("textAlign",PA),a===QR?l=(this.getHeight()-r*o-i*2)/2:a===KH&&(l=this.getHeight()-r*o-i*2),e.translate(i,l+i),k=0;k<r;k++){var b=0,_=0,T=n[k],R=T.text,L=T.width,M=k!==r-1,A,$,j;if(e.save(),c===ZH?b+=h-L-i*2:c===VH&&(b+=(h-L-i*2)/2),v&&(e.save(),e.beginPath(),e.moveTo(b,C+_+Math.round(s/2)),A=R.split(" ").length-1,$=A===0,j=c===ph&&M&&!$?h-i*2:L,e.lineTo(b+Math.round(j),C+_+Math.round(s/2)),e.lineWidth=s/15,e.strokeStyle=p,e.stroke(),e.restore()),x&&(e.save(),e.beginPath(),e.moveTo(b,C+_),A=R.split(" ").length-1,$=A===0,j=c===ph&&M&&!$?h-i*2:L,e.lineTo(b+Math.round(j),C+_),e.lineWidth=s/15,e.strokeStyle=p,e.stroke(),e.restore()),f!==0||c===ph){A=R.split(" ").length-1;for(var V=TA(R),U=0;U<V.length;U++){var B=V[U];B===" "&&k!==r-1&&c===ph&&(b+=(h-i*2-L)/A),this._partialTextX=b,this._partialTextY=C+_,this._partialText=B,e.fillStrokeShape(this),b+=this.measureSize(B).width+f}}else this._partialTextX=b,this._partialTextY=C+_,this._partialText=R,e.fillStrokeShape(this);e.restore(),r>1&&(C+=o)}}}_hitFunc(e){var n=this.getWidth(),r=this.getHeight();e.beginPath(),e.rect(0,0,n,r),e.closePath(),e.fillStrokeShape(this)}setText(e){var n=ne._isString(e)?e:e==null?"":e+"";return this._setAttr(GH,n),this}getWidth(){var e=this.attrs.width===Tg||this.attrs.width===void 0;return e?this.getTextWidth()+this.padding()*2:this.attrs.width}getHeight(){var e=this.attrs.height===Tg||this.attrs.height===void 0;return e?this.fontSize()*this.textArr.length*this.lineHeight()+this.padding()*2:this.attrs.height}getTextWidth(){return this.textWidth}getTextHeight(){return ne.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}measureSize(e){var n=y1(),r=this.fontSize(),i;return n.save(),n.font=this._getContextFont(),i=n.measureText(e),n.restore(),{width:i.width,height:r}}_getContextFont(){return this.fontStyle()+Pg+this.fontVariant()+Pg+(this.fontSize()+XH)+nG(this.fontFamily())}_addTextLine(e){this.align()===ph&&(e=e.trim());var n=this._getTextWidth(e);return this.textArr.push({text:e,width:n})}_getTextWidth(e){var n=this.letterSpacing(),r=e.length;return y1().measureText(e).width+(r?n*(r-1):0)}_setTextData(){var e=this.text().split(`
`),n=+this.fontSize(),r=0,i=this.lineHeight()*n,s=this.attrs.width,o=this.attrs.height,a=s!==Tg&&s!==void 0,l=o!==Tg&&o!==void 0,c=this.padding(),h=s-c*2,f=o-c*2,p=0,g=this.wrap(),v=g!==eG,x=g!==JH&&v,k=this.ellipsis();this.textArr=[],y1().font=this._getContextFont();for(var C=k?this._getTextWidth(v1):0,b=0,_=e.length;b<_;++b){var T=e[b],R=this._getTextWidth(T);if(a&&R>h)for(;T.length>0;){for(var L=0,M=T.length,A="",$=0;L<M;){var j=L+M>>>1,V=T.slice(0,j+1),U=this._getTextWidth(V)+C;U<=h?(L=j+1,A=V,$=U):M=j}if(A){if(x){var B,Z=T[A.length],q=Z===Pg||Z===ZR;q&&$<=h?B=A.length:B=Math.max(A.lastIndexOf(Pg),A.lastIndexOf(ZR))+1,B>0&&(L=B,A=A.slice(0,L),$=this._getTextWidth(A))}if(A=A.trimRight(),this._addTextLine(A),r=Math.max(r,$),p+=i,!v||l&&p+i>f){var G=this.textArr[this.textArr.length-1];if(G&&k){var te=this._getTextWidth(G.text+v1)<h;te||(G.text=G.text.slice(0,G.text.length-3)),this.textArr.splice(this.textArr.length-1,1),this._addTextLine(G.text+v1)}break}if(T=T.slice(L),T=T.trimLeft(),T.length>0&&(R=this._getTextWidth(T),R<=h)){this._addTextLine(T),p+=i,r=Math.max(r,R);break}}else break}else this._addTextLine(T),p+=i,r=Math.max(r,R);if(l&&p+i>f)break}this.textHeight=n,this.textWidth=r}getStrokeScaleEnabled(){return!0}}Bn.prototype._fillFunc=rG;Bn.prototype._strokeFunc=iG;Bn.prototype.className=qH;Bn.prototype._attrsAffectingSize=["text","fontSize","padding","wrap","lineHeight","letterSpacing"];$n(Bn);W.overWriteSetter(Bn,"width",oS());W.overWriteSetter(Bn,"height",oS());W.addGetterSetter(Bn,"fontFamily","Arial");W.addGetterSetter(Bn,"fontSize",12,Me());W.addGetterSetter(Bn,"fontStyle",LA);W.addGetterSetter(Bn,"fontVariant",LA);W.addGetterSetter(Bn,"padding",0,Me());W.addGetterSetter(Bn,"align",PA);W.addGetterSetter(Bn,"verticalAlign",YH);W.addGetterSetter(Bn,"lineHeight",1,Me());W.addGetterSetter(Bn,"wrap",QH);W.addGetterSetter(Bn,"ellipsis",!1,io());W.addGetterSetter(Bn,"letterSpacing",0,Me());W.addGetterSetter(Bn,"text","",Rd());W.addGetterSetter(Bn,"textDecoration","");var oG="",AA="normal";function NA(t){t.fillText(this.partialText,0,0)}function jA(t){t.strokeText(this.partialText,0,0)}class Cr extends Se{constructor(e){super(e),this.dummyCanvas=ne.createCanvasElement(),this.dataArray=[],this.dataArray=fn.parsePathData(this.attrs.data),this.on("dataChange.konva",function(){this.dataArray=fn.parsePathData(this.attrs.data),this._setTextData()}),this.on("textChange.konva alignChange.konva letterSpacingChange.konva kerningFuncChange.konva fontSizeChange.konva",this._setTextData),this._setTextData()}_sceneFunc(e){e.setAttr("font",this._getContextFont()),e.setAttr("textBaseline",this.textBaseline()),e.setAttr("textAlign","left"),e.save();var n=this.textDecoration(),r=this.fill(),i=this.fontSize(),s=this.glyphInfo;n==="underline"&&e.beginPath();for(var o=0;o<s.length;o++){e.save();var a=s[o].p0;e.translate(a.x,a.y),e.rotate(s[o].rotation),this.partialText=s[o].text,e.fillStrokeShape(this),n==="underline"&&(o===0&&e.moveTo(0,i/2+1),e.lineTo(i,i/2+1)),e.restore()}n==="underline"&&(e.strokeStyle=r,e.lineWidth=i/20,e.stroke()),e.restore()}_hitFunc(e){e.beginPath();var n=this.glyphInfo;if(n.length>=1){var r=n[0].p0;e.moveTo(r.x,r.y)}for(var i=0;i<n.length;i++){var s=n[i].p1;e.lineTo(s.x,s.y)}e.setAttr("lineWidth",this.fontSize()),e.setAttr("strokeStyle",this.colorKey),e.stroke()}getTextWidth(){return this.textWidth}getTextHeight(){return ne.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}setText(e){return Bn.prototype.setText.call(this,e)}_getContextFont(){return Bn.prototype._getContextFont.call(this)}_getTextSize(e){var n=this.dummyCanvas,r=n.getContext("2d");r.save(),r.font=this._getContextFont();var i=r.measureText(e);return r.restore(),{width:i.width,height:parseInt(this.attrs.fontSize,10)}}_setTextData(){var e=this,n=this._getTextSize(this.attrs.text),r=this.letterSpacing(),i=this.align(),s=this.kerningFunc();this.textWidth=n.width,this.textHeight=n.height;var o=Math.max(this.textWidth+((this.attrs.text||"").length-1)*r,0);this.glyphInfo=[];for(var a=0,l=0;l<e.dataArray.length;l++)e.dataArray[l].pathLength>0&&(a+=e.dataArray[l].pathLength);var c=0;i==="center"&&(c=Math.max(0,a/2-o/2)),i==="right"&&(c=Math.max(0,a-o));for(var h=TA(this.text()),f=this.text().split(" ").length-1,p,g,v,x=-1,k=0,C=function(){k=0;for(var U=e.dataArray,B=x+1;B<U.length;B++){if(U[B].pathLength>0)return x=B,U[B];U[B].command==="M"&&(p={x:U[B].points[0],y:U[B].points[1]})}return{}},b=function(U){var B=e._getTextSize(U).width+r;U===" "&&i==="justify"&&(B+=(a-o)/f);var Z=0,q=0;for(g=void 0;Math.abs(B-Z)/B>.01&&q<20;){q++;for(var G=Z;v===void 0;)v=C(),v&&G+v.pathLength<B&&(G+=v.pathLength,v=void 0);if(v==={}||p===void 0)return;var te=!1;switch(v.command){case"L":fn.getLineLength(p.x,p.y,v.points[0],v.points[1])>B?g=fn.getPointOnLine(B,p.x,p.y,v.points[0],v.points[1],p.x,p.y):v=void 0;break;case"A":var O=v.points[4],K=v.points[5],Y=v.points[4]+K;k===0?k=O+1e-8:B>Z?k+=Math.PI/180*K/Math.abs(K):k-=Math.PI/360*K/Math.abs(K),(K<0&&k<Y||K>=0&&k>Y)&&(k=Y,te=!0),g=fn.getPointOnEllipticalArc(v.points[0],v.points[1],v.points[2],v.points[3],k,v.points[6]);break;case"C":k===0?B>v.pathLength?k=1e-8:k=B/v.pathLength:B>Z?k+=(B-Z)/v.pathLength/2:k=Math.max(k-(Z-B)/v.pathLength/2,0),k>1&&(k=1,te=!0),g=fn.getPointOnCubicBezier(k,v.start.x,v.start.y,v.points[0],v.points[1],v.points[2],v.points[3],v.points[4],v.points[5]);break;case"Q":k===0?k=B/v.pathLength:B>Z?k+=(B-Z)/v.pathLength:k-=(Z-B)/v.pathLength,k>1&&(k=1,te=!0),g=fn.getPointOnQuadraticBezier(k,v.start.x,v.start.y,v.points[0],v.points[1],v.points[2],v.points[3]);break}g!==void 0&&(Z=fn.getLineLength(p.x,p.y,g.x,g.y)),te&&(te=!1,v=void 0)}},_="C",T=e._getTextSize(_).width+r,R=c/T-1,L=0;L<R&&(b(_),!(p===void 0||g===void 0));L++)p=g;for(var M=0;M<h.length&&(b(h[M]),!(p===void 0||g===void 0));M++){var A=fn.getLineLength(p.x,p.y,g.x,g.y),$=0;if(s)try{$=s(h[M-1],h[M])*this.fontSize()}catch{$=0}p.x+=$,g.x+=$,this.textWidth+=$;var j=fn.getPointOnLine($+A/2,p.x,p.y,g.x,g.y),V=Math.atan2(g.y-p.y,g.x-p.x);this.glyphInfo.push({transposeX:j.x,transposeY:j.y,text:h[M],rotation:V,p0:p,p1:g}),p=g}}getSelfRect(){if(!this.glyphInfo.length)return{x:0,y:0,width:0,height:0};var e=[];this.glyphInfo.forEach(function(h){e.push(h.p0.x),e.push(h.p0.y),e.push(h.p1.x),e.push(h.p1.y)});for(var n=e[0]||0,r=e[0]||0,i=e[1]||0,s=e[1]||0,o,a,l=0;l<e.length/2;l++)o=e[l*2],a=e[l*2+1],n=Math.min(n,o),r=Math.max(r,o),i=Math.min(i,a),s=Math.max(s,a);var c=this.fontSize();return{x:n-c/2,y:i-c/2,width:r-n+c,height:s-i+c}}}Cr.prototype._fillFunc=NA;Cr.prototype._strokeFunc=jA;Cr.prototype._fillFuncHit=NA;Cr.prototype._strokeFuncHit=jA;Cr.prototype.className="TextPath";Cr.prototype._attrsAffectingSize=["text","fontSize","data"];$n(Cr);W.addGetterSetter(Cr,"data");W.addGetterSetter(Cr,"fontFamily","Arial");W.addGetterSetter(Cr,"fontSize",12,Me());W.addGetterSetter(Cr,"fontStyle",AA);W.addGetterSetter(Cr,"align","left");W.addGetterSetter(Cr,"letterSpacing",0,Me());W.addGetterSetter(Cr,"textBaseline","middle");W.addGetterSetter(Cr,"fontVariant",AA);W.addGetterSetter(Cr,"text",oG);W.addGetterSetter(Cr,"textDecoration",null);W.addGetterSetter(Cr,"kerningFunc",null);var Jo="tr-konva",aG=["resizeEnabledChange","rotateAnchorOffsetChange","rotateEnabledChange","enabledAnchorsChange","anchorSizeChange","borderEnabledChange","borderStrokeChange","borderStrokeWidthChange","borderDashChange","anchorStrokeChange","anchorStrokeWidthChange","anchorFillChange","anchorCornerRadiusChange","ignoreStrokeChange"].map(t=>t+`.${Jo}`).join(" "),JR="nodesRect",lG=["widthChange","heightChange","scaleXChange","scaleYChange","skewXChange","skewYChange","rotationChange","offsetXChange","offsetYChange","transformsEnabledChange","strokeWidthChange"].map(t=>t+`.${Jo}`).join(" "),uG={"top-left":-45,"top-center":0,"top-right":45,"middle-right":-90,"middle-left":90,"bottom-left":-135,"bottom-center":180,"bottom-right":135};const cG="ontouchstart"in tt._global;function dG(t,e){if(t==="rotater")return"crosshair";e+=ne.degToRad(uG[t]||0);var n=(ne.radToDeg(e)%360+360)%360;return ne._inRange(n,315+22.5,360)||ne._inRange(n,0,22.5)?"ns-resize":ne._inRange(n,45-22.5,45+22.5)?"nesw-resize":ne._inRange(n,90-22.5,90+22.5)?"ew-resize":ne._inRange(n,135-22.5,135+22.5)?"nwse-resize":ne._inRange(n,180-22.5,180+22.5)?"ns-resize":ne._inRange(n,225-22.5,225+22.5)?"nesw-resize":ne._inRange(n,270-22.5,270+22.5)?"ew-resize":ne._inRange(n,315-22.5,315+22.5)?"nwse-resize":(ne.error("Transformer has unknown angle for cursor detection: "+n),"pointer")}var e0=["top-left","top-center","top-right","middle-right","middle-left","bottom-left","bottom-center","bottom-right"],eT=1e8;function hG(t){return{x:t.x+t.width/2*Math.cos(t.rotation)+t.height/2*Math.sin(-t.rotation),y:t.y+t.height/2*Math.cos(t.rotation)+t.width/2*Math.sin(t.rotation)}}function IA(t,e,n){const r=n.x+(t.x-n.x)*Math.cos(e)-(t.y-n.y)*Math.sin(e),i=n.y+(t.x-n.x)*Math.sin(e)+(t.y-n.y)*Math.cos(e);return Object.assign(Object.assign({},t),{rotation:t.rotation+e,x:r,y:i})}function fG(t,e){const n=hG(t);return IA(t,e,n)}function pG(t,e,n){let r=e;for(let i=0;i<t.length;i++){const s=tt.getAngle(t[i]),o=Math.abs(s-e)%(Math.PI*2);Math.min(o,Math.PI*2-o)<n&&(r=s)}return r}class dn extends rd{constructor(e){super(e),this._transforming=!1,this._createElements(),this._handleMouseMove=this._handleMouseMove.bind(this),this._handleMouseUp=this._handleMouseUp.bind(this),this.update=this.update.bind(this),this.on(aG,this.update),this.getNode()&&this.update()}attachTo(e){return this.setNode(e),this}setNode(e){return ne.warn("tr.setNode(shape), tr.node(shape) and tr.attachTo(shape) methods are deprecated. Please use tr.nodes(nodesArray) instead."),this.setNodes([e])}getNode(){return this._nodes&&this._nodes[0]}setNodes(e=[]){this._nodes&&this._nodes.length&&this.detach(),this._nodes=e,e.length===1&&this.useSingleNodeRotation()?this.rotation(e[0].getAbsoluteRotation()):this.rotation(0),this._nodes.forEach(r=>{const i=r._attrsAffectingSize.map(o=>o+"Change."+Jo).join(" "),s=()=>{this.nodes().length===1&&this.useSingleNodeRotation()&&this.rotation(this.nodes()[0].getAbsoluteRotation()),this._resetTransformCache(),!this._transforming&&!this.isDragging()&&this.update()};r.on(i,s),r.on(lG,s),r.on(`absoluteTransformChange.${Jo}`,s),r.on(`xChange.${Jo} yChange.${Jo}`,s),this._proxyDrag(r)}),this._resetTransformCache();var n=!!this.findOne(".top-left");return n&&this.update(),this}_proxyDrag(e){let n;e.on(`dragstart.${Jo}`,r=>{n=e.getAbsolutePosition(),!this.isDragging()&&e!==this.findOne(".back")&&this.startDrag(r,!1)}),e.on(`dragmove.${Jo}`,r=>{if(!n)return;const i=e.getAbsolutePosition(),s=i.x-n.x,o=i.y-n.y;this.nodes().forEach(a=>{if(a===e||a.isDragging())return;const l=a.getAbsolutePosition();a.setAbsolutePosition({x:l.x+s,y:l.y+o}),a.startDrag(r)}),n=null})}getNodes(){return this._nodes||[]}getActiveAnchor(){return this._movingAnchorName}detach(){this._nodes&&this._nodes.forEach(e=>{e.off("."+Jo)}),this._nodes=[],this._resetTransformCache()}_resetTransformCache(){this._clearCache(JR),this._clearCache("transform"),this._clearSelfAndDescendantCache("absoluteTransform")}_getNodeRect(){return this._getCache(JR,this.__getNodeRect)}__getNodeShape(e,n=this.rotation(),r){var i=e.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),s=e.getAbsoluteScale(r),o=e.getAbsolutePosition(r),a=i.x*s.x-e.offsetX()*s.x,l=i.y*s.y-e.offsetY()*s.y;const c=(tt.getAngle(e.getAbsoluteRotation())+Math.PI*2)%(Math.PI*2),h={x:o.x+a*Math.cos(c)+l*Math.sin(-c),y:o.y+l*Math.cos(c)+a*Math.sin(c),width:i.width*s.x,height:i.height*s.y,rotation:c};return IA(h,-tt.getAngle(n),{x:0,y:0})}__getNodeRect(){var e=this.getNode();if(!e)return{x:-eT,y:-eT,width:0,height:0,rotation:0};const n=[];this.nodes().map(c=>{const h=c.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()});var f=[{x:h.x,y:h.y},{x:h.x+h.width,y:h.y},{x:h.x+h.width,y:h.y+h.height},{x:h.x,y:h.y+h.height}],p=c.getAbsoluteTransform();f.forEach(function(g){var v=p.point(g);n.push(v)})});const r=new Yi;r.rotate(-tt.getAngle(this.rotation()));var i,s,o,a;n.forEach(function(c){var h=r.point(c);i===void 0&&(i=o=h.x,s=a=h.y),i=Math.min(i,h.x),s=Math.min(s,h.y),o=Math.max(o,h.x),a=Math.max(a,h.y)}),r.invert();const l=r.point({x:i,y:s});return{x:l.x,y:l.y,width:o-i,height:a-s,rotation:tt.getAngle(this.rotation())}}getX(){return this._getNodeRect().x}getY(){return this._getNodeRect().y}getWidth(){return this._getNodeRect().width}getHeight(){return this._getNodeRect().height}_createElements(){this._createBack(),e0.forEach((function(e){this._createAnchor(e)}).bind(this)),this._createAnchor("rotater")}_createAnchor(e){var n=new np({stroke:"rgb(0, 161, 255)",fill:"white",strokeWidth:1,name:e+" _anchor",dragDistance:0,draggable:!0,hitStrokeWidth:cG?10:"auto"}),r=this;n.on("mousedown touchstart",function(i){r._handleMouseDown(i)}),n.on("dragstart",i=>{n.stopDrag(),i.cancelBubble=!0}),n.on("dragend",i=>{i.cancelBubble=!0}),n.on("mouseenter",()=>{var i=tt.getAngle(this.rotation()),s=dG(e,i);n.getStage().content&&(n.getStage().content.style.cursor=s),this._cursorChange=!0}),n.on("mouseout",()=>{n.getStage().content&&(n.getStage().content.style.cursor=""),this._cursorChange=!1}),this.add(n)}_createBack(){var e=new Se({name:"back",width:0,height:0,draggable:!0,sceneFunc(n){var r=this.getParent(),i=r.padding();n.beginPath(),n.rect(-i,-i,this.width()+i*2,this.height()+i*2),n.moveTo(this.width()/2,-i),r.rotateEnabled()&&n.lineTo(this.width()/2,-r.rotateAnchorOffset()*ne._sign(this.height())-i),n.fillStrokeShape(this)},hitFunc:(n,r)=>{if(this.shouldOverdrawWholeArea()){var i=this.padding();n.beginPath(),n.rect(-i,-i,r.width()+i*2,r.height()+i*2),n.fillStrokeShape(r)}}});this.add(e),this._proxyDrag(e),e.on("dragstart",n=>{n.cancelBubble=!0}),e.on("dragmove",n=>{n.cancelBubble=!0}),e.on("dragend",n=>{n.cancelBubble=!0}),this.on("dragmove",n=>{this.update()})}_handleMouseDown(e){this._movingAnchorName=e.target.name().split(" ")[0];var n=this._getNodeRect(),r=n.width,i=n.height,s=Math.sqrt(Math.pow(r,2)+Math.pow(i,2));this.sin=Math.abs(i/s),this.cos=Math.abs(r/s),typeof window<"u"&&(window.addEventListener("mousemove",this._handleMouseMove),window.addEventListener("touchmove",this._handleMouseMove),window.addEventListener("mouseup",this._handleMouseUp,!0),window.addEventListener("touchend",this._handleMouseUp,!0)),this._transforming=!0;var o=e.target.getAbsolutePosition(),a=e.target.getStage().getPointerPosition();this._anchorDragOffset={x:a.x-o.x,y:a.y-o.y},this._fire("transformstart",{evt:e,target:this.getNode()}),this._nodes.forEach(l=>{l._fire("transformstart",{evt:e,target:l})})}_handleMouseMove(e){var n,r,i,s=this.findOne("."+this._movingAnchorName),o=s.getStage();o.setPointersPositions(e);const a=o.getPointerPosition();var l={x:a.x-this._anchorDragOffset.x,y:a.y-this._anchorDragOffset.y};const c=s.getAbsolutePosition();s.setAbsolutePosition(l);const h=s.getAbsolutePosition();if(!(c.x===h.x&&c.y===h.y)){if(this._movingAnchorName==="rotater"){var f=this._getNodeRect();n=s.x()-f.width/2,r=-s.y()+f.height/2;let U=Math.atan2(-r,n)+Math.PI/2;f.height<0&&(U-=Math.PI);var p=tt.getAngle(this.rotation());const B=p+U,Z=tt.getAngle(this.rotationSnapTolerance()),G=pG(this.rotationSnaps(),B,Z)-f.rotation,te=fG(f,G);this._fitNodesInto(te,e);return}var g=this.keepRatio()||e.shiftKey,b=this.centeredScaling()||e.altKey;if(this._movingAnchorName==="top-left"){if(g){var v=b?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-right").x(),y:this.findOne(".bottom-right").y()};i=Math.sqrt(Math.pow(v.x-s.x(),2)+Math.pow(v.y-s.y(),2));var x=this.findOne(".top-left").x()>v.x?-1:1,k=this.findOne(".top-left").y()>v.y?-1:1;n=i*this.cos*x,r=i*this.sin*k,this.findOne(".top-left").x(v.x-n),this.findOne(".top-left").y(v.y-r)}}else if(this._movingAnchorName==="top-center")this.findOne(".top-left").y(s.y());else if(this._movingAnchorName==="top-right"){if(g){var v=b?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-left").x(),y:this.findOne(".bottom-left").y()};i=Math.sqrt(Math.pow(s.x()-v.x,2)+Math.pow(v.y-s.y(),2));var x=this.findOne(".top-right").x()<v.x?-1:1,k=this.findOne(".top-right").y()>v.y?-1:1;n=i*this.cos*x,r=i*this.sin*k,this.findOne(".top-right").x(v.x+n),this.findOne(".top-right").y(v.y-r)}var C=s.position();this.findOne(".top-left").y(C.y),this.findOne(".bottom-right").x(C.x)}else if(this._movingAnchorName==="middle-left")this.findOne(".top-left").x(s.x());else if(this._movingAnchorName==="middle-right")this.findOne(".bottom-right").x(s.x());else if(this._movingAnchorName==="bottom-left"){if(g){var v=b?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-right").x(),y:this.findOne(".top-right").y()};i=Math.sqrt(Math.pow(v.x-s.x(),2)+Math.pow(s.y()-v.y,2));var x=v.x<s.x()?-1:1,k=s.y()<v.y?-1:1;n=i*this.cos*x,r=i*this.sin*k,s.x(v.x-n),s.y(v.y+r)}C=s.position(),this.findOne(".top-left").x(C.x),this.findOne(".bottom-right").y(C.y)}else if(this._movingAnchorName==="bottom-center")this.findOne(".bottom-right").y(s.y());else if(this._movingAnchorName==="bottom-right"){if(g){var v=b?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-left").x(),y:this.findOne(".top-left").y()};i=Math.sqrt(Math.pow(s.x()-v.x,2)+Math.pow(s.y()-v.y,2));var x=this.findOne(".bottom-right").x()<v.x?-1:1,k=this.findOne(".bottom-right").y()<v.y?-1:1;n=i*this.cos*x,r=i*this.sin*k,this.findOne(".bottom-right").x(v.x+n),this.findOne(".bottom-right").y(v.y+r)}}else console.error(new Error("Wrong position argument of selection resizer: "+this._movingAnchorName));var b=this.centeredScaling()||e.altKey;if(b){var _=this.findOne(".top-left"),T=this.findOne(".bottom-right"),R=_.x(),L=_.y(),M=this.getWidth()-T.x(),A=this.getHeight()-T.y();T.move({x:-R,y:-L}),_.move({x:M,y:A})}var $=this.findOne(".top-left").getAbsolutePosition();n=$.x,r=$.y;var j=this.findOne(".bottom-right").x()-this.findOne(".top-left").x(),V=this.findOne(".bottom-right").y()-this.findOne(".top-left").y();this._fitNodesInto({x:n,y:r,width:j,height:V,rotation:tt.getAngle(this.rotation())},e)}}_handleMouseUp(e){this._removeEvents(e)}getAbsoluteTransform(){return this.getTransform()}_removeEvents(e){if(this._transforming){this._transforming=!1,typeof window<"u"&&(window.removeEventListener("mousemove",this._handleMouseMove),window.removeEventListener("touchmove",this._handleMouseMove),window.removeEventListener("mouseup",this._handleMouseUp,!0),window.removeEventListener("touchend",this._handleMouseUp,!0));var n=this.getNode();this._fire("transformend",{evt:e,target:n}),n&&this._nodes.forEach(r=>{r._fire("transformend",{evt:e,target:r})}),this._movingAnchorName=null}}_fitNodesInto(e,n){var r=this._getNodeRect();const i=1;if(ne._inRange(e.width,-this.padding()*2-i,i)){this.update();return}if(ne._inRange(e.height,-this.padding()*2-i,i)){this.update();return}const s=this.flipEnabled();var o=new Yi;if(o.rotate(tt.getAngle(this.rotation())),this._movingAnchorName&&e.width<0&&this._movingAnchorName.indexOf("left")>=0){const f=o.point({x:-this.padding()*2,y:0});if(e.x+=f.x,e.y+=f.y,e.width+=this.padding()*2,this._movingAnchorName=this._movingAnchorName.replace("left","right"),this._anchorDragOffset.x-=f.x,this._anchorDragOffset.y-=f.y,!s){this.update();return}}else if(this._movingAnchorName&&e.width<0&&this._movingAnchorName.indexOf("right")>=0){const f=o.point({x:this.padding()*2,y:0});if(this._movingAnchorName=this._movingAnchorName.replace("right","left"),this._anchorDragOffset.x-=f.x,this._anchorDragOffset.y-=f.y,e.width+=this.padding()*2,!s){this.update();return}}if(this._movingAnchorName&&e.height<0&&this._movingAnchorName.indexOf("top")>=0){const f=o.point({x:0,y:-this.padding()*2});if(e.x+=f.x,e.y+=f.y,this._movingAnchorName=this._movingAnchorName.replace("top","bottom"),this._anchorDragOffset.x-=f.x,this._anchorDragOffset.y-=f.y,e.height+=this.padding()*2,!s){this.update();return}}else if(this._movingAnchorName&&e.height<0&&this._movingAnchorName.indexOf("bottom")>=0){const f=o.point({x:0,y:this.padding()*2});if(this._movingAnchorName=this._movingAnchorName.replace("bottom","top"),this._anchorDragOffset.x-=f.x,this._anchorDragOffset.y-=f.y,e.height+=this.padding()*2,!s){this.update();return}}if(this.boundBoxFunc()){const f=this.boundBoxFunc()(r,e);f?e=f:ne.warn("boundBoxFunc returned falsy. You should return new bound rect from it!")}const a=1e7,l=new Yi;l.translate(r.x,r.y),l.rotate(r.rotation),l.scale(r.width/a,r.height/a);const c=new Yi;c.translate(e.x,e.y),c.rotate(e.rotation),c.scale(e.width/a,e.height/a);const h=c.multiply(l.invert());this._nodes.forEach(f=>{var p;const g=f.getParent().getAbsoluteTransform(),v=f.getTransform().copy();v.translate(f.offsetX(),f.offsetY());const x=new Yi;x.multiply(g.copy().invert()).multiply(h).multiply(g).multiply(v);const k=x.decompose();f.setAttrs(k),this._fire("transform",{evt:n,target:f}),f._fire("transform",{evt:n,target:f}),(p=f.getLayer())===null||p===void 0||p.batchDraw()}),this.rotation(ne._getRotation(e.rotation)),this._resetTransformCache(),this.update(),this.getLayer().batchDraw()}forceUpdate(){this._resetTransformCache(),this.update()}_batchChangeChild(e,n){this.findOne(e).setAttrs(n)}update(){var e,n=this._getNodeRect();this.rotation(ne._getRotation(n.rotation));var r=n.width,i=n.height,s=this.enabledAnchors(),o=this.resizeEnabled(),a=this.padding(),l=this.anchorSize();this.find("._anchor").forEach(c=>{c.setAttrs({width:l,height:l,offsetX:l/2,offsetY:l/2,stroke:this.anchorStroke(),strokeWidth:this.anchorStrokeWidth(),fill:this.anchorFill(),cornerRadius:this.anchorCornerRadius()})}),this._batchChangeChild(".top-left",{x:0,y:0,offsetX:l/2+a,offsetY:l/2+a,visible:o&&s.indexOf("top-left")>=0}),this._batchChangeChild(".top-center",{x:r/2,y:0,offsetY:l/2+a,visible:o&&s.indexOf("top-center")>=0}),this._batchChangeChild(".top-right",{x:r,y:0,offsetX:l/2-a,offsetY:l/2+a,visible:o&&s.indexOf("top-right")>=0}),this._batchChangeChild(".middle-left",{x:0,y:i/2,offsetX:l/2+a,visible:o&&s.indexOf("middle-left")>=0}),this._batchChangeChild(".middle-right",{x:r,y:i/2,offsetX:l/2-a,visible:o&&s.indexOf("middle-right")>=0}),this._batchChangeChild(".bottom-left",{x:0,y:i,offsetX:l/2+a,offsetY:l/2-a,visible:o&&s.indexOf("bottom-left")>=0}),this._batchChangeChild(".bottom-center",{x:r/2,y:i,offsetY:l/2-a,visible:o&&s.indexOf("bottom-center")>=0}),this._batchChangeChild(".bottom-right",{x:r,y:i,offsetX:l/2-a,offsetY:l/2-a,visible:o&&s.indexOf("bottom-right")>=0}),this._batchChangeChild(".rotater",{x:r/2,y:-this.rotateAnchorOffset()*ne._sign(i)-a,visible:this.rotateEnabled()}),this._batchChangeChild(".back",{width:r,height:i,visible:this.borderEnabled(),stroke:this.borderStroke(),strokeWidth:this.borderStrokeWidth(),dash:this.borderDash(),x:0,y:0}),(e=this.getLayer())===null||e===void 0||e.batchDraw()}isTransforming(){return this._transforming}stopTransform(){if(this._transforming){this._removeEvents();var e=this.findOne("."+this._movingAnchorName);e&&e.stopDrag()}}destroy(){return this.getStage()&&this._cursorChange&&this.getStage().content&&(this.getStage().content.style.cursor=""),rd.prototype.destroy.call(this),this.detach(),this._removeEvents(),this}toObject(){return je.prototype.toObject.call(this)}}function gG(t){return t instanceof Array||ne.warn("enabledAnchors value should be an array"),t instanceof Array&&t.forEach(function(e){e0.indexOf(e)===-1&&ne.warn("Unknown anchor name: "+e+". Available names are: "+e0.join(", "))}),t||[]}dn.prototype.className="Transformer";$n(dn);W.addGetterSetter(dn,"enabledAnchors",e0,gG);W.addGetterSetter(dn,"flipEnabled",!0,io());W.addGetterSetter(dn,"resizeEnabled",!0);W.addGetterSetter(dn,"anchorSize",10,Me());W.addGetterSetter(dn,"rotateEnabled",!0);W.addGetterSetter(dn,"rotationSnaps",[]);W.addGetterSetter(dn,"rotateAnchorOffset",50,Me());W.addGetterSetter(dn,"rotationSnapTolerance",5,Me());W.addGetterSetter(dn,"borderEnabled",!0);W.addGetterSetter(dn,"anchorStroke","rgb(0, 161, 255)");W.addGetterSetter(dn,"anchorStrokeWidth",1,Me());W.addGetterSetter(dn,"anchorFill","white");W.addGetterSetter(dn,"anchorCornerRadius",0,Me());W.addGetterSetter(dn,"borderStroke","rgb(0, 161, 255)");W.addGetterSetter(dn,"borderStrokeWidth",1,Me());W.addGetterSetter(dn,"borderDash");W.addGetterSetter(dn,"keepRatio",!0);W.addGetterSetter(dn,"centeredScaling",!1);W.addGetterSetter(dn,"ignoreStroke",!1);W.addGetterSetter(dn,"padding",0,Me());W.addGetterSetter(dn,"node");W.addGetterSetter(dn,"nodes");W.addGetterSetter(dn,"boundBoxFunc");W.addGetterSetter(dn,"shouldOverdrawWholeArea",!1);W.addGetterSetter(dn,"useSingleNodeRotation",!0);W.backCompat(dn,{lineEnabled:"borderEnabled",rotateHandlerOffset:"rotateAnchorOffset",enabledHandlers:"enabledAnchors"});class xa extends Se{_sceneFunc(e){e.beginPath(),e.arc(0,0,this.radius(),0,tt.getAngle(this.angle()),this.clockwise()),e.lineTo(0,0),e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(e){this.radius(e/2)}setHeight(e){this.radius(e/2)}}xa.prototype.className="Wedge";xa.prototype._centroid=!0;xa.prototype._attrsAffectingSize=["radius"];$n(xa);W.addGetterSetter(xa,"radius",0,Me());W.addGetterSetter(xa,"angle",0,Me());W.addGetterSetter(xa,"clockwise",!1);W.backCompat(xa,{angleDeg:"angle",getAngleDeg:"getAngle",setAngleDeg:"setAngle"});function tT(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}var mG=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],vG=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function yG(t,e){var n=t.data,r=t.width,i=t.height,s,o,a,l,c,h,f,p,g,v,x,k,C,b,_,T,R,L,M,A,$,j,V,U,B=e+e+1,Z=r-1,q=i-1,G=e+1,te=G*(G+1)/2,O=new tT,K=null,Y=O,xe=null,re=null,ue=mG[e],ke=vG[e];for(a=1;a<B;a++)Y=Y.next=new tT,a===G&&(K=Y);for(Y.next=O,f=h=0,o=0;o<i;o++){for(T=R=L=M=p=g=v=x=0,k=G*(A=n[h]),C=G*($=n[h+1]),b=G*(j=n[h+2]),_=G*(V=n[h+3]),p+=te*A,g+=te*$,v+=te*j,x+=te*V,Y=O,a=0;a<G;a++)Y.r=A,Y.g=$,Y.b=j,Y.a=V,Y=Y.next;for(a=1;a<G;a++)l=h+((Z<a?Z:a)<<2),p+=(Y.r=A=n[l])*(U=G-a),g+=(Y.g=$=n[l+1])*U,v+=(Y.b=j=n[l+2])*U,x+=(Y.a=V=n[l+3])*U,T+=A,R+=$,L+=j,M+=V,Y=Y.next;for(xe=O,re=K,s=0;s<r;s++)n[h+3]=V=x*ue>>ke,V!==0?(V=255/V,n[h]=(p*ue>>ke)*V,n[h+1]=(g*ue>>ke)*V,n[h+2]=(v*ue>>ke)*V):n[h]=n[h+1]=n[h+2]=0,p-=k,g-=C,v-=b,x-=_,k-=xe.r,C-=xe.g,b-=xe.b,_-=xe.a,l=f+((l=s+e+1)<Z?l:Z)<<2,T+=xe.r=n[l],R+=xe.g=n[l+1],L+=xe.b=n[l+2],M+=xe.a=n[l+3],p+=T,g+=R,v+=L,x+=M,xe=xe.next,k+=A=re.r,C+=$=re.g,b+=j=re.b,_+=V=re.a,T-=A,R-=$,L-=j,M-=V,re=re.next,h+=4;f+=r}for(s=0;s<r;s++){for(R=L=M=T=g=v=x=p=0,h=s<<2,k=G*(A=n[h]),C=G*($=n[h+1]),b=G*(j=n[h+2]),_=G*(V=n[h+3]),p+=te*A,g+=te*$,v+=te*j,x+=te*V,Y=O,a=0;a<G;a++)Y.r=A,Y.g=$,Y.b=j,Y.a=V,Y=Y.next;for(c=r,a=1;a<=e;a++)h=c+s<<2,p+=(Y.r=A=n[h])*(U=G-a),g+=(Y.g=$=n[h+1])*U,v+=(Y.b=j=n[h+2])*U,x+=(Y.a=V=n[h+3])*U,T+=A,R+=$,L+=j,M+=V,Y=Y.next,a<q&&(c+=r);for(h=s,xe=O,re=K,o=0;o<i;o++)l=h<<2,n[l+3]=V=x*ue>>ke,V>0?(V=255/V,n[l]=(p*ue>>ke)*V,n[l+1]=(g*ue>>ke)*V,n[l+2]=(v*ue>>ke)*V):n[l]=n[l+1]=n[l+2]=0,p-=k,g-=C,v-=b,x-=_,k-=xe.r,C-=xe.g,b-=xe.b,_-=xe.a,l=s+((l=o+G)<q?l:q)*r<<2,p+=T+=xe.r=n[l],g+=R+=xe.g=n[l+1],v+=L+=xe.b=n[l+2],x+=M+=xe.a=n[l+3],xe=xe.next,k+=A=re.r,C+=$=re.g,b+=j=re.b,_+=V=re.a,T-=A,R-=$,L-=j,M-=V,re=re.next,h+=r}}const wG=function(e){var n=Math.round(this.blurRadius());n>0&&yG(e,n)};W.addGetterSetter(je,"blurRadius",0,Me(),W.afterSetFilter);const xG=function(t){var e=this.brightness()*255,n=t.data,r=n.length,i;for(i=0;i<r;i+=4)n[i]+=e,n[i+1]+=e,n[i+2]+=e};W.addGetterSetter(je,"brightness",0,Me(),W.afterSetFilter);const _G=function(t){var e=Math.pow((this.contrast()+100)/100,2),n=t.data,r=n.length,i=150,s=150,o=150,a;for(a=0;a<r;a+=4)i=n[a],s=n[a+1],o=n[a+2],i/=255,i-=.5,i*=e,i+=.5,i*=255,s/=255,s-=.5,s*=e,s+=.5,s*=255,o/=255,o-=.5,o*=e,o+=.5,o*=255,i=i<0?0:i>255?255:i,s=s<0?0:s>255?255:s,o=o<0?0:o>255?255:o,n[a]=i,n[a+1]=s,n[a+2]=o};W.addGetterSetter(je,"contrast",0,Me(),W.afterSetFilter);const bG=function(t){var e=this.embossStrength()*10,n=this.embossWhiteLevel()*255,r=this.embossDirection(),i=this.embossBlend(),s=0,o=0,a=t.data,l=t.width,c=t.height,h=l*4,f=c;switch(r){case"top-left":s=-1,o=-1;break;case"top":s=-1,o=0;break;case"top-right":s=-1,o=1;break;case"right":s=0,o=1;break;case"bottom-right":s=1,o=1;break;case"bottom":s=1,o=0;break;case"bottom-left":s=1,o=-1;break;case"left":s=0,o=-1;break;default:ne.error("Unknown emboss direction: "+r)}do{var p=(f-1)*h,g=s;f+g<1&&(g=0),f+g>c&&(g=0);var v=(f-1+g)*l*4,x=l;do{var k=p+(x-1)*4,C=o;x+C<1&&(C=0),x+C>l&&(C=0);var b=v+(x-1+C)*4,_=a[k]-a[b],T=a[k+1]-a[b+1],R=a[k+2]-a[b+2],L=_,M=L>0?L:-L,A=T>0?T:-T,$=R>0?R:-R;if(A>M&&(L=T),$>M&&(L=R),L*=e,i){var j=a[k]+L,V=a[k+1]+L,U=a[k+2]+L;a[k]=j>255?255:j<0?0:j,a[k+1]=V>255?255:V<0?0:V,a[k+2]=U>255?255:U<0?0:U}else{var B=n-L;B<0?B=0:B>255&&(B=255),a[k]=a[k+1]=a[k+2]=B}}while(--x)}while(--f)};W.addGetterSetter(je,"embossStrength",.5,Me(),W.afterSetFilter);W.addGetterSetter(je,"embossWhiteLevel",.5,Me(),W.afterSetFilter);W.addGetterSetter(je,"embossDirection","top-left",null,W.afterSetFilter);W.addGetterSetter(je,"embossBlend",!1,null,W.afterSetFilter);function w1(t,e,n,r,i){var s=n-e,o=i-r,a;return s===0?r+o/2:o===0?r:(a=(t-e)/s,a=o*a+r,a)}const SG=function(t){var e=t.data,n=e.length,r=e[0],i=r,s,o=e[1],a=o,l,c=e[2],h=c,f,p,g=this.enhance();if(g!==0){for(p=0;p<n;p+=4)s=e[p+0],s<r?r=s:s>i&&(i=s),l=e[p+1],l<o?o=l:l>a&&(a=l),f=e[p+2],f<c?c=f:f>h&&(h=f);i===r&&(i=255,r=0),a===o&&(a=255,o=0),h===c&&(h=255,c=0);var v,x,k,C,b,_,T,R,L;for(g>0?(x=i+g*(255-i),k=r-g*(r-0),b=a+g*(255-a),_=o-g*(o-0),R=h+g*(255-h),L=c-g*(c-0)):(v=(i+r)*.5,x=i+g*(i-v),k=r+g*(r-v),C=(a+o)*.5,b=a+g*(a-C),_=o+g*(o-C),T=(h+c)*.5,R=h+g*(h-T),L=c+g*(c-T)),p=0;p<n;p+=4)e[p+0]=w1(e[p+0],r,i,k,x),e[p+1]=w1(e[p+1],o,a,_,b),e[p+2]=w1(e[p+2],c,h,L,R)}};W.addGetterSetter(je,"enhance",0,Me(),W.afterSetFilter);const CG=function(t){var e=t.data,n=e.length,r,i;for(r=0;r<n;r+=4)i=.34*e[r]+.5*e[r+1]+.16*e[r+2],e[r]=i,e[r+1]=i,e[r+2]=i};W.addGetterSetter(je,"hue",0,Me(),W.afterSetFilter);W.addGetterSetter(je,"saturation",0,Me(),W.afterSetFilter);W.addGetterSetter(je,"luminance",0,Me(),W.afterSetFilter);const kG=function(t){var e=t.data,n=e.length,r=1,i=Math.pow(2,this.saturation()),s=Math.abs(this.hue()+360)%360,o=this.luminance()*127,a,l=r*i*Math.cos(s*Math.PI/180),c=r*i*Math.sin(s*Math.PI/180),h=.299*r+.701*l+.167*c,f=.587*r-.587*l+.33*c,p=.114*r-.114*l-.497*c,g=.299*r-.299*l-.328*c,v=.587*r+.413*l+.035*c,x=.114*r-.114*l+.293*c,k=.299*r-.3*l+1.25*c,C=.587*r-.586*l-1.05*c,b=.114*r+.886*l-.2*c,_,T,R,L;for(a=0;a<n;a+=4)_=e[a+0],T=e[a+1],R=e[a+2],L=e[a+3],e[a+0]=h*_+f*T+p*R+o,e[a+1]=g*_+v*T+x*R+o,e[a+2]=k*_+C*T+b*R+o,e[a+3]=L},EG=function(t){var e=t.data,n=e.length,r=Math.pow(2,this.value()),i=Math.pow(2,this.saturation()),s=Math.abs(this.hue()+360)%360,o,a=r*i*Math.cos(s*Math.PI/180),l=r*i*Math.sin(s*Math.PI/180),c=.299*r+.701*a+.167*l,h=.587*r-.587*a+.33*l,f=.114*r-.114*a-.497*l,p=.299*r-.299*a-.328*l,g=.587*r+.413*a+.035*l,v=.114*r-.114*a+.293*l,x=.299*r-.3*a+1.25*l,k=.587*r-.586*a-1.05*l,C=.114*r+.886*a-.2*l,b,_,T,R;for(o=0;o<n;o+=4)b=e[o+0],_=e[o+1],T=e[o+2],R=e[o+3],e[o+0]=c*b+h*_+f*T,e[o+1]=p*b+g*_+v*T,e[o+2]=x*b+k*_+C*T,e[o+3]=R};W.addGetterSetter(je,"hue",0,Me(),W.afterSetFilter);W.addGetterSetter(je,"saturation",0,Me(),W.afterSetFilter);W.addGetterSetter(je,"value",0,Me(),W.afterSetFilter);const RG=function(t){var e=t.data,n=e.length,r;for(r=0;r<n;r+=4)e[r]=255-e[r],e[r+1]=255-e[r+1],e[r+2]=255-e[r+2]};var TG=function(t,e,n){var r=t.data,i=e.data,s=t.width,o=t.height,a=n.polarCenterX||s/2,l=n.polarCenterY||o/2,c,h,f,p=0,g=0,v=0,x=0,k,C=Math.sqrt(a*a+l*l);h=s-a,f=o-l,k=Math.sqrt(h*h+f*f),C=k>C?k:C;var b=o,_=s,T,R,L=360/_*Math.PI/180,M,A;for(R=0;R<_;R+=1)for(M=Math.sin(R*L),A=Math.cos(R*L),T=0;T<b;T+=1)h=Math.floor(a+C*T/b*A),f=Math.floor(l+C*T/b*M),c=(f*s+h)*4,p=r[c+0],g=r[c+1],v=r[c+2],x=r[c+3],c=(R+T*s)*4,i[c+0]=p,i[c+1]=g,i[c+2]=v,i[c+3]=x},PG=function(t,e,n){var r=t.data,i=e.data,s=t.width,o=t.height,a=n.polarCenterX||s/2,l=n.polarCenterY||o/2,c,h,f,p,g,v=0,x=0,k=0,C=0,b,_=Math.sqrt(a*a+l*l);h=s-a,f=o-l,b=Math.sqrt(h*h+f*f),_=b>_?b:_;var T=o,R=s,L,M,A=n.polarRotation||0,$,j;for(h=0;h<s;h+=1)for(f=0;f<o;f+=1)p=h-a,g=f-l,L=Math.sqrt(p*p+g*g)*T/_,M=(Math.atan2(g,p)*180/Math.PI+360+A)%360,M=M*R/360,$=Math.floor(M),j=Math.floor(L),c=(j*s+$)*4,v=r[c+0],x=r[c+1],k=r[c+2],C=r[c+3],c=(f*s+h)*4,i[c+0]=v,i[c+1]=x,i[c+2]=k,i[c+3]=C};const LG=function(t){var e=t.width,n=t.height,r,i,s,o,a,l,c,h,f,p,g=Math.round(this.kaleidoscopePower()),v=Math.round(this.kaleidoscopeAngle()),x=Math.floor(e*(v%360)/360);if(!(g<1)){var k=ne.createCanvasElement();k.width=e,k.height=n;var C=k.getContext("2d").getImageData(0,0,e,n);TG(t,C,{polarCenterX:e/2,polarCenterY:n/2});for(var b=e/Math.pow(2,g);b<=8;)b=b*2,g-=1;b=Math.ceil(b);var _=b,T=0,R=_,L=1;for(x+b>e&&(T=_,R=0,L=-1),i=0;i<n;i+=1)for(r=T;r!==R;r+=L)s=Math.round(r+x)%e,f=(e*i+s)*4,a=C.data[f+0],l=C.data[f+1],c=C.data[f+2],h=C.data[f+3],p=(e*i+r)*4,C.data[p+0]=a,C.data[p+1]=l,C.data[p+2]=c,C.data[p+3]=h;for(i=0;i<n;i+=1)for(_=Math.floor(b),o=0;o<g;o+=1){for(r=0;r<_+1;r+=1)f=(e*i+r)*4,a=C.data[f+0],l=C.data[f+1],c=C.data[f+2],h=C.data[f+3],p=(e*i+_*2-r-1)*4,C.data[p+0]=a,C.data[p+1]=l,C.data[p+2]=c,C.data[p+3]=h;_*=2}PG(C,t,{polarRotation:0})}};W.addGetterSetter(je,"kaleidoscopePower",2,Me(),W.afterSetFilter);W.addGetterSetter(je,"kaleidoscopeAngle",0,Me(),W.afterSetFilter);function Mg(t,e,n){var r=(n*t.width+e)*4,i=[];return i.push(t.data[r++],t.data[r++],t.data[r++],t.data[r++]),i}function gh(t,e){return Math.sqrt(Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2)+Math.pow(t[2]-e[2],2))}function MG(t){for(var e=[0,0,0],n=0;n<t.length;n++)e[0]+=t[n][0],e[1]+=t[n][1],e[2]+=t[n][2];return e[0]/=t.length,e[1]/=t.length,e[2]/=t.length,e}function AG(t,e){var n=Mg(t,0,0),r=Mg(t,t.width-1,0),i=Mg(t,0,t.height-1),s=Mg(t,t.width-1,t.height-1),o=e||10;if(gh(n,r)<o&&gh(r,s)<o&&gh(s,i)<o&&gh(i,n)<o){for(var a=MG([r,n,s,i]),l=[],c=0;c<t.width*t.height;c++){var h=gh(a,[t.data[c*4],t.data[c*4+1],t.data[c*4+2]]);l[c]=h<o?0:255}return l}}function NG(t,e){for(var n=0;n<t.width*t.height;n++)t.data[4*n+3]=e[n]}function jG(t,e,n){for(var r=[1,1,1,1,0,1,1,1,1],i=Math.round(Math.sqrt(r.length)),s=Math.floor(i/2),o=[],a=0;a<n;a++)for(var l=0;l<e;l++){for(var c=a*e+l,h=0,f=0;f<i;f++)for(var p=0;p<i;p++){var g=a+f-s,v=l+p-s;if(g>=0&&g<n&&v>=0&&v<e){var x=g*e+v,k=r[f*i+p];h+=t[x]*k}}o[c]=h===255*8?255:0}return o}function IG(t,e,n){for(var r=[1,1,1,1,1,1,1,1,1],i=Math.round(Math.sqrt(r.length)),s=Math.floor(i/2),o=[],a=0;a<n;a++)for(var l=0;l<e;l++){for(var c=a*e+l,h=0,f=0;f<i;f++)for(var p=0;p<i;p++){var g=a+f-s,v=l+p-s;if(g>=0&&g<n&&v>=0&&v<e){var x=g*e+v,k=r[f*i+p];h+=t[x]*k}}o[c]=h>=255*4?255:0}return o}function OG(t,e,n){for(var r=[.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111],i=Math.round(Math.sqrt(r.length)),s=Math.floor(i/2),o=[],a=0;a<n;a++)for(var l=0;l<e;l++){for(var c=a*e+l,h=0,f=0;f<i;f++)for(var p=0;p<i;p++){var g=a+f-s,v=l+p-s;if(g>=0&&g<n&&v>=0&&v<e){var x=g*e+v,k=r[f*i+p];h+=t[x]*k}}o[c]=h}return o}const DG=function(t){var e=this.threshold(),n=AG(t,e);return n&&(n=jG(n,t.width,t.height),n=IG(n,t.width,t.height),n=OG(n,t.width,t.height),NG(t,n)),t};W.addGetterSetter(je,"threshold",0,Me(),W.afterSetFilter);const FG=function(t){var e=this.noise()*255,n=t.data,r=n.length,i=e/2,s;for(s=0;s<r;s+=4)n[s+0]+=i-2*i*Math.random(),n[s+1]+=i-2*i*Math.random(),n[s+2]+=i-2*i*Math.random()};W.addGetterSetter(je,"noise",.2,Me(),W.afterSetFilter);const BG=function(t){var e=Math.ceil(this.pixelSize()),n=t.width,r=t.height,i,s,o,a,l,c,h,f=Math.ceil(n/e),p=Math.ceil(r/e),g,v,x,k,C,b,_,T=t.data;if(e<=0){ne.error("pixelSize value can not be <= 0");return}for(C=0;C<f;C+=1)for(b=0;b<p;b+=1){for(a=0,l=0,c=0,h=0,g=C*e,v=g+e,x=b*e,k=x+e,_=0,i=g;i<v;i+=1)if(!(i>=n))for(s=x;s<k;s+=1)s>=r||(o=(n*s+i)*4,a+=T[o+0],l+=T[o+1],c+=T[o+2],h+=T[o+3],_+=1);for(a=a/_,l=l/_,c=c/_,h=h/_,i=g;i<v;i+=1)if(!(i>=n))for(s=x;s<k;s+=1)s>=r||(o=(n*s+i)*4,T[o+0]=a,T[o+1]=l,T[o+2]=c,T[o+3]=h)}};W.addGetterSetter(je,"pixelSize",8,Me(),W.afterSetFilter);const $G=function(t){var e=Math.round(this.levels()*254)+1,n=t.data,r=n.length,i=255/e,s;for(s=0;s<r;s+=1)n[s]=Math.floor(n[s]/i)*i};W.addGetterSetter(je,"levels",.5,Me(),W.afterSetFilter);const zG=function(t){var e=t.data,n=e.length,r=this.red(),i=this.green(),s=this.blue(),o,a;for(o=0;o<n;o+=4)a=(.34*e[o]+.5*e[o+1]+.16*e[o+2])/255,e[o]=a*r,e[o+1]=a*i,e[o+2]=a*s,e[o+3]=e[o+3]};W.addGetterSetter(je,"red",0,function(t){return this._filterUpToDate=!1,t>255?255:t<0?0:Math.round(t)});W.addGetterSetter(je,"green",0,function(t){return this._filterUpToDate=!1,t>255?255:t<0?0:Math.round(t)});W.addGetterSetter(je,"blue",0,iA,W.afterSetFilter);const UG=function(t){var e=t.data,n=e.length,r=this.red(),i=this.green(),s=this.blue(),o=this.alpha(),a,l;for(a=0;a<n;a+=4)l=1-o,e[a]=r*o+e[a]*l,e[a+1]=i*o+e[a+1]*l,e[a+2]=s*o+e[a+2]*l};W.addGetterSetter(je,"red",0,function(t){return this._filterUpToDate=!1,t>255?255:t<0?0:Math.round(t)});W.addGetterSetter(je,"green",0,function(t){return this._filterUpToDate=!1,t>255?255:t<0?0:Math.round(t)});W.addGetterSetter(je,"blue",0,iA,W.afterSetFilter);W.addGetterSetter(je,"alpha",1,function(t){return this._filterUpToDate=!1,t>1?1:t<0?0:t});const VG=function(t){var e=t.data,n=e.length,r,i,s,o;for(r=0;r<n;r+=4)i=e[r+0],s=e[r+1],o=e[r+2],e[r+0]=Math.min(255,i*.393+s*.769+o*.189),e[r+1]=Math.min(255,i*.349+s*.686+o*.168),e[r+2]=Math.min(255,i*.272+s*.534+o*.131)},WG=function(t){var e=t.data,n=t.width,r=t.height,i=n*4,s=r;do{var o=(s-1)*i,a=n;do{var l=o+(a-1)*4,c=e[l],h=e[l+1],f=e[l+2];c>127&&(c=255-c),h>127&&(h=255-h),f>127&&(f=255-f),e[l]=c,e[l+1]=h,e[l+2]=f}while(--a)}while(--s)},HG=function(t){var e=this.threshold()*255,n=t.data,r=n.length,i;for(i=0;i<r;i+=1)n[i]=n[i]<e?0:255};W.addGetterSetter(je,"threshold",.5,Me(),W.afterSetFilter);ku.Util._assign(ku,{Arc:va,Arrow:Mu,Circle:Td,Ellipse:Tl,Image:wa,Label:cS,Tag:Au,Line:ya,Path:fn,Rect:np,RegularPolygon:Nu,Ring:ju,Sprite:Ao,Star:Pl,Text:Bn,TextPath:Cr,Transformer:dn,Wedge:xa,Filters:{Blur:wG,Brighten:xG,Contrast:_G,Emboss:bG,Enhance:SG,Grayscale:CG,HSL:kG,HSV:EG,Invert:RG,Kaleidoscope:LG,Mask:DG,Noise:FG,Pixelate:BG,Posterize:$G,RGB:zG,RGBA:UG,Sepia:VG,Solarize:WG,Threshold:HG}});var OA={exports:{}};/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var GG=function(e){var n={},r=y,i=jh,s=Object.assign;function o(u){for(var d="https://reactjs.org/docs/error-decoder.html?invariant="+u,m=1;m<arguments.length;m++)d+="&args[]="+encodeURIComponent(arguments[m]);return"Minified React error #"+u+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,l=Symbol.for("react.element"),c=Symbol.for("react.portal"),h=Symbol.for("react.fragment"),f=Symbol.for("react.strict_mode"),p=Symbol.for("react.profiler"),g=Symbol.for("react.provider"),v=Symbol.for("react.context"),x=Symbol.for("react.forward_ref"),k=Symbol.for("react.suspense"),C=Symbol.for("react.suspense_list"),b=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),T=Symbol.for("react.offscreen"),R=Symbol.iterator;function L(u){return u===null||typeof u!="object"?null:(u=R&&u[R]||u["@@iterator"],typeof u=="function"?u:null)}function M(u){if(u==null)return null;if(typeof u=="function")return u.displayName||u.name||null;if(typeof u=="string")return u;switch(u){case h:return"Fragment";case c:return"Portal";case p:return"Profiler";case f:return"StrictMode";case k:return"Suspense";case C:return"SuspenseList"}if(typeof u=="object")switch(u.$$typeof){case v:return(u.displayName||"Context")+".Consumer";case g:return(u._context.displayName||"Context")+".Provider";case x:var d=u.render;return u=u.displayName,u||(u=d.displayName||d.name||"",u=u!==""?"ForwardRef("+u+")":"ForwardRef"),u;case b:return d=u.displayName||null,d!==null?d:M(u.type)||"Memo";case _:d=u._payload,u=u._init;try{return M(u(d))}catch{}}return null}function A(u){var d=u.type;switch(u.tag){case 24:return"Cache";case 9:return(d.displayName||"Context")+".Consumer";case 10:return(d._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return u=d.render,u=u.displayName||u.name||"",d.displayName||(u!==""?"ForwardRef("+u+")":"ForwardRef");case 7:return"Fragment";case 5:return d;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return M(d);case 8:return d===f?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof d=="function")return d.displayName||d.name||null;if(typeof d=="string")return d}return null}function $(u){var d=u,m=u;if(u.alternate)for(;d.return;)d=d.return;else{u=d;do d=u,d.flags&4098&&(m=d.return),u=d.return;while(u)}return d.tag===3?m:null}function j(u){if($(u)!==u)throw Error(o(188))}function V(u){var d=u.alternate;if(!d){if(d=$(u),d===null)throw Error(o(188));return d!==u?null:u}for(var m=u,S=d;;){var E=m.return;if(E===null)break;var P=E.alternate;if(P===null){if(S=E.return,S!==null){m=S;continue}break}if(E.child===P.child){for(P=E.child;P;){if(P===m)return j(E),u;if(P===S)return j(E),d;P=P.sibling}throw Error(o(188))}if(m.return!==S.return)m=E,S=P;else{for(var I=!1,J=E.child;J;){if(J===m){I=!0,m=E,S=P;break}if(J===S){I=!0,S=E,m=P;break}J=J.sibling}if(!I){for(J=P.child;J;){if(J===m){I=!0,m=P,S=E;break}if(J===S){I=!0,S=P,m=E;break}J=J.sibling}if(!I)throw Error(o(189))}}if(m.alternate!==S)throw Error(o(190))}if(m.tag!==3)throw Error(o(188));return m.stateNode.current===m?u:d}function U(u){return u=V(u),u!==null?B(u):null}function B(u){if(u.tag===5||u.tag===6)return u;for(u=u.child;u!==null;){var d=B(u);if(d!==null)return d;u=u.sibling}return null}function Z(u){if(u.tag===5||u.tag===6)return u;for(u=u.child;u!==null;){if(u.tag!==4){var d=Z(u);if(d!==null)return d}u=u.sibling}return null}var q=Array.isArray,G=e.getPublicInstance,te=e.getRootHostContext,O=e.getChildHostContext,K=e.prepareForCommit,Y=e.resetAfterCommit,xe=e.createInstance,re=e.appendInitialChild,ue=e.finalizeInitialChildren,ke=e.prepareUpdate,qe=e.shouldSetTextContent,he=e.createTextInstance,ge=e.scheduleTimeout,we=e.cancelTimeout,ae=e.noTimeout,me=e.isPrimaryRenderer,X=e.supportsMutation,ye=e.supportsPersistence,_e=e.supportsHydration,at=e.getInstanceFromNode,Le=e.preparePortalMount,fe=e.getCurrentEventPriority,ve=e.detachDeletedInstance,Ae=e.supportsMicrotasks,De=e.scheduleMicrotask,Ue=e.supportsTestSelectors,Ie=e.findFiberRoot,ze=e.getBoundingRect,Ce=e.getTextContent,Oe=e.isHiddenSubtree,Ne=e.matchAccessibilityRole,yt=e.setFocusIfFocusable,Fe=e.setupIntersectionObserver,st=e.appendChild,wt=e.appendChildToContainer,At=e.commitTextUpdate,Ye=e.commitMount,Re=e.commitUpdate,Te=e.insertBefore,pe=e.insertInContainerBefore,be=e.removeChild,gt=e.removeChildFromContainer,nt=e.resetTextContent,lt=e.hideInstance,Ke=e.hideTextInstance,xt=e.unhideInstance,Lt=e.unhideTextInstance,rt=e.clearContainer,Nt=e.cloneInstance,ht=e.createContainerChildSet,zt=e.appendChildToContainerChildSet,Et=e.finalizeContainerChildren,ut=e.replaceContainerChildren,Xt=e.cloneHiddenInstance,ft=e.cloneHiddenTextInstance,Ft=e.canHydrateInstance,St=e.canHydrateTextInstance,ln=e.canHydrateSuspenseInstance,Gt=e.isSuspenseInstancePending,qt=e.isSuspenseInstanceFallback,mt=e.getSuspenseInstanceFallbackErrorDetails,vt=e.registerSuspenseInstanceRetry,Ut=e.getNextHydratableSibling,kr=e.getFirstHydratableChild,zn=e.getFirstHydratableChildWithinContainer,Un=e.getFirstHydratableChildWithinSuspenseInstance,Yr=e.hydrateInstance,Er=e.hydrateTextInstance,so=e.hydrateSuspenseInstance,Dl=e.getNextHydratableInstanceAfterSuspenseInstance,Or=e.commitHydratedContainer,pr=e.commitHydratedSuspenseInstance,ci=e.clearSuspenseBoundary,Xn=e.clearSuspenseBoundaryFromContainer,Rr=e.shouldDeleteUnhydratedTailInstances,oo=e.didNotMatchHydratedContainerTextInstance,Io=e.didNotMatchHydratedTextInstance,ba;function Fi(u){if(ba===void 0)try{throw Error()}catch(m){var d=m.stack.trim().match(/\n( *(at )?)/);ba=d&&d[1]||""}return`
`+ba+u}var Kr=!1;function Dr(u,d){if(!u||Kr)return"";Kr=!0;var m=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(d)if(d=function(){throw Error()},Object.defineProperty(d.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(d,[])}catch(Pe){var S=Pe}Reflect.construct(u,[],d)}else{try{d.call()}catch(Pe){S=Pe}u.call(d.prototype)}else{try{throw Error()}catch(Pe){S=Pe}u()}}catch(Pe){if(Pe&&S&&typeof Pe.stack=="string"){for(var E=Pe.stack.split(`
`),P=S.stack.split(`
`),I=E.length-1,J=P.length-1;1<=I&&0<=J&&E[I]!==P[J];)J--;for(;1<=I&&0<=J;I--,J--)if(E[I]!==P[J]){if(I!==1||J!==1)do if(I--,J--,0>J||E[I]!==P[J]){var oe=`
`+E[I].replace(" at new "," at ");return u.displayName&&oe.includes("<anonymous>")&&(oe=oe.replace("<anonymous>",u.displayName)),oe}while(1<=I&&0<=J);break}}}finally{Kr=!1,Error.prepareStackTrace=m}return(u=u?u.displayName||u.name:"")?Fi(u):""}var is=Object.prototype.hasOwnProperty,Ns=[],Si=-1;function di(u){return{current:u}}function tn(u){0>Si||(u.current=Ns[Si],Ns[Si]=null,Si--)}function Yt(u,d){Si++,Ns[Si]=u.current,u.current=d}var sn={},Rt=di(sn),on=di(!1),Fr=sn;function Vn(u,d){var m=u.type.contextTypes;if(!m)return sn;var S=u.stateNode;if(S&&S.__reactInternalMemoizedUnmaskedChildContext===d)return S.__reactInternalMemoizedMaskedChildContext;var E={},P;for(P in m)E[P]=d[P];return S&&(u=u.stateNode,u.__reactInternalMemoizedUnmaskedChildContext=d,u.__reactInternalMemoizedMaskedChildContext=E),E}function Cn(u){return u=u.childContextTypes,u!=null}function Ht(){tn(on),tn(Rt)}function Pn(u,d,m){if(Rt.current!==sn)throw Error(o(168));Yt(Rt,d),Yt(on,m)}function Ln(u,d,m){var S=u.stateNode;if(d=d.childContextTypes,typeof S.getChildContext!="function")return m;S=S.getChildContext();for(var E in S)if(!(E in d))throw Error(o(108,A(u)||"Unknown",E));return s({},m,S)}function Ci(u){return u=(u=u.stateNode)&&u.__reactInternalMemoizedMergedChildContext||sn,Fr=Rt.current,Yt(Rt,u),Yt(on,on.current),!0}function hi(u,d,m){var S=u.stateNode;if(!S)throw Error(o(169));m?(u=Ln(u,d,Fr),S.__reactInternalMemoizedMergedChildContext=u,tn(on),tn(Rt),Yt(Rt,u)):tn(on),Yt(on,m)}var gr=Math.clz32?Math.clz32:ao,Oo=Math.log,ss=Math.LN2;function ao(u){return u>>>=0,u===0?32:31-(Oo(u)/ss|0)|0}var Xr=64,ki=4194304;function Bi(u){switch(u&-u){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return u&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return u}}function os(u,d){var m=u.pendingLanes;if(m===0)return 0;var S=0,E=u.suspendedLanes,P=u.pingedLanes,I=m&268435455;if(I!==0){var J=I&~E;J!==0?S=Bi(J):(P&=I,P!==0&&(S=Bi(P)))}else I=m&~E,I!==0?S=Bi(I):P!==0&&(S=Bi(P));if(S===0)return 0;if(d!==0&&d!==S&&!(d&E)&&(E=S&-S,P=d&-d,E>=P||E===16&&(P&4194240)!==0))return d;if(S&4&&(S|=m&16),d=u.entangledLanes,d!==0)for(u=u.entanglements,d&=S;0<d;)m=31-gr(d),E=1<<m,S|=u[m],d&=~E;return S}function js(u,d){switch(u){case 1:case 2:case 4:return d+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return d+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Sa(u,d){for(var m=u.suspendedLanes,S=u.pingedLanes,E=u.expirationTimes,P=u.pendingLanes;0<P;){var I=31-gr(P),J=1<<I,oe=E[I];oe===-1?(!(J&m)||J&S)&&(E[I]=js(J,d)):oe<=d&&(u.expiredLanes|=J),P&=~J}}function Ca(u){return u=u.pendingLanes&-1073741825,u!==0?u:u&1073741824?1073741824:0}function ka(){var u=Xr;return Xr<<=1,!(Xr&4194240)&&(Xr=64),u}function as(u){for(var d=[],m=0;31>m;m++)d.push(u);return d}function Do(u,d,m){u.pendingLanes|=d,d!==536870912&&(u.suspendedLanes=0,u.pingedLanes=0),u=u.eventTimes,d=31-gr(d),u[d]=m}function jd(u,d){var m=u.pendingLanes&~d;u.pendingLanes=d,u.suspendedLanes=0,u.pingedLanes=0,u.expiredLanes&=d,u.mutableReadLanes&=d,u.entangledLanes&=d,d=u.entanglements;var S=u.eventTimes;for(u=u.expirationTimes;0<m;){var E=31-gr(m),P=1<<E;d[E]=0,S[E]=-1,u[E]=-1,m&=~P}}function Fo(u,d){var m=u.entangledLanes|=d;for(u=u.entanglements;m;){var S=31-gr(m),E=1<<S;E&d|u[S]&d&&(u[S]|=d),m&=~E}}var Vt=0;function Du(u){return u&=-u,1<u?4<u?u&268435455?16:536870912:4:1}var Ea=i.unstable_scheduleCallback,Ra=i.unstable_cancelCallback,Id=i.unstable_shouldYield,Od=i.unstable_requestPaint,Mn=i.unstable_now,Ta=i.unstable_ImmediatePriority,Fu=i.unstable_UserBlockingPriority,Pa=i.unstable_NormalPriority,ls=i.unstable_IdlePriority,La=null,or=null;function Bu(u){if(or&&typeof or.onCommitFiberRoot=="function")try{or.onCommitFiberRoot(La,u,void 0,(u.current.flags&128)===128)}catch{}}function Dd(u,d){return u===d&&(u!==0||1/u===1/d)||u!==u&&d!==d}var mr=typeof Object.is=="function"?Object.is:Dd,$i=null,Bo=!1,Ma=!1;function F(u){$i===null?$i=[u]:$i.push(u)}function H(u){Bo=!0,F(u)}function Q(){if(!Ma&&$i!==null){Ma=!0;var u=0,d=Vt;try{var m=$i;for(Vt=1;u<m.length;u++){var S=m[u];do S=S(!0);while(S!==null)}$i=null,Bo=!1}catch(E){throw $i!==null&&($i=$i.slice(u+1)),Ea(Ta,Q),E}finally{Vt=d,Ma=!1}}return null}var N=[],D=0,z=null,ie=0,le=[],de=0,Ge=null,$e=1,Ve="";function Bt(u,d){N[D++]=ie,N[D++]=z,z=u,ie=d}function Wt(u,d,m){le[de++]=$e,le[de++]=Ve,le[de++]=Ge,Ge=u;var S=$e;u=Ve;var E=32-gr(S)-1;S&=~(1<<E),m+=1;var P=32-gr(d)+E;if(30<P){var I=E-E%5;P=(S&(1<<I)-1).toString(32),S>>=I,E-=I,$e=1<<32-gr(d)+E|m<<E|S,Ve=P+u}else $e=1<<P|m<<E|S,Ve=u}function Wn(u){u.return!==null&&(Bt(u,1),Wt(u,1,0))}function Zn(u){for(;u===z;)z=N[--D],N[D]=null,ie=N[--D],N[D]=null;for(;u===Ge;)Ge=le[--de],le[de]=null,Ve=le[--de],le[de]=null,$e=le[--de],le[de]=null}var Qn=null,xn=null,an=!1,Is=!1,Hn=null;function Zr(u,d){var m=fs(5,null,null,0);m.elementType="DELETED",m.stateNode=d,m.return=u,d=u.deletions,d===null?(u.deletions=[m],u.flags|=16):d.push(m)}function $o(u,d){switch(u.tag){case 5:return d=Ft(d,u.type,u.pendingProps),d!==null?(u.stateNode=d,Qn=u,xn=kr(d),!0):!1;case 6:return d=St(d,u.pendingProps),d!==null?(u.stateNode=d,Qn=u,xn=null,!0):!1;case 13:if(d=ln(d),d!==null){var m=Ge!==null?{id:$e,overflow:Ve}:null;return u.memoizedState={dehydrated:d,treeContext:m,retryLane:1073741824},m=fs(18,null,null,0),m.stateNode=d,m.return=u,u.child=m,Qn=u,xn=null,!0}return!1;default:return!1}}function Fl(u){return(u.mode&1)!==0&&(u.flags&128)===0}function Bl(u){if(an){var d=xn;if(d){var m=d;if(!$o(u,d)){if(Fl(u))throw Error(o(418));d=Ut(m);var S=Qn;d&&$o(u,d)?Zr(S,m):(u.flags=u.flags&-4097|2,an=!1,Qn=u)}}else{if(Fl(u))throw Error(o(418));u.flags=u.flags&-4097|2,an=!1,Qn=u}}}function Jn(u){for(u=u.return;u!==null&&u.tag!==5&&u.tag!==3&&u.tag!==13;)u=u.return;Qn=u}function pn(u){if(!_e||u!==Qn)return!1;if(!an)return Jn(u),an=!0,!1;if(u.tag!==3&&(u.tag!==5||Rr(u.type)&&!qe(u.type,u.memoizedProps))){var d=xn;if(d){if(Fl(u))throw hn(),Error(o(418));for(;d;)Zr(u,d),d=Ut(d)}}if(Jn(u),u.tag===13){if(!_e)throw Error(o(316));if(u=u.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(o(317));xn=Dl(u)}else xn=Qn?Ut(u.stateNode):null;return!0}function hn(){for(var u=xn;u;)u=Ut(u)}function nn(){_e&&(xn=Qn=null,Is=an=!1)}function ar(u){Hn===null?Hn=[u]:Hn.push(u)}var lo=a.ReactCurrentBatchConfig;function zo(u,d){if(mr(u,d))return!0;if(typeof u!="object"||u===null||typeof d!="object"||d===null)return!1;var m=Object.keys(u),S=Object.keys(d);if(m.length!==S.length)return!1;for(S=0;S<m.length;S++){var E=m[S];if(!is.call(d,E)||!mr(u[E],d[E]))return!1}return!0}function $l(u){switch(u.tag){case 5:return Fi(u.type);case 16:return Fi("Lazy");case 13:return Fi("Suspense");case 19:return Fi("SuspenseList");case 0:case 2:case 15:return u=Dr(u.type,!1),u;case 11:return u=Dr(u.type.render,!1),u;case 1:return u=Dr(u.type,!0),u;default:return""}}function Os(u,d,m){if(u=m.ref,u!==null&&typeof u!="function"&&typeof u!="object"){if(m._owner){if(m=m._owner,m){if(m.tag!==1)throw Error(o(309));var S=m.stateNode}if(!S)throw Error(o(147,u));var E=S,P=""+u;return d!==null&&d.ref!==null&&typeof d.ref=="function"&&d.ref._stringRef===P?d.ref:(d=function(I){var J=E.refs;I===null?delete J[P]:J[P]=I},d._stringRef=P,d)}if(typeof u!="string")throw Error(o(284));if(!m._owner)throw Error(o(290,u))}return u}function Uo(u,d){throw u=Object.prototype.toString.call(d),Error(o(31,u==="[object Object]"?"object with keys {"+Object.keys(d).join(", ")+"}":u))}function Vo(u){var d=u._init;return d(u._payload)}function Aa(u){function d(se,ee){if(u){var ce=se.deletions;ce===null?(se.deletions=[ee],se.flags|=16):ce.push(ee)}}function m(se,ee){if(!u)return null;for(;ee!==null;)d(se,ee),ee=ee.sibling;return null}function S(se,ee){for(se=new Map;ee!==null;)ee.key!==null?se.set(ee.key,ee):se.set(ee.index,ee),ee=ee.sibling;return se}function E(se,ee){return se=Ba(se,ee),se.index=0,se.sibling=null,se}function P(se,ee,ce){return se.index=ce,u?(ce=se.alternate,ce!==null?(ce=ce.index,ce<ee?(se.flags|=2,ee):ce):(se.flags|=2,ee)):(se.flags|=1048576,ee)}function I(se){return u&&se.alternate===null&&(se.flags|=2),se}function J(se,ee,ce,He){return ee===null||ee.tag!==6?(ee=iy(ce,se.mode,He),ee.return=se,ee):(ee=E(ee,ce),ee.return=se,ee)}function oe(se,ee,ce,He){var ct=ce.type;return ct===h?Qe(se,ee,ce.props.children,He,ce.key):ee!==null&&(ee.elementType===ct||typeof ct=="object"&&ct!==null&&ct.$$typeof===_&&Vo(ct)===ee.type)?(He=E(ee,ce.props),He.ref=Os(se,ee,ce),He.return=se,He):(He=Fp(ce.type,ce.key,ce.props,null,se.mode,He),He.ref=Os(se,ee,ce),He.return=se,He)}function Pe(se,ee,ce,He){return ee===null||ee.tag!==4||ee.stateNode.containerInfo!==ce.containerInfo||ee.stateNode.implementation!==ce.implementation?(ee=sy(ce,se.mode,He),ee.return=se,ee):(ee=E(ee,ce.children||[]),ee.return=se,ee)}function Qe(se,ee,ce,He,ct){return ee===null||ee.tag!==7?(ee=ql(ce,se.mode,He,ct),ee.return=se,ee):(ee=E(ee,ce),ee.return=se,ee)}function Tt(se,ee,ce){if(typeof ee=="string"&&ee!==""||typeof ee=="number")return ee=iy(""+ee,se.mode,ce),ee.return=se,ee;if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case l:return ce=Fp(ee.type,ee.key,ee.props,null,se.mode,ce),ce.ref=Os(se,null,ee),ce.return=se,ce;case c:return ee=sy(ee,se.mode,ce),ee.return=se,ee;case _:var He=ee._init;return Tt(se,He(ee._payload),ce)}if(q(ee)||L(ee))return ee=ql(ee,se.mode,ce,null),ee.return=se,ee;Uo(se,ee)}return null}function We(se,ee,ce,He){var ct=ee!==null?ee.key:null;if(typeof ce=="string"&&ce!==""||typeof ce=="number")return ct!==null?null:J(se,ee,""+ce,He);if(typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case l:return ce.key===ct?oe(se,ee,ce,He):null;case c:return ce.key===ct?Pe(se,ee,ce,He):null;case _:return ct=ce._init,We(se,ee,ct(ce._payload),He)}if(q(ce)||L(ce))return ct!==null?null:Qe(se,ee,ce,He,null);Uo(se,ce)}return null}function _n(se,ee,ce,He,ct){if(typeof He=="string"&&He!==""||typeof He=="number")return se=se.get(ce)||null,J(ee,se,""+He,ct);if(typeof He=="object"&&He!==null){switch(He.$$typeof){case l:return se=se.get(He.key===null?ce:He.key)||null,oe(ee,se,He,ct);case c:return se=se.get(He.key===null?ce:He.key)||null,Pe(ee,se,He,ct);case _:var Mt=He._init;return _n(se,ee,ce,Mt(He._payload),ct)}if(q(He)||L(He))return se=se.get(ce)||null,Qe(ee,se,He,ct,null);Uo(ee,He)}return null}function gn(se,ee,ce,He){for(var ct=null,Mt=null,Pt=ee,Zt=ee=0,Lr=null;Pt!==null&&Zt<ce.length;Zt++){Pt.index>Zt?(Lr=Pt,Pt=null):Lr=Pt.sibling;var Qt=We(se,Pt,ce[Zt],He);if(Qt===null){Pt===null&&(Pt=Lr);break}u&&Pt&&Qt.alternate===null&&d(se,Pt),ee=P(Qt,ee,Zt),Mt===null?ct=Qt:Mt.sibling=Qt,Mt=Qt,Pt=Lr}if(Zt===ce.length)return m(se,Pt),an&&Bt(se,Zt),ct;if(Pt===null){for(;Zt<ce.length;Zt++)Pt=Tt(se,ce[Zt],He),Pt!==null&&(ee=P(Pt,ee,Zt),Mt===null?ct=Pt:Mt.sibling=Pt,Mt=Pt);return an&&Bt(se,Zt),ct}for(Pt=S(se,Pt);Zt<ce.length;Zt++)Lr=_n(Pt,se,Zt,ce[Zt],He),Lr!==null&&(u&&Lr.alternate!==null&&Pt.delete(Lr.key===null?Zt:Lr.key),ee=P(Lr,ee,Zt),Mt===null?ct=Lr:Mt.sibling=Lr,Mt=Lr);return u&&Pt.forEach(function($a){return d(se,$a)}),an&&Bt(se,Zt),ct}function Pi(se,ee,ce,He){var ct=L(ce);if(typeof ct!="function")throw Error(o(150));if(ce=ct.call(ce),ce==null)throw Error(o(151));for(var Mt=ct=null,Pt=ee,Zt=ee=0,Lr=null,Qt=ce.next();Pt!==null&&!Qt.done;Zt++,Qt=ce.next()){Pt.index>Zt?(Lr=Pt,Pt=null):Lr=Pt.sibling;var $a=We(se,Pt,Qt.value,He);if($a===null){Pt===null&&(Pt=Lr);break}u&&Pt&&$a.alternate===null&&d(se,Pt),ee=P($a,ee,Zt),Mt===null?ct=$a:Mt.sibling=$a,Mt=$a,Pt=Lr}if(Qt.done)return m(se,Pt),an&&Bt(se,Zt),ct;if(Pt===null){for(;!Qt.done;Zt++,Qt=ce.next())Qt=Tt(se,Qt.value,He),Qt!==null&&(ee=P(Qt,ee,Zt),Mt===null?ct=Qt:Mt.sibling=Qt,Mt=Qt);return an&&Bt(se,Zt),ct}for(Pt=S(se,Pt);!Qt.done;Zt++,Qt=ce.next())Qt=_n(Pt,se,Zt,Qt.value,He),Qt!==null&&(u&&Qt.alternate!==null&&Pt.delete(Qt.key===null?Zt:Qt.key),ee=P(Qt,ee,Zt),Mt===null?ct=Qt:Mt.sibling=Qt,Mt=Qt);return u&&Pt.forEach(function(NI){return d(se,NI)}),an&&Bt(se,Zt),ct}function Yo(se,ee,ce,He){if(typeof ce=="object"&&ce!==null&&ce.type===h&&ce.key===null&&(ce=ce.props.children),typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case l:e:{for(var ct=ce.key,Mt=ee;Mt!==null;){if(Mt.key===ct){if(ct=ce.type,ct===h){if(Mt.tag===7){m(se,Mt.sibling),ee=E(Mt,ce.props.children),ee.return=se,se=ee;break e}}else if(Mt.elementType===ct||typeof ct=="object"&&ct!==null&&ct.$$typeof===_&&Vo(ct)===Mt.type){m(se,Mt.sibling),ee=E(Mt,ce.props),ee.ref=Os(se,Mt,ce),ee.return=se,se=ee;break e}m(se,Mt);break}else d(se,Mt);Mt=Mt.sibling}ce.type===h?(ee=ql(ce.props.children,se.mode,He,ce.key),ee.return=se,se=ee):(He=Fp(ce.type,ce.key,ce.props,null,se.mode,He),He.ref=Os(se,ee,ce),He.return=se,se=He)}return I(se);case c:e:{for(Mt=ce.key;ee!==null;){if(ee.key===Mt)if(ee.tag===4&&ee.stateNode.containerInfo===ce.containerInfo&&ee.stateNode.implementation===ce.implementation){m(se,ee.sibling),ee=E(ee,ce.children||[]),ee.return=se,se=ee;break e}else{m(se,ee);break}else d(se,ee);ee=ee.sibling}ee=sy(ce,se.mode,He),ee.return=se,se=ee}return I(se);case _:return Mt=ce._init,Yo(se,ee,Mt(ce._payload),He)}if(q(ce))return gn(se,ee,ce,He);if(L(ce))return Pi(se,ee,ce,He);Uo(se,ce)}return typeof ce=="string"&&ce!==""||typeof ce=="number"?(ce=""+ce,ee!==null&&ee.tag===6?(m(se,ee.sibling),ee=E(ee,ce),ee.return=se,se=ee):(m(se,ee),ee=iy(ce,se.mode,He),ee.return=se,se=ee),I(se)):m(se,ee)}return Yo}var Wo=Aa(!0),Fd=Aa(!1),fi=di(null),up=null,$u=null,cv=null;function dv(){cv=$u=up=null}function qS(u,d,m){me?(Yt(fi,d._currentValue),d._currentValue=m):(Yt(fi,d._currentValue2),d._currentValue2=m)}function hv(u){var d=fi.current;tn(fi),me?u._currentValue=d:u._currentValue2=d}function fv(u,d,m){for(;u!==null;){var S=u.alternate;if((u.childLanes&d)!==d?(u.childLanes|=d,S!==null&&(S.childLanes|=d)):S!==null&&(S.childLanes&d)!==d&&(S.childLanes|=d),u===m)break;u=u.return}}function zu(u,d){up=u,cv=$u=null,u=u.dependencies,u!==null&&u.firstContext!==null&&(u.lanes&d&&(Ei=!0),u.firstContext=null)}function us(u){var d=me?u._currentValue:u._currentValue2;if(cv!==u)if(u={context:u,memoizedValue:d,next:null},$u===null){if(up===null)throw Error(o(308));$u=u,up.dependencies={lanes:0,firstContext:u}}else $u=$u.next=u;return d}var zl=null;function pv(u){zl===null?zl=[u]:zl.push(u)}function YS(u,d,m,S){var E=d.interleaved;return E===null?(m.next=m,pv(d)):(m.next=E.next,E.next=m),d.interleaved=m,uo(u,S)}function uo(u,d){u.lanes|=d;var m=u.alternate;for(m!==null&&(m.lanes|=d),m=u,u=u.return;u!==null;)u.childLanes|=d,m=u.alternate,m!==null&&(m.childLanes|=d),m=u,u=u.return;return m.tag===3?m.stateNode:null}var Na=!1;function gv(u){u.updateQueue={baseState:u.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function KS(u,d){u=u.updateQueue,d.updateQueue===u&&(d.updateQueue={baseState:u.baseState,firstBaseUpdate:u.firstBaseUpdate,lastBaseUpdate:u.lastBaseUpdate,shared:u.shared,effects:u.effects})}function Ho(u,d){return{eventTime:u,lane:d,tag:0,payload:null,callback:null,next:null}}function ja(u,d,m){var S=u.updateQueue;if(S===null)return null;if(S=S.shared,It&2){var E=S.pending;return E===null?d.next=d:(d.next=E.next,E.next=d),S.pending=d,uo(u,m)}return E=S.interleaved,E===null?(d.next=d,pv(S)):(d.next=E.next,E.next=d),S.interleaved=d,uo(u,m)}function cp(u,d,m){if(d=d.updateQueue,d!==null&&(d=d.shared,(m&4194240)!==0)){var S=d.lanes;S&=u.pendingLanes,m|=S,d.lanes=m,Fo(u,m)}}function XS(u,d){var m=u.updateQueue,S=u.alternate;if(S!==null&&(S=S.updateQueue,m===S)){var E=null,P=null;if(m=m.firstBaseUpdate,m!==null){do{var I={eventTime:m.eventTime,lane:m.lane,tag:m.tag,payload:m.payload,callback:m.callback,next:null};P===null?E=P=I:P=P.next=I,m=m.next}while(m!==null);P===null?E=P=d:P=P.next=d}else E=P=d;m={baseState:S.baseState,firstBaseUpdate:E,lastBaseUpdate:P,shared:S.shared,effects:S.effects},u.updateQueue=m;return}u=m.lastBaseUpdate,u===null?m.firstBaseUpdate=d:u.next=d,m.lastBaseUpdate=d}function dp(u,d,m,S){var E=u.updateQueue;Na=!1;var P=E.firstBaseUpdate,I=E.lastBaseUpdate,J=E.shared.pending;if(J!==null){E.shared.pending=null;var oe=J,Pe=oe.next;oe.next=null,I===null?P=Pe:I.next=Pe,I=oe;var Qe=u.alternate;Qe!==null&&(Qe=Qe.updateQueue,J=Qe.lastBaseUpdate,J!==I&&(J===null?Qe.firstBaseUpdate=Pe:J.next=Pe,Qe.lastBaseUpdate=oe))}if(P!==null){var Tt=E.baseState;I=0,Qe=Pe=oe=null,J=P;do{var We=J.lane,_n=J.eventTime;if((S&We)===We){Qe!==null&&(Qe=Qe.next={eventTime:_n,lane:0,tag:J.tag,payload:J.payload,callback:J.callback,next:null});e:{var gn=u,Pi=J;switch(We=d,_n=m,Pi.tag){case 1:if(gn=Pi.payload,typeof gn=="function"){Tt=gn.call(_n,Tt,We);break e}Tt=gn;break e;case 3:gn.flags=gn.flags&-65537|128;case 0:if(gn=Pi.payload,We=typeof gn=="function"?gn.call(_n,Tt,We):gn,We==null)break e;Tt=s({},Tt,We);break e;case 2:Na=!0}}J.callback!==null&&J.lane!==0&&(u.flags|=64,We=E.effects,We===null?E.effects=[J]:We.push(J))}else _n={eventTime:_n,lane:We,tag:J.tag,payload:J.payload,callback:J.callback,next:null},Qe===null?(Pe=Qe=_n,oe=Tt):Qe=Qe.next=_n,I|=We;if(J=J.next,J===null){if(J=E.shared.pending,J===null)break;We=J,J=We.next,We.next=null,E.lastBaseUpdate=We,E.shared.pending=null}}while(1);if(Qe===null&&(oe=Tt),E.baseState=oe,E.firstBaseUpdate=Pe,E.lastBaseUpdate=Qe,d=E.shared.interleaved,d!==null){E=d;do I|=E.lane,E=E.next;while(E!==d)}else P===null&&(E.shared.lanes=0);Vl|=I,u.lanes=I,u.memoizedState=Tt}}function ZS(u,d,m){if(u=d.effects,d.effects=null,u!==null)for(d=0;d<u.length;d++){var S=u[d],E=S.callback;if(E!==null){if(S.callback=null,S=m,typeof E!="function")throw Error(o(191,E));E.call(S)}}}var Bd={},cs=di(Bd),$d=di(Bd),Uu=di(Bd);function co(u){if(u===Bd)throw Error(o(174));return u}function mv(u,d){Yt(Uu,d),Yt($d,u),Yt(cs,Bd),u=te(d),tn(cs),Yt(cs,u)}function Vu(){tn(cs),tn($d),tn(Uu)}function QS(u){var d=co(Uu.current),m=co(cs.current);d=O(m,u.type,d),m!==d&&(Yt($d,u),Yt(cs,d))}function vv(u){$d.current===u&&(tn(cs),tn($d))}var An=di(0);function hp(u){for(var d=u;d!==null;){if(d.tag===13){var m=d.memoizedState;if(m!==null&&(m=m.dehydrated,m===null||Gt(m)||qt(m)))return d}else if(d.tag===19&&d.memoizedProps.revealOrder!==void 0){if(d.flags&128)return d}else if(d.child!==null){d.child.return=d,d=d.child;continue}if(d===u)break;for(;d.sibling===null;){if(d.return===null||d.return===u)return null;d=d.return}d.sibling.return=d.return,d=d.sibling}return null}var yv=[];function wv(){for(var u=0;u<yv.length;u++){var d=yv[u];me?d._workInProgressVersionPrimary=null:d._workInProgressVersionSecondary=null}yv.length=0}var fp=a.ReactCurrentDispatcher,xv=a.ReactCurrentBatchConfig,Ul=0,Nn=null,vr=null,Tr=null,pp=!1,zd=!1,Ud=0,iI=0;function Qr(){throw Error(o(321))}function _v(u,d){if(d===null)return!1;for(var m=0;m<d.length&&m<u.length;m++)if(!mr(u[m],d[m]))return!1;return!0}function bv(u,d,m,S,E,P){if(Ul=P,Nn=d,d.memoizedState=null,d.updateQueue=null,d.lanes=0,fp.current=u===null||u.memoizedState===null?lI:uI,u=m(S,E),zd){P=0;do{if(zd=!1,Ud=0,25<=P)throw Error(o(301));P+=1,Tr=vr=null,d.updateQueue=null,fp.current=cI,u=m(S,E)}while(zd)}if(fp.current=vp,d=vr!==null&&vr.next!==null,Ul=0,Tr=vr=Nn=null,pp=!1,d)throw Error(o(300));return u}function Sv(){var u=Ud!==0;return Ud=0,u}function ho(){var u={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Tr===null?Nn.memoizedState=Tr=u:Tr=Tr.next=u,Tr}function ds(){if(vr===null){var u=Nn.alternate;u=u!==null?u.memoizedState:null}else u=vr.next;var d=Tr===null?Nn.memoizedState:Tr.next;if(d!==null)Tr=d,vr=u;else{if(u===null)throw Error(o(310));vr=u,u={memoizedState:vr.memoizedState,baseState:vr.baseState,baseQueue:vr.baseQueue,queue:vr.queue,next:null},Tr===null?Nn.memoizedState=Tr=u:Tr=Tr.next=u}return Tr}function Vd(u,d){return typeof d=="function"?d(u):d}function Cv(u){var d=ds(),m=d.queue;if(m===null)throw Error(o(311));m.lastRenderedReducer=u;var S=vr,E=S.baseQueue,P=m.pending;if(P!==null){if(E!==null){var I=E.next;E.next=P.next,P.next=I}S.baseQueue=E=P,m.pending=null}if(E!==null){P=E.next,S=S.baseState;var J=I=null,oe=null,Pe=P;do{var Qe=Pe.lane;if((Ul&Qe)===Qe)oe!==null&&(oe=oe.next={lane:0,action:Pe.action,hasEagerState:Pe.hasEagerState,eagerState:Pe.eagerState,next:null}),S=Pe.hasEagerState?Pe.eagerState:u(S,Pe.action);else{var Tt={lane:Qe,action:Pe.action,hasEagerState:Pe.hasEagerState,eagerState:Pe.eagerState,next:null};oe===null?(J=oe=Tt,I=S):oe=oe.next=Tt,Nn.lanes|=Qe,Vl|=Qe}Pe=Pe.next}while(Pe!==null&&Pe!==P);oe===null?I=S:oe.next=J,mr(S,d.memoizedState)||(Ei=!0),d.memoizedState=S,d.baseState=I,d.baseQueue=oe,m.lastRenderedState=S}if(u=m.interleaved,u!==null){E=u;do P=E.lane,Nn.lanes|=P,Vl|=P,E=E.next;while(E!==u)}else E===null&&(m.lanes=0);return[d.memoizedState,m.dispatch]}function kv(u){var d=ds(),m=d.queue;if(m===null)throw Error(o(311));m.lastRenderedReducer=u;var S=m.dispatch,E=m.pending,P=d.memoizedState;if(E!==null){m.pending=null;var I=E=E.next;do P=u(P,I.action),I=I.next;while(I!==E);mr(P,d.memoizedState)||(Ei=!0),d.memoizedState=P,d.baseQueue===null&&(d.baseState=P),m.lastRenderedState=P}return[P,S]}function JS(){}function e2(u,d){var m=Nn,S=ds(),E=d(),P=!mr(S.memoizedState,E);if(P&&(S.memoizedState=E,Ei=!0),S=S.queue,Ev(r2.bind(null,m,S,u),[u]),S.getSnapshot!==d||P||Tr!==null&&Tr.memoizedState.tag&1){if(m.flags|=2048,Wd(9,n2.bind(null,m,S,E,d),void 0,null),Pr===null)throw Error(o(349));Ul&30||t2(m,d,E)}return E}function t2(u,d,m){u.flags|=16384,u={getSnapshot:d,value:m},d=Nn.updateQueue,d===null?(d={lastEffect:null,stores:null},Nn.updateQueue=d,d.stores=[u]):(m=d.stores,m===null?d.stores=[u]:m.push(u))}function n2(u,d,m,S){d.value=m,d.getSnapshot=S,i2(d)&&s2(u)}function r2(u,d,m){return m(function(){i2(d)&&s2(u)})}function i2(u){var d=u.getSnapshot;u=u.value;try{var m=d();return!mr(u,m)}catch{return!0}}function s2(u){var d=uo(u,1);d!==null&&hs(d,u,1,-1)}function o2(u){var d=ho();return typeof u=="function"&&(u=u()),d.memoizedState=d.baseState=u,u={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Vd,lastRenderedState:u},d.queue=u,u=u.dispatch=aI.bind(null,Nn,u),[d.memoizedState,u]}function Wd(u,d,m,S){return u={tag:u,create:d,destroy:m,deps:S,next:null},d=Nn.updateQueue,d===null?(d={lastEffect:null,stores:null},Nn.updateQueue=d,d.lastEffect=u.next=u):(m=d.lastEffect,m===null?d.lastEffect=u.next=u:(S=m.next,m.next=u,u.next=S,d.lastEffect=u)),u}function a2(){return ds().memoizedState}function gp(u,d,m,S){var E=ho();Nn.flags|=u,E.memoizedState=Wd(1|d,m,void 0,S===void 0?null:S)}function mp(u,d,m,S){var E=ds();S=S===void 0?null:S;var P=void 0;if(vr!==null){var I=vr.memoizedState;if(P=I.destroy,S!==null&&_v(S,I.deps)){E.memoizedState=Wd(d,m,P,S);return}}Nn.flags|=u,E.memoizedState=Wd(1|d,m,P,S)}function l2(u,d){return gp(8390656,8,u,d)}function Ev(u,d){return mp(2048,8,u,d)}function u2(u,d){return mp(4,2,u,d)}function c2(u,d){return mp(4,4,u,d)}function d2(u,d){if(typeof d=="function")return u=u(),d(u),function(){d(null)};if(d!=null)return u=u(),d.current=u,function(){d.current=null}}function h2(u,d,m){return m=m!=null?m.concat([u]):null,mp(4,4,d2.bind(null,d,u),m)}function Rv(){}function f2(u,d){var m=ds();d=d===void 0?null:d;var S=m.memoizedState;return S!==null&&d!==null&&_v(d,S[1])?S[0]:(m.memoizedState=[u,d],u)}function p2(u,d){var m=ds();d=d===void 0?null:d;var S=m.memoizedState;return S!==null&&d!==null&&_v(d,S[1])?S[0]:(u=u(),m.memoizedState=[u,d],u)}function g2(u,d,m){return Ul&21?(mr(m,d)||(m=ka(),Nn.lanes|=m,Vl|=m,u.baseState=!0),d):(u.baseState&&(u.baseState=!1,Ei=!0),u.memoizedState=m)}function sI(u,d){var m=Vt;Vt=m!==0&&4>m?m:4,u(!0);var S=xv.transition;xv.transition={};try{u(!1),d()}finally{Vt=m,xv.transition=S}}function m2(){return ds().memoizedState}function oI(u,d,m){var S=Da(u);if(m={lane:S,action:m,hasEagerState:!1,eagerState:null,next:null},v2(u))y2(d,m);else if(m=YS(u,d,m,S),m!==null){var E=ti();hs(m,u,S,E),w2(m,d,S)}}function aI(u,d,m){var S=Da(u),E={lane:S,action:m,hasEagerState:!1,eagerState:null,next:null};if(v2(u))y2(d,E);else{var P=u.alternate;if(u.lanes===0&&(P===null||P.lanes===0)&&(P=d.lastRenderedReducer,P!==null))try{var I=d.lastRenderedState,J=P(I,m);if(E.hasEagerState=!0,E.eagerState=J,mr(J,I)){var oe=d.interleaved;oe===null?(E.next=E,pv(d)):(E.next=oe.next,oe.next=E),d.interleaved=E;return}}catch{}finally{}m=YS(u,d,E,S),m!==null&&(E=ti(),hs(m,u,S,E),w2(m,d,S))}}function v2(u){var d=u.alternate;return u===Nn||d!==null&&d===Nn}function y2(u,d){zd=pp=!0;var m=u.pending;m===null?d.next=d:(d.next=m.next,m.next=d),u.pending=d}function w2(u,d,m){if(m&4194240){var S=d.lanes;S&=u.pendingLanes,m|=S,d.lanes=m,Fo(u,m)}}var vp={readContext:us,useCallback:Qr,useContext:Qr,useEffect:Qr,useImperativeHandle:Qr,useInsertionEffect:Qr,useLayoutEffect:Qr,useMemo:Qr,useReducer:Qr,useRef:Qr,useState:Qr,useDebugValue:Qr,useDeferredValue:Qr,useTransition:Qr,useMutableSource:Qr,useSyncExternalStore:Qr,useId:Qr,unstable_isNewReconciler:!1},lI={readContext:us,useCallback:function(u,d){return ho().memoizedState=[u,d===void 0?null:d],u},useContext:us,useEffect:l2,useImperativeHandle:function(u,d,m){return m=m!=null?m.concat([u]):null,gp(4194308,4,d2.bind(null,d,u),m)},useLayoutEffect:function(u,d){return gp(4194308,4,u,d)},useInsertionEffect:function(u,d){return gp(4,2,u,d)},useMemo:function(u,d){var m=ho();return d=d===void 0?null:d,u=u(),m.memoizedState=[u,d],u},useReducer:function(u,d,m){var S=ho();return d=m!==void 0?m(d):d,S.memoizedState=S.baseState=d,u={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:u,lastRenderedState:d},S.queue=u,u=u.dispatch=oI.bind(null,Nn,u),[S.memoizedState,u]},useRef:function(u){var d=ho();return u={current:u},d.memoizedState=u},useState:o2,useDebugValue:Rv,useDeferredValue:function(u){return ho().memoizedState=u},useTransition:function(){var u=o2(!1),d=u[0];return u=sI.bind(null,u[1]),ho().memoizedState=u,[d,u]},useMutableSource:function(){},useSyncExternalStore:function(u,d,m){var S=Nn,E=ho();if(an){if(m===void 0)throw Error(o(407));m=m()}else{if(m=d(),Pr===null)throw Error(o(349));Ul&30||t2(S,d,m)}E.memoizedState=m;var P={value:m,getSnapshot:d};return E.queue=P,l2(r2.bind(null,S,P,u),[u]),S.flags|=2048,Wd(9,n2.bind(null,S,P,m,d),void 0,null),m},useId:function(){var u=ho(),d=Pr.identifierPrefix;if(an){var m=Ve,S=$e;m=(S&~(1<<32-gr(S)-1)).toString(32)+m,d=":"+d+"R"+m,m=Ud++,0<m&&(d+="H"+m.toString(32)),d+=":"}else m=iI++,d=":"+d+"r"+m.toString(32)+":";return u.memoizedState=d},unstable_isNewReconciler:!1},uI={readContext:us,useCallback:f2,useContext:us,useEffect:Ev,useImperativeHandle:h2,useInsertionEffect:u2,useLayoutEffect:c2,useMemo:p2,useReducer:Cv,useRef:a2,useState:function(){return Cv(Vd)},useDebugValue:Rv,useDeferredValue:function(u){var d=ds();return g2(d,vr.memoizedState,u)},useTransition:function(){var u=Cv(Vd)[0],d=ds().memoizedState;return[u,d]},useMutableSource:JS,useSyncExternalStore:e2,useId:m2,unstable_isNewReconciler:!1},cI={readContext:us,useCallback:f2,useContext:us,useEffect:Ev,useImperativeHandle:h2,useInsertionEffect:u2,useLayoutEffect:c2,useMemo:p2,useReducer:kv,useRef:a2,useState:function(){return kv(Vd)},useDebugValue:Rv,useDeferredValue:function(u){var d=ds();return vr===null?d.memoizedState=u:g2(d,vr.memoizedState,u)},useTransition:function(){var u=kv(Vd)[0],d=ds().memoizedState;return[u,d]},useMutableSource:JS,useSyncExternalStore:e2,useId:m2,unstable_isNewReconciler:!1};function Ds(u,d){if(u&&u.defaultProps){d=s({},d),u=u.defaultProps;for(var m in u)d[m]===void 0&&(d[m]=u[m]);return d}return d}function Tv(u,d,m,S){d=u.memoizedState,m=m(S,d),m=m==null?d:s({},d,m),u.memoizedState=m,u.lanes===0&&(u.updateQueue.baseState=m)}var yp={isMounted:function(u){return(u=u._reactInternals)?$(u)===u:!1},enqueueSetState:function(u,d,m){u=u._reactInternals;var S=ti(),E=Da(u),P=Ho(S,E);P.payload=d,m!=null&&(P.callback=m),d=ja(u,P,E),d!==null&&(hs(d,u,E,S),cp(d,u,E))},enqueueReplaceState:function(u,d,m){u=u._reactInternals;var S=ti(),E=Da(u),P=Ho(S,E);P.tag=1,P.payload=d,m!=null&&(P.callback=m),d=ja(u,P,E),d!==null&&(hs(d,u,E,S),cp(d,u,E))},enqueueForceUpdate:function(u,d){u=u._reactInternals;var m=ti(),S=Da(u),E=Ho(m,S);E.tag=2,d!=null&&(E.callback=d),d=ja(u,E,S),d!==null&&(hs(d,u,S,m),cp(d,u,S))}};function x2(u,d,m,S,E,P,I){return u=u.stateNode,typeof u.shouldComponentUpdate=="function"?u.shouldComponentUpdate(S,P,I):d.prototype&&d.prototype.isPureReactComponent?!zo(m,S)||!zo(E,P):!0}function _2(u,d,m){var S=!1,E=sn,P=d.contextType;return typeof P=="object"&&P!==null?P=us(P):(E=Cn(d)?Fr:Rt.current,S=d.contextTypes,P=(S=S!=null)?Vn(u,E):sn),d=new d(m,P),u.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=yp,u.stateNode=d,d._reactInternals=u,S&&(u=u.stateNode,u.__reactInternalMemoizedUnmaskedChildContext=E,u.__reactInternalMemoizedMaskedChildContext=P),d}function b2(u,d,m,S){u=d.state,typeof d.componentWillReceiveProps=="function"&&d.componentWillReceiveProps(m,S),typeof d.UNSAFE_componentWillReceiveProps=="function"&&d.UNSAFE_componentWillReceiveProps(m,S),d.state!==u&&yp.enqueueReplaceState(d,d.state,null)}function Pv(u,d,m,S){var E=u.stateNode;E.props=m,E.state=u.memoizedState,E.refs={},gv(u);var P=d.contextType;typeof P=="object"&&P!==null?E.context=us(P):(P=Cn(d)?Fr:Rt.current,E.context=Vn(u,P)),E.state=u.memoizedState,P=d.getDerivedStateFromProps,typeof P=="function"&&(Tv(u,d,P,m),E.state=u.memoizedState),typeof d.getDerivedStateFromProps=="function"||typeof E.getSnapshotBeforeUpdate=="function"||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(d=E.state,typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount(),d!==E.state&&yp.enqueueReplaceState(E,E.state,null),dp(u,m,E,S),E.state=u.memoizedState),typeof E.componentDidMount=="function"&&(u.flags|=4194308)}function Wu(u,d){try{var m="",S=d;do m+=$l(S),S=S.return;while(S);var E=m}catch(P){E=`
Error generating stack: `+P.message+`
`+P.stack}return{value:u,source:d,stack:E,digest:null}}function Lv(u,d,m){return{value:u,source:null,stack:m??null,digest:d??null}}function Mv(u,d){try{console.error(d.value)}catch(m){setTimeout(function(){throw m})}}var dI=typeof WeakMap=="function"?WeakMap:Map;function S2(u,d,m){m=Ho(-1,m),m.tag=3,m.payload={element:null};var S=d.value;return m.callback=function(){Ap||(Ap=!0,Zv=S),Mv(u,d)},m}function C2(u,d,m){m=Ho(-1,m),m.tag=3;var S=u.type.getDerivedStateFromError;if(typeof S=="function"){var E=d.value;m.payload=function(){return S(E)},m.callback=function(){Mv(u,d)}}var P=u.stateNode;return P!==null&&typeof P.componentDidCatch=="function"&&(m.callback=function(){Mv(u,d),typeof S!="function"&&(Ia===null?Ia=new Set([this]):Ia.add(this));var I=d.stack;this.componentDidCatch(d.value,{componentStack:I!==null?I:""})}),m}function k2(u,d,m){var S=u.pingCache;if(S===null){S=u.pingCache=new dI;var E=new Set;S.set(d,E)}else E=S.get(d),E===void 0&&(E=new Set,S.set(d,E));E.has(m)||(E.add(m),u=kI.bind(null,u,d,m),d.then(u,u))}function E2(u){do{var d;if((d=u.tag===13)&&(d=u.memoizedState,d=d!==null?d.dehydrated!==null:!0),d)return u;u=u.return}while(u!==null);return null}function R2(u,d,m,S,E){return u.mode&1?(u.flags|=65536,u.lanes=E,u):(u===d?u.flags|=65536:(u.flags|=128,m.flags|=131072,m.flags&=-52805,m.tag===1&&(m.alternate===null?m.tag=17:(d=Ho(-1,1),d.tag=2,ja(m,d,1))),m.lanes|=1),u)}var hI=a.ReactCurrentOwner,Ei=!1;function pi(u,d,m,S){d.child=u===null?Fd(d,null,m,S):Wo(d,u.child,m,S)}function T2(u,d,m,S,E){m=m.render;var P=d.ref;return zu(d,E),S=bv(u,d,m,S,P,E),m=Sv(),u!==null&&!Ei?(d.updateQueue=u.updateQueue,d.flags&=-2053,u.lanes&=~E,Go(u,d,E)):(an&&m&&Wn(d),d.flags|=1,pi(u,d,S,E),d.child)}function P2(u,d,m,S,E){if(u===null){var P=m.type;return typeof P=="function"&&!ry(P)&&P.defaultProps===void 0&&m.compare===null&&m.defaultProps===void 0?(d.tag=15,d.type=P,L2(u,d,P,S,E)):(u=Fp(m.type,null,S,d,d.mode,E),u.ref=d.ref,u.return=d,d.child=u)}if(P=u.child,!(u.lanes&E)){var I=P.memoizedProps;if(m=m.compare,m=m!==null?m:zo,m(I,S)&&u.ref===d.ref)return Go(u,d,E)}return d.flags|=1,u=Ba(P,S),u.ref=d.ref,u.return=d,d.child=u}function L2(u,d,m,S,E){if(u!==null){var P=u.memoizedProps;if(zo(P,S)&&u.ref===d.ref)if(Ei=!1,d.pendingProps=S=P,(u.lanes&E)!==0)u.flags&131072&&(Ei=!0);else return d.lanes=u.lanes,Go(u,d,E)}return Av(u,d,m,S,E)}function M2(u,d,m){var S=d.pendingProps,E=S.children,P=u!==null?u.memoizedState:null;if(S.mode==="hidden")if(!(d.mode&1))d.memoizedState={baseLanes:0,cachePool:null,transitions:null},Yt(Gu,zi),zi|=m;else{if(!(m&1073741824))return u=P!==null?P.baseLanes|m:m,d.lanes=d.childLanes=1073741824,d.memoizedState={baseLanes:u,cachePool:null,transitions:null},d.updateQueue=null,Yt(Gu,zi),zi|=u,null;d.memoizedState={baseLanes:0,cachePool:null,transitions:null},S=P!==null?P.baseLanes:m,Yt(Gu,zi),zi|=S}else P!==null?(S=P.baseLanes|m,d.memoizedState=null):S=m,Yt(Gu,zi),zi|=S;return pi(u,d,E,m),d.child}function A2(u,d){var m=d.ref;(u===null&&m!==null||u!==null&&u.ref!==m)&&(d.flags|=512,d.flags|=2097152)}function Av(u,d,m,S,E){var P=Cn(m)?Fr:Rt.current;return P=Vn(d,P),zu(d,E),m=bv(u,d,m,S,P,E),S=Sv(),u!==null&&!Ei?(d.updateQueue=u.updateQueue,d.flags&=-2053,u.lanes&=~E,Go(u,d,E)):(an&&S&&Wn(d),d.flags|=1,pi(u,d,m,E),d.child)}function N2(u,d,m,S,E){if(Cn(m)){var P=!0;Ci(d)}else P=!1;if(zu(d,E),d.stateNode===null)xp(u,d),_2(d,m,S),Pv(d,m,S,E),S=!0;else if(u===null){var I=d.stateNode,J=d.memoizedProps;I.props=J;var oe=I.context,Pe=m.contextType;typeof Pe=="object"&&Pe!==null?Pe=us(Pe):(Pe=Cn(m)?Fr:Rt.current,Pe=Vn(d,Pe));var Qe=m.getDerivedStateFromProps,Tt=typeof Qe=="function"||typeof I.getSnapshotBeforeUpdate=="function";Tt||typeof I.UNSAFE_componentWillReceiveProps!="function"&&typeof I.componentWillReceiveProps!="function"||(J!==S||oe!==Pe)&&b2(d,I,S,Pe),Na=!1;var We=d.memoizedState;I.state=We,dp(d,S,I,E),oe=d.memoizedState,J!==S||We!==oe||on.current||Na?(typeof Qe=="function"&&(Tv(d,m,Qe,S),oe=d.memoizedState),(J=Na||x2(d,m,J,S,We,oe,Pe))?(Tt||typeof I.UNSAFE_componentWillMount!="function"&&typeof I.componentWillMount!="function"||(typeof I.componentWillMount=="function"&&I.componentWillMount(),typeof I.UNSAFE_componentWillMount=="function"&&I.UNSAFE_componentWillMount()),typeof I.componentDidMount=="function"&&(d.flags|=4194308)):(typeof I.componentDidMount=="function"&&(d.flags|=4194308),d.memoizedProps=S,d.memoizedState=oe),I.props=S,I.state=oe,I.context=Pe,S=J):(typeof I.componentDidMount=="function"&&(d.flags|=4194308),S=!1)}else{I=d.stateNode,KS(u,d),J=d.memoizedProps,Pe=d.type===d.elementType?J:Ds(d.type,J),I.props=Pe,Tt=d.pendingProps,We=I.context,oe=m.contextType,typeof oe=="object"&&oe!==null?oe=us(oe):(oe=Cn(m)?Fr:Rt.current,oe=Vn(d,oe));var _n=m.getDerivedStateFromProps;(Qe=typeof _n=="function"||typeof I.getSnapshotBeforeUpdate=="function")||typeof I.UNSAFE_componentWillReceiveProps!="function"&&typeof I.componentWillReceiveProps!="function"||(J!==Tt||We!==oe)&&b2(d,I,S,oe),Na=!1,We=d.memoizedState,I.state=We,dp(d,S,I,E);var gn=d.memoizedState;J!==Tt||We!==gn||on.current||Na?(typeof _n=="function"&&(Tv(d,m,_n,S),gn=d.memoizedState),(Pe=Na||x2(d,m,Pe,S,We,gn,oe)||!1)?(Qe||typeof I.UNSAFE_componentWillUpdate!="function"&&typeof I.componentWillUpdate!="function"||(typeof I.componentWillUpdate=="function"&&I.componentWillUpdate(S,gn,oe),typeof I.UNSAFE_componentWillUpdate=="function"&&I.UNSAFE_componentWillUpdate(S,gn,oe)),typeof I.componentDidUpdate=="function"&&(d.flags|=4),typeof I.getSnapshotBeforeUpdate=="function"&&(d.flags|=1024)):(typeof I.componentDidUpdate!="function"||J===u.memoizedProps&&We===u.memoizedState||(d.flags|=4),typeof I.getSnapshotBeforeUpdate!="function"||J===u.memoizedProps&&We===u.memoizedState||(d.flags|=1024),d.memoizedProps=S,d.memoizedState=gn),I.props=S,I.state=gn,I.context=oe,S=Pe):(typeof I.componentDidUpdate!="function"||J===u.memoizedProps&&We===u.memoizedState||(d.flags|=4),typeof I.getSnapshotBeforeUpdate!="function"||J===u.memoizedProps&&We===u.memoizedState||(d.flags|=1024),S=!1)}return Nv(u,d,m,S,P,E)}function Nv(u,d,m,S,E,P){A2(u,d);var I=(d.flags&128)!==0;if(!S&&!I)return E&&hi(d,m,!1),Go(u,d,P);S=d.stateNode,hI.current=d;var J=I&&typeof m.getDerivedStateFromError!="function"?null:S.render();return d.flags|=1,u!==null&&I?(d.child=Wo(d,u.child,null,P),d.child=Wo(d,null,J,P)):pi(u,d,J,P),d.memoizedState=S.state,E&&hi(d,m,!0),d.child}function j2(u){var d=u.stateNode;d.pendingContext?Pn(u,d.pendingContext,d.pendingContext!==d.context):d.context&&Pn(u,d.context,!1),mv(u,d.containerInfo)}function I2(u,d,m,S,E){return nn(),ar(E),d.flags|=256,pi(u,d,m,S),d.child}var jv={dehydrated:null,treeContext:null,retryLane:0};function Iv(u){return{baseLanes:u,cachePool:null,transitions:null}}function O2(u,d,m){var S=d.pendingProps,E=An.current,P=!1,I=(d.flags&128)!==0,J;if((J=I)||(J=u!==null&&u.memoizedState===null?!1:(E&2)!==0),J?(P=!0,d.flags&=-129):(u===null||u.memoizedState!==null)&&(E|=1),Yt(An,E&1),u===null)return Bl(d),u=d.memoizedState,u!==null&&(u=u.dehydrated,u!==null)?(d.mode&1?qt(u)?d.lanes=8:d.lanes=1073741824:d.lanes=1,null):(I=S.children,u=S.fallback,P?(S=d.mode,P=d.child,I={mode:"hidden",children:I},!(S&1)&&P!==null?(P.childLanes=0,P.pendingProps=I):P=Bp(I,S,0,null),u=ql(u,S,m,null),P.return=d,u.return=d,P.sibling=u,d.child=P,d.child.memoizedState=Iv(m),d.memoizedState=jv,u):Ov(d,I));if(E=u.memoizedState,E!==null&&(J=E.dehydrated,J!==null))return fI(u,d,I,S,J,E,m);if(P){P=S.fallback,I=d.mode,E=u.child,J=E.sibling;var oe={mode:"hidden",children:S.children};return!(I&1)&&d.child!==E?(S=d.child,S.childLanes=0,S.pendingProps=oe,d.deletions=null):(S=Ba(E,oe),S.subtreeFlags=E.subtreeFlags&14680064),J!==null?P=Ba(J,P):(P=ql(P,I,m,null),P.flags|=2),P.return=d,S.return=d,S.sibling=P,d.child=S,S=P,P=d.child,I=u.child.memoizedState,I=I===null?Iv(m):{baseLanes:I.baseLanes|m,cachePool:null,transitions:I.transitions},P.memoizedState=I,P.childLanes=u.childLanes&~m,d.memoizedState=jv,S}return P=u.child,u=P.sibling,S=Ba(P,{mode:"visible",children:S.children}),!(d.mode&1)&&(S.lanes=m),S.return=d,S.sibling=null,u!==null&&(m=d.deletions,m===null?(d.deletions=[u],d.flags|=16):m.push(u)),d.child=S,d.memoizedState=null,S}function Ov(u,d){return d=Bp({mode:"visible",children:d},u.mode,0,null),d.return=u,u.child=d}function wp(u,d,m,S){return S!==null&&ar(S),Wo(d,u.child,null,m),u=Ov(d,d.pendingProps.children),u.flags|=2,d.memoizedState=null,u}function fI(u,d,m,S,E,P,I){if(m)return d.flags&256?(d.flags&=-257,S=Lv(Error(o(422))),wp(u,d,I,S)):d.memoizedState!==null?(d.child=u.child,d.flags|=128,null):(P=S.fallback,E=d.mode,S=Bp({mode:"visible",children:S.children},E,0,null),P=ql(P,E,I,null),P.flags|=2,S.return=d,P.return=d,S.sibling=P,d.child=S,d.mode&1&&Wo(d,u.child,null,I),d.child.memoizedState=Iv(I),d.memoizedState=jv,P);if(!(d.mode&1))return wp(u,d,I,null);if(qt(E))return S=mt(E).digest,P=Error(o(419)),S=Lv(P,S,void 0),wp(u,d,I,S);if(m=(I&u.childLanes)!==0,Ei||m){if(S=Pr,S!==null){switch(I&-I){case 4:E=2;break;case 16:E=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:E=32;break;case 536870912:E=268435456;break;default:E=0}E=E&(S.suspendedLanes|I)?0:E,E!==0&&E!==P.retryLane&&(P.retryLane=E,uo(u,E),hs(S,u,E,-1))}return ny(),S=Lv(Error(o(421))),wp(u,d,I,S)}return Gt(E)?(d.flags|=128,d.child=u.child,d=EI.bind(null,u),vt(E,d),null):(u=P.treeContext,_e&&(xn=Un(E),Qn=d,an=!0,Hn=null,Is=!1,u!==null&&(le[de++]=$e,le[de++]=Ve,le[de++]=Ge,$e=u.id,Ve=u.overflow,Ge=d)),d=Ov(d,S.children),d.flags|=4096,d)}function D2(u,d,m){u.lanes|=d;var S=u.alternate;S!==null&&(S.lanes|=d),fv(u.return,d,m)}function Dv(u,d,m,S,E){var P=u.memoizedState;P===null?u.memoizedState={isBackwards:d,rendering:null,renderingStartTime:0,last:S,tail:m,tailMode:E}:(P.isBackwards=d,P.rendering=null,P.renderingStartTime=0,P.last=S,P.tail=m,P.tailMode=E)}function F2(u,d,m){var S=d.pendingProps,E=S.revealOrder,P=S.tail;if(pi(u,d,S.children,m),S=An.current,S&2)S=S&1|2,d.flags|=128;else{if(u!==null&&u.flags&128)e:for(u=d.child;u!==null;){if(u.tag===13)u.memoizedState!==null&&D2(u,m,d);else if(u.tag===19)D2(u,m,d);else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===d)break e;for(;u.sibling===null;){if(u.return===null||u.return===d)break e;u=u.return}u.sibling.return=u.return,u=u.sibling}S&=1}if(Yt(An,S),!(d.mode&1))d.memoizedState=null;else switch(E){case"forwards":for(m=d.child,E=null;m!==null;)u=m.alternate,u!==null&&hp(u)===null&&(E=m),m=m.sibling;m=E,m===null?(E=d.child,d.child=null):(E=m.sibling,m.sibling=null),Dv(d,!1,E,m,P);break;case"backwards":for(m=null,E=d.child,d.child=null;E!==null;){if(u=E.alternate,u!==null&&hp(u)===null){d.child=E;break}u=E.sibling,E.sibling=m,m=E,E=u}Dv(d,!0,m,null,P);break;case"together":Dv(d,!1,null,null,void 0);break;default:d.memoizedState=null}return d.child}function xp(u,d){!(d.mode&1)&&u!==null&&(u.alternate=null,d.alternate=null,d.flags|=2)}function Go(u,d,m){if(u!==null&&(d.dependencies=u.dependencies),Vl|=d.lanes,!(m&d.childLanes))return null;if(u!==null&&d.child!==u.child)throw Error(o(153));if(d.child!==null){for(u=d.child,m=Ba(u,u.pendingProps),d.child=m,m.return=d;u.sibling!==null;)u=u.sibling,m=m.sibling=Ba(u,u.pendingProps),m.return=d;m.sibling=null}return d.child}function pI(u,d,m){switch(d.tag){case 3:j2(d),nn();break;case 5:QS(d);break;case 1:Cn(d.type)&&Ci(d);break;case 4:mv(d,d.stateNode.containerInfo);break;case 10:qS(d,d.type._context,d.memoizedProps.value);break;case 13:var S=d.memoizedState;if(S!==null)return S.dehydrated!==null?(Yt(An,An.current&1),d.flags|=128,null):m&d.child.childLanes?O2(u,d,m):(Yt(An,An.current&1),u=Go(u,d,m),u!==null?u.sibling:null);Yt(An,An.current&1);break;case 19:if(S=(m&d.childLanes)!==0,u.flags&128){if(S)return F2(u,d,m);d.flags|=128}var E=d.memoizedState;if(E!==null&&(E.rendering=null,E.tail=null,E.lastEffect=null),Yt(An,An.current),S)break;return null;case 22:case 23:return d.lanes=0,M2(u,d,m)}return Go(u,d,m)}function fo(u){u.flags|=4}function B2(u,d){if(u!==null&&u.child===d.child)return!0;if(d.flags&16)return!1;for(u=d.child;u!==null;){if(u.flags&12854||u.subtreeFlags&12854)return!1;u=u.sibling}return!0}var Hd,Gd,_p,bp;if(X)Hd=function(u,d){for(var m=d.child;m!==null;){if(m.tag===5||m.tag===6)re(u,m.stateNode);else if(m.tag!==4&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===d)break;for(;m.sibling===null;){if(m.return===null||m.return===d)return;m=m.return}m.sibling.return=m.return,m=m.sibling}},Gd=function(){},_p=function(u,d,m,S,E){if(u=u.memoizedProps,u!==S){var P=d.stateNode,I=co(cs.current);m=ke(P,m,u,S,E,I),(d.updateQueue=m)&&fo(d)}},bp=function(u,d,m,S){m!==S&&fo(d)};else if(ye){Hd=function(u,d,m,S){for(var E=d.child;E!==null;){if(E.tag===5){var P=E.stateNode;m&&S&&(P=Xt(P,E.type,E.memoizedProps,E)),re(u,P)}else if(E.tag===6)P=E.stateNode,m&&S&&(P=ft(P,E.memoizedProps,E)),re(u,P);else if(E.tag!==4){if(E.tag===22&&E.memoizedState!==null)P=E.child,P!==null&&(P.return=E),Hd(u,E,!0,!0);else if(E.child!==null){E.child.return=E,E=E.child;continue}}if(E===d)break;for(;E.sibling===null;){if(E.return===null||E.return===d)return;E=E.return}E.sibling.return=E.return,E=E.sibling}};var $2=function(u,d,m,S){for(var E=d.child;E!==null;){if(E.tag===5){var P=E.stateNode;m&&S&&(P=Xt(P,E.type,E.memoizedProps,E)),zt(u,P)}else if(E.tag===6)P=E.stateNode,m&&S&&(P=ft(P,E.memoizedProps,E)),zt(u,P);else if(E.tag!==4){if(E.tag===22&&E.memoizedState!==null)P=E.child,P!==null&&(P.return=E),$2(u,E,!0,!0);else if(E.child!==null){E.child.return=E,E=E.child;continue}}if(E===d)break;for(;E.sibling===null;){if(E.return===null||E.return===d)return;E=E.return}E.sibling.return=E.return,E=E.sibling}};Gd=function(u,d){var m=d.stateNode;if(!B2(u,d)){u=m.containerInfo;var S=ht(u);$2(S,d,!1,!1),m.pendingChildren=S,fo(d),Et(u,S)}},_p=function(u,d,m,S,E){var P=u.stateNode,I=u.memoizedProps;if((u=B2(u,d))&&I===S)d.stateNode=P;else{var J=d.stateNode,oe=co(cs.current),Pe=null;I!==S&&(Pe=ke(J,m,I,S,E,oe)),u&&Pe===null?d.stateNode=P:(P=Nt(P,Pe,m,I,S,d,u,J),ue(P,m,S,E,oe)&&fo(d),d.stateNode=P,u?fo(d):Hd(P,d,!1,!1))}},bp=function(u,d,m,S){m!==S?(u=co(Uu.current),m=co(cs.current),d.stateNode=he(S,u,m,d),fo(d)):d.stateNode=u.stateNode}}else Gd=function(){},_p=function(){},bp=function(){};function qd(u,d){if(!an)switch(u.tailMode){case"hidden":d=u.tail;for(var m=null;d!==null;)d.alternate!==null&&(m=d),d=d.sibling;m===null?u.tail=null:m.sibling=null;break;case"collapsed":m=u.tail;for(var S=null;m!==null;)m.alternate!==null&&(S=m),m=m.sibling;S===null?d||u.tail===null?u.tail=null:u.tail.sibling=null:S.sibling=null}}function Jr(u){var d=u.alternate!==null&&u.alternate.child===u.child,m=0,S=0;if(d)for(var E=u.child;E!==null;)m|=E.lanes|E.childLanes,S|=E.subtreeFlags&14680064,S|=E.flags&14680064,E.return=u,E=E.sibling;else for(E=u.child;E!==null;)m|=E.lanes|E.childLanes,S|=E.subtreeFlags,S|=E.flags,E.return=u,E=E.sibling;return u.subtreeFlags|=S,u.childLanes=m,d}function gI(u,d,m){var S=d.pendingProps;switch(Zn(d),d.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Jr(d),null;case 1:return Cn(d.type)&&Ht(),Jr(d),null;case 3:return m=d.stateNode,Vu(),tn(on),tn(Rt),wv(),m.pendingContext&&(m.context=m.pendingContext,m.pendingContext=null),(u===null||u.child===null)&&(pn(d)?fo(d):u===null||u.memoizedState.isDehydrated&&!(d.flags&256)||(d.flags|=1024,Hn!==null&&(ey(Hn),Hn=null))),Gd(u,d),Jr(d),null;case 5:vv(d),m=co(Uu.current);var E=d.type;if(u!==null&&d.stateNode!=null)_p(u,d,E,S,m),u.ref!==d.ref&&(d.flags|=512,d.flags|=2097152);else{if(!S){if(d.stateNode===null)throw Error(o(166));return Jr(d),null}if(u=co(cs.current),pn(d)){if(!_e)throw Error(o(175));u=Yr(d.stateNode,d.type,d.memoizedProps,m,u,d,!Is),d.updateQueue=u,u!==null&&fo(d)}else{var P=xe(E,S,m,u,d);Hd(P,d,!1,!1),d.stateNode=P,ue(P,E,S,m,u)&&fo(d)}d.ref!==null&&(d.flags|=512,d.flags|=2097152)}return Jr(d),null;case 6:if(u&&d.stateNode!=null)bp(u,d,u.memoizedProps,S);else{if(typeof S!="string"&&d.stateNode===null)throw Error(o(166));if(u=co(Uu.current),m=co(cs.current),pn(d)){if(!_e)throw Error(o(176));if(u=d.stateNode,m=d.memoizedProps,(S=Er(u,m,d,!Is))&&(E=Qn,E!==null))switch(E.tag){case 3:oo(E.stateNode.containerInfo,u,m,(E.mode&1)!==0);break;case 5:Io(E.type,E.memoizedProps,E.stateNode,u,m,(E.mode&1)!==0)}S&&fo(d)}else d.stateNode=he(S,u,m,d)}return Jr(d),null;case 13:if(tn(An),S=d.memoizedState,u===null||u.memoizedState!==null&&u.memoizedState.dehydrated!==null){if(an&&xn!==null&&d.mode&1&&!(d.flags&128))hn(),nn(),d.flags|=98560,E=!1;else if(E=pn(d),S!==null&&S.dehydrated!==null){if(u===null){if(!E)throw Error(o(318));if(!_e)throw Error(o(344));if(E=d.memoizedState,E=E!==null?E.dehydrated:null,!E)throw Error(o(317));so(E,d)}else nn(),!(d.flags&128)&&(d.memoizedState=null),d.flags|=4;Jr(d),E=!1}else Hn!==null&&(ey(Hn),Hn=null),E=!0;if(!E)return d.flags&65536?d:null}return d.flags&128?(d.lanes=m,d):(m=S!==null,m!==(u!==null&&u.memoizedState!==null)&&m&&(d.child.flags|=8192,d.mode&1&&(u===null||An.current&1?yr===0&&(yr=3):ny())),d.updateQueue!==null&&(d.flags|=4),Jr(d),null);case 4:return Vu(),Gd(u,d),u===null&&Le(d.stateNode.containerInfo),Jr(d),null;case 10:return hv(d.type._context),Jr(d),null;case 17:return Cn(d.type)&&Ht(),Jr(d),null;case 19:if(tn(An),E=d.memoizedState,E===null)return Jr(d),null;if(S=(d.flags&128)!==0,P=E.rendering,P===null)if(S)qd(E,!1);else{if(yr!==0||u!==null&&u.flags&128)for(u=d.child;u!==null;){if(P=hp(u),P!==null){for(d.flags|=128,qd(E,!1),u=P.updateQueue,u!==null&&(d.updateQueue=u,d.flags|=4),d.subtreeFlags=0,u=m,m=d.child;m!==null;)S=m,E=u,S.flags&=14680066,P=S.alternate,P===null?(S.childLanes=0,S.lanes=E,S.child=null,S.subtreeFlags=0,S.memoizedProps=null,S.memoizedState=null,S.updateQueue=null,S.dependencies=null,S.stateNode=null):(S.childLanes=P.childLanes,S.lanes=P.lanes,S.child=P.child,S.subtreeFlags=0,S.deletions=null,S.memoizedProps=P.memoizedProps,S.memoizedState=P.memoizedState,S.updateQueue=P.updateQueue,S.type=P.type,E=P.dependencies,S.dependencies=E===null?null:{lanes:E.lanes,firstContext:E.firstContext}),m=m.sibling;return Yt(An,An.current&1|2),d.child}u=u.sibling}E.tail!==null&&Mn()>Xv&&(d.flags|=128,S=!0,qd(E,!1),d.lanes=4194304)}else{if(!S)if(u=hp(P),u!==null){if(d.flags|=128,S=!0,u=u.updateQueue,u!==null&&(d.updateQueue=u,d.flags|=4),qd(E,!0),E.tail===null&&E.tailMode==="hidden"&&!P.alternate&&!an)return Jr(d),null}else 2*Mn()-E.renderingStartTime>Xv&&m!==1073741824&&(d.flags|=128,S=!0,qd(E,!1),d.lanes=4194304);E.isBackwards?(P.sibling=d.child,d.child=P):(u=E.last,u!==null?u.sibling=P:d.child=P,E.last=P)}return E.tail!==null?(d=E.tail,E.rendering=d,E.tail=d.sibling,E.renderingStartTime=Mn(),d.sibling=null,u=An.current,Yt(An,S?u&1|2:u&1),d):(Jr(d),null);case 22:case 23:return ty(),m=d.memoizedState!==null,u!==null&&u.memoizedState!==null!==m&&(d.flags|=8192),m&&d.mode&1?zi&1073741824&&(Jr(d),X&&d.subtreeFlags&6&&(d.flags|=8192)):Jr(d),null;case 24:return null;case 25:return null}throw Error(o(156,d.tag))}function mI(u,d){switch(Zn(d),d.tag){case 1:return Cn(d.type)&&Ht(),u=d.flags,u&65536?(d.flags=u&-65537|128,d):null;case 3:return Vu(),tn(on),tn(Rt),wv(),u=d.flags,u&65536&&!(u&128)?(d.flags=u&-65537|128,d):null;case 5:return vv(d),null;case 13:if(tn(An),u=d.memoizedState,u!==null&&u.dehydrated!==null){if(d.alternate===null)throw Error(o(340));nn()}return u=d.flags,u&65536?(d.flags=u&-65537|128,d):null;case 19:return tn(An),null;case 4:return Vu(),null;case 10:return hv(d.type._context),null;case 22:case 23:return ty(),null;case 24:return null;default:return null}}var Sp=!1,ei=!1,vI=typeof WeakSet=="function"?WeakSet:Set,Xe=null;function Hu(u,d){var m=u.ref;if(m!==null)if(typeof m=="function")try{m(null)}catch(S){kn(u,d,S)}else m.current=null}function Fv(u,d,m){try{m()}catch(S){kn(u,d,S)}}var z2=!1;function yI(u,d){for(K(u.containerInfo),Xe=d;Xe!==null;)if(u=Xe,d=u.child,(u.subtreeFlags&1028)!==0&&d!==null)d.return=u,Xe=d;else for(;Xe!==null;){u=Xe;try{var m=u.alternate;if(u.flags&1024)switch(u.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var S=m.memoizedProps,E=m.memoizedState,P=u.stateNode,I=P.getSnapshotBeforeUpdate(u.elementType===u.type?S:Ds(u.type,S),E);P.__reactInternalSnapshotBeforeUpdate=I}break;case 3:X&&rt(u.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(o(163))}}catch(J){kn(u,u.return,J)}if(d=u.sibling,d!==null){d.return=u.return,Xe=d;break}Xe=u.return}return m=z2,z2=!1,m}function Yd(u,d,m){var S=d.updateQueue;if(S=S!==null?S.lastEffect:null,S!==null){var E=S=S.next;do{if((E.tag&u)===u){var P=E.destroy;E.destroy=void 0,P!==void 0&&Fv(d,m,P)}E=E.next}while(E!==S)}}function Cp(u,d){if(d=d.updateQueue,d=d!==null?d.lastEffect:null,d!==null){var m=d=d.next;do{if((m.tag&u)===u){var S=m.create;m.destroy=S()}m=m.next}while(m!==d)}}function Bv(u){var d=u.ref;if(d!==null){var m=u.stateNode;switch(u.tag){case 5:u=G(m);break;default:u=m}typeof d=="function"?d(u):d.current=u}}function U2(u){var d=u.alternate;d!==null&&(u.alternate=null,U2(d)),u.child=null,u.deletions=null,u.sibling=null,u.tag===5&&(d=u.stateNode,d!==null&&ve(d)),u.stateNode=null,u.return=null,u.dependencies=null,u.memoizedProps=null,u.memoizedState=null,u.pendingProps=null,u.stateNode=null,u.updateQueue=null}function V2(u){return u.tag===5||u.tag===3||u.tag===4}function W2(u){e:for(;;){for(;u.sibling===null;){if(u.return===null||V2(u.return))return null;u=u.return}for(u.sibling.return=u.return,u=u.sibling;u.tag!==5&&u.tag!==6&&u.tag!==18;){if(u.flags&2||u.child===null||u.tag===4)continue e;u.child.return=u,u=u.child}if(!(u.flags&2))return u.stateNode}}function $v(u,d,m){var S=u.tag;if(S===5||S===6)u=u.stateNode,d?pe(m,u,d):wt(m,u);else if(S!==4&&(u=u.child,u!==null))for($v(u,d,m),u=u.sibling;u!==null;)$v(u,d,m),u=u.sibling}function zv(u,d,m){var S=u.tag;if(S===5||S===6)u=u.stateNode,d?Te(m,u,d):st(m,u);else if(S!==4&&(u=u.child,u!==null))for(zv(u,d,m),u=u.sibling;u!==null;)zv(u,d,m),u=u.sibling}var Br=null,Fs=!1;function po(u,d,m){for(m=m.child;m!==null;)Uv(u,d,m),m=m.sibling}function Uv(u,d,m){if(or&&typeof or.onCommitFiberUnmount=="function")try{or.onCommitFiberUnmount(La,m)}catch{}switch(m.tag){case 5:ei||Hu(m,d);case 6:if(X){var S=Br,E=Fs;Br=null,po(u,d,m),Br=S,Fs=E,Br!==null&&(Fs?gt(Br,m.stateNode):be(Br,m.stateNode))}else po(u,d,m);break;case 18:X&&Br!==null&&(Fs?Xn(Br,m.stateNode):ci(Br,m.stateNode));break;case 4:X?(S=Br,E=Fs,Br=m.stateNode.containerInfo,Fs=!0,po(u,d,m),Br=S,Fs=E):(ye&&(S=m.stateNode.containerInfo,E=ht(S),ut(S,E)),po(u,d,m));break;case 0:case 11:case 14:case 15:if(!ei&&(S=m.updateQueue,S!==null&&(S=S.lastEffect,S!==null))){E=S=S.next;do{var P=E,I=P.destroy;P=P.tag,I!==void 0&&(P&2||P&4)&&Fv(m,d,I),E=E.next}while(E!==S)}po(u,d,m);break;case 1:if(!ei&&(Hu(m,d),S=m.stateNode,typeof S.componentWillUnmount=="function"))try{S.props=m.memoizedProps,S.state=m.memoizedState,S.componentWillUnmount()}catch(J){kn(m,d,J)}po(u,d,m);break;case 21:po(u,d,m);break;case 22:m.mode&1?(ei=(S=ei)||m.memoizedState!==null,po(u,d,m),ei=S):po(u,d,m);break;default:po(u,d,m)}}function H2(u){var d=u.updateQueue;if(d!==null){u.updateQueue=null;var m=u.stateNode;m===null&&(m=u.stateNode=new vI),d.forEach(function(S){var E=RI.bind(null,u,S);m.has(S)||(m.add(S),S.then(E,E))})}}function Bs(u,d){var m=d.deletions;if(m!==null)for(var S=0;S<m.length;S++){var E=m[S];try{var P=u,I=d;if(X){var J=I;e:for(;J!==null;){switch(J.tag){case 5:Br=J.stateNode,Fs=!1;break e;case 3:Br=J.stateNode.containerInfo,Fs=!0;break e;case 4:Br=J.stateNode.containerInfo,Fs=!0;break e}J=J.return}if(Br===null)throw Error(o(160));Uv(P,I,E),Br=null,Fs=!1}else Uv(P,I,E);var oe=E.alternate;oe!==null&&(oe.return=null),E.return=null}catch(Pe){kn(E,d,Pe)}}if(d.subtreeFlags&12854)for(d=d.child;d!==null;)G2(d,u),d=d.sibling}function G2(u,d){var m=u.alternate,S=u.flags;switch(u.tag){case 0:case 11:case 14:case 15:if(Bs(d,u),go(u),S&4){try{Yd(3,u,u.return),Cp(3,u)}catch(We){kn(u,u.return,We)}try{Yd(5,u,u.return)}catch(We){kn(u,u.return,We)}}break;case 1:Bs(d,u),go(u),S&512&&m!==null&&Hu(m,m.return);break;case 5:if(Bs(d,u),go(u),S&512&&m!==null&&Hu(m,m.return),X){if(u.flags&32){var E=u.stateNode;try{nt(E)}catch(We){kn(u,u.return,We)}}if(S&4&&(E=u.stateNode,E!=null)){var P=u.memoizedProps;if(m=m!==null?m.memoizedProps:P,S=u.type,d=u.updateQueue,u.updateQueue=null,d!==null)try{Re(E,d,S,m,P,u)}catch(We){kn(u,u.return,We)}}}break;case 6:if(Bs(d,u),go(u),S&4&&X){if(u.stateNode===null)throw Error(o(162));E=u.stateNode,P=u.memoizedProps,m=m!==null?m.memoizedProps:P;try{At(E,m,P)}catch(We){kn(u,u.return,We)}}break;case 3:if(Bs(d,u),go(u),S&4){if(X&&_e&&m!==null&&m.memoizedState.isDehydrated)try{Or(d.containerInfo)}catch(We){kn(u,u.return,We)}if(ye){E=d.containerInfo,P=d.pendingChildren;try{ut(E,P)}catch(We){kn(u,u.return,We)}}}break;case 4:if(Bs(d,u),go(u),S&4&&ye){P=u.stateNode,E=P.containerInfo,P=P.pendingChildren;try{ut(E,P)}catch(We){kn(u,u.return,We)}}break;case 13:Bs(d,u),go(u),E=u.child,E.flags&8192&&(P=E.memoizedState!==null,E.stateNode.isHidden=P,!P||E.alternate!==null&&E.alternate.memoizedState!==null||(Kv=Mn())),S&4&&H2(u);break;case 22:var I=m!==null&&m.memoizedState!==null;if(u.mode&1?(ei=(m=ei)||I,Bs(d,u),ei=m):Bs(d,u),go(u),S&8192){if(m=u.memoizedState!==null,(u.stateNode.isHidden=m)&&!I&&u.mode&1)for(Xe=u,S=u.child;S!==null;){for(d=Xe=S;Xe!==null;){I=Xe;var J=I.child;switch(I.tag){case 0:case 11:case 14:case 15:Yd(4,I,I.return);break;case 1:Hu(I,I.return);var oe=I.stateNode;if(typeof oe.componentWillUnmount=="function"){var Pe=I,Qe=I.return;try{var Tt=Pe;oe.props=Tt.memoizedProps,oe.state=Tt.memoizedState,oe.componentWillUnmount()}catch(We){kn(Pe,Qe,We)}}break;case 5:Hu(I,I.return);break;case 22:if(I.memoizedState!==null){K2(d);continue}}J!==null?(J.return=I,Xe=J):K2(d)}S=S.sibling}if(X){e:if(S=null,X)for(d=u;;){if(d.tag===5){if(S===null){S=d;try{E=d.stateNode,m?lt(E):xt(d.stateNode,d.memoizedProps)}catch(We){kn(u,u.return,We)}}}else if(d.tag===6){if(S===null)try{P=d.stateNode,m?Ke(P):Lt(P,d.memoizedProps)}catch(We){kn(u,u.return,We)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===u)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===u)break e;for(;d.sibling===null;){if(d.return===null||d.return===u)break e;S===d&&(S=null),d=d.return}S===d&&(S=null),d.sibling.return=d.return,d=d.sibling}}}break;case 19:Bs(d,u),go(u),S&4&&H2(u);break;case 21:break;default:Bs(d,u),go(u)}}function go(u){var d=u.flags;if(d&2){try{if(X){e:{for(var m=u.return;m!==null;){if(V2(m)){var S=m;break e}m=m.return}throw Error(o(160))}switch(S.tag){case 5:var E=S.stateNode;S.flags&32&&(nt(E),S.flags&=-33);var P=W2(u);zv(u,P,E);break;case 3:case 4:var I=S.stateNode.containerInfo,J=W2(u);$v(u,J,I);break;default:throw Error(o(161))}}}catch(oe){kn(u,u.return,oe)}u.flags&=-3}d&4096&&(u.flags&=-4097)}function wI(u,d,m){Xe=u,q2(u)}function q2(u,d,m){for(var S=(u.mode&1)!==0;Xe!==null;){var E=Xe,P=E.child;if(E.tag===22&&S){var I=E.memoizedState!==null||Sp;if(!I){var J=E.alternate,oe=J!==null&&J.memoizedState!==null||ei;J=Sp;var Pe=ei;if(Sp=I,(ei=oe)&&!Pe)for(Xe=E;Xe!==null;)I=Xe,oe=I.child,I.tag===22&&I.memoizedState!==null?X2(E):oe!==null?(oe.return=I,Xe=oe):X2(E);for(;P!==null;)Xe=P,q2(P),P=P.sibling;Xe=E,Sp=J,ei=Pe}Y2(u)}else E.subtreeFlags&8772&&P!==null?(P.return=E,Xe=P):Y2(u)}}function Y2(u){for(;Xe!==null;){var d=Xe;if(d.flags&8772){var m=d.alternate;try{if(d.flags&8772)switch(d.tag){case 0:case 11:case 15:ei||Cp(5,d);break;case 1:var S=d.stateNode;if(d.flags&4&&!ei)if(m===null)S.componentDidMount();else{var E=d.elementType===d.type?m.memoizedProps:Ds(d.type,m.memoizedProps);S.componentDidUpdate(E,m.memoizedState,S.__reactInternalSnapshotBeforeUpdate)}var P=d.updateQueue;P!==null&&ZS(d,P,S);break;case 3:var I=d.updateQueue;if(I!==null){if(m=null,d.child!==null)switch(d.child.tag){case 5:m=G(d.child.stateNode);break;case 1:m=d.child.stateNode}ZS(d,I,m)}break;case 5:var J=d.stateNode;m===null&&d.flags&4&&Ye(J,d.type,d.memoizedProps,d);break;case 6:break;case 4:break;case 12:break;case 13:if(_e&&d.memoizedState===null){var oe=d.alternate;if(oe!==null){var Pe=oe.memoizedState;if(Pe!==null){var Qe=Pe.dehydrated;Qe!==null&&pr(Qe)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(o(163))}ei||d.flags&512&&Bv(d)}catch(Tt){kn(d,d.return,Tt)}}if(d===u){Xe=null;break}if(m=d.sibling,m!==null){m.return=d.return,Xe=m;break}Xe=d.return}}function K2(u){for(;Xe!==null;){var d=Xe;if(d===u){Xe=null;break}var m=d.sibling;if(m!==null){m.return=d.return,Xe=m;break}Xe=d.return}}function X2(u){for(;Xe!==null;){var d=Xe;try{switch(d.tag){case 0:case 11:case 15:var m=d.return;try{Cp(4,d)}catch(oe){kn(d,m,oe)}break;case 1:var S=d.stateNode;if(typeof S.componentDidMount=="function"){var E=d.return;try{S.componentDidMount()}catch(oe){kn(d,E,oe)}}var P=d.return;try{Bv(d)}catch(oe){kn(d,P,oe)}break;case 5:var I=d.return;try{Bv(d)}catch(oe){kn(d,I,oe)}}}catch(oe){kn(d,d.return,oe)}if(d===u){Xe=null;break}var J=d.sibling;if(J!==null){J.return=d.return,Xe=J;break}Xe=d.return}}var kp=0,Ep=1,Rp=2,Tp=3,Pp=4;if(typeof Symbol=="function"&&Symbol.for){var Kd=Symbol.for;kp=Kd("selector.component"),Ep=Kd("selector.has_pseudo_class"),Rp=Kd("selector.role"),Tp=Kd("selector.test_id"),Pp=Kd("selector.text")}function Vv(u){var d=at(u);if(d!=null){if(typeof d.memoizedProps["data-testname"]!="string")throw Error(o(364));return d}if(u=Ie(u),u===null)throw Error(o(362));return u.stateNode.current}function Wv(u,d){switch(d.$$typeof){case kp:if(u.type===d.value)return!0;break;case Ep:e:{d=d.value,u=[u,0];for(var m=0;m<u.length;){var S=u[m++],E=u[m++],P=d[E];if(S.tag!==5||!Oe(S)){for(;P!=null&&Wv(S,P);)E++,P=d[E];if(E===d.length){d=!0;break e}else for(S=S.child;S!==null;)u.push(S,E),S=S.sibling}}d=!1}return d;case Rp:if(u.tag===5&&Ne(u.stateNode,d.value))return!0;break;case Pp:if((u.tag===5||u.tag===6)&&(u=Ce(u),u!==null&&0<=u.indexOf(d.value)))return!0;break;case Tp:if(u.tag===5&&(u=u.memoizedProps["data-testname"],typeof u=="string"&&u.toLowerCase()===d.value.toLowerCase()))return!0;break;default:throw Error(o(365))}return!1}function Hv(u){switch(u.$$typeof){case kp:return"<"+(M(u.value)||"Unknown")+">";case Ep:return":has("+(Hv(u)||"")+")";case Rp:return'[role="'+u.value+'"]';case Pp:return'"'+u.value+'"';case Tp:return'[data-testname="'+u.value+'"]';default:throw Error(o(365))}}function Z2(u,d){var m=[];u=[u,0];for(var S=0;S<u.length;){var E=u[S++],P=u[S++],I=d[P];if(E.tag!==5||!Oe(E)){for(;I!=null&&Wv(E,I);)P++,I=d[P];if(P===d.length)m.push(E);else for(E=E.child;E!==null;)u.push(E,P),E=E.sibling}}return m}function Gv(u,d){if(!Ue)throw Error(o(363));u=Vv(u),u=Z2(u,d),d=[],u=Array.from(u);for(var m=0;m<u.length;){var S=u[m++];if(S.tag===5)Oe(S)||d.push(S.stateNode);else for(S=S.child;S!==null;)u.push(S),S=S.sibling}return d}var xI=Math.ceil,Lp=a.ReactCurrentDispatcher,qv=a.ReactCurrentOwner,er=a.ReactCurrentBatchConfig,It=0,Pr=null,lr=null,$r=0,zi=0,Gu=di(0),yr=0,Xd=null,Vl=0,Mp=0,Yv=0,Zd=null,Ri=null,Kv=0,Xv=1/0,qo=null;function qu(){Xv=Mn()+500}var Ap=!1,Zv=null,Ia=null,Np=!1,Oa=null,jp=0,Qd=0,Qv=null,Ip=-1,Op=0;function ti(){return It&6?Mn():Ip!==-1?Ip:Ip=Mn()}function Da(u){return u.mode&1?It&2&&$r!==0?$r&-$r:lo.transition!==null?(Op===0&&(Op=ka()),Op):(u=Vt,u!==0?u:fe()):1}function hs(u,d,m,S){if(50<Qd)throw Qd=0,Qv=null,Error(o(185));Do(u,m,S),(!(It&2)||u!==Pr)&&(u===Pr&&(!(It&2)&&(Mp|=m),yr===4&&Fa(u,$r)),Ti(u,S),m===1&&It===0&&!(d.mode&1)&&(qu(),Bo&&Q()))}function Ti(u,d){var m=u.callbackNode;Sa(u,d);var S=os(u,u===Pr?$r:0);if(S===0)m!==null&&Ra(m),u.callbackNode=null,u.callbackPriority=0;else if(d=S&-S,u.callbackPriority!==d){if(m!=null&&Ra(m),d===1)u.tag===0?H(J2.bind(null,u)):F(J2.bind(null,u)),Ae?De(function(){!(It&6)&&Q()}):Ea(Ta,Q),m=null;else{switch(Du(S)){case 1:m=Ta;break;case 4:m=Fu;break;case 16:m=Pa;break;case 536870912:m=ls;break;default:m=Pa}m=lC(m,Q2.bind(null,u))}u.callbackPriority=d,u.callbackNode=m}}function Q2(u,d){if(Ip=-1,Op=0,It&6)throw Error(o(327));var m=u.callbackNode;if(Gl()&&u.callbackNode!==m)return null;var S=os(u,u===Pr?$r:0);if(S===0)return null;if(S&30||S&u.expiredLanes||d)d=Dp(u,S);else{d=S;var E=It;It|=2;var P=nC();(Pr!==u||$r!==d)&&(qo=null,qu(),Wl(u,d));do try{SI();break}catch(J){tC(u,J)}while(1);dv(),Lp.current=P,It=E,lr!==null?d=0:(Pr=null,$r=0,d=yr)}if(d!==0){if(d===2&&(E=Ca(u),E!==0&&(S=E,d=Jv(u,E))),d===1)throw m=Xd,Wl(u,0),Fa(u,S),Ti(u,Mn()),m;if(d===6)Fa(u,S);else{if(E=u.current.alternate,!(S&30)&&!_I(E)&&(d=Dp(u,S),d===2&&(P=Ca(u),P!==0&&(S=P,d=Jv(u,P))),d===1))throw m=Xd,Wl(u,0),Fa(u,S),Ti(u,Mn()),m;switch(u.finishedWork=E,u.finishedLanes=S,d){case 0:case 1:throw Error(o(345));case 2:Hl(u,Ri,qo);break;case 3:if(Fa(u,S),(S&130023424)===S&&(d=Kv+500-Mn(),10<d)){if(os(u,0)!==0)break;if(E=u.suspendedLanes,(E&S)!==S){ti(),u.pingedLanes|=u.suspendedLanes&E;break}u.timeoutHandle=ge(Hl.bind(null,u,Ri,qo),d);break}Hl(u,Ri,qo);break;case 4:if(Fa(u,S),(S&4194240)===S)break;for(d=u.eventTimes,E=-1;0<S;){var I=31-gr(S);P=1<<I,I=d[I],I>E&&(E=I),S&=~P}if(S=E,S=Mn()-S,S=(120>S?120:480>S?480:1080>S?1080:1920>S?1920:3e3>S?3e3:4320>S?4320:1960*xI(S/1960))-S,10<S){u.timeoutHandle=ge(Hl.bind(null,u,Ri,qo),S);break}Hl(u,Ri,qo);break;case 5:Hl(u,Ri,qo);break;default:throw Error(o(329))}}}return Ti(u,Mn()),u.callbackNode===m?Q2.bind(null,u):null}function Jv(u,d){var m=Zd;return u.current.memoizedState.isDehydrated&&(Wl(u,d).flags|=256),u=Dp(u,d),u!==2&&(d=Ri,Ri=m,d!==null&&ey(d)),u}function ey(u){Ri===null?Ri=u:Ri.push.apply(Ri,u)}function _I(u){for(var d=u;;){if(d.flags&16384){var m=d.updateQueue;if(m!==null&&(m=m.stores,m!==null))for(var S=0;S<m.length;S++){var E=m[S],P=E.getSnapshot;E=E.value;try{if(!mr(P(),E))return!1}catch{return!1}}}if(m=d.child,d.subtreeFlags&16384&&m!==null)m.return=d,d=m;else{if(d===u)break;for(;d.sibling===null;){if(d.return===null||d.return===u)return!0;d=d.return}d.sibling.return=d.return,d=d.sibling}}return!0}function Fa(u,d){for(d&=~Yv,d&=~Mp,u.suspendedLanes|=d,u.pingedLanes&=~d,u=u.expirationTimes;0<d;){var m=31-gr(d),S=1<<m;u[m]=-1,d&=~S}}function J2(u){if(It&6)throw Error(o(327));Gl();var d=os(u,0);if(!(d&1))return Ti(u,Mn()),null;var m=Dp(u,d);if(u.tag!==0&&m===2){var S=Ca(u);S!==0&&(d=S,m=Jv(u,S))}if(m===1)throw m=Xd,Wl(u,0),Fa(u,d),Ti(u,Mn()),m;if(m===6)throw Error(o(345));return u.finishedWork=u.current.alternate,u.finishedLanes=d,Hl(u,Ri,qo),Ti(u,Mn()),null}function eC(u){Oa!==null&&Oa.tag===0&&!(It&6)&&Gl();var d=It;It|=1;var m=er.transition,S=Vt;try{if(er.transition=null,Vt=1,u)return u()}finally{Vt=S,er.transition=m,It=d,!(It&6)&&Q()}}function ty(){zi=Gu.current,tn(Gu)}function Wl(u,d){u.finishedWork=null,u.finishedLanes=0;var m=u.timeoutHandle;if(m!==ae&&(u.timeoutHandle=ae,we(m)),lr!==null)for(m=lr.return;m!==null;){var S=m;switch(Zn(S),S.tag){case 1:S=S.type.childContextTypes,S!=null&&Ht();break;case 3:Vu(),tn(on),tn(Rt),wv();break;case 5:vv(S);break;case 4:Vu();break;case 13:tn(An);break;case 19:tn(An);break;case 10:hv(S.type._context);break;case 22:case 23:ty()}m=m.return}if(Pr=u,lr=u=Ba(u.current,null),$r=zi=d,yr=0,Xd=null,Yv=Mp=Vl=0,Ri=Zd=null,zl!==null){for(d=0;d<zl.length;d++)if(m=zl[d],S=m.interleaved,S!==null){m.interleaved=null;var E=S.next,P=m.pending;if(P!==null){var I=P.next;P.next=E,S.next=I}m.pending=S}zl=null}return u}function tC(u,d){do{var m=lr;try{if(dv(),fp.current=vp,pp){for(var S=Nn.memoizedState;S!==null;){var E=S.queue;E!==null&&(E.pending=null),S=S.next}pp=!1}if(Ul=0,Tr=vr=Nn=null,zd=!1,Ud=0,qv.current=null,m===null||m.return===null){yr=1,Xd=d,lr=null;break}e:{var P=u,I=m.return,J=m,oe=d;if(d=$r,J.flags|=32768,oe!==null&&typeof oe=="object"&&typeof oe.then=="function"){var Pe=oe,Qe=J,Tt=Qe.tag;if(!(Qe.mode&1)&&(Tt===0||Tt===11||Tt===15)){var We=Qe.alternate;We?(Qe.updateQueue=We.updateQueue,Qe.memoizedState=We.memoizedState,Qe.lanes=We.lanes):(Qe.updateQueue=null,Qe.memoizedState=null)}var _n=E2(I);if(_n!==null){_n.flags&=-257,R2(_n,I,J,P,d),_n.mode&1&&k2(P,Pe,d),d=_n,oe=Pe;var gn=d.updateQueue;if(gn===null){var Pi=new Set;Pi.add(oe),d.updateQueue=Pi}else gn.add(oe);break e}else{if(!(d&1)){k2(P,Pe,d),ny();break e}oe=Error(o(426))}}else if(an&&J.mode&1){var Yo=E2(I);if(Yo!==null){!(Yo.flags&65536)&&(Yo.flags|=256),R2(Yo,I,J,P,d),ar(Wu(oe,J));break e}}P=oe=Wu(oe,J),yr!==4&&(yr=2),Zd===null?Zd=[P]:Zd.push(P),P=I;do{switch(P.tag){case 3:P.flags|=65536,d&=-d,P.lanes|=d;var se=S2(P,oe,d);XS(P,se);break e;case 1:J=oe;var ee=P.type,ce=P.stateNode;if(!(P.flags&128)&&(typeof ee.getDerivedStateFromError=="function"||ce!==null&&typeof ce.componentDidCatch=="function"&&(Ia===null||!Ia.has(ce)))){P.flags|=65536,d&=-d,P.lanes|=d;var He=C2(P,J,d);XS(P,He);break e}}P=P.return}while(P!==null)}iC(m)}catch(ct){d=ct,lr===m&&m!==null&&(lr=m=m.return);continue}break}while(1)}function nC(){var u=Lp.current;return Lp.current=vp,u===null?vp:u}function ny(){(yr===0||yr===3||yr===2)&&(yr=4),Pr===null||!(Vl&268435455)&&!(Mp&268435455)||Fa(Pr,$r)}function Dp(u,d){var m=It;It|=2;var S=nC();(Pr!==u||$r!==d)&&(qo=null,Wl(u,d));do try{bI();break}catch(E){tC(u,E)}while(1);if(dv(),It=m,Lp.current=S,lr!==null)throw Error(o(261));return Pr=null,$r=0,yr}function bI(){for(;lr!==null;)rC(lr)}function SI(){for(;lr!==null&&!Id();)rC(lr)}function rC(u){var d=aC(u.alternate,u,zi);u.memoizedProps=u.pendingProps,d===null?iC(u):lr=d,qv.current=null}function iC(u){var d=u;do{var m=d.alternate;if(u=d.return,d.flags&32768){if(m=mI(m,d),m!==null){m.flags&=32767,lr=m;return}if(u!==null)u.flags|=32768,u.subtreeFlags=0,u.deletions=null;else{yr=6,lr=null;return}}else if(m=gI(m,d,zi),m!==null){lr=m;return}if(d=d.sibling,d!==null){lr=d;return}lr=d=u}while(d!==null);yr===0&&(yr=5)}function Hl(u,d,m){var S=Vt,E=er.transition;try{er.transition=null,Vt=1,CI(u,d,m,S)}finally{er.transition=E,Vt=S}return null}function CI(u,d,m,S){do Gl();while(Oa!==null);if(It&6)throw Error(o(327));m=u.finishedWork;var E=u.finishedLanes;if(m===null)return null;if(u.finishedWork=null,u.finishedLanes=0,m===u.current)throw Error(o(177));u.callbackNode=null,u.callbackPriority=0;var P=m.lanes|m.childLanes;if(jd(u,P),u===Pr&&(lr=Pr=null,$r=0),!(m.subtreeFlags&2064)&&!(m.flags&2064)||Np||(Np=!0,lC(Pa,function(){return Gl(),null})),P=(m.flags&15990)!==0,m.subtreeFlags&15990||P){P=er.transition,er.transition=null;var I=Vt;Vt=1;var J=It;It|=4,qv.current=null,yI(u,m),G2(m,u),Y(u.containerInfo),u.current=m,wI(m),Od(),It=J,Vt=I,er.transition=P}else u.current=m;if(Np&&(Np=!1,Oa=u,jp=E),P=u.pendingLanes,P===0&&(Ia=null),Bu(m.stateNode),Ti(u,Mn()),d!==null)for(S=u.onRecoverableError,m=0;m<d.length;m++)E=d[m],S(E.value,{componentStack:E.stack,digest:E.digest});if(Ap)throw Ap=!1,u=Zv,Zv=null,u;return jp&1&&u.tag!==0&&Gl(),P=u.pendingLanes,P&1?u===Qv?Qd++:(Qd=0,Qv=u):Qd=0,Q(),null}function Gl(){if(Oa!==null){var u=Du(jp),d=er.transition,m=Vt;try{if(er.transition=null,Vt=16>u?16:u,Oa===null)var S=!1;else{if(u=Oa,Oa=null,jp=0,It&6)throw Error(o(331));var E=It;for(It|=4,Xe=u.current;Xe!==null;){var P=Xe,I=P.child;if(Xe.flags&16){var J=P.deletions;if(J!==null){for(var oe=0;oe<J.length;oe++){var Pe=J[oe];for(Xe=Pe;Xe!==null;){var Qe=Xe;switch(Qe.tag){case 0:case 11:case 15:Yd(8,Qe,P)}var Tt=Qe.child;if(Tt!==null)Tt.return=Qe,Xe=Tt;else for(;Xe!==null;){Qe=Xe;var We=Qe.sibling,_n=Qe.return;if(U2(Qe),Qe===Pe){Xe=null;break}if(We!==null){We.return=_n,Xe=We;break}Xe=_n}}}var gn=P.alternate;if(gn!==null){var Pi=gn.child;if(Pi!==null){gn.child=null;do{var Yo=Pi.sibling;Pi.sibling=null,Pi=Yo}while(Pi!==null)}}Xe=P}}if(P.subtreeFlags&2064&&I!==null)I.return=P,Xe=I;else e:for(;Xe!==null;){if(P=Xe,P.flags&2048)switch(P.tag){case 0:case 11:case 15:Yd(9,P,P.return)}var se=P.sibling;if(se!==null){se.return=P.return,Xe=se;break e}Xe=P.return}}var ee=u.current;for(Xe=ee;Xe!==null;){I=Xe;var ce=I.child;if(I.subtreeFlags&2064&&ce!==null)ce.return=I,Xe=ce;else e:for(I=ee;Xe!==null;){if(J=Xe,J.flags&2048)try{switch(J.tag){case 0:case 11:case 15:Cp(9,J)}}catch(ct){kn(J,J.return,ct)}if(J===I){Xe=null;break e}var He=J.sibling;if(He!==null){He.return=J.return,Xe=He;break e}Xe=J.return}}if(It=E,Q(),or&&typeof or.onPostCommitFiberRoot=="function")try{or.onPostCommitFiberRoot(La,u)}catch{}S=!0}return S}finally{Vt=m,er.transition=d}}return!1}function sC(u,d,m){d=Wu(m,d),d=S2(u,d,1),u=ja(u,d,1),d=ti(),u!==null&&(Do(u,1,d),Ti(u,d))}function kn(u,d,m){if(u.tag===3)sC(u,u,m);else for(;d!==null;){if(d.tag===3){sC(d,u,m);break}else if(d.tag===1){var S=d.stateNode;if(typeof d.type.getDerivedStateFromError=="function"||typeof S.componentDidCatch=="function"&&(Ia===null||!Ia.has(S))){u=Wu(m,u),u=C2(d,u,1),d=ja(d,u,1),u=ti(),d!==null&&(Do(d,1,u),Ti(d,u));break}}d=d.return}}function kI(u,d,m){var S=u.pingCache;S!==null&&S.delete(d),d=ti(),u.pingedLanes|=u.suspendedLanes&m,Pr===u&&($r&m)===m&&(yr===4||yr===3&&($r&130023424)===$r&&500>Mn()-Kv?Wl(u,0):Yv|=m),Ti(u,d)}function oC(u,d){d===0&&(u.mode&1?(d=ki,ki<<=1,!(ki&130023424)&&(ki=4194304)):d=1);var m=ti();u=uo(u,d),u!==null&&(Do(u,d,m),Ti(u,m))}function EI(u){var d=u.memoizedState,m=0;d!==null&&(m=d.retryLane),oC(u,m)}function RI(u,d){var m=0;switch(u.tag){case 13:var S=u.stateNode,E=u.memoizedState;E!==null&&(m=E.retryLane);break;case 19:S=u.stateNode;break;default:throw Error(o(314))}S!==null&&S.delete(d),oC(u,m)}var aC;aC=function(u,d,m){if(u!==null)if(u.memoizedProps!==d.pendingProps||on.current)Ei=!0;else{if(!(u.lanes&m)&&!(d.flags&128))return Ei=!1,pI(u,d,m);Ei=!!(u.flags&131072)}else Ei=!1,an&&d.flags&1048576&&Wt(d,ie,d.index);switch(d.lanes=0,d.tag){case 2:var S=d.type;xp(u,d),u=d.pendingProps;var E=Vn(d,Rt.current);zu(d,m),E=bv(null,d,S,u,E,m);var P=Sv();return d.flags|=1,typeof E=="object"&&E!==null&&typeof E.render=="function"&&E.$$typeof===void 0?(d.tag=1,d.memoizedState=null,d.updateQueue=null,Cn(S)?(P=!0,Ci(d)):P=!1,d.memoizedState=E.state!==null&&E.state!==void 0?E.state:null,gv(d),E.updater=yp,d.stateNode=E,E._reactInternals=d,Pv(d,S,u,m),d=Nv(null,d,S,!0,P,m)):(d.tag=0,an&&P&&Wn(d),pi(null,d,E,m),d=d.child),d;case 16:S=d.elementType;e:{switch(xp(u,d),u=d.pendingProps,E=S._init,S=E(S._payload),d.type=S,E=d.tag=PI(S),u=Ds(S,u),E){case 0:d=Av(null,d,S,u,m);break e;case 1:d=N2(null,d,S,u,m);break e;case 11:d=T2(null,d,S,u,m);break e;case 14:d=P2(null,d,S,Ds(S.type,u),m);break e}throw Error(o(306,S,""))}return d;case 0:return S=d.type,E=d.pendingProps,E=d.elementType===S?E:Ds(S,E),Av(u,d,S,E,m);case 1:return S=d.type,E=d.pendingProps,E=d.elementType===S?E:Ds(S,E),N2(u,d,S,E,m);case 3:e:{if(j2(d),u===null)throw Error(o(387));S=d.pendingProps,P=d.memoizedState,E=P.element,KS(u,d),dp(d,S,null,m);var I=d.memoizedState;if(S=I.element,_e&&P.isDehydrated)if(P={element:S,isDehydrated:!1,cache:I.cache,pendingSuspenseBoundaries:I.pendingSuspenseBoundaries,transitions:I.transitions},d.updateQueue.baseState=P,d.memoizedState=P,d.flags&256){E=Wu(Error(o(423)),d),d=I2(u,d,S,m,E);break e}else if(S!==E){E=Wu(Error(o(424)),d),d=I2(u,d,S,m,E);break e}else for(_e&&(xn=zn(d.stateNode.containerInfo),Qn=d,an=!0,Hn=null,Is=!1),m=Fd(d,null,S,m),d.child=m;m;)m.flags=m.flags&-3|4096,m=m.sibling;else{if(nn(),S===E){d=Go(u,d,m);break e}pi(u,d,S,m)}d=d.child}return d;case 5:return QS(d),u===null&&Bl(d),S=d.type,E=d.pendingProps,P=u!==null?u.memoizedProps:null,I=E.children,qe(S,E)?I=null:P!==null&&qe(S,P)&&(d.flags|=32),A2(u,d),pi(u,d,I,m),d.child;case 6:return u===null&&Bl(d),null;case 13:return O2(u,d,m);case 4:return mv(d,d.stateNode.containerInfo),S=d.pendingProps,u===null?d.child=Wo(d,null,S,m):pi(u,d,S,m),d.child;case 11:return S=d.type,E=d.pendingProps,E=d.elementType===S?E:Ds(S,E),T2(u,d,S,E,m);case 7:return pi(u,d,d.pendingProps,m),d.child;case 8:return pi(u,d,d.pendingProps.children,m),d.child;case 12:return pi(u,d,d.pendingProps.children,m),d.child;case 10:e:{if(S=d.type._context,E=d.pendingProps,P=d.memoizedProps,I=E.value,qS(d,S,I),P!==null)if(mr(P.value,I)){if(P.children===E.children&&!on.current){d=Go(u,d,m);break e}}else for(P=d.child,P!==null&&(P.return=d);P!==null;){var J=P.dependencies;if(J!==null){I=P.child;for(var oe=J.firstContext;oe!==null;){if(oe.context===S){if(P.tag===1){oe=Ho(-1,m&-m),oe.tag=2;var Pe=P.updateQueue;if(Pe!==null){Pe=Pe.shared;var Qe=Pe.pending;Qe===null?oe.next=oe:(oe.next=Qe.next,Qe.next=oe),Pe.pending=oe}}P.lanes|=m,oe=P.alternate,oe!==null&&(oe.lanes|=m),fv(P.return,m,d),J.lanes|=m;break}oe=oe.next}}else if(P.tag===10)I=P.type===d.type?null:P.child;else if(P.tag===18){if(I=P.return,I===null)throw Error(o(341));I.lanes|=m,J=I.alternate,J!==null&&(J.lanes|=m),fv(I,m,d),I=P.sibling}else I=P.child;if(I!==null)I.return=P;else for(I=P;I!==null;){if(I===d){I=null;break}if(P=I.sibling,P!==null){P.return=I.return,I=P;break}I=I.return}P=I}pi(u,d,E.children,m),d=d.child}return d;case 9:return E=d.type,S=d.pendingProps.children,zu(d,m),E=us(E),S=S(E),d.flags|=1,pi(u,d,S,m),d.child;case 14:return S=d.type,E=Ds(S,d.pendingProps),E=Ds(S.type,E),P2(u,d,S,E,m);case 15:return L2(u,d,d.type,d.pendingProps,m);case 17:return S=d.type,E=d.pendingProps,E=d.elementType===S?E:Ds(S,E),xp(u,d),d.tag=1,Cn(S)?(u=!0,Ci(d)):u=!1,zu(d,m),_2(d,S,E),Pv(d,S,E,m),Nv(null,d,S,!0,u,m);case 19:return F2(u,d,m);case 22:return M2(u,d,m)}throw Error(o(156,d.tag))};function lC(u,d){return Ea(u,d)}function TI(u,d,m,S){this.tag=u,this.key=m,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=d,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=S,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function fs(u,d,m,S){return new TI(u,d,m,S)}function ry(u){return u=u.prototype,!(!u||!u.isReactComponent)}function PI(u){if(typeof u=="function")return ry(u)?1:0;if(u!=null){if(u=u.$$typeof,u===x)return 11;if(u===b)return 14}return 2}function Ba(u,d){var m=u.alternate;return m===null?(m=fs(u.tag,d,u.key,u.mode),m.elementType=u.elementType,m.type=u.type,m.stateNode=u.stateNode,m.alternate=u,u.alternate=m):(m.pendingProps=d,m.type=u.type,m.flags=0,m.subtreeFlags=0,m.deletions=null),m.flags=u.flags&14680064,m.childLanes=u.childLanes,m.lanes=u.lanes,m.child=u.child,m.memoizedProps=u.memoizedProps,m.memoizedState=u.memoizedState,m.updateQueue=u.updateQueue,d=u.dependencies,m.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext},m.sibling=u.sibling,m.index=u.index,m.ref=u.ref,m}function Fp(u,d,m,S,E,P){var I=2;if(S=u,typeof u=="function")ry(u)&&(I=1);else if(typeof u=="string")I=5;else e:switch(u){case h:return ql(m.children,E,P,d);case f:I=8,E|=8;break;case p:return u=fs(12,m,d,E|2),u.elementType=p,u.lanes=P,u;case k:return u=fs(13,m,d,E),u.elementType=k,u.lanes=P,u;case C:return u=fs(19,m,d,E),u.elementType=C,u.lanes=P,u;case T:return Bp(m,E,P,d);default:if(typeof u=="object"&&u!==null)switch(u.$$typeof){case g:I=10;break e;case v:I=9;break e;case x:I=11;break e;case b:I=14;break e;case _:I=16,S=null;break e}throw Error(o(130,u==null?u:typeof u,""))}return d=fs(I,m,d,E),d.elementType=u,d.type=S,d.lanes=P,d}function ql(u,d,m,S){return u=fs(7,u,S,d),u.lanes=m,u}function Bp(u,d,m,S){return u=fs(22,u,S,d),u.elementType=T,u.lanes=m,u.stateNode={isHidden:!1},u}function iy(u,d,m){return u=fs(6,u,null,d),u.lanes=m,u}function sy(u,d,m){return d=fs(4,u.children!==null?u.children:[],u.key,d),d.lanes=m,d.stateNode={containerInfo:u.containerInfo,pendingChildren:null,implementation:u.implementation},d}function LI(u,d,m,S,E){this.tag=d,this.containerInfo=u,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=ae,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=as(0),this.expirationTimes=as(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=as(0),this.identifierPrefix=S,this.onRecoverableError=E,_e&&(this.mutableSourceEagerHydrationData=null)}function uC(u,d,m,S,E,P,I,J,oe){return u=new LI(u,d,m,J,oe),d===1?(d=1,P===!0&&(d|=8)):d=0,P=fs(3,null,null,d),u.current=P,P.stateNode=u,P.memoizedState={element:S,isDehydrated:m,cache:null,transitions:null,pendingSuspenseBoundaries:null},gv(P),u}function cC(u){if(!u)return sn;u=u._reactInternals;e:{if($(u)!==u||u.tag!==1)throw Error(o(170));var d=u;do{switch(d.tag){case 3:d=d.stateNode.context;break e;case 1:if(Cn(d.type)){d=d.stateNode.__reactInternalMemoizedMergedChildContext;break e}}d=d.return}while(d!==null);throw Error(o(171))}if(u.tag===1){var m=u.type;if(Cn(m))return Ln(u,m,d)}return d}function dC(u){var d=u._reactInternals;if(d===void 0)throw typeof u.render=="function"?Error(o(188)):(u=Object.keys(u).join(","),Error(o(268,u)));return u=U(d),u===null?null:u.stateNode}function hC(u,d){if(u=u.memoizedState,u!==null&&u.dehydrated!==null){var m=u.retryLane;u.retryLane=m!==0&&m<d?m:d}}function $p(u,d){hC(u,d),(u=u.alternate)&&hC(u,d)}function MI(u){return u=U(u),u===null?null:u.stateNode}function AI(){return null}return n.attemptContinuousHydration=function(u){if(u.tag===13){var d=uo(u,134217728);if(d!==null){var m=ti();hs(d,u,134217728,m)}$p(u,134217728)}},n.attemptDiscreteHydration=function(u){if(u.tag===13){var d=uo(u,1);if(d!==null){var m=ti();hs(d,u,1,m)}$p(u,1)}},n.attemptHydrationAtCurrentPriority=function(u){if(u.tag===13){var d=Da(u),m=uo(u,d);if(m!==null){var S=ti();hs(m,u,d,S)}$p(u,d)}},n.attemptSynchronousHydration=function(u){switch(u.tag){case 3:var d=u.stateNode;if(d.current.memoizedState.isDehydrated){var m=Bi(d.pendingLanes);m!==0&&(Fo(d,m|1),Ti(d,Mn()),!(It&6)&&(qu(),Q()))}break;case 13:eC(function(){var S=uo(u,1);if(S!==null){var E=ti();hs(S,u,1,E)}}),$p(u,1)}},n.batchedUpdates=function(u,d){var m=It;It|=1;try{return u(d)}finally{It=m,It===0&&(qu(),Bo&&Q())}},n.createComponentSelector=function(u){return{$$typeof:kp,value:u}},n.createContainer=function(u,d,m,S,E,P,I){return uC(u,d,!1,null,m,S,E,P,I)},n.createHasPseudoClassSelector=function(u){return{$$typeof:Ep,value:u}},n.createHydrationContainer=function(u,d,m,S,E,P,I,J,oe){return u=uC(m,S,!0,u,E,P,I,J,oe),u.context=cC(null),m=u.current,S=ti(),E=Da(m),P=Ho(S,E),P.callback=d??null,ja(m,P,E),u.current.lanes=E,Do(u,E,S),Ti(u,S),u},n.createPortal=function(u,d,m){var S=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:c,key:S==null?null:""+S,children:u,containerInfo:d,implementation:m}},n.createRoleSelector=function(u){return{$$typeof:Rp,value:u}},n.createTestNameSelector=function(u){return{$$typeof:Tp,value:u}},n.createTextSelector=function(u){return{$$typeof:Pp,value:u}},n.deferredUpdates=function(u){var d=Vt,m=er.transition;try{return er.transition=null,Vt=16,u()}finally{Vt=d,er.transition=m}},n.discreteUpdates=function(u,d,m,S,E){var P=Vt,I=er.transition;try{return er.transition=null,Vt=1,u(d,m,S,E)}finally{Vt=P,er.transition=I,It===0&&qu()}},n.findAllNodes=Gv,n.findBoundingRects=function(u,d){if(!Ue)throw Error(o(363));d=Gv(u,d),u=[];for(var m=0;m<d.length;m++)u.push(ze(d[m]));for(d=u.length-1;0<d;d--){m=u[d];for(var S=m.x,E=S+m.width,P=m.y,I=P+m.height,J=d-1;0<=J;J--)if(d!==J){var oe=u[J],Pe=oe.x,Qe=Pe+oe.width,Tt=oe.y,We=Tt+oe.height;if(S>=Pe&&P>=Tt&&E<=Qe&&I<=We){u.splice(d,1);break}else if(S!==Pe||m.width!==oe.width||We<P||Tt>I){if(!(P!==Tt||m.height!==oe.height||Qe<S||Pe>E)){Pe>S&&(oe.width+=Pe-S,oe.x=S),Qe<E&&(oe.width=E-Pe),u.splice(d,1);break}}else{Tt>P&&(oe.height+=Tt-P,oe.y=P),We<I&&(oe.height=I-Tt),u.splice(d,1);break}}}return u},n.findHostInstance=dC,n.findHostInstanceWithNoPortals=function(u){return u=V(u),u=u!==null?Z(u):null,u===null?null:u.stateNode},n.findHostInstanceWithWarning=function(u){return dC(u)},n.flushControlled=function(u){var d=It;It|=1;var m=er.transition,S=Vt;try{er.transition=null,Vt=1,u()}finally{Vt=S,er.transition=m,It=d,It===0&&(qu(),Q())}},n.flushPassiveEffects=Gl,n.flushSync=eC,n.focusWithin=function(u,d){if(!Ue)throw Error(o(363));for(u=Vv(u),d=Z2(u,d),d=Array.from(d),u=0;u<d.length;){var m=d[u++];if(!Oe(m)){if(m.tag===5&&yt(m.stateNode))return!0;for(m=m.child;m!==null;)d.push(m),m=m.sibling}}return!1},n.getCurrentUpdatePriority=function(){return Vt},n.getFindAllNodesFailureDescription=function(u,d){if(!Ue)throw Error(o(363));var m=0,S=[];u=[Vv(u),0];for(var E=0;E<u.length;){var P=u[E++],I=u[E++],J=d[I];if((P.tag!==5||!Oe(P))&&(Wv(P,J)&&(S.push(Hv(J)),I++,I>m&&(m=I)),I<d.length))for(P=P.child;P!==null;)u.push(P,I),P=P.sibling}if(m<d.length){for(u=[];m<d.length;m++)u.push(Hv(d[m]));return`findAllNodes was able to match part of the selector:
  `+(S.join(" > ")+`

No matching component was found for:
  `)+u.join(" > ")}return null},n.getPublicRootInstance=function(u){if(u=u.current,!u.child)return null;switch(u.child.tag){case 5:return G(u.child.stateNode);default:return u.child.stateNode}},n.injectIntoDevTools=function(u){if(u={bundleType:u.bundleType,version:u.version,rendererPackageName:u.rendererPackageName,rendererConfig:u.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:a.ReactCurrentDispatcher,findHostInstanceByFiber:MI,findFiberByHostInstance:u.findFiberByHostInstance||AI,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")u=!1;else{var d=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(d.isDisabled||!d.supportsFiber)u=!0;else{try{La=d.inject(u),or=d}catch{}u=!!d.checkDCE}}return u},n.isAlreadyRendering=function(){return!1},n.observeVisibleRects=function(u,d,m,S){if(!Ue)throw Error(o(363));u=Gv(u,d);var E=Fe(u,m,S).disconnect;return{disconnect:function(){E()}}},n.registerMutableSourceForHydration=function(u,d){var m=d._getVersion;m=m(d._source),u.mutableSourceEagerHydrationData==null?u.mutableSourceEagerHydrationData=[d,m]:u.mutableSourceEagerHydrationData.push(d,m)},n.runWithPriority=function(u,d){var m=Vt;try{return Vt=u,d()}finally{Vt=m}},n.shouldError=function(){return null},n.shouldSuspend=function(){return!1},n.updateContainer=function(u,d,m,S){var E=d.current,P=ti(),I=Da(E);return m=cC(m),d.context===null?d.context=m:d.pendingContext=m,d=Ho(P,I),d.payload={element:u},S=S===void 0?null:S,S!==null&&(d.callback=S),u=ja(E,d,I),u!==null&&(hs(u,E,I,P),cp(u,E,I)),I},n};OA.exports=GG;var qG=OA.exports;const YG=yP(qG);var DA={exports:{}},Iu={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */Iu.ConcurrentRoot=1;Iu.ContinuousEventPriority=4;Iu.DefaultEventPriority=16;Iu.DiscreteEventPriority=1;Iu.IdleEventPriority=536870912;Iu.LegacyRoot=0;DA.exports=Iu;var FA=DA.exports;const nT={children:!0,ref:!0,key:!0,style:!0,forwardedRef:!0,unstable_applyCache:!0,unstable_applyDrawHitFromCache:!0};let rT=!1,iT=!1;const dS=".react-konva-event",KG=`ReactKonva: You have a Konva node with draggable = true and position defined but no onDragMove or onDragEnd events are handled.
Position of a node will be changed during drag&drop, so you should update state of the react app as well.
Consider to add onDragMove or onDragEnd events.
For more info see: https://github.com/konvajs/react-konva/issues/256
`,XG=`ReactKonva: You are using "zIndex" attribute for a Konva node.
react-konva may get confused with ordering. Just define correct order of elements in your render function of a component.
For more info see: https://github.com/konvajs/react-konva/issues/194
`,ZG={};function Y0(t,e,n=ZG){if(!rT&&"zIndex"in e&&(console.warn(XG),rT=!0),!iT&&e.draggable){var r=e.x!==void 0||e.y!==void 0,i=e.onDragEnd||e.onDragMove;r&&!i&&(console.warn(KG),iT=!0)}for(var s in n)if(!nT[s]){var o=s.slice(0,2)==="on",a=n[s]!==e[s];if(o&&a){var l=s.substr(2).toLowerCase();l.substr(0,7)==="content"&&(l="content"+l.substr(7,1).toUpperCase()+l.substr(8)),t.off(l,n[s])}var c=!e.hasOwnProperty(s);c&&t.setAttr(s,void 0)}var h=e._useStrictMode,f={},p=!1;const g={};for(var s in e)if(!nT[s]){var o=s.slice(0,2)==="on",v=n[s]!==e[s];if(o&&v){var l=s.substr(2).toLowerCase();l.substr(0,7)==="content"&&(l="content"+l.substr(7,1).toUpperCase()+l.substr(8)),e[s]&&(g[l]=e[s])}!o&&(e[s]!==n[s]||h&&e[s]!==t.getAttr(s))&&(p=!0,f[s]=e[s])}p&&(t.setAttrs(f),Ll(t));for(var l in g)t.on(l+dS,g[l])}function Ll(t){if(!tt.autoDrawEnabled){var e=t.getLayer()||t.getStage();e&&e.batchDraw()}}const BA={},QG={};ku.Node.prototype._applyProps=Y0;function JG(t,e){if(typeof e=="string"){console.error(`Do not use plain text as child of Konva.Node. You are using text: ${e}`);return}t.add(e),Ll(t)}function eq(t,e,n){let r=ku[t];r||(console.error(`Konva has no node with the type ${t}. Group will be used instead. If you use minimal version of react-konva, just import required nodes into Konva: "import "konva/lib/shapes/${t}"  If you want to render DOM elements as part of canvas tree take a look into this demo: https://konvajs.github.io/docs/react/DOM_Portal.html`),r=ku.Group);const i={},s={};for(var o in e){var a=o.slice(0,2)==="on";a?s[o]=e[o]:i[o]=e[o]}const l=new r(i);return Y0(l,s),l}function tq(t,e,n){console.error(`Text components are not supported for now in ReactKonva. Your text is: "${t}"`)}function nq(t,e,n){return!1}function rq(t){return t}function iq(){return null}function sq(){return null}function oq(t,e,n,r){return QG}function aq(){}function lq(t){}function uq(t,e){return!1}function cq(){return BA}function dq(){return BA}const hq=setTimeout,fq=clearTimeout,pq=-1;function gq(t,e){return!1}const mq=!1,vq=!0,yq=!0;function wq(t,e){e.parent===t?e.moveToTop():t.add(e),Ll(t)}function xq(t,e){e.parent===t?e.moveToTop():t.add(e),Ll(t)}function $A(t,e,n){e._remove(),t.add(e),e.setZIndex(n.getZIndex()),Ll(t)}function _q(t,e,n){$A(t,e,n)}function bq(t,e){e.destroy(),e.off(dS),Ll(t)}function Sq(t,e){e.destroy(),e.off(dS),Ll(t)}function Cq(t,e,n){console.error(`Text components are not yet supported in ReactKonva. You text is: "${n}"`)}function kq(t,e,n){}function Eq(t,e,n,r,i){Y0(t,i,r)}function Rq(t){t.hide(),Ll(t)}function Tq(t){}function Pq(t,e){(e.visible==null||e.visible)&&t.show()}function Lq(t,e){}function Mq(t){}function Aq(){}const Nq=()=>FA.DefaultEventPriority,jq=Object.freeze(Object.defineProperty({__proto__:null,appendChild:wq,appendChildToContainer:xq,appendInitialChild:JG,cancelTimeout:fq,clearContainer:Mq,commitMount:kq,commitTextUpdate:Cq,commitUpdate:Eq,createInstance:eq,createTextInstance:tq,detachDeletedInstance:Aq,finalizeInitialChildren:nq,getChildHostContext:dq,getCurrentEventPriority:Nq,getPublicInstance:rq,getRootHostContext:cq,hideInstance:Rq,hideTextInstance:Tq,idlePriority:jh.unstable_IdlePriority,insertBefore:$A,insertInContainerBefore:_q,isPrimaryRenderer:mq,noTimeout:pq,now:jh.unstable_now,prepareForCommit:iq,preparePortalMount:sq,prepareUpdate:oq,removeChild:bq,removeChildFromContainer:Sq,resetAfterCommit:aq,resetTextContent:lq,run:jh.unstable_runWithPriority,scheduleTimeout:hq,shouldDeprioritizeSubtree:uq,shouldSetTextContent:gq,supportsMutation:yq,unhideInstance:Pq,unhideTextInstance:Lq,warnsIfNotActing:vq},Symbol.toStringTag,{value:"Module"}));var Iq=Object.defineProperty,Oq=Object.defineProperties,Dq=Object.getOwnPropertyDescriptors,sT=Object.getOwnPropertySymbols,Fq=Object.prototype.hasOwnProperty,Bq=Object.prototype.propertyIsEnumerable,oT=(t,e,n)=>e in t?Iq(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,aT=(t,e)=>{for(var n in e||(e={}))Fq.call(e,n)&&oT(t,n,e[n]);if(sT)for(var n of sT(e))Bq.call(e,n)&&oT(t,n,e[n]);return t},$q=(t,e)=>Oq(t,Dq(e)),lT,uT;typeof window<"u"&&((lT=window.document)!=null&&lT.createElement||((uT=window.navigator)==null?void 0:uT.product)==="ReactNative")?y.useLayoutEffect:y.useEffect;function zA(t,e,n){if(!t)return;if(n(t)===!0)return t;let r=e?t.return:t.child;for(;r;){const i=zA(r,e,n);if(i)return i;r=e?null:r.sibling}}function UA(t){try{return Object.defineProperties(t,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return t}}const cT=console.error;console.error=function(){const t=[...arguments].join("");if(t!=null&&t.startsWith("Warning:")&&t.includes("useContext")){console.error=cT;return}return cT.apply(this,arguments)};const hS=UA(y.createContext(null));class VA extends y.Component{render(){return y.createElement(hS.Provider,{value:this._reactInternals},this.props.children)}}function zq(){const t=y.useContext(hS);if(t===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=y.useId();return y.useMemo(()=>{for(const r of[t,t==null?void 0:t.alternate]){if(!r)continue;const i=zA(r,!1,s=>{let o=s.memoizedState;for(;o;){if(o.memoizedState===e)return!0;o=o.next}});if(i)return i}},[t,e])}function Uq(){const t=zq(),[e]=y.useState(()=>new Map);e.clear();let n=t;for(;n;){if(n.type&&typeof n.type=="object"){const i=n.type._context===void 0&&n.type.Provider===n.type?n.type:n.type._context;i&&i!==hS&&!e.has(i)&&e.set(i,y.useContext(UA(i)))}n=n.return}return e}function Vq(){const t=Uq();return y.useMemo(()=>Array.from(t.keys()).reduce((e,n)=>r=>y.createElement(e,null,y.createElement(n.Provider,$q(aT({},r),{value:t.get(n)}))),e=>y.createElement(VA,aT({},e))),[t])}function Wq(t){const e=Be.useRef({});return Be.useLayoutEffect(()=>{e.current=t}),Be.useLayoutEffect(()=>()=>{e.current={}},[]),e.current}const Hq=t=>{const e=Be.useRef(null),n=Be.useRef(null),r=Be.useRef(null),i=Wq(t),s=Vq(),o=a=>{const{forwardedRef:l}=t;l&&(typeof l=="function"?l(a):l.current=a)};return Be.useLayoutEffect(()=>(n.current=new ku.Stage({width:t.width,height:t.height,container:e.current}),o(n.current),r.current=Ph.createContainer(n.current,FA.LegacyRoot,!1,null),Ph.updateContainer(Be.createElement(s,{},t.children),r.current),()=>{ku.isBrowser&&(o(null),Ph.updateContainer(null,r.current,null),n.current.destroy())}),[]),Be.useLayoutEffect(()=>{o(n.current),Y0(n.current,t,i),Ph.updateContainer(Be.createElement(s,{},t.children),r.current,null)}),Be.createElement("div",{ref:e,id:t.id,accessKey:t.accessKey,className:t.className,role:t.role,style:t.style,tabIndex:t.tabIndex,title:t.title})},x1="Layer",Gq="Rect",qq="Ellipse",Wa="Line",Ph=YG(jq);Ph.injectIntoDevTools({findHostInstanceByFiber:()=>null,bundleType:0,version:Be.version,rendererPackageName:"react-konva"});const Yq=Be.forwardRef((t,e)=>Be.createElement(VA,{},Be.createElement(Hq,{...t,forwardedRef:e})));function Kq(t){const e=fr();return{layers:[{id:e,name:"Layer 1",visible:!0,order:0,strokes:t.lines.map((n,r)=>({clientId:`migrated-${r}`,tool:n.tool,points:n.points,color:n.color,strokeWidth:n.strokeWidth,saveState:"saved"}))}],activeLayerId:e,version:2}}function dT(t){return{layers:t.layers.map(e=>({...e,shapes:[]})),activeLayerId:t.activeLayerId,version:3}}async function Xq(t,e,n){try{const{data:{user:r}}=await Ct.auth.getUser();if(!r)throw new Error("User not authenticated");const i={layers:e.map(o=>({id:o.id,name:o.name,visible:o.visible,order:o.order,strokes:o.strokes.map(a=>({clientId:a.clientId,tool:a.tool,points:a.points,color:a.color,strokeWidth:a.strokeWidth,...a.shapeType&&{shapeType:a.shapeType},...a.fillColor&&{fillColor:a.fillColor},...a.closed!==void 0&&{closed:a.closed}})),shapes:o.shapes||[]})),activeLayerId:n,version:3},{error:s}=await Ct.from("canvases").upsert({project_id:t,user_id:r.id,canvas_data:i,updated_at:new Date().toISOString()},{onConflict:"project_id"});if(s)throw console.error("Failed to save canvas:",s),s}catch(r){throw console.error("Error in saveCanvas:",r),r}}async function Zq(t){try{const{data:e,error:n}=await Ct.from("canvases").select("canvas_data").eq("project_id",t).maybeSingle();if(n)throw console.error("Failed to load canvas:",n),n;if(!e||!e.canvas_data)return{layers:[],activeLayerId:""};const r=e.canvas_data;let i;if("version"in r&&r.version===3)i=r;else if("version"in r&&r.version===2)console.log("Migrating canvas from V2 to V3 format"),i=dT(r);else{console.log("Migrating canvas from V1 to V3 format");const o=Kq(r);i=dT(o)}return{layers:i.layers.map(o=>({id:o.id,name:o.name,visible:o.visible,order:o.order,strokes:o.strokes.map(a=>({clientId:a.clientId,tool:a.tool,points:a.points,color:a.color,strokeWidth:a.strokeWidth,saveState:"saved",...a.shapeType&&{shapeType:a.shapeType},...a.fillColor&&{fillColor:a.fillColor},...a.closed!==void 0&&{closed:a.closed}})),shapes:o.shapes||[]})),activeLayerId:i.activeLayerId}}catch(e){return console.error("Error in loadCanvas:",e),{layers:[],activeLayerId:""}}}function Qq(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return y.useMemo(()=>r=>{e.forEach(i=>i(r))},e)}const K0=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Pd(t){const e=Object.prototype.toString.call(t);return e==="[object Window]"||e==="[object global]"}function fS(t){return"nodeType"in t}function Di(t){var e,n;return t?Pd(t)?t:fS(t)&&(e=(n=t.ownerDocument)==null?void 0:n.defaultView)!=null?e:window:window}function pS(t){const{Document:e}=Di(t);return t instanceof e}function rp(t){return Pd(t)?!1:t instanceof Di(t).HTMLElement}function WA(t){return t instanceof Di(t).SVGElement}function Ld(t){return t?Pd(t)?t.document:fS(t)?pS(t)?t:rp(t)||WA(t)?t.ownerDocument:document:document:document}const Po=K0?y.useLayoutEffect:y.useEffect;function gS(t){const e=y.useRef(t);return Po(()=>{e.current=t}),y.useCallback(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return e.current==null?void 0:e.current(...r)},[])}function Jq(){const t=y.useRef(null),e=y.useCallback((r,i)=>{t.current=setInterval(r,i)},[]),n=y.useCallback(()=>{t.current!==null&&(clearInterval(t.current),t.current=null)},[]);return[e,n]}function Of(t,e){e===void 0&&(e=[t]);const n=y.useRef(t);return Po(()=>{n.current!==t&&(n.current=t)},e),n}function ip(t,e){const n=y.useRef();return y.useMemo(()=>{const r=t(n.current);return n.current=r,r},[...e])}function t0(t){const e=gS(t),n=y.useRef(null),r=y.useCallback(i=>{i!==n.current&&(e==null||e(i,n.current)),n.current=i},[]);return[n,r]}function Ix(t){const e=y.useRef();return y.useEffect(()=>{e.current=t},[t]),e.current}let _1={};function sp(t,e){return y.useMemo(()=>{if(e)return e;const n=_1[t]==null?0:_1[t]+1;return _1[t]=n,t+"-"+n},[t,e])}function HA(t){return function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return r.reduce((s,o)=>{const a=Object.entries(o);for(const[l,c]of a){const h=s[l];h!=null&&(s[l]=h+t*c)}return s},{...e})}}const Vc=HA(1),n0=HA(-1);function eY(t){return"clientX"in t&&"clientY"in t}function mS(t){if(!t)return!1;const{KeyboardEvent:e}=Di(t.target);return e&&t instanceof e}function tY(t){if(!t)return!1;const{TouchEvent:e}=Di(t.target);return e&&t instanceof e}function Ox(t){if(tY(t)){if(t.touches&&t.touches.length){const{clientX:e,clientY:n}=t.touches[0];return{x:e,y:n}}else if(t.changedTouches&&t.changedTouches.length){const{clientX:e,clientY:n}=t.changedTouches[0];return{x:e,y:n}}}return eY(t)?{x:t.clientX,y:t.clientY}:null}const id=Object.freeze({Translate:{toString(t){if(!t)return;const{x:e,y:n}=t;return"translate3d("+(e?Math.round(e):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(t){if(!t)return;const{scaleX:e,scaleY:n}=t;return"scaleX("+e+") scaleY("+n+")"}},Transform:{toString(t){if(t)return[id.Translate.toString(t),id.Scale.toString(t)].join(" ")}},Transition:{toString(t){let{property:e,duration:n,easing:r}=t;return e+" "+n+"ms "+r}}}),hT="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function nY(t){return t.matches(hT)?t:t.querySelector(hT)}const rY={display:"none"};function iY(t){let{id:e,value:n}=t;return Be.createElement("div",{id:e,style:rY},n)}function sY(t){let{id:e,announcement:n,ariaLiveType:r="assertive"}=t;const i={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return Be.createElement("div",{id:e,style:i,role:"status","aria-live":r,"aria-atomic":!0},n)}function oY(){const[t,e]=y.useState("");return{announce:y.useCallback(r=>{r!=null&&e(r)},[]),announcement:t}}const GA=y.createContext(null);function aY(t){const e=y.useContext(GA);y.useEffect(()=>{if(!e)throw new Error("useDndMonitor must be used within a children of <DndContext>");return e(t)},[t,e])}function lY(){const[t]=y.useState(()=>new Set),e=y.useCallback(r=>(t.add(r),()=>t.delete(r)),[t]);return[y.useCallback(r=>{let{type:i,event:s}=r;t.forEach(o=>{var a;return(a=o[i])==null?void 0:a.call(o,s)})},[t]),e]}const uY={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},cY={onDragStart(t){let{active:e}=t;return"Picked up draggable item "+e.id+"."},onDragOver(t){let{active:e,over:n}=t;return n?"Draggable item "+e.id+" was moved over droppable area "+n.id+".":"Draggable item "+e.id+" is no longer over a droppable area."},onDragEnd(t){let{active:e,over:n}=t;return n?"Draggable item "+e.id+" was dropped over droppable area "+n.id:"Draggable item "+e.id+" was dropped."},onDragCancel(t){let{active:e}=t;return"Dragging was cancelled. Draggable item "+e.id+" was dropped."}};function dY(t){let{announcements:e=cY,container:n,hiddenTextDescribedById:r,screenReaderInstructions:i=uY}=t;const{announce:s,announcement:o}=oY(),a=sp("DndLiveRegion"),[l,c]=y.useState(!1);if(y.useEffect(()=>{c(!0)},[]),aY(y.useMemo(()=>({onDragStart(f){let{active:p}=f;s(e.onDragStart({active:p}))},onDragMove(f){let{active:p,over:g}=f;e.onDragMove&&s(e.onDragMove({active:p,over:g}))},onDragOver(f){let{active:p,over:g}=f;s(e.onDragOver({active:p,over:g}))},onDragEnd(f){let{active:p,over:g}=f;s(e.onDragEnd({active:p,over:g}))},onDragCancel(f){let{active:p,over:g}=f;s(e.onDragCancel({active:p,over:g}))}}),[s,e])),!l)return null;const h=Be.createElement(Be.Fragment,null,Be.createElement(iY,{id:r,value:i.draggable}),Be.createElement(sY,{id:a,announcement:o}));return n?ai.createPortal(h,n):h}var br;(function(t){t.DragStart="dragStart",t.DragMove="dragMove",t.DragEnd="dragEnd",t.DragCancel="dragCancel",t.DragOver="dragOver",t.RegisterDroppable="registerDroppable",t.SetDroppableDisabled="setDroppableDisabled",t.UnregisterDroppable="unregisterDroppable"})(br||(br={}));function r0(){}function qA(t,e){return y.useMemo(()=>({sensor:t,options:e??{}}),[t,e])}function YA(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return y.useMemo(()=>[...e].filter(r=>r!=null),[...e])}const to=Object.freeze({x:0,y:0});function hY(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function fY(t,e){let{data:{value:n}}=t,{data:{value:r}}=e;return n-r}function pY(t,e){let{data:{value:n}}=t,{data:{value:r}}=e;return r-n}function gY(t,e){if(!t||t.length===0)return null;const[n]=t;return e?n[e]:n}function fT(t,e,n){return e===void 0&&(e=t.left),n===void 0&&(n=t.top),{x:e+t.width*.5,y:n+t.height*.5}}const KA=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:r}=t;const i=fT(e,e.left,e.top),s=[];for(const o of r){const{id:a}=o,l=n.get(a);if(l){const c=hY(fT(l),i);s.push({id:a,data:{droppableContainer:o,value:c}})}}return s.sort(fY)};function mY(t,e){const n=Math.max(e.top,t.top),r=Math.max(e.left,t.left),i=Math.min(e.left+e.width,t.left+t.width),s=Math.min(e.top+e.height,t.top+t.height),o=i-r,a=s-n;if(r<i&&n<s){const l=e.width*e.height,c=t.width*t.height,h=o*a,f=h/(l+c-h);return Number(f.toFixed(4))}return 0}const vY=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:r}=t;const i=[];for(const s of r){const{id:o}=s,a=n.get(o);if(a){const l=mY(a,e);l>0&&i.push({id:o,data:{droppableContainer:s,value:l}})}}return i.sort(pY)};function yY(t,e,n){return{...t,scaleX:e&&n?e.width/n.width:1,scaleY:e&&n?e.height/n.height:1}}function XA(t,e){return t&&e?{x:t.left-e.left,y:t.top-e.top}:to}function wY(t){return function(n){for(var r=arguments.length,i=new Array(r>1?r-1:0),s=1;s<r;s++)i[s-1]=arguments[s];return i.reduce((o,a)=>({...o,top:o.top+t*a.y,bottom:o.bottom+t*a.y,left:o.left+t*a.x,right:o.right+t*a.x}),{...n})}}const xY=wY(1);function _Y(t){if(t.startsWith("matrix3d(")){const e=t.slice(9,-1).split(/, /);return{x:+e[12],y:+e[13],scaleX:+e[0],scaleY:+e[5]}}else if(t.startsWith("matrix(")){const e=t.slice(7,-1).split(/, /);return{x:+e[4],y:+e[5],scaleX:+e[0],scaleY:+e[3]}}return null}function bY(t,e,n){const r=_Y(e);if(!r)return t;const{scaleX:i,scaleY:s,x:o,y:a}=r,l=t.left-o-(1-i)*parseFloat(n),c=t.top-a-(1-s)*parseFloat(n.slice(n.indexOf(" ")+1)),h=i?t.width/i:t.width,f=s?t.height/s:t.height;return{width:h,height:f,top:c,right:l+h,bottom:c+f,left:l}}const SY={ignoreTransform:!1};function Md(t,e){e===void 0&&(e=SY);let n=t.getBoundingClientRect();if(e.ignoreTransform){const{transform:c,transformOrigin:h}=Di(t).getComputedStyle(t);c&&(n=bY(n,c,h))}const{top:r,left:i,width:s,height:o,bottom:a,right:l}=n;return{top:r,left:i,width:s,height:o,bottom:a,right:l}}function pT(t){return Md(t,{ignoreTransform:!0})}function CY(t){const e=t.innerWidth,n=t.innerHeight;return{top:0,left:0,right:e,bottom:n,width:e,height:n}}function kY(t,e){return e===void 0&&(e=Di(t).getComputedStyle(t)),e.position==="fixed"}function EY(t,e){e===void 0&&(e=Di(t).getComputedStyle(t));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(i=>{const s=e[i];return typeof s=="string"?n.test(s):!1})}function vS(t,e){const n=[];function r(i){if(e!=null&&n.length>=e||!i)return n;if(pS(i)&&i.scrollingElement!=null&&!n.includes(i.scrollingElement))return n.push(i.scrollingElement),n;if(!rp(i)||WA(i)||n.includes(i))return n;const s=Di(t).getComputedStyle(i);return i!==t&&EY(i,s)&&n.push(i),kY(i,s)?n:r(i.parentNode)}return t?r(t):n}function ZA(t){const[e]=vS(t,1);return e??null}function b1(t){return!K0||!t?null:Pd(t)?t:fS(t)?pS(t)||t===Ld(t).scrollingElement?window:rp(t)?t:null:null}function QA(t){return Pd(t)?t.scrollX:t.scrollLeft}function JA(t){return Pd(t)?t.scrollY:t.scrollTop}function Dx(t){return{x:QA(t),y:JA(t)}}var Ar;(function(t){t[t.Forward=1]="Forward",t[t.Backward=-1]="Backward"})(Ar||(Ar={}));function eN(t){return!K0||!t?!1:t===document.scrollingElement}function tN(t){const e={x:0,y:0},n=eN(t)?{height:window.innerHeight,width:window.innerWidth}:{height:t.clientHeight,width:t.clientWidth},r={x:t.scrollWidth-n.width,y:t.scrollHeight-n.height},i=t.scrollTop<=e.y,s=t.scrollLeft<=e.x,o=t.scrollTop>=r.y,a=t.scrollLeft>=r.x;return{isTop:i,isLeft:s,isBottom:o,isRight:a,maxScroll:r,minScroll:e}}const RY={x:.2,y:.2};function TY(t,e,n,r,i){let{top:s,left:o,right:a,bottom:l}=n;r===void 0&&(r=10),i===void 0&&(i=RY);const{isTop:c,isBottom:h,isLeft:f,isRight:p}=tN(t),g={x:0,y:0},v={x:0,y:0},x={height:e.height*i.y,width:e.width*i.x};return!c&&s<=e.top+x.height?(g.y=Ar.Backward,v.y=r*Math.abs((e.top+x.height-s)/x.height)):!h&&l>=e.bottom-x.height&&(g.y=Ar.Forward,v.y=r*Math.abs((e.bottom-x.height-l)/x.height)),!p&&a>=e.right-x.width?(g.x=Ar.Forward,v.x=r*Math.abs((e.right-x.width-a)/x.width)):!f&&o<=e.left+x.width&&(g.x=Ar.Backward,v.x=r*Math.abs((e.left+x.width-o)/x.width)),{direction:g,speed:v}}function PY(t){if(t===document.scrollingElement){const{innerWidth:s,innerHeight:o}=window;return{top:0,left:0,right:s,bottom:o,width:s,height:o}}const{top:e,left:n,right:r,bottom:i}=t.getBoundingClientRect();return{top:e,left:n,right:r,bottom:i,width:t.clientWidth,height:t.clientHeight}}function nN(t){return t.reduce((e,n)=>Vc(e,Dx(n)),to)}function LY(t){return t.reduce((e,n)=>e+QA(n),0)}function MY(t){return t.reduce((e,n)=>e+JA(n),0)}function AY(t,e){if(e===void 0&&(e=Md),!t)return;const{top:n,left:r,bottom:i,right:s}=e(t);ZA(t)&&(i<=0||s<=0||n>=window.innerHeight||r>=window.innerWidth)&&t.scrollIntoView({block:"center",inline:"center"})}const NY=[["x",["left","right"],LY],["y",["top","bottom"],MY]];class yS{constructor(e,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=vS(n),i=nN(r);this.rect={...e},this.width=e.width,this.height=e.height;for(const[s,o,a]of NY)for(const l of o)Object.defineProperty(this,l,{get:()=>{const c=a(r),h=i[s]-c;return this.rect[l]+h},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class ef{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...n)})},this.target=e}add(e,n,r){var i;(i=this.target)==null||i.addEventListener(e,n,r),this.listeners.push([e,n,r])}}function jY(t){const{EventTarget:e}=Di(t);return t instanceof e?t:Ld(t)}function S1(t,e){const n=Math.abs(t.x),r=Math.abs(t.y);return typeof e=="number"?Math.sqrt(n**2+r**2)>e:"x"in e&&"y"in e?n>e.x&&r>e.y:"x"in e?n>e.x:"y"in e?r>e.y:!1}var vs;(function(t){t.Click="click",t.DragStart="dragstart",t.Keydown="keydown",t.ContextMenu="contextmenu",t.Resize="resize",t.SelectionChange="selectionchange",t.VisibilityChange="visibilitychange"})(vs||(vs={}));function gT(t){t.preventDefault()}function IY(t){t.stopPropagation()}var rn;(function(t){t.Space="Space",t.Down="ArrowDown",t.Right="ArrowRight",t.Left="ArrowLeft",t.Up="ArrowUp",t.Esc="Escape",t.Enter="Enter",t.Tab="Tab"})(rn||(rn={}));const rN={start:[rn.Space,rn.Enter],cancel:[rn.Esc],end:[rn.Space,rn.Enter,rn.Tab]},OY=(t,e)=>{let{currentCoordinates:n}=e;switch(t.code){case rn.Right:return{...n,x:n.x+25};case rn.Left:return{...n,x:n.x-25};case rn.Down:return{...n,y:n.y+25};case rn.Up:return{...n,y:n.y-25}}};class iN{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:n}}=e;this.props=e,this.listeners=new ef(Ld(n)),this.windowListeners=new ef(Di(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(vs.Resize,this.handleCancel),this.windowListeners.add(vs.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(vs.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:e,onStart:n}=this.props,r=e.node.current;r&&AY(r),n(to)}handleKeyDown(e){if(mS(e)){const{active:n,context:r,options:i}=this.props,{keyboardCodes:s=rN,coordinateGetter:o=OY,scrollBehavior:a="smooth"}=i,{code:l}=e;if(s.end.includes(l)){this.handleEnd(e);return}if(s.cancel.includes(l)){this.handleCancel(e);return}const{collisionRect:c}=r.current,h=c?{x:c.left,y:c.top}:to;this.referenceCoordinates||(this.referenceCoordinates=h);const f=o(e,{active:n,context:r.current,currentCoordinates:h});if(f){const p=n0(f,h),g={x:0,y:0},{scrollableAncestors:v}=r.current;for(const x of v){const k=e.code,{isTop:C,isRight:b,isLeft:_,isBottom:T,maxScroll:R,minScroll:L}=tN(x),M=PY(x),A={x:Math.min(k===rn.Right?M.right-M.width/2:M.right,Math.max(k===rn.Right?M.left:M.left+M.width/2,f.x)),y:Math.min(k===rn.Down?M.bottom-M.height/2:M.bottom,Math.max(k===rn.Down?M.top:M.top+M.height/2,f.y))},$=k===rn.Right&&!b||k===rn.Left&&!_,j=k===rn.Down&&!T||k===rn.Up&&!C;if($&&A.x!==f.x){const V=x.scrollLeft+p.x,U=k===rn.Right&&V<=R.x||k===rn.Left&&V>=L.x;if(U&&!p.y){x.scrollTo({left:V,behavior:a});return}U?g.x=x.scrollLeft-V:g.x=k===rn.Right?x.scrollLeft-R.x:x.scrollLeft-L.x,g.x&&x.scrollBy({left:-g.x,behavior:a});break}else if(j&&A.y!==f.y){const V=x.scrollTop+p.y,U=k===rn.Down&&V<=R.y||k===rn.Up&&V>=L.y;if(U&&!p.x){x.scrollTo({top:V,behavior:a});return}U?g.y=x.scrollTop-V:g.y=k===rn.Down?x.scrollTop-R.y:x.scrollTop-L.y,g.y&&x.scrollBy({top:-g.y,behavior:a});break}}this.handleMove(e,Vc(n0(f,this.referenceCoordinates),g))}}}handleMove(e,n){const{onMove:r}=this.props;e.preventDefault(),r(n)}handleEnd(e){const{onEnd:n}=this.props;e.preventDefault(),this.detach(),n()}handleCancel(e){const{onCancel:n}=this.props;e.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}iN.activators=[{eventName:"onKeyDown",handler:(t,e,n)=>{let{keyboardCodes:r=rN,onActivation:i}=e,{active:s}=n;const{code:o}=t.nativeEvent;if(r.start.includes(o)){const a=s.activatorNode.current;return a&&t.target!==a?!1:(t.preventDefault(),i==null||i({event:t.nativeEvent}),!0)}return!1}}];function mT(t){return!!(t&&"distance"in t)}function vT(t){return!!(t&&"delay"in t)}class wS{constructor(e,n,r){var i;r===void 0&&(r=jY(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=n;const{event:s}=e,{target:o}=s;this.props=e,this.events=n,this.document=Ld(o),this.documentListeners=new ef(this.document),this.listeners=new ef(r),this.windowListeners=new ef(Di(o)),this.initialCoordinates=(i=Ox(s))!=null?i:to,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:n,bypassActivationConstraint:r}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(vs.Resize,this.handleCancel),this.windowListeners.add(vs.DragStart,gT),this.windowListeners.add(vs.VisibilityChange,this.handleCancel),this.windowListeners.add(vs.ContextMenu,gT),this.documentListeners.add(vs.Keydown,this.handleKeydown),n){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(vT(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(mT(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,n){const{active:r,onPending:i}=this.props;i(r,e,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:e}=this,{onStart:n}=this.props;e&&(this.activated=!0,this.documentListeners.add(vs.Click,IY,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(vs.SelectionChange,this.removeTextSelection),n(e))}handleMove(e){var n;const{activated:r,initialCoordinates:i,props:s}=this,{onMove:o,options:{activationConstraint:a}}=s;if(!i)return;const l=(n=Ox(e))!=null?n:to,c=n0(i,l);if(!r&&a){if(mT(a)){if(a.tolerance!=null&&S1(c,a.tolerance))return this.handleCancel();if(S1(c,a.distance))return this.handleStart()}if(vT(a)&&S1(c,a.tolerance))return this.handleCancel();this.handlePending(a,c);return}e.cancelable&&e.preventDefault(),o(l)}handleEnd(){const{onAbort:e,onEnd:n}=this.props;this.detach(),this.activated||e(this.props.active),n()}handleCancel(){const{onAbort:e,onCancel:n}=this.props;this.detach(),this.activated||e(this.props.active),n()}handleKeydown(e){e.code===rn.Esc&&this.handleCancel()}removeTextSelection(){var e;(e=this.document.getSelection())==null||e.removeAllRanges()}}const DY={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class X0 extends wS{constructor(e){const{event:n}=e,r=Ld(n.target);super(e,DY,r)}}X0.activators=[{eventName:"onPointerDown",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;return!n.isPrimary||n.button!==0?!1:(r==null||r({event:n}),!0)}}];const FY={move:{name:"mousemove"},end:{name:"mouseup"}};var Fx;(function(t){t[t.RightClick=2]="RightClick"})(Fx||(Fx={}));class BY extends wS{constructor(e){super(e,FY,Ld(e.event.target))}}BY.activators=[{eventName:"onMouseDown",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;return n.button===Fx.RightClick?!1:(r==null||r({event:n}),!0)}}];const C1={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class $Y extends wS{constructor(e){super(e,C1)}static setup(){return window.addEventListener(C1.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(C1.move.name,e)};function e(){}}}$Y.activators=[{eventName:"onTouchStart",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;const{touches:i}=n;return i.length>1?!1:(r==null||r({event:n}),!0)}}];var tf;(function(t){t[t.Pointer=0]="Pointer",t[t.DraggableRect=1]="DraggableRect"})(tf||(tf={}));var i0;(function(t){t[t.TreeOrder=0]="TreeOrder",t[t.ReversedTreeOrder=1]="ReversedTreeOrder"})(i0||(i0={}));function zY(t){let{acceleration:e,activator:n=tf.Pointer,canScroll:r,draggingRect:i,enabled:s,interval:o=5,order:a=i0.TreeOrder,pointerCoordinates:l,scrollableAncestors:c,scrollableAncestorRects:h,delta:f,threshold:p}=t;const g=VY({delta:f,disabled:!s}),[v,x]=Jq(),k=y.useRef({x:0,y:0}),C=y.useRef({x:0,y:0}),b=y.useMemo(()=>{switch(n){case tf.Pointer:return l?{top:l.y,bottom:l.y,left:l.x,right:l.x}:null;case tf.DraggableRect:return i}},[n,i,l]),_=y.useRef(null),T=y.useCallback(()=>{const L=_.current;if(!L)return;const M=k.current.x*C.current.x,A=k.current.y*C.current.y;L.scrollBy(M,A)},[]),R=y.useMemo(()=>a===i0.TreeOrder?[...c].reverse():c,[a,c]);y.useEffect(()=>{if(!s||!c.length||!b){x();return}for(const L of R){if((r==null?void 0:r(L))===!1)continue;const M=c.indexOf(L),A=h[M];if(!A)continue;const{direction:$,speed:j}=TY(L,A,b,e,p);for(const V of["x","y"])g[V][$[V]]||(j[V]=0,$[V]=0);if(j.x>0||j.y>0){x(),_.current=L,v(T,o),k.current=j,C.current=$;return}}k.current={x:0,y:0},C.current={x:0,y:0},x()},[e,T,r,x,s,o,JSON.stringify(b),JSON.stringify(g),v,c,R,h,JSON.stringify(p)])}const UY={x:{[Ar.Backward]:!1,[Ar.Forward]:!1},y:{[Ar.Backward]:!1,[Ar.Forward]:!1}};function VY(t){let{delta:e,disabled:n}=t;const r=Ix(e);return ip(i=>{if(n||!r||!i)return UY;const s={x:Math.sign(e.x-r.x),y:Math.sign(e.y-r.y)};return{x:{[Ar.Backward]:i.x[Ar.Backward]||s.x===-1,[Ar.Forward]:i.x[Ar.Forward]||s.x===1},y:{[Ar.Backward]:i.y[Ar.Backward]||s.y===-1,[Ar.Forward]:i.y[Ar.Forward]||s.y===1}}},[n,e,r])}function WY(t,e){const n=e!=null?t.get(e):void 0,r=n?n.node.current:null;return ip(i=>{var s;return e==null?null:(s=r??i)!=null?s:null},[r,e])}function HY(t,e){return y.useMemo(()=>t.reduce((n,r)=>{const{sensor:i}=r,s=i.activators.map(o=>({eventName:o.eventName,handler:e(o.handler,r)}));return[...n,...s]},[]),[t,e])}var Df;(function(t){t[t.Always=0]="Always",t[t.BeforeDragging=1]="BeforeDragging",t[t.WhileDragging=2]="WhileDragging"})(Df||(Df={}));var Bx;(function(t){t.Optimized="optimized"})(Bx||(Bx={}));const yT=new Map;function GY(t,e){let{dragging:n,dependencies:r,config:i}=e;const[s,o]=y.useState(null),{frequency:a,measure:l,strategy:c}=i,h=y.useRef(t),f=k(),p=Of(f),g=y.useCallback(function(C){C===void 0&&(C=[]),!p.current&&o(b=>b===null?C:b.concat(C.filter(_=>!b.includes(_))))},[p]),v=y.useRef(null),x=ip(C=>{if(f&&!n)return yT;if(!C||C===yT||h.current!==t||s!=null){const b=new Map;for(let _ of t){if(!_)continue;if(s&&s.length>0&&!s.includes(_.id)&&_.rect.current){b.set(_.id,_.rect.current);continue}const T=_.node.current,R=T?new yS(l(T),T):null;_.rect.current=R,R&&b.set(_.id,R)}return b}return C},[t,s,n,f,l]);return y.useEffect(()=>{h.current=t},[t]),y.useEffect(()=>{f||g()},[n,f]),y.useEffect(()=>{s&&s.length>0&&o(null)},[JSON.stringify(s)]),y.useEffect(()=>{f||typeof a!="number"||v.current!==null||(v.current=setTimeout(()=>{g(),v.current=null},a))},[a,f,g,...r]),{droppableRects:x,measureDroppableContainers:g,measuringScheduled:s!=null};function k(){switch(c){case Df.Always:return!1;case Df.BeforeDragging:return n;default:return!n}}}function sN(t,e){return ip(n=>t?n||(typeof e=="function"?e(t):t):null,[e,t])}function qY(t,e){return sN(t,e)}function YY(t){let{callback:e,disabled:n}=t;const r=gS(e),i=y.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:s}=window;return new s(r)},[r,n]);return y.useEffect(()=>()=>i==null?void 0:i.disconnect(),[i]),i}function Z0(t){let{callback:e,disabled:n}=t;const r=gS(e),i=y.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:s}=window;return new s(r)},[n]);return y.useEffect(()=>()=>i==null?void 0:i.disconnect(),[i]),i}function KY(t){return new yS(Md(t),t)}function wT(t,e,n){e===void 0&&(e=KY);const[r,i]=y.useState(null);function s(){i(l=>{if(!t)return null;if(t.isConnected===!1){var c;return(c=l??n)!=null?c:null}const h=e(t);return JSON.stringify(l)===JSON.stringify(h)?l:h})}const o=YY({callback(l){if(t)for(const c of l){const{type:h,target:f}=c;if(h==="childList"&&f instanceof HTMLElement&&f.contains(t)){s();break}}}}),a=Z0({callback:s});return Po(()=>{s(),t?(a==null||a.observe(t),o==null||o.observe(document.body,{childList:!0,subtree:!0})):(a==null||a.disconnect(),o==null||o.disconnect())},[t]),r}function XY(t){const e=sN(t);return XA(t,e)}const xT=[];function ZY(t){const e=y.useRef(t),n=ip(r=>t?r&&r!==xT&&t&&e.current&&t.parentNode===e.current.parentNode?r:vS(t):xT,[t]);return y.useEffect(()=>{e.current=t},[t]),n}function QY(t){const[e,n]=y.useState(null),r=y.useRef(t),i=y.useCallback(s=>{const o=b1(s.target);o&&n(a=>a?(a.set(o,Dx(o)),new Map(a)):null)},[]);return y.useEffect(()=>{const s=r.current;if(t!==s){o(s);const a=t.map(l=>{const c=b1(l);return c?(c.addEventListener("scroll",i,{passive:!0}),[c,Dx(c)]):null}).filter(l=>l!=null);n(a.length?new Map(a):null),r.current=t}return()=>{o(t),o(s)};function o(a){a.forEach(l=>{const c=b1(l);c==null||c.removeEventListener("scroll",i)})}},[i,t]),y.useMemo(()=>t.length?e?Array.from(e.values()).reduce((s,o)=>Vc(s,o),to):nN(t):to,[t,e])}function _T(t,e){e===void 0&&(e=[]);const n=y.useRef(null);return y.useEffect(()=>{n.current=null},e),y.useEffect(()=>{const r=t!==to;r&&!n.current&&(n.current=t),!r&&n.current&&(n.current=null)},[t]),n.current?n0(t,n.current):to}function JY(t){y.useEffect(()=>{if(!K0)return;const e=t.map(n=>{let{sensor:r}=n;return r.setup==null?void 0:r.setup()});return()=>{for(const n of e)n==null||n()}},t.map(e=>{let{sensor:n}=e;return n}))}function eK(t,e){return y.useMemo(()=>t.reduce((n,r)=>{let{eventName:i,handler:s}=r;return n[i]=o=>{s(o,e)},n},{}),[t,e])}function oN(t){return y.useMemo(()=>t?CY(t):null,[t])}const bT=[];function tK(t,e){e===void 0&&(e=Md);const[n]=t,r=oN(n?Di(n):null),[i,s]=y.useState(bT);function o(){s(()=>t.length?t.map(l=>eN(l)?r:new yS(e(l),l)):bT)}const a=Z0({callback:o});return Po(()=>{a==null||a.disconnect(),o(),t.forEach(l=>a==null?void 0:a.observe(l))},[t]),i}function nK(t){if(!t)return null;if(t.children.length>1)return t;const e=t.children[0];return rp(e)?e:t}function rK(t){let{measure:e}=t;const[n,r]=y.useState(null),i=y.useCallback(c=>{for(const{target:h}of c)if(rp(h)){r(f=>{const p=e(h);return f?{...f,width:p.width,height:p.height}:p});break}},[e]),s=Z0({callback:i}),o=y.useCallback(c=>{const h=nK(c);s==null||s.disconnect(),h&&(s==null||s.observe(h)),r(h?e(h):null)},[e,s]),[a,l]=t0(o);return y.useMemo(()=>({nodeRef:a,rect:n,setRef:l}),[n,a,l])}const iK=[{sensor:X0,options:{}},{sensor:iN,options:{}}],sK={current:{}},cm={draggable:{measure:pT},droppable:{measure:pT,strategy:Df.WhileDragging,frequency:Bx.Optimized},dragOverlay:{measure:Md}};class nf extends Map{get(e){var n;return e!=null&&(n=super.get(e))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:n}=e;return!n})}getNodeFor(e){var n,r;return(n=(r=this.get(e))==null?void 0:r.node.current)!=null?n:void 0}}const oK={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new nf,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:r0},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:cm,measureDroppableContainers:r0,windowRect:null,measuringScheduled:!1},aK={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:r0,draggableNodes:new Map,over:null,measureDroppableContainers:r0},Q0=y.createContext(aK),aN=y.createContext(oK);function lK(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new nf}}}function uK(t,e){switch(e.type){case br.DragStart:return{...t,draggable:{...t.draggable,initialCoordinates:e.initialCoordinates,active:e.active}};case br.DragMove:return t.draggable.active==null?t:{...t,draggable:{...t.draggable,translate:{x:e.coordinates.x-t.draggable.initialCoordinates.x,y:e.coordinates.y-t.draggable.initialCoordinates.y}}};case br.DragEnd:case br.DragCancel:return{...t,draggable:{...t.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case br.RegisterDroppable:{const{element:n}=e,{id:r}=n,i=new nf(t.droppable.containers);return i.set(r,n),{...t,droppable:{...t.droppable,containers:i}}}case br.SetDroppableDisabled:{const{id:n,key:r,disabled:i}=e,s=t.droppable.containers.get(n);if(!s||r!==s.key)return t;const o=new nf(t.droppable.containers);return o.set(n,{...s,disabled:i}),{...t,droppable:{...t.droppable,containers:o}}}case br.UnregisterDroppable:{const{id:n,key:r}=e,i=t.droppable.containers.get(n);if(!i||r!==i.key)return t;const s=new nf(t.droppable.containers);return s.delete(n),{...t,droppable:{...t.droppable,containers:s}}}default:return t}}function cK(t){let{disabled:e}=t;const{active:n,activatorEvent:r,draggableNodes:i}=y.useContext(Q0),s=Ix(r),o=Ix(n==null?void 0:n.id);return y.useEffect(()=>{if(!e&&!r&&s&&o!=null){if(!mS(s)||document.activeElement===s.target)return;const a=i.get(o);if(!a)return;const{activatorNode:l,node:c}=a;if(!l.current&&!c.current)return;requestAnimationFrame(()=>{for(const h of[l.current,c.current]){if(!h)continue;const f=nY(h);if(f){f.focus();break}}})}},[r,e,i,o,s]),null}function dK(t,e){let{transform:n,...r}=e;return t!=null&&t.length?t.reduce((i,s)=>s({transform:i,...r}),n):n}function hK(t){return y.useMemo(()=>({draggable:{...cm.draggable,...t==null?void 0:t.draggable},droppable:{...cm.droppable,...t==null?void 0:t.droppable},dragOverlay:{...cm.dragOverlay,...t==null?void 0:t.dragOverlay}}),[t==null?void 0:t.draggable,t==null?void 0:t.droppable,t==null?void 0:t.dragOverlay])}function fK(t){let{activeNode:e,measure:n,initialRect:r,config:i=!0}=t;const s=y.useRef(!1),{x:o,y:a}=typeof i=="boolean"?{x:i,y:i}:i;Po(()=>{if(!o&&!a||!e){s.current=!1;return}if(s.current||!r)return;const c=e==null?void 0:e.node.current;if(!c||c.isConnected===!1)return;const h=n(c),f=XA(h,r);if(o||(f.x=0),a||(f.y=0),s.current=!0,Math.abs(f.x)>0||Math.abs(f.y)>0){const p=ZA(c);p&&p.scrollBy({top:f.y,left:f.x})}},[e,o,a,r,n])}const lN=y.createContext({...to,scaleX:1,scaleY:1});var Ka;(function(t){t[t.Uninitialized=0]="Uninitialized",t[t.Initializing=1]="Initializing",t[t.Initialized=2]="Initialized"})(Ka||(Ka={}));const uN=y.memo(function(e){var n,r,i,s;let{id:o,accessibility:a,autoScroll:l=!0,children:c,sensors:h=iK,collisionDetection:f=vY,measuring:p,modifiers:g,...v}=e;const x=y.useReducer(uK,void 0,lK),[k,C]=x,[b,_]=lY(),[T,R]=y.useState(Ka.Uninitialized),L=T===Ka.Initialized,{draggable:{active:M,nodes:A,translate:$},droppable:{containers:j}}=k,V=M!=null?A.get(M):null,U=y.useRef({initial:null,translated:null}),B=y.useMemo(()=>{var rt;return M!=null?{id:M,data:(rt=V==null?void 0:V.data)!=null?rt:sK,rect:U}:null},[M,V]),Z=y.useRef(null),[q,G]=y.useState(null),[te,O]=y.useState(null),K=Of(v,Object.values(v)),Y=sp("DndDescribedBy",o),xe=y.useMemo(()=>j.getEnabled(),[j]),re=hK(p),{droppableRects:ue,measureDroppableContainers:ke,measuringScheduled:qe}=GY(xe,{dragging:L,dependencies:[$.x,$.y],config:re.droppable}),he=WY(A,M),ge=y.useMemo(()=>te?Ox(te):null,[te]),we=Lt(),ae=qY(he,re.draggable.measure);fK({activeNode:M!=null?A.get(M):null,config:we.layoutShiftCompensation,initialRect:ae,measure:re.draggable.measure});const me=wT(he,re.draggable.measure,ae),X=wT(he?he.parentElement:null),ye=y.useRef({activatorEvent:null,active:null,activeNode:he,collisionRect:null,collisions:null,droppableRects:ue,draggableNodes:A,draggingNode:null,draggingNodeRect:null,droppableContainers:j,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),_e=j.getNodeFor((n=ye.current.over)==null?void 0:n.id),at=rK({measure:re.dragOverlay.measure}),Le=(r=at.nodeRef.current)!=null?r:he,fe=L?(i=at.rect)!=null?i:me:null,ve=!!(at.nodeRef.current&&at.rect),Ae=XY(ve?null:me),De=oN(Le?Di(Le):null),Ue=ZY(L?_e??he:null),Ie=tK(Ue),ze=dK(g,{transform:{x:$.x-Ae.x,y:$.y-Ae.y,scaleX:1,scaleY:1},activatorEvent:te,active:B,activeNodeRect:me,containerNodeRect:X,draggingNodeRect:fe,over:ye.current.over,overlayNodeRect:at.rect,scrollableAncestors:Ue,scrollableAncestorRects:Ie,windowRect:De}),Ce=ge?Vc(ge,$):null,Oe=QY(Ue),Ne=_T(Oe),yt=_T(Oe,[me]),Fe=Vc(ze,Ne),st=fe?xY(fe,ze):null,wt=B&&st?f({active:B,collisionRect:st,droppableRects:ue,droppableContainers:xe,pointerCoordinates:Ce}):null,At=gY(wt,"id"),[Ye,Re]=y.useState(null),Te=ve?ze:Vc(ze,yt),pe=yY(Te,(s=Ye==null?void 0:Ye.rect)!=null?s:null,me),be=y.useRef(null),gt=y.useCallback((rt,Nt)=>{let{sensor:ht,options:zt}=Nt;if(Z.current==null)return;const Et=A.get(Z.current);if(!Et)return;const ut=rt.nativeEvent,Xt=new ht({active:Z.current,activeNode:Et,event:ut,options:zt,context:ye,onAbort(Ft){if(!A.get(Ft))return;const{onDragAbort:ln}=K.current,Gt={id:Ft};ln==null||ln(Gt),b({type:"onDragAbort",event:Gt})},onPending(Ft,St,ln,Gt){if(!A.get(Ft))return;const{onDragPending:mt}=K.current,vt={id:Ft,constraint:St,initialCoordinates:ln,offset:Gt};mt==null||mt(vt),b({type:"onDragPending",event:vt})},onStart(Ft){const St=Z.current;if(St==null)return;const ln=A.get(St);if(!ln)return;const{onDragStart:Gt}=K.current,qt={activatorEvent:ut,active:{id:St,data:ln.data,rect:U}};ai.unstable_batchedUpdates(()=>{Gt==null||Gt(qt),R(Ka.Initializing),C({type:br.DragStart,initialCoordinates:Ft,active:St}),b({type:"onDragStart",event:qt}),G(be.current),O(ut)})},onMove(Ft){C({type:br.DragMove,coordinates:Ft})},onEnd:ft(br.DragEnd),onCancel:ft(br.DragCancel)});be.current=Xt;function ft(Ft){return async function(){const{active:ln,collisions:Gt,over:qt,scrollAdjustedTranslate:mt}=ye.current;let vt=null;if(ln&&mt){const{cancelDrop:Ut}=K.current;vt={activatorEvent:ut,active:ln,collisions:Gt,delta:mt,over:qt},Ft===br.DragEnd&&typeof Ut=="function"&&await Promise.resolve(Ut(vt))&&(Ft=br.DragCancel)}Z.current=null,ai.unstable_batchedUpdates(()=>{C({type:Ft}),R(Ka.Uninitialized),Re(null),G(null),O(null),be.current=null;const Ut=Ft===br.DragEnd?"onDragEnd":"onDragCancel";if(vt){const kr=K.current[Ut];kr==null||kr(vt),b({type:Ut,event:vt})}})}}},[A]),nt=y.useCallback((rt,Nt)=>(ht,zt)=>{const Et=ht.nativeEvent,ut=A.get(zt);if(Z.current!==null||!ut||Et.dndKit||Et.defaultPrevented)return;const Xt={active:ut};rt(ht,Nt.options,Xt)===!0&&(Et.dndKit={capturedBy:Nt.sensor},Z.current=zt,gt(ht,Nt))},[A,gt]),lt=HY(h,nt);JY(h),Po(()=>{me&&T===Ka.Initializing&&R(Ka.Initialized)},[me,T]),y.useEffect(()=>{const{onDragMove:rt}=K.current,{active:Nt,activatorEvent:ht,collisions:zt,over:Et}=ye.current;if(!Nt||!ht)return;const ut={active:Nt,activatorEvent:ht,collisions:zt,delta:{x:Fe.x,y:Fe.y},over:Et};ai.unstable_batchedUpdates(()=>{rt==null||rt(ut),b({type:"onDragMove",event:ut})})},[Fe.x,Fe.y]),y.useEffect(()=>{const{active:rt,activatorEvent:Nt,collisions:ht,droppableContainers:zt,scrollAdjustedTranslate:Et}=ye.current;if(!rt||Z.current==null||!Nt||!Et)return;const{onDragOver:ut}=K.current,Xt=zt.get(At),ft=Xt&&Xt.rect.current?{id:Xt.id,rect:Xt.rect.current,data:Xt.data,disabled:Xt.disabled}:null,Ft={active:rt,activatorEvent:Nt,collisions:ht,delta:{x:Et.x,y:Et.y},over:ft};ai.unstable_batchedUpdates(()=>{Re(ft),ut==null||ut(Ft),b({type:"onDragOver",event:Ft})})},[At]),Po(()=>{ye.current={activatorEvent:te,active:B,activeNode:he,collisionRect:st,collisions:wt,droppableRects:ue,draggableNodes:A,draggingNode:Le,draggingNodeRect:fe,droppableContainers:j,over:Ye,scrollableAncestors:Ue,scrollAdjustedTranslate:Fe},U.current={initial:fe,translated:st}},[B,he,wt,st,A,Le,fe,ue,j,Ye,Ue,Fe]),zY({...we,delta:$,draggingRect:st,pointerCoordinates:Ce,scrollableAncestors:Ue,scrollableAncestorRects:Ie});const Ke=y.useMemo(()=>({active:B,activeNode:he,activeNodeRect:me,activatorEvent:te,collisions:wt,containerNodeRect:X,dragOverlay:at,draggableNodes:A,droppableContainers:j,droppableRects:ue,over:Ye,measureDroppableContainers:ke,scrollableAncestors:Ue,scrollableAncestorRects:Ie,measuringConfiguration:re,measuringScheduled:qe,windowRect:De}),[B,he,me,te,wt,X,at,A,j,ue,Ye,ke,Ue,Ie,re,qe,De]),xt=y.useMemo(()=>({activatorEvent:te,activators:lt,active:B,activeNodeRect:me,ariaDescribedById:{draggable:Y},dispatch:C,draggableNodes:A,over:Ye,measureDroppableContainers:ke}),[te,lt,B,me,C,Y,A,Ye,ke]);return Be.createElement(GA.Provider,{value:_},Be.createElement(Q0.Provider,{value:xt},Be.createElement(aN.Provider,{value:Ke},Be.createElement(lN.Provider,{value:pe},c)),Be.createElement(cK,{disabled:(a==null?void 0:a.restoreFocus)===!1})),Be.createElement(dY,{...a,hiddenTextDescribedById:Y}));function Lt(){const rt=(q==null?void 0:q.autoScrollEnabled)===!1,Nt=typeof l=="object"?l.enabled===!1:l===!1,ht=L&&!rt&&!Nt;return typeof l=="object"?{...l,enabled:ht}:{enabled:ht}}}),pK=y.createContext(null),ST="button",gK="Draggable";function mK(t){let{id:e,data:n,disabled:r=!1,attributes:i}=t;const s=sp(gK),{activators:o,activatorEvent:a,active:l,activeNodeRect:c,ariaDescribedById:h,draggableNodes:f,over:p}=y.useContext(Q0),{role:g=ST,roleDescription:v="draggable",tabIndex:x=0}=i??{},k=(l==null?void 0:l.id)===e,C=y.useContext(k?lN:pK),[b,_]=t0(),[T,R]=t0(),L=eK(o,e),M=Of(n);Po(()=>(f.set(e,{id:e,key:s,node:b,activatorNode:T,data:M}),()=>{const $=f.get(e);$&&$.key===s&&f.delete(e)}),[f,e]);const A=y.useMemo(()=>({role:g,tabIndex:x,"aria-disabled":r,"aria-pressed":k&&g===ST?!0:void 0,"aria-roledescription":v,"aria-describedby":h.draggable}),[r,g,x,k,v,h.draggable]);return{active:l,activatorEvent:a,activeNodeRect:c,attributes:A,isDragging:k,listeners:r?void 0:L,node:b,over:p,setNodeRef:_,setActivatorNodeRef:R,transform:C}}function vK(){return y.useContext(aN)}const yK="Droppable",wK={timeout:25};function xK(t){let{data:e,disabled:n=!1,id:r,resizeObserverConfig:i}=t;const s=sp(yK),{active:o,dispatch:a,over:l,measureDroppableContainers:c}=y.useContext(Q0),h=y.useRef({disabled:n}),f=y.useRef(!1),p=y.useRef(null),g=y.useRef(null),{disabled:v,updateMeasurementsFor:x,timeout:k}={...wK,...i},C=Of(x??r),b=y.useCallback(()=>{if(!f.current){f.current=!0;return}g.current!=null&&clearTimeout(g.current),g.current=setTimeout(()=>{c(Array.isArray(C.current)?C.current:[C.current]),g.current=null},k)},[k]),_=Z0({callback:b,disabled:v||!o}),T=y.useCallback((A,$)=>{_&&($&&(_.unobserve($),f.current=!1),A&&_.observe(A))},[_]),[R,L]=t0(T),M=Of(e);return y.useEffect(()=>{!_||!R.current||(_.disconnect(),f.current=!1,_.observe(R.current))},[R,_]),y.useEffect(()=>(a({type:br.RegisterDroppable,element:{id:r,key:s,disabled:n,node:R,rect:p,data:M}}),()=>a({type:br.UnregisterDroppable,key:s,id:r})),[r]),y.useEffect(()=>{n!==h.current.disabled&&(a({type:br.SetDroppableDisabled,id:r,key:s,disabled:n}),h.current.disabled=n)},[r,s,n,a]),{active:o,rect:p,isOver:(l==null?void 0:l.id)===r,node:R,over:l,setNodeRef:L}}function J0(t,e,n){const r=t.slice();return r.splice(n<0?r.length+n:n,0,r.splice(e,1)[0]),r}function _K(t,e){return t.reduce((n,r,i)=>{const s=e.get(r);return s&&(n[i]=s),n},Array(t.length))}function Ag(t){return t!==null&&t>=0}function bK(t,e){if(t===e)return!0;if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function SK(t){return typeof t=="boolean"?{draggable:t,droppable:t}:t}const cN=t=>{let{rects:e,activeIndex:n,overIndex:r,index:i}=t;const s=J0(e,r,n),o=e[i],a=s[i];return!a||!o?null:{x:a.left-o.left,y:a.top-o.top,scaleX:a.width/o.width,scaleY:a.height/o.height}},Ng={scaleX:1,scaleY:1},dN=t=>{var e;let{activeIndex:n,activeNodeRect:r,index:i,rects:s,overIndex:o}=t;const a=(e=s[n])!=null?e:r;if(!a)return null;if(i===n){const c=s[o];return c?{x:0,y:n<o?c.top+c.height-(a.top+a.height):c.top-a.top,...Ng}:null}const l=CK(s,i,n);return i>n&&i<=o?{x:0,y:-a.height-l,...Ng}:i<n&&i>=o?{x:0,y:a.height+l,...Ng}:{x:0,y:0,...Ng}};function CK(t,e,n){const r=t[e],i=t[e-1],s=t[e+1];return r?n<e?i?r.top-(i.top+i.height):s?s.top-(r.top+r.height):0:s?s.top-(r.top+r.height):i?r.top-(i.top+i.height):0:0}const hN="Sortable",fN=Be.createContext({activeIndex:-1,containerId:hN,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:cN,disabled:{draggable:!1,droppable:!1}});function pN(t){let{children:e,id:n,items:r,strategy:i=cN,disabled:s=!1}=t;const{active:o,dragOverlay:a,droppableRects:l,over:c,measureDroppableContainers:h}=vK(),f=sp(hN,n),p=a.rect!==null,g=y.useMemo(()=>r.map(L=>typeof L=="object"&&"id"in L?L.id:L),[r]),v=o!=null,x=o?g.indexOf(o.id):-1,k=c?g.indexOf(c.id):-1,C=y.useRef(g),b=!bK(g,C.current),_=k!==-1&&x===-1||b,T=SK(s);Po(()=>{b&&v&&h(g)},[b,g,v,h]),y.useEffect(()=>{C.current=g},[g]);const R=y.useMemo(()=>({activeIndex:x,containerId:f,disabled:T,disableTransforms:_,items:g,overIndex:k,useDragOverlay:p,sortedRects:_K(g,l),strategy:i}),[x,f,T.draggable,T.droppable,_,g,k,l,p,i]);return Be.createElement(fN.Provider,{value:R},e)}const kK=t=>{let{id:e,items:n,activeIndex:r,overIndex:i}=t;return J0(n,r,i).indexOf(e)},EK=t=>{let{containerId:e,isSorting:n,wasDragging:r,index:i,items:s,newIndex:o,previousItems:a,previousContainerId:l,transition:c}=t;return!c||!r||a!==s&&i===o?!1:n?!0:o!==i&&e===l},RK={duration:200,easing:"ease"},gN="transform",TK=id.Transition.toString({property:gN,duration:0,easing:"linear"}),PK={roleDescription:"sortable"};function LK(t){let{disabled:e,index:n,node:r,rect:i}=t;const[s,o]=y.useState(null),a=y.useRef(n);return Po(()=>{if(!e&&n!==a.current&&r.current){const l=i.current;if(l){const c=Md(r.current,{ignoreTransform:!0}),h={x:l.left-c.left,y:l.top-c.top,scaleX:l.width/c.width,scaleY:l.height/c.height};(h.x||h.y)&&o(h)}}n!==a.current&&(a.current=n)},[e,n,r,i]),y.useEffect(()=>{s&&o(null)},[s]),s}function mN(t){let{animateLayoutChanges:e=EK,attributes:n,disabled:r,data:i,getNewIndex:s=kK,id:o,strategy:a,resizeObserverConfig:l,transition:c=RK}=t;const{items:h,containerId:f,activeIndex:p,disabled:g,disableTransforms:v,sortedRects:x,overIndex:k,useDragOverlay:C,strategy:b}=y.useContext(fN),_=MK(r,g),T=h.indexOf(o),R=y.useMemo(()=>({sortable:{containerId:f,index:T,items:h},...i}),[f,i,T,h]),L=y.useMemo(()=>h.slice(h.indexOf(o)),[h,o]),{rect:M,node:A,isOver:$,setNodeRef:j}=xK({id:o,data:R,disabled:_.droppable,resizeObserverConfig:{updateMeasurementsFor:L,...l}}),{active:V,activatorEvent:U,activeNodeRect:B,attributes:Z,setNodeRef:q,listeners:G,isDragging:te,over:O,setActivatorNodeRef:K,transform:Y}=mK({id:o,data:R,attributes:{...PK,...n},disabled:_.draggable}),xe=Qq(j,q),re=!!V,ue=re&&!v&&Ag(p)&&Ag(k),ke=!C&&te,qe=ke&&ue?Y:null,ge=ue?qe??(a??b)({rects:x,activeNodeRect:B,activeIndex:p,overIndex:k,index:T}):null,we=Ag(p)&&Ag(k)?s({id:o,items:h,activeIndex:p,overIndex:k}):T,ae=V==null?void 0:V.id,me=y.useRef({activeId:ae,items:h,newIndex:we,containerId:f}),X=h!==me.current.items,ye=e({active:V,containerId:f,isDragging:te,isSorting:re,id:o,index:T,items:h,newIndex:me.current.newIndex,previousItems:me.current.items,previousContainerId:me.current.containerId,transition:c,wasDragging:me.current.activeId!=null}),_e=LK({disabled:!ye,index:T,node:A,rect:M});return y.useEffect(()=>{re&&me.current.newIndex!==we&&(me.current.newIndex=we),f!==me.current.containerId&&(me.current.containerId=f),h!==me.current.items&&(me.current.items=h)},[re,we,f,h]),y.useEffect(()=>{if(ae===me.current.activeId)return;if(ae!=null&&me.current.activeId==null){me.current.activeId=ae;return}const Le=setTimeout(()=>{me.current.activeId=ae},50);return()=>clearTimeout(Le)},[ae]),{active:V,activeIndex:p,attributes:Z,data:R,rect:M,index:T,newIndex:we,items:h,isOver:$,isSorting:re,isDragging:te,listeners:G,node:A,overIndex:k,over:O,setNodeRef:xe,setActivatorNodeRef:K,setDroppableNodeRef:j,setDraggableNodeRef:q,transform:_e??ge,transition:at()};function at(){if(_e||X&&me.current.newIndex===T)return TK;if(!(ke&&!mS(U)||!c)&&(re||ye))return id.Transition.toString({...c,property:gN})}}function MK(t,e){var n,r;return typeof t=="boolean"?{draggable:t,droppable:!1}:{draggable:(n=t==null?void 0:t.draggable)!=null?n:e.draggable,droppable:(r=t==null?void 0:t.droppable)!=null?r:e.droppable}}rn.Down,rn.Right,rn.Up,rn.Left;const vN=t=>{let{transform:e}=t;return{...e,x:0}},AK={...PP};let CT=0;function NK(t,e="mui"){const[n,r]=y.useState(t),i=t||n;return y.useEffect(()=>{n==null&&(CT+=1,r(`${e}-${CT}`))},[n,e]),i}const kT=AK.useId;function Ml(t,e){if(kT!==void 0){const n=kT();return t??(e?`${e}-${n}`:n)}return NK(t,e)}function No(t,...e){const n=new URL(`https://base-ui.com/production-error/${t}`);return e.forEach(r=>n.searchParams.append("args[]",r)),`Base UI error #${t}; visit ${n} for the full message.`}const yN=y.createContext(void 0);function op(t=!0){const e=y.useContext(yN);if(e===void 0&&!t)throw new Error(No(25));return e}const wN=y.createContext(void 0);function xN(t){const e=y.useContext(wN);if(e===void 0&&!t)throw new Error(No(33));return e}const xS=y.createContext(void 0);function Al(t){const e=y.useContext(xS);if(e===void 0&&!t)throw new Error(No(36));return e}const ET={};function Ms(t,e){const n=y.useRef(ET);return n.current===ET&&(n.current=t(e)),n}function sd(t,e,n,r){const i=Ms(_N).current;return IK(i,t,e,n,r)&&bN(i,[t,e,n,r]),i.callback}function jK(t){const e=Ms(_N).current;return OK(e,t)&&bN(e,t),e.callback}function _N(){return{callback:null,cleanup:null,refs:[]}}function IK(t,e,n,r,i){return t.refs[0]!==e||t.refs[1]!==n||t.refs[2]!==r||t.refs[3]!==i}function OK(t,e){return t.refs.length!==e.length||t.refs.some((n,r)=>n!==e[r])}function bN(t,e){if(t.refs=e,e.every(n=>n==null)){t.callback=null;return}t.callback=n=>{if(t.cleanup&&(t.cleanup(),t.cleanup=null),n!=null){const r=Array(e.length).fill(null);for(let i=0;i<e.length;i+=1){const s=e[i];if(s!=null)switch(typeof s){case"function":{const o=s(n);typeof o=="function"&&(r[i]=o);break}case"object":{s.current=n;break}}}t.cleanup=()=>{for(let i=0;i<e.length;i+=1){const s=e[i];if(s!=null)switch(typeof s){case"function":{const o=r[i];typeof o=="function"?o():s(null);break}case"object":{s.current=null;break}}}}}}}const DK=parseInt(y.version,10);function _S(t){return DK>=t}function RT(t){if(!y.isValidElement(t))return null;const e=t,n=e.props;return(_S(19)?n==null?void 0:n.ref:e.ref)??null}function $x(t,e){if(t&&!e)return t;if(!t&&e)return e;if(t||e)return{...t,...e}}function FK(t,e){const n={};for(const r in t){const i=t[r];if(e!=null&&e.hasOwnProperty(r)){const s=e[r](i);s!=null&&Object.assign(n,s);continue}i===!0?n[`data-${r.toLowerCase()}`]="":i&&(n[`data-${r.toLowerCase()}`]=i.toString())}return n}function BK(t,e){return typeof t=="function"?t(e):t}function $K(t,e){return typeof t=="function"?t(e):t}const rf={};function ev(t,e,n,r,i){let s={...zx(t,rf)};return e&&(s=Lh(s,e)),n&&(s=Lh(s,n)),r&&(s=Lh(s,r)),i&&(s=Lh(s,i)),s}function zK(t){if(t.length===0)return rf;if(t.length===1)return zx(t[0],rf);let e={...zx(t[0],rf)};for(let n=1;n<t.length;n+=1)e=Lh(e,t[n]);return e}function Lh(t,e){return SN(e)?e(t):UK(t,e)}function UK(t,e){if(!e)return t;for(const n in e){const r=e[n];switch(n){case"style":{t[n]=$x(t.style,r);break}case"className":{t[n]=CN(t.className,r);break}default:VK(n,r)?t[n]=WK(t[n],r):t[n]=r}}return t}function VK(t,e){const n=t.charCodeAt(0),r=t.charCodeAt(1),i=t.charCodeAt(2);return n===111&&r===110&&i>=65&&i<=90&&(typeof e=="function"||typeof e>"u")}function SN(t){return typeof t=="function"}function zx(t,e){return SN(t)?t(e):t??rf}function WK(t,e){return e?t?n=>{if(HK(n)){const i=n;Ux(i);const s=e(i);return i.baseUIHandlerPrevented||t==null||t(i),s}const r=e(n);return t==null||t(n),r}:e:t}function Ux(t){return t.preventBaseUIHandler=()=>{t.baseUIHandlerPrevented=!0},t}function CN(t,e){return e?t?e+" "+t:e:t}function HK(t){return t!=null&&typeof t=="object"&&"nativeEvent"in t}function kN(){}const s0=Object.freeze([]),Nr=Object.freeze({}),GK=500,qK=500,YK={style:{transition:"none"}},KK="data-base-ui-click-trigger",XK={fallbackAxisSide:"none"},ZK={clipPath:"inset(50%)",position:"fixed",top:0,left:0};function Nl(t,e,n={}){const r=e.render,i=QK(e,n);if(n.enabled===!1)return null;const s=n.state??Nr;return JK(t,r,i,s)}function QK(t,e={}){const{className:n,style:r,render:i}=t,{state:s=Nr,ref:o,props:a,stateAttributesMapping:l,enabled:c=!0}=e,h=c?BK(n,s):void 0,f=c?$K(r,s):void 0,p=c?FK(s,l):Nr,g=c?$x(p,Array.isArray(a)?zK(a):a)??Nr:Nr;return typeof document<"u"&&(c?Array.isArray(o)?g.ref=jK([g.ref,RT(i),...o]):g.ref=sd(g.ref,RT(i),o):sd(null,null)),c?(h!==void 0&&(g.className=CN(g.className,h)),f!==void 0&&(g.style=$x(g.style,f)),g):Nr}function JK(t,e,n,r){if(e){if(typeof e=="function")return e(n,r);const i=ev(n,e.props);return i.ref=n.ref,y.cloneElement(e,i)}if(t&&typeof t=="string")return eX(t,n);throw new Error(No(8))}function eX(t,e){return t==="button"?y.createElement("button",{type:"button",...e,key:e.key}):t==="img"?y.createElement("img",{alt:"",...e,key:e.key}):y.createElement(t,e)}let o0=function(t){return t.startingStyle="data-starting-style",t.endingStyle="data-ending-style",t}({});const tX={[o0.startingStyle]:""},nX={[o0.endingStyle]:""},rX={transitionStatus(t){return t==="starting"?tX:t==="ending"?nX:null}};let bS=function(t){return t.open="data-open",t.closed="data-closed",t[t.startingStyle=o0.startingStyle]="startingStyle",t[t.endingStyle=o0.endingStyle]="endingStyle",t.anchorHidden="data-anchor-hidden",t}({}),Vx=function(t){return t.popupOpen="data-popup-open",t.pressed="data-pressed",t}({});Vx.popupOpen+"";const iX={[Vx.popupOpen]:"",[Vx.pressed]:""},sX={[bS.open]:""},oX={[bS.closed]:""},aX={[bS.anchorHidden]:""},Wx={open(t){return t?iX:null}},EN={open(t){return t?sX:oX},anchorHidden(t){return t?aX:null}},lX="none",fl="trigger-press",Ki="trigger-hover",a0="trigger-focus",SS="outside-press",RN="item-press",od="focus-out",CS="escape-key",dm="list-navigation",TN="cancel-open",Mh="sibling-open",uX="imperative-action",k1=PP[`useInsertionEffect${Math.random().toFixed(1)}`.slice(0,-3)],cX=k1&&k1!==y.useLayoutEffect?k1:t=>t();function dt(t){const e=Ms(dX).current;return e.next=t,cX(e.effect),e.trampoline}function dX(){const t={next:void 0,callback:hX,trampoline:(...e)=>{var n;return(n=t.callback)==null?void 0:n.call(t,...e)},effect:()=>{t.callback=t.next}};return t}function hX(){}function tv(){return typeof window<"u"}function jl(t){return kS(t)?(t.nodeName||"").toLowerCase():"#document"}function Ir(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function jo(t){var e;return(e=(kS(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function kS(t){return tv()?t instanceof Node||t instanceof Ir(t).Node:!1}function un(t){return tv()?t instanceof Element||t instanceof Ir(t).Element:!1}function Kn(t){return tv()?t instanceof HTMLElement||t instanceof Ir(t).HTMLElement:!1}function Hx(t){return!tv()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof Ir(t).ShadowRoot}const fX=new Set(["inline","contents"]);function Ou(t){const{overflow:e,overflowX:n,overflowY:r,display:i}=ts(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!fX.has(i)}const pX=new Set(["table","td","th"]);function gX(t){return pX.has(jl(t))}const mX=[":popover-open",":modal"];function nv(t){return mX.some(e=>{try{return t.matches(e)}catch{return!1}})}const vX=["transform","translate","scale","rotate","perspective"],yX=["transform","translate","scale","rotate","perspective","filter"],wX=["paint","layout","strict","content"];function ES(t){const e=rv(),n=un(t)?ts(t):t;return vX.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||yX.some(r=>(n.willChange||"").includes(r))||wX.some(r=>(n.contain||"").includes(r))}function xX(t){let e=Lo(t);for(;Kn(e)&&!Ro(e);){if(ES(e))return e;if(nv(e))return null;e=Lo(e)}return null}function rv(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const _X=new Set(["html","body","#document"]);function Ro(t){return _X.has(jl(t))}function ts(t){return Ir(t).getComputedStyle(t)}function iv(t){return un(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function Lo(t){if(jl(t)==="html")return t;const e=t.assignedSlot||t.parentNode||Hx(t)&&t.host||jo(t);return Hx(e)?e.host:e}function PN(t){const e=Lo(t);return Ro(e)?t.ownerDocument?t.ownerDocument.body:t.body:Kn(e)&&Ou(e)?e:PN(e)}function pl(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const i=PN(t),s=i===((r=t.ownerDocument)==null?void 0:r.body),o=Ir(i);if(s){const a=Gx(o);return e.concat(o,o.visualViewport||[],Ou(i)?i:[],a&&n?pl(a):[])}return e.concat(i,pl(i,[],n))}function Gx(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}const bX=()=>{},kt=typeof document<"u"?y.useLayoutEffect:bX,SX=y.createContext(void 0);function RS(t=!1){const e=y.useContext(SX);if(e===void 0&&!t)throw new Error(No(16));return e}function CX(t){const{focusableWhenDisabled:e,disabled:n,composite:r=!1,tabIndex:i=0,isNativeButton:s}=t,o=r&&e!==!1,a=r&&e===!1;return{props:y.useMemo(()=>{const c={onKeyDown(h){n&&e&&h.key!=="Tab"&&h.preventDefault()}};return r||(c.tabIndex=i,!s&&n&&(c.tabIndex=e?i:-1)),(s&&(e||o)||!s&&n)&&(c["aria-disabled"]=n),s&&(!e||a)&&(c.disabled=n),c},[r,n,e,o,a,s,i])}}function LN(t={}){const{disabled:e=!1,focusableWhenDisabled:n,tabIndex:r=0,native:i=!0}=t,s=y.useRef(null),o=RS(!0)!==void 0,a=dt(()=>{const p=s.current;return!!((p==null?void 0:p.tagName)==="A"&&(p!=null&&p.href))}),{props:l}=CX({focusableWhenDisabled:n,disabled:e,composite:o,tabIndex:r,isNativeButton:i}),c=y.useCallback(()=>{const p=s.current;kX(p)&&o&&e&&l.disabled===void 0&&p.disabled&&(p.disabled=!1)},[e,l.disabled,o]);kt(c,[c]);const h=y.useCallback((p={})=>{const{onClick:g,onMouseDown:v,onKeyUp:x,onKeyDown:k,onPointerDown:C,...b}=p;return ev({type:i?"button":void 0,onClick(T){if(e){T.preventDefault();return}g==null||g(T)},onMouseDown(T){e||v==null||v(T)},onKeyDown(T){if(e||(Ux(T),k==null||k(T)),T.baseUIHandlerPrevented)return;const R=T.target===T.currentTarget&&!i&&!a()&&!e,L=T.key==="Enter",M=T.key===" ";R&&((M||L)&&T.preventDefault(),L&&(g==null||g(T)))},onKeyUp(T){e||(Ux(T),x==null||x(T)),!T.baseUIHandlerPrevented&&T.target===T.currentTarget&&!i&&!e&&T.key===" "&&(g==null||g(T))},onPointerDown(T){if(e){T.preventDefault();return}C==null||C(T)}},i?void 0:{role:"button"},l,b)},[e,l,i,a]),f=dt(p=>{s.current=p,c()});return{getButtonProps:h,buttonRef:f}}function kX(t){return Kn(t)&&t.tagName==="BUTTON"}const EX={type:"regular-item"};function RX(t){const{closeOnClick:e,disabled:n=!1,highlighted:r,id:i,store:s,nativeButton:o,itemMetadata:a,nodeId:l}=t,c=y.useRef(null),h=op(!0),f=h!==void 0,{events:p}=s.useState("floatingTreeRoot"),{getButtonProps:g,buttonRef:v}=LN({disabled:n,focusableWhenDisabled:!0,native:o}),x=y.useCallback(C=>ev({id:i,role:"menuitem",tabIndex:r?0:-1,onMouseMove(b){l&&p.emit("itemhover",{nodeId:l,target:b.currentTarget})},onMouseEnter(){a.type==="submenu-trigger"&&a.setActive()},onKeyUp(b){b.key===" "&&s.context.typingRef.current&&b.preventBaseUIHandler()},onClick(b){e&&p.emit("close",{domEvent:b,reason:RN})},onMouseUp(b){if(h){const _=h.initialCursorPointRef.current;if(h.initialCursorPointRef.current=null,f&&_&&Math.abs(b.clientX-_.x)<=1&&Math.abs(b.clientY-_.y)<=1)return}c.current&&s.context.allowMouseUpTriggerRef.current&&(!f||b.button===2)&&a.type==="regular-item"&&c.current.click()}},C,g),[i,r,g,e,p,s,f,h,a,l]),k=sd(c,v);return y.useMemo(()=>({getItemProps:x,itemRef:k}),[x,k])}const MN=y.createContext({register:()=>{},unregister:()=>{},subscribeMapChange:()=>()=>{},elementsRef:{current:[]},nextIndexRef:{current:0}});function TX(){return y.useContext(MN)}let PX=function(t){return t[t.None=0]="None",t[t.GuessFromOrder=1]="GuessFromOrder",t}({});function AN(t={}){const{label:e,metadata:n,textRef:r,indexGuessBehavior:i,index:s}=t,{register:o,unregister:a,subscribeMapChange:l,elementsRef:c,labelsRef:h,nextIndexRef:f}=TX(),p=y.useRef(-1),[g,v]=y.useState(s??(i===PX.GuessFromOrder?()=>{if(p.current===-1){const C=f.current;f.current+=1,p.current=C}return p.current}:-1)),x=y.useRef(null),k=y.useCallback(C=>{var b;if(x.current=C,g!==-1&&C!==null&&(c.current[g]=C,h)){const _=e!==void 0;h.current[g]=_?e:((b=r==null?void 0:r.current)==null?void 0:b.textContent)??C.textContent}},[g,c,h,e,r]);return kt(()=>{if(s!=null)return;const C=x.current;if(C)return o(C,n),()=>{a(C)}},[s,o,a,n]),kt(()=>{if(s==null)return l(C=>{var _;const b=x.current?(_=C.get(x.current))==null?void 0:_.index:null;b!=null&&v(b)})},[s,l,v]),y.useMemo(()=>({ref:k,index:g}),[g,k])}function NN(t){return Ml(t,"base-ui")}function en(t,e,n,r){let i=!1,s=!1;const o=r??Nr;return{reason:t,event:e??new Event("base-ui"),cancel(){i=!0},allowPropagation(){s=!0},get isCanceled(){return i},get isPropagationAllowed(){return s},trigger:n,...o}}const LX=[];function jN(t){y.useEffect(t,LX)}const jg=null;class MX{constructor(){_t(this,"callbacks",[]);_t(this,"callbacksCount",0);_t(this,"nextId",1);_t(this,"startId",1);_t(this,"isScheduled",!1);_t(this,"tick",e=>{var i;this.isScheduled=!1;const n=this.callbacks,r=this.callbacksCount;if(this.callbacks=[],this.callbacksCount=0,this.startId=this.nextId,r>0)for(let s=0;s<n.length;s+=1)(i=n[s])==null||i.call(n,e)})}request(e){const n=this.nextId;this.nextId+=1,this.callbacks.push(e),this.callbacksCount+=1;const r=!1;return(!this.isScheduled||r)&&(requestAnimationFrame(this.tick),this.isScheduled=!0),n}cancel(e){const n=e-this.startId;n<0||n>=this.callbacks.length||(this.callbacks[n]=null,this.callbacksCount-=1)}}const Ig=new MX;class xo{constructor(){_t(this,"currentId",jg);_t(this,"cancel",()=>{this.currentId!==jg&&(Ig.cancel(this.currentId),this.currentId=jg)});_t(this,"disposeEffect",()=>this.cancel)}static create(){return new xo}static request(e){return Ig.request(e)}static cancel(e){return Ig.cancel(e)}request(e){this.cancel(),this.currentId=Ig.request(()=>{this.currentId=jg,e()})}}function sv(){const t=Ms(xo.create).current;return jN(t.disposeEffect),t}function AX(t,e=!1,n=!1){const[r,i]=y.useState(t&&e?"idle":void 0),[s,o]=y.useState(t);return t&&!s&&(o(!0),i("starting")),!t&&s&&r!=="ending"&&!n&&i("ending"),!t&&!s&&r==="ending"&&i(void 0),kt(()=>{if(!t&&s&&r!=="ending"&&n){const a=xo.request(()=>{i("ending")});return()=>{xo.cancel(a)}}},[t,s,r,n]),kt(()=>{if(!t||e)return;const a=xo.request(()=>{ai.flushSync(()=>{i(void 0)})});return()=>{xo.cancel(a)}},[e,t]),kt(()=>{if(!t||!e)return;t&&s&&r!=="idle"&&i("starting");const a=xo.request(()=>{i("idle")});return()=>{xo.cancel(a)}},[e,t,s,i,r]),y.useMemo(()=>({mounted:s,setMounted:o,transitionStatus:r}),[s,r])}function Hr(t){const e=Ms(NX,t).current;return e.next=t,kt(e.effect),e}function NX(t){const e={current:t,next:t,effect:()=>{e.current=e.next}};return e}function ru(t){return t==null?t:"current"in t?t.current:t}function jX(t,e=!1,n=!0){const r=sv();return dt((i,s=null)=>{r.cancel();const o=ru(t);o!=null&&(typeof o.getAnimations!="function"||globalThis.BASE_UI_ANIMATIONS_DISABLED?i():r.request(()=>{function a(){o&&Promise.all(o.getAnimations().map(l=>l.finished)).then(()=>{s!=null&&s.aborted||ai.flushSync(i)}).catch(()=>{if(n){if(s!=null&&s.aborted)return;ai.flushSync(i)}else o.getAnimations().length>0&&o.getAnimations().some(l=>l.pending||l.playState!=="finished")&&a()})}e?r.request(a):a()}))})}function IN(t){const{enabled:e=!0,open:n,ref:r,onComplete:i}=t,s=Hr(n),o=dt(i),a=jX(r,n);y.useEffect(()=>{e&&a(()=>{n===s.current&&o()})},[e,n,o,a,s])}const Xs=y.forwardRef(function(e,n){const{render:r,className:i,id:s,label:o,nativeButton:a=!1,disabled:l=!1,closeOnClick:c=!0,...h}=e,f=AN({label:o}),p=xN(!0),g=NN(s),{store:v}=Al(),x=v.useState("isActive",f.index),k=v.useState("itemProps"),{getItemProps:C,itemRef:b}=RX({closeOnClick:c,disabled:l,highlighted:x,id:g,store:v,nativeButton:a,nodeId:p==null?void 0:p.nodeId,itemMetadata:EX}),_=y.useMemo(()=>({disabled:l,highlighted:x}),[l,x]);return Nl("div",e,{state:_,props:[k,h,C],ref:[b,n,f.ref]})}),mh=0;class Eu{constructor(){_t(this,"currentId",mh);_t(this,"clear",()=>{this.currentId!==mh&&(clearTimeout(this.currentId),this.currentId=mh)});_t(this,"disposeEffect",()=>this.clear)}static create(){return new Eu}start(e,n){this.clear(),this.currentId=setTimeout(()=>{this.currentId=mh,n()},e)}isStarted(){return this.currentId!==mh}}function xi(){const t=Ms(Eu.create).current;return jN(t.disposeEffect),t}const Ad=typeof navigator<"u",E1=FX(),ON=$X(),DN=BX(),IX=typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter:none"),OX=E1.platform==="MacIntel"&&E1.maxTouchPoints>1?!0:/iP(hone|ad|od)|iOS/.test(E1.platform),FN=Ad&&/apple/i.test(navigator.vendor),qx=Ad&&/android/i.test(ON)||/android/i.test(DN),DX=Ad&&ON.toLowerCase().startsWith("mac")&&!navigator.maxTouchPoints,BN=DN.includes("jsdom/");function FX(){if(!Ad)return{platform:"",maxTouchPoints:-1};const t=navigator.userAgentData;return t!=null&&t.platform?{platform:t.platform,maxTouchPoints:navigator.maxTouchPoints}:{platform:navigator.platform??"",maxTouchPoints:navigator.maxTouchPoints??-1}}function BX(){if(!Ad)return"";const t=navigator.userAgentData;return t&&Array.isArray(t.brands)?t.brands.map(({brand:e,version:n})=>`${e}/${n}`).join(" "):navigator.userAgent}function $X(){if(!Ad)return"";const t=navigator.userAgentData;return t!=null&&t.platform?t.platform:navigator.platform??""}const Yx="data-base-ui-focusable",$N="active",zN="selected",UN="input:not([type='hidden']):not([disabled]),[contenteditable]:not([contenteditable='false']),textarea:not([disabled])",gl="ArrowLeft",ml="ArrowRight",TS="ArrowUp",ap="ArrowDown";function bo(t){var n;let e=t.activeElement;for(;((n=e==null?void 0:e.shadowRoot)==null?void 0:n.activeElement)!=null;)e=e.shadowRoot.activeElement;return e}function Dt(t,e){var r;if(!t||!e)return!1;const n=(r=e.getRootNode)==null?void 0:r.call(e);if(t.contains(e))return!0;if(n&&Hx(n)){let i=e;for(;i;){if(t===i)return!0;i=i.parentNode||i.host}}return!1}function oi(t){return"composedPath"in t?t.composedPath()[0]:t.target}function Us(t,e){if(e==null)return!1;if("composedPath"in t)return t.composedPath().includes(e);const n=t;return n.target!=null&&e.contains(n.target)}function zX(t){return t.matches("html,body")}function rr(t){return(t==null?void 0:t.ownerDocument)||document}function PS(t){return Kn(t)&&t.matches(UN)}function Kx(t){return t?t.getAttribute("role")==="combobox"&&PS(t):!1}function UX(t){if(!t||BN)return!0;try{return t.matches(":focus-visible")}catch{return!0}}function l0(t){return t?t.hasAttribute(Yx)?t:t.querySelector(`[${Yx}]`)||t:null}function wu(t,e,n=!0){return t.filter(i=>{var s;return i.parentId===e&&(!n||((s=i.context)==null?void 0:s.open))}).flatMap(i=>[i,...wu(t,i.id,n)])}function TT(t,e){var i;let n=[],r=(i=t.find(s=>s.id===e))==null?void 0:i.parentId;for(;r;){const s=t.find(o=>o.id===r);r=s==null?void 0:s.parentId,s&&(n=n.concat(s))}return n}function Wr(t){t.preventDefault(),t.stopPropagation()}function VX(t){return"nativeEvent"in t}function VN(t){return t.mozInputSource===0&&t.isTrusted?!0:qx&&t.pointerType?t.type==="click"&&t.buttons===1:t.detail===0&&!t.pointerType}function WN(t){return BN?!1:!qx&&t.width===0&&t.height===0||qx&&t.width===1&&t.height===1&&t.pressure===0&&t.detail===0&&t.pointerType==="mouse"||t.width<1&&t.height<1&&t.pressure===0&&t.detail===0&&t.pointerType==="touch"}function ad(t,e){const n=["mouse","pen"];return e||n.push("",void 0),n.includes(t)}function HN(t){const e=t.type;return e==="click"||e==="mousedown"||e==="keydown"||e==="keyup"}const WX=["top","right","bottom","left"],ld=Math.min,Hi=Math.max,u0=Math.round,Mc=Math.floor,To=t=>({x:t,y:t}),HX={left:"right",right:"left",bottom:"top",top:"bottom"},GX={start:"end",end:"start"};function Xx(t,e,n){return Hi(t,ld(e,n))}function pa(t,e){return typeof t=="function"?t(e):t}function Ji(t){return t.split("-")[0]}function Il(t){return t.split("-")[1]}function LS(t){return t==="x"?"y":"x"}function MS(t){return t==="y"?"height":"width"}const qX=new Set(["top","bottom"]);function ks(t){return qX.has(Ji(t))?"y":"x"}function AS(t){return LS(ks(t))}function YX(t,e,n){n===void 0&&(n=!1);const r=Il(t),i=AS(t),s=MS(i);let o=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(o=c0(o)),[o,c0(o)]}function KX(t){const e=c0(t);return[Zx(t),e,Zx(e)]}function Zx(t){return t.replace(/start|end/g,e=>GX[e])}const PT=["left","right"],LT=["right","left"],XX=["top","bottom"],ZX=["bottom","top"];function QX(t,e,n){switch(t){case"top":case"bottom":return n?e?LT:PT:e?PT:LT;case"left":case"right":return e?XX:ZX;default:return[]}}function JX(t,e,n,r){const i=Il(t);let s=QX(Ji(t),n==="start",r);return i&&(s=s.map(o=>o+"-"+i),e&&(s=s.concat(s.map(Zx)))),s}function c0(t){return t.replace(/left|right|bottom|top/g,e=>HX[e])}function eZ(t){return{top:0,right:0,bottom:0,left:0,...t}}function GN(t){return typeof t!="number"?eZ(t):{top:t,right:t,bottom:t,left:t}}function d0(t){const{x:e,y:n,width:r,height:i}=t;return{width:r,height:i,top:n,left:e,right:e+r,bottom:n+i,x:e,y:n}}function Og(t,e,n){return Math.floor(t/e)!==n}function sf(t,e){return e<0||e>=t.current.length}function R1(t,e){return ii(t,{disabledIndices:e})}function MT(t,e){return ii(t,{decrement:!0,startingIndex:t.current.length,disabledIndices:e})}function ii(t,{startingIndex:e=-1,decrement:n=!1,disabledIndices:r,amount:i=1}={}){let s=e;do s+=n?-i:i;while(s>=0&&s<=t.current.length-1&&of(t,s,r));return s}function tZ(t,{event:e,orientation:n,loopFocus:r,rtl:i,cols:s,disabledIndices:o,minIndex:a,maxIndex:l,prevIndex:c,stopEvent:h=!1}){let f=c;const p=[],g={};let v=!1;{let C=null,b=-1;t.current.forEach((_,T)=>{if(_==null)return;const R=_.closest('[role="row"]');R&&(v=!0),(R!==C||b===-1)&&(C=R,b+=1,p[b]=[]),p[b].push(T),g[T]=b})}const x=v&&p.length>0&&p.some(C=>C.length!==s);function k(C){if(!x||c===-1)return;const b=g[c];if(b==null)return;const _=p[b].indexOf(c);let T=C==="up"?b-1:b+1;r&&(T<0?T=p.length-1:T>=p.length&&(T=0));const R=new Set;for(;T>=0&&T<p.length&&!R.has(T);){R.add(T);const L=p[T];if(L.length===0){T=C==="up"?T-1:T+1;continue}const M=Math.min(_,L.length-1);for(let A=M;A>=0;A-=1){const $=L[A];if(!of(t,$,o))return $}T=C==="up"?T-1:T+1,r&&(T<0?T=p.length-1:T>=p.length&&(T=0))}}if(e.key===TS){const C=k("up");if(C!==void 0)h&&Wr(e),f=C;else{if(h&&Wr(e),c===-1)f=l;else if(f=ii(t,{startingIndex:f,amount:s,decrement:!0,disabledIndices:o}),r&&(c-s<a||f<0)){const b=c%s,_=l%s,T=l-(_-b);_===b?f=l:f=_>b?T:T-s}sf(t,f)&&(f=c)}}if(e.key===ap){const C=k("down");C!==void 0?(h&&Wr(e),f=C):(h&&Wr(e),c===-1?f=a:(f=ii(t,{startingIndex:c,amount:s,disabledIndices:o}),r&&c+s>l&&(f=ii(t,{startingIndex:c%s-s,amount:s,disabledIndices:o}))),sf(t,f)&&(f=c))}if(n==="both"){const C=Mc(c/s);e.key===(i?gl:ml)&&(h&&Wr(e),c%s!==s-1?(f=ii(t,{startingIndex:c,disabledIndices:o}),r&&Og(f,s,C)&&(f=ii(t,{startingIndex:c-c%s-1,disabledIndices:o}))):r&&(f=ii(t,{startingIndex:c-c%s-1,disabledIndices:o})),Og(f,s,C)&&(f=c)),e.key===(i?ml:gl)&&(h&&Wr(e),c%s!==0?(f=ii(t,{startingIndex:c,decrement:!0,disabledIndices:o}),r&&Og(f,s,C)&&(f=ii(t,{startingIndex:c+(s-c%s),decrement:!0,disabledIndices:o}))):r&&(f=ii(t,{startingIndex:c+(s-c%s),decrement:!0,disabledIndices:o})),Og(f,s,C)&&(f=c));const b=Mc(l/s)===C;sf(t,f)&&(r&&b?f=e.key===(i?ml:gl)?l:ii(t,{startingIndex:c-c%s-1,disabledIndices:o}):f=c)}return f}function nZ(t,e,n){const r=[];let i=0;return t.forEach(({width:s,height:o},a)=>{let l=!1;for(n&&(i=0);!l;){const c=[];for(let h=0;h<s;h+=1)for(let f=0;f<o;f+=1)c.push(i+h+f*e);i%e+s<=e&&c.every(h=>r[h]==null)?(c.forEach(h=>{r[h]=a}),l=!0):i+=1}}),[...r]}function rZ(t,e,n,r,i){if(t===-1)return-1;const s=n.indexOf(t),o=e[t];switch(i){case"tl":return s;case"tr":return o?s+o.width-1:s;case"bl":return o?s+(o.height-1)*r:s;case"br":return n.lastIndexOf(t);default:return-1}}function iZ(t,e){return e.flatMap((n,r)=>t.includes(n)?[r]:[])}function of(t,e,n){if(typeof n=="function")return n(e);if(n)return n.includes(e);const r=t.current[e];return r?r.hasAttribute("disabled")||r.getAttribute("aria-disabled")==="true":!1}/*!
* tabbable 6.3.0
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var sZ=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],h0=sZ.join(","),qN=typeof Element>"u",ud=qN?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,f0=!qN&&Element.prototype.getRootNode?function(t){var e;return t==null||(e=t.getRootNode)===null||e===void 0?void 0:e.call(t)}:function(t){return t==null?void 0:t.ownerDocument},Ff=function(e,n){var r;n===void 0&&(n=!0);var i=e==null||(r=e.getAttribute)===null||r===void 0?void 0:r.call(e,"inert"),s=i===""||i==="true",o=s||n&&e&&Ff(e.parentNode);return o},oZ=function(e){var n,r=e==null||(n=e.getAttribute)===null||n===void 0?void 0:n.call(e,"contenteditable");return r===""||r==="true"},YN=function(e,n,r){if(Ff(e))return[];var i=Array.prototype.slice.apply(e.querySelectorAll(h0));return n&&ud.call(e,h0)&&i.unshift(e),i=i.filter(r),i},p0=function(e,n,r){for(var i=[],s=Array.from(e);s.length;){var o=s.shift();if(!Ff(o,!1))if(o.tagName==="SLOT"){var a=o.assignedElements(),l=a.length?a:o.children,c=p0(l,!0,r);r.flatten?i.push.apply(i,c):i.push({scopeParent:o,candidates:c})}else{var h=ud.call(o,h0);h&&r.filter(o)&&(n||!e.includes(o))&&i.push(o);var f=o.shadowRoot||typeof r.getShadowRoot=="function"&&r.getShadowRoot(o),p=!Ff(f,!1)&&(!r.shadowRootFilter||r.shadowRootFilter(o));if(f&&p){var g=p0(f===!0?o.children:f.children,!0,r);r.flatten?i.push.apply(i,g):i.push({scopeParent:o,candidates:g})}else s.unshift.apply(s,o.children)}}return i},KN=function(e){return!isNaN(parseInt(e.getAttribute("tabindex"),10))},XN=function(e){if(!e)throw new Error("No node provided");return e.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(e.tagName)||oZ(e))&&!KN(e)?0:e.tabIndex},aZ=function(e,n){var r=XN(e);return r<0&&n&&!KN(e)?0:r},lZ=function(e,n){return e.tabIndex===n.tabIndex?e.documentOrder-n.documentOrder:e.tabIndex-n.tabIndex},ZN=function(e){return e.tagName==="INPUT"},uZ=function(e){return ZN(e)&&e.type==="hidden"},cZ=function(e){var n=e.tagName==="DETAILS"&&Array.prototype.slice.apply(e.children).some(function(r){return r.tagName==="SUMMARY"});return n},dZ=function(e,n){for(var r=0;r<e.length;r++)if(e[r].checked&&e[r].form===n)return e[r]},hZ=function(e){if(!e.name)return!0;var n=e.form||f0(e),r=function(a){return n.querySelectorAll('input[type="radio"][name="'+a+'"]')},i;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")i=r(window.CSS.escape(e.name));else try{i=r(e.name)}catch(o){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",o.message),!1}var s=dZ(i,e.form);return!s||s===e},fZ=function(e){return ZN(e)&&e.type==="radio"},pZ=function(e){return fZ(e)&&!hZ(e)},gZ=function(e){var n,r=e&&f0(e),i=(n=r)===null||n===void 0?void 0:n.host,s=!1;if(r&&r!==e){var o,a,l;for(s=!!((o=i)!==null&&o!==void 0&&(a=o.ownerDocument)!==null&&a!==void 0&&a.contains(i)||e!=null&&(l=e.ownerDocument)!==null&&l!==void 0&&l.contains(e));!s&&i;){var c,h,f;r=f0(i),i=(c=r)===null||c===void 0?void 0:c.host,s=!!((h=i)!==null&&h!==void 0&&(f=h.ownerDocument)!==null&&f!==void 0&&f.contains(i))}}return s},AT=function(e){var n=e.getBoundingClientRect(),r=n.width,i=n.height;return r===0&&i===0},mZ=function(e,n){var r=n.displayCheck,i=n.getShadowRoot;if(r==="full-native"&&"checkVisibility"in e){var s=e.checkVisibility({checkOpacity:!1,opacityProperty:!1,contentVisibilityAuto:!0,visibilityProperty:!0,checkVisibilityCSS:!0});return!s}if(getComputedStyle(e).visibility==="hidden")return!0;var o=ud.call(e,"details>summary:first-of-type"),a=o?e.parentElement:e;if(ud.call(a,"details:not([open]) *"))return!0;if(!r||r==="full"||r==="full-native"||r==="legacy-full"){if(typeof i=="function"){for(var l=e;e;){var c=e.parentElement,h=f0(e);if(c&&!c.shadowRoot&&i(c)===!0)return AT(e);e.assignedSlot?e=e.assignedSlot:!c&&h!==e.ownerDocument?e=h.host:e=c}e=l}if(gZ(e))return!e.getClientRects().length;if(r!=="legacy-full")return!0}else if(r==="non-zero-area")return AT(e);return!1},vZ=function(e){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(e.tagName))for(var n=e.parentElement;n;){if(n.tagName==="FIELDSET"&&n.disabled){for(var r=0;r<n.children.length;r++){var i=n.children.item(r);if(i.tagName==="LEGEND")return ud.call(n,"fieldset[disabled] *")?!0:!i.contains(e)}return!0}n=n.parentElement}return!1},Qx=function(e,n){return!(n.disabled||Ff(n)||uZ(n)||mZ(n,e)||cZ(n)||vZ(n))},Jx=function(e,n){return!(pZ(n)||XN(n)<0||!Qx(e,n))},yZ=function(e){var n=parseInt(e.getAttribute("tabindex"),10);return!!(isNaN(n)||n>=0)},QN=function(e){var n=[],r=[];return e.forEach(function(i,s){var o=!!i.scopeParent,a=o?i.scopeParent:i,l=aZ(a,o),c=o?QN(i.candidates):a;l===0?o?n.push.apply(n,c):n.push(a):r.push({documentOrder:s,tabIndex:l,item:i,isScope:o,content:c})}),r.sort(lZ).reduce(function(i,s){return s.isScope?i.push.apply(i,s.content):i.push(s.content),i},[]).concat(n)},lp=function(e,n){n=n||{};var r;return n.getShadowRoot?r=p0([e],n.includeContainer,{filter:Jx.bind(null,n),flatten:!1,getShadowRoot:n.getShadowRoot,shadowRootFilter:yZ}):r=YN(e,n.includeContainer,Jx.bind(null,n)),QN(r)},wZ=function(e,n){n=n||{};var r;return n.getShadowRoot?r=p0([e],n.includeContainer,{filter:Qx.bind(null,n),flatten:!0,getShadowRoot:n.getShadowRoot}):r=YN(e,n.includeContainer,Qx.bind(null,n)),r},JN=function(e,n){if(n=n||{},!e)throw new Error("No node provided");return ud.call(e,h0)===!1?!1:Jx(n,e)};const Nd=()=>({getShadowRoot:!0,displayCheck:typeof ResizeObserver=="function"&&ResizeObserver.toString().includes("[native code]")?"full":"none"});function ej(t,e){const n=lp(t,Nd()),r=n.length;if(r===0)return;const i=bo(rr(t)),s=n.indexOf(i),o=s===-1?e===1?0:r-1:s+e;return n[o]}function NS(t){return ej(rr(t).body,1)||t}function tj(t){return ej(rr(t).body,-1)||t}function nj(t,e){if(!t)return null;const n=lp(rr(t).body,Nd()),r=n.length;if(r===0)return null;const i=n.indexOf(t);if(i===-1)return null;const s=(i+e+r)%r;return n[s]}function xZ(t){return nj(t,1)}function _Z(t){return nj(t,-1)}function Wc(t,e){const n=e||t.currentTarget,r=t.relatedTarget;return!r||!Dt(n,r)}function bZ(t){lp(t,Nd()).forEach(n=>{n.dataset.tabindex=n.getAttribute("tabindex")||"",n.setAttribute("tabindex","-1")})}function NT(t){t.querySelectorAll("[data-tabindex]").forEach(n=>{const r=n.dataset.tabindex;delete n.dataset.tabindex,r?n.setAttribute("tabindex",r):n.removeAttribute("tabindex")})}function rj(){const t=new Map;return{emit(e,n){var r;(r=t.get(e))==null||r.forEach(i=>i(n))},on(e,n){t.has(e)||t.set(e,new Set),t.get(e).add(n)},off(e,n){var r;(r=t.get(e))==null||r.delete(n)}}}class jS{constructor(){_t(this,"nodesRef",{current:[]});_t(this,"events",rj())}addNode(e){this.nodesRef.current.push(e)}removeNode(e){const n=this.nodesRef.current.findIndex(r=>r===e);n!==-1&&this.nodesRef.current.splice(n,1)}}const ij=y.createContext(null),sj=y.createContext(null),_a=()=>{var t;return((t=y.useContext(ij))==null?void 0:t.id)||null},Ol=t=>{const e=y.useContext(sj);return t??e};function oj(t){const e=Ml(),n=Ol(t),r=_a();return kt(()=>{if(!e)return;const i={id:e,parentId:r};return n==null||n.addNode(i),()=>{n==null||n.removeNode(i)}},[n,e,r]),e}function SZ(t){const{children:e,id:n}=t,r=_a();return w.jsx(ij.Provider,{value:y.useMemo(()=>({id:n,parentId:r}),[n,r]),children:e})}function CZ(t){const{children:e,externalTree:n}=t,r=Ms(()=>n??new jS).current;return w.jsx(sj.Provider,{value:r,children:e})}function cd(t){return`data-base-ui-${t}`}function T1(t,e,n){if(n&&!ad(n))return 0;if(typeof t=="number")return t;if(typeof t=="function"){const r=t();return typeof r=="number"?r:r==null?void 0:r[e]}return t==null?void 0:t[e]}const aj={clip:"rect(0 0 0 0)",overflow:"hidden",whiteSpace:"nowrap",position:"fixed",top:0,left:0,border:0,padding:0,width:1,height:1,margin:-1};function Mo(t){return(t==null?void 0:t.ownerDocument)||document}const dd=y.forwardRef(function(e,n){const[r,i]=y.useState();kt(()=>{FN&&i("button")},[]);const s={tabIndex:0,role:r};return w.jsx("span",{...e,ref:n,style:aj,"aria-hidden":r?void 0:!0,...s,"data-base-ui-focus-guard":""})});let jT=0;function hm(t,e={}){const{preventScroll:n=!1,cancelPrevious:r=!0,sync:i=!1}=e;r&&cancelAnimationFrame(jT);const s=()=>t==null?void 0:t.focus({preventScroll:n});i?s():jT=requestAnimationFrame(s)}const Hc={inert:new WeakMap,"aria-hidden":new WeakMap,none:new WeakMap};function IT(t){return t==="inert"?Hc.inert:t==="aria-hidden"?Hc["aria-hidden"]:Hc.none}let Dg=new WeakSet,Fg={},P1=0;const lj=t=>t&&(t.host||lj(t.parentNode)),kZ=(t,e)=>e.map(n=>{if(t.contains(n))return n;const r=lj(n);return t.contains(r)?r:null}).filter(n=>n!=null);function EZ(t,e,n,r){const i="data-base-ui-inert",s=r?"inert":n?"aria-hidden":null,o=kZ(e,t),a=new Set,l=new Set(o),c=[];Fg[i]||(Fg[i]=new WeakMap);const h=Fg[i];o.forEach(f),p(e),a.clear();function f(g){!g||a.has(g)||(a.add(g),g.parentNode&&f(g.parentNode))}function p(g){!g||l.has(g)||[].forEach.call(g.children,v=>{if(jl(v)!=="script")if(a.has(v))p(v);else{const x=s?v.getAttribute(s):null,k=x!==null&&x!=="false",C=IT(s),b=(C.get(v)||0)+1,_=(h.get(v)||0)+1;C.set(v,b),h.set(v,_),c.push(v),b===1&&k&&Dg.add(v),_===1&&v.setAttribute(i,""),!k&&s&&v.setAttribute(s,s==="inert"?"":"true")}})}return P1+=1,()=>{c.forEach(g=>{const v=IT(s),k=(v.get(g)||0)-1,C=(h.get(g)||0)-1;v.set(g,k),h.set(g,C),k||(!Dg.has(g)&&s&&g.removeAttribute(s),Dg.delete(g)),C||g.removeAttribute(i)}),P1-=1,P1||(Hc.inert=new WeakMap,Hc["aria-hidden"]=new WeakMap,Hc.none=new WeakMap,Dg=new WeakSet,Fg={})}}function RZ(t,e=!1,n=!1){const r=rr(t[0]).body;return EZ(t.concat(Array.from(r.querySelectorAll("[aria-live]"))),r,e,n)}const uj=y.createContext(null),cj=()=>y.useContext(uj),TZ=cd("portal");function PZ(t={}){const{ref:e,container:n,componentProps:r=Nr,elementProps:i,elementState:s}=t,o=Ml(),a=cj(),l=a==null?void 0:a.portalNode,[c,h]=y.useState(null),[f,p]=y.useState(null),g=y.useRef(null);kt(()=>{if(n===null){g.current&&(g.current=null,p(null),h(null));return}if(o==null)return;const k=(n&&(kS(n)?n:n.current))??l??document.body;if(k==null){g.current&&(g.current=null,p(null),h(null));return}g.current!==k&&(g.current=k,p(null),h(k))},[n,l,o]);const v=Nl("div",r,{ref:[e,p],state:s,props:[{id:o,[TZ]:""},i]});return{portalNode:f,portalSubtree:c&&v?ai.createPortal(v,c):null}}const LZ=y.forwardRef(function(e,n){const{children:r,container:i,className:s,render:o,renderGuards:a,...l}=e,{portalNode:c,portalSubtree:h}=PZ({container:i,ref:n,componentProps:e,elementProps:l}),f=y.useRef(null),p=y.useRef(null),g=y.useRef(null),v=y.useRef(null),[x,k]=y.useState(null),C=x==null?void 0:x.modal,b=x==null?void 0:x.open,_=typeof a=="boolean"?a:!!x&&!x.modal&&x.open&&!!c;y.useEffect(()=>{if(!c||C)return;function R(L){c&&Wc(L)&&(L.type==="focusin"?NT:bZ)(c)}return c.addEventListener("focusin",R,!0),c.addEventListener("focusout",R,!0),()=>{c.removeEventListener("focusin",R,!0),c.removeEventListener("focusout",R,!0)}},[c,C]),y.useEffect(()=>{!c||b||NT(c)},[b,c]);const T=y.useMemo(()=>({beforeOutsideRef:f,afterOutsideRef:p,beforeInsideRef:g,afterInsideRef:v,portalNode:c,setFocusManagerState:k}),[c]);return w.jsxs(y.Fragment,{children:[h,w.jsxs(uj.Provider,{value:T,children:[_&&c&&w.jsx(dd,{"data-type":"outside",ref:f,onFocus:R=>{var L;if(Wc(R,c))(L=g.current)==null||L.focus();else{const M=x?x.domReference:null,A=tj(M);A==null||A.focus()}}}),_&&c&&w.jsx("span",{"aria-owns":c.id,style:ZK}),c&&ai.createPortal(r,c),_&&c&&w.jsx(dd,{"data-type":"outside",ref:p,onFocus:R=>{var L;if(Wc(R,c))(L=v.current)==null||L.focus();else{const M=x?x.domReference:null,A=NS(M);A==null||A.focus(),x!=null&&x.closeOnFocusOut&&(x==null||x.onOpenChange(!1,en(od,R.nativeEvent)))}}})]})]})});function MZ(t,e){const n=Ir(t.target);return t instanceof n.KeyboardEvent?"keyboard":t instanceof n.FocusEvent?e||"keyboard":"pointerType"in t?t.pointerType||"keyboard":"touches"in t?"touch":t instanceof n.MouseEvent?e||(t.detail===0?"keyboard":"mouse"):""}const OT=20;let rl=[];function IS(){rl=rl.filter(t=>t.isConnected)}function AZ(t){IS(),t&&jl(t)!=="body"&&(rl.push(t),rl.length>OT&&(rl=rl.slice(-OT)))}function L1(){return IS(),rl[rl.length-1]}function NZ(t){if(!t)return null;const e=Nd();return JN(t,e)?t:lp(t,e)[0]||t}function jZ(t){return!t||!t.isConnected?!1:typeof t.checkVisibility=="function"?t.checkVisibility():ts(t).display!=="none"}function DT(t,e){var o;if(!e.current.includes("floating")&&!((o=t.getAttribute("role"))!=null&&o.includes("dialog")))return;const n=Nd(),i=wZ(t,n).filter(a=>{const l=a.getAttribute("data-tabindex")||"";return JN(a,n)||a.hasAttribute("data-tabindex")&&!l.startsWith("-")}),s=t.getAttribute("tabindex");e.current.includes("floating")||i.length===0?s!=="0"&&t.setAttribute("tabindex","0"):(s!=="-1"||t.hasAttribute("data-tabindex")&&t.getAttribute("data-tabindex")!=="-1")&&(t.setAttribute("tabindex","-1"),t.setAttribute("data-tabindex","-1"))}function IZ(t){const{context:e,children:n,disabled:r=!1,order:i=["content"],initialFocus:s=!0,returnFocus:o=!0,restoreFocus:a=!1,modal:l=!0,closeOnFocusOut:c=!0,openInteractionType:h="",getInsideElements:f=()=>[],nextFocusableElement:p,previousFocusableElement:g,beforeContentFocusGuardRef:v,externalTree:x}=t,k="rootStore"in e?e.rootStore:e,C=k.useState("open"),b=k.useState("domReferenceElement"),_=k.useState("floatingElement"),{events:T,dataRef:R}=k.context,L=dt(()=>{var fe;return(fe=R.current.floatingContext)==null?void 0:fe.nodeId}),M=dt(f),A=s===!1,$=Kx(b)&&A,j=Hr(i),V=Hr(s),U=Hr(o),B=Hr(h),Z=Ol(x),q=cj(),G=y.useRef(null),te=y.useRef(null),O=y.useRef(!1),K=y.useRef(!1),Y=y.useRef(!1),xe=y.useRef(-1),re=y.useRef(""),ue=y.useRef(""),ke=xi(),qe=xi(),he=sv(),ge=q!=null,we=l0(_),ae=dt((fe=we)=>fe?lp(fe,Nd()):[]),me=dt(fe=>{const ve=ae(fe);return j.current.map(()=>ve).filter(Boolean).flat()});y.useEffect(()=>{if(r||!l)return;function fe(Ae){Ae.key==="Tab"&&Dt(we,bo(rr(we)))&&ae().length===0&&!$&&Wr(Ae)}const ve=rr(we);return ve.addEventListener("keydown",fe),()=>{ve.removeEventListener("keydown",fe)}},[r,b,we,l,j,$,ae,me]),y.useEffect(()=>{if(r||!_)return;function fe(ve){const Ae=oi(ve),Ue=ae().indexOf(Ae);Ue!==-1&&(xe.current=Ue)}return _.addEventListener("focusin",fe),()=>{_.removeEventListener("focusin",fe)}},[r,_,ae]),y.useEffect(()=>{if(r||!C)return;const fe=rr(we);function ve(){Y.current=!1}function Ae(Ue){const Ie=oi(Ue),ze=Dt(_,Ie)||Dt(b,Ie)||Dt(q==null?void 0:q.portalNode,Ie);Y.current=!ze,ue.current=Ue.pointerType||"keyboard"}function De(){ue.current="keyboard"}return fe.addEventListener("pointerdown",Ae,!0),fe.addEventListener("pointerup",ve,!0),fe.addEventListener("pointercancel",ve,!0),fe.addEventListener("keydown",De,!0),()=>{fe.removeEventListener("pointerdown",Ae,!0),fe.removeEventListener("pointerup",ve,!0),fe.removeEventListener("pointercancel",ve,!0),fe.removeEventListener("keydown",De,!0)}},[r,_,b,we,C,q]),y.useEffect(()=>{if(r||!c)return;function fe(){K.current=!0,qe.start(0,()=>{K.current=!1})}function ve(Ie){const ze=Ie.relatedTarget,Ce=Ie.currentTarget,Oe=oi(Ie);queueMicrotask(()=>{const Ne=L(),yt=k.context.triggerElements,Fe=!(Dt(b,ze)||Dt(_,ze)||Dt(ze,_)||Dt(q==null?void 0:q.portalNode,ze)||ze!=null&&yt.hasElement(ze)||yt.hasMatchingElement(st=>Dt(st,ze))||ze!=null&&ze.hasAttribute(cd("focus-guard"))||Z&&(wu(Z.nodesRef.current,Ne).find(st=>{var wt,At;return Dt((wt=st.context)==null?void 0:wt.elements.floating,ze)||Dt((At=st.context)==null?void 0:At.elements.domReference,ze)})||TT(Z.nodesRef.current,Ne).find(st=>{var wt,At,Ye;return[(wt=st.context)==null?void 0:wt.elements.floating,l0((At=st.context)==null?void 0:At.elements.floating)].includes(ze)||((Ye=st.context)==null?void 0:Ye.elements.domReference)===ze})));if(Ce===b&&we&&DT(we,j),a&&Ce!==b&&!jZ(Oe)&&bo(rr(we))===rr(we).body){if(Kn(we)&&(we.focus(),a==="popup")){he.request(()=>{we.focus()});return}const st=xe.current,wt=ae(),At=wt[st]||wt[wt.length-1]||we;Kn(At)&&At.focus()}if(R.current.insideReactTree){R.current.insideReactTree=!1;return}($||!l)&&ze&&Fe&&!K.current&&($||ze!==L1())&&(O.current=!0,k.setOpen(!1,en(od,Ie)))})}function Ae(){Y.current||(R.current.insideReactTree=!0,ke.start(0,()=>{R.current.insideReactTree=!1}))}const De=Kn(b)?b:null,Ue=[];if(!(!_&&!De))return De&&(De.addEventListener("focusout",ve),De.addEventListener("pointerdown",fe),Ue.push(()=>{De.removeEventListener("focusout",ve),De.removeEventListener("pointerdown",fe)})),_&&(_.addEventListener("focusout",ve),q&&(_.addEventListener("focusout",Ae,!0),Ue.push(()=>{_.removeEventListener("focusout",Ae,!0)})),Ue.push(()=>{_.removeEventListener("focusout",ve)})),()=>{Ue.forEach(Ie=>{Ie()})}},[r,b,_,we,l,Z,q,k,c,a,ae,$,L,j,R,ke,qe,he]);const X=y.useRef(null),ye=y.useRef(null),_e=sd(X,v,q==null?void 0:q.beforeInsideRef),at=sd(ye,q==null?void 0:q.afterInsideRef);y.useEffect(()=>{var Ie,ze,Ce;if(r||!_||!C)return;const fe=Array.from(((Ie=q==null?void 0:q.portalNode)==null?void 0:Ie.querySelectorAll(`[${cd("portal")}]`))||[]),Ae=(Ce=(ze=(Z?TT(Z.nodesRef.current,L()):[]).find(Oe=>{var Ne;return Kx(((Ne=Oe.context)==null?void 0:Ne.elements.domReference)||null)}))==null?void 0:ze.context)==null?void 0:Ce.elements.domReference,De=[_,Ae,...fe,...M(),G.current,te.current,X.current,ye.current,q==null?void 0:q.beforeOutsideRef.current,q==null?void 0:q.afterOutsideRef.current,ru(g),ru(p),$?b:null].filter(Oe=>Oe!=null),Ue=RZ(De,l||$);return()=>{Ue()}},[C,r,b,_,l,j,q,$,Z,L,M,p,g]),kt(()=>{if(!C||r||!Kn(we))return;const fe=rr(we),ve=bo(fe);queueMicrotask(()=>{const Ae=me(we),De=V.current,Ue=typeof De=="function"?De(B.current||""):De;if(Ue===void 0||Ue===!1)return;let Ie;Ue===!0||Ue===null?Ie=Ae[0]||we:Ie=ru(Ue),Ie=Ie||Ae[0]||we,!Dt(we,ve)&&hm(Ie,{preventScroll:Ie===we})})},[r,C,we,A,me,V,B]),kt(()=>{if(r||!we)return;const fe=rr(we),ve=bo(fe);AZ(ve);function Ae(Ie){if(Ie.open||(re.current=MZ(Ie.nativeEvent,ue.current)),Ie.reason===Ki&&Ie.nativeEvent.type==="mouseleave"&&(O.current=!0),Ie.reason===SS)if(Ie.nested)O.current=!1;else if(VN(Ie.nativeEvent)||WN(Ie.nativeEvent))O.current=!1;else{let ze=!1;document.createElement("div").focus({get preventScroll(){return ze=!0,!1}}),ze?O.current=!1:O.current=!0}}T.on("openchange",Ae);const De=fe.createElement("span");De.setAttribute("tabindex","-1"),De.setAttribute("aria-hidden","true"),Object.assign(De.style,aj),ge&&b&&b.insertAdjacentElement("afterend",De);function Ue(){const Ie=U.current;let ze=typeof Ie=="function"?Ie(re.current):Ie;if(ze===void 0||ze===!1)return null;if(ze===null&&(ze=!0),typeof ze=="boolean"){const Oe=b||L1();return Oe&&Oe.isConnected?Oe:De}const Ce=b||L1()||De;return ru(ze)||Ce}return()=>{T.off("openchange",Ae);const Ie=bo(fe),ze=Dt(_,Ie)||Z&&wu(Z.nodesRef.current,L(),!1).some(Oe=>{var Ne;return Dt((Ne=Oe.context)==null?void 0:Ne.elements.floating,Ie)}),Ce=Ue();queueMicrotask(()=>{const Oe=NZ(Ce),Ne=typeof U.current!="boolean";U.current&&!O.current&&Kn(Oe)&&(!(!Ne&&Oe!==Ie&&Ie!==fe.body)||ze)&&Oe.focus({preventScroll:!0}),De.remove()})}},[r,_,we,U,R,T,Z,ge,b,L]),y.useEffect(()=>{queueMicrotask(()=>{O.current=!1})},[r]),y.useEffect(()=>{if(r||!C)return;function fe(Ae){const De=oi(Ae);De!=null&&De.closest(`[${KK}]`)&&(K.current=!0)}const ve=rr(we);return ve.addEventListener("pointerdown",fe,!0),()=>{ve.removeEventListener("pointerdown",fe,!0)}},[r,C,we]),kt(()=>{if(!r&&q)return q.setFocusManagerState({modal:l,closeOnFocusOut:c,open:C,onOpenChange:k.setOpen,domReference:b}),()=>{q.setFocusManagerState(null)}},[r,q,l,C,k,c,b]),kt(()=>{if(!(r||!we))return DT(we,j),()=>{queueMicrotask(IS)}},[r,we,j]);const Le=!r&&(l?!$:!0)&&(ge||l);return w.jsxs(y.Fragment,{children:[Le&&w.jsx(dd,{"data-type":"inside",ref:_e,onFocus:fe=>{var ve;if(l){const Ae=me();hm(Ae[Ae.length-1])}else if(q!=null&&q.portalNode)if(O.current=!1,Wc(fe,q.portalNode)){const Ae=NS(b);Ae==null||Ae.focus()}else(ve=ru(g??q.beforeOutsideRef))==null||ve.focus()}}),n,Le&&w.jsx(dd,{"data-type":"inside",ref:at,onFocus:fe=>{var ve;if(l)hm(me()[0]);else if(q!=null&&q.portalNode)if(c&&(O.current=!0),Wc(fe,q.portalNode)){const Ae=tj(b);Ae==null||Ae.focus()}else(ve=ru(p??q.afterOutsideRef))==null||ve.focus()}})]})}function OZ(t,e={}){const n="rootStore"in t?t.rootStore:t,r=n.context.dataRef,{enabled:i=!0,event:s="click",toggle:o=!0,ignoreMouse:a=!1,stickIfOpen:l=!0,touchOpenDelay:c=0}=e,h=y.useRef(void 0),f=sv(),p=xi(),g=y.useMemo(()=>({onPointerDown(v){h.current=v.pointerType},onMouseDown(v){const x=h.current,k=v.nativeEvent,C=n.select("open");if(v.button!==0||s==="click"||ad(x,!0)&&a)return;const b=r.current.openEvent,_=b==null?void 0:b.type,T=n.select("domReferenceElement")!==v.currentTarget,R=C&&T||!(C&&o&&(!(b&&l)||_==="click"||_==="mousedown"));if(PS(k.target)){const M=en(fl,k,k.target);R&&x==="touch"&&c>0?p.start(c,()=>{n.setOpen(!0,M)}):n.setOpen(R,M);return}const L=v.currentTarget;f.request(()=>{const M=en(fl,k,L);R&&x==="touch"&&c>0?p.start(c,()=>{n.setOpen(!0,M)}):n.setOpen(R,M)})},onClick(v){if(s==="mousedown-only")return;const x=h.current;if(s==="mousedown"&&x){h.current=void 0;return}if(ad(x,!0)&&a)return;const k=n.select("open"),C=r.current.openEvent,b=n.select("domReferenceElement")!==v.currentTarget,_=k&&b||!(k&&o&&(!(C&&l)||HN(C))),T=en(fl,v.nativeEvent,v.currentTarget);_&&x==="touch"&&c>0?p.start(c,()=>{n.setOpen(!0,T)}):n.setOpen(_,T)},onKeyDown(){h.current=void 0}}),[r,s,a,n,l,o,f,p,c]);return y.useMemo(()=>i?{reference:g}:Nr,[i,g])}function FT(t,e,n){let{reference:r,floating:i}=t;const s=ks(e),o=AS(e),a=MS(o),l=Ji(e),c=s==="y",h=r.x+r.width/2-i.width/2,f=r.y+r.height/2-i.height/2,p=r[a]/2-i[a]/2;let g;switch(l){case"top":g={x:h,y:r.y-i.height};break;case"bottom":g={x:h,y:r.y+r.height};break;case"right":g={x:r.x+r.width,y:f};break;case"left":g={x:r.x-i.width,y:f};break;default:g={x:r.x,y:r.y}}switch(Il(e)){case"start":g[o]-=p*(n&&c?-1:1);break;case"end":g[o]+=p*(n&&c?-1:1);break}return g}const DZ=async(t,e,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:s=[],platform:o}=n,a=s.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e));let c=await o.getElementRects({reference:t,floating:e,strategy:i}),{x:h,y:f}=FT(c,r,l),p=r,g={},v=0;for(let x=0;x<a.length;x++){const{name:k,fn:C}=a[x],{x:b,y:_,data:T,reset:R}=await C({x:h,y:f,initialPlacement:r,placement:p,strategy:i,middlewareData:g,rects:c,platform:o,elements:{reference:t,floating:e}});h=b??h,f=_??f,g={...g,[k]:{...g[k],...T}},R&&v<=50&&(v++,typeof R=="object"&&(R.placement&&(p=R.placement),R.rects&&(c=R.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:i}):R.rects),{x:h,y:f}=FT(c,p,l)),x=-1)}return{x:h,y:f,placement:p,strategy:i,middlewareData:g}};async function Bf(t,e){var n;e===void 0&&(e={});const{x:r,y:i,platform:s,rects:o,elements:a,strategy:l}=t,{boundary:c="clippingAncestors",rootBoundary:h="viewport",elementContext:f="floating",altBoundary:p=!1,padding:g=0}=pa(e,t),v=GN(g),k=a[p?f==="floating"?"reference":"floating":f],C=d0(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(k)))==null||n?k:k.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:c,rootBoundary:h,strategy:l})),b=f==="floating"?{x:r,y:i,width:o.floating.width,height:o.floating.height}:o.reference,_=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),T=await(s.isElement==null?void 0:s.isElement(_))?await(s.getScale==null?void 0:s.getScale(_))||{x:1,y:1}:{x:1,y:1},R=d0(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:b,offsetParent:_,strategy:l}):b);return{top:(C.top-R.top+v.top)/T.y,bottom:(R.bottom-C.bottom+v.bottom)/T.y,left:(C.left-R.left+v.left)/T.x,right:(R.right-C.right+v.right)/T.x}}const FZ=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:i,middlewareData:s,rects:o,initialPlacement:a,platform:l,elements:c}=e,{mainAxis:h=!0,crossAxis:f=!0,fallbackPlacements:p,fallbackStrategy:g="bestFit",fallbackAxisSideDirection:v="none",flipAlignment:x=!0,...k}=pa(t,e);if((n=s.arrow)!=null&&n.alignmentOffset)return{};const C=Ji(i),b=ks(a),_=Ji(a)===a,T=await(l.isRTL==null?void 0:l.isRTL(c.floating)),R=p||(_||!x?[c0(a)]:KX(a)),L=v!=="none";!p&&L&&R.push(...JX(a,x,v,T));const M=[a,...R],A=await Bf(e,k),$=[];let j=((r=s.flip)==null?void 0:r.overflows)||[];if(h&&$.push(A[C]),f){const Z=YX(i,o,T);$.push(A[Z[0]],A[Z[1]])}if(j=[...j,{placement:i,overflows:$}],!$.every(Z=>Z<=0)){var V,U;const Z=(((V=s.flip)==null?void 0:V.index)||0)+1,q=M[Z];if(q&&(!(f==="alignment"?b!==ks(q):!1)||j.every(O=>ks(O.placement)===b?O.overflows[0]>0:!0)))return{data:{index:Z,overflows:j},reset:{placement:q}};let G=(U=j.filter(te=>te.overflows[0]<=0).sort((te,O)=>te.overflows[1]-O.overflows[1])[0])==null?void 0:U.placement;if(!G)switch(g){case"bestFit":{var B;const te=(B=j.filter(O=>{if(L){const K=ks(O.placement);return K===b||K==="y"}return!0}).map(O=>[O.placement,O.overflows.filter(K=>K>0).reduce((K,Y)=>K+Y,0)]).sort((O,K)=>O[1]-K[1])[0])==null?void 0:B[0];te&&(G=te);break}case"initialPlacement":G=a;break}if(i!==G)return{reset:{placement:G}}}return{}}}};function BT(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function $T(t){return WX.some(e=>t[e]>=0)}const BZ=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...i}=pa(t,e);switch(r){case"referenceHidden":{const s=await Bf(e,{...i,elementContext:"reference"}),o=BT(s,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:$T(o)}}}case"escaped":{const s=await Bf(e,{...i,altBoundary:!0}),o=BT(s,n.floating);return{data:{escapedOffsets:o,escaped:$T(o)}}}default:return{}}}}},dj=new Set(["left","top"]);async function $Z(t,e){const{placement:n,platform:r,elements:i}=t,s=await(r.isRTL==null?void 0:r.isRTL(i.floating)),o=Ji(n),a=Il(n),l=ks(n)==="y",c=dj.has(o)?-1:1,h=s&&l?-1:1,f=pa(e,t);let{mainAxis:p,crossAxis:g,alignmentAxis:v}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return a&&typeof v=="number"&&(g=a==="end"?v*-1:v),l?{x:g*h,y:p*c}:{x:p*c,y:g*h}}const zZ=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:i,y:s,placement:o,middlewareData:a}=e,l=await $Z(e,t);return o===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:i+l.x,y:s+l.y,data:{...l,placement:o}}}}},UZ=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:i}=e,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:k=>{let{x:C,y:b}=k;return{x:C,y:b}}},...l}=pa(t,e),c={x:n,y:r},h=await Bf(e,l),f=ks(Ji(i)),p=LS(f);let g=c[p],v=c[f];if(s){const k=p==="y"?"top":"left",C=p==="y"?"bottom":"right",b=g+h[k],_=g-h[C];g=Xx(b,g,_)}if(o){const k=f==="y"?"top":"left",C=f==="y"?"bottom":"right",b=v+h[k],_=v-h[C];v=Xx(b,v,_)}const x=a.fn({...e,[p]:g,[f]:v});return{...x,data:{x:x.x-n,y:x.y-r,enabled:{[p]:s,[f]:o}}}}}},VZ=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:i,rects:s,middlewareData:o}=e,{offset:a=0,mainAxis:l=!0,crossAxis:c=!0}=pa(t,e),h={x:n,y:r},f=ks(i),p=LS(f);let g=h[p],v=h[f];const x=pa(a,e),k=typeof x=="number"?{mainAxis:x,crossAxis:0}:{mainAxis:0,crossAxis:0,...x};if(l){const _=p==="y"?"height":"width",T=s.reference[p]-s.floating[_]+k.mainAxis,R=s.reference[p]+s.reference[_]-k.mainAxis;g<T?g=T:g>R&&(g=R)}if(c){var C,b;const _=p==="y"?"width":"height",T=dj.has(Ji(i)),R=s.reference[f]-s.floating[_]+(T&&((C=o.offset)==null?void 0:C[f])||0)+(T?0:k.crossAxis),L=s.reference[f]+s.reference[_]+(T?0:((b=o.offset)==null?void 0:b[f])||0)-(T?k.crossAxis:0);v<R?v=R:v>L&&(v=L)}return{[p]:g,[f]:v}}}},WZ=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:i,rects:s,platform:o,elements:a}=e,{apply:l=()=>{},...c}=pa(t,e),h=await Bf(e,c),f=Ji(i),p=Il(i),g=ks(i)==="y",{width:v,height:x}=s.floating;let k,C;f==="top"||f==="bottom"?(k=f,C=p===(await(o.isRTL==null?void 0:o.isRTL(a.floating))?"start":"end")?"left":"right"):(C=f,k=p==="end"?"top":"bottom");const b=x-h.top-h.bottom,_=v-h.left-h.right,T=ld(x-h[k],b),R=ld(v-h[C],_),L=!e.middlewareData.shift;let M=T,A=R;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(A=_),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(M=b),L&&!p){const j=Hi(h.left,0),V=Hi(h.right,0),U=Hi(h.top,0),B=Hi(h.bottom,0);g?A=v-2*(j!==0||V!==0?j+V:Hi(h.left,h.right)):M=x-2*(U!==0||B!==0?U+B:Hi(h.top,h.bottom))}await l({...e,availableWidth:A,availableHeight:M});const $=await o.getDimensions(a.floating);return v!==$.width||x!==$.height?{reset:{rects:!0}}:{}}}};function hj(t){const e=ts(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const i=Kn(t),s=i?t.offsetWidth:n,o=i?t.offsetHeight:r,a=u0(n)!==s||u0(r)!==o;return a&&(n=s,r=o),{width:n,height:r,$:a}}function OS(t){return un(t)?t:t.contextElement}function Gc(t){const e=OS(t);if(!Kn(e))return To(1);const n=e.getBoundingClientRect(),{width:r,height:i,$:s}=hj(e);let o=(s?u0(n.width):n.width)/r,a=(s?u0(n.height):n.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const HZ=To(0);function fj(t){const e=Ir(t);return!rv()||!e.visualViewport?HZ:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function GZ(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==Ir(t)?!1:e}function Ru(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const i=t.getBoundingClientRect(),s=OS(t);let o=To(1);e&&(r?un(r)&&(o=Gc(r)):o=Gc(t));const a=GZ(s,n,r)?fj(s):To(0);let l=(i.left+a.x)/o.x,c=(i.top+a.y)/o.y,h=i.width/o.x,f=i.height/o.y;if(s){const p=Ir(s),g=r&&un(r)?Ir(r):r;let v=p,x=Gx(v);for(;x&&r&&g!==v;){const k=Gc(x),C=x.getBoundingClientRect(),b=ts(x),_=C.left+(x.clientLeft+parseFloat(b.paddingLeft))*k.x,T=C.top+(x.clientTop+parseFloat(b.paddingTop))*k.y;l*=k.x,c*=k.y,h*=k.x,f*=k.y,l+=_,c+=T,v=Ir(x),x=Gx(v)}}return d0({width:h,height:f,x:l,y:c})}function ov(t,e){const n=iv(t).scrollLeft;return e?e.left+n:Ru(jo(t)).left+n}function pj(t,e){const n=t.getBoundingClientRect(),r=n.left+e.scrollLeft-ov(t,n),i=n.top+e.scrollTop;return{x:r,y:i}}function qZ(t){let{elements:e,rect:n,offsetParent:r,strategy:i}=t;const s=i==="fixed",o=jo(r),a=e?nv(e.floating):!1;if(r===o||a&&s)return n;let l={scrollLeft:0,scrollTop:0},c=To(1);const h=To(0),f=Kn(r);if((f||!f&&!s)&&((jl(r)!=="body"||Ou(o))&&(l=iv(r)),Kn(r))){const g=Ru(r);c=Gc(r),h.x=g.x+r.clientLeft,h.y=g.y+r.clientTop}const p=o&&!f&&!s?pj(o,l):To(0);return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-l.scrollLeft*c.x+h.x+p.x,y:n.y*c.y-l.scrollTop*c.y+h.y+p.y}}function YZ(t){return Array.from(t.getClientRects())}function KZ(t){const e=jo(t),n=iv(t),r=t.ownerDocument.body,i=Hi(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),s=Hi(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+ov(t);const a=-n.scrollTop;return ts(r).direction==="rtl"&&(o+=Hi(e.clientWidth,r.clientWidth)-i),{width:i,height:s,x:o,y:a}}const zT=25;function XZ(t,e){const n=Ir(t),r=jo(t),i=n.visualViewport;let s=r.clientWidth,o=r.clientHeight,a=0,l=0;if(i){s=i.width,o=i.height;const h=rv();(!h||h&&e==="fixed")&&(a=i.offsetLeft,l=i.offsetTop)}const c=ov(r);if(c<=0){const h=r.ownerDocument,f=h.body,p=getComputedStyle(f),g=h.compatMode==="CSS1Compat"&&parseFloat(p.marginLeft)+parseFloat(p.marginRight)||0,v=Math.abs(r.clientWidth-f.clientWidth-g);v<=zT&&(s-=v)}else c<=zT&&(s+=c);return{width:s,height:o,x:a,y:l}}const ZZ=new Set(["absolute","fixed"]);function QZ(t,e){const n=Ru(t,!0,e==="fixed"),r=n.top+t.clientTop,i=n.left+t.clientLeft,s=Kn(t)?Gc(t):To(1),o=t.clientWidth*s.x,a=t.clientHeight*s.y,l=i*s.x,c=r*s.y;return{width:o,height:a,x:l,y:c}}function UT(t,e,n){let r;if(e==="viewport")r=XZ(t,n);else if(e==="document")r=KZ(jo(t));else if(un(e))r=QZ(e,n);else{const i=fj(t);r={x:e.x-i.x,y:e.y-i.y,width:e.width,height:e.height}}return d0(r)}function gj(t,e){const n=Lo(t);return n===e||!un(n)||Ro(n)?!1:ts(n).position==="fixed"||gj(n,e)}function JZ(t,e){const n=e.get(t);if(n)return n;let r=pl(t,[],!1).filter(a=>un(a)&&jl(a)!=="body"),i=null;const s=ts(t).position==="fixed";let o=s?Lo(t):t;for(;un(o)&&!Ro(o);){const a=ts(o),l=ES(o);!l&&a.position==="fixed"&&(i=null),(s?!l&&!i:!l&&a.position==="static"&&!!i&&ZZ.has(i.position)||Ou(o)&&!l&&gj(t,o))?r=r.filter(h=>h!==o):i=a,o=Lo(o)}return e.set(t,r),r}function eQ(t){let{element:e,boundary:n,rootBoundary:r,strategy:i}=t;const o=[...n==="clippingAncestors"?nv(e)?[]:JZ(e,this._c):[].concat(n),r],a=o[0],l=o.reduce((c,h)=>{const f=UT(e,h,i);return c.top=Hi(f.top,c.top),c.right=ld(f.right,c.right),c.bottom=ld(f.bottom,c.bottom),c.left=Hi(f.left,c.left),c},UT(e,a,i));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function tQ(t){const{width:e,height:n}=hj(t);return{width:e,height:n}}function nQ(t,e,n){const r=Kn(e),i=jo(e),s=n==="fixed",o=Ru(t,!0,s,e);let a={scrollLeft:0,scrollTop:0};const l=To(0);function c(){l.x=ov(i)}if(r||!r&&!s)if((jl(e)!=="body"||Ou(i))&&(a=iv(e)),r){const g=Ru(e,!0,s,e);l.x=g.x+e.clientLeft,l.y=g.y+e.clientTop}else i&&c();s&&!r&&i&&c();const h=i&&!r&&!s?pj(i,a):To(0),f=o.left+a.scrollLeft-l.x-h.x,p=o.top+a.scrollTop-l.y-h.y;return{x:f,y:p,width:o.width,height:o.height}}function M1(t){return ts(t).position==="static"}function VT(t,e){if(!Kn(t)||ts(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return jo(t)===n&&(n=n.ownerDocument.body),n}function mj(t,e){const n=Ir(t);if(nv(t))return n;if(!Kn(t)){let i=Lo(t);for(;i&&!Ro(i);){if(un(i)&&!M1(i))return i;i=Lo(i)}return n}let r=VT(t,e);for(;r&&gX(r)&&M1(r);)r=VT(r,e);return r&&Ro(r)&&M1(r)&&!ES(r)?n:r||xX(t)||n}const rQ=async function(t){const e=this.getOffsetParent||mj,n=this.getDimensions,r=await n(t.floating);return{reference:nQ(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function iQ(t){return ts(t).direction==="rtl"}const sQ={convertOffsetParentRelativeRectToViewportRelativeRect:qZ,getDocumentElement:jo,getClippingRect:eQ,getOffsetParent:mj,getElementRects:rQ,getClientRects:YZ,getDimensions:tQ,getScale:Gc,isElement:un,isRTL:iQ};function vj(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function oQ(t,e){let n=null,r;const i=jo(t);function s(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),s();const c=t.getBoundingClientRect(),{left:h,top:f,width:p,height:g}=c;if(a||e(),!p||!g)return;const v=Mc(f),x=Mc(i.clientWidth-(h+p)),k=Mc(i.clientHeight-(f+g)),C=Mc(h),_={rootMargin:-v+"px "+-x+"px "+-k+"px "+-C+"px",threshold:Hi(0,ld(1,l))||1};let T=!0;function R(L){const M=L[0].intersectionRatio;if(M!==l){if(!T)return o();M?o(!1,M):r=setTimeout(()=>{o(!1,1e-7)},1e3)}M===1&&!vj(c,t.getBoundingClientRect())&&o(),T=!1}try{n=new IntersectionObserver(R,{..._,root:i.ownerDocument})}catch{n=new IntersectionObserver(R,_)}n.observe(t)}return o(!0),s}function WT(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,c=OS(t),h=i||s?[...c?pl(c):[],...pl(e)]:[];h.forEach(C=>{i&&C.addEventListener("scroll",n,{passive:!0}),s&&C.addEventListener("resize",n)});const f=c&&a?oQ(c,n):null;let p=-1,g=null;o&&(g=new ResizeObserver(C=>{let[b]=C;b&&b.target===c&&g&&(g.unobserve(e),cancelAnimationFrame(p),p=requestAnimationFrame(()=>{var _;(_=g)==null||_.observe(e)})),n()}),c&&!l&&g.observe(c),g.observe(e));let v,x=l?Ru(t):null;l&&k();function k(){const C=Ru(t);x&&!vj(x,C)&&n(),x=C,v=requestAnimationFrame(k)}return n(),()=>{var C;h.forEach(b=>{i&&b.removeEventListener("scroll",n),s&&b.removeEventListener("resize",n)}),f==null||f(),(C=g)==null||C.disconnect(),g=null,l&&cancelAnimationFrame(v)}}const aQ=zZ,lQ=UZ,uQ=FZ,cQ=WZ,dQ=BZ,hQ=VZ,fQ=(t,e,n)=>{const r=new Map,i={platform:sQ,...n},s={...i.platform,_c:r};return DZ(t,e,{...i,platform:s})};var pQ=typeof document<"u",gQ=function(){},fm=pQ?y.useLayoutEffect:gQ;function g0(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,i;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!g0(t[r],e[r]))return!1;return!0}if(i=Object.keys(t),n=i.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,i[r]))return!1;for(r=n;r--!==0;){const s=i[r];if(!(s==="_owner"&&t.$$typeof)&&!g0(t[s],e[s]))return!1}return!0}return t!==t&&e!==e}function yj(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function HT(t,e){const n=yj(t);return Math.round(e*n)/n}function A1(t){const e=y.useRef(t);return fm(()=>{e.current=t}),e}function mQ(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:s,floating:o}={},transform:a=!0,whileElementsMounted:l,open:c}=t,[h,f]=y.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[p,g]=y.useState(r);g0(p,r)||g(r);const[v,x]=y.useState(null),[k,C]=y.useState(null),b=y.useCallback(O=>{O!==L.current&&(L.current=O,x(O))},[]),_=y.useCallback(O=>{O!==M.current&&(M.current=O,C(O))},[]),T=s||v,R=o||k,L=y.useRef(null),M=y.useRef(null),A=y.useRef(h),$=l!=null,j=A1(l),V=A1(i),U=A1(c),B=y.useCallback(()=>{if(!L.current||!M.current)return;const O={placement:e,strategy:n,middleware:p};V.current&&(O.platform=V.current),fQ(L.current,M.current,O).then(K=>{const Y={...K,isPositioned:U.current!==!1};Z.current&&!g0(A.current,Y)&&(A.current=Y,ai.flushSync(()=>{f(Y)}))})},[p,e,n,V,U]);fm(()=>{c===!1&&A.current.isPositioned&&(A.current.isPositioned=!1,f(O=>({...O,isPositioned:!1})))},[c]);const Z=y.useRef(!1);fm(()=>(Z.current=!0,()=>{Z.current=!1}),[]),fm(()=>{if(T&&(L.current=T),R&&(M.current=R),T&&R){if(j.current)return j.current(T,R,B);B()}},[T,R,B,j,$]);const q=y.useMemo(()=>({reference:L,floating:M,setReference:b,setFloating:_}),[b,_]),G=y.useMemo(()=>({reference:T,floating:R}),[T,R]),te=y.useMemo(()=>{const O={position:n,left:0,top:0};if(!G.floating)return O;const K=HT(G.floating,h.x),Y=HT(G.floating,h.y);return a?{...O,transform:"translate("+K+"px, "+Y+"px)",...yj(G.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:K,top:Y}},[n,a,G.floating,h.x,h.y]);return y.useMemo(()=>({...h,update:B,refs:q,elements:G,floatingStyles:te}),[h,B,q,G,te])}const vQ=(t,e)=>({...aQ(t),options:[t,e]}),yQ=(t,e)=>({...lQ(t),options:[t,e]}),wQ=(t,e)=>({...hQ(t),options:[t,e]}),xQ=(t,e)=>({...uQ(t),options:[t,e]}),_Q=(t,e)=>({...cQ(t),options:[t,e]}),bQ=(t,e)=>({...dQ(t),options:[t,e]}),SQ={intentional:"onClick",sloppy:"onPointerDown"};function CQ(t){return{escapeKey:typeof t=="boolean"?t:(t==null?void 0:t.escapeKey)??!1,outsidePress:typeof t=="boolean"?t:(t==null?void 0:t.outsidePress)??!0}}function kQ(t,e={}){const n="rootStore"in t?t.rootStore:t,r=n.useState("open"),i=n.useState("floatingElement"),s=n.useState("referenceElement"),o=n.useState("domReferenceElement"),{onOpenChange:a,dataRef:l}=n.context,{enabled:c=!0,escapeKey:h=!0,outsidePress:f=!0,outsidePressEvent:p="sloppy",referencePress:g=!1,referencePressEvent:v="sloppy",ancestorScroll:x=!1,bubbles:k,externalTree:C}=e,b=Ol(C),_=dt(typeof f=="function"?f:()=>!1),T=typeof f=="function"?_:f,R=y.useRef(!1),{escapeKey:L,outsidePress:M}=CQ(k),A=y.useRef(null),$=xi(),j=xi(),V=dt(()=>{j.clear(),l.current.insideReactTree=!1}),U=y.useRef(!1),B=y.useRef(""),Z=dt(X=>{B.current=X.pointerType}),q=dt(()=>{const X=B.current,ye=X==="pen"||!X?"mouse":X,_e=typeof p=="function"?p():p;return typeof _e=="string"?_e:_e[ye]}),G=dt(X=>{var fe;if(!r||!c||!h||X.key!=="Escape"||U.current)return;const ye=(fe=l.current.floatingContext)==null?void 0:fe.nodeId,_e=b?wu(b.nodesRef.current,ye):[];if(!L&&_e.length>0){let ve=!0;if(_e.forEach(Ae=>{var De;(De=Ae.context)!=null&&De.open&&!Ae.context.dataRef.current.__escapeKeyBubbles&&(ve=!1)}),!ve)return}const at=VX(X)?X.nativeEvent:X,Le=en(CS,at);n.setOpen(!1,Le),!L&&!Le.isPropagationAllowed&&X.stopPropagation()}),te=dt(X=>{const ye=q();return ye==="intentional"&&X.type!=="click"||ye==="sloppy"&&X.type==="click"}),O=dt(()=>{l.current.insideReactTree=!0,j.start(0,V)}),K=dt((X,ye=!1)=>{var Ie;if(te(X)){V();return}if(l.current.insideReactTree){V();return}if(q()==="intentional"&&ye||typeof T=="function"&&!T(X))return;const _e=oi(X),at=`[${cd("inert")}]`,Le=rr(n.select("floatingElement")).querySelectorAll(at),fe=n.context.triggerElements;if(_e&&(fe.hasElement(_e)||fe.hasMatchingElement(ze=>Dt(ze,_e))))return;let ve=un(_e)?_e:null;for(;ve&&!Ro(ve);){const ze=Lo(ve);if(Ro(ze)||!un(ze))break;ve=ze}if(Le.length&&un(_e)&&!zX(_e)&&!Dt(_e,n.select("floatingElement"))&&Array.from(Le).every(ze=>!Dt(ve,ze)))return;if(Kn(_e)&&!("touches"in X)){const ze=Ro(_e),Ce=ts(_e),Oe=/auto|scroll/,Ne=ze||Oe.test(Ce.overflowX),yt=ze||Oe.test(Ce.overflowY),Fe=Ne&&_e.clientWidth>0&&_e.scrollWidth>_e.clientWidth,st=yt&&_e.clientHeight>0&&_e.scrollHeight>_e.clientHeight,wt=Ce.direction==="rtl",At=st&&(wt?X.offsetX<=_e.offsetWidth-_e.clientWidth:X.offsetX>_e.clientWidth),Ye=Fe&&X.offsetY>_e.clientHeight;if(At||Ye)return}const Ae=(Ie=l.current.floatingContext)==null?void 0:Ie.nodeId,De=b&&wu(b.nodesRef.current,Ae).some(ze=>{var Ce;return Us(X,(Ce=ze.context)==null?void 0:Ce.elements.floating)});if(Us(X,n.select("floatingElement"))||Us(X,n.select("domReferenceElement"))||De)return;const Ue=b?wu(b.nodesRef.current,Ae):[];if(Ue.length>0){let ze=!0;if(Ue.forEach(Ce=>{var Oe;(Oe=Ce.context)!=null&&Oe.open&&!Ce.context.dataRef.current.__outsidePressBubbles&&(ze=!1)}),!ze)return}n.setOpen(!1,en(SS,X)),V()}),Y=dt(X=>{q()!=="sloppy"||X.pointerType==="touch"||!n.select("open")||!c||Us(X,n.select("floatingElement"))||Us(X,n.select("domReferenceElement"))||K(X)}),xe=dt(X=>{if(q()!=="sloppy"||!n.select("open")||!c||Us(X,n.select("floatingElement"))||Us(X,n.select("domReferenceElement")))return;const ye=X.touches[0];ye&&(A.current={startTime:Date.now(),startX:ye.clientX,startY:ye.clientY,dismissOnTouchEnd:!1,dismissOnMouseDown:!0},$.start(1e3,()=>{A.current&&(A.current.dismissOnTouchEnd=!1,A.current.dismissOnMouseDown=!1)}))}),re=dt(X=>{const ye=oi(X);function _e(){xe(X),ye==null||ye.removeEventListener(X.type,_e)}ye==null||ye.addEventListener(X.type,_e)}),ue=dt(X=>{const ye=R.current;if(R.current=!1,$.clear(),X.type==="mousedown"&&A.current&&!A.current.dismissOnMouseDown)return;const _e=oi(X);function at(){X.type==="pointerdown"?Y(X):K(X,ye),_e==null||_e.removeEventListener(X.type,at)}_e==null||_e.addEventListener(X.type,at)}),ke=dt(X=>{if(q()!=="sloppy"||!A.current||Us(X,n.select("floatingElement"))||Us(X,n.select("domReferenceElement")))return;const ye=X.touches[0];if(!ye)return;const _e=Math.abs(ye.clientX-A.current.startX),at=Math.abs(ye.clientY-A.current.startY),Le=Math.sqrt(_e*_e+at*at);Le>5&&(A.current.dismissOnTouchEnd=!0),Le>10&&(K(X),$.clear(),A.current=null)}),qe=dt(X=>{const ye=oi(X);function _e(){ke(X),ye==null||ye.removeEventListener(X.type,_e)}ye==null||ye.addEventListener(X.type,_e)}),he=dt(X=>{q()!=="sloppy"||!A.current||Us(X,n.select("floatingElement"))||Us(X,n.select("domReferenceElement"))||(A.current.dismissOnTouchEnd&&K(X),$.clear(),A.current=null)}),ge=dt(X=>{const ye=oi(X);function _e(){he(X),ye==null||ye.removeEventListener(X.type,_e)}ye==null||ye.addEventListener(X.type,_e)});y.useEffect(()=>{if(!r||!c)return;l.current.__escapeKeyBubbles=L,l.current.__outsidePressBubbles=M;const X=new Eu;function ye(ve){n.setOpen(!1,en(lX,ve))}function _e(){X.clear(),U.current=!0}function at(){X.start(rv()?5:0,()=>{U.current=!1})}const Le=rr(i);Le.addEventListener("pointerdown",Z,!0),h&&(Le.addEventListener("keydown",G),Le.addEventListener("compositionstart",_e),Le.addEventListener("compositionend",at)),T&&(Le.addEventListener("click",ue,!0),Le.addEventListener("pointerdown",ue,!0),Le.addEventListener("touchstart",re,!0),Le.addEventListener("touchmove",qe,!0),Le.addEventListener("touchend",ge,!0),Le.addEventListener("mousedown",ue,!0));let fe=[];return x&&(un(o)&&(fe=pl(o)),un(i)&&(fe=fe.concat(pl(i))),!un(s)&&s&&s.contextElement&&(fe=fe.concat(pl(s.contextElement)))),fe=fe.filter(ve=>{var Ae;return ve!==((Ae=Le.defaultView)==null?void 0:Ae.visualViewport)}),fe.forEach(ve=>{ve.addEventListener("scroll",ye,{passive:!0})}),()=>{Le.removeEventListener("pointerdown",Z,!0),h&&(Le.removeEventListener("keydown",G),Le.removeEventListener("compositionstart",_e),Le.removeEventListener("compositionend",at)),T&&(Le.removeEventListener("click",ue,!0),Le.removeEventListener("pointerdown",ue,!0),Le.removeEventListener("touchstart",re,!0),Le.removeEventListener("touchmove",qe,!0),Le.removeEventListener("touchend",ge,!0),Le.removeEventListener("mousedown",ue,!0)),fe.forEach(ve=>{ve.removeEventListener("scroll",ye)}),X.clear()}},[l,i,s,o,h,T,r,a,x,c,L,M,G,K,ue,Y,re,qe,ge,Z,n]),y.useEffect(V,[T,V]);const we=y.useMemo(()=>({onKeyDown:G,...g&&{[SQ[v]]:X=>{n.setOpen(!1,en(fl,X.nativeEvent))},...v!=="intentional"&&{onClick(X){n.setOpen(!1,en(fl,X.nativeEvent))}}}}),[G,n,g,v]),ae=dt(X=>{const ye=oi(X.nativeEvent);!Dt(n.select("floatingElement"),ye)||X.button!==0||(R.current=!0)}),me=y.useMemo(()=>({onKeyDown:G,onPointerDown:ae,onMouseDown:ae,onMouseUp:ae,onClickCapture:O,onMouseDownCapture:O,onPointerDownCapture:O,onMouseUpCapture:O,onTouchEndCapture:O,onTouchMoveCapture:O}),[G,ae,O]);return y.useMemo(()=>c?{reference:we,floating:me,trigger:we}:{},[c,we,me])}var m0=Symbol("NOT_FOUND");function EQ(t,e=`expected a function, instead received ${typeof t}`){if(typeof t!="function")throw new TypeError(e)}function RQ(t,e=`expected an object, instead received ${typeof t}`){if(typeof t!="object")throw new TypeError(e)}function TQ(t,e="expected all items to be functions, instead received the following types: "){if(!t.every(n=>typeof n=="function")){const n=t.map(r=>typeof r=="function"?`function ${r.name||"unnamed"}()`:typeof r).join(", ");throw new TypeError(`${e}[${n}]`)}}var GT=t=>Array.isArray(t)?t:[t];function PQ(t){const e=Array.isArray(t[0])?t[0]:t;return TQ(e,"createSelector expects all input-selectors to be functions, but received the following types: "),e}function LQ(t,e){const n=[],{length:r}=t;for(let i=0;i<r;i++)n.push(t[i].apply(null,e));return n}function MQ(t){let e;return{get(n){return e&&t(e.key,n)?e.value:m0},put(n,r){e={key:n,value:r}},getEntries(){return e?[e]:[]},clear(){e=void 0}}}function AQ(t,e){let n=[];function r(a){const l=n.findIndex(c=>e(a,c.key));if(l>-1){const c=n[l];return l>0&&(n.splice(l,1),n.unshift(c)),c.value}return m0}function i(a,l){r(a)===m0&&(n.unshift({key:a,value:l}),n.length>t&&n.pop())}function s(){return n}function o(){n=[]}return{get:r,put:i,getEntries:s,clear:o}}var NQ=(t,e)=>t===e;function jQ(t){return function(n,r){if(n===null||r===null||n.length!==r.length)return!1;const{length:i}=n;for(let s=0;s<i;s++)if(!t(n[s],r[s]))return!1;return!0}}function IQ(t,e){const n=typeof e=="object"?e:{equalityCheck:e},{equalityCheck:r=NQ,maxSize:i=1,resultEqualityCheck:s}=n,o=jQ(r);let a=0;const l=i<=1?MQ(o):AQ(i,o);function c(){let h=l.get(arguments);if(h===m0){if(h=t.apply(null,arguments),a++,s){const p=l.getEntries().find(g=>s(g.value,h));p&&(h=p.value,a!==0&&a--)}l.put(arguments,h)}return h}return c.clearCache=()=>{l.clear(),c.resetResultsCount()},c.resultsCount=()=>a,c.resetResultsCount=()=>{a=0},c}var OQ=class{constructor(t){this.value=t}deref(){return this.value}},DQ=typeof WeakRef<"u"?WeakRef:OQ,FQ=0,qT=1;function Bg(){return{s:FQ,v:void 0,o:null,p:null}}function wj(t,e={}){let n=Bg();const{resultEqualityCheck:r}=e;let i,s=0;function o(){var f;let a=n;const{length:l}=arguments;for(let p=0,g=l;p<g;p++){const v=arguments[p];if(typeof v=="function"||typeof v=="object"&&v!==null){let x=a.o;x===null&&(a.o=x=new WeakMap);const k=x.get(v);k===void 0?(a=Bg(),x.set(v,a)):a=k}else{let x=a.p;x===null&&(a.p=x=new Map);const k=x.get(v);k===void 0?(a=Bg(),x.set(v,a)):a=k}}const c=a;let h;if(a.s===qT)h=a.v;else if(h=t.apply(null,arguments),s++,r){const p=((f=i==null?void 0:i.deref)==null?void 0:f.call(i))??i;p!=null&&r(p,h)&&(h=p,s!==0&&s--),i=typeof h=="object"&&h!==null||typeof h=="function"?new DQ(h):h}return c.s=qT,c.v=h,h}return o.clearCache=()=>{n=Bg(),o.resetResultsCount()},o.resultsCount=()=>s,o.resetResultsCount=()=>{s=0},o}function xj(t,...e){const n=typeof t=="function"?{memoize:t,memoizeOptions:e}:t,r=(...i)=>{let s=0,o=0,a,l={},c=i.pop();typeof c=="object"&&(l=c,c=i.pop()),EQ(c,`createSelector expects an output function after the inputs, but received: [${typeof c}]`);const h={...n,...l},{memoize:f,memoizeOptions:p=[],argsMemoize:g=wj,argsMemoizeOptions:v=[],devModeChecks:x={}}=h,k=GT(p),C=GT(v),b=PQ(i),_=f(function(){return s++,c.apply(null,arguments)},...k),T=g(function(){o++;const L=LQ(b,arguments);return a=_.apply(null,L),a},...C);return Object.assign(T,{resultFunc:c,memoizedResultFunc:_,dependencies:b,dependencyRecomputations:()=>o,resetDependencyRecomputations:()=>{o=0},lastResult:()=>a,recomputations:()=>s,resetRecomputations:()=>{s=0},memoize:f,argsMemoize:g})};return Object.assign(r,{withTypes:()=>r}),r}var BQ=xj(wj),$Q=Object.assign((t,e=BQ)=>{RQ(t,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof t}`);const n=Object.keys(t),r=n.map(s=>t[s]);return e(r,(...s)=>s.reduce((o,a,l)=>(o[n[l]]=a,o),{}))},{withTypes:()=>$Q});xj({memoize:IQ,memoizeOptions:{maxSize:1,equalityCheck:Object.is}});const Ot=(t,e,n,r,i,s,...o)=>{if(o.length>0)throw new Error(No(1));let a;if(t&&e&&n&&r&&i&&s)a=(l,c,h,f)=>{const p=t(l,c,h,f),g=e(l,c,h,f),v=n(l,c,h,f),x=r(l,c,h,f),k=i(l,c,h,f);return s(p,g,v,x,k,c,h,f)};else if(t&&e&&n&&r&&i)a=(l,c,h,f)=>{const p=t(l,c,h,f),g=e(l,c,h,f),v=n(l,c,h,f),x=r(l,c,h,f);return i(p,g,v,x,c,h,f)};else if(t&&e&&n&&r)a=(l,c,h,f)=>{const p=t(l,c,h,f),g=e(l,c,h,f),v=n(l,c,h,f);return r(p,g,v,c,h,f)};else if(t&&e&&n)a=(l,c,h,f)=>{const p=t(l,c,h,f),g=e(l,c,h,f);return n(p,g,c,h,f)};else if(t&&e)a=(l,c,h,f)=>{const p=t(l,c,h,f);return e(p,c,h,f)};else if(t)a=t;else throw new Error("Missing arguments");return a};var _j={exports:{}},bj={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hd=y;function zQ(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var UQ=typeof Object.is=="function"?Object.is:zQ,VQ=hd.useState,WQ=hd.useEffect,HQ=hd.useLayoutEffect,GQ=hd.useDebugValue;function qQ(t,e){var n=e(),r=VQ({inst:{value:n,getSnapshot:e}}),i=r[0].inst,s=r[1];return HQ(function(){i.value=n,i.getSnapshot=e,N1(i)&&s({inst:i})},[t,n,e]),WQ(function(){return N1(i)&&s({inst:i}),t(function(){N1(i)&&s({inst:i})})},[t]),GQ(n),n}function N1(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!UQ(t,n)}catch{return!0}}function YQ(t,e){return e()}var KQ=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?YQ:qQ;bj.useSyncExternalStore=hd.useSyncExternalStore!==void 0?hd.useSyncExternalStore:KQ;_j.exports=bj;var Sj=_j.exports,Cj={exports:{}},kj={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var av=y,XQ=Sj;function ZQ(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var QQ=typeof Object.is=="function"?Object.is:ZQ,JQ=XQ.useSyncExternalStore,eJ=av.useRef,tJ=av.useEffect,nJ=av.useMemo,rJ=av.useDebugValue;kj.useSyncExternalStoreWithSelector=function(t,e,n,r,i){var s=eJ(null);if(s.current===null){var o={hasValue:!1,value:null};s.current=o}else o=s.current;s=nJ(function(){function l(g){if(!c){if(c=!0,h=g,g=r(g),i!==void 0&&o.hasValue){var v=o.value;if(i(v,g))return f=v}return f=g}if(v=f,QQ(h,g))return v;var x=r(g);return i!==void 0&&i(v,x)?(h=g,v):(h=g,f=x)}var c=!1,h,f,p=n===void 0?null:n;return[function(){return l(e())},p===null?void 0:function(){return l(p())}]},[e,n,r,i]);var a=JQ(t,s[0],s[1]);return tJ(function(){o.hasValue=!0,o.value=a},[a]),rJ(a),a};Cj.exports=kj;var iJ=Cj.exports;const sJ=_S(19),oJ=sJ?lJ:uJ;function aJ(t,e,n,r,i){return oJ(t,e,n,r,i)}function lJ(t,e,n,r,i){const s=y.useCallback(()=>e(t.getSnapshot(),n,r,i),[t,e,n,r,i]);return Sj.useSyncExternalStore(t.subscribe,s,s)}function uJ(t,e,n,r,i){return iJ.useSyncExternalStoreWithSelector(t.subscribe,t.getSnapshot,t.getSnapshot,s=>e(s,n,r,i))}class af{constructor(e){_t(this,"subscribe",e=>(this.listeners.add(e),()=>{this.listeners.delete(e)}));_t(this,"getSnapshot",()=>this.state);this.state=e,this.listeners=new Set,this.updateTick=0}setState(e){if(this.state===e)return;this.state=e,this.updateTick+=1;const n=this.updateTick;for(const r of this.listeners){if(n!==this.updateTick)return;r(e)}}update(e){for(const n in e)if(!Object.is(this.state[n],e[n])){af.prototype.setState.call(this,{...this.state,...e});return}}set(e,n){Object.is(this.state[e],n)||af.prototype.setState.call(this,{...this.state,[e]:n})}notifyAll(){const e={...this.state};af.prototype.setState.call(this,e)}}class Ej extends af{constructor(n,r={},i){super(n);_t(this,"controlledValues",new Map);_t(this,"select",(n,r,i,s)=>{const o=this.selectors[n];return o(this.state,r,i,s)});_t(this,"useState",(n,r,i,s)=>{y.useDebugValue(n);const o=this.selectors[n];return aJ(this,o,r,i,s)});this.context=r,this.selectors=i}useSyncedValue(n,r){y.useDebugValue(n),kt(()=>{this.state[n]!==r&&this.set(n,r)},[n,r])}useSyncedValueWithCleanup(n,r){kt(()=>(this.state[n]!==r&&this.set(n,r),()=>{this.set(n,void 0)}),[n,r])}useSyncedValues(n){const r=Object.values(n);kt(()=>{this.update(n)},r)}useControlledProp(n,r,i){y.useDebugValue(n);const s=r!==void 0;this.controlledValues.has(n)||(this.controlledValues.set(n,s),!s&&!Object.is(this.state[n],i)&&super.setState({...this.state,[n]:i})),kt(()=>{s&&!Object.is(this.state[n],r)&&super.setState({...this.state,[n]:r})},[n,r,i,s])}set(n,r){this.controlledValues.get(n)!==!0&&super.set(n,r)}update(n){const r={...n};for(const i in r)if(Object.hasOwn(r,i)&&this.controlledValues.get(i)===!0){delete r[i];continue}super.update(r)}setState(n){const r={...n};for(const i in r)if(Object.hasOwn(r,i)&&this.controlledValues.get(i)===!0){delete r[i];continue}super.setState({...this.state,...r})}useContextCallback(n,r){y.useDebugValue(n);const i=dt(r??kN);this.context[n]=i}useStateSetter(n){const r=y.useRef(void 0);return r.current===void 0&&(r.current=i=>{this.set(n,i)}),r.current}observe(n,r){let i;typeof n=="function"?i=n:i=this.selectors[n];let s=i(this.state);return r(s,s,this),this.subscribe(o=>{const a=i(o);if(!Object.is(s,a)){const l=s;s=a,r(a,l,this)}})}}const cJ={open:Ot(t=>t.open),domReferenceElement:Ot(t=>t.domReferenceElement),referenceElement:Ot(t=>t.positionReference??t.referenceElement),floatingElement:Ot(t=>t.floatingElement),floatingId:Ot(t=>t.floatingId)};class DS extends Ej{constructor(n){const{nested:r,noEmit:i,onOpenChange:s,triggerElements:o,...a}=n;super({...a,positionReference:a.referenceElement,domReferenceElement:a.referenceElement},{onOpenChange:s,dataRef:{current:{}},events:rj(),nested:r,noEmit:i,triggerElements:o},cJ);_t(this,"setOpen",(n,r)=>{var i,s;if((!n||!this.state.open||HN(r.event))&&(this.context.dataRef.current.openEvent=n?r.event:void 0),!this.context.noEmit){const o={open:n,reason:r.reason,nativeEvent:r.event,nested:this.context.nested,triggerElement:r.trigger};this.context.events.emit("openchange",o)}(s=(i=this.context).onOpenChange)==null||s.call(i,n,r)})}}function dJ(t,e){const n=y.useRef(null);return y.useCallback(r=>{if(t!==void 0&&(n.current!==null&&(e.context.triggerElements.delete(n.current),n.current=null),r!==null))return n.current=t,e.context.triggerElements.add(t,r),()=>{n.current!==null&&(e.context.triggerElements.delete(n.current),n.current=null)}},[e,t])}function hJ(t,e,n,r){const i=n.useState("isMountedByTrigger",t),s=dJ(t,n),o=dt(a=>{const l=s(a);return a!==null&&n.select("open")&&n.select("activeTriggerId")==null&&n.update({activeTriggerId:t,activeTriggerElement:a,...r}),l});return kt(()=>{i&&n.update({activeTriggerElement:e.current,...r})},[i,n,e,...Object.values(r)]),{registerTrigger:o,isMountedByThisTrigger:i}}function fJ(t){const e=t.useState("open");kt(()=>{if(e&&!t.select("activeTriggerId")&&t.context.triggerElements.size===1){const n=t.context.triggerElements.entries().next();if(!n.done){const[r,i]=n.value;t.update({activeTriggerId:r,activeTriggerElement:i})}}},[e,t])}function pJ(t,e,n){const{mounted:r,setMounted:i,transitionStatus:s}=AX(t);e.useSyncedValues({mounted:r,transitionStatus:s});const o=dt(()=>{var l,c;i(!1),e.update({activeTriggerId:null,activeTriggerElement:null,mounted:!1}),n==null||n(),(c=(l=e.context).onOpenChangeComplete)==null||c.call(l,!1)}),a=e.useState("preventUnmountingOnClose");return IN({enabled:!a,open:t,ref:e.context.popupRef,onComplete(){t||o()}}),{forceUnmount:o,transitionStatus:s}}class FS{constructor(){this.elements=new Set,this.idMap=new Map}add(e,n){const r=this.idMap.get(e);r!==n&&(r!==void 0&&this.elements.delete(r),this.elements.add(n),this.idMap.set(e,n))}delete(e){const n=this.idMap.get(e);n&&(this.elements.delete(n),this.idMap.delete(e))}hasElement(e){return this.elements.has(e)}hasMatchingElement(e){for(const n of this.elements)if(e(n))return!0;return!1}getById(e){return this.idMap.get(e)}entries(){return this.idMap.entries()}get size(){return this.idMap.size}}function gJ(){return new DS({open:!1,floatingElement:null,referenceElement:null,triggerElements:new FS,floatingId:"",nested:!1,noEmit:!1,onOpenChange:void 0})}function mJ(){return{open:!1,mounted:!1,transitionStatus:"idle",floatingRootContext:gJ(),preventUnmountingOnClose:!1,payload:void 0,activeTriggerId:null,activeTriggerElement:null,popupElement:null,positionerElement:null,activeTriggerProps:Nr,inactiveTriggerProps:Nr,popupProps:Nr}}const vJ={open:Ot(t=>t.open),mounted:Ot(t=>t.mounted),transitionStatus:Ot(t=>t.transitionStatus),floatingRootContext:Ot(t=>t.floatingRootContext),preventUnmountingOnClose:Ot(t=>t.preventUnmountingOnClose),payload:Ot(t=>t.payload),activeTriggerId:Ot(t=>t.activeTriggerId),activeTriggerElement:Ot(t=>t.mounted?t.activeTriggerElement:null),isTriggerActive:Ot((t,e)=>e!==void 0&&t.activeTriggerId===e),isOpenedByTrigger:Ot((t,e)=>e!==void 0&&t.activeTriggerId===e&&t.open),isMountedByTrigger:Ot((t,e)=>e!==void 0&&t.activeTriggerId===e&&t.mounted),triggerProps:Ot((t,e)=>e?t.activeTriggerProps:t.inactiveTriggerProps),popupProps:Ot(t=>t.popupProps),popupElement:Ot(t=>t.popupElement),positionerElement:Ot(t=>t.positionerElement)};function yJ(t){const{open:e=!1,onOpenChange:n,elements:r={}}=t,i=Ml(),s=_a()!=null,o=Ms(()=>new DS({open:e,onOpenChange:n,referenceElement:r.reference??null,floatingElement:r.floating??null,triggerElements:r.triggers??new FS,floatingId:i,nested:s,noEmit:t.noEmit||!1})).current;return kt(()=>{const a={open:e,floatingId:i};r.reference!==void 0&&(a.referenceElement=r.reference,a.domReferenceElement=un(r.reference)?r.reference:null),r.floating!==void 0&&(a.floatingElement=r.floating),o.update(a)},[e,i,r.reference,r.floating,o]),o.context.onOpenChange=n,o.context.nested=s,o.context.noEmit=t.noEmit||!1,o}function wJ(t={}){const{nodeId:e,externalTree:n}=t,r=yJ(t),i=t.rootContext||r,s={reference:i.useState("referenceElement"),floating:i.useState("floatingElement"),domReference:i.useState("domReferenceElement")},[o,a]=y.useState(null),l=y.useRef(null),c=Ol(n);kt(()=>{s.domReference&&(l.current=s.domReference)},[s.domReference]);const h=mQ({...t,elements:{...s,...o&&{reference:o}}}),f=y.useCallback(M=>{const A=un(M)?{getBoundingClientRect:()=>M.getBoundingClientRect(),getClientRects:()=>M.getClientRects(),contextElement:M}:M;a(A),h.refs.setReference(A)},[h.refs]),[p,g]=y.useState(null),[v,x]=y.useState(null);i.useSyncedValue("referenceElement",p),i.useSyncedValue("domReferenceElement",un(p)?p:null),i.useSyncedValue("floatingElement",v);const k=y.useCallback(M=>{(un(M)||M===null)&&(l.current=M,g(M)),(un(h.refs.reference.current)||h.refs.reference.current===null||M!==null&&!un(M))&&h.refs.setReference(M)},[h.refs,g]),C=y.useCallback(M=>{x(M),h.refs.setFloating(M)},[h.refs]),b=y.useMemo(()=>({...h.refs,setReference:k,setFloating:C,setPositionReference:f,domReference:l}),[h.refs,k,C,f]),_=y.useMemo(()=>({...h.elements,domReference:s.domReference}),[h.elements,s.domReference]),T=i.useState("open"),R=i.useState("floatingId"),L=y.useMemo(()=>({...h,dataRef:i.context.dataRef,open:T,onOpenChange:i.setOpen,events:i.context.events,floatingId:R,refs:b,elements:_,nodeId:e,rootStore:i}),[h,b,_,e,i,T,R]);return kt(()=>{i.context.dataRef.current.floatingContext=L;const M=c==null?void 0:c.nodesRef.current.find(A=>A.id===e);M&&(M.context=L)}),y.useMemo(()=>({...h,context:L,refs:b,elements:_,rootStore:i}),[h,b,_,L,i])}function xJ(t){const{popupStore:e,noEmit:n=!1,treatPopupAsFloatingElement:r=!1,onOpenChange:i}=t,s=Ml(),o=_a()!=null,a=e.useState("open"),l=e.useState("activeTriggerElement"),c=e.useState(r?"popupElement":"positionerElement"),h=e.context.triggerElements,f=Ms(()=>new DS({open:a,referenceElement:l,floatingElement:c,triggerElements:h,onOpenChange:i,floatingId:s,nested:o,noEmit:n})).current;return kt(()=>{const p={open:a,floatingId:s,referenceElement:l,floatingElement:c};un(l)&&(p.domReferenceElement=l),f.update(p)},[a,s,l,c,f]),f.context.onOpenChange=i,f.context.nested=o,f.context.noEmit=n,f}const j1=DX&&FN;function _J(t,e={}){const n="rootStore"in t?t.rootStore:t,{events:r,dataRef:i}=n.context,{enabled:s=!0,visibleOnly:o=!0}=e,a=y.useRef(!1),l=xi(),c=y.useRef(!0);y.useEffect(()=>{const f=n.select("domReferenceElement");if(!s)return;const p=Ir(f);function g(){!n.select("open")&&Kn(f)&&f===bo(rr(f))&&(a.current=!0)}function v(){c.current=!0}function x(){c.current=!1}return p.addEventListener("blur",g),j1&&(p.addEventListener("keydown",v,!0),p.addEventListener("pointerdown",x,!0)),()=>{p.removeEventListener("blur",g),j1&&(p.removeEventListener("keydown",v,!0),p.removeEventListener("pointerdown",x,!0))}},[n,s]),y.useEffect(()=>{if(!s)return;function f(p){(p.reason===fl||p.reason===CS)&&(a.current=!0)}return r.on("openchange",f),()=>{r.off("openchange",f)}},[r,s]);const h=y.useMemo(()=>({onMouseLeave(){a.current=!1},onFocus(f){if(a.current)return;const p=oi(f.nativeEvent);if(o&&un(p)){if(j1&&!f.relatedTarget){if(!c.current&&!PS(p))return}else if(!UX(p))return}n.setOpen(!0,en(a0,f.nativeEvent,f.currentTarget))},onBlur(f){a.current=!1;const p=f.relatedTarget,g=f.nativeEvent,v=un(p)&&p.hasAttribute(cd("focus-guard"))&&p.getAttribute("data-type")==="outside";l.start(0,()=>{var C;const x=n.select("domReferenceElement"),k=bo(x?x.ownerDocument:document);!p&&k===x||Dt((C=i.current.floatingContext)==null?void 0:C.refs.floating.current,k)||Dt(x,k)||v||n.context.triggerElements.hasElement(f.relatedTarget)||n.setOpen(!1,en(a0,g))})}}),[i,n,o,l]);return y.useMemo(()=>s?{reference:h,trigger:h}:{},[s,h])}const e_=cd("safe-polygon"),bJ=`button,a,[role="button"],select,[tabindex]:not([tabindex="-1"]),${UN}`;function SJ(t){return t?!!t.closest(bJ):!1}function Rj(t){const e=y.useRef(void 0),n=y.useRef(!1),r=y.useRef(void 0),i=y.useRef(!0),s=y.useRef(!1),o=y.useRef(()=>{}),a=y.useRef(!1),l=xi(),c=xi(),h=y.useRef(void 0);return y.useMemo(()=>{const f=t.context.dataRef.current;return f.hoverInteractionState||(f.hoverInteractionState={pointerTypeRef:e,interactedInsideRef:n,handlerRef:r,blockMouseMoveRef:i,performedPointerEventsMutationRef:s,unbindMouseMoveRef:o,restTimeoutPendingRef:a,openChangeTimeout:l,restTimeout:c,handleCloseOptionsRef:h}),f.hoverInteractionState},[t,e,n,r,i,s,o,a,l,c,h])}const CJ=new Set(["click","mousedown"]);function kJ(t,e={}){const n="rootStore"in t?t.rootStore:t,r=n.useState("open"),i=n.useState("floatingElement"),s=n.useState("domReferenceElement"),{dataRef:o}=n.context,{enabled:a=!0,closeDelay:l=0,externalTree:c}=e,{pointerTypeRef:h,interactedInsideRef:f,handlerRef:p,performedPointerEventsMutationRef:g,unbindMouseMoveRef:v,restTimeoutPendingRef:x,openChangeTimeout:k,handleCloseOptionsRef:C}=Rj(n),b=Ol(c),_=_a(),T=dt(()=>f.current?!0:o.current.openEvent?CJ.has(o.current.openEvent.type):!1),R=dt(()=>{var V;const j=(V=o.current.openEvent)==null?void 0:V.type;return(j==null?void 0:j.includes("mouse"))&&j!=="mousedown"}),L=y.useCallback((j,V=!0)=>{const U=EJ(l,h.current);U&&!p.current?k.start(U,()=>n.setOpen(!1,en(Ki,j))):V&&(k.clear(),n.setOpen(!1,en(Ki,j)))},[l,p,n,h,k]),M=dt(()=>{v.current(),p.current=void 0}),A=dt(()=>{if(g.current){const j=rr(i).body;j.style.pointerEvents="",j.removeAttribute(e_),g.current=!1}}),$=dt(j=>{const V=oi(j);if(!SJ(V)){f.current=!1;return}f.current=!0});kt(()=>{r||(h.current=void 0,x.current=!1,f.current=!1,M(),A())},[r,h,x,f,M,A]),y.useEffect(()=>()=>{M()},[M]),y.useEffect(()=>A,[A]),kt(()=>{var j,V,U;if(a&&r&&(j=C.current)!=null&&j.blockPointerEvents&&R()&&un(s)&&i){g.current=!0;const B=rr(i).body;B.setAttribute(e_,"");const Z=s,q=i,G=(U=(V=b==null?void 0:b.nodesRef.current.find(te=>te.id===_))==null?void 0:V.context)==null?void 0:U.elements.floating;return G&&(G.style.pointerEvents=""),B.style.pointerEvents="none",Z.style.pointerEvents="auto",q.style.pointerEvents="auto",()=>{B.style.pointerEvents="",Z.style.pointerEvents="",q.style.pointerEvents=""}}},[a,r,s,i,C,R,b,_,g]),y.useEffect(()=>{if(!a)return;function j(Z){if(T()||!o.current.floatingContext)return;const q=n.context.triggerElements;Z.relatedTarget&&q.hasElement(Z.relatedTarget)||(A(),M(),T()||L(Z))}function V(Z){var q;k.clear(),A(),(q=p.current)==null||q.call(p,Z),M()}function U(Z){T()||L(Z,!1)}const B=i;return B&&(B.addEventListener("mouseleave",j),B.addEventListener("mouseenter",V),B.addEventListener("mouseleave",U),B.addEventListener("pointerdown",$,!0)),()=>{B&&(B.removeEventListener("mouseleave",j),B.removeEventListener("mouseenter",V),B.removeEventListener("mouseleave",U),B.removeEventListener("pointerdown",$,!0))}})}function EJ(t,e){return e&&!ad(e)?0:typeof t=="function"?t():t}function I1(t){return typeof t=="function"?t():t}const RJ={current:null};function TJ(t,e={}){var te;const n="rootStore"in t?t.rootStore:t,{dataRef:r,events:i}=n.context,{enabled:s=!0,delay:o=0,handleClose:a=null,mouseOnly:l=!1,restMs:c=0,move:h=!0,triggerElementRef:f=RJ,externalTree:p,isActiveTrigger:g=!0}=e,v=Ol(p),{pointerTypeRef:x,interactedInsideRef:k,handlerRef:C,blockMouseMoveRef:b,performedPointerEventsMutationRef:_,unbindMouseMoveRef:T,restTimeoutPendingRef:R,openChangeTimeout:L,restTimeout:M,handleCloseOptionsRef:A}=Rj(n),$=Hr(a),j=Hr(o),V=Hr(c);g&&(A.current=(te=$.current)==null?void 0:te.__options);const U=dt(()=>k.current?!0:r.current.openEvent?["click","mousedown"].includes(r.current.openEvent.type):!1),B=y.useCallback((O,K=!0)=>{const Y=T1(j.current,"close",x.current);Y&&!C.current?L.start(Y,()=>n.setOpen(!1,en(Ki,O))):K&&(L.clear(),n.setOpen(!1,en(Ki,O)))},[j,C,n,x,L]),Z=dt(()=>{T.current(),C.current=void 0}),q=dt(()=>{if(_.current){const O=rr(n.select("domReferenceElement")).body;O.style.pointerEvents="",O.removeAttribute(e_),_.current=!1}});y.useEffect(()=>{if(!s)return;function O(K){K.open||(L.clear(),M.clear(),b.current=!0,R.current=!1)}return i.on("openchange",O),()=>{i.off("openchange",O)}},[s,i,L,M,b,R]);const G=dt(O=>{var Y;if(U()||!r.current.floatingContext)return;const K=n.context.triggerElements;O.relatedTarget&&K.hasElement(O.relatedTarget)||(Y=$.current)==null||Y.call($,{...r.current.floatingContext,tree:v,x:O.clientX,y:O.clientY,onClose(){q(),Z(),U()||B(O)}})(O)});return y.useEffect(()=>{if(!s)return;const O=f.current??(g?n.select("domReferenceElement"):null);if(!un(O))return;function K(re){if(L.clear(),b.current=!1,l&&!ad(x.current)||I1(V.current)>0&&!T1(j.current,"open"))return;const ue=T1(j.current,"open",x.current),ke=n.select("domReferenceElement"),qe=n.context.triggerElements,he=(qe.hasElement(re.target)||qe.hasMatchingElement(we=>Dt(we,re.target)))&&(!ke||!Dt(ke,re.target)),ge=re.currentTarget??null;ue?L.start(ue,()=>{n.select("open")||n.setOpen(!0,en(Ki,re,ge))}):(!n.select("open")||he)&&n.setOpen(!0,en(Ki,re,ge))}function Y(re){if(U()){q();return}T.current();const ue=n.select("domReferenceElement"),ke=rr(ue);M.clear(),R.current=!1;const qe=n.context.triggerElements;if(re.relatedTarget&&qe.hasElement(re.relatedTarget))return;if($.current&&r.current.floatingContext){n.select("open")||L.clear(),C.current=$.current({...r.current.floatingContext,tree:v,x:re.clientX,y:re.clientY,onClose(){q(),Z(),U()||B(re,!0)}});const ge=C.current;ge(re),ke.addEventListener("mousemove",ge),T.current=()=>{ke.removeEventListener("mousemove",ge)};return}(x.current==="touch"?!Dt(n.select("floatingElement"),re.relatedTarget):!0)&&B(re)}function xe(re){G(re)}return n.select("open")&&O.addEventListener("mouseleave",xe),h&&O.addEventListener("mousemove",K,{once:!0}),O.addEventListener("mouseenter",K),O.addEventListener("mouseleave",Y),()=>{O.removeEventListener("mouseleave",xe),h&&O.removeEventListener("mousemove",K),O.removeEventListener("mouseenter",K),O.removeEventListener("mouseleave",Y)}},[Z,q,b,r,j,B,n,s,$,G,g,U,l,h,x,V,M,R,L,f,v,T,C]),y.useMemo(()=>{function O(K){x.current=K.pointerType}return{onPointerDown:O,onPointerEnter:O,onMouseMove(K){const{nativeEvent:Y}=K,xe=K.currentTarget,re=n.select("domReferenceElement"),ue=n.context.triggerElements,ke=n.select("open"),qe=(ue.hasElement(K.target)||ue.hasMatchingElement(ge=>Dt(ge,K.target)))&&(!re||!Dt(re,K.target));if(l&&!ad(x.current)||ke&&!qe||I1(V.current)===0||!qe&&R.current&&K.movementX**2+K.movementY**2<2)return;M.clear();function he(){!b.current&&(!ke||qe)&&n.setOpen(!0,en(Ki,Y,xe))}x.current==="touch"?ai.flushSync(()=>{he()}):qe&&ke?he():(R.current=!0,M.start(I1(V.current),he))}}},[b,l,n,x,V,M,R])}function Tj(t=[]){const e=t.map(c=>c==null?void 0:c.reference),n=t.map(c=>c==null?void 0:c.floating),r=t.map(c=>c==null?void 0:c.item),i=t.map(c=>c==null?void 0:c.trigger),s=y.useCallback(c=>$g(c,t,"reference"),e),o=y.useCallback(c=>$g(c,t,"floating"),n),a=y.useCallback(c=>$g(c,t,"item"),r),l=y.useCallback(c=>$g(c,t,"trigger"),i);return y.useMemo(()=>({getReferenceProps:s,getFloatingProps:o,getItemProps:a,getTriggerProps:l}),[s,o,a,l])}function $g(t,e,n){var o;const r=new Map,i=n==="item",s={};n==="floating"&&(s.tabIndex=-1,s[Yx]="");for(const a in t)i&&t&&(a===$N||a===zN)||(s[a]=t[a]);for(let a=0;a<e.length;a+=1){let l;const c=(o=e[a])==null?void 0:o[n];typeof c=="function"?l=t?c(t):null:l=c,l&&YT(s,l,i,r)}return YT(s,t,i,r),s}function YT(t,e,n,r){var i;for(const s in e){const o=e[s];n&&(s===$N||s===zN)||(s.startsWith("on")?(r.has(s)||r.set(s,[]),typeof o=="function"&&((i=r.get(s))==null||i.push(o),t[s]=(...a)=>{var l;return(l=r.get(s))==null?void 0:l.map(c=>c(...a)).find(c=>c!==void 0)})):t[s]=o)}}const PJ="Escape";function lv(t,e,n){switch(t){case"vertical":return e;case"horizontal":return n;default:return e||n}}function zg(t,e){return lv(e,t===TS||t===ap,t===gl||t===ml)}function O1(t,e,n){return lv(e,t===ap,n?t===gl:t===ml)||t==="Enter"||t===" "||t===""}function LJ(t,e,n){return lv(e,n?t===gl:t===ml,t===ap)}function MJ(t,e,n,r){const i=n?t===ml:t===gl,s=t===TS;return e==="both"||e==="horizontal"&&r&&r>1?t===PJ:lv(e,i,s)}function AJ(t,e){const n="rootStore"in t?t.rootStore:t,r=n.useState("open"),i=n.useState("floatingElement"),s=n.useState("domReferenceElement"),o=n.context.dataRef,{listRef:a,activeIndex:l,onNavigate:c=()=>{},enabled:h=!0,selectedIndex:f=null,allowEscape:p=!1,loopFocus:g=!1,nested:v=!1,rtl:x=!1,virtual:k=!1,focusItemOnOpen:C="auto",focusItemOnHover:b=!0,openOnArrowKeyDown:_=!0,disabledIndices:T=void 0,orientation:R="vertical",parentOrientation:L,cols:M=1,scrollItemIntoView:A=!0,itemSizes:$,dense:j=!1,id:V,resetOnPointerLeave:U=!0,externalTree:B}=e,Z=l0(i),q=Hr(Z),G=_a(),te=Ol(B);kt(()=>{o.current.orientation=R},[o,R]);const O=Kx(s),K=y.useRef(C),Y=y.useRef(f??-1),xe=y.useRef(null),re=y.useRef(!0),ue=dt(Ce=>{c(Y.current===-1?null:Y.current,Ce)}),ke=y.useRef(ue),qe=y.useRef(!!i),he=y.useRef(r),ge=y.useRef(!1),we=y.useRef(!1),ae=Hr(T),me=Hr(r),X=Hr(A),ye=Hr(f),_e=Hr(U),at=dt(()=>{function Ce(Fe){k?te==null||te.events.emit("virtualfocus",Fe):hm(Fe,{sync:ge.current,preventScroll:!0})}const Oe=a.current[Y.current],Ne=we.current;Oe&&Ce(Oe),(ge.current?Fe=>Fe():requestAnimationFrame)(()=>{var At;const Fe=a.current[Y.current]||Oe;if(!Fe)return;Oe||Ce(Fe);const st=X.current;st&&fe&&(Ne||!re.current)&&((At=Fe.scrollIntoView)==null||At.call(Fe,typeof st=="boolean"?{block:"nearest",inline:"nearest"}:st))})});kt(()=>{h&&(r&&i?(Y.current=f??-1,K.current&&f!=null&&(we.current=!0,ue())):qe.current&&(Y.current=-1,ke.current()))},[h,r,i,f,ue]),kt(()=>{if(h){if(!r){ge.current=!1;return}if(i)if(l==null){if(ge.current=!1,ye.current!=null)return;if(qe.current&&(Y.current=-1,at()),(!he.current||!qe.current)&&K.current&&(xe.current!=null||K.current===!0&&xe.current==null)){let Ce=0;const Oe=()=>{a.current[0]==null?(Ce<2&&(Ce?requestAnimationFrame:queueMicrotask)(Oe),Ce+=1):(Y.current=xe.current==null||O1(xe.current,R,x)||v?R1(a):MT(a),xe.current=null,ue())};Oe()}}else sf(a,l)||(Y.current=l,at(),we.current=!1)}},[h,r,i,l,ye,v,a,R,x,ue,at,ae]),kt(()=>{var Fe,st;if(!h||i||!te||k||!qe.current)return;const Ce=te.nodesRef.current,Oe=(st=(Fe=Ce.find(wt=>wt.id===G))==null?void 0:Fe.context)==null?void 0:st.elements.floating,Ne=bo(rr(i)),yt=Ce.some(wt=>wt.context&&Dt(wt.context.elements.floating,Ne));Oe&&!yt&&re.current&&Oe.focus({preventScroll:!0})},[h,i,te,G,k]),kt(()=>{ke.current=ue,he.current=r,qe.current=!!i}),kt(()=>{r||(xe.current=null,K.current=C)},[r,C]);const Le=l!=null,fe=y.useMemo(()=>{function Ce(Ne){if(!me.current)return;const yt=a.current.indexOf(Ne.currentTarget);yt!==-1&&Y.current!==yt&&(Y.current=yt,ue(Ne))}return{onFocus(Ne){ge.current=!0,Ce(Ne)},onClick:({currentTarget:Ne})=>Ne.focus({preventScroll:!0}),onMouseMove(Ne){ge.current=!0,we.current=!1,b&&Ce(Ne)},onPointerLeave(Ne){var Fe;if(!me.current||!re.current||Ne.pointerType==="touch")return;ge.current=!0;const yt=Ne.relatedTarget;!b||a.current.includes(yt)||_e.current&&(Y.current=-1,ue(Ne),k||(Fe=q.current)==null||Fe.focus({preventScroll:!0}))}}},[me,q,b,a,ue,_e,k]),ve=y.useCallback(()=>{var Ce,Oe,Ne;return L??((Ne=(Oe=(Ce=te==null?void 0:te.nodesRef.current.find(yt=>yt.id===G))==null?void 0:Ce.context)==null?void 0:Oe.dataRef)==null?void 0:Ne.current.orientation)},[G,te,L]),Ae=dt(Ce=>{if(re.current=!1,ge.current=!0,Ce.which===229||!me.current&&Ce.currentTarget===q.current)return;if(v&&MJ(Ce.key,R,x,M)){zg(Ce.key,ve())||Wr(Ce),n.setOpen(!1,en(dm,Ce.nativeEvent)),Kn(s)&&(k?te==null||te.events.emit("virtualfocus",s):s.focus());return}const Oe=Y.current,Ne=R1(a,T),yt=MT(a,T);if(O||(Ce.key==="Home"&&(Wr(Ce),Y.current=Ne,ue(Ce)),Ce.key==="End"&&(Wr(Ce),Y.current=yt,ue(Ce))),M>1){const Fe=$||Array.from({length:a.current.length},()=>({width:1,height:1})),st=nZ(Fe,M,j),wt=st.findIndex(Re=>Re!=null&&!of(a,Re,T)),At=st.reduce((Re,Te,pe)=>Te!=null&&!of(a,Te,T)?pe:Re,-1),Ye=st[tZ({current:st.map(Re=>Re!=null?a.current[Re]:null)},{event:Ce,orientation:R,loopFocus:g,rtl:x,cols:M,disabledIndices:iZ([...(typeof T!="function"?T:null)||a.current.map((Re,Te)=>of(a,Te,T)?Te:void 0),void 0],st),minIndex:wt,maxIndex:At,prevIndex:rZ(Y.current>yt?Ne:Y.current,Fe,st,M,Ce.key===ap?"bl":Ce.key===(x?gl:ml)?"tr":"tl"),stopEvent:!0})];if(Ye!=null&&(Y.current=Ye,ue(Ce)),R==="both")return}if(zg(Ce.key,R)){if(Wr(Ce),r&&!k&&bo(Ce.currentTarget.ownerDocument)===Ce.currentTarget){Y.current=O1(Ce.key,R,x)?Ne:yt,ue(Ce);return}O1(Ce.key,R,x)?g?Oe>=yt?p&&Oe!==a.current.length?Y.current=-1:(ge.current=!1,Y.current=Ne):Y.current=ii(a,{startingIndex:Oe,disabledIndices:T}):Y.current=Math.min(yt,ii(a,{startingIndex:Oe,disabledIndices:T})):g?Oe<=Ne?p&&Oe!==-1?Y.current=a.current.length:(ge.current=!1,Y.current=yt):Y.current=ii(a,{startingIndex:Oe,decrement:!0,disabledIndices:T}):Y.current=Math.max(Ne,ii(a,{startingIndex:Oe,decrement:!0,disabledIndices:T})),sf(a,Y.current)&&(Y.current=-1),ue(Ce)}}),De=y.useMemo(()=>k&&r&&Le&&{"aria-activedescendant":`${V}-${l}`},[k,r,Le,V,l]),Ue=y.useMemo(()=>({"aria-orientation":R==="both"?void 0:R,...O?{}:De,onKeyDown(Ce){if(Ce.key==="Tab"&&Ce.shiftKey&&r&&!k){const Oe=oi(Ce.nativeEvent);if(Oe&&!Dt(q.current,Oe))return;Wr(Ce),n.setOpen(!1,en(od,Ce.nativeEvent)),Kn(s)&&s.focus();return}Ae(Ce)},onPointerMove(){re.current=!0}}),[De,Ae,q,R,O,n,r,k,s]),Ie=y.useMemo(()=>{function Ce(Ne){C==="auto"&&VN(Ne.nativeEvent)&&(K.current=!k)}function Oe(Ne){K.current=C,C==="auto"&&WN(Ne.nativeEvent)&&(K.current=!0)}return{onKeyDown(Ne){const yt=n.select("open");re.current=!1;const Fe=Ne.key.startsWith("Arrow"),st=LJ(Ne.key,ve(),x),wt=zg(Ne.key,R),At=(v?st:wt)||Ne.key==="Enter"||Ne.key.trim()==="";if(k&&yt)return Ae(Ne);if(!(!yt&&!_&&Fe)){if(At){const Ye=zg(Ne.key,ve());xe.current=v&&Ye?null:Ne.key}if(v){st&&(Wr(Ne),yt?(Y.current=R1(a,ae.current),ue(Ne)):n.setOpen(!0,en(dm,Ne.nativeEvent,Ne.currentTarget)));return}wt&&(ye.current!=null&&(Y.current=ye.current),Wr(Ne),!yt&&_?n.setOpen(!0,en(dm,Ne.nativeEvent,Ne.currentTarget)):Ae(Ne),yt&&ue(Ne))}},onFocus(Ne){n.select("open")&&!k&&(Y.current=-1,ue(Ne))},onPointerDown:Oe,onPointerEnter:Oe,onMouseDown:Ce,onClick:Ce}},[Ae,ae,C,a,v,ue,n,_,R,ve,x,ye,k]),ze=y.useMemo(()=>({...De,...Ie}),[De,Ie]);return y.useMemo(()=>h?{reference:ze,floating:Ue,item:fe,trigger:Ie}:{},[h,ze,Ue,Ie,fe])}const NJ=new Map([["select","listbox"],["combobox","listbox"],["label",!1]]);function jJ(t,e={}){const n="rootStore"in t?t.rootStore:t,r=n.useState("open"),i=n.useState("floatingId"),s=n.useState("domReferenceElement"),o=n.useState("floatingElement"),{enabled:a=!0,role:l="dialog"}=e,c=Ml(),h=(s==null?void 0:s.id)||c,f=y.useMemo(()=>{var _;return((_=l0(o))==null?void 0:_.id)||i},[o,i]),p=NJ.get(l)??l,v=_a()!=null,x=y.useMemo(()=>p==="tooltip"||l==="label"?Nr:{"aria-haspopup":p==="alertdialog"?"dialog":p,"aria-expanded":"false",...p==="listbox"&&{role:"combobox"},...p==="menu"&&v&&{role:"menuitem"},...l==="select"&&{"aria-autocomplete":"none"},...l==="combobox"&&{"aria-autocomplete":"list"}},[p,v,l]),k=y.useMemo(()=>p==="tooltip"||l==="label"?{[`aria-${l==="label"?"labelledby":"describedby"}`]:r?f:void 0}:{...x,"aria-expanded":r?"true":"false","aria-controls":r?f:void 0,...p==="menu"&&{id:h}},[p,f,r,h,l,x]),C=y.useMemo(()=>{const _={id:f,...p&&{role:p}};return p==="tooltip"||l==="label"?_:{..._,...p==="menu"&&{"aria-labelledby":h}}},[p,f,h,l]),b=y.useCallback(({active:_,selected:T})=>{const R={role:"option",..._&&{id:`${f}-fui-option`}};switch(l){case"select":case"combobox":return{...R,"aria-selected":T}}return{}},[f,l]);return y.useMemo(()=>a?{reference:k,floating:C,item:b,trigger:x}:{},[a,k,C,x,b])}function IJ(t,e){const n="rootStore"in t?t.rootStore:t,r=n.useState("open"),i=n.context.dataRef,{listRef:s,activeIndex:o,onMatch:a,onTypingChange:l,enabled:c=!0,findMatch:h=null,resetMs:f=750,ignoreKeys:p=s0,selectedIndex:g=null}=e,v=xi(),x=y.useRef(""),k=y.useRef(g??o??-1),C=y.useRef(null);kt(()=>{r&&(v.clear(),C.current=null,x.current="")},[r,v]),kt(()=>{r&&x.current===""&&(k.current=g??o??-1)},[r,g,o]);const b=dt(L=>{L?i.current.typing||(i.current.typing=L,l==null||l(L)):i.current.typing&&(i.current.typing=L,l==null||l(L))}),_=dt(L=>{function M(U,B,Z){const q=h?h(B,Z):B.find(G=>(G==null?void 0:G.toLocaleLowerCase().indexOf(Z.toLocaleLowerCase()))===0);return q?U.indexOf(q):-1}const A=s.current;if(x.current.length>0&&x.current[0]!==" "&&(M(A,A,x.current)===-1?b(!1):L.key===" "&&Wr(L)),A==null||p.includes(L.key)||L.key.length!==1||L.ctrlKey||L.metaKey||L.altKey)return;r&&L.key!==" "&&(Wr(L),b(!0)),A.every(U=>{var B,Z;return U?((B=U[0])==null?void 0:B.toLocaleLowerCase())!==((Z=U[1])==null?void 0:Z.toLocaleLowerCase()):!0})&&x.current===L.key&&(x.current="",k.current=C.current),x.current+=L.key,v.start(f,()=>{x.current="",k.current=C.current,b(!1)});const j=k.current,V=M(A,[...A.slice((j||0)+1),...A.slice(0,(j||0)+1)],x.current);V!==-1?(a==null||a(V),C.current=V):L.key!==" "&&(x.current="",b(!1))}),T=y.useMemo(()=>({onKeyDown:_}),[_]),R=y.useMemo(()=>({onKeyDown:_,onKeyUp(L){L.key===" "&&b(!1)}}),[_,b]);return y.useMemo(()=>c?{reference:T,floating:R}:{},[c,T,R])}function KT(t,e){const[n,r]=t;let i=!1;const s=e.length;for(let o=0,a=s-1;o<s;a=o++){const[l,c]=e[o]||[0,0],[h,f]=e[a]||[0,0];c>=r!=f>=r&&n<=(h-l)*(r-c)/(f-c)+l&&(i=!i)}return i}function OJ(t,e){return t[0]>=e.x&&t[0]<=e.x+e.width&&t[1]>=e.y&&t[1]<=e.y+e.height}function DJ(t={}){const{buffer:e=.5,blockPointerEvents:n=!1,requireIntent:r=!0}=t,i=new Eu;let s=!1,o=null,a=null,l=typeof performance<"u"?performance.now():0;function c(f,p){const g=performance.now(),v=g-l;if(o===null||a===null||v===0)return o=f,a=p,l=g,null;const x=f-o,k=p-a,b=Math.sqrt(x*x+k*k)/v;return o=f,a=p,l=g,b}const h=({x:f,y:p,placement:g,elements:v,onClose:x,nodeId:k,tree:C})=>function(_){function T(){i.clear(),x()}if(i.clear(),!v.domReference||!v.floating||g==null||f==null||p==null)return;const{clientX:R,clientY:L}=_,M=[R,L],A=oi(_),$=_.type==="mouseleave",j=Dt(v.floating,A),V=Dt(v.domReference,A),U=v.domReference.getBoundingClientRect(),B=v.floating.getBoundingClientRect(),Z=g.split("-")[0],q=f>B.right-B.width/2,G=p>B.bottom-B.height/2,te=OJ(M,U),O=B.width>U.width,K=B.height>U.height,Y=(O?U:B).left,xe=(O?U:B).right,re=(K?U:B).top,ue=(K?U:B).bottom;if(j&&(s=!0,!$))return;if(V&&(s=!1),V&&!$){s=!0;return}if($&&un(_.relatedTarget)&&Dt(v.floating,_.relatedTarget)||C&&wu(C.nodesRef.current,k).some(({context:he})=>he==null?void 0:he.open))return;if(Z==="top"&&p>=U.bottom-1||Z==="bottom"&&p<=U.top+1||Z==="left"&&f>=U.right-1||Z==="right"&&f<=U.left+1)return T();let ke=[];switch(Z){case"top":ke=[[Y,U.top+1],[Y,B.bottom-1],[xe,B.bottom-1],[xe,U.top+1]];break;case"bottom":ke=[[Y,B.top+1],[Y,U.bottom-1],[xe,U.bottom-1],[xe,B.top+1]];break;case"left":ke=[[B.right-1,ue],[B.right-1,re],[U.left+1,re],[U.left+1,ue]];break;case"right":ke=[[U.right-1,ue],[U.right-1,re],[B.left+1,re],[B.left+1,ue]];break}function qe([he,ge]){switch(Z){case"top":{const we=[O?he+e/2:q?he+e*4:he-e*4,ge+e+1],ae=[O?he-e/2:q?he+e*4:he-e*4,ge+e+1],me=[[B.left,q||O?B.bottom-e:B.top],[B.right,q?O?B.bottom-e:B.top:B.bottom-e]];return[we,ae,...me]}case"bottom":{const we=[O?he+e/2:q?he+e*4:he-e*4,ge-e],ae=[O?he-e/2:q?he+e*4:he-e*4,ge-e],me=[[B.left,q||O?B.top+e:B.bottom],[B.right,q?O?B.top+e:B.bottom:B.top+e]];return[we,ae,...me]}case"left":{const we=[he+e+1,K?ge+e/2:G?ge+e*4:ge-e*4],ae=[he+e+1,K?ge-e/2:G?ge+e*4:ge-e*4];return[...[[G||K?B.right-e:B.left,B.top],[G?K?B.right-e:B.left:B.right-e,B.bottom]],we,ae]}case"right":{const we=[he-e,K?ge+e/2:G?ge+e*4:ge-e*4],ae=[he-e,K?ge-e/2:G?ge+e*4:ge-e*4],me=[[G||K?B.left+e:B.right,B.top],[G?K?B.left+e:B.right:B.left+e,B.bottom]];return[we,ae,...me]}default:return[]}}if(!KT([R,L],ke)){if(s&&!te)return T();if(!$&&r){const he=c(_.clientX,_.clientY);if(he!==null&&he<.1)return T()}KT([R,L],qe([f,p]))?!s&&r&&i.start(40,T):T()}};return h.__options={blockPointerEvents:n},h}const FJ=y.createContext(void 0);function BJ(t){const e=y.useContext(FJ);if(e===void 0&&!t)throw new Error(No(69));return e}const Pj="ArrowUp",Lj="ArrowDown",Mj="ArrowLeft",Aj="ArrowRight",Nj="Home",jj="End",$J=new Set([Mj,Aj]),zJ=new Set([Pj,Lj]),UJ=new Set([...$J,...zJ]);[...UJ];const VJ=new Set([Pj,Lj,Mj,Aj,Nj,jj]);function WJ(t){return t==="starting"?YK:Nr}const HJ={...EN,...rX},BS=y.forwardRef(function(e,n){const{render:r,className:i,finalFocus:s,...o}=e,{store:a}=Al(),{side:l,align:c}=xN(),h=BJ(!0)!=null,f=a.useState("open"),p=a.useState("transitionStatus"),g=a.useState("popupProps"),v=a.useState("mounted"),x=a.useState("instantType"),k=a.useState("activeTriggerElement"),C=a.useState("parent"),b=a.useState("lastOpenChangeReason"),_=a.useState("rootId"),T=a.useState("floatingRootContext"),R=a.useState("floatingTreeRoot"),L=a.useState("closeDelay"),M=a.useState("activeTriggerElement");IN({open:f,ref:a.context.popupRef,onComplete(){var B,Z;f&&((Z=(B=a.context).onOpenChangeComplete)==null||Z.call(B,!0))}}),y.useEffect(()=>{function B(Z){a.setOpen(!1,en(Z.reason,Z.domEvent))}return R.events.on("close",B),()=>{R.events.off("close",B)}},[R.events,a]);const A=a.useState("hoverEnabled"),$=a.useState("disabled");kJ(T,{enabled:A&&!$&&C.type!=="context-menu"&&C.type!=="menubar",closeDelay:L});const j=y.useMemo(()=>({transitionStatus:p,side:l,align:c,open:f,nested:C.type==="menu",instant:x}),[p,l,c,f,C.type,x]),V=Nl("div",e,{state:j,ref:[n,a.context.popupRef],stateAttributesMapping:HJ,props:[g,{onKeyDown(B){h&&VJ.has(B.key)&&B.stopPropagation()}},WJ(p),o,{"data-rootownerid":_}]});let U=C.type===void 0||C.type==="context-menu";return(k||C.type==="menubar"&&b!==SS)&&(U=!0),w.jsx(IZ,{context:T,modal:!1,disabled:!v,returnFocus:s===void 0?U:s,initialFocus:C.type!=="menu",restoreFocus:!0,externalTree:C.type!=="menubar"?R:void 0,previousFocusableElement:M,nextFocusableElement:C.type===void 0?a.context.triggerFocusTargetRef:void 0,beforeContentFocusGuardRef:C.type===void 0?a.context.beforeContentFocusGuardRef:void 0,children:V})}),Ij=y.createContext(void 0);function GJ(){const t=y.useContext(Ij);if(t===void 0)throw new Error(No(32));return t}const $S=y.forwardRef(function(e,n){const{keepMounted:r=!1,...i}=e,{store:s}=Al();return s.useState("mounted")||r?w.jsx(Ij.Provider,{value:r,children:w.jsx(LZ,{ref:n,...i})}):null});function qJ(t){return _S(19)?t:t?"true":void 0}const YJ=y.createContext(void 0);function Oj(){const t=y.useContext(YJ);return(t==null?void 0:t.direction)??"ltr"}const KJ=t=>({name:"arrow",options:t,async fn(e){var K,Y;const{x:n,y:r,placement:i,rects:s,platform:o,elements:a,middlewareData:l}=e,{element:c,padding:h=0,offsetParent:f="real"}=pa(t,e)||{};if(c==null)return{};const p=GN(h),g={x:n,y:r},v=AS(i),x=MS(v),k=await o.getDimensions(c),C=v==="y",b=C?"top":"left",_=C?"bottom":"right",T=C?"clientHeight":"clientWidth",R=s.reference[x]+s.reference[v]-g[v]-s.floating[x],L=g[v]-s.reference[v],M=f==="real"?await((K=o.getOffsetParent)==null?void 0:K.call(o,c)):a.floating;let A=a.floating[T]||s.floating[x];(!A||!await((Y=o.isElement)==null?void 0:Y.call(o,M)))&&(A=a.floating[T]||s.floating[x]);const $=R/2-L/2,j=A/2-k[x]/2-1,V=Math.min(p[b],j),U=Math.min(p[_],j),B=V,Z=A-k[x]-U,q=A/2-k[x]/2+$,G=Xx(B,q,Z),te=!l.arrow&&Il(i)!=null&&q!==G&&s.reference[x]/2-(q<B?V:U)-k[x]/2<0,O=te?q<B?q-B:q-Z:0;return{[v]:g[v]+O,data:{[v]:G,centerOffset:q-G-O,...te&&{alignmentOffset:O}},reset:te}}}),XJ=(t,e)=>({...KJ(t),options:[t,e]}),ZJ={name:"hide",async fn(t){var a;const{width:e,height:n,x:r,y:i}=t.rects.reference,s=e===0&&n===0&&r===0&&i===0;return{data:{referenceHidden:((a=(await bQ().fn(t)).data)==null?void 0:a.referenceHidden)||s}}}},QJ={sideX:"left",sideY:"top"};function Dj(t,e,n){const r=t==="inline-start"||t==="inline-end";return{top:"top",right:r?n?"inline-start":"inline-end":"right",bottom:"bottom",left:r?n?"inline-end":"inline-start":"left"}[e]}function XT(t,e,n){const{rects:r,placement:i}=t;return{side:Dj(e,Ji(i),n),align:Il(i)||"center",anchor:{width:r.reference.width,height:r.reference.height},positioner:{width:r.floating.width,height:r.floating.height}}}function JJ(t){var nt,lt;const{anchor:e,positionMethod:n="absolute",side:r="bottom",sideOffset:i=0,align:s="center",alignOffset:o=0,collisionBoundary:a,collisionPadding:l=5,sticky:c=!1,arrowPadding:h=5,disableAnchorTracking:f=!1,keepMounted:p=!1,floatingRootContext:g,mounted:v,collisionAvoidance:x,shiftCrossAxis:k=!1,nodeId:C,adaptiveOrigin:b,lazyFlip:_=!1,externalTree:T}=t,[R,L]=y.useState(null);!v&&R!==null&&L(null);const M=x.side||"flip",A=x.align||"flip",$=x.fallbackAxisSide||"end",j=typeof e=="function"?e:void 0,V=dt(j),U=j?V:e,B=Hr(e),q=Oj()==="rtl",G=R||{top:"top",right:"right",bottom:"bottom",left:"left","inline-end":q?"left":"right","inline-start":q?"right":"left"}[r],te=s==="center"?G:`${G}-${s}`;let O=l;const K=1,Y=r==="bottom"?K:0,xe=r==="top"?K:0,re=r==="right"?K:0,ue=r==="left"?K:0;typeof O=="number"?O={top:O+Y,right:O+ue,bottom:O+xe,left:O+re}:O&&(O={top:(O.top||0)+Y,right:(O.right||0)+ue,bottom:(O.bottom||0)+xe,left:(O.left||0)+re});const ke={boundary:a==="clipping-ancestors"?"clippingAncestors":a,padding:O},qe=y.useRef(null),he=Hr(i),ge=Hr(o),me=[vQ(Ke=>{const xt=XT(Ke,r,q),Lt=typeof he.current=="function"?he.current(xt):he.current,rt=typeof ge.current=="function"?ge.current(xt):ge.current;return{mainAxis:Lt,crossAxis:rt,alignmentAxis:rt}},[typeof i!="function"?i:0,typeof o!="function"?o:0,q,r])],X=A==="none"&&M!=="shift",ye=!X&&(c||k||M==="shift"),_e=M==="none"?null:xQ({...ke,padding:{top:O.top+K,right:O.right+K,bottom:O.bottom+K,left:O.left+K},mainAxis:!k&&M==="flip",crossAxis:A==="flip"?"alignment":!1,fallbackAxisSideDirection:$}),at=X?null:yQ(Ke=>{const xt=Mo(Ke.elements.floating).documentElement;return{...ke,rootBoundary:k?{x:0,y:0,width:xt.clientWidth,height:xt.clientHeight}:void 0,mainAxis:A!=="none",crossAxis:ye,limiter:c||k?void 0:wQ(Lt=>{if(!qe.current)return{};const{width:rt,height:Nt}=qe.current.getBoundingClientRect(),ht=ks(Ji(Lt.placement)),zt=ht==="y"?rt:Nt,Et=ht==="y"?O.left+O.right:O.top+O.bottom;return{offset:zt/2+Et/2}})}},[ke,c,k,O,A]);M==="shift"||A==="shift"||s==="center"?me.push(at,_e):me.push(_e,at),me.push(_Q({...ke,apply({elements:{floating:Ke},rects:{reference:xt},availableWidth:Lt,availableHeight:rt}){Object.entries({"--available-width":`${Lt}px`,"--available-height":`${rt}px`,"--anchor-width":`${xt.width}px`,"--anchor-height":`${xt.height}px`}).forEach(([Nt,ht])=>{Ke.style.setProperty(Nt,ht)})}}),XJ(()=>({element:qe.current||document.createElement("div"),padding:h,offsetParent:"floating"}),[h]),{name:"transformOrigin",fn(Ke){var Un,Yr,Er;const{elements:xt,middlewareData:Lt,placement:rt,rects:Nt,y:ht}=Ke,zt=Ji(rt),Et=ks(zt),ut=qe.current,Xt=((Un=Lt.arrow)==null?void 0:Un.x)||0,ft=((Yr=Lt.arrow)==null?void 0:Yr.y)||0,Ft=(ut==null?void 0:ut.clientWidth)||0,St=(ut==null?void 0:ut.clientHeight)||0,ln=Xt+Ft/2,Gt=ft+St/2,qt=Math.abs(((Er=Lt.shift)==null?void 0:Er.y)||0),mt=Nt.reference.height/2,vt=typeof i=="function"?i(XT(Ke,r,q)):i,Ut=qt>vt,kr={top:`${ln}px calc(100% + ${vt}px)`,bottom:`${ln}px ${-vt}px`,left:`calc(100% + ${vt}px) ${Gt}px`,right:`${-vt}px ${Gt}px`}[zt],zn=`${ln}px ${Nt.reference.y+mt-ht}px`;return xt.floating.style.setProperty("--transform-origin",ye&&Et==="y"&&Ut?zn:kr),{}}},ZJ,b),kt(()=>{!v&&g&&g.update({referenceElement:null,floatingElement:null,domReferenceElement:null})},[v,g]);const Le=y.useMemo(()=>({elementResize:!f&&typeof ResizeObserver<"u",layoutShift:!f&&typeof IntersectionObserver<"u"}),[f]),{refs:fe,elements:ve,x:Ae,y:De,middlewareData:Ue,update:Ie,placement:ze,context:Ce,isPositioned:Oe,floatingStyles:Ne}=wJ({rootContext:g,placement:te,middleware:me,strategy:n,whileElementsMounted:p?void 0:(...Ke)=>WT(...Ke,Le),nodeId:C,externalTree:T}),{sideX:yt,sideY:Fe}=Ue.adaptiveOrigin||QJ,st=Oe?n:"fixed",wt=y.useMemo(()=>b?{position:st,[yt]:Ae,[Fe]:De}:{position:st,...Ne},[b,st,yt,Ae,Fe,De,Ne]),At=y.useRef(null);kt(()=>{if(!v)return;const Ke=B.current,xt=typeof Ke=="function"?Ke():Ke,rt=(ZT(xt)?xt.current:xt)||null||null;rt!==At.current&&(fe.setPositionReference(rt),At.current=rt)},[v,fe,U,B]),y.useEffect(()=>{if(!v)return;const Ke=B.current;typeof Ke!="function"&&ZT(Ke)&&Ke.current!==At.current&&(fe.setPositionReference(Ke.current),At.current=Ke.current)},[v,fe,U,B]),y.useEffect(()=>{if(p&&v&&ve.domReference&&ve.floating)return WT(ve.domReference,ve.floating,Ie,Le)},[p,v,ve,Ie,Le]);const Ye=Ji(ze),Re=Dj(r,Ye,q),Te=Il(ze)||"center",pe=!!((nt=Ue.hide)!=null&&nt.referenceHidden);kt(()=>{_&&v&&Oe&&L(Ye)},[_,v,Oe,Ye]);const be=y.useMemo(()=>{var Ke,xt;return{position:"absolute",top:(Ke=Ue.arrow)==null?void 0:Ke.y,left:(xt=Ue.arrow)==null?void 0:xt.x}},[Ue.arrow]),gt=((lt=Ue.arrow)==null?void 0:lt.centerOffset)!==0;return y.useMemo(()=>({positionerStyles:wt,arrowStyles:be,arrowRef:qe,arrowUncentered:gt,side:Re,align:Te,physicalSide:Ye,anchorHidden:pe,refs:fe,context:Ce,isPositioned:Oe,update:Ie}),[wt,be,qe,gt,Re,Te,Ye,pe,fe,Ce,Oe,Ie])}function ZT(t){return t!=null&&"current"in t}function eee(t){const{children:e,elementsRef:n,labelsRef:r,onMapChange:i}=t,s=dt(i),o=y.useRef(0),a=Ms(nee).current,l=Ms(tee).current,[c,h]=y.useState(0),f=y.useRef(c),p=dt((C,b)=>{l.set(C,b??null),f.current+=1,h(f.current)}),g=dt(C=>{l.delete(C),f.current+=1,h(f.current)}),v=y.useMemo(()=>{const C=new Map;return Array.from(l.keys()).filter(_=>_.isConnected).sort(ree).forEach((_,T)=>{const R=l.get(_)??{};C.set(_,{...R,index:T})}),C},[l,c]);kt(()=>{if(typeof MutationObserver!="function"||v.size===0)return;const C=new MutationObserver(b=>{const _=new Set,T=R=>_.has(R)?_.delete(R):_.add(R);b.forEach(R=>{R.removedNodes.forEach(T),R.addedNodes.forEach(T)}),_.size===0&&(f.current+=1,h(f.current))});return v.forEach((b,_)=>{_.parentElement&&C.observe(_.parentElement,{childList:!0})}),()=>{C.disconnect()}},[v]),kt(()=>{f.current===c&&(n.current.length!==v.size&&(n.current.length=v.size),r&&r.current.length!==v.size&&(r.current.length=v.size),o.current=v.size),s(v)},[s,v,n,r,c]),kt(()=>()=>{n.current=[]},[n]),kt(()=>()=>{r&&(r.current=[])},[r]);const x=dt(C=>(a.add(C),()=>{a.delete(C)}));kt(()=>{a.forEach(C=>C(v))},[a,v]);const k=y.useMemo(()=>({register:p,unregister:g,subscribeMapChange:x,elementsRef:n,labelsRef:r,nextIndexRef:o}),[p,g,x,n,r,o]);return w.jsx(MN.Provider,{value:k,children:e})}function tee(){return new Map}function nee(){return new Set}function ree(t,e){const n=t.compareDocumentPosition(e);return n&Node.DOCUMENT_POSITION_FOLLOWING||n&Node.DOCUMENT_POSITION_CONTAINED_BY?-1:n&Node.DOCUMENT_POSITION_PRECEDING||n&Node.DOCUMENT_POSITION_CONTAINS?1:0}const iee=y.forwardRef(function(e,n){const{cutout:r,...i}=e;let s;if(r){const o=r==null?void 0:r.getBoundingClientRect();s=`polygon(
      0% 0%,
      100% 0%,
      100% 100%,
      0% 100%,
      0% 0%,
      ${o.left}px ${o.top}px,
      ${o.left}px ${o.bottom}px,
      ${o.right}px ${o.bottom}px,
      ${o.right}px ${o.top}px,
      ${o.left}px ${o.top}px
    )`}return w.jsx("div",{ref:n,role:"presentation","data-base-ui-inert":"",...i,style:{position:"fixed",inset:0,userSelect:"none",WebkitUserSelect:"none",clipPath:s}})}),zS=y.forwardRef(function(e,n){var ae;const{anchor:r,positionMethod:i="absolute",className:s,render:o,side:a,align:l,sideOffset:c=0,alignOffset:h=0,collisionBoundary:f="clipping-ancestors",collisionPadding:p=5,arrowPadding:g=5,sticky:v=!1,disableAnchorTracking:x=!1,collisionAvoidance:k=XK,...C}=e,{store:b}=Al(),_=GJ(),T=op(!0),R=b.useState("parent"),L=b.useState("floatingRootContext"),M=b.useState("floatingTreeRoot"),A=b.useState("mounted"),$=b.useState("open"),j=b.useState("modal"),V=b.useState("activeTriggerElement"),U=b.useState("lastOpenChangeReason"),B=b.useState("floatingNodeId"),Z=b.useState("floatingParentNodeId");let q=r,G=c,te=h,O=l;R.type==="context-menu"&&(q=r??((ae=R.context)==null?void 0:ae.anchor),O=O??"start",!a&&O!=="center"&&(te=e.alignOffset??2,G=e.sideOffset??-5));let K=a,Y=O;R.type==="menu"?(K=K??"inline-end",Y=Y??"start"):R.type==="menubar"&&(K=K??"bottom",Y=Y??"start");const xe=R.type==="context-menu",re=JJ({anchor:q,floatingRootContext:L,positionMethod:T?"fixed":i,mounted:A,side:K,sideOffset:G,align:Y,alignOffset:te,arrowPadding:xe?0:g,collisionBoundary:f,collisionPadding:p,sticky:v,nodeId:B,keepMounted:_,disableAnchorTracking:x,collisionAvoidance:k,shiftCrossAxis:xe,externalTree:M}),ue=y.useMemo(()=>{const me={};return $||(me.pointerEvents="none"),{role:"presentation",hidden:!A,style:{...re.positionerStyles,...me}}},[$,A,re.positionerStyles]);y.useEffect(()=>{function me(X){X.open?(X.parentNodeId===B&&b.set("hoverEnabled",!1),X.nodeId!==B&&X.parentNodeId===b.select("floatingParentNodeId")&&b.setOpen(!1,en(Mh))):X.parentNodeId===B&&X.reason!==Mh&&b.set("hoverEnabled",!0)}return M.events.on("menuopenchange",me),()=>{M.events.off("menuopenchange",me)}},[b,M.events,B]),y.useEffect(()=>{if(b.select("floatingParentNodeId")==null)return;function me(X){if(X.open||X.nodeId!==b.select("floatingParentNodeId"))return;const ye=X.reason??Mh;b.setOpen(!1,en(ye))}return M.events.on("menuopenchange",me),()=>{M.events.off("menuopenchange",me)}},[M.events,b]),y.useEffect(()=>{function me(X){!$||X.nodeId!==b.select("floatingParentNodeId")||X.target&&V&&V!==X.target&&b.setOpen(!1,en(Mh))}return M.events.on("itemhover",me),()=>{M.events.off("itemhover",me)}},[M.events,$,V,b]),y.useEffect(()=>{const me={open:$,nodeId:B,parentNodeId:Z,reason:b.select("lastOpenChangeReason")};M.events.emit("menuopenchange",me)},[M.events,$,b,B,Z]);const ke=y.useMemo(()=>({open:$,side:re.side,align:re.align,anchorHidden:re.anchorHidden,nested:R.type==="menu"}),[$,re.side,re.align,re.anchorHidden,R.type]),qe=y.useMemo(()=>({side:re.side,align:re.align,arrowRef:re.arrowRef,arrowUncentered:re.arrowUncentered,arrowStyles:re.arrowStyles,nodeId:re.context.nodeId}),[re.side,re.align,re.arrowRef,re.arrowUncentered,re.arrowStyles,re.context.nodeId]),he=Nl("div",e,{state:ke,stateAttributesMapping:EN,ref:[n,b.useStateSetter("positionerElement")],props:[ue,C]}),ge=A&&R.type!=="menu"&&(R.type!=="menubar"&&j&&U!==Ki||R.type==="menubar"&&R.context.modal);let we=null;return R.type==="menubar"?we=R.context.contentElement:R.type===void 0&&(we=V),w.jsxs(wN.Provider,{value:qe,children:[ge&&w.jsx(iee,{ref:R.type==="context-menu"||R.type==="nested-context-menu"?R.context.internalBackdropRef:null,inert:qJ(!$),cutout:we}),w.jsx(SZ,{id:B,children:w.jsx(eee,{elementsRef:b.context.itemDomElements,labelsRef:b.context.itemLabels,children:he})})]})});let QT={},JT={},eP="";function see(t){if(typeof document>"u")return!1;const e=Mo(t);return Ir(e).innerWidth-e.documentElement.clientWidth>0}function oee(t){const e=Mo(t),n=e.documentElement,r=e.body,i=Ou(n)?n:r,s=i.style.overflow;return i.style.overflow="hidden",()=>{i.style.overflow=s}}function aee(t){var p,g;const e=Mo(t),n=e.documentElement,r=e.body,i=Ir(n);let s=0,o=0;const a=xo.create(),l=typeof CSS<"u"&&((p=CSS.supports)==null?void 0:p.call(CSS,"scrollbar-gutter","stable"));if(IX&&(((g=i.visualViewport)==null?void 0:g.scale)??1)!==1)return()=>{};function c(){const v=i.getComputedStyle(n),x=i.getComputedStyle(r),b=(v.scrollbarGutter||"").includes("both-edges")?"stable both-edges":"stable";s=n.scrollTop,o=n.scrollLeft,QT={scrollbarGutter:n.style.scrollbarGutter,overflowY:n.style.overflowY,overflowX:n.style.overflowX},eP=n.style.scrollBehavior,JT={position:r.style.position,height:r.style.height,width:r.style.width,boxSizing:r.style.boxSizing,overflowY:r.style.overflowY,overflowX:r.style.overflowX,scrollBehavior:r.style.scrollBehavior};const _=n.scrollHeight>n.clientHeight,T=n.scrollWidth>n.clientWidth,R=v.overflowY==="scroll"||x.overflowY==="scroll",L=v.overflowX==="scroll"||x.overflowX==="scroll",M=Math.max(0,i.innerWidth-n.clientWidth),A=Math.max(0,i.innerHeight-n.clientHeight),$=parseFloat(x.marginTop)+parseFloat(x.marginBottom),j=parseFloat(x.marginLeft)+parseFloat(x.marginRight),V=Ou(n)?n:r;if(l){n.style.scrollbarGutter=b,V.style.overflowY="hidden",V.style.overflowX="hidden";return}Object.assign(n.style,{scrollbarGutter:b,overflowY:"hidden",overflowX:"hidden"}),(_||R)&&(n.style.overflowY="scroll"),(T||L)&&(n.style.overflowX="scroll"),Object.assign(r.style,{position:"relative",height:$||A?`calc(100dvh - ${$+A}px)`:"100dvh",width:j||M?`calc(100vw - ${j+M}px)`:"100vw",boxSizing:"border-box",overflow:"hidden",scrollBehavior:"unset"}),r.scrollTop=s,r.scrollLeft=o,n.setAttribute("data-base-ui-scroll-locked",""),n.style.scrollBehavior="unset"}function h(){Object.assign(n.style,QT),Object.assign(r.style,JT),l||(n.scrollTop=s,n.scrollLeft=o,n.removeAttribute("data-base-ui-scroll-locked"),n.style.scrollBehavior=eP)}function f(){h(),a.request(c)}return c(),i.addEventListener("resize",f),()=>{a.cancel(),h(),typeof i.removeEventListener=="function"&&i.removeEventListener("resize",f)}}class lee{constructor(){_t(this,"lockCount",0);_t(this,"restore",null);_t(this,"timeoutLock",Eu.create());_t(this,"timeoutUnlock",Eu.create());_t(this,"release",()=>{this.lockCount-=1,this.lockCount===0&&this.restore&&this.timeoutUnlock.start(0,this.unlock)});_t(this,"unlock",()=>{var e;this.lockCount===0&&this.restore&&((e=this.restore)==null||e.call(this),this.restore=null)})}acquire(e){return this.lockCount+=1,this.lockCount===1&&this.restore===null&&this.timeoutLock.start(0,()=>this.lock(e)),this.release}lock(e){if(this.lockCount===0||this.restore!==null)return;const r=Mo(e).documentElement,i=Ir(r).getComputedStyle(r).overflowY;if(i==="hidden"||i==="clip"){this.restore=kN;return}const s=OX||!see(e);this.restore=s?oee(e):aee(e)}}const uee=new lee;function cee(t=!0,e=null){kt(()=>{if(t)return uee.acquire(e)},[t,e])}const dee=y.createContext(null);function Fj(t){const e=y.useContext(dee);if(e===null&&!t)throw new Error(No(5));return e}function hee(t){const e=y.useRef(""),n=y.useCallback(i=>{i.defaultPrevented||(e.current=i.pointerType,t(i,i.pointerType))},[t]);return{onClick:y.useCallback(i=>{if(i.detail===0){t(i,"keyboard");return}"pointerType"in i&&t(i,i.pointerType),t(i,e.current),e.current=""},[t]),onPointerDown:n}}function fee(t){const[e,n]=y.useState(null),r=dt((a,l)=>{t||n(l)}),i=y.useCallback(()=>{n(null)},[]),{onClick:s,onPointerDown:o}=hee(r);return y.useMemo(()=>({openMethod:e,reset:i,triggerProps:{onClick:s,onPointerDown:o}}),[e,i,s,o])}const pee={...vJ,disabled:Ot(t=>t.parent.type==="menubar"&&t.parent.context.disabled||t.disabled),modal:Ot(t=>(t.parent.type===void 0||t.parent.type==="context-menu")&&(t.modal??!0)),allowMouseEnter:Ot(t=>t.parent.type==="menu"?t.parent.store.select("allowMouseEnter"):t.allowMouseEnter),stickIfOpen:Ot(t=>t.stickIfOpen),parent:Ot(t=>t.parent),rootId:Ot(t=>t.parent.type==="menu"?t.parent.store.select("rootId"):t.parent.type!==void 0?t.parent.context.rootId:t.rootId),activeIndex:Ot(t=>t.activeIndex),isActive:Ot((t,e)=>t.activeIndex===e),hoverEnabled:Ot(t=>t.hoverEnabled),instantType:Ot(t=>t.instantType),lastOpenChangeReason:Ot(t=>t.openChangeReason),floatingTreeRoot:Ot(t=>t.parent.type==="menu"?t.parent.store.select("floatingTreeRoot"):t.floatingTreeRoot),floatingNodeId:Ot(t=>t.floatingNodeId),floatingParentNodeId:Ot(t=>t.floatingParentNodeId),itemProps:Ot(t=>t.itemProps),closeDelay:Ot(t=>t.closeDelay),keyboardEventRelay:Ot(t=>{if(t.keyboardEventRelay)return t.keyboardEventRelay;if(t.parent.type==="menu")return t.parent.store.select("keyboardEventRelay")})};class US extends Ej{constructor(n){super({...gee(),...n},{positionerRef:y.createRef(),popupRef:y.createRef(),typingRef:{current:!1},itemDomElements:{current:[]},itemLabels:{current:[]},allowMouseUpTriggerRef:{current:!1},triggerFocusTargetRef:y.createRef(),beforeContentFocusGuardRef:y.createRef(),onOpenChangeComplete:void 0,triggerElements:new FS},pee);_t(this,"unsubscribeParentListener",null);this.observe(Ot(r=>r.allowMouseEnter),(r,i)=>{this.state.parent.type==="menu"&&r!==i&&this.state.parent.store.set("allowMouseEnter",r)}),this.unsubscribeParentListener=this.observe("parent",r=>{var i;if((i=this.unsubscribeParentListener)==null||i.call(this),r.type==="menu"){this.unsubscribeParentListener=r.store.subscribe(()=>{this.notifyAll()}),this.context.allowMouseUpTriggerRef=r.store.context.allowMouseUpTriggerRef;return}r.type!==void 0&&(this.context.allowMouseUpTriggerRef=r.context.allowMouseUpTriggerRef),this.unsubscribeParentListener=null})}setOpen(n,r){this.state.floatingRootContext.context.events.emit("setOpen",{open:n,eventDetails:r})}static useStore(n,r){return Ms(()=>n??new US(r)).current}}function gee(){return{...mJ(),disabled:!1,modal:!0,allowMouseEnter:!0,stickIfOpen:!0,parent:{type:void 0},rootId:void 0,activeIndex:null,hoverEnabled:!0,instantType:void 0,openChangeReason:null,floatingTreeRoot:new jS,floatingNodeId:void 0,floatingParentNodeId:null,itemProps:Nr,keyboardEventRelay:void 0,closeDelay:0}}const mee=y.createContext(void 0);function vee(){return y.useContext(mee)}function Bj(t){const{children:e,open:n,onOpenChange:r,onOpenChangeComplete:i,defaultOpen:s=!1,disabled:o=!1,modal:a,loopFocus:l=!0,orientation:c="vertical",actionsRef:h,closeParentOnEsc:f=!0,handle:p,triggerId:g,defaultTriggerId:v=null,highlightItemOnHover:x=!0}=t,k=op(!0),C=Al(!0),b=Fj(!0),_=vee(),T=y.useMemo(()=>_&&C?{type:"menu",store:C.store}:b?{type:"menubar",context:b}:k&&!C?{type:"context-menu",context:k}:{type:void 0},[k,C,b,_]),R=US.useStore(p==null?void 0:p.store,{parent:T}),L=R.useState("floatingTreeRoot"),M=oj(L),A=_a();kt(()=>{k&&!C?R.update({parent:{type:"context-menu",context:k},floatingNodeId:M,floatingParentNodeId:A}):C&&R.update({floatingNodeId:M,floatingParentNodeId:A})},[k,C,M,A,R]),R.useControlledProp("open",n,s),R.useControlledProp("activeTriggerId",g,v),R.useContextCallback("onOpenChangeComplete",i);const $=R.useState("open"),j=R.useState("activeTriggerElement"),V=R.useState("positionerElement"),U=R.useState("hoverEnabled"),B=R.useState("modal"),Z=R.useState("disabled"),q=R.useState("lastOpenChangeReason"),G=R.useState("parent"),te=R.useState("activeIndex"),O=R.useState("payload"),K=R.useState("floatingParentNodeId"),Y=y.useRef(null),xe=K!=null;let re;R.useSyncedValues({disabled:o,modal:G.type===void 0?a:void 0,rootId:Ml()});const{openMethod:ue,triggerProps:ke,reset:qe}=fee($);fJ(R);const{forceUnmount:he}=pJ($,R,()=>{R.update({allowMouseEnter:!1,stickIfOpen:!0}),qe()}),ge=y.useRef(G.type!=="context-menu"),we=xi();y.useEffect(()=>{if($||(Y.current=null),G.type==="context-menu"){if(!$){we.clear(),ge.current=!1;return}we.start(500,()=>{ge.current=!0})}},[we,$,G.type]),cee($&&B&&q!==Ki&&ue!=="touch",V),kt(()=>{!$&&!U&&R.set("hoverEnabled",!0)},[$,U,R]);const ae=y.useRef(!0),me=xi(),X=dt((pe,be)=>{const gt=be.reason;if($===pe&&be.trigger===j||(be.preventUnmountOnClose=()=>{R.set("preventUnmountingOnClose",!0)},!pe&&be.trigger==null&&(be.trigger=j??void 0),r==null||r(pe,be),be.isCanceled))return;const nt={open:pe,nativeEvent:be.event,reason:be.reason,nested:xe};re==null||re.emit("openchange",nt);const lt=be.event;if(pe===!1&&(lt==null?void 0:lt.type)==="click"&&lt.pointerType==="touch"&&!ae.current)return;if(!pe&&te!==null){const rt=R.context.itemDomElements.current[te];queueMicrotask(()=>{rt==null||rt.setAttribute("tabindex","-1")})}pe&&gt===a0?(ae.current=!1,me.start(300,()=>{ae.current=!0})):(ae.current=!0,me.clear());const Ke=(gt===fl||gt===RN)&&lt.detail===0&&(lt==null?void 0:lt.isTrusted),xt=!pe&&(gt===CS||gt==null);function Lt(){var ht;const rt={open:pe,openChangeReason:gt};Y.current=be.event??null;const Nt=((ht=be.trigger)==null?void 0:ht.id)??null;(Nt||pe)&&(rt.activeTriggerId=Nt,rt.activeTriggerElement=be.trigger??null),R.update(rt)}gt===Ki?ai.flushSync(Lt):Lt(),G.type==="menubar"&&(gt===a0||gt===od||gt===Ki||gt===dm||gt===Mh)?R.set("instantType","group"):Ke||xt?R.set("instantType",Ke?"click":"dismiss"):R.set("instantType",void 0)}),ye=y.useCallback(pe=>{const be=en(pe);return be.preventUnmountOnClose=()=>{R.set("preventUnmountingOnClose",!0)},be},[R]),_e=y.useCallback(()=>{R.setOpen(!1,ye(uX))},[R,ye]);y.useImperativeHandle(h,()=>({unmount:he,close:_e}),[he,_e]);let at;G.type==="context-menu"&&(at=G.context),y.useImperativeHandle(at==null?void 0:at.positionerRef,()=>V,[V]),y.useImperativeHandle(at==null?void 0:at.actionsRef,()=>({setOpen:X}),[X]);const Le=xJ({popupStore:R,onOpenChange:X});re=Le.context.events,y.useEffect(()=>{const pe=({open:be,eventDetails:gt})=>X(be,gt);return re.on("setOpen",pe),()=>{re==null||re.off("setOpen",pe)}},[re,X]);const fe=kQ(Le,{enabled:!Z,bubbles:f&&G.type==="menu",outsidePress(){var pe;return G.type!=="context-menu"||((pe=Y.current)==null?void 0:pe.type)==="contextmenu"?!0:ge.current},externalTree:xe?L:void 0}),ve=jJ(Le,{role:"menu"}),Ae=Oj(),De=y.useCallback(pe=>{R.select("activeIndex")!==pe&&R.set("activeIndex",pe)},[R]),Ue=AJ(Le,{enabled:!Z,listRef:R.context.itemDomElements,activeIndex:te,nested:G.type!==void 0,loopFocus:l,orientation:c,parentOrientation:G.type==="menubar"?G.context.orientation:void 0,rtl:Ae==="rtl",disabledIndices:s0,onNavigate:De,openOnArrowKeyDown:G.type!=="context-menu",externalTree:xe?L:void 0,focusItemOnHover:x}),Ie=y.useCallback(pe=>{R.context.typingRef.current=pe},[R]),ze=IJ(Le,{listRef:R.context.itemLabels,activeIndex:te,resetMs:GK,onMatch:pe=>{$&&pe!==te&&R.set("activeIndex",pe)},onTypingChange:Ie}),{getReferenceProps:Ce,getFloatingProps:Oe,getItemProps:Ne,getTriggerProps:yt}=Tj([fe,ve,Ue,ze]),Fe=y.useMemo(()=>{const pe=ev(Ce(),{onMouseEnter(){R.set("hoverEnabled",!0)},onMouseMove(){R.set("allowMouseEnter",!0)}},ke);return delete pe.role,pe},[Ce,R,ke]),st=y.useMemo(()=>{const pe=yt();if(!pe)return pe;const{role:be,["aria-controls"]:gt,...nt}=pe;return nt},[yt]),wt=sv(),At=y.useMemo(()=>Oe({onMouseEnter(){G.type==="menu"&&wt.request(()=>R.set("hoverEnabled",!1))},onMouseMove(){R.set("allowMouseEnter",!0)},onClick(){R.select("hoverEnabled")&&R.set("hoverEnabled",!1)},onKeyDown(pe){const be=R.select("keyboardEventRelay");be&&!pe.isPropagationStopped()&&be(pe)}}),[Oe,G.type,wt,R]),Ye=y.useMemo(()=>Ne(),[Ne]);R.useSyncedValues({floatingRootContext:Le,activeTriggerProps:Fe,inactiveTriggerProps:st,popupProps:At,itemProps:Ye});const Re=y.useMemo(()=>({store:R,parent:T}),[R,T]),Te=w.jsx(xS.Provider,{value:Re,children:typeof e=="function"?e({payload:O}):e});return G.type===void 0||G.type==="context-menu"?w.jsx(CZ,{externalTree:L,children:Te}):Te}function yee(t){const e=t.getBoundingClientRect(),n=window.getComputedStyle(t,"::before"),r=window.getComputedStyle(t,"::after");if(!(n.content!=="none"||r.content!=="none"))return e;const s=parseFloat(n.width)||0,o=parseFloat(n.height)||0,a=parseFloat(r.width)||0,l=parseFloat(r.height)||0,c=Math.max(e.width,s,a),h=Math.max(e.height,o,l),f=c-e.width,p=h-e.height;return{left:e.left-f/2,right:e.right+f/2,top:e.top-p/2,bottom:e.bottom+p/2}}function wee(t={}){const{highlightItemOnHover:e,highlightedIndex:n,onHighlightedIndexChange:r}=RS(),{ref:i,index:s}=AN(t),o=n===s,a=y.useRef(null),l=sd(i,a);return{compositeProps:y.useMemo(()=>({tabIndex:o?0:-1,onFocus(){r(s)},onMouseMove(){const h=a.current;if(!e||!h)return;const f=h.hasAttribute("disabled")||h.ariaDisabled==="true";!o&&!f&&h.focus()}}),[o,r,s,e]),compositeRef:l,index:s}}function xee(t){const{render:e,className:n,state:r=Nr,props:i=s0,refs:s=s0,metadata:o,stateAttributesMapping:a,tag:l="div",...c}=t,{compositeProps:h,compositeRef:f}=wee({metadata:o});return Nl(l,t,{state:r,ref:[...s,f],props:[h,...i,c],stateAttributesMapping:a})}function VS(t){if(Kn(t)&&t.hasAttribute("data-rootownerid"))return t.getAttribute("data-rootownerid")??void 0;if(!Ro(t))return VS(Lo(t))}function _ee(t){const{enabled:e=!0,mouseDownAction:n,open:r}=t,i=y.useRef(!1);return y.useMemo(()=>e?{onMouseDown:s=>{(n==="open"&&!r||n==="close"&&r)&&(i.current=!0,Mo(s.currentTarget).addEventListener("click",()=>{i.current=!1},{once:!0}))},onClick:s=>{i.current&&(i.current=!1,s.preventBaseUIHandler())}}:Nr,[e,n,r])}const Ug=2,bee=y.forwardRef(function(e,n){const{render:r,className:i,disabled:s=!1,nativeButton:o=!0,id:a,openOnHover:l,delay:c=100,closeDelay:h=0,handle:f,payload:p,...g}=e,v=Al(!0),x=(f==null?void 0:f.store)??(v==null?void 0:v.store);if(!x)throw new Error(No(85));const k=NN(a),C=x.useState("isTriggerActive",k),b=x.useState("floatingRootContext"),_=x.useState("isOpenedByTrigger",k),T=y.useRef(null),R=Cee(),L=RS(!0),M=Ol(),A=y.useMemo(()=>M??new jS,[M]),$=oj(A),j=_a(),{registerTrigger:V,isMountedByThisTrigger:U}=hJ(k,T,x,{payload:p,closeDelay:h,parent:R,floatingTreeRoot:A,floatingNodeId:$,floatingParentNodeId:j,keyboardEventRelay:L==null?void 0:L.relayKeyboardEvent}),B=x.useState("disabled"),Z=s||B||R.type==="menubar"&&R.context.disabled,{getButtonProps:q,buttonRef:G}=LN({disabled:Z,native:o});y.useEffect(()=>{!_&&R.type===void 0&&(x.context.allowMouseUpTriggerRef.current=!1)},[x,_,R.type]);const te=y.useRef(null),O=xi(),K=dt(ve=>{if(!te.current)return;O.clear(),x.context.allowMouseUpTriggerRef.current=!1;const Ae=ve.target;if(Dt(te.current,Ae)||Dt(x.select("positionerElement"),Ae)||Ae===te.current||Ae!=null&&VS(Ae)===x.select("rootId"))return;const De=yee(te.current);ve.clientX>=De.left-Ug&&ve.clientX<=De.right+Ug&&ve.clientY>=De.top-Ug&&ve.clientY<=De.bottom+Ug||A.events.emit("close",{domEvent:ve,reason:TN})});y.useEffect(()=>{_&&x.select("lastOpenChangeReason")===Ki&&Mo(te.current).addEventListener("mouseup",K,{once:!0})},[_,K,x]);const Y=R.type==="menubar"&&R.context.hasSubmenuOpen,re=TJ(b,{enabled:(l??Y??!1)&&!Z&&R.type!=="context-menu"&&(R.type!=="menubar"||Y&&!U),handleClose:DJ({blockPointerEvents:R.type!=="menubar"}),mouseOnly:!0,move:!1,restMs:R.type===void 0?c:void 0,delay:{close:h},triggerElementRef:T,externalTree:A,isActiveTrigger:C}),ue=See(_,x.select("lastOpenChangeReason")),ke=OZ(b,{enabled:!Z&&R.type!=="context-menu",event:_&&R.type==="menubar"?"click":"mousedown",toggle:!0,ignoreMouse:!1,stickIfOpen:R.type===void 0?ue:!1}),qe=_J(b,{enabled:!Z&&(R.type!=="menubar"&&_||Y)}),he=_ee({open:_,enabled:R.type==="menubar",mouseDownAction:"open"}),ge=Tj([ke,qe]),we=R.type==="menubar",ae=y.useMemo(()=>({disabled:Z,open:_}),[Z,_]),me=x.useState("triggerProps",U),X=[te,n,G,V,T],ye=[ge.getReferenceProps(),re??Nr,me,{"aria-haspopup":"menu",id:k,onMouseDown:ve=>{if(x.select("open"))return;O.start(200,()=>{x.context.allowMouseUpTriggerRef.current=!0}),Mo(ve.currentTarget).addEventListener("mouseup",K,{once:!0})}},we?{role:"menuitem"}:{},he,g,q],_e=y.useRef(null),at=dt(ve=>{ai.flushSync(()=>{x.setOpen(!1,en(od,ve.nativeEvent,ve.currentTarget))});const Ae=_Z(_e.current);Ae==null||Ae.focus()}),Le=dt(ve=>{var De;const Ae=x.select("positionerElement");if(Ae&&Wc(ve,Ae))(De=x.context.beforeContentFocusGuardRef.current)==null||De.focus();else{ai.flushSync(()=>{x.setOpen(!1,en(od,ve.nativeEvent,ve.currentTarget))});let Ue=xZ(T.current);for(;Ue!==null&&Dt(Ae,Ue)||Ue!=null&&Ue.hasAttribute("aria-hidden");){const Ie=Ue;if(Ue=NS(Ue),Ue===Ie)break}Ue==null||Ue.focus()}}),fe=Nl("button",e,{enabled:!we,stateAttributesMapping:Wx,state:ae,ref:X,props:ye});return we?w.jsx(xee,{tag:"button",render:r,className:i,state:ae,refs:X,props:ye,stateAttributesMapping:Wx}):_?w.jsxs(y.Fragment,{children:[w.jsx(dd,{ref:_e,onFocus:at},`${k}-pre-focus-guard`),w.jsx(y.Fragment,{children:fe},k),w.jsx(dd,{ref:x.context.triggerFocusTargetRef,onFocus:Le},`${k}-post-focus-guard`)]}):w.jsx(y.Fragment,{children:fe},k)});function See(t,e){const n=xi(),[r,i]=y.useState(!1);return kt(()=>{t&&e==="trigger-hover"?(i(!0),n.start(qK,()=>{i(!1)})):t||(n.clear(),i(!1))},[t,e,n]),r}function Cee(){const t=op(!0),e=Al(!0),n=Fj(!0);return y.useMemo(()=>n?{type:"menubar",context:n}:t&&!e?{type:"context-menu",context:t}:{type:void 0},[t,e,n])}const $j=y.forwardRef(function(e,n){const{className:r,render:i,orientation:s="horizontal",...o}=e,a=y.useMemo(()=>({orientation:s}),[s]);return Nl("div",e,{state:a,ref:n,props:[{role:"separator","aria-orientation":s},o]})});function zj(t){const[e,n]=y.useState({getBoundingClientRect(){return DOMRect.fromRect({width:0,height:0,x:0,y:0})}}),r=y.useRef(null),i=y.useRef(null),s=y.useRef(null),o=y.useRef(null),a=y.useRef(!0),l=y.useRef(null),c=Ml(),h=y.useMemo(()=>({anchor:e,setAnchor:n,actionsRef:s,backdropRef:r,internalBackdropRef:i,positionerRef:o,allowMouseUpTriggerRef:a,initialCursorPointRef:l,rootId:c}),[e,c]);return w.jsx(yN.Provider,{value:h,children:w.jsx(xS.Provider,{value:void 0,children:w.jsx(Bj,{...t})})})}const tP=500,Uj=y.forwardRef(function(e,n){const{render:r,className:i,...s}=e,{setAnchor:o,actionsRef:a,internalBackdropRef:l,backdropRef:c,positionerRef:h,allowMouseUpTriggerRef:f,initialCursorPointRef:p,rootId:g}=op(!1),{store:v}=Al(!1),x=v.useState("open"),k=y.useRef(null),C=y.useRef(null),b=xi(),_=xi(),T=y.useRef(!1);function R(U,B,Z){var G;const q=Z.type.startsWith("touch");p.current={x:U,y:B},o({getBoundingClientRect(){return DOMRect.fromRect({width:q?10:0,height:q?10:0,x:U,y:B})}}),T.current=!1,(G=a.current)==null||G.setOpen(!0,en(fl,Z)),_.start(tP,()=>{T.current=!0})}function L(U){f.current=!0,Wr(U),R(U.clientX,U.clientY,U.nativeEvent),Mo(k.current).addEventListener("mouseup",Z=>{var G;if(f.current=!1,!T.current)return;_.clear(),T.current=!1;const q=oi(Z);Dt(h.current,q)||g&&q&&VS(q)===g||(G=a.current)==null||G.setOpen(!1,en(TN,Z))},{once:!0})}function M(U){if(f.current=!1,U.touches.length===1){U.stopPropagation();const B=U.touches[0];C.current={x:B.clientX,y:B.clientY},b.start(tP,()=>{C.current&&R(C.current.x,C.current.y,U.nativeEvent)})}}function A(U){if(b.isStarted()&&C.current&&U.touches.length===1){const B=U.touches[0],Z=10,q=Math.abs(B.clientX-C.current.x),G=Math.abs(B.clientY-C.current.y);(q>Z||G>Z)&&b.clear()}}function $(){b.clear(),C.current=null}y.useEffect(()=>{function U(Z){const G=oi(Z);(Dt(k.current,G)||Dt(l.current,G)||Dt(c.current,G))&&Z.preventDefault()}const B=Mo(k.current);return B.addEventListener("contextmenu",U),()=>{B.removeEventListener("contextmenu",U)}},[c,l]);const j=y.useMemo(()=>({open:x}),[x]);return Nl("div",e,{state:j,ref:[k,n],props:[{onContextMenu:L,onTouchStart:M,onTouchMove:A,onTouchEnd:$,onTouchCancel:$,style:{WebkitTouchCallout:"none"}},s],stateAttributesMapping:Wx})});function kee(){return w.jsx("div",{className:"layer-item__thumbnail"})}function Eee({layer:t,isActive:e,isBackground:n,onSelect:r,onToggleVisibility:i,onRename:s,onDelete:o,onDuplicate:a,onMerge:l,canMerge:c}){const{attributes:h,listeners:f,setNodeRef:p,transform:g,transition:v,isDragging:x}=mN({id:t.id}),[k,C]=Be.useState(!1),[b,_]=Be.useState(t.name),T={transform:id.Transform.toString(g),transition:v,opacity:x?.4:1},R=()=>{b.trim()!==""?s(b.trim()):_(t.name),C(!1)},L=M=>{M.key==="Enter"?R():M.key==="Escape"&&(_(t.name),C(!1))};return w.jsxs(zj,{children:[w.jsx(Uj,{className:"layer-context-menu__trigger",children:w.jsxs("div",{ref:p,style:T,className:`layer-item ${e?"layer-item--active":""} ${n?"layer-item--background":""} ${x?"layer-item--dragging":""}`,onClick:r,...n?{}:{...h,...f},children:[w.jsx("div",{className:"layer-item__section layer-item__section--visibility",children:w.jsx("button",{className:"layer-item__visibility",onClick:M=>{M.stopPropagation(),i()},title:t.visible?"Hide layer":"Show layer",children:t.visible&&w.jsx("span",{className:"layer-item__eye-icon",children:""})})}),w.jsx("div",{className:"layer-item__divider"}),w.jsx("div",{className:"layer-item__section layer-item__section--thumbnail",children:w.jsx(kee,{})}),w.jsx("div",{className:"layer-item__divider"}),w.jsxs("div",{className:"layer-item__section layer-item__section--name",children:[k&&!n?w.jsx("input",{className:"layer-item__name-input",value:b,onChange:M=>_(M.target.value),onBlur:R,onKeyDown:L,onClick:M=>M.stopPropagation(),autoFocus:!0}):w.jsx("div",{className:"layer-item__name",onDoubleClick:M=>{n||(M.stopPropagation(),C(!0))},style:n?{cursor:"default"}:void 0,children:t.name}),w.jsx("span",{className:"layer-item__count",children:t.strokes.length})]})]})}),w.jsx($S,{children:w.jsx(zS,{className:"layer-context-menu__positioner",children:w.jsxs(BS,{className:"layer-context-menu__popup",children:[w.jsxs(Xs,{className:"layer-context-menu__item",onClick:a,children:[w.jsx(XV,{className:"layer-context-menu__item-icon",size:16}),"Duplicate Layer"]}),!n&&w.jsxs(Xs,{className:"layer-context-menu__item",onClick:()=>C(!0),children:[w.jsx(XM,{className:"layer-context-menu__item-icon",size:16}),"Rename Layer"]}),w.jsxs(Xs,{className:"layer-context-menu__item",onClick:l,disabled:!c,children:[w.jsx(nW,{className:"layer-context-menu__item-icon",size:16}),"Merge Selected Layers"]}),w.jsx($j,{className:"layer-context-menu__separator"}),!n&&w.jsxs(Xs,{className:"layer-context-menu__item layer-context-menu__item--danger",onClick:o,children:[w.jsx(ZM,{className:"layer-context-menu__item-icon",size:16}),"Delete Layer"]})]})})})]})}function Ree({layers:t,activeLayerId:e,onLayersChange:n,onActiveLayerChange:r}){const i=YA(qA(X0,{activationConstraint:{delay:250,tolerance:5}})),s=[...t].sort((v,x)=>x.order-v.order),o=s.map(v=>v.id),a=v=>{const{active:x,over:k}=v;if(!k||x.id===k.id)return;const C=s.findIndex(R=>R.id===x.id),b=s.findIndex(R=>R.id===k.id),_=J0(s,C,b),T=_.map((R,L)=>({...R,order:_.length-1-L}));n(T)},l=()=>{const v=Math.max(...t.map(k=>k.order),-1),x={id:crypto.randomUUID(),name:`Layer ${t.length+1}`,visible:!0,order:v+1,strokes:[]};n([...t,x]),r(x.id)},c=v=>{n(t.map(x=>x.id===v?{...x,visible:!x.visible}:x))},h=(v,x)=>{n(t.map(k=>k.id===v?{...k,name:x}:k))},f=v=>{if(t.length<=1){alert("Cannot delete the last layer");return}const x=t.find(C=>C.id===v);if(!x||x.strokes.length>0&&!window.confirm(`Delete "${x.name}"? This will remove ${x.strokes.length} strokes.`))return;const k=t.filter(C=>C.id!==v);n(k),v===e&&k.length>0&&r(k[0].id)},p=v=>{const x=t.find(_=>_.id===v);if(!x)return;const k=Math.max(...t.map(_=>_.order),-1),C=x.strokes.map(_=>({..._,clientId:crypto.randomUUID()})),b={id:crypto.randomUUID(),name:`${x.name} Copy`,visible:x.visible,order:k+1,strokes:C};n([...t,b]),r(b.id)},g=v=>{alert("Multi-layer selection and merging will be available in a future update.")};return w.jsxs("div",{className:"layer-panel",children:[w.jsxs("div",{className:"layer-panel__header",children:[w.jsx("h3",{children:"Layers"}),w.jsx("button",{className:"layer-panel__new-button",onClick:l,children:"+ New"})]}),w.jsx(uN,{sensors:i,collisionDetection:KA,onDragEnd:a,modifiers:[vN],children:w.jsx(pN,{items:o,strategy:dN,children:w.jsx("div",{className:"layer-panel__list",children:s.map(v=>w.jsx(Eee,{layer:v,isActive:v.id===e,isBackground:v.name==="Background"&&v.order===0,onSelect:()=>r(v.id),onToggleVisibility:()=>c(v.id),onRename:x=>h(v.id,x),onDelete:()=>f(v.id),onDuplicate:()=>p(v.id),onMerge:()=>g(v.id),canMerge:!1},v.id))})})})]})}function Tee({activeTool:t,onToolChange:e}){const n=w.jsx("svg",{width:"20px",height:"20px",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:w.jsx("path",{d:"M14.8686 4.13134L14.1615 3.42423L14.1615 3.42423L14.8686 4.13134ZM7.81459 7.48152L8.08931 8.44304L7.81459 7.48152ZM5.57564 9.83884L6.55004 10.0637V10.0637L5.57564 9.83884ZM3 21L2.02561 20.7751C1.94808 21.1111 2.04909 21.4633 2.29289 21.7071C2.5367 21.9509 2.8889 22.0519 3.22486 21.9744L3 21ZM14.1611 18.4243L13.9363 17.4499L13.9363 17.4499L14.1611 18.4243ZM16.5185 16.1854L15.5569 15.9107L16.5185 16.1854ZM19.8686 9.13134L20.5757 9.83845V9.83845L19.8686 9.13134ZM19.8686 6.8686L19.1615 7.57571H19.1615L19.8686 6.8686ZM17.1314 4.13134L17.8385 3.42423V3.42423L17.1314 4.13134ZM20.5368 8.30899L19.5858 7.99997L20.5368 8.30899ZM20.5368 7.69095L19.5858 7.99997L20.5368 7.69095ZM15.4404 18.0251L15.9601 18.8794H15.9601L15.4404 18.0251ZM16.0539 17.4424L16.8804 18.0054L16.8804 18.0054L16.0539 17.4424ZM6.55756 7.94607L7.12056 8.77253L7.12056 8.77253L6.55756 7.94607ZM5.97487 8.55957L6.82922 9.07928L6.82922 9.07928L5.97487 8.55957ZM15.691 3.46313L15.382 2.51207L15.691 3.46313ZM16.309 3.46313L16.618 2.51207L16.618 2.51207L16.309 3.46313ZM9.14645 16.2676C9.53697 15.8771 9.53697 15.2439 9.14644 14.8534C8.75591 14.4629 8.12275 14.4629 7.73223 14.8534L9.14645 16.2676ZM10 14.5C10 14.7761 9.77614 15 9.5 15V17C10.8807 17 12 15.8807 12 14.5H10ZM9.5 15C9.22386 15 9 14.7761 9 14.5H7C7 15.8807 8.11929 17 9.5 17V15ZM9 14.5C9 14.2238 9.22386 14 9.5 14V12C8.11929 12 7 13.1193 7 14.5H9ZM9.5 14C9.77614 14 10 14.2238 10 14.5H12C12 13.1193 10.8807 12 9.5 12V14ZM14.1615 3.42423L12.2929 5.29286L13.7071 6.70708L15.5757 4.83845L14.1615 3.42423ZM12.7253 5.03845L7.53987 6.51999L8.08931 8.44304L13.2747 6.96149L12.7253 5.03845ZM4.60125 9.61398L2.02561 20.7751L3.97439 21.2248L6.55004 10.0637L4.60125 9.61398ZM3.22486 21.9744L14.386 19.3987L13.9363 17.4499L2.77514 20.0256L3.22486 21.9744ZM17.48 16.4601L18.9615 11.2747L17.0385 10.7252L15.5569 15.9107L17.48 16.4601ZM18.7071 11.7071L20.5757 9.83845L19.1615 8.42424L17.2929 10.2929L18.7071 11.7071ZM20.5757 6.16149L17.8385 3.42423L16.4243 4.83845L19.1615 7.57571L20.5757 6.16149ZM20.5757 9.83845C20.7621 9.65211 20.9449 9.47038 21.0858 9.30446C21.2342 9.12961 21.3938 8.90772 21.4879 8.618L19.5858 7.99997C19.6057 7.93858 19.6292 7.92986 19.5611 8.01011C19.4854 8.09928 19.3712 8.21456 19.1615 8.42424L20.5757 9.83845ZM19.1615 7.57571C19.3712 7.78538 19.4854 7.90066 19.5611 7.98984C19.6292 8.07008 19.6057 8.06136 19.5858 7.99997L21.4879 7.38194C21.3938 7.09222 21.2342 6.87033 21.0858 6.69548C20.9449 6.52957 20.7621 6.34783 20.5757 6.16149L19.1615 7.57571ZM21.4879 8.618C21.6184 8.21632 21.6184 7.78362 21.4879 7.38194L19.5858 7.99997V7.99997L21.4879 8.618ZM14.386 19.3987C14.988 19.2598 15.5141 19.1507 15.9601 18.8794L14.9207 17.1708C14.8157 17.2346 14.6727 17.28 13.9363 17.4499L14.386 19.3987ZM15.5569 15.9107C15.3493 16.6373 15.2966 16.7778 15.2274 16.8794L16.8804 18.0054C17.1743 17.574 17.3103 17.0541 17.48 16.4601L15.5569 15.9107ZM15.9601 18.8794C16.3257 18.6571 16.6395 18.359 16.8804 18.0054L15.2274 16.8794C15.1471 16.9973 15.0426 17.0966 14.9207 17.1708L15.9601 18.8794ZM7.53987 6.51999C6.94585 6.68971 6.426 6.82571 5.99457 7.11961L7.12056 8.77253C7.22213 8.70334 7.36263 8.65066 8.08931 8.44304L7.53987 6.51999ZM6.55004 10.0637C6.71998 9.32729 6.76535 9.18427 6.82922 9.07928L5.12053 8.03986C4.84922 8.48586 4.74017 9.01202 4.60125 9.61398L6.55004 10.0637ZM5.99457 7.11961C5.64092 7.36052 5.34291 7.67429 5.12053 8.03986L6.82922 9.07928C6.90334 8.95742 7.00268 8.85283 7.12056 8.77253L5.99457 7.11961ZM15.5757 4.83845C15.7854 4.62878 15.9007 4.51459 15.9899 4.43889C16.0701 4.37076 16.0614 4.39424 16 4.41418L15.382 2.51207C15.0922 2.60621 14.8704 2.76578 14.6955 2.91421C14.5296 3.05506 14.3479 3.2379 14.1615 3.42423L15.5757 4.83845ZM17.8385 3.42423C17.6521 3.23789 17.4704 3.05506 17.3045 2.91421C17.1296 2.76578 16.9078 2.60621 16.618 2.51207L16 4.41418C15.9386 4.39424 15.9299 4.37077 16.0101 4.43889C16.0993 4.51459 16.2146 4.62877 16.4243 4.83845L17.8385 3.42423ZM16 4.41418H16L16.618 2.51207C16.2163 2.38156 15.7837 2.38156 15.382 2.51207L16 4.41418ZM12.2929 6.70708L17.2929 11.7071L18.7071 10.2929L13.7071 5.29286L12.2929 6.70708ZM7.73223 14.8534L2.29289 20.2929L3.70711 21.7071L9.14645 16.2676L7.73223 14.8534Z",fill:"currentColor"})}),r=w.jsxs("svg",{width:"20px",height:"20px",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:[w.jsx("path",{fill:"none",stroke:"currentColor",strokeMiterlimit:"10",strokeWidth:"1.91px",d:"M13.59,19l-2.82,2.83a2.33,2.33,0,0,1-1.63.67h0a2.31,2.31,0,0,1-1.63-.67L2.17,16.49a2.31,2.31,0,0,1-.67-1.63h0a2.33,2.33,0,0,1,.67-1.63L5,10.41Z"}),w.jsx("rect",{fill:"none",stroke:"currentColor",strokeMiterlimit:"10",strokeWidth:"1.91px",x:"7.45",y:"4.17",width:"12.59",height:"12.15",transform:"translate(-3.22 12.73) rotate(-45)"})]}),i=w.jsxs("svg",{width:"20px",height:"20px",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[w.jsx("path",{d:"M8 10L12 3L16 10H8Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),w.jsx("path",{d:"M10 17.5C10 19.433 8.433 21 6.5 21C4.567 21 3 19.433 3 17.5C3 15.567 4.567 14 6.5 14C8.433 14 10 15.567 10 17.5Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),w.jsx("path",{d:"M14 14H21V21H14V14Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]});return w.jsxs("div",{className:"tool-selection-panel",children:[w.jsx("button",{className:`tool-selection-panel__button ${t==="pen"?"tool-selection-panel__button--active":""}`,onClick:()=>e("pen"),"aria-label":"Pen Tool",title:"Pen Tool",children:n}),w.jsx("button",{className:`tool-selection-panel__button ${t==="eraser"?"tool-selection-panel__button--active":""}`,onClick:()=>e("eraser"),"aria-label":"Eraser Tool",title:"Eraser Tool",children:r}),w.jsx("button",{className:`tool-selection-panel__button ${t==="shape"?"tool-selection-panel__button--active":""}`,onClick:()=>e("shape"),"aria-label":"Shape Tool",title:"Shape Tool",children:i})]})}function t_(){return t_=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},t_.apply(null,arguments)}var Ac=255,v0=100,Pee=t=>{var{r:e,g:n,b:r,a:i}=t,s=Math.max(e,n,r),o=s-Math.min(e,n,r),a=o?s===e?(n-r)/o:s===n?2+(r-e)/o:4+(e-n)/o:0;return{h:60*(a<0?a+6:a),s:s?o/s*v0:0,v:s/Ac*v0,a:i}},Lee=t=>{var{r:e,g:n,b:r}=t,i=e<<16|n<<8|r;return"#"+(s=>new Array(7-s.length).join("0")+s)(i.toString(16))},il=t=>Pee(Mee(t)),Mee=t=>{var e=t.replace("#","");/^#?/.test(t)&&e.length===3&&(t="#"+e.charAt(0)+e.charAt(0)+e.charAt(1)+e.charAt(1)+e.charAt(2)+e.charAt(2));var n=new RegExp("[A-Za-z0-9]{2}","g"),[r,i,s=0,o]=t.match(n).map(a=>parseInt(a,16));return{r,g:i,b:s,a:(o??255)/Ac}},Aee=t=>{var{h:e,s:n,v:r,a:i}=t,s=e/60,o=n/v0,a=r/v0,l=Math.floor(s)%6,c=s-Math.floor(s),h=Ac*a*(1-o),f=Ac*a*(1-o*c),p=Ac*a*(1-o*(1-c));a*=Ac;var g={};switch(l){case 0:g.r=a,g.g=p,g.b=h;break;case 1:g.r=f,g.g=a,g.b=h;break;case 2:g.r=h,g.g=a,g.b=p;break;case 3:g.r=h,g.g=f,g.b=a;break;case 4:g.r=p,g.g=h,g.b=a;break;case 5:g.r=a,g.g=h,g.b=f;break}return g.r=Math.round(g.r),g.g=Math.round(g.g),g.b=Math.round(g.b),t_({},g,{a:i})},Vj=t=>Lee(Aee(t));function Nee(t,e,n,r){const i=n*.86,s=(r-90)*Math.PI/180,o={x:t+i*Math.cos(s),y:e+i*Math.sin(s)},a={x:t+i*Math.cos(s+2*Math.PI/3),y:e+i*Math.sin(s+2*Math.PI/3)},l={x:t+i*Math.cos(s+4*Math.PI/3),y:e+i*Math.sin(s+4*Math.PI/3)};return{hue:o,white:a,black:l}}function Wj(t,e){const{hue:n,white:r,black:i}=e,s=(r.y-i.y)*(n.x-i.x)+(i.x-r.x)*(n.y-i.y),o=((r.y-i.y)*(t.x-i.x)+(i.x-r.x)*(t.y-i.y))/s,a=((i.y-n.y)*(t.x-i.x)+(n.x-i.x)*(t.y-i.y))/s,l=1-o-a;return{hue:o,white:a,black:l}}function jee(t,e){return{x:t.hue*e.hue.x+t.white*e.white.x+t.black*e.black.x,y:t.hue*e.hue.y+t.white*e.white.y+t.black*e.black.y}}function Hj(t){return t.hue>=0&&t.white>=0&&t.black>=0}function Iee(t){if(Hj(t))return t;const e=Math.max(0,t.hue),n=Math.max(0,t.white),r=Math.max(0,t.black),i=e+n+r;return{hue:e/i,white:n/i,black:r/i}}function Oee(t){const{hue:e,white:n}=t,r=e+n,i=r*100;return{s:r>0?e/r*100:0,v:i}}function Dee(t,e){const n=t/100,r=e/100,i=r,s=i*n,o=i*(1-n),a=1-r;return{hue:s,white:o,black:a}}function Fee(t,e,n){const r=Dee(t,e);return jee(r,n)}function Bee(t,e){const n=Wj(t,e),r=Iee(n);return Oee(r)}function $ee(t){const e={x:(t.hue.x+t.black.x)/2,y:(t.hue.y+t.black.y)/2},n={x:(t.hue.x+t.white.x)/2,y:(t.hue.y+t.white.y)/2};return{hueToWhite:{start:e,end:t.white},blackOverlay:{start:n,end:t.black}}}function zee(t,e,n){const r=e/100,i=n/100,s=i*r,o=s*(1-Math.abs(t/60%2-1)),a=i-s;let l=0,c=0,h=0;t>=0&&t<60?(l=s,c=o,h=0):t>=60&&t<120?(l=o,c=s,h=0):t>=120&&t<180?(l=0,c=s,h=o):t>=180&&t<240?(l=0,c=o,h=s):t>=240&&t<300?(l=o,c=0,h=s):(l=s,c=0,h=o);const f=Math.round((l+a)*255),p=Math.round((c+a)*255),g=Math.round((h+a)*255);return`rgb(${f}, ${p}, ${g})`}function Gj({hue:t,saturation:e,value:n,onChange:r,radius:i,size:s}){const o=y.useRef(null),[a,l]=y.useState(!1),c=s/2,h=Nee(c,c,i,t),f=$ee(h),p=Fee(e,n,h),g=zee(t,e,n),v=(C,b)=>{if(!o.current)return;const _=o.current.getBoundingClientRect(),T={x:C-_.left,y:b-_.top},{s:R,v:L}=Bee(T,h);r(R,L)},x=C=>{if(!o.current)return;const b=o.current.getBoundingClientRect(),_={x:C.clientX-b.left,y:C.clientY-b.top},T=Wj(_,h);if(!Hj(T))return;C.preventDefault(),C.stopPropagation(),l(!0);const L=A=>{v(A.clientX,A.clientY)},M=()=>{l(!1),window.removeEventListener("pointermove",L),window.removeEventListener("pointerup",M)};window.addEventListener("pointermove",L),window.addEventListener("pointerup",M),v(C.clientX,C.clientY)},k=`hsl(${t}, 100%, 50%)`;return w.jsxs("div",{className:"sv-triangle",ref:o,style:{width:`${s}px`,height:`${s}px`},children:[w.jsxs("svg",{className:"sv-triangle__svg",width:s,height:s,onPointerDown:x,style:{cursor:a?"grabbing":"crosshair"},children:[w.jsxs("defs",{children:[w.jsxs("linearGradient",{id:"sv-gradient-hue",x1:f.hueToWhite.start.x,y1:f.hueToWhite.start.y,x2:f.hueToWhite.end.x,y2:f.hueToWhite.end.y,gradientUnits:"userSpaceOnUse",children:[w.jsx("stop",{offset:"0%",stopColor:k}),w.jsx("stop",{offset:"100%",stopColor:"white"})]}),w.jsxs("linearGradient",{id:"sv-gradient-black",x1:f.blackOverlay.start.x,y1:f.blackOverlay.start.y,x2:f.blackOverlay.end.x,y2:f.blackOverlay.end.y,gradientUnits:"userSpaceOnUse",children:[w.jsx("stop",{offset:"0%",stopColor:"transparent"}),w.jsx("stop",{offset:"100%",stopColor:"black"})]})]}),w.jsx("polygon",{points:`${h.hue.x},${h.hue.y} ${h.white.x},${h.white.y} ${h.black.x},${h.black.y}`,fill:"url(#sv-gradient-hue)",className:"sv-triangle__base"}),w.jsx("polygon",{points:`${h.hue.x},${h.hue.y} ${h.white.x},${h.white.y} ${h.black.x},${h.black.y}`,fill:"url(#sv-gradient-black)",className:"sv-triangle__overlay"})]}),w.jsx("div",{className:`sv-triangle__thumb ${a?"sv-triangle__thumb--dragging":""}`,style:{left:`${p.x}px`,top:`${p.y}px`,background:g}})]})}const pm=176,WS=18,qj=pm/2,ic=qj-WS,Uee=ic+WS/2;function Vee({brushSize:t,brushColor:e,onBrushSizeChange:n,onBrushColorChange:r}){const[i,s]=y.useState("normal"),[o,a]=y.useState(100),[l,c]=y.useState(()=>{const R=il(e);return Number.isFinite(R.h)?R.h:0}),h=y.useRef(null),f=y.useRef(e);y.useEffect(()=>{if(e!==f.current){const R=il(e);Number.isFinite(R.h)&&R.s>0&&c(R.h)}},[e]);const p=il(e),g=Number.isFinite(l)?l:0,v={...p,h:g},x=`hsl(${v.h}, 100%, 50%)`,k=(R,L,M)=>{const A=R!==void 0?R:g,$=L!==void 0?L:v.s,j=M!==void 0?M:v.v;R!==void 0&&Number.isFinite(R)&&c(R);const U=Vj({h:A,s:$,v:j,a:100});f.current=U,r(U)},C=(R,L)=>{if(!h.current)return;const M=h.current.getBoundingClientRect(),A=M.left+M.width/2,$=M.top+M.height/2,j=R-A,V=L-$,B=(Math.atan2(V,j)*180/Math.PI+450)%360;k(B)},b=(R,L)=>{R.preventDefault();const M=$=>L($.clientX,$.clientY),A=()=>{window.removeEventListener("pointermove",M),window.removeEventListener("pointerup",A)};window.addEventListener("pointermove",M),window.addEventListener("pointerup",A),L(R.clientX,R.clientY)},_=R=>{if(!h.current)return;const L=h.current.getBoundingClientRect(),M=L.left+L.width/2,A=L.top+L.height/2,$=R.clientX-M,j=R.clientY-A,V=Math.sqrt($*$+j*j);V>=ic&&V<=qj&&b(R,C)},T=(R,L)=>{k(void 0,R,L)};return w.jsxs("div",{className:"pen-tool-config",children:[w.jsxs("div",{className:"pen-tool-config__section",children:[w.jsx("h4",{className:"pen-tool-config__section-title",children:"Pen Type"}),w.jsxs("div",{className:"pen-tool-config__brush-types",children:[w.jsxs("button",{className:`pen-tool-config__brush-type ${i==="normal"?"pen-tool-config__brush-type--active":""}`,onClick:()=>s("normal"),children:[w.jsx("div",{className:"pen-tool-config__brush-preview",children:w.jsx("div",{className:"pen-tool-config__brush-circle"})}),w.jsx("span",{className:"pen-tool-config__brush-label",children:"Normal"})]}),w.jsxs("div",{className:"pen-tool-config__brush-type pen-tool-config__brush-type--placeholder",children:[w.jsx("div",{className:"pen-tool-config__brush-preview",children:w.jsx("div",{className:"pen-tool-config__brush-circle pen-tool-config__brush-circle--disabled"})}),w.jsx("span",{className:"pen-tool-config__brush-label pen-tool-config__brush-label--disabled",children:"More Soon"})]})]})]}),w.jsx("div",{className:"pen-tool-config__divider"}),w.jsxs("div",{className:"pen-tool-config__section",children:[w.jsx("h4",{className:"pen-tool-config__section-title",children:"Tool Properties"}),w.jsxs("div",{className:"pen-tool-config__property",children:[w.jsxs("label",{className:"pen-tool-config__property-label",children:[w.jsx("span",{children:"Brush Size"}),w.jsxs("span",{className:"pen-tool-config__property-value",children:[t,"px"]})]}),w.jsxs("div",{className:"pen-tool-config__slider-container",children:[w.jsx("input",{type:"range",min:"1",max:"50",value:t,onChange:R=>n(Number(R.target.value)),className:"pen-tool-config__slider"}),w.jsx("div",{className:"pen-tool-config__slider-fill",style:{width:`${t/50*100}%`}})]})]}),w.jsxs("div",{className:"pen-tool-config__property",children:[w.jsxs("label",{className:"pen-tool-config__property-label",children:[w.jsx("span",{children:"Opacity"}),w.jsxs("span",{className:"pen-tool-config__property-value",children:[o,"%"]})]}),w.jsxs("div",{className:"pen-tool-config__slider-container",children:[w.jsx("input",{type:"range",min:"0",max:"100",value:o,onChange:R=>a(Number(R.target.value)),className:"pen-tool-config__slider"}),w.jsx("div",{className:"pen-tool-config__slider-fill",style:{width:`${o}%`}})]})]})]}),w.jsx("div",{className:"pen-tool-config__divider"}),w.jsxs("div",{className:"pen-tool-config__section",children:[w.jsx("h4",{className:"pen-tool-config__section-title",children:"Color"}),w.jsxs("div",{className:"pen-tool-config__color-wheel-container",children:[w.jsxs("div",{className:"pen-tool-config__wheel",style:{width:`${pm}px`,height:`${pm}px`,"--wheel-thickness":`${WS}px`,"--wheel-inner":`${ic*2}px`},ref:h,onPointerDown:_,children:[w.jsx("div",{className:"pen-tool-config__wheel-track"}),w.jsx("div",{className:"pen-tool-config__wheel-ring"}),w.jsx("div",{className:"pen-tool-config__wheel-hole",style:{width:`${ic*2}px`,height:`${ic*2}px`}}),w.jsx("div",{className:"pen-tool-config__hue-thumb",style:{transform:`translate(-50%, -50%) rotate(${v.h-90}deg) translate(${Uee}px) rotate(${-v.h+90}deg)`,background:x}}),w.jsx(Gj,{hue:v.h,saturation:v.s,value:v.v,onChange:T,radius:ic,size:pm})]}),w.jsxs("div",{className:"pen-tool-config__color-meta",children:[w.jsx("div",{className:"pen-tool-config__color-preview",style:{background:e}}),w.jsxs("div",{className:"pen-tool-config__color-input-wrap",children:[w.jsx("label",{className:"pen-tool-config__swatch-label",children:"HEX"}),w.jsx("input",{type:"text",value:e.toUpperCase(),onChange:R=>{const L=R.target.value;if(/^#[0-9A-Fa-f]{0,6}$/.test(L)){f.current=L;const M=il(L);Number.isFinite(M.h)&&M.s>0&&c(M.h),r(L)}},className:"pen-tool-config__color-input",placeholder:"#000000"})]})]})]})]})]})}function Wee({brushSize:t,onBrushSizeChange:e}){const[n,r]=y.useState(100);return w.jsxs("div",{className:"eraser-tool-config",children:[w.jsxs("div",{className:"eraser-tool-config__section",children:[w.jsx("h4",{className:"eraser-tool-config__section-title",children:"Tool Properties"}),w.jsxs("div",{className:"eraser-tool-config__property",children:[w.jsxs("label",{className:"eraser-tool-config__property-label",children:[w.jsx("span",{children:"Brush Size"}),w.jsxs("span",{className:"eraser-tool-config__property-value",children:[t,"px"]})]}),w.jsxs("div",{className:"eraser-tool-config__slider-container",children:[w.jsx("input",{type:"range",min:"1",max:"50",value:t,onChange:i=>e(Number(i.target.value)),className:"eraser-tool-config__slider"}),w.jsx("div",{className:"eraser-tool-config__slider-fill",style:{width:`${t/50*100}%`}})]})]}),w.jsxs("div",{className:"eraser-tool-config__property",children:[w.jsxs("label",{className:"eraser-tool-config__property-label",children:[w.jsx("span",{children:"Opacity"}),w.jsxs("span",{className:"eraser-tool-config__property-value",children:[n,"%"]})]}),w.jsxs("div",{className:"eraser-tool-config__slider-container",children:[w.jsx("input",{type:"range",min:"0",max:"100",value:n,onChange:i=>r(Number(i.target.value)),className:"eraser-tool-config__slider"}),w.jsx("div",{className:"eraser-tool-config__slider-fill",style:{width:`${n}%`}})]})]})]}),w.jsx("div",{className:"eraser-tool-config__divider"}),w.jsx("div",{className:"eraser-tool-config__section",children:w.jsxs("div",{className:"eraser-tool-config__info",children:[w.jsx("div",{className:"eraser-tool-config__info-icon",children:w.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:w.jsx("path",{d:"M12 16V12M12 8H12.01M21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}),w.jsx("p",{className:"eraser-tool-config__info-text",children:"Eraser removes strokes from the active layer"})]})})]})}const gm=176,HS=18,Yj=gm/2,sc=Yj-HS,Hee=sc+HS/2;function Gee({brushSize:t,brushColor:e,selectedShape:n,fillEnabled:r,fillColor:i,onBrushSizeChange:s,onBrushColorChange:o,onShapeChange:a,onFillEnabledChange:l,onFillColorChange:c}){const[h,f]=y.useState(!1),[p,g]=y.useState(()=>{const U=il(h?i:e);return Number.isFinite(U.h)?U.h:0}),v=y.useRef(null),x=y.useRef(h?i:e),k=h?i:e,C=h?c:o;y.useEffect(()=>{if(k!==x.current){const U=il(k);Number.isFinite(U.h)&&U.s>0&&g(U.h)}},[k]);const b=il(k),_=Number.isFinite(p)?p:0,T={...b,h:_},R=`hsl(${T.h}, 100%, 50%)`,L=(U,B,Z)=>{const q=U!==void 0?U:_,G=B!==void 0?B:T.s,te=Z!==void 0?Z:T.v;U!==void 0&&Number.isFinite(U)&&g(U);const K=Vj({h:q,s:G,v:te,a:100});x.current=K,C(K)},M=(U,B)=>{if(!v.current)return;const Z=v.current.getBoundingClientRect(),q=Z.left+Z.width/2,G=Z.top+Z.height/2,te=U-q,O=B-G,Y=(Math.atan2(O,te)*180/Math.PI+450)%360;L(Y)},A=(U,B)=>{U.preventDefault();const Z=G=>B(G.clientX,G.clientY),q=()=>{window.removeEventListener("pointermove",Z),window.removeEventListener("pointerup",q)};window.addEventListener("pointermove",Z),window.addEventListener("pointerup",q),B(U.clientX,U.clientY)},$=U=>{if(!v.current)return;const B=v.current.getBoundingClientRect(),Z=B.left+B.width/2,q=B.top+B.height/2,G=U.clientX-Z,te=U.clientY-q,O=Math.sqrt(G*G+te*te);O>=sc&&O<=Yj&&A(U,M)},j=(U,B)=>{L(void 0,U,B)},V=[{type:"line",label:"Line",icon:w.jsx("svg",{width:"20",height:"20",viewBox:"0 0 20 20",children:w.jsx("line",{x1:"2",y1:"18",x2:"18",y2:"2",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})})},{type:"rectangle",label:"Rectangle",icon:w.jsx("svg",{width:"20",height:"20",viewBox:"0 0 20 20",children:w.jsx("rect",{x:"3",y:"3",width:"14",height:"14",stroke:"currentColor",strokeWidth:"2",fill:"none"})})},{type:"ellipse",label:"Ellipse",icon:w.jsx("svg",{width:"20",height:"20",viewBox:"0 0 20 20",children:w.jsx("ellipse",{cx:"10",cy:"10",rx:"7",ry:"7",stroke:"currentColor",strokeWidth:"2",fill:"none"})})},{type:"triangle",label:"Triangle",icon:w.jsx("svg",{width:"20",height:"20",viewBox:"0 0 20 20",children:w.jsx("path",{d:"M10 3 L17 17 L3 17 Z",stroke:"currentColor",strokeWidth:"2",fill:"none"})})}];return w.jsxs("div",{className:"shape-tool-config",children:[w.jsxs("div",{className:"shape-tool-config__section",children:[w.jsx("h4",{className:"shape-tool-config__section-title",children:"Shape Type"}),w.jsx("div",{className:"shape-tool-config__shape-grid",children:V.map(U=>w.jsxs("button",{className:`shape-tool-config__shape-button ${n===U.type?"shape-tool-config__shape-button--active":""}`,onClick:()=>a(U.type),title:U.label,children:[U.icon,w.jsx("span",{className:"shape-tool-config__shape-label",children:U.label})]},U.type))})]}),w.jsx("div",{className:"shape-tool-config__divider"}),w.jsxs("div",{className:"shape-tool-config__section",children:[w.jsx("h4",{className:"shape-tool-config__section-title",children:"Properties"}),w.jsxs("div",{className:"shape-tool-config__property",children:[w.jsxs("label",{className:"shape-tool-config__property-label",children:[w.jsx("span",{children:"Stroke Width"}),w.jsxs("span",{className:"shape-tool-config__property-value",children:[t,"px"]})]}),w.jsxs("div",{className:"shape-tool-config__slider-container",children:[w.jsx("input",{type:"range",min:"1",max:"50",value:t,onChange:U=>s(Number(U.target.value)),className:"shape-tool-config__slider"}),w.jsx("div",{className:"shape-tool-config__slider-fill",style:{width:`${t/50*100}%`}})]})]}),w.jsx("div",{className:"shape-tool-config__property",children:w.jsxs("label",{className:"shape-tool-config__property-label",children:[w.jsx("span",{children:"Fill"}),w.jsx("input",{type:"checkbox",checked:r,onChange:U=>l(U.target.checked),className:"shape-tool-config__checkbox"})]})})]}),w.jsx("div",{className:"shape-tool-config__divider"}),w.jsxs("div",{className:"shape-tool-config__section",children:[w.jsx("h4",{className:"shape-tool-config__section-title",children:"Color"}),w.jsxs("div",{className:"shape-tool-config__color-type-toggle",children:[w.jsx("button",{className:`shape-tool-config__color-type-button ${h?"":"shape-tool-config__color-type-button--active"}`,onClick:()=>f(!1),children:"Stroke"}),r&&w.jsx("button",{className:`shape-tool-config__color-type-button ${h?"shape-tool-config__color-type-button--active":""}`,onClick:()=>f(!0),children:"Fill"})]}),w.jsxs("div",{className:"shape-tool-config__color-wheel-container",children:[w.jsxs("div",{className:"shape-tool-config__wheel",style:{width:`${gm}px`,height:`${gm}px`,"--wheel-thickness":`${HS}px`,"--wheel-inner":`${sc*2}px`},ref:v,onPointerDown:$,children:[w.jsx("div",{className:"shape-tool-config__wheel-track"}),w.jsx("div",{className:"shape-tool-config__wheel-ring"}),w.jsx("div",{className:"shape-tool-config__wheel-hole",style:{width:`${sc*2}px`,height:`${sc*2}px`}}),w.jsx("div",{className:"shape-tool-config__hue-thumb",style:{transform:`translate(-50%, -50%) rotate(${T.h-90}deg) translate(${Hee}px) rotate(${-T.h+90}deg)`,background:R}}),w.jsx(Gj,{hue:T.h,saturation:T.s,value:T.v,onChange:j,radius:sc,size:gm})]}),w.jsxs("div",{className:"shape-tool-config__color-meta",children:[w.jsx("div",{className:"shape-tool-config__color-preview",style:{background:k}}),w.jsxs("div",{className:"shape-tool-config__color-input-wrap",children:[w.jsx("label",{className:"shape-tool-config__swatch-label",children:"HEX"}),w.jsx("input",{type:"text",value:k.toUpperCase(),onChange:U=>{const B=U.target.value;if(/^#[0-9A-Fa-f]{0,6}$/.test(B)){x.current=B;const Z=il(B);Number.isFinite(Z.h)&&Z.s>0&&g(Z.h),C(B)}},className:"shape-tool-config__color-input",placeholder:"#000000"})]})]})]})]})]})}function qee({project:t}){const e=t.config,n=(e==null?void 0:e.width)||1e3,r=(e==null?void 0:e.height)||1e3,i=(e==null?void 0:e.backgroundColor)||"#ffffff",[s,o]=Be.useState("pen"),[a,l]=Be.useState([]),[c,h]=Be.useState(""),[f,p]=Be.useState(5),[g,v]=Be.useState("#df4b26"),[x,k]=Be.useState(null),[C,b]=Be.useState(!1),[_,T]=Be.useState(null),[R,L]=Be.useState("rectangle"),[M,A]=Be.useState(!1),[$,j]=Be.useState("#ffffff"),[V,U]=Be.useState([]),[B,Z]=Be.useState(-1),q=Be.useRef(!1),[G,te]=Be.useState(1),O=window.innerWidth-480,K=window.innerHeight,Y=(O-n)/2,xe=(K-r)/2,[re,ue]=Be.useState({x:Y,y:xe}),ke=Be.useRef(null),[qe,he]=Be.useState(!0),ge=Be.useRef(!1),we=Be.useRef(!1),ae=Be.useRef(null),me=Be.useRef(null),X=Be.useRef(null),ye=Be.useRef(!1),_e=Be.useRef(null),at=Be.useRef(null),Le=Be.useRef(null),fe=Be.useRef(null),ve=Be.useRef(null),Ae=Be.useRef({shift:!1,alt:!1,ctrl:!1}),De=Re=>{const Te=Re.getPointerPosition();if(!Te)return null;const pe=Re.getAbsoluteTransform().copy();return pe.invert(),pe.point(Te)},Ue=Be.useCallback(()=>{at.current&&me.current&&(ve.current={container:at.current.getBoundingClientRect(),stage:me.current.container().getBoundingClientRect()})},[]),Ie=Be.useCallback(Re=>{q.current||(U(Te=>{const pe=Te.slice(0,B+1);return pe.push(JSON.parse(JSON.stringify(Re))),pe.length>30&&pe.shift(),pe}),Z(Te=>Te+1>=30?29:Te+1))},[B]),ze=Be.useCallback(()=>{if(B>0){q.current=!0;const Re=V[B-1];l(JSON.parse(JSON.stringify(Re))),Z(Te=>Te-1),setTimeout(()=>{q.current=!1},0)}},[V,B]),Ce=Be.useCallback(()=>{if(B<V.length-1){q.current=!0;const Re=V[B+1];l(JSON.parse(JSON.stringify(Re))),Z(Te=>Te+1),setTimeout(()=>{q.current=!1},0)}},[V,B]),Oe=Re=>{Re.evt.preventDefault();const Te=Re.target.getStage(),pe=G,be=Te.getPointerPosition(),gt=1.1,nt=Re.evt.deltaY<0?pe*gt:pe/gt,lt=Math.max(.1,Math.min(10,nt)),Ke={x:(be.x-re.x)/pe,y:(be.y-re.y)/pe},xt={x:be.x-Ke.x*lt,y:be.y-Ke.y*lt};te(lt),ue(xt)},Ne=Re=>{const Te=Re.target.getStage(),pe=Re.evt.button===1,be=Re.evt.button===0&&ye.current;if(pe||be){Re.evt.preventDefault(),ge.current=!1,we.current=!0;const nt=Te.getPointerPosition();ae.current=nt,he(!1),Te.container().style.cursor="grabbing"}else if(Re.evt.button===0){we.current=!1,ge.current=!0;const nt=De(Te);nt&&c&&fe.current&&(Le.current={clientId:fr(),tool:s,points:[nt.x,nt.y],color:g,strokeWidth:f,...s==="shape"&&{shapeType:R,fillColor:M?$:void 0}},fe.current.points([nt.x,nt.y]),fe.current.stroke(g),fe.current.strokeWidth(f),fe.current.globalCompositeOperation(s==="eraser"?"destination-out":"source-over"),fe.current.getLayer().batchDraw())}},yt=Re=>{var be,gt;const Te=Re.target.getStage(),pe=Te.getPointerPosition();if(pe){if(ke.current&&((be=ve.current)!=null&&be.container)&&((gt=ve.current)!=null&&gt.stage)){const{container:nt,stage:lt}=ve.current,Ke=pe.x+(lt.left-nt.left),xt=pe.y+(lt.top-nt.top);ke.current.style.transform=`translate(${Ke}px, ${xt}px)`}if(we.current&&ae.current){const nt=pe.x-ae.current.x,lt=pe.y-ae.current.y,Ke=Te.x()+nt,xt=Te.y()+lt;Te.x(Ke),Te.y(xt),Te.batchDraw(),ae.current=pe}else if(ge.current&&Le.current){const nt=De(Te);if(nt&&fe.current){const lt=Le.current;if(lt.tool==="shape"){const ut=lt.points[0],Xt=lt.points[1];let ft=nt.x,Ft=nt.y,St=ft-ut,ln=Ft-Xt;if(Ae.current.shift){const Gt=Math.max(Math.abs(St),Math.abs(ln));St=St<0?-Gt:Gt,ln=ln<0?-Gt:Gt,ft=ut+St,Ft=Xt+ln}if(Ae.current.alt){const Gt=ut,qt=Xt;ft=Gt+St,Ft=qt+ln;const mt=Gt-St,vt=qt-ln;lt.points=[mt,vt,ft,Ft]}else lt.points=[ut,Xt,ft,Ft]}else if(lt.points.push(nt.x,nt.y),lt.tool==="eraser"){const ut=f/2;l(Xt=>Xt.map(ft=>{if(ft.id!==c)return ft;const Ft=(ft.shapes||[]).filter(St=>{const ln=St.x,Gt=St.y,qt=St.x+St.width*St.scaleX,mt=St.y+St.height*St.scaleY;return!(nt.x+ut>ln&&nt.x-ut<qt&&nt.y+ut>Gt&&nt.y-ut<mt)});return{...ft,shapes:Ft}}))}const[Ke,xt,Lt,rt]=lt.points,Nt=Math.min(Ke,Lt),ht=Math.min(xt,rt),zt=Math.abs(Lt-Ke),Et=Math.abs(rt-xt);if(lt.shapeType==="rectangle")fe.current.x(Nt),fe.current.y(ht),fe.current.width(zt),fe.current.height(Et);else if(lt.shapeType==="ellipse"){const ut=Nt+zt/2,Xt=ht+Et/2;fe.current.x(ut),fe.current.y(Xt),fe.current.radiusX(zt/2),fe.current.radiusY(Et/2)}else if(lt.shapeType==="triangle"){const ut=[Nt+zt/2,ht,Nt+zt,ht+Et,Nt,ht+Et];fe.current.points(ut)}else fe.current.points(lt.points);fe.current.getLayer().batchDraw()}}}},Fe=()=>{if(ge.current&&Le.current&&c){const Re=Le.current;l(Te=>{const pe=Te.map(be=>be.id!==c?be:{...be,strokes:[...be.strokes,Re]});return Ie(pe),pe}),Le.current=null,fe.current&&(fe.current.points([]),fe.current.getLayer().batchDraw())}we.current&&me.current&&ue({x:me.current.x(),y:me.current.y()}),ge.current=!1,we.current=!1,ae.current=null,he(!0),me.current&&(ye.current?me.current.container().style.cursor="grab":me.current.container().style.cursor="none")},st=()=>{he(!0)},wt=()=>{he(!1)};Be.useEffect(()=>{(async()=>{console.log("Loading canvas for project:",t.id);const{layers:Te,activeLayerId:pe}=await Zq(t.id);console.log("Loaded",Te.length,"layers from database"),l(Te),h(pe),k(new Date),U([JSON.parse(JSON.stringify(Te))]),Z(0)})()},[t.id]),Be.useEffect(()=>{if(a.length===0&&!x){const Re={id:fr(),name:"Layer 1",visible:!0,order:0,strokes:[]};l([Re]),h(Re.id),U([[JSON.parse(JSON.stringify(Re))]]),Z(0)}},[a.length,x]),Be.useEffect(()=>{if(a.length===0&&!x)return;const Re=setTimeout(async()=>{try{b(!0),T(null);const Te=a.reduce((pe,be)=>pe+be.strokes.length,0);console.log("Attempting to save canvas with",a.length,"layers and",Te,"strokes"),await Xq(t.id,a,c),k(new Date),console.log("Canvas saved successfully")}catch(Te){console.error("Auto-save failed:",Te),T(Te instanceof Error?Te.message:"Save failed")}finally{b(!1)}},2e3);return()=>clearTimeout(Re)},[a,c,t.id]),Be.useEffect(()=>{me.current&&X.current&&(X.current.getCanvas()._canvas.getContext("2d",{willReadFrequently:!0}),X.current.batchDraw())},[]),Be.useEffect(()=>{if(!_e.current)return;const Re=50;let Te=Re*G;G<.5&&(Te=Re*G*2);const pe=re.x%Te,be=re.y%Te;_e.current.style.backgroundSize=`${Te}px ${Te}px`,_e.current.style.backgroundPosition=`${pe}px ${be}px`},[G,re]),Be.useEffect(()=>{Ue()},[G,re,Ue]),Be.useEffect(()=>{const Re=pe=>{if((pe.ctrlKey||pe.metaKey)&&!pe.shiftKey&&pe.key==="z"){pe.preventDefault(),ze();return}if((pe.ctrlKey||pe.metaKey)&&(pe.key==="y"||pe.shiftKey&&pe.key==="z")){pe.preventDefault(),Ce();return}pe.key==="Shift"&&(Ae.current.shift=!0),pe.key==="Alt"&&(Ae.current.alt=!0),(pe.key==="Control"||pe.key==="Meta")&&(Ae.current.ctrl=!0),pe.code==="Space"&&!ye.current&&(pe.preventDefault(),ye.current=!0,me.current&&!we.current&&(me.current.container().style.cursor="grab"))},Te=pe=>{pe.key==="Shift"&&(Ae.current.shift=!1),pe.key==="Alt"&&(Ae.current.alt=!1),(pe.key==="Control"||pe.key==="Meta")&&(Ae.current.ctrl=!1),pe.code==="Space"&&(pe.preventDefault(),ye.current=!1,me.current&&!we.current&&(me.current.container().style.cursor="none"))};return window.addEventListener("keydown",Re),window.addEventListener("keyup",Te),()=>{window.removeEventListener("keydown",Re),window.removeEventListener("keyup",Te)}},[ze,Ce]);const At=Re=>{if(Re.tool!=="shape"||!Re.shapeType||Re.points.length<4)return null;const[Te,pe,be,gt]=Re.points,nt=Math.min(Te,be),lt=Math.min(pe,gt),Ke=Math.abs(be-Te),xt=Math.abs(gt-pe),Lt={key:Re.clientId,stroke:Re.color,strokeWidth:Re.strokeWidth,fill:Re.fillColor||"transparent",listening:!1,perfectDrawEnabled:!1,shadowForStrokeEnabled:!1};switch(Re.shapeType){case"line":return w.jsx(Wa,{...Lt,points:[Te,pe,be,gt],lineCap:"round"});case"rectangle":return w.jsx(Wa,{...Lt,points:[nt,lt,nt+Ke,lt,nt+Ke,lt+xt,nt,lt+xt],closed:!0});case"ellipse":return w.jsx(Wa,{...Lt,points:Ye(nt+Ke/2,lt+xt/2,Ke/2,xt/2),closed:!0,tension:0});case"triangle":const rt=nt+Ke/2,Nt=lt,ht=lt+xt;return w.jsx(Wa,{...Lt,points:[rt,Nt,nt+Ke,ht,nt,ht],closed:!0});default:return null}},Ye=(Re,Te,pe,be)=>{const gt=[];for(let lt=0;lt<=64;lt++){const Ke=lt/64*2*Math.PI,xt=Re+pe*Math.cos(Ke),Lt=Te+be*Math.sin(Ke);gt.push(xt,Lt)}return gt};return w.jsxs("div",{className:"canvas-workspace",children:[w.jsx(Tee,{activeTool:s,onToolChange:o}),s==="pen"?w.jsx(Vee,{brushSize:f,brushColor:g,onBrushSizeChange:p,onBrushColorChange:v}):s==="eraser"?w.jsx(Wee,{brushSize:f,onBrushSizeChange:p}):w.jsx(Gee,{brushSize:f,brushColor:g,selectedShape:R,fillEnabled:M,fillColor:$,onBrushSizeChange:p,onBrushColorChange:v,onShapeChange:L,onFillEnabledChange:A,onFillColorChange:j}),w.jsxs("div",{ref:at,className:"canvas-workspace__canvas-container",onMouseEnter:st,onMouseLeave:wt,children:[w.jsx("div",{ref:_e,className:"canvas-workspace__grid-background"}),w.jsxs(Yq,{ref:me,width:window.innerWidth-480,height:window.innerHeight,onWheel:Oe,onMouseDown:Ne,onMousemove:yt,onMouseup:Fe,scaleX:G,scaleY:G,x:re.x,y:re.y,style:{cursor:"none",position:"relative",zIndex:1},children:[w.jsx(x1,{listening:!1,children:w.jsx(Wa,{points:[0,0,n,0,n,r,0,r],closed:!0,fill:i,stroke:i,strokeWidth:0,listening:!1})}),a.filter(Re=>Re.visible).sort((Re,Te)=>Re.order-Te.order).map(Re=>w.jsxs(x1,{ref:Re.id===c?X:void 0,listening:!1,children:[Re.strokes.map(Te=>Te.tool==="shape"?At(Te):w.jsx(Wa,{points:Te.points,stroke:Te.color,strokeWidth:Te.strokeWidth,tension:.5,lineCap:"round",lineJoin:"round",globalCompositeOperation:Te.tool==="eraser"?"destination-out":"source-over",perfectDrawEnabled:!1,shadowForStrokeEnabled:!1,hitStrokeWidth:0,listening:!1},Te.clientId)),Re.id===c&&(s==="pen"||s==="eraser"||s==="shape"&&R==="line")&&w.jsx(Wa,{ref:fe,points:[],stroke:g,strokeWidth:f,tension:.5,lineCap:"round",lineJoin:"round",globalCompositeOperation:s==="eraser"?"destination-out":"source-over",perfectDrawEnabled:!1,shadowForStrokeEnabled:!1,listening:!1})]},Re.id)),w.jsxs(x1,{listening:!1,children:[s==="shape"&&R==="rectangle"&&w.jsx(Gq,{ref:fe,x:0,y:0,width:0,height:0,stroke:g,strokeWidth:f,fill:M?$:void 0,perfectDrawEnabled:!1,shadowForStrokeEnabled:!1,listening:!1}),s==="shape"&&R==="ellipse"&&w.jsx(qq,{ref:fe,x:0,y:0,radiusX:0,radiusY:0,stroke:g,strokeWidth:f,fill:M?$:void 0,perfectDrawEnabled:!1,shadowForStrokeEnabled:!1,listening:!1}),s==="shape"&&R==="triangle"&&w.jsx(Wa,{ref:fe,points:[],stroke:g,strokeWidth:f,fill:M?$:void 0,closed:!0,perfectDrawEnabled:!1,shadowForStrokeEnabled:!1,listening:!1})]})]}),qe&&!we.current&&w.jsx("div",{ref:ke,style:{position:"absolute",left:0,top:0,pointerEvents:"none",mixBlendMode:"difference",zIndex:999},children:s==="shape"?w.jsxs("svg",{width:20*G,height:20*G,style:{transform:`translate(${-(10*G)}px, ${-(10*G)}px)`},children:[w.jsx("line",{x1:"0",y1:10*G,x2:20*G,y2:10*G,stroke:"#ffffff",strokeWidth:Math.max(1.5,2*G)}),w.jsx("line",{x1:10*G,y1:"0",x2:10*G,y2:20*G,stroke:"#ffffff",strokeWidth:Math.max(1.5,2*G)})]}):w.jsx("svg",{width:(f+4)*G,height:(f+4)*G,style:{transform:`translate(${-(f+4)*G/2}px, ${-(f+4)*G/2}px)`},children:w.jsx("circle",{cx:(f+4)*G/2,cy:(f+4)*G/2,r:f*G/2,fill:"none",stroke:"#ffffff",strokeWidth:Math.max(1.5,2*G),strokeDasharray:"4 4"})})})]}),w.jsx("div",{className:"canvas-workspace__sidebar",children:w.jsxs("div",{className:"canvas-workspace__sidebar-content",children:[w.jsx("h3",{className:"canvas-workspace__sidebar-title",children:"Properties"}),w.jsxs("div",{className:"canvas-workspace__property-group",children:[w.jsxs("label",{className:"canvas-workspace__label",children:["Zoom: ",Math.round(G*100),"%"]}),w.jsx("button",{onClick:()=>{te(1);const Re=window.innerWidth-520,Te=window.innerHeight,pe=(Re-n)/2,be=(Te-r)/2;ue({x:pe,y:be})},className:"canvas-workspace__button",children:"Reset View"}),w.jsxs("div",{className:"canvas-workspace__help-text",children:[w.jsx("p",{children:" Scroll to zoom"}),w.jsx("p",{children:" Space + Drag to pan"}),w.jsx("p",{children:" Middle-click to pan"})]})]}),w.jsx("div",{className:"canvas-workspace__divider"}),w.jsxs("div",{className:"canvas-workspace__property-group",children:[w.jsx("label",{className:"canvas-workspace__label",children:"Canvas Info"}),w.jsxs("div",{className:"canvas-workspace__info",children:[w.jsxs("p",{children:["Layers: ",a.length]}),w.jsxs("p",{children:["Total Strokes: ",a.reduce((Re,Te)=>Re+Te.strokes.length,0)]}),w.jsx("p",{children:C?" Saving...":_?` Error: ${_}`:x?` Saved ${x.toLocaleTimeString()}`:""})]})]}),w.jsx("div",{className:"canvas-workspace__divider"}),w.jsx(Ree,{layers:a,activeLayerId:c,onLayersChange:l,onActiveLayerChange:h})]})})]})}function Kj(t,e){const[n,r]=y.useState(null),[i,s]=y.useState(mn),[o,a]=y.useState(!1),[l,c]=y.useState(!1),[h,f]=y.useState(null),[p,g]=y.useState("legacy"),v=y.useCallback(async()=>{if(!t||!e)return;a(!0),f(null);const{data:k,error:C}=await Ct.from("projects").select("*").eq("id",t).eq("user_id",e).single();if(C){f(C.message),a(!1);return}const b=k;r(b);try{const{config:_,storage:T}=await oB({projectId:t,userId:e,legacyConfig:b.battle_map_config});s(_),g(T)}catch(_){console.error("Failed to load battle map state",_),f("Failed to load battle map state"),s(mn)}finally{a(!1)}},[t,e]);y.useEffect(()=>{v()},[v]);const x=y.useCallback(async k=>{if(!(!t||!e)){c(!0),f(null);try{const{config:C,storage:b}=await gL({projectId:t,userId:e,config:k});s(C),g(b)}catch(C){console.error("Failed to persist battle map state",C),f("Failed to save battle map state")}finally{c(!1)}}},[t,e]);return{project:n,config:i,setConfig:s,isLoading:o,isSaving:l,error:h,storageMode:p,refresh:v,saveConfig:x}}const Yee=[{id:"stone-1x1",gridType:"square",label:"Stone 1x1",cols:1,rows:1,image:ir("assets/widgets/stone_tile.webp"),isFixed:!0},{id:"stone-2x1",gridType:"square",label:"Stone 2x1",cols:2,rows:2,image:ir("assets/widgets/stone_tile.webp"),isFixed:!0},{id:"stone-1x2",gridType:"square",label:"Stone 1x2",cols:1,rows:2,image:ir("assets/widgets/stone_tile.webp"),isFixed:!0},{id:"gravel-1x1",gridType:"square",label:"Gravel 1x1",cols:2,rows:1,image:ir("assets/widgets/gravel_tile.webp"),isFixed:!0},{id:"gravel-2x1",gridType:"square",label:"Gravel 2x1",cols:1,rows:1,image:ir("assets/widgets/gravel_tile.webp"),isFixed:!0},{id:"gravel-2x2",gridType:"square",label:"Gravel 2x2",cols:1,rows:1,image:ir("assets/widgets/gravel_tile.webp"),isFixed:!0}],Kee=[{id:"hex_grass",gridType:"square",label:"hex_grass",cols:1,rows:1,image:ir("assets/widgets/hex/grass/hex_grass.webp"),isFixed:!0},{id:"hex_grass_path_1",gridType:"square",label:"hex_grass_path_1",cols:1,rows:1,image:ir("assets/widgets/hex/grass/hex_grass_path_1.webp"),isFixed:!0},{id:"hex_grass_path_2",gridType:"square",label:"hex_grass_path_2",cols:1,rows:1,image:ir("assets/widgets/hex/grass/hex_grass_path_2.webp"),isFixed:!0},{id:"hex_grass_path_3",gridType:"square",label:"hex_grass_path_3",cols:1,rows:1,image:ir("assets/widgets/hex/grass/hex_grass_path_3.webp"),isFixed:!0},{id:"hex_grass_path_4",gridType:"square",label:"hex_grass_path_4",cols:1,rows:1,image:ir("assets/widgets/hex/grass/hex_grass_path_4.webp"),isFixed:!0},{id:"hex_grass_path_5",gridType:"square",label:"hex_grass_path_5",cols:1,rows:1,image:ir("assets/widgets/hex/grass/hex_grass_path_5.webp"),isFixed:!0},{id:"hex_grass_path_6",gridType:"square",label:"hex_grass_path_6",cols:1,rows:1,image:ir("assets/widgets/hex/grass/hex_grass_path_6.webp"),isFixed:!0}],Xee=[{id:"hex_grass",gridType:"hex",label:"hex_grass",image:ir("assets/widgets/hex/grass/hex_grass.webp"),isFixed:!0},{id:"hex_grass_path_1",gridType:"hex",label:"hex_grass_path_1",image:ir("assets/widgets/hex/grass/hex_grass_path_1.webp"),isFixed:!0},{id:"hex_grass_path_2",gridType:"hex",label:"hex_grass_path_2",image:ir("assets/widgets/hex/grass/hex_grass_path_2.webp"),isFixed:!0},{id:"hex_grass_path_3",gridType:"hex",label:"hex_grass_path_3",image:ir("assets/widgets/hex/grass/hex_grass_path_3.webp"),isFixed:!0},{id:"hex_grass_path_4",gridType:"hex",label:"hex_grass_path_4",image:ir("assets/widgets/hex/grass/hex_grass_path_4.webp"),isFixed:!0},{id:"hex_grass_path_5",gridType:"hex",label:"hex_grass_path_5",image:ir("assets/widgets/hex/grass/hex_grass_path_5.webp"),isFixed:!0},{id:"hex_grass_path_6",gridType:"hex",label:"hex_grass_path_6",image:ir("assets/widgets/hex/grass/hex_grass_path_6.webp"),isFixed:!0}],nP=.85,D1=[{title:"Stone Tiles",tiles:Yee},{title:"Dirt Tiles",tiles:Kee}],F1=[{title:"Hex Tiles",tiles:Xee}],Xj=async(t,e)=>{if(!t||t.startsWith("data:"))return t;const n=e==null?void 0:e.get(t);if(n)return n;try{const i=await(await fetch(t,{mode:"cors"})).blob(),s=await new Promise((o,a)=>{const l=new FileReader;l.onloadend=()=>{typeof l.result=="string"?o(l.result):a(new Error("Failed to convert image to data URL"))},l.onerror=a,l.readAsDataURL(i)});return e==null||e.set(t,s),s}catch(r){return console.error("Failed to inline image",r),t}},Zj=t=>new Promise((e,n)=>{const r=new Image;r.onload=()=>e(r),r.onerror=i=>n(i),r.decoding="async",r.crossOrigin="anonymous",r.src=t}),Qj=(t,e)=>{const n=document.createElement("a");n.href=t,n.download=e,n.rel="noopener",document.body.appendChild(n),n.click(),requestAnimationFrame(()=>n.remove())};function Jj({layers:t,activeLayerId:e,onActiveLayerChange:n,onToggleVisibility:r,onAddLayer:i,onRenameLayer:s,onMoveLayerUp:o,onMoveLayerDown:a,onDeleteLayer:l,onReorderLayers:c}){const h=YA(qA(X0,{activationConstraint:{delay:250,tolerance:5}})),f=t.map(g=>g.id),p=g=>{const{active:v,over:x}=g;if(!x||v.id===x.id)return;const k=t.findIndex(_=>_.id===v.id),C=t.findIndex(_=>_.id===x.id);if(k<0||C<0)return;const b=J0(t,k,C);c(b)};return w.jsxs("div",{className:"layer-panel battlemap-layer-panel",children:[w.jsxs("div",{className:"layer-panel__header",children:[w.jsx("h3",{children:"Layers"}),w.jsxs(Bj,{children:[w.jsx(bee,{type:"button",className:"layer-panel__new-button battlemap-layer-panel__new-button",title:"Add layer",children:w.jsx(aW,{size:16,"aria-hidden":!0})}),w.jsx($S,{children:w.jsx(zS,{className:"layer-context-menu__positioner",children:w.jsxs(BS,{className:"layer-context-menu__popup",children:[w.jsx(Xs,{className:"layer-context-menu__item",onClick:()=>i("tiles"),children:"Tile Layer"}),w.jsx(Xs,{className:"layer-context-menu__item",onClick:()=>i("image"),children:"Image"}),w.jsx(Xs,{className:"layer-context-menu__item",onClick:()=>i("background"),children:"Background"})]})})})]})]}),w.jsx(uN,{sensors:h,collisionDetection:KA,onDragEnd:p,modifiers:[vN],children:w.jsx(pN,{items:f,strategy:dN,children:w.jsx("div",{className:"layer-panel__list",children:t.map(g=>w.jsx(Qee,{layer:g,isActive:g.id===e,onSelect:()=>n(g.id),onToggleVisibility:()=>r(g.id),onRename:v=>s(g.id,v),onMoveUp:()=>o(g.id),onMoveDown:()=>a(g.id),onDelete:()=>l(g.id)},g.id))})})})]})}function Zee({kind:t}){return t==="tiles"?w.jsx("svg",{width:"24",height:"24",viewBox:"0 0 42.704 42.704",xmlns:"http://www.w3.org/2000/svg","aria-hidden":!0,children:w.jsx("path",{d:`M42.629,14.199c-0.006-0.021-0.019-0.04-0.024-0.061c-0.031-0.096-0.07-0.189-0.121-0.278c0-0.004-0.002-0.007-0.004-0.01
          c-0.019-0.031-0.041-0.057-0.062-0.088c-0.045-0.07-0.09-0.142-0.143-0.206c-0.04-0.046-0.086-0.085-0.129-0.127
          c-0.043-0.042-0.084-0.087-0.133-0.126c-0.062-0.051-0.135-0.092-0.201-0.133c-0.033-0.02-0.062-0.045-0.096-0.063l-14.777-7.73
          c-0.531-0.277-1.16-0.282-1.695-0.016l-3.266,1.635l-9.062-4.479c-0.536-0.267-1.171-0.257-1.7,0.025L0.986,7.999
          C0.373,8.325-0.008,8.967,0,9.662c0.008,0.695,0.402,1.327,1.023,1.641l15.518,7.83L2,26.986c-0.034,0.02-0.061,0.043-0.094,0.062
          c-0.07,0.043-0.141,0.085-0.204,0.14c-0.05,0.041-0.091,0.088-0.136,0.133c-0.041,0.044-0.084,0.08-0.121,0.125
          c-0.056,0.068-0.102,0.145-0.146,0.22c-0.018,0.026-0.039,0.052-0.055,0.081c-0.002,0.003-0.002,0.005-0.004,0.007
          c-0.053,0.102-0.094,0.207-0.129,0.313c-0.02,0.064-0.031,0.133-0.045,0.197c-0.011,0.062-0.027,0.119-0.034,0.182
          c-0.007,0.066-0.001,0.135-0.001,0.199c0.001,0.057-0.004,0.107,0.001,0.164c0.009,0.084,0.029,0.164,0.049,0.248
          c0.009,0.033,0.011,0.069,0.021,0.104c0.036,0.113,0.084,0.229,0.142,0.34c0.001,0.002,0.002,0.004,0.002,0.006
          c0.005,0.009,0.012,0.013,0.015,0.021c0.069,0.125,0.157,0.24,0.255,0.349c0.029,0.032,0.059,0.062,0.09,0.092
          c0.083,0.079,0.175,0.149,0.273,0.215c0.031,0.021,0.061,0.043,0.094,0.062c0.012,0.006,0.021,0.018,0.033,0.021l18.472,9.893
          c0.08,0.043,0.165,0.064,0.247,0.097c0.053,0.02,0.103,0.045,0.157,0.061c0.156,0.041,0.315,0.064,0.472,0.064
          c0.002,0,0.004,0,0.004,0c0.15,0,0.307-0.021,0.459-0.062c0.051-0.012,0.098-0.035,0.146-0.055
          c0.078-0.024,0.158-0.048,0.234-0.085l18.357-9.321c0.916-0.467,1.282-1.586,0.814-2.502c-0.021-0.043-0.052-0.078-0.076-0.119
          c-0.113-0.526-0.449-1.006-0.972-1.27l-9.215-4.648l10.619-5.917c0.004-0.002,0.008-0.004,0.012-0.006l0.019-0.009
          c0.021-0.015,0.043-0.033,0.065-0.048c0.077-0.049,0.152-0.098,0.229-0.158c0.041-0.034,0.073-0.077,0.112-0.116
          c0.049-0.047,0.099-0.091,0.14-0.143c0.049-0.064,0.09-0.131,0.131-0.199c0.02-0.034,0.045-0.062,0.062-0.099
          c0.002-0.003,0.003-0.007,0.004-0.01c0.044-0.081,0.072-0.166,0.104-0.253c0.074-0.219,0.104-0.443,0.098-0.666
          c0-0.049,0.006-0.096,0-0.142C42.689,14.433,42.665,14.315,42.629,14.199z M5.905,9.595l6.222-3.318l5.892,2.912l-6.07,3.456
          L5.905,9.595z M36.043,28.972l-14.662,7.444L6.817,28.617l13.776-7.442L36.043,28.972z M27.1,20.289l-5.674-2.861l-5.489-2.77
          l6.926-3.942l3.191-1.599l10.881,5.691L27.1,20.289z`,fill:"currentColor"})}):t==="background"?w.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-hidden":!0,children:w.jsx("path",{d:"M14.2639 15.9375L12.5958 14.2834C11.7909 13.4851 11.3884 13.086 10.9266 12.9401C10.5204 12.8118 10.0838 12.8165 9.68048 12.9536C9.22188 13.1095 8.82814 13.5172 8.04068 14.3326L4.04409 18.2801M14.2639 15.9375L14.6053 15.599C15.4112 14.7998 15.8141 14.4002 16.2765 14.2543C16.6831 14.126 17.12 14.1311 17.5236 14.2687C17.9824 14.4251 18.3761 14.8339 19.1634 15.6514L20 16.4934M14.2639 15.9375L18.275 19.9565M18.275 19.9565C17.9176 20 17.4543 20 16.8 20H7.2C6.07989 20 5.51984 20 5.09202 19.782C4.71569 19.5903 4.40973 19.2843 4.21799 18.908C4.12796 18.7313 4.07512 18.5321 4.04409 18.2801M18.275 19.9565C18.5293 19.9256 18.7301 19.8727 18.908 19.782C19.2843 19.5903 19.5903 19.2843 19.782 18.908C20 18.4802 20 17.9201 20 16.8V16.4934M4.04409 18.2801C4 17.9221 4 17.4575 4 16.8V7.2C4 6.0799 4 5.51984 4.21799 5.09202C4.40973 4.71569 4.71569 4.40973 5.09202 4.21799C5.51984 4 6.07989 4 7.2 4H16.8C17.9201 4 18.4802 4 18.908 4.21799C19.2843 4.40973 19.5903 4.71569 19.782 5.09202C20 5.51984 20 6.0799 20 7.2V16.4934M17 8.99989C17 10.1045 16.1046 10.9999 15 10.9999C13.8954 10.9999 13 10.1045 13 8.99989C13 7.89532 13.8954 6.99989 15 6.99989C16.1046 6.99989 17 7.89532 17 8.99989Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}):w.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-hidden":!0,children:[w.jsx("rect",{x:"3",y:"3",width:"7",height:"7",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),w.jsx("rect",{x:"3",y:"14",width:"7",height:"7",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),w.jsx("rect",{x:"14",y:"3",width:"7",height:"7",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),w.jsx("rect",{x:"14",y:"14",width:"7",height:"7",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]})}function Qee({layer:t,isActive:e,onSelect:n,onToggleVisibility:r,onRename:i,onMoveUp:s,onMoveDown:o,onDelete:a}){const{attributes:l,listeners:c,setNodeRef:h,transform:f,transition:p,isDragging:g}=mN({id:t.id}),v={transform:id.Transform.toString(f),transition:p,opacity:g?.4:1};return w.jsx(Jee,{layer:t,isActive:e,onSelect:n,onToggleVisibility:r,onRename:i,onMoveUp:s,onMoveDown:o,onDelete:a,dragAttributes:l,dragListeners:c,dragRef:h,dragStyle:v,isDragging:g})}function Jee({layer:t,isActive:e,onSelect:n,onToggleVisibility:r,onRename:i,onMoveUp:s,onMoveDown:o,onDelete:a,dragAttributes:l,dragListeners:c,dragRef:h,dragStyle:f,isDragging:p}){const[g,v]=Be.useState(!1),[x,k]=Be.useState(t.name);Be.useEffect(()=>{g||k(t.name)},[g,t.name]);const C=()=>{const b=x.trim();b?i(b):k(t.name),v(!1)};return w.jsxs(zj,{children:[w.jsx(Uj,{className:"layer-context-menu__trigger",children:w.jsxs("div",{ref:h,style:f,className:`layer-item${e?" layer-item--active":""}${t.kind==="grid"?" battlemap-layer-panel__item--grid":""}${p?" layer-item--dragging":""}`,onClick:n,onKeyDown:b=>{b.key==="Enter"||b.key===" "?(b.preventDefault(),n()):b.key==="Escape"&&g&&(b.preventDefault(),k(t.name),v(!1))},...l,...c,children:[w.jsx("div",{className:"layer-item__section layer-item__section--visibility",children:w.jsx("button",{type:"button",className:"layer-item__visibility",onClick:b=>{b.stopPropagation(),r()},"aria-label":t.visible?"Hide layer":"Show layer",children:t.visible?w.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-hidden":!0,children:w.jsx("path",{d:"M3 14C3 9.02944 7.02944 5 12 5C16.9706 5 21 9.02944 21 14M17 14C17 16.7614 14.7614 19 12 19C9.23858 19 7 16.7614 7 14C7 11.2386 9.23858 9 12 9C14.7614 9 17 11.2386 17 14Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}):w.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-hidden":!0,children:w.jsx("path",{d:"M9.60997 9.60714C8.05503 10.4549 7 12.1043 7 14C7 16.7614 9.23858 19 12 19C13.8966 19 15.5466 17.944 16.3941 16.3878M21 14C21 9.02944 16.9706 5 12 5C11.5582 5 11.1238 5.03184 10.699 5.09334M3 14C3 11.0069 4.46104 8.35513 6.70883 6.71886M3 3L21 21",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})}),w.jsx("div",{className:"layer-item__divider"}),w.jsx("div",{className:"layer-item__section layer-item__section--thumbnail",children:w.jsx("div",{className:"layer-item__thumbnail battlemap-layer-panel__thumbnail",children:w.jsx(Zee,{kind:t.kind})})}),w.jsx("div",{className:"layer-item__divider"}),w.jsx("div",{className:"layer-item__section layer-item__section--name",children:g?w.jsx("input",{className:"layer-item__name-input",value:x,onChange:b=>k(b.target.value),onBlur:C,onKeyDown:b=>{b.key==="Enter"?(b.preventDefault(),C()):b.key==="Escape"&&(b.preventDefault(),k(t.name),v(!1))},onClick:b=>b.stopPropagation(),autoFocus:!0}):w.jsx("div",{className:"layer-item__name",onDoubleClick:b=>{b.stopPropagation(),v(!0)},children:t.name})})]})}),w.jsx($S,{children:w.jsx(zS,{className:"layer-context-menu__positioner",children:w.jsxs(BS,{className:"layer-context-menu__popup",children:[w.jsxs(Xs,{className:"layer-context-menu__item",onClick:()=>v(!0),children:[w.jsx(XM,{className:"layer-context-menu__item-icon",size:16}),"Rename"]}),w.jsxs(Xs,{className:"layer-context-menu__item",onClick:s,children:[w.jsx("span",{className:"layer-context-menu__item-icon","aria-hidden":!0,children:w.jsx("svg",{width:"16",height:"16",viewBox:"0 -4.5 20 20",xmlns:"http://www.w3.org/2000/svg","aria-hidden":!0,children:w.jsx("path",{d:"M223.707692,6534.63378 L223.707692,6534.63378 C224.097436,6534.22888 224.097436,6533.57338 223.707692,6533.16951 L215.444127,6524.60657 C214.66364,6523.79781 213.397472,6523.79781 212.616986,6524.60657 L204.29246,6533.23165 C203.906714,6533.6324 203.901717,6534.27962 204.282467,6534.68555 C204.671211,6535.10081 205.31179,6535.10495 205.70653,6534.69695 L213.323521,6526.80297 C213.714264,6526.39807 214.346848,6526.39807 214.737591,6526.80297 L222.294621,6534.63378 C222.684365,6535.03868 223.317949,6535.03868 223.707692,6534.63378",transform:"translate(-204 -6524)",fill:"currentColor"})})}),"Move Up"]}),w.jsxs(Xs,{className:"layer-context-menu__item",onClick:o,children:[w.jsx("span",{className:"layer-context-menu__item-icon","aria-hidden":!0,children:w.jsx("svg",{width:"16",height:"16",viewBox:"0 -4.5 20 20",xmlns:"http://www.w3.org/2000/svg","aria-hidden":!0,children:w.jsx("path",{d:"M164.292308,6524.36583 L164.292308,6524.36583 C163.902564,6524.77071 163.902564,6525.42619 164.292308,6525.83004 L172.555873,6534.39267 C173.33636,6535.20244 174.602528,6535.20244 175.383014,6534.39267 L183.70754,6525.76791 C184.093286,6525.36716 184.098283,6524.71997 183.717533,6524.31405 C183.328789,6523.89985 182.68821,6523.89467 182.29347,6524.30266 L174.676479,6532.19636 C174.285736,6532.60124 173.653152,6532.60124 173.262409,6532.19636 L165.705379,6524.36583 C165.315635,6523.96094 164.683051,6523.96094 164.292308,6524.36583",transform:"translate(-164 -6524)",fill:"currentColor"})})}),"Move Down"]}),w.jsx($j,{className:"layer-context-menu__separator"}),w.jsxs(Xs,{className:"layer-context-menu__item layer-context-menu__item--danger",onClick:a,disabled:t.kind==="grid",children:[w.jsx(ZM,{className:"layer-context-menu__item-icon",size:16}),"Delete"]})]})})})]})}const rP=3,vh="grid-layer",B1=1,$1=30,ete=.5,iP=11,z1=.5,U1=20,tte=.5,sP=11,nte=t=>t.map((e,n)=>({tile:e,index:n})),n_=(t,e,n)=>Math.min(n,Math.max(e,t)),oP=(t,e,n)=>(n_(t,e,n)-e)/(n-e)*100,aP=(t,e)=>{const n=t.trim();if(!n)return e;if(n.startsWith("#"))return n;const r=n.match(/rgba?\((\d+),\s*(\d+),\s*(\d+)/i);if(!r)return e;const i=s=>Number(s).toString(16).padStart(2,"0");return`#${i(r[1])}${i(r[2])}${i(r[3])}`};function rte(){var Q;const{projectId:t}=lb(),{user:e}=Oi(),n=ro(),{project:r,config:i,isLoading:s,isSaving:o,error:a,saveConfig:l}=Kj(t,e==null?void 0:e.id),c=i.gridType==="square"?i:mn,h=c.gridColumns||mn.gridColumns,f=c.gridRows||mn.gridRows,p=c.cellSize||mn.cellSize,[g,v]=y.useState(c.widgets??[]),[x,k]=y.useState(null),[C,b]=y.useState(null),[_,T]=y.useState(null),[R,L]=y.useState(null),[M,A]=y.useState(null),[$,j]=y.useState(null),[V,U]=y.useState(1),[B,Z]=y.useState({x:0,y:0}),[q,G]=y.useState(!1),[te,O]=y.useState(!1),[K,Y]=y.useState(()=>Object.fromEntries(D1.map(N=>[N.title,!1]))),[xe,re]=y.useState(!1),[ue,ke]=y.useState(!1),[qe,he]=y.useState(!1),[ge,we]=y.useState(!1),[ae,me]=y.useState(()=>c.layers&&c.layers.length>0?c.layers:[{id:vh,name:"Grid Map Layer",kind:"grid",visible:!0}]),[X,ye]=y.useState(c.activeLayerId??vh),_e=y.useRef(ae),at=y.useRef(X),[Le,fe]=y.useState(Number.isFinite(c.gridLineWidth)?Number(c.gridLineWidth):mn.gridLineWidth??1),[ve,Ae]=y.useState(Number.isFinite(c.gridBorderWidth)?Number(c.gridBorderWidth):mn.gridBorderWidth??2),[De,Ue]=y.useState(c.gridLineColor??""),[Ie,ze]=y.useState(c.gridBorderColor??""),Ce=y.useRef(Le),Oe=y.useRef(ve),Ne=y.useRef(De),yt=y.useRef(Ie),[Fe,st]=y.useState(!1),[wt,At]=y.useState(!1),[Ye,Re]=y.useState(!1),[Te,pe]=y.useState(!1),[be,gt]=y.useState(!1),[nt,lt]=y.useState(null),[Ke,xt]=y.useState(!1),[Lt,rt]=y.useState(null),[Nt,ht]=y.useState(null),zt=y.useRef(null),Et=y.useRef(null),ut=y.useMemo(()=>ae.find(N=>N.id===X),[ae,X]),Xt=(ut==null?void 0:ut.kind)==="grid",ft=(ut==null?void 0:ut.kind)==="tiles",Ft=((Q=ae.find(N=>N.kind==="grid"))==null?void 0:Q.visible)??!0,St=y.useMemo(()=>{var N;return((N=ae.find(D=>D.kind==="tiles"))==null?void 0:N.id)??null},[ae]),ln=y.useMemo(()=>[...ae].reverse(),[ae]),Gt=y.useMemo(()=>{const N=new Map,D=St??vh;return g.forEach(z=>{var le;const ie=z.layerId??D;N.has(ie)||N.set(ie,[]),(le=N.get(ie))==null||le.push(z)}),N},[St,g]);y.useEffect(()=>{Xt||(st(!1),Re(!1)),ft||gt(!1)},[Xt,ft]);const qt=y.useMemo(()=>{const N=new Map;return D1.forEach(D=>{D.tiles.forEach(z=>{N.set(z.id,z)})}),N},[]),mt=y.useCallback(()=>{const N=[];for(let D=0;D<f;D+=1)for(let z=0;z<h;z+=1)N.push({x:z,y:D});return N},[h,f]),[vt,Ut]=y.useState(()=>c.allowedSquareCells&&c.allowedSquareCells.length>0?c.allowedSquareCells:mt()),kr=y.useMemo(()=>new Set(vt.map(N=>`${N.x},${N.y}`)),[vt]),zn=y.useMemo(()=>{if(!vt.length)return null;let N=Number.POSITIVE_INFINITY,D=Number.POSITIVE_INFINITY,z=Number.NEGATIVE_INFINITY,ie=Number.NEGATIVE_INFINITY;return vt.forEach(le=>{const de=le.x*p,Ge=le.y*p;N=Math.min(N,de),D=Math.min(D,Ge),z=Math.max(z,de+p),ie=Math.max(ie,Ge+p)}),{minX:N,minY:D,maxX:z,maxY:ie,width:z-N,height:ie-D}},[vt,p]),Un=y.useMemo(()=>{if(!vt.length)return[];const N=new Set(vt.map(z=>`${z.x},${z.y}`)),D=[];return vt.forEach(z=>{const ie=z.x*p,le=z.y*p;N.has(`${z.x},${z.y-1}`)||D.push({x1:ie,y1:le,x2:ie+p,y2:le}),N.has(`${z.x+1},${z.y}`)||D.push({x1:ie+p,y1:le,x2:ie+p,y2:le+p}),N.has(`${z.x},${z.y+1}`)||D.push({x1:ie+p,y1:le+p,x2:ie,y2:le+p}),N.has(`${z.x-1},${z.y}`)||D.push({x1:ie,y1:le+p,x2:ie,y2:le})}),D},[vt,p]),Yr=y.useRef(null),Er=y.useRef(null),so=y.useRef(null),Dl=y.useRef(!1),Or=y.useRef(null),pr=y.useRef(!1),ci=y.useRef({x:0,y:0}),Xn=y.useRef(V),Rr=y.useRef(null),oo=y.useRef(null),Io=y.useRef(!1),ba=y.useRef(new Map),Fi=y.useRef(null),Kr=y.useRef(null),Dr=y.useRef(null),is=y.useRef(!1),Ns=y.useRef(!1),Si=y.useRef(!1),di=y.useRef(null),tn=y.useRef(r==null?void 0:r.id);y.useEffect(()=>{_e.current=ae},[ae]),y.useEffect(()=>{at.current=X},[X]),y.useEffect(()=>{Ce.current=Le},[Le]),y.useEffect(()=>{Oe.current=ve},[ve]),y.useEffect(()=>{Ne.current=De},[De]),y.useEffect(()=>{yt.current=Ie},[Ie]);const Yt=y.useCallback(async()=>{if(is.current||!Fi.current)return;const N=Fi.current;Fi.current=null,is.current=!0;let D=!1;try{await l(N)}catch(z){console.error("Failed to save battle map",z),D=!0}finally{is.current=!1,Fi.current?Yt():D||(Ns.current=!1)}},[l]),sn=y.useCallback((N,D,z)=>{Ns.current=!0,Fi.current={gridType:"square",gridColumns:h,gridRows:f,cellSize:p,gridLineColor:Ne.current||void 0,gridBorderColor:yt.current||void 0,gridLineWidth:Ce.current,gridBorderWidth:Oe.current,widgets:N,allowedSquareCells:D,layers:(z==null?void 0:z.layers)??_e.current,activeLayerId:(z==null?void 0:z.activeLayerId)??at.current,version:i.version,updated_at:i.updated_at},Kr.current&&clearTimeout(Kr.current),Kr.current=setTimeout(()=>{Kr.current=null,Yt()},80)},[p,i.updated_at,i.version,Yt,h,f]),Rt=y.useCallback((N,D=X)=>{me(N),ye(D),sn(g,vt,{layers:N,activeLayerId:D})},[X,vt,sn,g]),on=y.useCallback(()=>{sn(g,vt)},[vt,sn,g]),Fr=y.useCallback(()=>{Dr.current&&clearTimeout(Dr.current),Dr.current=setTimeout(()=>{Dr.current=null,on()},250)},[on]);y.useEffect(()=>{const N=(r==null?void 0:r.id)&&(r==null?void 0:r.id)!==tn.current;if(i.gridType!=="square")return;const D=i.version??0;(N||!Si.current||!Ns.current&&D>=(di.current??-1))&&(v(i.widgets??[]),me(i.layers&&i.layers.length>0?i.layers:[{id:vh,name:"Grid Map Layer",kind:"grid",visible:!0}]),ye(i.activeLayerId??vh),i.allowedSquareCells&&i.allowedSquareCells.length>0?Ut(i.allowedSquareCells):(N||!Si.current)&&Ut(mt()),fe(Number.isFinite(i.gridLineWidth)?Number(i.gridLineWidth):mn.gridLineWidth??1),Ae(Number.isFinite(i.gridBorderWidth)?Number(i.gridBorderWidth):mn.gridBorderWidth??2),Ue(i.gridLineColor??""),ze(i.gridBorderColor??""),Si.current=!0,di.current=D,tn.current=r==null?void 0:r.id)},[mt,i,r==null?void 0:r.id]),y.useEffect(()=>()=>{Kr.current&&clearTimeout(Kr.current),Dr.current&&clearTimeout(Dr.current)},[]);const Vn=y.useCallback((N,D=Xn.current)=>{ci.current=N,oo.current={pan:N,scale:D},Er.current&&Er.current.setAttribute("transform",`translate(${N.x} ${N.y}) scale(${D})`),Rr.current===null&&(Rr.current=requestAnimationFrame(()=>{Rr.current=null;const z=oo.current;!z||!Er.current||Er.current.setAttribute("transform",`translate(${z.pan.x} ${z.pan.y}) scale(${z.scale})`)}))},[]),Cn=y.useCallback((N,D)=>{Vn(N,D??Xn.current),Z(N)},[Vn]);y.useEffect(()=>()=>{Rr.current!==null&&cancelAnimationFrame(Rr.current)},[]),y.useLayoutEffect(()=>{Xn.current=V,Vn(ci.current,V)},[V,Vn]),y.useLayoutEffect(()=>{ci.current=B,Vn(B,Xn.current)},[B,Vn]);const Ht=y.useCallback((N,D)=>{var de;const z=(de=Yr.current)==null?void 0:de.getBoundingClientRect();if(!z)return null;const ie=ci.current,le=Xn.current;return{x:(N-z.left-ie.x)/le,y:(D-z.top-ie.y)/le}},[]),Pn=y.useCallback((N,D)=>({x:Math.floor(N/p),y:Math.floor(D/p)}),[p]),Ln=y.useCallback((N,D,z)=>{const ie=[];for(let le=0;le<Math.max(1,D);le+=1)for(let de=0;de<Math.max(1,z);de+=1)ie.push({x:N.x+le,y:N.y+de});return ie},[]),Ci=y.useCallback((N,D,z)=>Ln(N,D,z).every(le=>kr.has(`${le.x},${le.y}`)),[kr,Ln]),hi=y.useCallback((N,D,z,ie)=>{const le=Math.max(1,D),de=Math.max(1,z);return g.find(Ge=>{if(ie&&Ge.id===ie)return!1;const $e=Math.max(1,Ge.w??1),Ve=Math.max(1,Ge.h??1),Bt=N.x<Ge.x+$e&&N.x+le>Ge.x,Wt=N.y<Ge.y+Ve&&N.y+de>Ge.y;return Bt&&Wt})},[g]),gr=y.useCallback((N,D)=>{const z=Math.max(1,N.w??1),ie=Math.max(1,N.h??1);return D.x>=N.x&&D.x<N.x+z&&D.y>=N.y&&D.y<N.y+ie},[]),Oo=y.useCallback(N=>{if(!be||!nt||!ft||!X)return;const D=qt.get(nt);if(!D)return;const z=Math.max(1,D.cols??1),ie=Math.max(1,D.rows??1);if(!Ci(N,z,ie))return;const le=`${N.x}-${N.y}`;if(zt.current===le)return;const de=($e,Ve,Bt,Wt)=>{const Wn=Math.max(1,$e.w??1),Zn=Math.max(1,$e.h??1),Qn=Ve.x<$e.x+Wn&&Ve.x+Bt>$e.x,xn=Ve.y<$e.y+Zn&&Ve.y+Wt>$e.y;return Qn&&xn};let Ge=!1;v($e=>{const Ve=$e.find(Wn=>de(Wn,N,z,ie));if(Ve){if((Ve.layerId??St)!==X||$e.find(xn=>xn.id!==Ve.id&&de(xn,N,z,ie)))return $e;const Qn=$e.map(xn=>xn.id===Ve.id?{...xn,x:N.x,y:N.y,w:z,h:ie,tileId:D.id,appearance:{backgroundImageUrl:D.image}}:xn);return sn(Qn,vt),Ge=!0,Qn}const Bt={id:fr(),x:N.x,y:N.y,w:z,h:ie,content:"",layerId:X,tileId:D.id,appearance:{backgroundImageUrl:D.image}},Wt=[...$e,Bt];return sn(Wt,vt),Ge=!0,Wt}),zt.current=le,Ge&&j("Painted tile.")},[X,vt,St,be,Ci,ft,sn,nt,qt]),ss=y.useCallback(N=>N.type==="palette"?{cols:N.tile.cols??1,rows:N.tile.rows??1}:{cols:N.widget.w??1,rows:N.widget.h??1},[]),ao=y.useCallback(N=>{var de;const D=(de=Yr.current)==null?void 0:de.getBoundingClientRect();if(!D||!zn)return;const z=N??V,ie=zn.minX+zn.width/2,le=zn.minY+zn.height/2;Cn({x:D.width/2-ie*z,y:D.height/2-le*z})},[Cn,zn,V]),Xr=y.useCallback(N=>{const D=g.filter(z=>z.id!==N);v(D),sn(D,vt),b(null),j("Tile deleted.")},[vt,sn,g]),ki=y.useCallback((N,D)=>{if(N===void 0||D===void 0)return;const z=Ht(N,D);if(!z)return;const ie=Pn(z.x,z.y),le=g.find(de=>de.x===ie.x&&de.y===ie.y);le&&Xr(le.id)},[Xr,Pn,Ht,g]),Bi=y.useCallback((N,D)=>{if(N===void 0||D===void 0)return;const z=Ht(N,D);if(!z)return;const ie=Pn(z.x,z.y),le=`${ie.x},${ie.y}`;Et.current!==le&&(Et.current=le,Ut(de=>{if(de.some(Ve=>Ve.x===ie.x&&Ve.y===ie.y))return de;const $e=[...de,ie];return j("Grid cell added (saving...)."),sn(g,$e),$e}))},[Pn,sn,Ht,g]),os=y.useCallback((N,D)=>{if(N===void 0||D===void 0)return;const z=Ht(N,D);if(!z)return;const ie=Pn(z.x,z.y),le=`${ie.x},${ie.y}`;Et.current!==le&&(Et.current=le,Ut(de=>{if(!de.some(Ve=>Ve.x===ie.x&&Ve.y===ie.y))return de;const $e=de.filter(Ve=>Ve.x!==ie.x||Ve.y!==ie.y);return v(Ve=>{const Bt=Ve.filter(Wt=>!gr(Wt,ie));return C&&Ve.some(Wt=>Wt.id===C)&&(Bt.some(Wn=>Wn.id===C)||b(null)),j("Grid cell removed (saving...)."),sn(Bt,$e),Bt}),$e}))},[gr,Pn,sn,C,Ht]),js=y.useCallback((N,D)=>{const z=so.current;if(!z||N===void 0||D===void 0)return!1;const ie=z.getBoundingClientRect();return N>=ie.left&&N<=ie.right&&D>=ie.top&&D<=ie.bottom},[]),Sa=y.useCallback((N,D)=>{const z=js(N,D);return Dl.current=z,we(z),z},[js]);y.useEffect(()=>{const N=()=>{var z;((z=Yr.current)==null?void 0:z.getBoundingClientRect())&&zn&&(Io.current||(ao(),Io.current=!0))};return N(),window.addEventListener("resize",N),()=>window.removeEventListener("resize",N)},[zn,ao]),y.useEffect(()=>{const N=z=>{z.code==="Space"&&G(!0),(z.key==="Delete"||z.key==="Backspace")&&C&&(z.preventDefault(),Xr(C))},D=z=>{z.code==="Space"&&(G(!1),O(!1))};return window.addEventListener("keydown",N),window.addEventListener("keyup",D),()=>{window.removeEventListener("keydown",N),window.removeEventListener("keyup",D)}},[Xr,C]),y.useEffect(()=>{const N=D=>{if(D.code!=="Space")return;const z=document.activeElement;!z||!z.closest(".battlemap-workspace")||!z.closest('button, [role="button"]')||D.preventDefault()};return window.addEventListener("keydown",N,{capture:!0}),()=>{window.removeEventListener("keydown",N,{capture:!0})}},[]),y.useEffect(()=>{be||(xt(!1),lt(null),zt.current=null)},[be]),y.useEffect(()=>{Fe||At(!1),Ye||pe(!1),!Fe&&!Ye&&(rt(null),ht(null),Et.current=null)},[Fe,Ye]),y.useEffect(()=>{if(!_)return;const N=z=>{A({x:z.clientX,y:z.clientY});const ie=Ht(z.clientX,z.clientY);if(!ie){k(null),re(!1),Sa(z.clientX,z.clientY);return}const le=Pn(ie.x,ie.y),de=ss(_),Ge=Ci(le,de.cols,de.rows),$e=hi(le,de.cols,de.rows,(_==null?void 0:_.type)==="widget"?_.widget.id:void 0);k(le),re(Ge&&!$e),Sa(z.clientX,z.clientY)},D=z=>{A({x:z.clientX,y:z.clientY});const ie=Sa(z.clientX,z.clientY),le=Ht(z.clientX,z.clientY),de=le?Pn(le.x,le.y):x,Ge=_?ss(_):{cols:1,rows:1},$e=de?Ci(de,Ge.cols,Ge.rows):!1,Ve=de?hi(de,Ge.cols,Ge.rows,(_==null?void 0:_.type)==="widget"?_.widget.id:void 0):void 0;if(ie&&(_==null?void 0:_.type)==="widget")Xr(_.widget.id);else if(de&&$e)if(_.type==="palette")if(!ft||!X)j("Select a Tile Layer to place tiles.");else if(Ve)j("That placement overlaps another tile.");else{const Bt={id:fr(),x:de.x,y:de.y,w:Ge.cols,h:Ge.rows,content:"",layerId:X,tileId:_.tile.id,appearance:{backgroundImageUrl:_.tile.image}},Wt=[...g,Bt];v(Wt),sn(Wt,vt),j("Placed tile on grid.")}else{const Bt=R??_.widget,Wt=Bt.x===de.x&&Bt.y===de.y;if(Ve)j("That spot is already occupied.");else if(!Wt){const Wn=g.map(Zn=>Zn.id===_.widget.id?{...Zn,x:de.x,y:de.y}:Zn);v(Wn),sn(Wn,vt),j("Moved tile.")}}else de&&!$e?j("Tile does not fit in the grid here."):_.type==="widget"?j("Outside the grid. Returning tile to its spot."):_.type==="palette"&&j("Drop tiles inside the grid.");T(null),L(null),k(null),re(!1),A(null),we(!1),Dl.current=!1};return window.addEventListener("mousemove",N),window.addEventListener("mouseup",D),()=>{window.removeEventListener("mousemove",N),window.removeEventListener("mouseup",D),he(!1)}},[X,vt,_,R,x,Xr,Ci,ft,sn,Pn,hi,ss,he,Ht,Sa,g]);const Ca=y.useCallback(N=>{q&&(N.preventDefault(),O(!0),pr.current=!0,Or.current={x:N.clientX,y:N.clientY,panX:ci.current.x,panY:ci.current.y})},[q]),ka=y.useCallback(N=>{if(!pr.current||!Or.current)return;const D=N.clientX-Or.current.x,z=N.clientY-Or.current.y;Vn({x:Or.current.panX+D,y:Or.current.panY+z},Xn.current)},[Vn]),as=y.useCallback(()=>{O(!1),pr.current=!1,Or.current=null,Z(ci.current)},[]);y.useEffect(()=>{if(!te)return;const N=z=>{if(!pr.current||!Or.current)return;const ie=z.clientX-Or.current.x,le=z.clientY-Or.current.y;Vn({x:Or.current.panX+ie,y:Or.current.panY+le},Xn.current)},D=()=>{as()};return window.addEventListener("mousemove",N),window.addEventListener("mouseup",D),()=>{window.removeEventListener("mousemove",N),window.removeEventListener("mouseup",D)}},[te,Vn,as]);const Do=y.useCallback(N=>{ue&&(N.preventDefault(),he(!0),ki(N.clientX,N.clientY))},[ki,ue]),jd=y.useCallback(N=>{!ue||!qe||(N.preventDefault(),ki(N.clientX,N.clientY))},[ki,qe,ue]),Fo=y.useCallback(()=>{ue&&he(!1)},[ue]),Vt=y.useCallback((N,D)=>{if(N===void 0||D===void 0||!Fe&&!Ye)return;const z=Ht(N,D);if(!z){rt(null),ht(null);return}const ie=Pn(z.x,z.y),le=`${ie.x},${ie.y}`;if(Fe&&!kr.has(le)){rt(ie),ht("expand");return}if(Ye&&kr.has(le)){rt(ie),ht("shrink");return}rt(null),ht(null)},[kr,Fe,Ye,Pn,Ht]),Du=y.useCallback((N,D)=>{Fe&&(Et.current=null,At(!0),Bi(N,D))},[Bi,Fe]),Ea=y.useCallback((N,D)=>{!Fe||!wt||Bi(N,D)},[Bi,Fe,wt]),Ra=y.useCallback(()=>{wt&&(At(!1),Et.current=null)},[wt]),Id=y.useCallback((N,D)=>{Ye&&(Et.current=null,pe(!0),os(N,D))},[Ye,os]),Od=y.useCallback((N,D)=>{!Ye||!Te||os(N,D)},[Ye,Te,os]),Mn=y.useCallback(()=>{Te&&(pe(!1),Et.current=null)},[Te]),Ta=y.useCallback(N=>{var de;N.preventDefault();const D=.0015,z=Math.min(10,Math.max(.1,Xn.current*Math.exp(-N.deltaY*D))),ie=(de=Yr.current)==null?void 0:de.getBoundingClientRect();if(!ie){U(z),Xn.current=z,Vn(ci.current,z);return}const le=Ht(N.clientX,N.clientY);if(U(z),Xn.current=z,le){const Ge=N.clientX-ie.left,$e=N.clientY-ie.top;Cn({x:Ge-le.x*z,y:$e-le.y*z},z)}},[Cn,Vn,Ht]);y.useEffect(()=>{const N=Yr.current;if(!N)return;const D=z=>{Ta(z)};return N.addEventListener("wheel",D,{passive:!1}),()=>{N.removeEventListener("wheel",D)}},[Ta,s]);const Fu=y.useCallback((N,D)=>{if(D.preventDefault(),!!ft){if(be){lt(N.id),j(`Draw mode: ${N.label} selected.`);return}T({type:"palette",tile:N}),j(null)}},[be,ft]),Pa=y.useCallback((N,D)=>{const z=N.layerId??St;if(!(!ft||z!==X)&&!(q||be)){if(D.preventDefault(),ue){Xr(N.id);return}b(N.id),T({type:"widget",widget:N}),L({x:N.x,y:N.y}),A({x:D.clientX,y:D.clientY}),j(null)}},[X,St,Xr,ue,be,q,ft]),ls=y.useCallback((N,D)=>{if(!be||q||!ft)return;if(!nt){j("Select a tile to draw.");return}if(N===void 0||D===void 0)return;const z=Ht(N,D);if(!z)return;zt.current=null;const ie=Pn(z.x,z.y);Oo(ie),xt(!0)},[be,q,ft,Oo,Pn,nt,Ht]),La=y.useCallback((N,D)=>{if(!be||!Ke||N===void 0||D===void 0)return;const z=Ht(N,D);if(!z)return;const ie=Pn(z.x,z.y);Oo(ie)},[be,Ke,Oo,Pn,Ht]),or=y.useCallback(()=>{Ke&&(xt(!1),zt.current=null)},[Ke]),Bu=y.useMemo(()=>{var N,D;return _?_.type==="palette"?_.tile.image:((N=qt.get(_.widget.tileId??""))==null?void 0:N.image)??((D=_.widget.appearance)==null?void 0:D.backgroundImageUrl)??null:null},[_,qt]),Dd=y.useMemo(()=>({"--grid-line-color":De||void 0,"--grid-border-color":Ie||void 0,"--grid-line-width":`${Le}px`,"--grid-border-width":`${ve}px`}),[Ie,ve,De,Le]),mr=y.useCallback(()=>{var le;const N=(le=Yr.current)==null?void 0:le.closest(".square-workspace"),D=getComputedStyle(N||document.documentElement),z=parseFloat(D.getPropertyValue("--grid-line-width")),ie=parseFloat(D.getPropertyValue("--grid-border-width"));return{background:D.getPropertyValue("--bg").trim()||"#0f172a",gridLine:D.getPropertyValue("--grid-line-color").trim()||"#e2e8f0",gridBorder:D.getPropertyValue("--grid-border-color").trim()||"#f8fafc",gridLineWidth:Number.isFinite(z)?z:1,gridBorderWidth:Number.isFinite(ie)?ie:2}},[]),$i=y.useMemo(()=>De||aP(mr().gridLine,"#94a3b8"),[mr,De]),Bo=y.useMemo(()=>Ie||aP(mr().gridBorder,"#94a3b8"),[mr,Ie]),Ma=oP(ve,B1,$1),F=oP(Le,z1,U1),H=y.useCallback(async N=>{if(!zn){j("Grid not ready to export.");return}try{const D=Math.max(12,p*.25),z=zn.minX-D,ie=zn.minY-D,le=zn.width+D*2,de=zn.height+D*2,{background:Ge,gridBorder:$e,gridLine:Ve,gridBorderWidth:Bt,gridLineWidth:Wt}=mr(),Wn=new Map;await Promise.all(g.map(async pn=>{var ar,lo;const hn=((ar=qt.get(pn.tileId??""))==null?void 0:ar.image)??((lo=pn.appearance)==null?void 0:lo.backgroundImageUrl)??void 0;if(!hn||Wn.has(hn))return;const nn=await Xj(hn,ba.current);Wn.set(hn,nn)}));const Zn=[];Zn.push(`<svg xmlns="http://www.w3.org/2000/svg" width="${le}" height="${de}" viewBox="${z} ${ie} ${le} ${de}" fill="none">`),[...ae].reverse().forEach(pn=>{pn.visible&&(pn.kind==="tiles"&&(Gt.get(pn.id)??[]).forEach(nn=>{var Vo,Aa;const ar=nn.x*p,lo=nn.y*p,zo=(nn.w??1)*p,$l=(nn.h??1)*p,Os=((Vo=qt.get(nn.tileId??""))==null?void 0:Vo.image)??((Aa=nn.appearance)==null?void 0:Aa.backgroundImageUrl)??"",Uo=Os?Wn.get(Os)??Os:"";Uo?Zn.push(`<image href="${Uo}" x="${ar}" y="${lo}" width="${zo}" height="${$l}" preserveAspectRatio="xMidYMid slice" />`):Zn.push(`<rect x="${ar}" y="${lo}" width="${zo}" height="${$l}" fill="#d0d0d0" />`)}),pn.kind==="grid"&&(vt.forEach(hn=>{const nn=hn.x*p,ar=hn.y*p;Zn.push(`<rect x="${nn}" y="${ar}" width="${p}" height="${p}" fill="none" stroke="${Ve}" stroke-width="${Wt}" />`)}),Un.forEach(hn=>{Zn.push(`<line x1="${hn.x1}" y1="${hn.y1}" x2="${hn.x2}" y2="${hn.y2}" stroke="${$e}" stroke-width="${Bt}" stroke-linecap="round" stroke-linejoin="round" />`)})))}),Zn.push("</svg>");const xn=Zn.join(""),an=new Blob([xn],{type:"image/svg+xml;charset=utf-8"}),Is=URL.createObjectURL(an),Hn=await Zj(Is),Zr=document.createElement("canvas");Zr.width=Math.ceil(le),Zr.height=Math.ceil(de);const $o=Zr.getContext("2d");if(!$o){URL.revokeObjectURL(Is),j("Unable to export: canvas not available.");return}$o.fillStyle=Ge,$o.fillRect(0,0,Zr.width,Zr.height),$o.drawImage(Hn,0,0,Zr.width,Zr.height),URL.revokeObjectURL(Is);const Fl=N==="png"?"image/png":"image/jpeg",Bl=N==="jpeg"?.92:void 0,Jn=Zr.toDataURL(Fl,Bl);Qj(Jn,`battle-map.${N==="png"?"png":"jpg"}`),j(`Saved battle map as ${N.toUpperCase()}.`)}catch(D){console.error("Export failed",D),j("Failed to export battle map.")}},[vt,p,zn,Un,ae,qt,Gt]);return s?w.jsx("div",{className:"battlemap-workspace__loading",children:w.jsx("p",{className:"battlemap-workspace__loading-text",children:"Loading battle map..."})}):!r||a?w.jsxs("div",{className:"battlemap-workspace__error",children:[w.jsx("p",{className:"battlemap-workspace__error-text",children:a??"Battle map not found."}),w.jsx("button",{className:"button button--ghost battlemap-workspace__error-button",onClick:()=>n("/app"),children:"Back to Projects"})]}):w.jsxs("div",{className:`battlemap-workspace square-workspace${ue?" is-delete-mode":""}`,style:Dd,children:[w.jsxs("div",{className:"battlemap-workspace__sidebar square-workspace__sidebar",children:[w.jsxs("div",{className:"battlemap-workspace__sidebar-header",children:[w.jsx("button",{className:"button button--ghost battlemap-workspace__back-button",onClick:()=>n("/app"),children:"Back to Projects"}),w.jsx("h2",{className:"battlemap-workspace__project-name",children:r.name})]}),w.jsxs("div",{className:"battlemap-workspace__sidebar-actions",children:[w.jsx("button",{type:"button",className:"button button--ghost battlemap-workspace__reset-button",onClick:()=>{U(1),Io.current=!1,ao(1),Io.current=!0},children:"Reset View"}),w.jsxs("div",{className:"battlemap-workspace__export-actions",children:[w.jsx("button",{type:"button",className:"button battlemap-workspace__export-button",onClick:()=>H("png"),children:"Save Battle Map (PNG)"}),w.jsx("button",{type:"button",className:"button button--ghost battlemap-workspace__export-button",onClick:()=>H("jpeg"),children:"Save Battle Map (JPEG)"})]})]}),w.jsxs("p",{className:"battlemap-workspace__hint battlemap-workspace__autosave",children:["Auto-save: ",o?"Saving...":"Synced"]}),$?w.jsx("p",{className:"square-workspace__status",children:$}):null]}),w.jsx("div",{className:"battlemap-workspace__main square-workspace__main",children:w.jsxs("div",{ref:Yr,className:`battlemap-workspace__viewport square-workspace__viewport${q?" is-space-held":""}${te?" is-panning":""}${Fe?" is-expand-mode":""}${Ye?" is-shrink-mode":""}`,onMouseDown:N=>{q?Ca(N):be?ls(N.clientX,N.clientY):Fe?Du(N.clientX,N.clientY):Ye?Id(N.clientX,N.clientY):ue?Do(N):Ca(N)},onMouseMove:N=>{(Fe||Ye)&&Vt(N.clientX,N.clientY),te?ka(N):be&&Ke?La(N.clientX,N.clientY):Fe?Ea(N.clientX,N.clientY):Ye?Od(N.clientX,N.clientY):ue?jd(N):ka(N)},onMouseUp:N=>{te?as():be&&Ke?or():Fe?Ra():Ye?Mn():ue?Fo():as()},onMouseLeave:()=>{te?as():be&&Ke?or():Fe?(Ra(),rt(null),ht(null)):Ye?(Mn(),rt(null),ht(null)):ue?Fo():as()},children:[w.jsx("svg",{className:"square-workspace__surface",children:w.jsxs("g",{ref:Er,transform:`translate(${B.x} ${B.y}) scale(${V})`,children:[ln.map(N=>{if(!N.visible)return null;if(N.kind==="grid")return w.jsxs("g",{"data-layer":"grid",children:[vt.map(D=>{const z=D.x*p,ie=D.y*p;return w.jsx("rect",{className:"square-workspace__cell",x:z,y:ie,width:p,height:p},`${D.x}-${D.y}`)}),Un.map((D,z)=>w.jsx("line",{className:"square-workspace__grid-boundary",x1:D.x1,y1:D.y1,x2:D.x2,y2:D.y2},`boundary-${z}`))]},N.id);if(N.kind==="tiles"){const D=Gt.get(N.id)??[];return D.length?w.jsx("g",{"data-layer":"tiles",children:D.map(z=>{var Bt,Wt;const ie=z.x*p,le=z.y*p,de=qt.get(z.tileId??""),Ge=p*(z.w??1),$e=p*(z.h??1),Ve=(_==null?void 0:_.type)==="widget"&&_.widget.id===z.id;return w.jsxs("g",{className:`square-workspace__tile${Ve?" is-drag-origin":""}`,onMouseDown:Wn=>Pa(z,Wn),children:[de||(Bt=z.appearance)!=null&&Bt.backgroundImageUrl?w.jsx("image",{href:(de==null?void 0:de.image)??((Wt=z.appearance)==null?void 0:Wt.backgroundImageUrl),x:ie,y:le,width:Ge,height:$e,preserveAspectRatio:"xMidYMid slice"}):w.jsx("rect",{x:ie,y:le,width:Ge,height:$e,fill:"#d0d0d0"}),w.jsx("rect",{className:"square-workspace__tile-border",x:ie,y:le,width:Ge,height:$e})]},z.id)})},N.id):null}return null}),Ft&&x&&xe&&_?w.jsx("rect",{className:"square-workspace__hover",x:x.x*p,y:x.y*p,width:p*ss(_).cols,height:p*ss(_).rows}):null,Ft&&Lt&&Nt==="expand"?w.jsx("rect",{className:"square-workspace__expand-preview",x:Lt.x*p,y:Lt.y*p,width:p,height:p}):null,Ft&&Lt&&Nt==="shrink"?w.jsx("rect",{className:"square-workspace__shrink-preview",x:Lt.x*p,y:Lt.y*p,width:p,height:p}):null]})}),w.jsx("div",{id:"trash-dropzone",ref:so,className:`battlemap-delete-panel${ge?" is-active":""}${ue?" is-toggle-active":""}`,"aria-label":"Drop tiles here to delete them",role:"presentation",onClick:()=>{ke(N=>{const D=!N;return D?(st(!1),gt(!1),Re(!1),j("Delete mode enabled.")):j("Delete mode disabled."),he(!1),D})},children:w.jsx("span",{className:"battlemap-delete-panel__icon","aria-hidden":!0})}),_&&M&&Bu?w.jsx("div",{className:"square-workspace__drag-preview",style:{left:`${M.x}px`,top:`${M.y}px`,transform:"translate(-50%, -50%)",width:`${p*(_.type==="palette"?_.tile.cols:_.widget.w??1)*V}px`,height:`${p*(_.type==="palette"?_.tile.rows:_.widget.h??1)*V}px`},children:w.jsx("img",{src:Bu,alt:"Drag preview",style:{width:"100%",height:"100%",objectFit:"cover",pointerEvents:"none"}})}):null]})}),w.jsxs("div",{className:"battlemap-workspace__right-sidebar",children:[w.jsx(Jj,{layers:ae,activeLayerId:X,onActiveLayerChange:N=>{Rt(ae,N)},onToggleVisibility:N=>{const D=ae.map(z=>z.id===N?{...z,visible:!z.visible}:z);Rt(D)},onAddLayer:N=>{const D=(()=>N==="grid"?"Grid Layer":N==="tiles"?"Tile Layer":N==="image"?"Image Layer":N==="background"?"Background Layer":"Layer")(),z=ae.filter(de=>de.kind==="tiles").length,ie={id:crypto.randomUUID(),name:N==="tiles"?`${D} ${z+1}`:`${D} ${ae.length}`,kind:N,visible:!0};let le=[...ae];if(N==="tiles"){const de=ae.findIndex($e=>$e.kind==="grid"),Ge=de>=0?de+1:0;le=[...ae.slice(0,Ge),ie,...ae.slice(Ge)]}else le=[...ae,ie];Rt(le,ie.id)},onRenameLayer:(N,D)=>{const z=ae.map(ie=>ie.id===N?{...ie,name:D}:ie);Rt(z)},onMoveLayerUp:N=>{const D=ae.findIndex(ie=>ie.id===N);if(D<=0)return;const z=[...ae];[z[D-1],z[D]]=[z[D],z[D-1]],Rt(z)},onMoveLayerDown:N=>{const D=ae.findIndex(ie=>ie.id===N);if(D<0||D>=ae.length-1)return;const z=[...ae];[z[D+1],z[D]]=[z[D],z[D+1]],Rt(z)},onDeleteLayer:N=>{var de,Ge;const D=ae.find($e=>$e.id===N);if(!D||D.kind==="grid"||D.kind==="tiles"&&ae.filter(Ve=>Ve.kind==="tiles").length<=1||ae.length<=1)return;const z=ae.filter($e=>$e.id!==N),ie=ae.findIndex($e=>$e.id===N),le=X===N?((de=z[Math.max(0,ie-1)])==null?void 0:de.id)??((Ge=z[0])==null?void 0:Ge.id):X;if(D.kind==="tiles"){const $e=g.filter(Ve=>(Ve.layerId??St)!==N);v($e),me(z),ye(le),sn($e,vt,{layers:z,activeLayerId:le});return}Rt(z,le)},onReorderLayers:N=>{Rt(N)}}),w.jsxs("div",{className:"battlemap-workspace__control-section battlemap-workspace__control-section--compact",children:[w.jsx("h3",{className:"battlemap-workspace__control-title",children:"Grid Properties"}),Xt?w.jsxs(w.Fragment,{children:[w.jsxs("div",{className:"battlemap-grid-toggle-row",children:[w.jsx("button",{type:"button",className:`button button--ghost battlemap-grid-toggle${Fe?" is-active":""}`,onClick:()=>{st(N=>{const D=!N;return D?(ke(!1),gt(!1),Re(!1),j("Expand Grid Mode enabled. Click or drag to add cells.")):j("Expand Grid Mode disabled."),D})},onKeyDown:N=>{N.code==="Space"&&N.preventDefault()},children:"Expand"}),w.jsx("button",{type:"button",className:`button button--ghost battlemap-grid-toggle${Ye?" is-active":""}`,onClick:()=>{Re(N=>{const D=!N;return D?(ke(!1),gt(!1),st(!1),j("Decrease Grid Mode enabled. Click or drag to remove cells.")):j("Decrease Grid Mode disabled."),D})},onKeyDown:N=>{N.code==="Space"&&N.preventDefault()},children:"Decrease"})]}),w.jsx("h3",{className:"battlemap-workspace__control-title battlemap-grid-visuals-title",children:"Grid Visuals"}),w.jsxs("div",{className:"battlemap-grid-visual",children:[w.jsxs("div",{className:"battlemap-grid-visual__label-row",children:[w.jsx("span",{children:"Outer Border Thickness"}),w.jsxs("span",{className:"battlemap-grid-visual__value",children:[ve.toFixed(1),"px"]})]}),w.jsxs("div",{className:"battlemap-grid-slider-wrap",style:{"--tick-count":iP},children:[w.jsx("input",{type:"range",min:B1,max:$1,step:ete,value:ve,onChange:N=>{const D=n_(Number(N.target.value),B1,$1);Ae(D),Oe.current=D},onPointerUp:on,onKeyUp:on,className:"battlemap-grid-slider","aria-label":"Outer border thickness"}),w.jsxs("output",{className:"battlemap-grid-slider__value",style:{left:`${Ma}%`},children:[ve.toFixed(1),"px"]}),w.jsx("div",{className:"battlemap-grid-slider__ticks","aria-hidden":!0,children:Array.from({length:iP}).map((N,D)=>w.jsx("span",{},`grid-border-tick-${D}`))})]}),w.jsx("input",{type:"color",value:Bo,onChange:N=>{const D=N.currentTarget.value;ze(D),yt.current=D,Fr()},className:"battlemap-grid-color","aria-label":"Outer border color"})]}),w.jsxs("div",{className:"battlemap-grid-visual",children:[w.jsxs("div",{className:"battlemap-grid-visual__label-row",children:[w.jsx("span",{children:"Inner Grid Thickness"}),w.jsxs("span",{className:"battlemap-grid-visual__value",children:[Le.toFixed(1),"px"]})]}),w.jsxs("div",{className:"battlemap-grid-slider-wrap",style:{"--tick-count":sP},children:[w.jsx("input",{type:"range",min:z1,max:U1,step:tte,value:Le,onChange:N=>{const D=n_(Number(N.target.value),z1,U1);fe(D),Ce.current=D},onPointerUp:on,onKeyUp:on,className:"battlemap-grid-slider","aria-label":"Inner grid thickness"}),w.jsxs("output",{className:"battlemap-grid-slider__value",style:{left:`${F}%`},children:[Le.toFixed(1),"px"]}),w.jsx("div",{className:"battlemap-grid-slider__ticks","aria-hidden":!0,children:Array.from({length:sP}).map((N,D)=>w.jsx("span",{},`grid-line-tick-${D}`))})]}),w.jsx("input",{type:"color",value:$i,onChange:N=>{const D=N.currentTarget.value;Ue(D),Ne.current=D,Fr()},className:"battlemap-grid-color","aria-label":"Inner grid color"})]})]}):w.jsx("p",{className:"battlemap-workspace__hint",children:"Grid tools appear when the Grid Map Layer is active."}),w.jsx("p",{className:"battlemap-workspace__hint",children:"Hold space + drag to pan. Scroll to zoom. Drop tiles to snap to the grid. Occupied cells are swapped."})]}),w.jsxs("div",{className:"battlemap-workspace__control-section battlemap-workspace__tiles-panel--sidebar",children:[w.jsx("h3",{className:"battlemap-workspace__control-title",children:"Tiles"}),ft?w.jsxs(w.Fragment,{children:[w.jsx("div",{className:"battlemap-workspace__mode-toggle",children:w.jsx("button",{type:"button",className:`button ${be?"button--primary":"button--ghost"}`,onClick:()=>{gt(N=>{const D=!N;return D?(ke(!1),st(!1),Re(!1),j("Draw mode enabled. Pick a tile, then click or drag on the grid.")):j("Draw mode disabled."),D}),T(null),re(!1),zt.current=null},onKeyDown:N=>{N.code==="Space"&&N.preventDefault()},children:be?"Draw Mode: ON":"Draw Mode"})}),w.jsx("div",{className:"battlemap-workspace__tiles-scroll",children:D1.map(N=>w.jsxs("div",{className:`battlemap-workspace__tile-group${K[N.title]?" is-open":""}`,children:[w.jsxs("button",{type:"button",className:"battlemap-workspace__tile-group-toggle",onClick:()=>Y(D=>({...D,[N.title]:!D[N.title]})),"aria-expanded":K[N.title]??!1,"aria-controls":`tile-group-${N.title}`,children:[w.jsx("span",{className:"battlemap-workspace__tile-group-title",children:N.title}),w.jsx("span",{className:`battlemap-workspace__tile-group-chevron${K[N.title]?" is-open":""}`,"aria-hidden":!0})]}),w.jsx("div",{id:`tile-group-${N.title}`,className:`battlemap-workspace__widget-tray${K[N.title]?" is-open":""}`,role:"region","aria-label":`${N.title} tiles`,style:{"--tile-preview-columns":rP,"--tile-preview-scale":nP,"--widget-preview-scale":nP},children:nte(N.tiles).map(({tile:D,index:z})=>w.jsx("div",{className:"battlemap-workspace__widget-template-wrapper",style:{gridColumnEnd:`span ${D.cols}`,gridRowEnd:`span ${D.rows}`,"--tile-cols":D.cols,"--tile-rows":D.rows,justifySelf:D.cols>=rP?"stretch":"center"},children:w.jsx("div",{className:`battlemap-workspace__widget-template${be?" is-draw-mode":""}${nt===D.id?" is-selected":""}`,onMouseDown:ie=>Fu(D,ie),"aria-label":`${D.label} tile`,style:{"--widget-bg-image":`url("${D.image}")`,"--tile-cols":D.cols,"--tile-rows":D.rows}})},`${D.id}-${z}`))})]},N.title))})]}):w.jsx("p",{className:"battlemap-workspace__hint",children:"Select a Tile Layer to browse and place tiles."})]})]})]})}const oa=t=>Number.isFinite(t)&&!Number.isNaN(t),y0=t=>typeof t=="object"&&t!==null,ite=t=>typeof t=="function",w0=t=>y0(t)&&oa(t.col)&&oa(t.row),ste=t=>y0(t)&&oa(t.x)&&oa(t.y),r_=t=>Array.isArray(t)&&oa(t[0])&&oa(t[1]),uv=(t,e)=>e+t*(e&1)>>1,i_=([t,e,n=-t-e])=>({q:t,r:e,s:n});function x0({q:t,r:e,s:n}){const r=oa(t),i=oa(e),s=oa(n);if(r&&i&&s)return{q:t,r:e,s:n};if(r&&i)return{q:t,r:e,s:-t-e};if(r&&s)return{q:t,r:-t-n,s:n};if(i&&s)return{q:-e-n,r:e,s:n};throw new TypeError(`Can't determine three cube coordinates from less than two coordinates. Received: { q: ${t}, r: ${e}, s: ${n} }.`)}var bs=(t=>(t.FLAT="FLAT",t.POINTY="POINTY",t))(bs||{});function ote(t,e){if(y0(t)&&t.xRadius>0&&t.yRadius>0)return t;if(y0(t)&&t.width>0&&t.height>0){const{width:n,height:r}=t;return e===bs.POINTY?{xRadius:n/Math.sqrt(3),yRadius:r/2}:{xRadius:n/2,yRadius:r/Math.sqrt(3)}}if(t>0)return{xRadius:t,yRadius:t};throw new TypeError(`Invalid dimensions: ${JSON.stringify(t)}. Dimensions must be expressed as an Ellipse ({ xRadius: number, yRadius: number }), a Rectangle ({ width: number, height: number }) or a number.`)}function ate(t,e){if(ste(t))return t;if(!e)throw new TypeError(`Supply a bounding box ({ width: number, height: number }). Received: ${JSON.stringify(e)}`);if(t==="topLeft")return{x:e.width*-.5,y:e.height*-.5};throw new TypeError(`Invalid origin: ${JSON.stringify(t)}. Origin must be expressed as a Point ({ x: number, y: number }) or the string 'topLeft'.`)}class GS{constructor(e=[0,0]){_t(this,"q");_t(this,"r");const{q:n,r}=s_(this,e);this.q=n,this.r=r}static get settings(){const{dimensions:e,orientation:n,origin:r,offset:i}=this.prototype;return{dimensions:e,orientation:n,origin:r,offset:i}}get center(){const{width:e,height:n,x:r,y:i}=this;return{x:e/2-r,y:n/2-i}}get col(){return lP(this).col}get corners(){const{orientation:e,width:n,height:r,x:i,y:s}=this;return e===bs.POINTY?lte(n,r,i,s):ute(n,r,i,s)}get dimensions(){return Ah.dimensions}get height(){const{orientation:e,dimensions:{yRadius:n}}=this;return e===bs.POINTY?n*2:n*Math.sqrt(3)}get isFlat(){return this.orientation===bs.FLAT}get isPointy(){return this.orientation===bs.POINTY}get orientation(){return Ah.orientation}get origin(){return Ah.origin}get offset(){return Ah.offset}get row(){return lP(this).row}get width(){const{orientation:e,dimensions:{xRadius:n}}=this;return e===bs.POINTY?n*Math.sqrt(3):n*2}get x(){return uP(this).x}get y(){return uP(this).y}get s(){return-this.q-this.r}clone(e=this){return new this.constructor(e)}equals(e){return cte(this,w0(e)?rI(this,e):e)}toString(){return`${this.constructor.name}(${this.q},${this.r})`}translate(e){return pte(this,e)}}const Ah={dimensions:{xRadius:1,yRadius:1},orientation:bs.POINTY,origin:{x:0,y:0},offset:-1},lte=(t,e,n,r)=>[{x:n+t*.5,y:r-e*.25},{x:n+t*.5,y:r+e*.25},{x:n,y:r+e*.5},{x:n-t*.5,y:r+e*.25},{x:n-t*.5,y:r-e*.25},{x:n,y:r-e*.5}],ute=(t,e,n,r)=>[{x:n+t*.25,y:r-e*.5},{x:n+t*.5,y:r},{x:n+t*.25,y:r+e*.5},{x:n-t*.25,y:r+e*.5},{x:n-t*.5,y:r},{x:n-t*.25,y:r-e*.5}];function eI(t){const{dimensions:e,orientation:n,origin:r,offset:i}={...Ah,...t};return class extends GS{get dimensions(){return ote(e,n)}get orientation(){return n}get origin(){return ate(r,this)}get offset(){return i}}}function cte(t,e){if(w0(t)&&w0(e))return t.col===e.col&&t.row===e.row;if(Object.hasOwn(t,"col")||Object.hasOwn(e,"col"))throw new Error(`Can't compare coordinates where one are offset coordinates. Either pass two offset coordinates or two axial/cube coordinates. Received: ${JSON.stringify(t)} and ${JSON.stringify(e)}`);const n=r_(t)?i_(t):t,r=r_(e)?i_(e):e;return n.q===r.q&&n.r===r.r}const dte=(t,e,n)=>({col:t+uv(n,e),row:e}),hte=(t,e,n)=>({col:t,row:e+uv(n,t)}),lP=({q:t,r:e,offset:n,isPointy:r})=>r?dte(t,e,n):hte(t,e,n),uP=({orientation:t,dimensions:{xRadius:e,yRadius:n},origin:{x:r,y:i},q:s,r:o})=>t===bs.POINTY?{x:e*Math.sqrt(3)*(s+o/2)-r,y:n*3/2*o-i}:{x:e*3/2*s-r,y:n*Math.sqrt(3)*(o+s/2)-i},tI=(t,e,n)=>{const r=t-uv(n,e),i=e,s=-r-i;return{q:r,r:i,s}},nI=(t,e,n)=>{const r=t,i=e-uv(n,t),s=-r-i;return{q:r,r:i,s}},rI=({offset:t,orientation:e},{col:n,row:r})=>e===bs.POINTY?tI(n,r,t):nI(n,r,t),cP=t=>{const{q:e,r:n,s:r}=x0(t);let i=Math.round(e),s=Math.round(n),o=Math.round(r);const a=Math.abs(e-i),l=Math.abs(n-s),c=Math.abs(r-o);return a>l&&a>c?i=-s-o:l>c?s=-i-o:o=-i-s,{q:i,r:s,s:o}},fte=({dimensions:{xRadius:t,yRadius:e},origin:n,orientation:r},{x:i,y:s})=>(i+=n.x,s+=n.y,r===bs.POINTY?cP({q:Math.sqrt(3)*i/(3*t)-s/(3*e),r:2/3*(s/e)}):cP({q:2/3*(i/t),r:Math.sqrt(3)*s/(3*e)-i/(3*t)}));function s_(t,e){return r_(e)?i_(e):w0(e)?rI(t,e):x0(e)}function pte(t,e){const{q:n,r,s:i}=x0(t),{q:s,r:o,s:a}=x0(e),l={q:n+s,r:r+o,s:i+a};return t instanceof GS?t.clone(l):l}function dP(t,e,n){const{q:r,r:i,s}=s_(t,e),{q:o,r:a,s:l}=s_(t,n);return Math.max(Math.abs(r-o),Math.abs(i-a),Math.abs(s-l))}var Zs=(t=>(t[t.N=0]="N",t[t.NE=1]="NE",t[t.E=2]="E",t[t.SE=3]="SE",t[t.S=4]="S",t[t.SW=5]="SW",t[t.W=6]="W",t[t.NW=7]="NW",t))(Zs||{});const gte=[null,{q:1,r:-1},{q:1,r:0},{q:0,r:1},null,{q:-1,r:1},{q:-1,r:0},{q:0,r:-1}],mte=[{q:0,r:-1},{q:1,r:-1},null,{q:1,r:0},{q:0,r:1},{q:-1,r:1},null,{q:-1,r:0}],vte=({offset:t,q:e,r:n,col:r,row:i},s)=>{if(s===Zs.S||s===Zs.N){const a=s===Zs.S?i+1:i-1;return tI(r,a,t)}const o=gte[s];return{q:e+o.q,r:n+o.r}},yte=({offset:t,q:e,r:n,col:r,row:i},s)=>{if(s===Zs.E||s===Zs.W){const a=s===Zs.E?r+1:r-1;return nI(a,i,t)}const o=mte[s];return{q:e+o.q,r:n+o.r}},wte=(t,e)=>t.clone(t.isPointy?vte(t,e):yte(t,e));function xte(t){return Array.isArray(t)?function(e,n){const r=[];let i=n;for(const s of t)for(const o of s(e,i))r.push(i=o);return r}:t}Zs.E,Zs.N,Zs.S,Zs.W;var ms,Ja,fu,Nh,$f,a_,zf,l_,Uf,u_;const ea=class ea{constructor(e,n=[]){Yl(this,fu);Yl(this,$f);Yl(this,zf);Yl(this,Uf);Yl(this,ms,void 0);Yl(this,Ja,new Map);if(e instanceof ea){ay(this,ms,Ui(e,ms)),this.setHexes(e);return}ay(this,ms,e),this.setHexes($s(this,$f,a_).call(this,n))}static fromIterable(e){const n=e[Symbol.iterator]().next().value;if(!n)throw new TypeError(`Can't create grid from empty iterable: ${JSON.stringify(e)}`);return new ea(n.constructor,e)}static fromJSON({hexSettings:e,coordinates:n},r){if(r){const s=n.map(r),o=s.length>0?s[0].constructor:r({q:0,r:0},0,[{q:0,r:0}]).constructor;return new ea(o,s)}const i=eI(e);return new ea(i,n.map(s=>new i(s)))}get size(){return Ui(this,Ja).size}get pixelWidth(){if(this.size===0)return 0;const{isPointy:e,width:n}=this.hexPrototype,r=this.toArray(),{0:i,length:s,[s-1]:o}=e?r.sort((a,l)=>l.s-a.s||a.q-l.q):r.sort((a,l)=>a.q-l.q);return o.x-i.x+n}get pixelHeight(){if(this.size===0)return 0;const{isPointy:e,height:n}=this.hexPrototype,r=this.toArray(),{0:i,length:s,[s-1]:o}=e?r.sort((a,l)=>a.r-l.r):r.sort((a,l)=>l.s-a.s||a.r-l.r);return o.y-i.y+n}[Symbol.iterator](){return Ui(this,Ja).values()}get hexPrototype(){return Ui(this,ms).prototype}createHex(e){return new(Ui(this,ms))(e)}getHex(e){const n=this.createHex(e);return Ui(this,Ja).get(n.toString())}hasHex(e){return Ui(this,Ja).has(e.toString())}setHexes(e){for(const n of e){const r=n instanceof GS?n:new(Ui(this,ms))(n);$s(this,fu,Nh).call(this,r)}return this}filter(e){var r;const n=new ea(Ui(this,ms));for(const i of this)e(i)&&$s(r=n,fu,Nh).call(r,i);return n}map(e){var r;const n=new ea(Ui(this,ms));for(const i of this)$s(r=n,fu,Nh).call(r,e(i));return n}traverse(e,{bail:n=!1}={}){var i;const r=new ea(Ui(this,ms));for(const s of $s(this,$f,a_).call(this,e)){const o=this.getHex(s);if(o)$s(i=r,fu,Nh).call(i,o);else if(n)return r}return r}forEach(e){for(const n of this)e(n);return this}reduce(e,n){if(n===void 0){let i,s,o;for(const a of this)s=o,o=a,s&&(i=e(s,o));return i}let r=n;for(const i of this)r=e(r,i);return r}toArray(){return Array.from(this)}toJSON(){const{dimensions:e,orientation:n,origin:r,offset:i}=this.hexPrototype;return{hexSettings:{dimensions:e,orientation:n,origin:r,offset:i},coordinates:this.toArray()}}toString(){return`${this.constructor.name}(${this.size})`}pointToHex(e,{allowOutside:n=!0}={}){const r=fte(this.hexPrototype,e),i=this.getHex(r);return n?i??this.createHex(r):i}distance(e,n,{allowOutside:r=!0}={}){if(r)return dP(this.hexPrototype,e,n);const i=this.getHex(e),s=this.getHex(n);if(!(!i||!s))return dP(this.hexPrototype,i,s)}neighborOf(e,n,{allowOutside:r=!0}={}){const i=wte(this.createHex(e),n),s=this.getHex(i);return r?s??i:s}};ms=new WeakMap,Ja=new WeakMap,fu=new WeakSet,Nh=function(e){Ui(this,Ja).set(e.toString(),e)},$f=new WeakSet,a_=function(e){return $s(this,zf,l_).call(this,e)?$s(this,Uf,u_).call(this,e):Array.isArray(e)&&$s(this,zf,l_).call(this,e[0])?$s(this,Uf,u_).call(this,xte(e)):e},zf=new WeakSet,l_=function(e){return ite(e)},Uf=new WeakSet,u_=function(e){return e(this.createHex.bind(this))};let o_=ea;const _te=t=>{const e=bs.FLAT,n=eI({dimensions:t.hexSize,orientation:e,origin:{x:0,y:0}}),r=new o_(n),i=r.createHex({q:0,r:0}),s=i.width,o=i.height;return{grid:r,hexWidth:s,hexHeight:o,hexToPixel:h=>{const f=r.createHex({q:h.q,r:h.r});return{x:f.x,y:f.y}},pixelToHex:h=>{const f=r.pointToHex(h);return{q:f.q,r:f.r,s:f.s}},hexToCorners:h=>r.createHex({q:h.q,r:h.r}).corners.map(p=>({x:p.x,y:p.y}))}};const yh="grid-layer",V1=1,W1=30,bte=.5,hP=11,H1=.5,G1=20,Ste=.5,fP=11,c_=(t,e,n)=>Math.min(n,Math.max(e,t)),pP=(t,e,n)=>(c_(t,e,n)-e)/(n-e)*100,gP=(t,e)=>{const n=t.trim();if(!n)return e;if(n.startsWith("#"))return n;const r=n.match(/rgba?\((\d+),\s*(\d+),\s*(\d+)/i);if(!r)return e;const i=s=>Number(s).toString(16).padStart(2,"0");return`#${i(r[1])}${i(r[2])}${i(r[3])}`};function Cte(){var Ma;const{projectId:t}=lb(),{user:e}=Oi(),n=ro(),{project:r,config:i,isLoading:s,isSaving:o,error:a,saveConfig:l}=Kj(t,e==null?void 0:e.id),c=i.gridType==="hex"?i:dr,h=c.hexSettings??dr.hexSettings??{hexSize:80,orientation:"pointy"},f=Math.max(c.gridColumns||dr.gridColumns,c.gridRows||dr.gridRows),p=Math.max(1,Math.ceil(f/2)),[g,v]=y.useState(c.hexWidgets??[]),[x,k]=y.useState(null),[C,b]=y.useState(null),[_,T]=y.useState(null),[R,L]=y.useState(null),[M,A]=y.useState(null),[$,j]=y.useState(null),[V,U]=y.useState(1),[B,Z]=y.useState({x:0,y:0}),[q,G]=y.useState(!1),[te,O]=y.useState(!1),[K,Y]=y.useState(()=>Object.fromEntries(F1.map(F=>[F.title,!1]))),[xe,re]=y.useState(!1),[ue,ke]=y.useState(!1),[qe,he]=y.useState(!1),[ge,we]=y.useState(!1),[ae,me]=y.useState(()=>c.layers&&c.layers.length>0?c.layers:[{id:yh,name:"Grid Map Layer",kind:"grid",visible:!0}]),[X,ye]=y.useState(c.activeLayerId??yh),_e=y.useRef(ae),at=y.useRef(X),[Le,fe]=y.useState(Number.isFinite(c.gridLineWidth)?Number(c.gridLineWidth):dr.gridLineWidth??1),[ve,Ae]=y.useState(Number.isFinite(c.gridBorderWidth)?Number(c.gridBorderWidth):dr.gridBorderWidth??2),[De,Ue]=y.useState(c.gridLineColor??""),[Ie,ze]=y.useState(c.gridBorderColor??""),Ce=y.useRef(Le),Oe=y.useRef(ve),Ne=y.useRef(De),yt=y.useRef(Ie),[Fe,st]=y.useState(!1),[wt,At]=y.useState(!1),[Ye,Re]=y.useState(!1),[Te,pe]=y.useState(!1),[be,gt]=y.useState(!1),[nt,lt]=y.useState(null),[Ke,xt]=y.useState(!1),[Lt,rt]=y.useState(null),[Nt,ht]=y.useState(null),zt=y.useRef(null),Et=y.useRef(null),ut=y.useMemo(()=>ae.find(F=>F.id===X),[ae,X]),Xt=(ut==null?void 0:ut.kind)==="grid",ft=(ut==null?void 0:ut.kind)==="tiles",Ft=((Ma=ae.find(F=>F.kind==="grid"))==null?void 0:Ma.visible)??!0,St=y.useMemo(()=>{var F;return((F=ae.find(H=>H.kind==="tiles"))==null?void 0:F.id)??null},[ae]),ln=y.useMemo(()=>[...ae].reverse(),[ae]),Gt=y.useMemo(()=>{const F=new Map,H=St??yh;return g.forEach(Q=>{var D;const N=Q.layerId??H;F.has(N)||F.set(N,[]),(D=F.get(N))==null||D.push(Q)}),F},[St,g]);y.useEffect(()=>{Xt||(st(!1),Re(!1)),ft||gt(!1)},[Xt,ft]);const qt=y.useMemo(()=>{const F=new Map;return F1.forEach(H=>{H.tiles.forEach(Q=>{F.set(Q.id,Q)})}),F},[]),mt=y.useMemo(()=>_te(h),[h.hexSize,h.orientation]),vt=y.useCallback(F=>{const H=[];for(let Q=-F+1;Q<=F-1;Q+=1)for(let N=-F+1;N<=F-1;N+=1){const D=-Q-N;Math.max(Math.abs(Q),Math.abs(N),Math.abs(D))<F&&H.push({q:Q,r:N,s:D})}return H},[]),[Ut,kr]=y.useState(()=>c.allowedHexCells&&c.allowedHexCells.length>0?c.allowedHexCells:vt(p)),zn=y.useMemo(()=>new Set(Ut.map(F=>`${F.q},${F.r}`)),[Ut]),Un=y.useMemo(()=>{if(!Ut.length)return null;let F=Number.POSITIVE_INFINITY,H=Number.POSITIVE_INFINITY,Q=Number.NEGATIVE_INFINITY,N=Number.NEGATIVE_INFINITY;return Ut.forEach(D=>{mt.hexToCorners({q:D.q,r:D.r}).forEach(ie=>{F=Math.min(F,ie.x),H=Math.min(H,ie.y),Q=Math.max(Q,ie.x),N=Math.max(N,ie.y)})}),{minX:F,minY:H,maxX:Q,maxY:N,width:Q-F,height:N-H}},[Ut,mt]),Yr=y.useMemo(()=>{if(!Ut.length)return[];const F=new Map,H=Q=>`${Q.x.toFixed(4)},${Q.y.toFixed(4)}`;return Ut.forEach(Q=>{const N=mt.hexToCorners({q:Q.q,r:Q.r});for(let D=0;D<N.length;D+=1){const z=N[D],ie=N[(D+1)%N.length],le=H(z),de=H(ie),Ge=le<de?`${le}|${de}`:`${de}|${le}`,$e=F.get(Ge);$e?$e.count+=1:F.set(Ge,{start:z,end:ie,count:1})}}),Array.from(F.values()).filter(Q=>Q.count===1)},[Ut,mt]),Er=y.useRef(null),so=y.useRef(null),Dl=y.useRef(null),Or=y.useRef(!1),pr=y.useRef(null),ci=y.useRef(!1),Xn=y.useRef({x:0,y:0}),Rr=y.useRef(V),oo=y.useRef(null),Io=y.useRef(null),ba=y.useRef(!1),Fi=y.useRef(new Map),Kr=y.useRef(null),Dr=y.useRef(null),is=y.useRef(null),Ns=y.useRef(!1),Si=y.useRef(!1),di=y.useRef(!1),tn=y.useRef(null),Yt=y.useRef(r==null?void 0:r.id);y.useEffect(()=>{_e.current=ae},[ae]),y.useEffect(()=>{at.current=X},[X]),y.useEffect(()=>{Ce.current=Le},[Le]),y.useEffect(()=>{Oe.current=ve},[ve]),y.useEffect(()=>{Ne.current=De},[De]),y.useEffect(()=>{yt.current=Ie},[Ie]);const sn=y.useCallback(async()=>{if(Ns.current||!Kr.current)return;const F=Kr.current;Kr.current=null,Ns.current=!0;let H=!1;try{await l(F)}catch(Q){console.error("Failed to save hex battle map",Q),H=!0}finally{Ns.current=!1,Kr.current?sn():H||(Si.current=!1)}},[l]),Rt=y.useCallback((F,H,Q)=>{Si.current=!0,Kr.current={gridType:"hex",gridColumns:p*2-1,gridRows:p*2-1,cellSize:c.cellSize||h.hexSize,gridLineColor:Ne.current||void 0,gridBorderColor:yt.current||void 0,gridLineWidth:Ce.current,gridBorderWidth:Oe.current,widgets:[],hexSettings:h,hexWidgets:F,allowedHexCells:Q??Ut,layers:(H==null?void 0:H.layers)??_e.current,activeLayerId:(H==null?void 0:H.activeLayerId)??at.current,version:c.version,updated_at:c.updated_at},Dr.current&&clearTimeout(Dr.current),Dr.current=setTimeout(()=>{Dr.current=null,sn()},80)},[Ut,sn,p,c.cellSize,c.updated_at,c.version,h]),on=y.useCallback((F,H=X)=>{me(F),ye(H),Rt(g,{layers:F,activeLayerId:H})},[X,g,Rt]),Fr=y.useCallback(()=>{Rt(g)},[g,Rt]),Vn=y.useCallback(()=>{is.current&&clearTimeout(is.current),is.current=setTimeout(()=>{is.current=null,Fr()},250)},[Fr]);y.useEffect(()=>{const F=(r==null?void 0:r.id)&&(r==null?void 0:r.id)!==Yt.current;if(i.gridType!=="hex")return;const H=i.version??0;(F||!di.current||!Si.current&&H>=(tn.current??-1))&&(v(i.hexWidgets??[]),me(i.layers&&i.layers.length>0?i.layers:[{id:yh,name:"Grid Map Layer",kind:"grid",visible:!0}]),ye(i.activeLayerId??yh),i.allowedHexCells&&i.allowedHexCells.length>0?kr(i.allowedHexCells):(F||!di.current)&&kr(vt(p)),fe(Number.isFinite(i.gridLineWidth)?Number(i.gridLineWidth):dr.gridLineWidth??1),Ae(Number.isFinite(i.gridBorderWidth)?Number(i.gridBorderWidth):dr.gridBorderWidth??2),Ue(i.gridLineColor??""),ze(i.gridBorderColor??""),di.current=!0,tn.current=H,Yt.current=r==null?void 0:r.id)},[vt,i,p,r==null?void 0:r.id]),y.useEffect(()=>()=>{Dr.current&&clearTimeout(Dr.current),is.current&&clearTimeout(is.current)},[]);const Cn=y.useCallback(F=>{if(!be||!nt||!ft||!X||!Ut.some(z=>z.q===F.q&&z.r===F.r))return;const Q=`${F.q},${F.r}`;if(zt.current===Q)return;const N=qt.get(nt);if(!N)return;let D=!1;v(z=>{const ie=z.find(Ge=>Ge.q===F.q&&Ge.r===F.r);if(ie){if((ie.layerId??St)!==X)return z;const $e=z.map(Ve=>Ve.id===ie.id?{...Ve,tileId:N.id,appearance:{backgroundImageUrl:N.image}}:Ve);return Rt($e),D=!0,$e}const le={id:fr(),gridType:"hex",q:F.q,r:F.r,s:F.s??-(F.q+F.r),layerId:X,tileId:N.id,appearance:{backgroundImageUrl:N.image}},de=[...z,le];return Rt(de),D=!0,de}),zt.current=Q,D&&j("Painted tile.")},[X,Ut,St,be,ft,Rt,nt,qt]),Ht=y.useCallback((F,H=Rr.current)=>{Xn.current=F,Io.current={pan:F,scale:H},so.current&&so.current.setAttribute("transform",`translate(${F.x} ${F.y}) scale(${H})`),oo.current===null&&(oo.current=requestAnimationFrame(()=>{oo.current=null;const Q=Io.current;!Q||!so.current||so.current.setAttribute("transform",`translate(${Q.pan.x} ${Q.pan.y}) scale(${Q.scale})`)}))},[]),Pn=y.useCallback((F,H)=>{Ht(F,H??Rr.current),Z(F)},[Ht]);y.useEffect(()=>()=>{oo.current!==null&&cancelAnimationFrame(oo.current)},[]),y.useLayoutEffect(()=>{Rr.current=V,Ht(Xn.current,V)},[V,Ht]),y.useLayoutEffect(()=>{Xn.current=B,Ht(B,Rr.current)},[B,Ht]);const Ln=y.useCallback((F,H)=>{var z;const Q=(z=Er.current)==null?void 0:z.getBoundingClientRect();if(!Q)return null;const N=Xn.current,D=Rr.current;return{x:(F-Q.left-N.x)/D,y:(H-Q.top-N.y)/D}},[]),Ci=y.useCallback(F=>{var z;const H=(z=Er.current)==null?void 0:z.getBoundingClientRect();if(!H||!Un)return;const Q=F??V,N=Un.minX+Un.width/2,D=Un.minY+Un.height/2;Pn({x:H.width/2-N*Q,y:H.height/2-D*Q})},[Pn,Un,V]),hi=y.useCallback(F=>{const H=g.filter(Q=>Q.id!==F);v(H),Rt(H),b(null),j("Tile deleted.")},[g,Rt]),gr=y.useCallback((F,H)=>{if(F===void 0||H===void 0)return;const Q=Ln(F,H);if(!Q)return;const N=mt.pixelToHex(Q),D=g.find(z=>z.q===N.q&&z.r===N.r);D&&hi(D.id)},[mt,hi,g,Ln]),Oo=y.useCallback((F,H)=>F.q===H.q&&F.r===H.r,[]),ss=y.useCallback((F,H)=>{if(F===void 0||H===void 0)return;const Q=Ln(F,H);if(!Q)return;const N=mt.pixelToHex(Q),D=`${N.q},${N.r}`;Et.current!==D&&(Et.current=D,kr(z=>{if(z.some(de=>de.q===N.q&&de.r===N.r))return z;const le=[...z,N];return Rt(g,void 0,le),j("Added hex tile to grid."),le}))},[mt,g,Rt,Ln]),ao=y.useCallback((F,H)=>{if(F===void 0||H===void 0)return;const Q=Ln(F,H);if(!Q)return;const N=mt.pixelToHex(Q),D=`${N.q},${N.r}`;Et.current!==D&&(Et.current=D,kr(z=>{if(!z.some(de=>de.q===N.q&&de.r===N.r))return z;const le=z.filter(de=>de.q!==N.q||de.r!==N.r);return v(de=>{const Ge=de.filter($e=>!Oo($e,N));return C&&de.some($e=>$e.id===C)&&(Ge.some(Ve=>Ve.id===C)||b(null)),Rt(Ge,void 0,le),j("Removed hex tile from grid."),Ge}),le}))},[Oo,mt,Rt,C,Ln]),Xr=y.useCallback((F,H)=>{const Q=Dl.current;if(!Q||F===void 0||H===void 0)return!1;const N=Q.getBoundingClientRect();return F>=N.left&&F<=N.right&&H>=N.top&&H<=N.bottom},[]),ki=y.useCallback((F,H)=>{const Q=Xr(F,H);return Or.current=Q,we(Q),Q},[Xr]);y.useEffect(()=>{const F=()=>{var Q;((Q=Er.current)==null?void 0:Q.getBoundingClientRect())&&(ba.current||(Ci(),ba.current=!0))};return F(),window.addEventListener("resize",F),()=>window.removeEventListener("resize",F)},[Un,Ci]),y.useEffect(()=>{const F=Q=>{Q.code==="Space"&&G(!0),(Q.key==="Delete"||Q.key==="Backspace")&&C&&(Q.preventDefault(),hi(C))},H=Q=>{Q.code==="Space"&&(G(!1),O(!1))};return window.addEventListener("keydown",F),window.addEventListener("keyup",H),()=>{window.removeEventListener("keydown",F),window.removeEventListener("keyup",H)}},[hi,C]),y.useEffect(()=>{const F=H=>{if(H.code!=="Space")return;const Q=document.activeElement;!Q||!Q.closest(".battlemap-workspace")||!Q.closest('button, [role="button"]')||H.preventDefault()};return window.addEventListener("keydown",F,{capture:!0}),()=>{window.removeEventListener("keydown",F,{capture:!0})}},[]),y.useEffect(()=>{be||(xt(!1),lt(null),zt.current=null)},[be]),y.useEffect(()=>{Fe||At(!1),Ye||pe(!1),!Fe&&!Ye&&(rt(null),ht(null),Et.current=null)},[Fe,Ye]),y.useEffect(()=>{if(!_)return;const F=Q=>{A({x:Q.clientX,y:Q.clientY});const N=Ln(Q.clientX,Q.clientY);if(!N){k(null),re(!1),ki(Q.clientX,Q.clientY);return}const D=mt.pixelToHex(N),z=Ut.some(ie=>ie.q===D.q&&ie.r===D.r);k(D),re(z),ki(Q.clientX,Q.clientY)},H=Q=>{A({x:Q.clientX,y:Q.clientY});const N=ki(Q.clientX,Q.clientY),D=Ln(Q.clientX,Q.clientY),z=D?mt.pixelToHex(D):x,ie=z?Ut.some(le=>le.q===z.q&&le.r===z.r):!1;if(N&&(_==null?void 0:_.type)==="widget")hi(_.widget.id);else if(z&&ie){const le=g.find(de=>de.q===z.q&&de.r===z.r);if(_.type==="palette")if(!ft||!X)j("Select a Tile Layer to place tiles.");else if(le)j("That hex is already occupied.");else{const de={id:fr(),gridType:"hex",q:z.q,r:z.r,s:z.s,layerId:X,tileId:_.tile.id,appearance:{backgroundImageUrl:_.tile.image}},Ge=[...g,de];v(Ge),Rt(Ge),j("Placed tile on hex grid.")}else{const de=R??_.widget,Ge=de.q===z.q&&de.r===z.r;if(le&&le.id!==_.widget.id){if((le.layerId??St)!==X){j("That hex is already occupied.");return}const Ve=g.map(Bt=>Bt.id===_.widget.id?{...Bt,q:z.q,r:z.r,s:z.s}:Bt.id===le.id?{...Bt,q:de.q,r:de.r,s:de.s}:Bt);v(Ve),Rt(Ve),j("Swapped tiles.")}else if(!Ge){const $e=g.map(Ve=>Ve.id===_.widget.id?{...Ve,q:z.q,r:z.r,s:z.s}:Ve);v($e),Rt($e),j("Moved tile.")}}}else _.type==="widget"?j("Outside the grid. Returning tile to its spot."):_.type==="palette"&&j("Drop tiles inside the grid.");T(null),L(null),k(null),re(!1),A(null),we(!1),Or.current=!1};return window.addEventListener("mousemove",F),window.addEventListener("mouseup",H),()=>{window.removeEventListener("mousemove",F),window.removeEventListener("mouseup",H),he(!1)}},[X,Ut,St,_,R,mt,hi,g,x,ft,Rt,he,Ln,ki]);const Bi=y.useCallback(F=>{q&&(F.preventDefault(),O(!0),ci.current=!0,pr.current={x:F.clientX,y:F.clientY,panX:Xn.current.x,panY:Xn.current.y})},[q]),os=y.useCallback(F=>{if(!ci.current||!pr.current)return;const H=F.clientX-pr.current.x,Q=F.clientY-pr.current.y;Ht({x:pr.current.panX+H,y:pr.current.panY+Q},Rr.current)},[Ht]),js=y.useCallback(()=>{O(!1),ci.current=!1,pr.current=null,Z(Xn.current)},[]);y.useEffect(()=>{if(!te)return;const F=Q=>{if(!ci.current||!pr.current)return;const N=Q.clientX-pr.current.x,D=Q.clientY-pr.current.y;Ht({x:pr.current.panX+N,y:pr.current.panY+D},Rr.current)},H=()=>{js()};return window.addEventListener("mousemove",F),window.addEventListener("mouseup",H),()=>{window.removeEventListener("mousemove",F),window.removeEventListener("mouseup",H)}},[te,Ht,js]);const Sa=y.useCallback(F=>{ue&&(F.preventDefault(),he(!0),gr(F.clientX,F.clientY))},[gr,ue]),Ca=y.useCallback(F=>{!ue||!qe||(F.preventDefault(),gr(F.clientX,F.clientY))},[gr,qe,ue]),ka=y.useCallback(()=>{ue&&he(!1)},[ue]),as=y.useCallback((F,H)=>{if(F===void 0||H===void 0||!Fe&&!Ye)return;const Q=Ln(F,H);if(!Q){rt(null),ht(null);return}const N=mt.pixelToHex(Q),D=`${N.q},${N.r}`;if(Fe&&!zn.has(D)){rt(N),ht("expand");return}if(Ye&&zn.has(D)){rt(N),ht("shrink");return}rt(null),ht(null)},[zn,mt,Fe,Ye,Ln]),Do=y.useCallback((F,H)=>{Fe&&(Et.current=null,At(!0),ss(F,H))},[ss,Fe]),jd=y.useCallback((F,H)=>{!Fe||!wt||ss(F,H)},[ss,Fe,wt]),Fo=y.useCallback(()=>{wt&&(At(!1),Et.current=null)},[wt]),Vt=y.useCallback((F,H)=>{Ye&&(Et.current=null,pe(!0),ao(F,H))},[Ye,ao]),Du=y.useCallback((F,H)=>{!Ye||!Te||ao(F,H)},[Ye,Te,ao]),Ea=y.useCallback(()=>{Te&&(pe(!1),Et.current=null)},[Te]),Ra=y.useCallback(F=>{var z;F.preventDefault();const H=.0015,Q=Math.min(10,Math.max(.1,Rr.current*Math.exp(-F.deltaY*H))),N=(z=Er.current)==null?void 0:z.getBoundingClientRect();if(!N){U(Q),Rr.current=Q,Ht(Xn.current,Q);return}const D=Ln(F.clientX,F.clientY);if(U(Q),Rr.current=Q,D){const ie=F.clientX-N.left,le=F.clientY-N.top;Pn({x:ie-D.x*Q,y:le-D.y*Q},Q)}},[Pn,Ht,Ln]);y.useEffect(()=>{const F=Er.current;if(!F)return;const H=Q=>{Ra(Q)};return F.addEventListener("wheel",H,{passive:!1}),()=>{F.removeEventListener("wheel",H)}},[Ra,s]);const Id=y.useCallback((F,H)=>{if(H.preventDefault(),!!ft){if(be){lt(F.id),j(`Draw mode: ${F.label} selected.`);return}T({type:"palette",tile:F}),j(null)}},[be,ft]),Od=y.useCallback((F,H)=>{const Q=F.layerId??St;if(!(!ft||Q!==X)&&!(q||be)){if(H.preventDefault(),ue){hi(F.id);return}b(F.id),T({type:"widget",widget:F}),L({q:F.q,r:F.r,s:F.s}),A({x:H.clientX,y:H.clientY}),j(null)}},[X,St,hi,ue,be,q,ft]),Mn=y.useCallback((F,H)=>{if(!be||q||!ft)return;if(!nt){j("Select a tile to draw.");return}if(F===void 0||H===void 0)return;const Q=Ln(F,H);if(!Q)return;zt.current=null;const N=mt.pixelToHex(Q);Cn(N),xt(!0)},[mt,be,q,ft,Cn,nt,Ln]),Ta=y.useCallback((F,H)=>{if(!be||!Ke||F===void 0||H===void 0)return;const Q=Ln(F,H);if(!Q)return;const N=mt.pixelToHex(Q);Cn(N)},[mt,be,Ke,Cn,Ln]),Fu=y.useCallback(()=>{Ke&&(xt(!1),zt.current=null)},[Ke]),Pa=y.useMemo(()=>{var F,H;return _?_.type==="palette"?_.tile.image:((F=qt.get(_.widget.tileId))==null?void 0:F.image)??((H=_.widget.appearance)==null?void 0:H.backgroundImageUrl)??null:null},[_,qt]),ls=y.useMemo(()=>{const F=mt.hexToCorners({q:0,r:0}),H=Math.min(...F.map(de=>de.x)),Q=Math.max(...F.map(de=>de.x)),N=Math.min(...F.map(de=>de.y)),D=Math.max(...F.map(de=>de.y)),z=Q-H,ie=D-N,le=F.map(de=>`${de.x-H},${de.y-N}`).join(" ");return{width:z,height:ie,points:le}},[mt]),La=y.useMemo(()=>({"--grid-line-color":De||void 0,"--grid-border-color":Ie||void 0,"--grid-line-width":`${Le}px`,"--grid-border-width":`${ve}px`}),[Ie,ve,De,Le]),or=y.useCallback(()=>{var D;const F=(D=Er.current)==null?void 0:D.closest(".hex-workspace"),H=getComputedStyle(F||document.documentElement),Q=parseFloat(H.getPropertyValue("--grid-line-width")),N=parseFloat(H.getPropertyValue("--grid-border-width"));return{background:H.getPropertyValue("--bg").trim()||"#0f172a",gridLine:H.getPropertyValue("--grid-line-color").trim()||"#e2e8f0",gridBorder:H.getPropertyValue("--grid-border-color").trim()||"#f8fafc",gridLineWidth:Number.isFinite(Q)?Q:1,gridBorderWidth:Number.isFinite(N)?N:2,tileBorder:H.getPropertyValue("--grid-border-color").trim()||H.getPropertyValue("--text").trim()||"#6b7280"}},[]),Bu=y.useMemo(()=>De||gP(or().gridLine,"#94a3b8"),[or,De]),Dd=y.useMemo(()=>Ie||gP(or().gridBorder,"#94a3b8"),[or,Ie]),mr=pP(ve,V1,W1),$i=pP(Le,H1,G1),Bo=y.useCallback(async F=>{if(!Un){j("Grid not ready to export.");return}try{const H=Math.max(12,h.hexSize*.25),Q=Un.minX-H,N=Un.minY-H,D=Un.width+H*2,z=Un.height+H*2,{background:ie,gridBorder:le,gridLine:de,gridBorderWidth:Ge,gridLineWidth:$e,tileBorder:Ve}=or(),Bt=new Map;await Promise.all(g.map(async Jn=>{var nn,ar;const pn=((nn=qt.get(Jn.tileId))==null?void 0:nn.image)??((ar=Jn.appearance)==null?void 0:ar.backgroundImageUrl)??void 0;if(!pn||Bt.has(pn))return;const hn=await Xj(pn,Fi.current);Bt.set(pn,hn)}));const Wt=[];Wt.push(`<svg xmlns="http://www.w3.org/2000/svg" width="${D}" height="${z}" viewBox="${Q} ${N} ${D} ${z}" fill="none">`);const Wn=[...ae].reverse(),Zn=Wn.filter(Jn=>Jn.kind==="tiles"&&Jn.visible).flatMap(Jn=>Gt.get(Jn.id)??[]);Zn.length&&(Wt.push("<defs>"),Zn.forEach(Jn=>{const hn=mt.hexToCorners({q:Jn.q,r:Jn.r}).map(ar=>`${ar.x},${ar.y}`).join(" "),nn=`hex-export-${Jn.id.replace(/[^a-zA-Z0-9_-]/g,"-")}`;Wt.push(`<clipPath id="${nn}"><polygon points="${hn}" /></clipPath>`)}),Wt.push("</defs>")),Wn.forEach(Jn=>{Jn.visible&&(Jn.kind==="tiles"&&(Gt.get(Jn.id)??[]).forEach(hn=>{var Wo,Fd;const nn=mt.hexToCorners({q:hn.q,r:hn.r}),ar=nn.map(fi=>`${fi.x},${fi.y}`).join(" "),lo=Math.min(...nn.map(fi=>fi.x)),zo=Math.max(...nn.map(fi=>fi.x)),$l=Math.min(...nn.map(fi=>fi.y)),Os=Math.max(...nn.map(fi=>fi.y)),Uo=`hex-export-${hn.id.replace(/[^a-zA-Z0-9_-]/g,"-")}`,Vo=((Wo=qt.get(hn.tileId))==null?void 0:Wo.image)??((Fd=hn.appearance)==null?void 0:Fd.backgroundImageUrl)??"",Aa=Vo?Bt.get(Vo)??Vo:"";Aa?Wt.push(`<image href="${Aa}" x="${lo}" y="${$l}" width="${zo-lo}" height="${Os-$l}" preserveAspectRatio="xMidYMid slice" clip-path="url(#${Uo})" />`):Wt.push(`<polygon points="${ar}" fill="#d0d0d0" />`),Wt.push(`<polygon points="${ar}" fill="none" stroke="${Ve}" stroke-width="1.5" />`)}),Jn.kind==="grid"&&(Ut.forEach(pn=>{const hn=mt.hexToCorners({q:pn.q,r:pn.r}).map(nn=>`${nn.x},${nn.y}`).join(" ");Wt.push(`<polygon points="${hn}" fill="none" stroke="${de}" stroke-width="${$e}" />`)}),Yr.forEach(pn=>{Wt.push(`<line x1="${pn.start.x}" y1="${pn.start.y}" x2="${pn.end.x}" y2="${pn.end.y}" stroke="${le}" stroke-width="${Ge}" stroke-linecap="round" stroke-linejoin="round" />`)})))}),Wt.push("</svg>");const Qn=Wt.join(""),xn=new Blob([Qn],{type:"image/svg+xml;charset=utf-8"}),an=URL.createObjectURL(xn),Is=await Zj(an),Hn=document.createElement("canvas");Hn.width=Math.ceil(D),Hn.height=Math.ceil(z);const Zr=Hn.getContext("2d");if(!Zr){URL.revokeObjectURL(an),j("Unable to export: canvas not available.");return}Zr.fillStyle=ie||"transparent",Zr.fillRect(0,0,Hn.width,Hn.height),Zr.drawImage(Is,0,0,Hn.width,Hn.height),URL.revokeObjectURL(an);const $o=F==="png"?"image/png":"image/jpeg",Fl=F==="jpeg"?.92:void 0,Bl=Hn.toDataURL($o,Fl);Qj(Bl,`hex-battle-map.${F==="png"?"png":"jpg"}`),j(`Saved hex battle map as ${F.toUpperCase()}.`)}catch(H){console.error("Hex export failed",H),j("Failed to export hex battle map.")}},[Ut,Yr,mt,or,Un,h.hexSize,ae,qt,Gt]);return s?w.jsx("div",{className:"battlemap-workspace__loading",children:w.jsx("p",{className:"battlemap-workspace__loading-text",children:"Loading hex battle map..."})}):!r||a?w.jsxs("div",{className:"battlemap-workspace__error",children:[w.jsx("p",{className:"battlemap-workspace__error-text",children:a??"Battle map not found."}),w.jsx("button",{className:"button button--ghost battlemap-workspace__error-button",onClick:()=>n("/app"),children:"Back to Projects"})]}):w.jsxs("div",{className:`battlemap-workspace hex-workspace${ue?" is-delete-mode":""}`,style:La,children:[w.jsxs("div",{className:"battlemap-workspace__sidebar hex-workspace__sidebar",children:[w.jsxs("div",{className:"battlemap-workspace__sidebar-header",children:[w.jsx("button",{className:"button button--ghost battlemap-workspace__back-button",onClick:()=>n("/app"),children:"Back to Projects"}),w.jsx("h2",{className:"battlemap-workspace__project-name",children:r.name})]}),w.jsxs("div",{className:"battlemap-workspace__sidebar-actions",children:[w.jsx("button",{type:"button",className:"button button--ghost battlemap-workspace__reset-button",onClick:()=>{U(1),Ci(1)},children:"Reset View"}),w.jsxs("div",{className:"battlemap-workspace__export-actions",children:[w.jsx("button",{type:"button",className:"button battlemap-workspace__export-button",onClick:()=>Bo("png"),children:"Save Battle Map (PNG)"}),w.jsx("button",{type:"button",className:"button button--ghost battlemap-workspace__export-button",onClick:()=>Bo("jpeg"),children:"Save Battle Map (JPEG)"})]})]}),w.jsxs("p",{className:"battlemap-workspace__hint battlemap-workspace__autosave",children:["Auto-save: ",o?"Saving...":"Synced"]}),$?w.jsx("p",{className:"hex-workspace__status",children:$}):null]}),w.jsx("div",{className:"battlemap-workspace__main hex-workspace__main",children:w.jsxs("div",{ref:Er,className:`battlemap-workspace__viewport hex-workspace__viewport${q?" is-space-held":""}${te?" is-panning":""}${Fe?" is-expand-mode":""}${Ye?" is-shrink-mode":""}`,onMouseDown:F=>{q?Bi(F):be?Mn(F.clientX,F.clientY):Fe?Do(F.clientX,F.clientY):Ye?Vt(F.clientX,F.clientY):ue?Sa(F):Bi(F)},onMouseMove:F=>{(Fe||Ye)&&as(F.clientX,F.clientY),te?os(F):be&&Ke?Ta(F.clientX,F.clientY):Fe?jd(F.clientX,F.clientY):Ye?Du(F.clientX,F.clientY):ue?Ca(F):os(F)},onMouseUp:F=>{te?js():be&&Ke?Fu():Fe?Fo():Ye?Ea():ue?ka():js()},onMouseLeave:()=>{te?js():be&&Ke?Fu():Fe?(Fo(),rt(null),ht(null)):Ye?(Ea(),rt(null),ht(null)):ue?ka():js()},children:[w.jsxs("svg",{className:"hex-workspace__surface",children:[w.jsx("defs",{children:g.map(F=>{const Q=mt.hexToCorners({q:F.q,r:F.r}).map(N=>`${N.x},${N.y}`).join(" ");return w.jsx("clipPath",{id:`hex-clip-${F.id}`,clipPathUnits:"userSpaceOnUse",children:w.jsx("polygon",{points:Q})},`clip-${F.id}`)})}),w.jsxs("g",{ref:so,transform:`translate(${B.x} ${B.y}) scale(${V})`,children:[ln.map(F=>{if(!F.visible)return null;if(F.kind==="grid")return w.jsxs("g",{"data-layer":"grid",children:[Ut.map(H=>{const N=mt.hexToCorners({q:H.q,r:H.r}).map(D=>`${D.x},${D.y}`).join(" ");return w.jsx("polygon",{className:"hex-workspace__cell",points:N},`${H.q}-${H.r}`)}),Yr.map((H,Q)=>w.jsx("line",{className:"hex-workspace__grid-boundary",x1:H.start.x,y1:H.start.y,x2:H.end.x,y2:H.end.y},`boundary-${Q}`))]},F.id);if(F.kind==="tiles"){const H=Gt.get(F.id)??[];return H.length?w.jsx("g",{"data-layer":"tiles",children:H.map(Q=>{const N=mt.hexToCorners({q:Q.q,r:Q.r}),D=N.map(Ve=>`${Ve.x},${Ve.y}`).join(" "),z=Math.min(...N.map(Ve=>Ve.x)),ie=Math.max(...N.map(Ve=>Ve.x)),le=Math.min(...N.map(Ve=>Ve.y)),de=Math.max(...N.map(Ve=>Ve.y)),Ge=qt.get(Q.tileId),$e=(_==null?void 0:_.type)==="widget"&&_.widget.id===Q.id;return w.jsxs("g",{className:`hex-workspace__tile${$e?" is-drag-origin":""}`,onMouseDown:Ve=>Od(Q,Ve),children:[Ge?w.jsx("image",{href:Ge.image,x:z,y:le,width:ie-z,height:de-le,preserveAspectRatio:"xMidYMid slice",clipPath:`url(#hex-clip-${Q.id})`}):w.jsx("polygon",{points:D,fill:"#d0d0d0"}),w.jsx("polygon",{className:"hex-workspace__tile-border",points:D})]},Q.id)})},F.id):null}return null}),Ft&&x&&xe&&_?w.jsx("polygon",{className:"hex-workspace__hover",points:mt.hexToCorners({q:x.q,r:x.r}).map(F=>`${F.x},${F.y}`).join(" ")}):null,Ft&&Lt&&Nt==="expand"?w.jsx("polygon",{className:"hex-workspace__expand-preview",points:mt.hexToCorners({q:Lt.q,r:Lt.r}).map(F=>`${F.x},${F.y}`).join(" ")}):null,Ft&&Lt&&Nt==="shrink"?w.jsx("polygon",{className:"hex-workspace__shrink-preview",points:mt.hexToCorners({q:Lt.q,r:Lt.r}).map(F=>`${F.x},${F.y}`).join(" ")}):null]})]}),w.jsx("div",{id:"trash-dropzone",ref:Dl,className:`battlemap-delete-panel${ge?" is-active":""}${ue?" is-toggle-active":""}`,"aria-label":"Drop tiles here to delete them",role:"presentation",onClick:()=>{ke(F=>{const H=!F;return H?(st(!1),gt(!1),Re(!1),j("Delete mode enabled.")):j("Delete mode disabled."),he(!1),H})},children:w.jsx("span",{className:"battlemap-delete-panel__icon","aria-hidden":!0})}),_&&M&&Pa?w.jsx("div",{className:"hex-workspace__drag-preview",style:{left:`${M.x}px`,top:`${M.y}px`,transform:"translate(-50%, -50%)"},children:w.jsxs("svg",{width:ls.width,height:ls.height,viewBox:`0 0 ${ls.width} ${ls.height}`,style:{transform:`scale(${V})`,transformOrigin:"center center"},children:[w.jsx("defs",{children:w.jsx("clipPath",{id:"drag-preview-clip",children:w.jsx("polygon",{points:ls.points})})}),w.jsx("image",{href:Pa,x:0,y:0,width:ls.width,height:ls.height,preserveAspectRatio:"xMidYMid slice",clipPath:"url(#drag-preview-clip)"}),w.jsx("polygon",{className:"hex-workspace__tile-border",points:ls.points})]})}):null]})}),w.jsxs("div",{className:"battlemap-workspace__right-sidebar",children:[w.jsx(Jj,{layers:ae,activeLayerId:X,onActiveLayerChange:F=>{on(ae,F)},onToggleVisibility:F=>{const H=ae.map(Q=>Q.id===F?{...Q,visible:!Q.visible}:Q);on(H)},onAddLayer:F=>{const H=(()=>F==="grid"?"Grid Layer":F==="tiles"?"Tile Layer":F==="image"?"Image Layer":F==="background"?"Background Layer":"Layer")(),Q=ae.filter(z=>z.kind==="tiles").length,N={id:crypto.randomUUID(),name:F==="tiles"?`${H} ${Q+1}`:`${H} ${ae.length}`,kind:F,visible:!0};let D=[...ae];if(F==="tiles"){const z=ae.findIndex(le=>le.kind==="grid"),ie=z>=0?z+1:0;D=[...ae.slice(0,ie),N,...ae.slice(ie)]}else D=[...ae,N];on(D,N.id)},onRenameLayer:(F,H)=>{const Q=ae.map(N=>N.id===F?{...N,name:H}:N);on(Q)},onMoveLayerUp:F=>{const H=ae.findIndex(N=>N.id===F);if(H<=0)return;const Q=[...ae];[Q[H-1],Q[H]]=[Q[H],Q[H-1]],on(Q)},onMoveLayerDown:F=>{const H=ae.findIndex(N=>N.id===F);if(H<0||H>=ae.length-1)return;const Q=[...ae];[Q[H+1],Q[H]]=[Q[H],Q[H+1]],on(Q)},onDeleteLayer:F=>{var z,ie;const H=ae.find(le=>le.id===F);if(!H||H.kind==="grid"||H.kind==="tiles"&&ae.filter(de=>de.kind==="tiles").length<=1||ae.length<=1)return;const Q=ae.filter(le=>le.id!==F),N=ae.findIndex(le=>le.id===F),D=X===F?((z=Q[Math.max(0,N-1)])==null?void 0:z.id)??((ie=Q[0])==null?void 0:ie.id):X;if(H.kind==="tiles"){const le=g.filter(de=>(de.layerId??St)!==F);v(le),me(Q),ye(D),Rt(le,{layers:Q,activeLayerId:D});return}on(Q,D)},onReorderLayers:F=>{on(F)}}),w.jsxs("div",{className:"battlemap-workspace__control-section battlemap-workspace__control-section--compact",children:[w.jsx("h3",{className:"battlemap-workspace__control-title",children:"Grid Properties"}),Xt?w.jsxs(w.Fragment,{children:[w.jsxs("div",{className:"battlemap-grid-toggle-row",children:[w.jsx("button",{type:"button",className:`button button--ghost battlemap-grid-toggle${Fe?" is-active":""}`,onClick:()=>{st(F=>{const H=!F;return H?(ke(!1),gt(!1),Re(!1),j("Expand Hex Grid Mode enabled. Click or drag to add tiles.")):j("Expand Hex Grid Mode disabled."),H})},onKeyDown:F=>{F.code==="Space"&&F.preventDefault()},children:"Expand"}),w.jsx("button",{type:"button",className:`button button--ghost battlemap-grid-toggle${Ye?" is-active":""}`,onClick:()=>{Re(F=>{const H=!F;return H?(ke(!1),gt(!1),st(!1),j("Decrease Hex Grid Mode enabled. Click or drag to remove tiles.")):j("Decrease Hex Grid Mode disabled."),H})},onKeyDown:F=>{F.code==="Space"&&F.preventDefault()},children:"Decrease"})]}),w.jsx("h3",{className:"battlemap-workspace__control-title battlemap-grid-visuals-title",children:"Grid Visuals"}),w.jsxs("div",{className:"battlemap-grid-visual",children:[w.jsxs("div",{className:"battlemap-grid-visual__label-row",children:[w.jsx("span",{children:"Outer Border Thickness"}),w.jsxs("span",{className:"battlemap-grid-visual__value",children:[ve.toFixed(1),"px"]})]}),w.jsxs("div",{className:"battlemap-grid-slider-wrap",style:{"--tick-count":hP},children:[w.jsx("input",{type:"range",min:V1,max:W1,step:bte,value:ve,onChange:F=>{const H=c_(Number(F.target.value),V1,W1);Ae(H),Oe.current=H},onPointerUp:Fr,onKeyUp:Fr,className:"battlemap-grid-slider","aria-label":"Outer border thickness"}),w.jsxs("output",{className:"battlemap-grid-slider__value",style:{left:`${mr}%`},children:[ve.toFixed(1),"px"]}),w.jsx("div",{className:"battlemap-grid-slider__ticks","aria-hidden":!0,children:Array.from({length:hP}).map((F,H)=>w.jsx("span",{},`grid-border-tick-${H}`))})]}),w.jsx("input",{type:"color",value:Dd,onChange:F=>{const H=F.currentTarget.value;ze(H),yt.current=H,Vn()},className:"battlemap-grid-color","aria-label":"Outer border color"})]}),w.jsxs("div",{className:"battlemap-grid-visual",children:[w.jsxs("div",{className:"battlemap-grid-visual__label-row",children:[w.jsx("span",{children:"Inner Grid Thickness"}),w.jsxs("span",{className:"battlemap-grid-visual__value",children:[Le.toFixed(1),"px"]})]}),w.jsxs("div",{className:"battlemap-grid-slider-wrap",style:{"--tick-count":fP},children:[w.jsx("input",{type:"range",min:H1,max:G1,step:Ste,value:Le,onChange:F=>{const H=c_(Number(F.target.value),H1,G1);fe(H),Ce.current=H},onPointerUp:Fr,onKeyUp:Fr,className:"battlemap-grid-slider","aria-label":"Inner grid thickness"}),w.jsxs("output",{className:"battlemap-grid-slider__value",style:{left:`${$i}%`},children:[Le.toFixed(1),"px"]}),w.jsx("div",{className:"battlemap-grid-slider__ticks","aria-hidden":!0,children:Array.from({length:fP}).map((F,H)=>w.jsx("span",{},`grid-line-tick-${H}`))})]}),w.jsx("input",{type:"color",value:Bu,onChange:F=>{const H=F.currentTarget.value;Ue(H),Ne.current=H,Vn()},className:"battlemap-grid-color","aria-label":"Inner grid color"})]})]}):w.jsx("p",{className:"battlemap-workspace__hint",children:"Grid tools appear when the Grid Map Layer is active."}),w.jsx("p",{className:"battlemap-workspace__hint",children:"Hold space + drag to pan. Scroll to zoom. Drop tiles to snap to the grid."})]}),w.jsxs("div",{className:"battlemap-workspace__control-section battlemap-workspace__tiles-panel--sidebar",children:[w.jsx("h3",{className:"battlemap-workspace__control-title",children:"Tiles"}),ft?w.jsxs(w.Fragment,{children:[w.jsx("div",{className:"battlemap-workspace__mode-toggle",children:w.jsx("button",{type:"button",className:`button ${be?"button--primary":"button--ghost"}`,onClick:()=>{gt(F=>{const H=!F;return H?(ke(!1),st(!1),Re(!1),j("Draw mode enabled. Pick a tile, then click or drag on the grid.")):j("Draw mode disabled."),H}),T(null),re(!1),zt.current=null},onKeyDown:F=>{F.code==="Space"&&F.preventDefault()},children:be?"Draw Mode: ON":"Draw Mode"})}),w.jsx("div",{className:"battlemap-workspace__tiles-scroll",children:F1.map(F=>w.jsxs("div",{className:`battlemap-workspace__tile-group${K[F.title]?" is-open":""}`,children:[w.jsxs("button",{type:"button",className:"battlemap-workspace__tile-group-toggle",onClick:()=>Y(H=>({...H,[F.title]:!H[F.title]})),"aria-expanded":K[F.title]??!1,"aria-controls":`tile-group-${F.title}`,children:[w.jsx("span",{className:"battlemap-workspace__tile-group-title",children:F.title}),w.jsx("span",{className:`battlemap-workspace__tile-group-chevron${K[F.title]?" is-open":""}`,"aria-hidden":!0})]}),w.jsx("div",{id:`tile-group-${F.title}`,className:`battlemap-workspace__widget-tray${K[F.title]?" is-open":""}`,role:"region","aria-label":`${F.title} tiles`,children:F.tiles.map(H=>w.jsx("div",{className:"battlemap-workspace__widget-template-wrapper",children:w.jsx("div",{className:`battlemap-workspace__widget-template battlemap-workspace__widget-template--hex${be?" is-draw-mode":""}${nt===H.id?" is-selected":""}`,onMouseDown:Q=>Id(H,Q),"aria-label":`${H.label} tile`,style:{"--widget-bg-image":`url("${H.image}")`},children:w.jsx("div",{className:"battlemap-workspace__widget-template-inner battlemap-workspace__widget-template-inner--hex"})})},H.id))})]},F.title))})]}):w.jsx("p",{className:"battlemap-workspace__hint",children:"Select a Tile Layer to browse and place tiles."})]})]})]})}function kte(){const{projectId:t,projectType:e}=lb(),{user:n}=Oi(),r=ro(),[i,s]=y.useState(null),[o,a]=y.useState(!0),[l,c]=y.useState(null);y.useEffect(()=>{(async()=>{if(!t||!n)return;a(!0);const{data:C,error:b}=await Ct.from("projects").select("*").eq("id",t).eq("user_id",n.id).single();if(b){c(b.message),a(!1);return}s(C),a(!1)})()},[t,n]);const h=(i==null?void 0:i.project_type)??e,f=h==="canvas",p=h==="battle-maps",x=(((i==null?void 0:i.battle_map_config)??{}).gridType??"square")==="hex";return f&&i?w.jsx(qee,{project:i}):p?x?w.jsx(Cte,{}):w.jsx(rte,{}):w.jsxs("div",{className:"page",children:[w.jsxs("header",{className:"page__header",children:[w.jsxs("div",{children:[w.jsx("p",{className:"muted",children:"Workspace"}),w.jsx("h1",{children:(i==null?void 0:i.name)??"Loading project"}),w.jsxs("p",{className:"muted",children:["Project type: ",(i==null?void 0:i.project_type)??e]})]}),w.jsx("button",{className:"button button--ghost",onClick:()=>r("/app"),children:"Back to My Projects"})]}),o?w.jsx("p",{className:"muted",children:"Loading project"}):l?w.jsx("div",{className:"card",children:w.jsxs("div",{className:"card__body",children:[w.jsx("p",{className:"strong",children:"Unable to load project"}),w.jsx("p",{className:"muted",children:l})]})}):i?w.jsx("div",{className:"card",children:w.jsx("div",{className:"card__body",children:w.jsx("p",{className:"muted",children:"Workspace content will appear here."})})}):null]})}function q1({children:t}){const{user:e,loading:n}=Oi();return n?w.jsx("div",{className:"page",children:w.jsx("p",{className:"muted",children:"Checking authentication"})}):e?t:w.jsx(zm,{to:"/login",replace:!0})}function mP({children:t}){const{user:e,loading:n}=Oi();return n?w.jsx("div",{className:"page",children:w.jsx("p",{className:"muted",children:"Checking authentication"})}):e?w.jsx(zm,{to:"/app",replace:!0}):t}function Ete(){return w.jsxs(rD,{children:[w.jsx(gi,{path:"/app",element:w.jsx(q1,{children:w.jsx(EW,{})})}),w.jsxs(gi,{path:"/settings",element:w.jsx(q1,{children:w.jsx(NW,{})}),children:[w.jsx(gi,{index:!0,element:w.jsx(jR,{})}),w.jsx(gi,{path:"profile",element:w.jsx(jR,{})}),w.jsx(gi,{path:"account",element:w.jsx(jW,{})}),w.jsx(gi,{path:"friends",element:w.jsx(NR,{})}),w.jsx(gi,{path:"notifications",element:w.jsx(NR,{})}),w.jsx(gi,{path:"appearance",element:w.jsx(MR,{})}),w.jsx(gi,{path:"themes",element:w.jsx(MR,{})}),w.jsx(gi,{path:"*",element:w.jsx(zm,{to:"profile",replace:!0})})]}),w.jsx(gi,{path:"/workspace/:projectType/:projectId",element:w.jsx(q1,{children:w.jsx(kte,{})})}),w.jsx(gi,{path:"/login",element:w.jsx(mP,{children:w.jsx(TW,{})})}),w.jsx(gi,{path:"/register",element:w.jsx(mP,{children:w.jsx(PW,{})})}),w.jsx(gi,{path:"*",element:w.jsx(zm,{to:"/app",replace:!0})})]})}document.documentElement.style.setProperty("--asset-base","/Bean_WebApp/");Y1.createRoot(document.getElementById("root")).render(w.jsx(Be.StrictMode,{children:w.jsx(RD,{children:w.jsx(aF,{children:w.jsx(LW,{children:w.jsx(yW,{children:w.jsx(Ete,{})})})})})}));
